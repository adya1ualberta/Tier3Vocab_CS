WE
HAVE
DEVELOPED
THREE
COMPUTER
PROGRAMS
FOR
COMPARISONS
OF
PROTEIN
AND
DNA
SEQUENCES
THEY
CAN
BE
USED
TO
SEARCH
SEQUENCE
DATA
BASES
EVALUATE
SIMILARITY
SCORES
AND
IDENTIFY
PERIODIC
STRUCTURES
BASED
ON
LOCAL
SEQUENCE
SIMILARITY
THE
FASTA
PROGRAM
IS
A
MORE
SENSITIVE
DERIVATIVE
OF
THE
FASTP
PROGRAM
WHICH
CAN
BE
USED
TO
SEARCH
PROTEIN
OR
DNA
SEQUENCE
DATA
BASES
AND
CAN
COMPARE
A
PROTEIN
SEQUENCE
TO
A
DNA
SEQUENCE
DATA
BASE
BY
TRANSLATING
THE
DNA
DATA
BASE
AS
IT
IS
SEARCHED
FASTA
INCLUDES
AN
ADDITIONAL
STEP
IN
THE
CALCULATION
OF
THE
INITIAL
PAIRWISE
SIMILARITY
SCORE
THAT
ALLOWS
MULTIPLE
REGIONS
OF
SIMILARITY
TO
BE
JOINED
TO
INCREASE
THE
SCORE
OF
RELATED
SEQUENCES
THE
PROGRAM
CAN
BE
USED
TO
EVALUATE
THE
SIGNIFICANCE
OF
SIMILARITY
SCORES
USING
A
SHUFFLING
METHOD
THAT
PRESERVES
LOCAL
SEQUENCE
COMPOSITION
THE
LFASTA
PROGRAM
CAN
DISPLAY
ALL
THE
REGIONS
OF
LOCAL
SIMILARITY
BETWEEN
TWO
SEQUENCES
WITH
SCORES
GREATER
THAN
A
THRESHOLD
USING
THE
SAME
SCORING
PARAMETERS
AND
A
SIMILAR
ALIGNMENT
ALGORITHM
THESE
LOCAL
SIMILARITIES
CAN
BE
DISPLAYED
AS
A
GRAPHIC
MATRIX
PLOT
OR
AS
INDIVIDUAL
ALIGNMENTS
IN
ADDITION
THESE
PROGRAMS
HAVE
BEEN
GENERALIZED
TO
ALLOW
COMPARISON
OF
DNA
OR
PROTEIN
SEQUENCES
BASED
ON
A
VARIETY
OF
ALTERNATIVE
SCORING
MATRICES
WE
HAVE
BEEN
DEVELOPING
TOOLS
FOR
THE
ANALYSIS
OF
PROTEIN
AND
DNA
SEQUENCE
SIMILARITY
THAT
ACHIEVE
A
BALANCE
OF
SENSITIVITY
AND
SELECTIVITY
ON
THE
ONE
HAND
AND
SPEED
AND
MEMORY
REQUIREMENTS
ON
THE
OTHER
THREE
YEARS
AGO
WE
DESCRIBED
THE
FASTP
PROGRAM
FOR
SEARCHING
AMINO
ACID
SEQUENCE
DATA
BASES
WHICH
USES
A
RAPID
TECHNIQUE
FOR
FINDING
IDENTITIES
SHARED
BETWEEN
TWO
SEQUENCES
AND
EXPLOITS
THE
BIOLOGICAL
CONSTRAINTS
ON
MOLECULAR
EVOLUTION
FASTP
HAS
DECREASED
THE
TIME
REQUIRED
TO
SEARCH
THE
NATIONAL
BIOMEDICAL
RESEARCH
FOUNDATION
NBRF
PROTEIN
SEQUENCE
DATA
BASE
BY
MORE
THAN
TWO
ORDERS
OF
MAGNITUDE
AND
HAS
BEEN
USED
BY
MANY
INVESTIGATORS
TO
FIND
BIOLOGICALLY
SIGNIFICANT
SIMILARITIES
TO
NEWLY
SEQUENCED
PROTEINS
THERE
IS
A
TRADE
OFF
BETWEEN
SENSITIVITY
AND
SELECTIVITY
IN
BIOLOGICAL
SEQUENCE
COMPARISON
METHODS
THAT
CAN
DETECT
MORE
DISTANTLY
RELATED
SEQUENCES
INCREASED
SENSITIVITY
FREQUENTLY
INCREASE
THE
SIMILARITY
SCORES
OF
UNRELATED
SEQUENCES
DECREASED
SELECTIVITY
IN
THIS
PAPER
WE
DESCRIBE
A
NEW
VERSION
OF
FASTP
FASTA
WHICH
USES
AN
IMPROVED
ALGORITHM
THAT
INCREASES
SENSITIVITY
WITH
A
SMALL
LOSS
OF
SELECTIVITY
AND
A
NEGLIGIBLE
DECREASE
IN
SPEED
WE
HAVE
ALSO
DEVELOPED
A
RELATED
PROGRAM
LFASTA
FOR
LOCAL
SIMILARITY
ANALYSES
OF
DNA
OR
AMINO
ACID
SEQUENCES
THESE
PROGRAMS
RUN
ON
COMMONLY
AVAILABLE
MICROCOMPUTERS
AS
WELL
AS
ON
LARGER
MACHINES
METHODS
THE
SEARCH
ALGORITHM
WE
HAVE
DEVELOPED
PROCEEDS
THROUGH
FOUR
STEPS
IN
DETERMINING
A
SCORE
FOR
PAIR
WISE
SIMILARITY
FASTP
AND
FASTA
ACHIEVE
MUCH
OF
THEIR
SPEED
AND
SELECTIVITY
IN
THE
FIRST
STEP
BY
USING
A
LOOKUP
TABLE
TO
LOCATE
ALL
IDENTITIES
OR
GROUPS
OF
IDENTITIES
BETWEEN
TWO
DNA
OR
AMINO
ACID
SEQUENCES
DURING
THE
FIRST
STEP
OF
THE
COMPARISON
THE
KTUP
PARAMETER
DETERMINES
HOW
MANY
CONSECUTIVE
IDENTITIES
ARE
REQUIRED
IN
A
MATCH
FOR
EXAMPLE
IF
KTUP
FOR
A
DNA
SEQUENCE
COMPARISON
ONLY
THOSE
IDENTITIES
THAT
OCCUR
IN
A
RUN
OF
FOUR
CONSECUTIVE
MATCHES
ARE
EXAMINED
IN
THE
FIRST
STEP
THE
BEST
DIAGONAL
REGIONS
ARE
FOUND
USING
A
SIMPLE
FORMULA
BASED
ON
THE
NUMBER
OF
KTUP
MATCHES
AND
THE
DISTANCE
BETWEEN
THE
MATCHES
WITHOUT
CONSIDERING
SHORTER
RUNS
OF
IDENTITIES
CONSERVATIVE
REPLACEMENTS
INSERTIONS
OR
DELETIONS
IN
THE
SECOND
STEP
OF
THE
COMPARISON
WE
RESCORE
THESE
REGIONS
USING
A
SCORING
MATRIX
THAT
ALLOWS
CONSERVATIVE
REPLACEMENTS
AND
RUNS
OF
IDENTITIES
SHORTER
THAN
KTUP
TO
CONTRIBUTE
TO
THE
SIMILARITY
SCORE
FOR
PROTEIN
SEQUENCES
THIS
SCORE
IS
USUALLY
CALCULATED
USING
THE
MATRIX
ALTHOUGH
SCORING
MATRICES
BASED
ON
THE
MINIMUM
NUMBER
OF
BASE
CHANGES
REQUIRED
FOR
A
REPLACEMENT
OR
ON
AN
ALTERNATIVE
MEASURE
OF
SIMILARITY
CAN
ALSO
BE
USED
WITH
FASTA
FOR
EACH
OF
THESE
BEST
DIAGONAL
REGIONS
A
SUBREGION
WITH
MAXIMAL
SCORE
IS
IDENTIFIED
WE
WILL
REFER
TO
THIS
REGION
AS
THE
INITIAL
REGION
THE
BEST
INITIAL
REGIONS
FROM
FIG
LA
ARE
SHOWN
IN
FIG
THE
FASTP
PROGRAM
USES
THE
SINGLE
BEST
SCORING
INITIAL
REGION
TO
CHARACTERIZE
PAIR
WISE
SIMILARITY
THE
INITIAL
SCORES
ARE
USED
TO
RANK
THE
LIBRARY
SEQUENCES
FASTA
GOES
ONE
STEP
FURTHER
DURING
A
LIBRARY
SEARCH
IT
CHECKS
TO
SEE
WHETHER
SEVERAL
INITIAL
REGIONS
MAY
BE
JOINED
TOGETHER
GIVEN
THE
LOCATIONS
OF
THE
INITIAL
REGIONS
THEIR
RESPECTIVE
SCORES
AND
A
JOINING
PENALTY
ANALOGOUS
TO
A
GAP
PENALTY
FASTA
CALCULATES
AN
OPTIMAL
ALIGNMENT
OF
INITIAL
REGIONS
AS
A
COMBINATION
OF
COMPATIBLE
REGIONS
WITH
MAXIMAL
SCORE
FASTA
USES
THE
RESULTING
SCORE
TO
RANK
THE
LIBRARY
SEQUENCES
WE
LIMIT
THE
DEGRADATION
OF
SELECTIVITY
BY
INCLUDING
IN
THE
OPTIMIZATION
STEP
ONLY
THOSE
INITIAL
REGIONS
WHOSE
SCORES
ARE
ABOVE
A
THRESHOLD
THIS
PROCESS
CAN
BE
SEEN
BY
COMPARING
FIG
WITH
FIG
FIG
SHOWS
THE
HIGHEST
SCORING
INITIAL
REGIONS
AFTER
RESCORING
WITH
THE
MATRIX
THE
BEST
INITIAL
REGION
REPORTED
BY
FASTP
IS
MARKED
WITH
AN
ASTERISK
FIG
SHOWS
AN
OPTIMAL
SUBSET
OF
INITIAL
REGIONS
THAT
CAN
BE
JOINED
TO
FORM
A
SINGLE
ALIGNMENT
IN
THE
FOURTH
STEP
OF
THE
COMPARISON
THE
HIGHEST
SCORING
LIBRARY
SEQUENCES
ARE
ALIGNED
USING
A
MODIFICATION
OF
THE
OPTIMIZATION
METHOD
DESCRIBED
BY
NEEDLEMAN
AND
WUNSCH
AND
SMITH
AND
WATERMAN
THIS
FINAL
COMPARISON
CONSIDERS
ALL
POSSIBLE
ALIGNMENTS
OF
THE
QUERY
AND
LIBRARY
SEQUENCE
THAT
FALL
WITHIN
A
BAND
CENTERED
AROUND
THE
HIGHEST
SCORING
INITIAL
REGION
FIG
WITH
THE
FASTP
PROGRAM
OPTIMIZATION
FREQUENTLY
IMPROVED
THE
SIMILARITY
SCORES
OF
RELATED
SEQUENCES
BY
FACTORS
OF
OR
BECAUSE
FASTA
CALCULATES
AN
INITIAL
SIMILARITY
SCORE
BASED
ON
AN
OPTIMIZATION
OF
INITIAL
REGIONS
DURING
THE
LIBRARY
SEARCH
THE
INITIAL
SCORE
IS
ABBREVIATION
NBRF
NATIONAL
BIOMEDICAL
RESEARCH
FOUNDATION
THE
PUBLICATION
COSTS
OF
THIS
ARTICLE
WERE
DEFRAYED
IN
PART
BY
PAGE
CHARGE
PAYMENT
THIS
ARTICLE
MUST
THEREFORE
BE
HEREBY
MARKED
ADVERTISEMENT
IN
ACCORDANCE
WITH
U
C
SOLELY
TO
INDICATE
THIS
FACT
PROC
NATL
ACAD
SCI
USA
A
N
X
B
FIG
IDENTIFICATION
OF
SEQUENCE
SIMILARITIES
BY
FASTA
THE
FOUR
STEPS
USED
BY
THE
FASTA
PROGRAM
TO
CALCULATE
THE
INITIAL
AND
OPTIMAL
SIMILARITY
SCORES
BETWEEN
TWO
SEQUENCES
ARE
SHOWN
A
IDENTIFY
REGIONS
OF
IDENTITY
B
SCAN
THE
REGIONS
USING
A
SCORING
MATRIX
AND
SAVE
THE
BEST
INITIAL
REGIONS
INITIAL
REGIONS
WITH
SCORES
LESS
THAN
THE
JOINING
THRESHOLD
ARE
DASHED
THE
ASTERISK
DENOTES
THE
HIGHEST
SCORING
REGION
REPORTED
BY
FASTP
C
OPTIMALLY
JOIN
INITIAL
REGIONS
WITH
SCORES
GREATER
THAN
A
THRESHOLD
THE
SOLID
LINES
DENOTE
REGIONS
THAT
ARE
JOINED
TO
MAKE
UP
THE
OPTIMIZED
INITIAL
SCORE
D
RECALCULATE
AN
OPTIMIZED
ALIGNMENT
CENTERED
AROUND
THE
HIGHEST
SCORING
INITIAL
REGION
THE
DOTTED
LINES
DENOTE
THE
BOUNDS
OF
THE
OPTIMIZED
ALIGNMENT
THE
RESULT
OF
THIS
ALIGNMENT
IS
REPORTED
AS
THE
OPTIMIZED
SCORE
MUCH
CLOSER
TO
THE
OPTIMIZED
SCORE
FOR
MANY
SEQUENCES
IN
FACT
UNLIKE
FASTP
THE
FASTA
METHOD
MAY
YIELD
INITIAL
SCORES
THAT
ARE
HIGHER
THAN
THE
CORRESPONDING
OPTIMIZED
SCORES
LOCAL
SIMILARITY
ANALYSES
MOLECULAR
BIOLOGISTS
ARE
OFTEN
INTERESTED
IN
THE
DETECTION
OF
SIMILAR
SUBSEQUENCES
WITHIN
LONGER
SEQUENCES
IN
CONTRAST
TO
FASTP
AND
FASTA
WHICH
REPORT
ONLY
THE
ONE
HIGHEST
SCORING
ALIGNMENT
BETWEEN
TWO
SEQUENCES
LOCAL
SEQUENCE
COMPARISON
TOOLS
CAN
IDENTIFY
MULTIPLE
ALIGNMENTS
BETWEEN
SMALLER
PORTIONS
OF
TWO
SEQUENCES
LOCAL
SIMILARITY
SEARCHES
CAN
CLEARLY
SHOW
THE
RESULTS
OF
GENE
DUPLICATIONS
SEE
FIG
OR
REPEATED
STRUCTURAL
FEATURES
SEE
FIG
AND
ARE
FREQUENTLY
DISPLAYED
USING
A
GRAPHIC
MATRIX
PLOT
WHICH
ALLOWS
ONE
TO
DETECT
REGIONS
OF
LOCAL
SIMILARITY
BY
EYE
OPTIMAL
ALGORITHMS
FOR
SENSITIVE
LOCAL
SEQUENCE
COMPARISON
CAN
HAVE
TREMENDOUS
COMPUTATIONAL
REQUIREMENTS
IN
TIME
AND
MEMORY
WHICH
MAKE
THEM
IMPRACTICAL
ON
MICROCOMPUTERS
AND
WHEN
COMPARING
LONGER
SEQUENCES
ON
LARGER
MACHINES
AS
WELL
THE
PROGRAM
FOR
DETECTING
LOCAL
SIMILARITIES
LFASTA
USES
THE
SAME
FIRST
TWO
STEPS
FOR
FINDING
INITIAL
REGIONS
THAT
FASTA
USES
HOWEVER
INSTEAD
OF
SAVING
INITIAL
REGIONS
LFASTA
SAVES
ALL
DIAGONAL
REGIONS
WITH
SIMILARITY
SCORES
GREATER
THAN
A
THRESHOLD
LFASTA
AND
FASTA
ALSO
DIFFER
IN
THE
CONSTRUCTION
OF
OPTIMIZED
ALIGNMENTS
INSTEAD
OF
FOCUSING
ON
A
SINGLE
REGION
LFASTA
COMPUTES
A
LOCAL
ALIGNMENT
FOR
EACH
INITIAL
REGION
THUS
LFASTA
CONSIDERS
ALL
OF
THE
INITIAL
REGIONS
SHOWN
IN
FIG
INSTEAD
OF
JUST
THE
DIAGONAL
SHOWN
IN
FIG
FURTHERMORE
LFASTA
CONSIDERS
NOT
ONLY
THE
BAND
AROUND
EACH
INITIAL
REGION
BUT
ALSO
POTENTIAL
SEQUENCE
ALIGNMENTS
FOR
SOME
DISTANCE
BEFORE
AND
AFTER
THE
INITIAL
REGION
STARTING
AT
THE
END
OF
THE
INITIAL
REGION
AN
OPTIMIZATION
PROCEEDS
IN
THE
REVERSE
DIRECTION
UNTIL
ALL
POSSIBLE
ALIGNMENT
SCORES
HAVE
GONE
TO
ZERO
THE
LOCATION
OF
THE
MAXIMAL
LOCAL
SIMILARITY
SCORE
IN
THE
REVERSE
DIRECTION
IS
THEN
USED
TO
START
A
SECOND
OPTIMIZATION
THAT
PROCEEDS
IN
THE
FORWARD
DIRECTION
AN
OPTIMAL
PATH
STARTING
FROM
THE
FORWARD
MAXIMUM
IS
THEN
DISPLAYED
THE
LOCAL
HOMOLOGIES
CAN
BE
DISPLAYED
AS
SEQUENCE
ALIGNMENTS
SEE
FIG
OR
ON
A
TWO
DIMENSIONAL
GRAPHIC
MATRIX
STYLE
PLOT
SEE
FIGS
AND
STATISTICAL
SIGNIFICANCE
THE
RAPID
SEQUENCE
COMPARISON
ALGORITHMS
WE
HAVE
DEVELOPED
ALSO
PROVIDE
ADDITIONAL
TOOLS
FOR
EVALUATING
THE
STATISTICAL
SIGNIFICANCE
OF
AN
ALIGNMENT
THERE
ARE
APPROXIMATELY
PROTEIN
SEQUENCES
WITH
MILLION
AMINO
ACID
RESIDUES
IN
THE
NBRF
PROTEIN
SEQUENCE
LIBRARY
AND
ANY
COMPUTER
PROGRAM
THAT
SEARCHES
THE
LIBRARY
BY
CALCULATING
A
SIMILARITY
SCORE
FOR
EACH
SEQUENCE
IN
THE
LIBRARY
WILL
FIND
A
HIGHEST
SCORING
SEQUENCE
REGARDLESS
OF
WHETHER
THE
ALIGNMENT
BETWEEN
THE
QUERY
AND
LIBRARY
SEQUENCE
IS
BIOLOGICALLY
MEANINGFUL
OR
NOT
ACCOMPANYING
THE
PREVIOUS
VERSION
OF
FASTP
WAS
A
PROGRAM
FOR
THE
EVALUATION
OF
STATISTICAL
SIGNIFICANCE
RDF
WHICH
COMPARES
ONE
SEQUENCE
WITH
RANDOMLY
PERMUTED
VERSIONS
OF
THE
POTENTIALLY
RELATED
SEQUENCE
WE
HAVE
WRITTEN
A
NEW
VERSION
OF
RDF
THAT
HAS
SEVERAL
IMPROVEMENTS
I
CALCULATES
THREE
SCORES
FOR
EACH
SHUFFLED
SEQUENCE
ONE
FROM
THE
BEST
SINGLE
INITIAL
REGION
AS
FOUND
BY
FASTP
A
SECOND
FROM
THE
JOINED
INITIAL
REGIONS
USED
BY
FASTA
AND
A
THIRD
FROM
THE
OPTIMIZED
DIAGONAL
IT
CAN
BE
USED
TO
EVALUATE
AMINO
ACID
OR
DNA
SEQUENCES
AND
ALLOWS
THE
USER
TO
SPECIFY
THE
SCORING
MATRIX
TO
BE
EMPLOYED
THUS
SEQUENCES
FOUND
USING
THE
SCORING
MATRIX
CAN
BE
EVALUATED
USING
THE
IDENTITY
OR
GENETIC
CODE
MATRIX
III
THE
USER
MAY
SPECIFY
EITHER
A
GLOBAL
OR
LOCAL
SHUFFLE
ROUTINE
LOCALLY
BIASED
AMINO
ACID
OR
NUCLEOTIDE
COMPOSITION
IS
PERHAPS
THE
MOST
COMMON
REASON
FOR
HIGH
SIMILARITY
SCORES
OF
DUBIOUS
BIOLOGICAL
SIGNIFICANCE
HIGH
SCORING
ALIGNMENTS
BETWEEN
QUERY
AND
LIBRARY
SEQUENCES
MAY
BE
DUE
TO
PATCHES
OF
HYDROPHOBIC
OR
CHARGED
AMINO
ACID
RESIDUES
OR
TO
A
T
OR
G
C
RICH
REGIONS
IN
DNA
A
SIMPLE
MONTE
CARLO
SHUFFLE
ANALYSIS
THAT
CONSTRUCTS
RANDOM
SEQUENCES
BY
TAKING
EACH
RESIDUE
IN
ONE
SEQUENCE
AND
PLACING
IT
RANDOMLY
ALONG
THE
LENGTH
OF
THE
NEW
SEQUENCE
WILL
BREAK
UP
THESE
PATCHES
OF
BIASED
COMPOSITION
AS
A
RESULT
THE
SCORES
OF
THE
SHUFFLED
SEQUENCES
MAY
BE
MUCH
LOWER
THAN
THOSE
OF
THE
UNSHUFFLED
SEQUENCE
AND
THE
SEQUENCES
WILL
APPEAR
TO
BE
RELATED
ALTERNATIVELY
SHUFFLED
SEQUENCES
CAN
BE
CONSTRUCTED
BY
PERMUTING
SMALL
BLOCKS
OF
OR
RESIDUES
SO
THAT
WHILE
THE
ORDER
OF
THE
SEQUENCE
IS
DESTROYED
THE
LOCAL
COMPOSITION
IS
NOT
BY
SHUFFLING
THE
RESIDUES
WITHIN
SHORT
BLOCKS
ALONG
THE
SEQUENCE
PATCHES
OF
G
C
OR
A
T
RICH
REGIONS
IN
DNA
FOR
EXAMPLE
ARE
UNDISTURBED
EVALUATING
SIGNIFICANCE
WITH
A
LOCAL
SHUFFLE
IS
MORE
STRINGENT
THAN
THE
GLOBAL
APPROACH
AND
THERE
MAY
BE
SOME
CIRCUMSTANCES
IN
WHICH
BOTH
SHOULD
BE
USED
IN
CONJUNCTION
WHEREAS
TWO
PROTEINS
THAT
SHARE
A
COMMON
EVOLUTIONARY
ANCESTOR
MAY
HAVE
CLEARLY
SIGNIFICANT
SIMILARITY
SCORES
USING
EITHER
SHUFFLING
STRATEGY
PROTEINS
RELATED
BECAUSE
OF
SECONDARY
STRUCTURE
OR
HYDROPATHIC
PROFILE
MAY
HAVE
SIMILARITY
SCORES
WHOSE
SIGNIFICANCE
DECREASES
DRAMATICALLY
WHEN
THE
RESULTS
OF
GLOBAL
AND
LOCAL
SHUFFLING
ARE
COMPARED
IMPLEMENTATION
THE
FASTA
LFASTA
PACKAGE
OF
SEQUENCE
ANALYSIS
TOOLS
IS
WRITTEN
IN
THE
C
PROGRAMMING
LANGUAGE
AND
HAS
BEEN
IMPLEMENTED
UNDER
THE
UNIX
VAX
VMS
AND
IBM
PC
DOS
OPERATING
SYSTEMS
VERSIONS
OF
THE
PROGRAM
THAT
RUN
ON
THE
IBM
PC
ARE
LIMITED
TO
QUERY
SE
L
I
I
BIOCHEMISTRY
PEARSON
AND
LIPMAN
BIOCHEMISTRY
PEARSON
AND
LIPMAN
TABLE
FASTA
AND
FASTP
INITIAL
SCORES
OF
THE
T
CELL
RECEPTOR
RWMSAV
VERSUS
THE
NBRF
DATA
BASE
INITIAL
SCORE
NBRF
CODE
SEQUENCE
FASTA
FASTP
RWHUAV
T
CELL
RECEPTOR
A
CHAIN
KLHURE
IG
K
CHAIN
V
I
REGION
IG
K
CHAIN
V
REGION
IG
K
CHAIN
PRECURSOR
V
REGIONS
IG
K
CHAIN
V
REGION
IG
A
CHAIN
V
III
REGION
IG
K
CHAIN
PRECURSOR
V
REGION
RWMSBV
T
CELL
RECEPTORP
CHAIN
PRECURSOR
RWHUVY
T
CELL
RECEPTOR
CHAIN
PRECURSOR
RWHUGV
T
CELL
RECEPTOR
Y
CHAIN
PRECURSOR
T
CELL
SURFACE
GLYCOPROTEIN
RWMSVB
T
CELL
RECEPTOR
CHAIN
PRECURSOR
IG
HEAVY
CHAIN
V
REGION
GLHUDW
IG
HEAVY
CHAIN
V
II
REGION
THE
AVERAGE
FASTP
SCORE
MEAN
SD
THE
AVERAGE
FASTA
SCORE
MEAN
SD
THE
MEAN
AND
SD
WERE
COMPUTED
EXCLUDING
SCORES
V
VARIABLE
QUENCES
OF
RESIDUES
LIBRARY
SEQUENCES
CAN
BE
ANY
LENGTH
COPIES
OF
THE
PROGRAM
ARE
AVAILABLE
FROM
THE
AUTHORS
ALTHOUGH
FASTA
AND
LFASTA
WERE
DESIGNED
FOR
PROTEIN
AND
DNA
SEQUENCE
COMPARISON
THEY
USE
A
GENERAL
METHOD
THAT
CAN
BE
APPLIED
TO
ANY
ALPHABET
WITH
ARBITRARY
MATCH
MISMATCH
SCORING
VALUES
ALL
THE
SCORING
PARAMETERS
INCLUDING
MATCH
MISMATCH
VALUES
VALUES
FOR
THE
FIRST
RESIDUE
IN
A
GAP
AND
SUBSEQUENT
RESIDUES
IN
THE
GAP
AND
OTHER
PARAMETERS
THAT
CONTROL
THE
NUMBER
OF
SEQUENCES
TO
BE
SAVED
AND
THE
HISTOGRAM
INTERVALS
CAN
BE
SPECIFIED
WITHOUT
CHANGING
THE
PROGRAM
EXAMPLES
COMPARISON
OF
FASTA
WITH
FASTP
TO
DEMONSTRATE
THE
SUPERIORITY
OF
THE
FASTA
METHOD
FOR
COMPUTING
THE
INITIAL
SCORE
WE
COMPARED
THE
PROTEIN
SEQUENCE
OF
A
T
CELL
RECEPTOR
A
CHAIN
NBRF
CODE
RWMSAV
WITH
ALL
SEQUENCES
IN
THE
NBRF
PROTEIN
DATA
BASER
AND
COMPUTED
INITIAL
SCORES
WITH
BOTH
THE
PRESENT
AND
PREVIOUS
METHODS
THE
T
CELL
RECEPTOR
IS
A
MEMBER
OF
THE
IMMUNOGLOBULIN
SUPERFAMILY
IN
RELEASE
OF
THE
DATA
BASE
THIS
SUPERFAMILY
HAS
MEMBERS
FASTP
PLACED
IMMUNOGLOBULIN
SUPERFAMILY
SEQUENCES
IN
THE
TOP
SCORING
SEQUENCES
RELATED
SEQUENCES
RECEIVED
INITIAL
SCORES
LESS
THAN
FOUR
STANDARD
DEVIATIONS
ABOVE
THE
MEAN
SCORE
FASTA
PLACED
SUPERFAMILY
MEMBERS
IN
THE
TOP
SCORING
SEQUENCES
ONLY
RELATED
SEQUENCES
SCORED
BELOW
FOUR
STANDARD
DEVIATIONS
ABOVE
THE
MEAN
TABLE
CONTAINS
SPECIFIC
EXAMPLES
FROM
THIS
DATA
BASE
SEARCH
ALTHOUGH
THERE
IS
OFTEN
LITTLE
DIFFERENCE
IN
THE
TWO
METHODS
THIS
EXAMPLE
SHOWS
THAT
IN
A
NUMBER
OF
CASES
THE
NEW
METHOD
OBTAINS
SIGNIFICANTLY
HIGHER
SCORES
BETWEEN
RELATED
SEQUENCES
NUCLEIC
ACID
DATA
BASE
SEARCH
FASTA
CAN
ALSO
BE
USED
TO
SEARCH
DNA
SEQUENCE
DATA
BASES
EITHER
BY
COMPARING
A
DNA
QUERY
SEQUENCE
TO
THE
DNA
LIBRARY
OR
BY
COMPARING
AN
AMINO
ACID
QUERY
SEQUENCE
TO
THE
DNA
LIBRARY
BY
TRANSLATING
EACH
LIBRARY
DNA
SEQUENCE
IN
ALL
SIX
POSSIBLE
READING
FRAMES
WE
COMPARED
THE
NUCLEOTIDE
RAT
TRANSFORMING
GROWTH
FACTOR
TYPE
A
MRNA
GENBANK
LOCUS
RATTGFA
WITH
ALL
THE
MAMMALIAN
SEQUENCES
IN
RELEASE
OF
GEN
BANK
WE
SET
KTUP
SEE
METHODS
AND
THE
SEARCH
WAS
COMPLETED
IN
UNDER
MIN
ON
AN
IBM
PCAT
MICROCOM
TABLE
DNA
DATA
BASE
SEARCH
OF
RAT
TRANSFORMING
GROWTH
FACTOR
RATTGFA
VERSUS
MAMMALIAN
SEQUENCES
GENBANK
SCORE
LOCUS
SEQUENCE
INITIAL
OPTIMIZED
HUMTFGAM
HUMAN
TGF
MRNA
HUMAN
TGF
GENE
EXON
HUMAN
TGF
GENE
END
MOUSE
RRNA
GENE
MOUSE
RRNA
GENE
MUSMHDD
MHC
CLASS
I
H
METALLOTHIONEIN
MT
IF
GENE
MUSRGLP
RRNA
END
MRNA
A
TYPE
I
PROCOLLAGEN
THE
SEQUENCES
HAVING
THE
HIGHEST
INITIAL
SCORES
ARE
GIVEN
TGF
TRANSFORMING
GROWTH
FACTOR
MHC
MAJOR
HISTOCOMPATIBILITY
COMPLEX
PUTER
THE
TOP
SCORING
LIBRARY
SEQUENCES
ARE
SHOWN
IN
TABLE
ALTHOUGH
IT
CAN
BE
SEEN
THAT
THE
TOP
SCORING
SEQUENCES
ARE
CLEARLY
RELATED
TO
RATTGFA
THERE
ARE
OTHER
HIGH
SCORING
SEQUENCES
THAT
ARE
PROBABLY
NOT
RELATED
AND
THE
MOUSE
EPIDERMAL
GROWTH
FACTOR
FOUND
IN
THE
TRANSLATED
DATA
BASE
SEARCH
TABLE
IS
NOT
FOUND
AMONG
THE
TOP
SCORING
SEQUENCES
TO
FURTHER
EXAMINE
THE
SIMILARITY
DETECTED
BETWEEN
RATTGFA
AND
A
MOUSE
RRNA
GENE
CLUSTER
WE
USED
THE
PROGRAM
FOR
MONTE
CARLO
ANALYSIS
OF
STATISTICAL
SIGNIFICANCE
THE
WINDOW
FOR
LOCAL
SHUFFLING
WAS
SET
TO
BASES
OF
THE
SHUFFLED
COMPARISONS
DATA
NOT
SHOWN
OBTAINED
AN
INITIAL
SCORE
GREATER
THAN
THE
OBSERVED
INITIAL
SCORE
AND
SHUFFLED
SEQUENCES
OBTAINED
OPTIMIZED
SCORES
GREATER
THAN
THE
OBSERVED
OPTIMIZED
SCORE
THEREFORE
THE
SIMILARITY
BETWEEN
RATTGFA
AND
IS
UNLIKELY
TO
BE
SIGNIFICANT
TRANSLATED
NUCLEIC
ACID
DATA
BASE
SEARCH
WHEN
SEARCHING
FOR
SEQUENCES
THAT
ENCODE
PROTEINS
AMINO
ACID
SEQUENCE
COMPARISONS
ARE
SUBSTANTIALLY
MORE
SENSITIVE
THAN
DNA
SEQUENCE
COMPARISONS
BECAUSE
ONE
CAN
USE
SCORING
MATRICES
LIKE
THE
MATRIX
THAT
DISCRIMINATE
BETWEEN
CONSERVATIVE
AND
NONCONSERVATIVE
SUBSTITUTIONS
A
VARIANT
OF
FASTA
TFASTA
CAN
BE
USED
TO
COMPARE
A
PROTEIN
SEQUENCE
TO
A
DNA
SEQUENCE
LIBRARY
IT
TRANSLATES
THE
DNA
SEQUENCES
INTO
EACH
OF
SIX
POSSIBLE
READING
FRAMES
ON
THE
FLY
TFASTA
TRANSLATES
THE
DNA
SEQUENCES
FROM
BEGINNING
TO
END
IT
INCLUDES
BOTH
INTRON
AND
EXON
SEQUENCES
IN
THE
TRANSLATED
PROTEIN
SEQUENCE
TERMINATION
CODONS
ARE
TRANSLATED
INTO
UNKNOWN
X
AMINO
ACIDS
TABLE
SHOWS
THE
RESULTS
OF
A
TRANSLATING
SEARCH
OF
THE
MAMMALIAN
SEQUENCES
IN
THE
GEN
BANK
DNA
DATA
BASE
USING
THE
RATTGFA
PROTEIN
SEQUENCE
AS
THE
QUERY
AND
KTUP
IN
THE
TRANSLATED
SEARCH
THE
MOUSE
EPIDERMAL
GROWTH
FACTOR
NOW
OBTAINS
AN
INITIAL
SCORE
HIGHER
THAN
ANY
UNRELATED
SEQUENCES
HOWEVER
WHICH
WAS
FOUND
IN
THE
DNA
DATA
BASE
SEARCH
BUT
ONLY
CONTAINS
TRANSLATED
CODONS
IS
NO
LONGER
AMONG
THE
TOP
SCORING
SEQUENCES
LOCAL
SIMILARITIES
FIG
DISPLAYS
THE
OUTPUT
OF
A
LOCAL
SIMILARITY
ANALYSIS
KTUP
OF
A
CHIMPANZEE
AL
GLOBIN
MRNA
AND
RABHBAPT
A
RABBIT
A
GLOBIN
GENE
INCLUDING
THE
COMPLETE
CODING
SEQUENCE
AND
A
FLANKING
PSEUDO
GLOBIN
GENE
LFASTA
CAN
EITHER
DISPLAY
A
GRAPHIC
MATRIX
STYLE
PLOT
OF
THE
LOCAL
HOMOLOGIES
FIG
OR
THE
ALIGNMENTS
THEMSELVES
FIG
THE
RIGHT
MOST
THREE
ALIGNMENTS
FIG
MATCH
THE
CORRESPONDING
REGIONS
OF
THE
MRNA
TO
EXON
SUBSEQUENCES
FROM
THE
PSEUDOGENE
WE
NOTE
THAT
THE
FASTA
INITIAL
SCORE
FOR
THE
COMPARISON
OF
CHPHTPROTEIN
IDENTIFICATION
RESOURCE
PROTEIN
SEQUENCE
DATABASE
NATL
BIOMED
RES
FOUND
WASHINGTON
DC
RELEASE
EMBL
GENBANK
GENETIC
SEQUENCE
DATABASE
INTELLIGENETICS
MOUNTAIN
VIEW
CA
TAPE
RELEASE
PROC
NATL
ACAD
SCI
USA
DISTRIBUTION
OF
EXTRACORPUSCULAR
HEMOGLOBIN
IN
PLASMA
CONCENTRATION
AND
LIGHT
ABSORPTION
WAS
LINEAR
FIGURE
INDICATING
THAT
THE
COLOR
INTENSITY
OF
THE
BENZIDINE
OXIDATIVELY
TRANSFORMED
WAS
DIRECTLY
PROPORTIONAL
TO
THE
CONTENT
OF
HEMOGLOBIN
ON
PAPER
IN
ORDER
TO
COMPARE
THE
RELATIONSHIP
BETWEEN
HEMOGLOBIN
CONCENTRATION
AND
LIGHT
ABSORPTION
FOR
FREE
AND
PROTEIN
BOUND
HEMOGLOBIN
THE
FOLLOWING
STUDY
WAS
MADE
HEMOGLOBIN
WAS
ADDED
TO
PLASMA
IN
VITRO
IN
INCREMENTS
OF
FROM
TO
MG
PER
CENT
OVER
A
CONCENTRATION
RANGE
OF
TO
MG
PER
CENT
FOLLOWING
INCUBATION
OF
PLASMA
AT
C
IN
ORDER
TO
PROMOTE
PROTEIN
BINDING
ELECTROPHORESIS
STAINING
AND
PHOTOMETRIC
ANALYSIS
WERE
CARRIED
OUT
IN
THE
USUAL
MANNER
PROTEIN
BINDING
WAS
MAXIMAL
IN
THIS
EXPERIMENT
AT
A
HEMOGLOBIN
CONCENTRATION
OF
MG
PER
CENT
AT
CONCENTRATIONS
GREATER
THAN
MG
PER
CENT
FREE
HEMOGLOBIN
APPEARED
IN
INCREASING
CONCENTRATIONS
ASSUMING
THAT
THE
CONCENTRATION
OF
PBH
REMAINED
AT
MG
PER
CENT
AT
ALL
CONCENTRATIONS
IN
EXCESS
OF
THIS
MAXIMAL
BINDING
CAPACITY
THE
CONCENTRATION
OF
FREE
HEMOGLOBIN
AT
THESE
HIGHER
TO
MG
PER
CENT
CONCENTRATIONS
WAS
CALCULATED
AS
THE
DIFFERENCE
BETWEEN
THE
KNOWN
TOTAL
HEMOGLOBIN
CONCENTRATION
AND
THE
CONCENTRATION
OF
PBH
MG
PER
CENT
KNOWING
THEREFORE
THE
ACTUAL
CONCENTRATIONS
OF
FREE
AND
PROTEIN
BOUND
HEMOGLOBIN
THE
LIGHT
ABSORPTION
OF
EACH
FRACTION
WAS
MEASURED
AND
COMPARED
AT
EACH
CONCENTRATION
STUDIED
FIGURE
ILLUSTRATES
THAT
AT
ALL
CONCENTRATIONS
STUDIED
THE
RELATIONSHIP
BETWEEN
HEMOGLOBIN
CONCENTRATION
AND
LIGHT
ABSORPTION
OF
THE
OXIDIZED
BENZIDINE
BANDS
WAS
LINEAR
AND
WAS
THE
SAME
FOR
FREE
AND
Q
Q
FREE
HB
AREA
CMN
BOUND
HB
AREA
FIG
RELATIONSHIP
BETWEEN
CONCENTRATION
AND
LIGHT
ABSORPTION
BENZIDINE
STAIN
OF
FREE
HEMOGLOBIN
RELATIVE
TO
PROTEIN
BOUND
HEMOGLOBIN
THE
CONCENTRATION
OF
FREE
HEMOGLOBIN
RELATIVE
TO
THE
CONCENTRATION
OF
PROTEIN
BOUND
HEMOGLOBIN
IS
PLOTTED
AGAINST
THE
RESPECTIVE
RATIOS
OF
THE
LIGHT
ABSORPTION
OF
THESE
CONSTITUENTS
WHEN
STAINED
WITH
BENZIDINE
AT
EACH
RATIO
OF
CONCENTRATIONS
STUDIED
THE
STRAIGHT
LINE
RELATIONSHIP
SHOWN
INDICATES
THAT
THE
RELATIONSHIP
BETWEEN
CONCENTRATION
AND
LIGHT
ABSORPTION
IS
THE
SAME
FOR
FREE
AND
PROTEIN
BOUND
HEMOGLOBIN
PROTEIN
BOUND
HEMOGLOBIN
CALCULATIONS
OF
THE
CONCENTRATIONS
OF
FREE
AND
PROTEIN
BOUND
HEMOGLOBIN
AS
DETERMINED
BY
THE
PHOTOMETRIC
TECHNIQUE
WERE
THEREFORE
IN
CLOSE
AGREEMENT
WITH
THE
ACTUAL
CONCENTRATIONS
OF
THESE
COMPONENTS
TABLE
I
A
SIMILAR
STUDY
OF
METHEMALBUMIN
REVEALED
THAT
THE
RELATIONSHIP
BETWEEN
CONCENTRATION
AND
TABLE
I
IN
VITRO
STUDY
OF
THE
RECOVERY
OF
FREE
AND
PROTEIN
BOUND
HEMOGLOBIN
HB
AS
DETERMINED
BY
PHOTOMETRIC
ANALYSIS
TOTAL
FREE
HB
FREE
CALCULATED
BOUND
HB
BOUND
CALCULATED
HB
ACTUAL
CALCULATED
FREE
ACTUAL
ACTUAL
CALCULATED
BOUND
ACTUAL
HEMOGLOBIN
VALUES
ARE
EXPRESSED
AS
CONCENTRATION
IN
MG
PER
CENT
BIOCHEMISTRY
PEARSON
AND
LIPMAN
FIG
REPEATED
STRUCTURE
IN
THE
MYOSIN
HEAVY
CHAIN
LFASTA
WAS
USED
TO
COMPARE
THE
CAENORHABDITIS
ELEGANS
MYOSIN
HEAVY
CHAIN
PROTEIN
SEQUENCE
NBRF
CODE
MWKW
WITH
ITSELF
USING
THE
SCORING
MATRIX
THE
SOLID
DASHED
AND
DOTTED
LINES
DENOTE
DECREASING
SIMILARITY
SCORES
THE
SOLID
LINES
HAD
INITIAL
REGION
SCORES
GREATER
THAN
AND
OPTIMIZED
LOCAL
SCORES
GREATER
THAN
THE
LONGER
DASHED
LINES
HAD
INITIAL
REGION
AND
OPTIMIZED
LOCAL
SCORES
GREATER
THAN
AND
RESPECTIVELY
AND
THE
SHORTER
DASHED
LINES
HAD
INITIAL
REGION
AND
OPTIMIZED
LOCAL
SCORES
GREATER
THAN
AND
RESPECTIVELY
HOMOLOGOUS
REGIONS
WITH
LOWER
SCORES
ARE
PLOTTED
WITH
DOTS
SCORES
MUST
BE
CAREFULLY
EVALUATED
THE
MONTE
CARLO
ANALYSIS
OF
STATISTICAL
SIGNIFICANCE
PROVIDED
BY
A
PROGRAM
SUCH
AS
CAN
OFTEN
BE
CRITICAL
IN
EVALUATING
A
BORDERLINE
SIMILARITY
PREVIOUSLY
WE
SUGGESTED
RANGES
OF
Z
VALUES
OBSERVED
SCORE
MEAN
OF
SHUFFLED
SCORES
STANDARD
DEVIATION
OF
SHUFFLED
SCORES
CORRESPONDING
TO
APPROXIMATE
SIGNIFICANCE
LEVELS
HOWEVER
THE
Z
VALUES
DETERMINED
IN
A
MONTE
CARLO
ANALYSIS
BECOME
LESS
USEFUL
AS
THE
DISTRIBUTION
OF
SHUFFLED
SCORES
DIVERGES
FROM
A
NORMAL
DISTRIBUTION
AS
IS
FOUND
WITH
FASTA
THEREFORE
WE
NOW
FOCUS
ON
THE
HIGHEST
SCORES
OF
THE
SHUFFLED
SEQUENCES
FOR
EXAMPLE
IF
IN
SHUFFLED
COMPARISONS
SEVERAL
RANDOM
SCORES
ARE
AS
HIGH
OR
HIGHER
THAN
THE
OBSERVED
SCORE
THEN
THE
OBSERVED
SIMILARITY
IS
NOT
A
PARTICULARLY
UNLIKELY
EVENT
ONE
CAN
HAVE
MORE
CONFIDENCE
IF
IN
SHUFFLED
COMPARISONS
NO
RANDOM
SCORE
APPROACHES
THE
OBSERVED
SCORE
IN
GENERAL
OUR
EXPERIENCE
HAS
LED
US
TO
BE
CONSERVATIVE
IN
EVALUATING
AN
OBSERVED
SIMILARITY
IN
AN
UNLIKELY
BIOLOGICAL
CONTEXT
THESE
PROGRAMS
PROVIDE
A
GROUP
OF
SEQUENCE
ANALYSIS
TOOLS
THAT
USE
A
CONSISTENT
MEASURE
FOR
SCORING
SIMILARITY
AND
CONSTRUCTING
ALIGNMENTS
FASTA
AND
LFASTA
ALL
USE
THE
SAME
SCORING
MATRICES
AND
SIMILAR
ALIGNMENT
ALGORITHMS
SO
THAT
POTENTIALLY
RELATED
LIBRARY
SEQUENCES
DISCOVERED
AFTER
THE
SEARCH
OF
A
SEQUENCE
DATA
BASE
CAN
BE
EVALUATED
FURTHER
FROM
A
VARIETY
OF
PERSPECTIVES
IN
ADDITION
LFASTA
CAN
ALSO
SHOW
ALTERNATIVE
ALIGNMENTS
BETWEEN
SEQUENCES
WITH
PERIODIC
STRUCTURES
OR
DUPLICATIONS
A
COMPUTER
PROGRAM
THAT
PROGRESSIVELY
EVALUATES
THE
HYDROPHILICITY
AND
HYDROPHOBICITY
OF
A
PROTEIN
ALONG
ITS
AMINO
ACID
SEQUENCE
HAS
BEEN
DEVISED
FOR
THIS
PURPOSE
A
HYDROPATHY
SCALE
HAS
BEEN
COMPOSED
WHEREIN
THE
HYDROPHILIC
AND
HYDROPHOBIC
PROPERTIES
OF
EACH
OF
THE
AMINO
ACID
SIDE
CHAINS
IS
TAKEN
INTO
CONSIDERATION
THE
SCALE
IS
BASED
ON
AN
AMALGAM
OF
EXPERIMENTAL
OBSERVATIONS
DERIVED
FROM
THE
LITERATURE
THE
PROGRAM
USES
A
MOVING
SEGMENT
APPROACH
THAT
CONTINUOUSLY
DETERMINES
THE
AVERAGE
HYDROPATHY
WITHIN
A
SEGMENT
OF
PREDETERMINED
LENGTH
AS
IT
ADVANCES
THROUGH
THE
SEQUENCE
THE
CONSECUTIVE
SCORES
ARE
PLOTTED
FROM
THE
AMINO
TO
THE
CARBOXY
TERMINUS
AT
THE
SAME
TIME
A
MIDPOINT
LINE
IS
PRINTED
THAT
CORRESPONDS
TO
THE
GRAND
AVERAGE
OF
THE
HYDROPATHY
OF
THE
AMINO
ACID
COMPOSITIONS
FOUND
IN
MOST
OF
THE
SEQUENCED
PROTEINS
IN
THE
CASE
OF
SOLUBLE
GLOBULAR
PROTEINS
THERE
IS
A
REMARKABLE
CORRESPONDENCE
BETWEEN
THE
INTERIOR
PORTIONS
OF
THEIR
SEQUENCE
AND
THE
REGIONS
APPEARING
ON
THE
HYDROPHOBIC
SIDE
OF
THE
MIDPOINT
LINE
AS
WELL
AS
THE
EXTERIOR
PORTIONS
AND
THE
REGIONS
ON
THE
HYDROPHILIC
SIDE
THE
CORRELATION
WAS
DEMONSTRATED
BY
COMPARISONS
BETWEEN
THE
PLOTTED
VALUES
AND
KNOWN
STRUCTURES
DETERMINED
BY
CRYSTALLOGRAPHY
IN
THE
CASE
OF
MEMBRANE
BOUND
PROTEINS
THE
PORTIONS
OF
THEIR
SEQUENCES
THAT
ARE
LOCATED
WITHIN
THE
LIPID
BILAYER
ARE
ALSO
CLEARLY
DELINEATED
BY
LARGE
UNINTERRUPTED
AREAS
ON
THE
HYDROPHOBIC
SIDE
OF
THE
MIDPOINT
LINE
AS
SUCH
THE
MEMBRANE
SPANNING
SEGMENT
OF
THESE
PROTEINS
CAN
BE
IDENTIFIED
BY
THIS
PROCEDURE
ALTHOUGH
THE
METHOD
IS
NOT
UNIQUE
AND
EMBODIES
PRINCIPLES
THAT
HAVE
LONG
BEEN
APPRECIATED
ITS
SIMPLICITY
AND
ITS
GRAPHIC
NATURE
MAKE
IT
A
VERY
USEFUL
TOOL
FOR
THE
EVALUATION
OF
PROTEIN
STRUCTURES
INTRODUCTION
ONE
OF
THE
MOST
PERSISTENT
AND
ABSORBING
PROBLEMS
IN
PROTEIN
CHEMISTRY
HAS
BEEN
THE
UNRAVELING
OF
THE
VARIOUS
FORCES
INVOLVED
IN
FOLDING
POLYPEPTIDE
CHAINS
INTO
THEIR
UNIQUE
CONFORMATIONS
INSIGHT
INTO
THIS
QUESTION
HAS
BEEN
GAINED
BOTH
FROM
A
CONSIDERATION
OF
NON
COVALENT
FORCES
AS
THEY
APPLY
IN
MODEL
SYSTEMS
AND
FROM
A
DETAILED
EXAMINATION
OF
THE
ACTUAL
STRUCTURES
OF
PROTEIN
MOLECULES
IT
IS
GENERALLY
ACCEPTED
THAT
TO
A
ROUGH
APPROXIMATION
TWO
OPPOSING
BUT
NOT
INDEPENDENT
TENDENCIES
ARE
REFLECTED
IN
THE
FINAL
STRUCTURE
OF
A
PROTEIN
WHEN
IT
FOLDS
THE
RESULTING
COMPROMISE
ALLOWS
HYDROPHILIC
SIDE
CHAINS
ACCESS
TO
THE
AQUEOUS
SOLVENT
WHILE
AT
THE
SAME
TIME
MINIMIZING
CONTACT
BETWEEN
HYDROPHOBIC
SIDE
CHAINS
AND
O
ACADEMIC
PRESS
INC
LONDON
I
TD
J
KYTE
AND
K
F
WATER
RECENTLY
HOWEVER
IT
HAS
BEEN
NOTICED
THAT
THERE
ARE
IMPORTANT
SUBTLE
DEVIATIONS
FROM
THESE
EXPECTATIONS
LIFSON
SANDER
JANIN
CHOTHIA
SUGGESTING
THAT
THE
EXTENT
TO
WHICH
RESIDUES
ARE
BURIED
DEPENDS
NOT
ONLY
UPON
STRICT
HYDROPHOBICITY
BUT
ALSO
UPON
STERIC
EFFECTS
THAT
DETERMINE
PACKING
BETWEEN
THE
SECONDARY
STRUCTURES
IN
THE
CROWDED
INTERIOR
OF
THE
MACROMOLECULE
N
EVERTHELESS
IF
ONE
COULD
EVALUATE
THE
CONTRARY
FORCES
OF
HGDROPHOBICITY
AND
HYDROPHILICITY
INHERENT
WITHIN
THE
RESIDUES
THEMSELVES
THEN
IT
WOULD
BE
POSSIBLE
PERHAPS
AT
LEAST
TO
DISTINGUISH
THE
EXTERIOR
PORTIONS
OF
A
PROTEIN
FROM
THE
INTERIOR
ONES
ON
THE
BASIS
OF
THE
AMINO
ACID
SEQUENCE
ALONE
MOREOVER
IN
THE
CASE
OF
A
PROTEIN
THAT
INTERACTS
DIRECTLY
WITH
THE
ALKANE
PORTION
OF
A
PHOSPHOLIPID
BILAYER
IN
A
MEMBRANE
THERE
IS
GENERAL
AGREEMENT
THAT
THE
AMINO
ACID
SIDE
CHAINS
INVOLVED
ARE
CHIEFLY
HYDROPHOBIC
ONCE
AGAIN
AN
APPROPRIATE
EVALUATION
OF
A
GIVEN
AMINO
ACID
SEQUENCE
SHOULD
BE
ABLE
TO
PREDICT
WHETHER
OR
NOT
A
GIVEN
PEPTIDE
SEGMENT
IS
SUFFICIENTLY
HYDROPHOBIC
TO
INTERACT
WITH
OR
RESIDE
WITHIN
THE
INTERIOR
OF
THE
MEMBRANE
CONSIDERABLE
EFFORT
HAS
ALREADY
BEEN
EXPENDED
IN
DEVISING
SCHEMES
FOR
PREDICTING
THREE
DIMENSIONAL
ASPECTS
FROM
AMINO
ACID
SEQUENCES
ALONE
THE
MOST
NOTABLE
OF
THESE
HAVE
DEALT
WITH
THE
PREDICTION
OF
LOCAL
SECONDARY
STRUCTURE
CHOU
FASMAN
WU
KABAT
GARNIER
ET
AL
THESE
ARE
EMPIRICAL
METHODS
IN
THAT
THEY
UTILIZE
A
LIBRARY
OF
KNOWN
PROTEIN
STRUCTURES
FROM
WHICH
T
HE
DISTRIBUTION
OF
THE
AMINO
ACIDS
AMONG
VARIOUS
CONFORMATIONAL
SETTINGS
IS
RIGOROUSLY
TALLIED
IF
THE
FREQUENCY
WITH
WHICH
THE
INDIVIDUAL
AMINO
ACIDS
OR
SHORT
PEPTIDES
OCCUR
IN
IHELICES
P
SHEETS
OR
REVERSE
TURNS
IS
KNOWN
ANY
SEYUENCE
CAN
BE
SYST
EMATICALLJ
SCANNED
AND
THE
PROBABILITY
OF
THOSE
SECONDARY
STRUCTURES
CAN
BE
EVALUATED
INTERESTINGLY
EVEN
EARLIER
ATTEMPTS
HAD
BEEN
MADE
TO
PREDICT
THE
GENERAL
SHAPE
OF
A
PROTEIN
ON
THE
BASIS
OF
THE
TYPES
OF
AMINO
ACIDS
IT
CONTAINED
THUS
IN
THE
LIGHT
OF
THE
GENERAL
OBSERVATION
THAT
THE
INTERIORS
OF
WATER
SOLUBLE
PROTEINS
ARE
PREDOMINANTLY
COMPOSED
OF
HYDROPHOBIC
AMINO
ACIDS
WHILE
THE
HYDROPHILIC
SIDECHAINS
ARE
ON
THE
EXTERIOR
WHERE
THEY
CAN
INTERACT
WITH
WATER
FISHER
AND
BIGELOW
TRIED
TO
CORRELATE
THE
SIZES
AND
SHAPES
OF
PROTEINS
WITH
THEIR
OVERALL
AMINO
ACID
COMPOSITIONS
RECENTLY
A
METHOD
FOR
DISPLAYING
THE
DISTRIBUTION
OF
HYDROPHOBICITY
OVER
THE
SEQUENCE
OF
A
PROTEIN
WAS
PRESENTED
BY
ROSE
AND
ROSE
ROY
THIS
PROCEDURE
COMBINES
THE
PROGRESSIVE
EVALUATION
APPROACH
OF
THE
SECONDAR
ST
RUCTURE
PREDICTIONS
WITH
THE
EARLIER
EMPIRICAL
OBSERVATION
THAT
THE
HYDROPHOBIC
SIDE
CHAINS
TEND
TO
BE
BURIED
WITHIN
THE
NATIVE
STRUCTURE
CHOTHIA
ROSE
ROY
ALSO
HAVE
DEMONSTRATED
CONVINCINGLY
THAT
THIS
APPROACH
CAN
DISTINGUISH
REGIONS
OF
INTERIOR
SEQUENCE
FROM
REGIONS
OF
EXTERIOR
SEQUENCE
IN
THIS
PAPER
WE
DESCRIBE
A
SIMPLE
COMPUTER
PROGRAM
SIMILAR
TO
THAT
EMPLOYED
BY
ROSE
AND
ROSE
ROY
THAT
SYSTEMATICALLY
EVALUATES
THE
HYDROPHILIC
AND
HYDROPHOBIC
TENDENCIES
OF
A
POLYPEPTIDE
CHAIN
THE
PRESENT
PROGRAM
USES
A
HYDROPATHY
SCALE
IN
WHICH
EACH
AMINO
ACID
HAS
BEEN
ASSIGNED
A
VALUE
REFLECTING
ITS
RELATIVE
HYDROPHILICITY
AND
HYDROPHOBICITY
THE
PROGRAM
CONTINUOUSLY
DETERMINES
THE
AVERAGE
HYDROPATHY
OF
A
MOVING
SEGMENT
AS
IT
ADVANCES
THROUGH
THE
SEQUENCE
FROM
THE
AMINO
TO
THE
CARBOXY
TERMINUS
AS
SUCH
THE
PROCEDURE
GIVES
A
GRAPHIC
VISUALIZATION
OF
THE
HPDROPATHIC
CHARACTER
OF
THE
EVALUATION
OF
PROTEIN
HYDROPATHY
CHAIN
FROM
ONE
END
TO
THE
OTHER
TRACKING
THE
HYDROPHILIC
AND
HYDROPHOBIC
REGIONS
RELATIVE
TO
A
UNIVERSAL
MIDLINE
WE
HAVE
EXAMINED
IN
DETAIL
THE
PROFILES
OF
SEVERAL
PROTEINS
WHOSE
THREE
DIMENSIONAL
STRUCTURES
ARE
KNOWN
AND
HAVE
FOUND
EXCELLENT
AGREEMENT
BETWEEN
THE
OBSERVED
INTERIORS
AND
THE
CALCULATED
HYDROPHOBIC
REGIONS
ON
THE
ONE
HAND
AND
THE
OBSERVED
EXTERIOR
PORTIONS
AND
THE
CALCULATED
HYDROPHILIC
REGIONS
ON
THE
OTHER
WE
HAVE
ALSO
EXAMINED
A
NUMBER
OF
MEMBRANE
PROTEINS
AND
HAVE
BEEN
ABLE
TO
IDENTIFY
MEMBRANE
SPANNING
SEGMENTS
AS
WELL
AS
THOSE
HYDROPHOBIC
REGIONS
THAT
ANCHOR
CERTAIN
PROTEINS
IN
MEMBRANES
EXPERIMENTAL
PROCEDURES
A
THE
COMPUTER
PROGRAM
THE
COMPUTER
PROGRAM
SOAP
ASSIGNS
THE
APPROPRIATE
HYDROPATHY
VALUE
TO
EACH
RESIDUE
IN
A
GIVEN
AMINO
ACID
SEQUENCE
AND
THEN
SUCCESSIVELY
SUMS
THOSE
VALUES
STARTING
AT
THE
AMMO
TERMINAL
WITHIN
OVERLAPPING
SEGMENTS
DISPLACED
FROM
EACH
OTHER
BY
ONE
RESIDUE
ALTHOUGH
A
SEGMENT
OF
ANY
SIZE
CAN
BE
CHOSEN
ORDINARILY
SPANS
OF
OR
WERE
EMPLOYED
ODD
NUMBERS
BEING
USED
SO
THAT
A
GIVEN
SUM
COULD
BE
PLOTTED
ABOVE
THE
MIDDLE
RESIDUE
OF
THE
SEGMENT
THUS
IN
THE
CASE
OF
SOAP
THE
FIRST
VALUE
CORRESPONDS
TO
THE
SUM
OF
THE
HYDROPATHIES
OF
RESIDUES
TO
AND
IS
PLOTTED
AT
LOCATION
THE
SECOND
VALUE
CORRESPONDS
TO
THE
SUM
FOR
RESIDUES
TO
AND
IS
PLOTTED
AT
LOCATION
AND
SO
ON
THE
PROGRAM
WAS
WRITTEN
ORIGINALLY
IN
THE
LANGUAGE
C
KERNIGHAN
RITCHIE
FOR
USE
IN
THE
SOFTWARE
SYSTEM
UNIX
WHICH
IS
LEASED
FROM
THE
WESTERN
ELECTRIC
CO
BECAUSE
UNIX
IS
NOW
WIDELY
USED
AND
BECAUSE
C
COMPILERS
ARE
NOW
AVAILABLE
FOR
MANY
COMPUTERS
THE
ORIGINAL
PROGRAM
IS
SUPPLIED
AS
A
SHORT
APPENDIX
TO
THIS
PAPER
SO
THAT
INTERESTED
READERS
MAY
EMPLOY
IT
DIRECTLY
PLOTS
MAY
BE
OBTAINED
FROM
ANY
TERMINAL
THAT
PRINTS
A
STANDARD
CHARACTER
OUTPUT
THE
PROGRAM
HAS
ALSO
BEEN
MODIFIED
FOR
USE
WITH
A
MORE
SOPHISTICATED
SYSTEM
LINKED
TO
A
ZETA
PLOTTER
WE
ARE
GRATEFUL
TO
DEMPSEY
DEPARTMENT
OF
CHEMISTRY
UNIVERSITY
OF
CALIFORNIA
SAN
DIEGO
FOR
THESE
MODIFICATIONS
IN
THIS
LATTER
FORMAT
THE
VALUES
ARE
PRESENTED
AS
AVERAGES
RATHER
THAN
SUMS
AND
ALL
THE
FIGURES
ACCOMPANYING
THIS
PAPER
WERE
OBTAINED
WITH
THIS
SYSTEM
B
SEQUENCE
LIBRARY
THE
CHARACTERIZATION
OF
A
LARGE
NUMBER
OF
DIFFERENT
PROTEINS
WAS
FACILITATED
BY
THE
FACT
THAT
WE
HAD
TWO
EXTENSIVE
LIBRARIES
OF
AMINO
ACID
SEQUENCES
ALREADY
STORED
IN
THE
COMPUTER
ONE
OF
THESE
WAS
A
SET
OF
SEQUENCES
THAT
CAN
BE
PURCHASED
FROM
THE
NATIONAL
BIOMEDICAL
RESEARCH
FOUNDATION
AND
THAT
INCLUDES
ALL
THE
SEQUENCES
FROM
THE
ATLAS
OF
PROTEIN
SEQUENCE
AND
STRUCTURE
DAYHOFF
THE
OTHER
NEWAT
WAS
A
COLLECTION
OF
APPROX
SEQUENCES
GLEANED
FROM
THE
ORIGINAL
LITERATURE
AND
COVERING
THE
PERIOD
TO
DOOLITTLE
C
CHOICE
OF
HYDROPATHY
VALUES
IDEALLY
THE
MOST
SATISFYING
WAY
TO
DETERMINE
THE
HYDROPHOBIC
OR
HYDROPHILIC
INCLINATIONS
OF
A
GIVEN
AMINO
ACID
SIDE
CHAIN
I
E
ITS
HYDROPATHYT
WOULD
BE
TO
MEASURE
ITS
PARTITION
COEFFICIENT
BETWEEN
WATER
AND
A
NON
INTERACTING
ISOTROPIC
PHASE
AND
TO
CALCULATE
FROM
THAT
PARTITION
COEFFICIENT
A
TRANSFER
FREE
ENERGY
FOR
EXAMPLE
ETHANOL
IS
A
SOLVENT
THAT
HAS
BEEN
PROPOSED
AS
A
PHASE
RESEMBLING
THE
INTERIOR
OF
A
PROTEIN
NOZAKI
TANFORD
IN
THIS
CASE
HOWEVER
THE
CHOICE
OF
SOLVENT
MAY
HAVE
BEEN
A
MATTER
OF
CONVENIENCE
RATHER
THAN
DESIGN
SINCE
THE
SOLUBILITIES
OF
MANY
AMINO
ACIDS
IN
ETHANOL
AND
WATER
WERE
ALREADY
KNOWN
COHN
EDSALL
AND
THE
THEORETICAL
BASIS
FOR
DERIVING
THE
TRANSFER
FREE
ENERGIES
OF
THE
T
SINCE
HYDROPHILICITY
AND
HYDROPHOBICITY
ARE
NO
MORE
THAN
THE
TWO
EXTREMES
OF
A
SPECTRUM
A
TERM
THAT
DEFINES
THAT
SPECTRUM
WOULD
BE
AS
USEFUL
AS
EITHER
JUST
AS
THE
TERM
LIGHT
IS
AS
USEFUL
AS
VIOLET
LIGHT
OR
RED
LIGHT
HYDROPATHY
STRONG
FEELING
ABOUT
WATER
HAS
BEEN
CHOSEN
FOR
THIS
PURPOSE
J
KYTE
AND
R
F
DOOLITTLK
INDIVIDUAL
AMINO
ACID
SIDE
CHAINS
BETWEEN
ETHANOL
AND
WATER
FROM
THESE
VALUES
HAD
ALREADY
BEEN
FORMULATED
COHN
EDSELL
THE
TRANSFER
FREE
ENERGIES
FROM
WATER
TO
ETHANOL
FOR
VARIOUS
AMINO
ACID
SIDE
CHAINS
ARE
PRESENTED
IN
TABLE
THE
ASSUMPTION
THAT
ETHANOL
IS
A
NEUTRAL
NON
INTERACTING
SOLVENT
MAY
NOT
BE
WARRANTED
HOWEVER
NOR
IS
IT
CLEAR
THAT
ANY
SOLVENT
COULD
EVER
MEET
THAT
CONDITION
THIS
DIFFICULTY
HAS
BEEN
NOTED
IN
THE
PAST
AND
IT
HAS
BEEN
SUGGESTED
THAT
WATER
VAPOR
TRANSFER
FREE
ENERGIES
WOULD
BE
A
LESS
COMPLICATED
INDEX
OF
HYDROPATHY
HINE
MOOKERJEE
THE
WATERVAPOR
PARTITION
COEFFICIENTS
FOR
MODEL
COMPOUNDS
IDENTICAL
TO
EACH
OF
AMINO
ACID
SIDECHAINS
WERE
ASSEMBLED
BY
WOLFENDEN
ET
AL
FROM
THE
TABLES
PUBLISHED
BY
HINE
MOOKERJEE
THEY
REPORTED
AS
WELL
EXPERIMENTAL
DETERMINATIONS
FOR
FOUR
ADDITIONAL
PREVIOUSLY
UNAVAILABLE
VALUES
WOLFENDEN
ET
AL
ALL
OF
THESE
VALUES
EXPRESSED
AS
TRANSFER
FREE
ENERGIES
BETWEEN
AN
AQUEOUS
SOLUTION
AND
THE
CONDENSED
VAPORT
ARE
ALSO
PRESENTED
IN
TABLE
IT
IS
POSSIBLE
WITH
THESE
FREE
ENERGIES
TO
EXAMINE
THE
CLAIM
THAT
ETHANOL
IS
A
USEFUL
SOLVENT
WITH
WHICH
TO
MODEL
THE
INTERIOR
OF
A
PROTEIN
NOZAKI
TANFORD
THE
LAST
COLUMN
IN
TABLE
PRESENTS
THE
TRANSFER
FREE
ENERGIES
FOR
THE
MODEL
COMPOUNDS
BETWEEN
ETHANOL
AND
THE
CONDENSED
VAPOR
IF
ETHANOL
WERE
AN
ISOTROPIC
NON
INTERACTING
PHASE
THESE
VALUES
WOULD
BE
FAIRLY
CONSTANT
REPRESENTING
ONLY
THE
DISPERSION
FORCES
LOST
DURING
VAPORIZATION
IT
IS
CLEAR
HOWEVER
THAT
THIS
IS
NOT
T
HE
CASE
AND
THAT
ETHANOL
RETAINS
MANY
OF
THE
UNPREDICTABLE
PECULIARITIES
OF
WATER
ITSELF
THEREFORE
CONTRARY
TO
THE
CHOICE
MADE
BY
ROSE
NO
USE
WILL
BE
MADE
HERE
OF
THE
HYDROPHOBICITY
SCALE
BASED
ON
SOLUBILITIES
IN
ETHANOL
ANOTHER
SOURCE
OF
INFORMATION
BEARING
UPON
THE
TENDENCY
OF
A
GIVEN
SIDE
CHAIN
TO
PREFER
THE
INTERIOR
OF
A
PROTEIN
TO
THE
EXTERIOR
IS
THE
TABULATION
OF
RESIDUE
ACCESSIBILITIES
CALCULATED
BY
CHOTHIA
FROM
THE
ATOMIC
CO
ORDINATES
OF
GLOBULAR
PROTEINS
INDEED
THE
ENSEMBLE
AVERAGE
OF
THE
ACTUAL
LOCATIONS
INSIDE
OR
OUTSIDE
OF
A
SIDE
CHAIN
SHOULD
BE
A
DIRECT
EVALUATION
OF
ITS
HYDROPATHY
WHEN
IT
IS
IN
A
PROTEIN
CHOTHIA
PRESENTED
TWO
SETS
OF
VALUES
THE
FRACTION
OF
THE
TOTAL
NUMBER
OF
A
GIVEN
RESIDUE
THAT
IS
MORE
THAN
BURIED
IN
THE
NATIVE
STRUCTURES
ON
THE
ONE
HAND
AND
THE
FRACTION
THAT
IS
BURIED
ON
THE
OTHER
IT
HAS
ALREADY
BEEN
NOTED
WOLFENDEN
ET
AL
THAT
THERE
IS
A
STRONG
CORRELATION
BETWEEN
THE
FRACTION
BURIED
AND
THE
WATER
VAPOR
TRANSFER
FREE
ENERGIES
INTERESTINGLY
THERE
IS
AN
EVEN
STRONGER
CORRELATION
BETWEEN
THE
FRACTION
O
BURIED
AND
THE
SAME
WATER
VAPOR
TRANSFER
FREE
ENERGIES
TABLE
IN
TABLE
THE
TRANSFER
FREE
ENERGIES
THE
FRACTIONS
O
BURIED
AND
THE
FRACTION
I
BURIED
HAVE
ALL
BEEN
NORMALIZED
ARBITRARILY
IN
ORDER
THAT
THE
VALUES
MAY
BE
COMPARED
DIRECTLY
WE
HAVE
USED
BOTH
THE
WATER
VAPOR
TRANSFER
FREE
ENERGIES
AND
THE
INTERIOR
EXTERIOR
DISTRIBUTION
OF
AMINO
ACID
SIDE
CHAINS
DETERMINED
BY
CHOTHIA
IN
ASSIGNING
THE
FINAL
HYDROPATHY
VALUES
TABLE
RESULTS
PRESENTED
LATER
IN
THIS
PAPER
INDICATE
CLEARLY
THAT
THE
NUMBER
IN
THE
SECOND
PLACE
OF
THE
HYDROPATHY
VALUES
IS
OF
LITTLE
CONSEQUENCE
TO
THE
T
IN
THE
PRESENT
TABULATION
TABLE
A
SMALL
CORRECTION
KCAL
MOL
WAS
APPLIED
TO
THE
FORMER
VALUES
WOLFENDEN
ET
AL
TO
ELIMINATE
ANY
ENTROPY
OF
MIXING
FROM
THE
VALUES
THE
TRANSFER
MUST
OCCUR
BETWEEN
STANDARD
STATES
CHOSEN
IN
SUCH
A
WAY
THAT
NO
CHANGES
IN
VOLUME
ARE
INVOLVED
IF
THE
AQUEOUS
STANDARD
STATE
IS
CHOSEN
AS
THE
INFINITELY
DILUTE
SOLUTION
AT
MOLE
FRACTION
THE
VOLUME
OF
THE
SOLUTE
IN
THE
AQUEOUS
PHASE
BY
DEFINITION
WILL
BE
ITS
APPARENT
MOLAL
VOLUME
THE
GAS
AT
MOLE
FRACTION
CAN
BE
COMPRESSED
MATHEMATICALLY
TO
THIS
SAME
MOLAL
VOLUME
THIS
IS
ACCOMPLISHED
READILY
BY
EMPLOYING
THE
RELATIONSHIP
AC
RTLN
I
FOR
THE
ADIABATIC
CHANGE
IN
THE
VOLUME
OF
AN
IDEAL
GAS
FROM
V
TO
I
SPECIFICALLY
THE
SOLUTE
VAPOR
AT
A
STANDARD
STATE
OF
MOLE
FRACTION
AT
STANDARD
TEMPERATURE
C
AND
PRESSURE
I
I
MOL
IS
CONTRACTED
TO
A
VOLUME
EQUAL
TO
ITS
PARTICULAR
APPARENT
MOLAL
VOLUME
IN
MOL
I
THEREFORE
THE
FORMULA
USED
FOR
THIS
CORRECTION
WAS
AGIRAN
ESFTE
R
N
I
Z
RTLN
WHERE
N
EQUILIBRIUM
MOLE
FRACTION
IN
AQUEOUS
PHASE
N
EQUILIBRIUM
MOLE
FRACTION
IN
THE
VAPOR
AT
STANDARD
TEMPERATURE
AND
PRESSURE
AND
Y
IS
THE
PARTITION
COEFFICIENT
IN
THE
UNITS
M
M
AS
TABULATED
B
HIM
MOOKERJEE
THE
ADVANTAGE
OF
THIS
CHOICE
OF
STANDARD
STATES
IS
THAT
FREE
ENERGIES
OF
SALVATION
ARE
DIRECTLY
PRESENTED
AND
ONLY
THE
MOLECULAR
INTERACTIONS
BETWEEN
WATER
AND
THE
SOLUTES
ARE
REFLECTED
IN
THE
VALUES
EVALUATION
OF
PROTEIN
HYDROPATHY
TABLE
FREE
ENERGIES
OF
TRANSFER
FOR
THE
SIDE
CHAINS
OF
THE
AMINO
ACIDS
BETWEEN
VARIOUS
PHASES
AGRANS
SKCRA
L
MOL
I
SIDE
CHAIN
WATER
INTO
WATER
INTO
ETHANOL
INTO
MOL
I
CONDENSED
VAPOR
ETHANOL
CONDENSED
VAPOR
LEUCINE
ISOLEUCINE
VALINE
ALANINE
PHENYLALANINE
METHIONINE
CYSTEINE
THREONINE
SERINE
TRYPTOPHAN
TYROSINE
LYSINE
GLUTAMINE
ASPARAGINE
GLUTAMIC
ACID
HISTIDINE
ASPARTIC
ACID
THE
APPARENT
MOLAL
VOLUMES
AT
C
OF
MODEL
COMPOUNDS
FOR
THE
SIDE
CHAINS
WOLFENDEN
ET
AL
OF
THE
STRUCTURE
RH
WHERE
R
IS
THE
SIDE
CHAIN
OF
A
GIVEN
AMINO
ACID
HANCH
R
COO
ARE
EITHER
THE
OBSERVED
VALUES
A
TABULATED
BY
COHN
ET
AL
OR
VALUES
CALCULATED
B
BY
THE
METHODS
OF
COHN
ET
AL
WHICH
THEMSELVES
WERE
ADAPTED
FROM
TRAUBE
THE
WATER
VAPOR
PARTITION
COEFFICIENTS
FOR
THE
VARIOUS
MODEL
COMPOUNDS
ARE
AVAILABLE
IN
THE
TABLES
PUBLISHED
BY
C
HINE
MOOKERJEE
OR
D
WOLFENDEN
ET
AL
THE
STANDARD
STATES
CHOSEN
FOR
THE
FREE
ENERGIES
ARE
MOLE
FRACTION
FOR
THE
SOLUTION
AND
THE
CONDENSED
VAPOR
AT
A
VOLUME
EQUAL
TO
ITS
APPARENT
MOLAL
VOLUME
THE
WATER
ETHANOL
TRANSFER
FREE
ENERGIES
WERE
COPIED
DIRECTLY
FROM
THE
TABULATIONS
OF
C
COHN
EDSALL
OR
F
NOZAKI
TANFORD
THE
STANDARD
STATES
IN
EACH
SOLVENT
ARE
MOLE
FRACTION
THE
TRANSFER
FREE
ENERGIES
FOR
THE
IONIZED
SIDE
CHAINS
G
WERE
CORRECTED
TO
PH
WOLFENDEN
ET
AL
USING
THE
FOLLOWING
PK
VALUES
TANFORD
LYSINE
HISTIDINE
GLUTAMIC
ACID
AND
AAPARTIC
ACID
HYDROPATHY
PROFILES
AND
AS
A
RESULT
WE
DID
NOT
HESITATE
TO
ADJUST
THE
VALUES
SUBJECTIVELY
WHEN
ONLY
THIS
LEVEL
OF
ACCURACY
WAS
IN
QUESTION
NEVERTHELESS
WE
TRIED
TO
DERIVE
THE
BEST
NUMBERS
WE
COULD
FROM
THE
DATA
LISTED
IN
THE
LAST
COLUMNS
OF
TABLE
THE
HYDROPATHY
VALUES
FOR
VALINE
PHENYLALANINE
THREONINE
SERINE
AND
HISTIDINE
WERE
SIMPLE
AVERAGES
OF
THE
OTHER
NUMBERS
IN
THE
TABLE
WHEN
OF
THE
NUMBERS
FOR
A
GIVEN
AMINO
ACID
WAS
SIGNIFICANTLY
DIFFERENT
FROM
THE
OTHER
THE
MEAN
OF
THE
OTHER
WAS
USED
THIS
WAS
DONE
FOR
CYSTEINE
CYSTINE
METHIONINE
AND
ISOLEUCINE
AFTER
A
GOOD
DEAL
OF
FUTILE
DISCUSSION
CONCERNING
THE
DIFFERENCES
AMONG
GLUTAMIC
ACID
ASPARTIC
ACID
ASPARAGINE
AND
GLUTAMINE
WE
CAME
TO
THE
CONCLUSION
THAT
THEY
ALL
HAD
INDISTINGUISHABLE
HYDROPATHIES
AND
SET
THEIR
HYDROPATHY
VALUE
BY
AVERAGING
ALL
OF
THE
NORMALIZED
WATER
VAPOR
TRANSFER
FREE
ENERGIES
AND
THE
NORMALIZED
FRACTIONS
OF
SIDE
CHAINS
BURIED
BECAUSE
THE
STRUCTURAL
INFORMATION
WAS
SO
UNCERTAIN
TRYPTOPHAN
WAS
SIMPLY
ASSIGNED
ITS
NORMALIZED
TRANSFER
FREE
ENERGY
GLYCINE
WAS
ARBITRARILY
ASSIGNED
THE
HYDROPATHY
VALUE
WHICH
WAS
THE
WEIGHTED
MEAN
OF
THE
HYDROPATHY
VALUES
FOR
ALL
OF
THE
SEQUENCES
IN
OUR
DATA
BASE
BECAUSE
IT
WAS
CLEAR
FROM
A
CAREFUL
ANALYSIS
OF
THE
ACTUAL
DISTRIBUTION
OF
GLYCINE
THAT
IT
IS
NOT
HYDROPATHIC
THAT
IS
TO
SAY
IT
DOES
NOT
HAVE
STRONG
FEELINGS
ABOUT
WATER
ON
THE
BASIS
OF
BOTH
THE
TRANSFER
FREE
ENERGY
SCALE
AND
THE
FRACTION
BURIED
ALANINE
OUGHT
TO
BE
MORE
HYDROPHOBIC
ON
OUR
SCALE
ITS
VALUE
EXCEEDING
THAT
J
KYTE
AND
R
F
DOOLITTLE
ALL
VALUES
IN
THE
LAST
COLUMNS
RESULT
FROM
ARBITRARY
NORMALIZATION
TO
SPREAD
THEM
BETWEEN
AND
THE
NORMALIZATION
FUNCTIONS
WERE
A
DG
TABLE
B
FRACTION
LOOO
BURIED
CHOTHIA
FRACTION
BURIED
CHOTHIA
OF
LEUCINE
WE
FIND
IT
DIFFICULT
TO
ACCEPT
THAT
A
SINGLE
METHYL
GROUP
CAN
ELICIT
MORE
HYDROPHOBIC
FORCE
THAN
A
CLUSTER
OF
METHYL
GROUPS
AND
FOR
THAT
REASON
WE
HAVE
ARBITRARILY
LOWERED
THE
HYDROPATHY
VALUE
OF
THE
ALANINE
SIDE
CHAIN
TO
A
POINT
HALF
WAY
BETWEEN
THE
HYDROPATHY
VALUE
OF
GLYCINE
AND
THE
VALUE
DETERMINED
FOR
ALANINE
WHEN
THE
TRANSFER
ENERGY
AND
ITS
DISTRIBUTION
WERE
USED
NO
SUITABLE
MODEL
EXISTS
FOR
PROLINE
AND
IN
TERMS
OF
ITS
TENDENCY
TO
BECOME
BURIED
IT
IS
FAIRLY
HYDROPHILIC
ITS
HYDROPATHY
VALUE
WAS
MADE
SOMEWHAT
MORE
HYDROPHOBIC
THAN
THIS
CONSIDERATION
BECAUSE
OF
ITS
METHYLENE
GROUPS
THE
HYDROPATHY
VALUE
FOR
ARGININE
WAS
ARBITRARILY
ASSIGNED
TO
THE
LOWEST
POINT
OF
THE
SCALE
BECAUSE
IT
WAS
DIFFICULT
TO
ACCEPT
THE
FACT
THAT
TYROSINE
IS
A
HYDROPHILIC
AMINO
ACID
EVEN
THOUGH
THE
AVAILABLE
DATA
IN
TABLE
INDICATE
THAT
IT
IS
ITS
HYDROPATHY
VAFUE
WAS
SUBJECTIVELY
RAISED
TO
ONE
CLOSER
TO
THE
WATER
VAPOR
JRANSFER
FREE
ENERGY
THAN
THE
STRUCTURAL
DATA
WOULD
HAVE
YIELDED
SIMILARLY
THE
HYDROPATHY
VALUE
FOR
LEUEINE
WAS
ALSO
RAISED
ABOVE
THE
AVERAGE
OF
THE
STRUCTURAL
DATA
AND
THE
TRANSFER
FREE
ENERGY
AND
THE
HYDROPATHY
VALUE
FOR
LYSINE
WAS
LOWERED
NONE
OF
THESE
LAST
ADJUSTMENTS
THE
RESULT
OF
PERSONAL
BIAS
AND
HEATED
DISCUSSION
BETWEEN
THE
AUTHORS
AFFECTS
THE
HYDROPATHY
PROFILES
IN
ANY
SIGNIFICANT
WAY
RESULTS
A
CHOICE
OF
PARAMETERS
THE
EFFECTIVENESS
OF
THE
PROGRAM
AND
THE
PROGRESSIVE
EVALUATION
APPROACH
IN
GENERAL
DEPEND
UPON
TWO
DECISIONS
FIRST
WE
HAD
TO
DETERMINE
HOW
LARGE
A
SPAN
OF
CONSECUTIVE
RESIDUES
YIELDS
A
HYDROPATHY
PROFILE
THAT
MOST
CONSISTENTLY
REFLECTS
THE
EVALUATION
OF
PROTEIN
HYDROPATHY
EXTERIOR
AND
INTERIOR
PORTIONS
OF
PROTEINS
SECOND
WE
HAD
TO
DETERMINE
HOW
CRITICAL
THE
HYDROPATHY
ASSIGNMENTS
FOR
THE
INDIVIDUAL
AMINO
ACIDS
ARE
TO
THE
OUTCOME
OF
THE
CALCULATIONS
FOR
EXAMPLE
IS
THE
PROFILE
OF
A
GIVEN
SEQUENCE
RADICALLY
CHANGED
IF
THE
HYDROPATHY
VALUES
FOR
ONE
OR
MORE
RESIDUES
ARE
CHANGED
BY
AN
ARBITRARY
FACTOR
Z
WE
MET
THESE
PROBLEMS
DIRECTLY
BY
EXAMINING
THE
SAME
PROTEIN
SEQUENCES
UNDER
A
VARIETY
OF
CONDITIONS
CHYM
I
CHYM
CHYM
O
I
I
I
I
A
I
I
I
SEQUENCE
NUMBER
FIG
SOAP
PROFILES
OF
BOVINE
CHYMOTRYPSINOGEN
CHYM
AT
DIFFERENT
SPAN
SETTINGS
AND
THE
SOLID
BARS
ABOVE
THE
MIDPOINT
LINE
ON
THE
SOAP
PROFILE
DENOTE
INTERIOR
REGIONS
AS
DETERMINED
BY
CRYSTALLOGRAPHY
FREER
ET
AL
SIMILARLY
THE
SOLID
BARS
BELOW
THE
MIDPOINT
LINE
INDICATE
REGIONS
THAT
ARE
ON
THE
OUTSIDE
OF
THE
MOLECULE
J
KYTE
AND
R
F
DOOLITTLE
WITH
RESPECT
TO
THE
MOST
EFFECTIVE
CHOICE
OF
SPAN
WE
COMPARED
THE
HYDROPATHY
PROFILES
OF
A
NUMBER
OF
DIFFERENT
PROTEINS
OVER
A
RANGE
OF
SPANS
FROM
TO
RESIDUES
SELECTED
PROFILES
FROM
TWO
OF
THESE
SURVEYS
FOR
CHYMOTRYPSIN
AND
LACTATE
DEHYDROGENASE
RESPECTIVELY
ARE
SHOWN
IN
FIGURES
AND
NATURALLY
THE
HYDROPATHY
PROFILES
USING
THE
SHORTEST
SPANS
ARE
NOISIER
THAN
INTERMEDIATE
SPANS
AND
RUNS
EMPLOYING
SPANS
LESS
THAN
SEVEN
RESIDUES
WERE
GENERALLY
UNSATISFACTORY
LONG
SPANS
ON
THE
OTHER
HAND
TENDED
TO
MISS
SMALL
CONSISTENT
FEATURES
FREQUENT
AND
SUBJECTIVE
ANALYSIS
OF
THE
DEGREE
OF
CORRELATION
OF
THE
PROFILES
WITH
THE
EXTERIORS
AND
INTERIORS
OF
GLOBULAR
PROTEINS
SEE
BELOW
AS
WELL
AS
THE
RESOLUTION
OF
THE
PROFILE
ITSELF
REVEALED
THAT
INFORMATION
CONTENT
WAS
MAXIMIZED
WHEN
THE
SPANS
WERE
SET
AT
TO
RESIDUES
THE
IMPACT
OF
THE
CHOICE
OF
HYDROPATHY
VALUES
WAS
EXAMINED
IN
TWO
DIFFERENT
I
L
I
L
A
J
SEQUENCE
NUMBER
FIG
SOAP
PROFILES
OF
DOGFISH
LACTATE
DEHYDROGENAAE
LDH
AT
DIFFERENT
SPAN
SETTINGS
AND
THE
SOLID
BARS
ABOVE
THE
MIDPOINT
LINE
ON
THE
SOAP
PROFILE
DENOTE
INTERIOR
REGIONS
AS
DETERMINED
BY
THE
CRYSTALLOGRAPHIC
STUDY
OF
THE
PROTEIN
EVENTHOFF
ET
AL
SIMILARLY
THE
SOLID
BARS
BELOW
THE
MIDPOINT
LINE
INDICATE
REGIONS
THAT
ARE
KNOWN
TO
BE
ON
THE
OUTSIDE
OF
THE
MOLECULE
EVALUATION
OF
PROTEIN
HYDROPATHY
WAYS
AS
AN
INITIAL
TEST
THE
SIDE
CHAINS
WERE
ASSIGNED
TO
THREE
GROUPS
ACCORDING
TO
THEIR
RANK
ON
THE
HYDROPATHY
SCALE
TABLE
THUS
ARGININE
LYSINE
ASPARAGINE
ASPARTIC
ACID
GLUTAMINE
GLUTAMIC
ACID
AND
HISTIDINE
WERE
ASSIGNED
TO
CLUSTER
I
PROLINE
TYROSINE
SERINE
TRYPTOPHAN
THREONINE
AND
GLYCINE
TO
CLUSTER
II
AND
ALANINE
METHIONINE
CYSTEINE
CYSTINE
PHENYLALANINE
LEUCINE
VALINE
AND
ISOLEUCINE
TO
CLUSTER
III
THE
INDIVIDUAL
VALUES
CONTRIBUTING
TO
EACH
CLUSTER
WERE
AVERAGED
CLUSTER
I
CLUSTER
II
AND
CLUSTER
III
AND
THE
MEAN
VALUES
INCORPORATED
INTO
A
MODIFIED
SOAP
PROGRAM
CALLED
LARD
COMPARISONS
OF
LARD
AGAINST
SOAP
IN
THE
CASES
OF
CHYMOTRYPSINOGEN
AND
LACTIC
DEHYDROGENASE
ARE
SHOWN
IN
FIGURES
AND
ALTHOUGH
THE
PATTERNS
EXHIBIT
SOME
GENERAL
SIMILARIT
IES
AS
MIGHT
BE
EXPECTED
SINCE
THE
MOVING
AVERAGE
ITSELF
TENDS
TO
HAVE
A
LEVELING
ASPECT
AN
EXPERIMENTAL
APPROACH
LOSES
NOTHING
BY
USING
THE
BEST
VALUES
AVAILABLE
RATHER
THAN
SETTLING
FOR
LESS
PRECISE
ESTIMATES
AS
A
SECOND
TEST
THE
VALUES
OF
FOUR
OF
THE
MOST
CONTROVERSIAL
ASSIGNMENTS
WERE
SHIFTED
RADICALLY
IN
ORDER
TO
ASSESS
THE
IMPACT
ON
THE
HYDROPATHY
PROFILE
THUS
THE
VALUES
FOR
TYROSINE
HISTIDINE
PROLINE
AND
TRYPTOPHAN
ALL
OF
WHICH
HAVE
ARGUABLY
NOZAKI
TANFORD
LOW
HYDROPATHY
SCORES
TABLE
WERE
ARBITRARILY
INCREASED
BY
O
UNITS
WHEN
THE
SAME
TWO
PROTEINS
WERE
EXAMINED
WITH
THIS
MODIFIED
SCALE
THERE
WAS
A
NOTICEABLE
IF
MODEST
CHANGE
IN
THE
PATTERNS
FIGS
AND
THAT
THE
CHANGE
WAS
MODEST
IS
PARTLY
DUE
TO
THE
FACT
THAT
HISTIDINE
AND
TRYPTOPHAN
ARE
AMONG
THE
LEAST
COMMON
AMINO
ACIDS
B
EXTERIOR
AND
INTERIOR
SEGMENTS
OF
GLOBULAR
PROTEINS
DETAILED
COMPARISONS
BETWEEN
THE
HYDROPATHY
PROFILES
OF
TWO
GLOBULAR
PROTEINS
AND
THEIR
PUBLISHED
THREE
DIMENSIONAL
STRUCTURES
ARE
PRESENTED
IN
FIGURES
AND
IN
THE
CASE
OF
BOVINE
CHYMOTRYSINOGEN
A
JUDGEMENT
WAS
MADE
ABOUT
EACH
SIDECHAIN
ON
THE
BASIS
OF
ITS
POSITION
IN
THE
STANDARD
MODEL
THAT
HAD
BEEN
CONSTRUCTED
IN
THE
LABORATORY
OF
PROFESSOR
J
KRAUT
DEPARTMENT
OF
CHEMISTRY
UNIVERSITY
OF
CALIFORNIA
SAN
DIEGO
AS
A
PART
OF
THE
CRYSTALLOGRAPHIC
STUDY
OF
THAT
PROTEIN
FREER
ET
AL
A
VARIETY
OF
HYDROPATHY
PROFILES
OF
THE
CHYMOTRYPSINOGEN
SEQUENCE
WERE
OBTAINED
AND
COMPARED
WITH
THE
ACTUAL
LOCATIONS
OF
THE
RESIDUES
IN
THE
MODEL
STRUCTURE
FIG
THE
BEST
AGREEMENT
BETWEEN
STRONGLY
HYDROPHOBIC
SEGMENTS
AND
INTERIOR
REGIONS
AND
STRONGLY
HYDROPHILIC
SEGMENTS
AND
THE
EXTERIOR
WAS
OBTAINED
WITH
A
SETTING
OF
NINE
RESIDUES
EXAMINATION
OF
THE
RESULTS
REVEALS
THAT
FOR
THE
MOST
PART
AGREEMENT
BETWEEN
THE
ACTUAL
STRUCTURE
AND
THE
LOCATION
EXPECTED
FROM
THE
HYDROPATHY
OF
A
CERTAIN
REGION
IS
QUITE
SATISFACTORY
IN
PARTICULAR
TWO
OF
THE
REGIONS
THAT
LIE
ON
THE
EXTERIOR
OF
THIS
PROTEIN
WHOSE
ELECTRON
DENSITY
IS
POORLY
DEFINED
AND
THAT
SHOW
THE
GREATEST
REARRANGEMENTS
DURING
ZYMOGEN
ACTIVATION
FREER
ET
AL
RESIDUES
TO
AND
TO
EXHIBIT
VERY
HIGH
HYDROPHILICITY
CONSISTENT
WITH
THEIR
LOOSE
EXTERNAL
ATTACHMENT
TO
THE
STRUCTURE
THE
FIVE
MAJOR
REGIONS
OF
THE
PROFILE
THAT
LIE
BELOW
THE
MIDPOINT
LINE
ARE
ALL
EXTERNAL
SEQUENCES
IN
THE
NATIVE
PROTEIN
AND
NINE
OF
THE
MAJOR
REGIONS
THAT
LIE
ABOVE
THE
MIDPOINT
LINE
ARE
INTERNAL
A
CONSIDERATION
OF
THOSE
FEW
PLACES
WHERE
THE
CORRELATION
FAILS
IS
ALSO
ILLUMINATING
IN
THE
CASE
OF
RESIDUES
TO
FOR
EXAMPLE
THIS
SEGMENT
IN
THE
MODEL
I
I
A
SEQUENCE
NUMBER
PRO
SOAP
PROFILES
OF
BOVINE
CHYMOTRYPSINOGEN
CHYM
USING
DIFFERENT
HYDROPATHY
VALUES
FOR
THE
AMINO
ACIDS
IN
THE
TOP
PANEL
THE
PROGRAM
LARD
USED
A
SET
OF
CLUSTERED
VALUES
IN
WHICH
CASE
THE
AMINO
ACIDS
WERE
DIVIDED
INTO
SETS
HVDROPHOBIC
NET
XL
AND
HYDROPHILIC
IN
THR
LOWER
PANEL
THE
PROGRAM
USED
RADICALLY
DIFFERENT
WEIGHTING
FACTORS
FOR
SOME
OF
THE
MORE
CONTROVRRSIAL
AMINO
ACID
ASSIGNMENTS
INCLUDING
THOSE
OF
HISTIDINE
TRYPTOPHAN
TYROSINE
AND
PROLINE
IN
THE
MIDDLE
PANEL
THE
PROGRAM
USED
THE
STANDARD
SET
OF
ASSIGNMENTS
PRESENTED
IN
TABLE
ALL
PLOTS
UTILIZE
A
SPAN
SETTING
OF
RUNS
ALONG
THE
EXTERIOR
OF
THE
PROTEIN
EVEN
THOUGH
THE
HYDROPATHY
PROFILE
SHOWS
IT
TO
HAVE
A
VERY
HYDROPHOBIC
CHARACTER
THIS
NINE
RESIDUE
SEQUENCE
LYS
LEU
LYS
ILE
ALA
LYS
VAL
PHE
LYS
CONTAINS
FOUR
POSITIVE
CHARGES
INTERMINGLED
WITH
LIVE
VERY
HYDROPHOBIC
RESIDUES
THE
CONTRADICTION
ARISES
FROM
THE
FACT
THAT
THE
HIGH
CONCENTRATION
OF
POSITIVE
CHARGE
DOES
NOT
WEIGH
HEA
VILY
ENOUGH
IN
THE
MOVING
EVALUATION
OF
PROTEIN
HYDROPATHY
SEQUENCE
NUMBER
FRC
SOAP
PROFILES
OF
DOGFISH
LACTATE
DEHYDROGENASE
IN
WHICH
DIFFERENT
HYDROPATHIES
WERE
USED
FOR
THE
AMINO
ACIDS
ALL
PLOTS
UTILIZE
A
SPAN
SETTING
OF
SEE
LEGEND
TO
FIG
FOR
MEANINGS
OF
AND
AVERAGE
TO
OFFSET
THE
ALKANE
SIDE
CHAINS
PRESENT
IN
THIS
RATHER
UNUSUAL
SEQUENCE
A
CLOSE
EXAMINATION
OF
THE
MODEL
REVEALS
THAT
THE
FIVE
HYDROPHOBIC
SIDE
CHAINS
ARE
ALL
DIRECTED
TOWARD
THE
INTERIOR
WHILE
THE
LYSINE
SIDE
CHAINS
POINT
OUT
INTO
THE
AQUEOUS
ENVIRONMENT
IN
THE
CASE
OF
DOGFISH
LACTATE
DEHYDROGENASE
FIG
THE
DESIGNATIONS
OF
EXTERNAL
AND
INTERNAL
RESIDUES
HAD
ALREADY
BEEN
MADE
AND
PUBLISHED
EVENTHOFF
ET
AL
AND
THE
HYDROPATHY
PROFILE
CORRELATES
WELL
WITH
THESE
CRYSTALLOGRAPHIC
FINDINGS
THE
FIVE
MAJOR
REGIONS
OF
THE
PROFILE
THAT
LIE
BELOW
THE
MIDPOINT
LINE
ARE
ALL
EXTERNAL
SEQUENCES
IN
THE
NATIVE
PROTEIN
AND
SIX
OF
THE
EIGHT
MAJOR
REGIONS
ABOVE
THE
MIDLINE
ARE
INTERNAL
SEQUENCES
AGAIN
AS
WITH
CHYMOTRYPSINOGEN
THE
PROFILE
WAS
LEAST
SUCCESSFUL
IN
EVALUATING
THOSE
REGIONS
IN
WHICH
THE
MAIN
CHAIN
IS
ONLY
PARTLY
BURIED
SUCH
AS
THE
REGIONS
BETWEEN
RESIDUES
AND
AND
AND
WHERE
THE
BACKBONE
REPEATEDLY
PASSES
IN
AND
OUT
OF
THE
AQUEOUS
PHASE
J
KYTE
AND
R
F
DOOLITTLE
C
MEMBRANE
BOUND
PROTEINS
THE
ISSUE
OF
THE
HYDROPATHY
OF
A
PARTICULAR
SEQUENCE
OF
AMINO
ACIDS
ASSUMES
ADDED
SIGNIFICANCE
WHEN
MEMBRANE
BOUND
PROTEINS
ARE
CONSIDERED
THE
NM
OF
ALKANE
THAT
FORMS
THE
BILAYER
IS
AN
INVARIANT
STRUCTURAL
ASPECT
WITH
WHICH
SUCH
PROTEINS
MUST
CONTEND
IT
IS
GENERALLY
ACCEPTED
THAT
THE
ADAPTATION
T
O
THIS
EXTREMELY
HYDROPHOBIC
ENVIRONMENT
IS
ACCOMPLISHED
BY
THE
EVOLUTION
OF
LONG
HYDROPHOBIC
SEQUENCES
IN
THOSE
PROTEINS
WHOSE
DESTINY
IT
IS
TO
BECOME
A
COMPONENT
OF
A
BIOLOGICAL
MEMBRANE
A
HYDROPATHY
PROFILE
OF
THE
PROTEIN
GLYCOPHORIN
TOMITA
ET
AL
UNMISTAKABLY
IDENTIFIES
THE
ARCHETYPAL
MEMBRANE
SPANNING
SEQUENCE
LONG
AGO
NOTED
BY
OTHERS
TOMITA
MARCHESI
THAT
STRETCHES
FROM
RESIDUES
TO
FIG
IN
THIS
EXAMPLE
THE
POLYPEPTIDE
CHAIN
ONLY
CROSSES
THE
BILAYER
ONCE
POLAR
SEGMENTS
EXTENDING
INTO
THE
AQUEOUS
ENVIRONMENT
ON
EITHER
SIDE
A
SIMILAR
CASE
IS
KNOWN
TO
EXIST
FOR
VESICULAR
STOMATITIS
VIRUS
GLYCOPROTEIN
ROSE
ET
AL
A
PARTIAL
PROFILE
OF
WHICH
IS
ALSO
SHOWN
IN
FIGURE
CYTOCHROME
ON
THE
OTHER
HAND
IS
A
PROTEIN
FOR
WHICH
THE
EXACT
DISPOSITION
OF
THE
HYDROPHOBIC
SEQUENCE
THAT
ANCHORS
THE
PROTEIN
IN
THE
MEMBRANE
IS
LESS
CLEAR
FIG
ALTHOUGH
AS
NOTED
PREVIOUSLY
STRITTMATTER
ET
AL
THE
CARBOXY
TERMINUS
IS
THE
GENERAL
LOCATION
OF
THE
EMBEDDED
HYDROPHOBIC
SEGMENT
THE
PRECISE
EXTENT
OF
THE
BURIED
PORTION
HAS
NOT
BEEN
DETERMINED
UNAMBIGUOUSLY
THE
HYDROPATHY
PROFILE
INDICATES
THAT
THE
MEMBRANE
ASSOCIATED
PORTION
BEGINS
AT
RESIDUE
FLEMING
ET
AL
ON
THE
OTHER
HAND
HAVE
REPORTED
EXPERIMENTS
THAT
THEY
BELIEVE
SUGGEST
THAT
THE
CLUSTER
OF
TRYPTOPHANS
AT
RESIDUES
AND
IS
DEEP
WITHIN
THE
MEMBRANE
A
CONCLUSION
CLEARLY
AT
VARIANCE
WITH
THE
HYDROPATHY
PROFILE
FIG
THE
FACT
THAT
THE
TRYPTOPHANS
ARE
SURROUNDED
BY
ASPARTIC
ACID
ASPARAGINE
AND
SERINE
RESIDUES
HOWEVER
CERTAINLY
STRENGTHENS
THE
CONCLUSION
THAT
THIS
REGION
IS
NOT
WITHIN
THE
ALKANE
OF
THE
BILAYER
IN
THE
NATIVE
STRUCTURE
IN
THE
CASE
OF
BACTERIORHODOPSIN
KHORANA
ET
CCL
A
PROTEIN
THAT
IS
LOCATED
IN
THE
MEMBRANES
OF
CERTAIN
HALOPHILIC
BACTERIA
LIVE
OF
THE
SEVEN
TRANSMEMBRANE
SHAFTS
OBSERVED
IN
THE
LOW
RESOLUTION
ELECTRON
DENSITY
FUNCTION
HENDERSON
UNWIN
ARE
CLEARLY
IDENTIFIED
BY
THE
HYDROPATHY
PROFILE
FIG
THE
TWO
SEGMENTS
NEAREST
TO
THE
CARBOXY
TERMINUS
BETWEEN
RESIDUES
AND
ARE
NOT
RESOLVED
FROM
EACH
OTHER
ALTHOUGH
THE
PROFILE
CLEARLY
INDICATES
THAT
BOTH
ARE
BURIED
IN
THE
MEMBRANE
IN
THIS
LATTER
CASE
A
POINT
HALFWAY
ALONG
WAS
ARBITRARILY
CHOSEN
AS
THE
POINT
AT
WHICH
THE
CHAIN
DOUBLES
BACK
THE
SEVEN
TRANSMEMBRANE
SEQUENCES
ARE
ALIGNED
NEXT
TO
EACH
OTHER
IN
TABLE
D
MEMBRANE
SPANNING
SEQUENCES
IT
WAS
OF
CONSIDERABLE
INTEREST
TO
EXPLORE
WHETHER
OR
NOT
THE
HYDROPATHY
PROFILE
COULD
IDENTIFY
WITHIN
THE
LINEAR
SEQUENCE
OF
A
MEMBRANE
BOUND
PROTEIN
OF
UNKNOWN
STRUCTURE
THOSE
PORTIONS
THAT
SPAN
THE
BILAYER
AND
DISTINGUISH
THEM
FROM
SEQUENCES
THAT
MERELY
PASS
THROUGH
THE
CENTER
OF
THE
PROTEIN
ITSELF
CERTAINLY
CASUAL
OBSERVATION
OF
SEQUENCES
KNOWN
TO
BE
INSERTED
INTO
THE
ALKANE
PHASE
OF
THE
MEMBRANE
FIGS
AND
SUGGESTS
THAT
THIS
SHOULD
BE
POSSIBLE
TO
THIS
END
THE
HYDROPATHY
PROFILES
OF
APPROXIMATELY
SOLUBLE
PROTEINS
CHOSEN
AT
RANDOM
WERE
EVALUATION
OF
PROTEIN
HYDROPATHY
G
ET
I
C
I
I
SEQUENCE
NUMBER
SEQUENCE
NUMBER
I
I
I
I
I
I
VSVG
FM
SOAP
PROFILES
FOR
DIFFERENT
PROTEINS
THAT
HAVE
MEMBRANE
AFFILIATION
IN
THE
UPPER
PANEL
THE
PLOT
IS
THAT
OF
ERYTHROCYTE
GLYCOPHORIN
GLYC
WHICH
HAS
AN
EASILY
RECOGNIZED
MEMBRANE
SPANNING
SEGMENT
IN
THE
REGION
OF
RESIDUES
TO
IN
THE
MIDDLE
PANEL
RABBIT
CYTOCHROME
B
IS
DEPICTED
IN
THIS
CASE
THERE
IS
A
MEMBRANE
ANCHORING
UNIT
INVOLVING
THE
ZO
RESIDUE
CARBOXY
TERMINAL
SEGMENT
IN
THE
LOWER
PANEL
THE
CARBOXY
TERMINAL
REGION
OF
VESICULAR
STOMATITIS
VIRUS
GLYCOPROTEIN
VSVG
IS
SHOWN
A
MEMBRANE
SPANNING
SEGMENT
IS
CLEARLY
EVIDENT
FROM
RESIDUES
TO
ALL
PROFILES
ARE
AT
EVALUATION
OF
PROTEIN
HYDROPATHY
EXAMINED
AND
THE
MOST
HYDROPHOBIC
REGION
FROM
EACH
WAS
PICKED
FROM
THIS
PRELIMINARY
COLLECTION
A
GROUP
OF
TWELVE
RESIDUE
SEQUENCES
WHICH
WERE
JUDGED
TO
BE
THE
MOST
HYDROPHOBIC
OF
THE
LOT
WAS
CHOSEN
FOR
CLOSER
INSPECTION
IT
WAS
ASSUMED
THAT
SINCE
THESE
WERE
IN
EACH
CASE
THE
MOST
HYDROPHOBIC
REGION
IN
THE
ENTIRE
SEQUENCE
OF
A
GIVEN
PROTEIN
THEY
WOULD
SERVE
AS
THE
MOST
EXTREME
MODELS
FOR
A
PEPTIDE
THAT
TRAVERSES
THE
INTERIOR
OF
A
PROTEIN
FROM
THESE
PROTEINS
THE
MOST
HYDROPHOBIC
SEGMENT
OF
EACH
SPAN
LENGTH
FROM
TO
RESIDUES
WAS
IDENTIFIED
AND
ITS
AVERAGE
HYDROPATHY
TABULATED
THE
COLLECTED
VALUES
FOR
EACH
SPAN
LENGTH
WERE
COMPARED
DIRECTLY
WITH
THOSE
OF
THE
MOST
HYDROPHOBIC
SEGMENTS
OF
THE
SAME
SPAN
LENGTH
TAKEN
FROM
BACTERIOPHAGE
COAT
PROTEIN
NAKASHIMA
KONIGSBERG
GLYCOPHORIN
AND
THE
SEVEN
TRANSMEMBRANE
SEQUENCES
OF
BACTERIAL
RHODOPSIN
TABLE
THESE
NINE
HYDROPHOBIC
SEQUENCES
EACH
OF
WHICH
IS
KNOWN
TO
SPAN
THE
MEMBRANE
WERE
CHOSEN
AS
MODELS
FOR
A
SEQUENCE
WHICH
IN
THE
NATIVE
PROTEIN
IS
WITHIN
THE
BILAYER
THE
DISCRIMINATION
BETWEEN
THE
SEGMENTS
FROM
THE
SOLUBLE
PROTEINS
AS
A
GROUP
AND
THOSE
FROM
THE
MEMBRANE
SPANNING
SEQUENCES
WAS
MOST
UNEQUIVOCAL
WHEN
THE
SPAN
WAS
LENGTHENED
TO
RESIDUES
FIG
THIS
MAY
BE
DUE
TO
THE
FACT
THAT
PROTEIN
SPANNING
SEQUENCES
PASSING
THROUGH
THE
INTERIOR
ARE
USUALLY
SHORTER
THAN
MEMBRANE
SPANNING
SEQUENCES
NEVERTHELESS
FROM
AN
EXAMINATION
OF
TABLE
IT
CAN
BE
CONCLUDED
THAT
WHEN
THE
HYDROPATHY
OF
A
GIVEN
RESIDUE
SEGMENT
AVERAGES
GREATER
THAN
THERE
IS
A
HIGH
PROBABILITY
THAT
IT
WILL
BE
ONE
OF
THE
SEQUENCES
IN
A
I
I
I
I
I
I
I
I
II
SPAN
PIG
COMPARISON
BETWEEN
THE
HYDROPATHY
OF
SEQUENCES
THAT
SPAN
MEMBRANES
AND
THE
HYDROPATHY
OF
THOSE
THAT
SPAN
PROTEINS
THE
MOST
HYDROPHOBIC
SEQUENCES
FROM
GLOBULAR
PROTEINS
TABLE
EXCEPT
FOR
LACTIC
DEHYDROGENASE
WERE
COMPARED
WITH
MEMBRANE
SPANNING
SEQUENCES
TABLE
FOR
EACH
SPAN
LENGTH
THE
AVERAGE
HYDROPATHIES
OF
THE
MOST
HYDROPHOBIC
SEGMENTS
WERE
COLLECTED
AND
THE
MEANS
AND
STANDARD
DEVIATIONS
OF
THE
VALUES
WERE
CALCULATED
THESE
ARE
PRESENTED
AS
A
FUNCTION
OF
THE
SPAN
LENGTH
FOR
THE
MEMBRANE
SPANNING
GROUP
O
O
AND
THE
PROTEIN
SPANNING
GROUP
O
O
J
KYTE
AND
R
F
DOOLITTLE
TABLE
NINETEEN
RESIDUE
HYDROPATHY
AVERAGES
FOR
THE
MOST
HYDROPHOBIC
SEQUENCES
FROM
VARIOUS
PROTEINS
PROTEIN
LENGTH
SEQUENCE
POSITION
MEAN
HYDROPATHY
SOLUBLE
DOGFISH
LACTATE
DEHYDROGENASE
KLEBSIELLA
AEROGENES
RIBITOL
DEHYDROGENASE
HUMAN
TRANSFERRIN
RABBIT
PHOSPHORYLASE
BOVINE
CHYMOTRYPSINOGEN
A
LOBSTER
GLYCERALDEHYDE
P
DEHYDROGENSSE
BOVINE
PROTHROMBIN
BACILLUS
STEAROTHERMOPHILUS
PHOSPHOFRUCTOKINASE
HUMAN
CARBONIC
ANHYDRASE
B
ESCHERICHIA
WLI
DIHYDROFOLATE
REDUCTASE
BOVINE
CARBOXYPEPTIDASE
A
BOVINE
PROALBUMIN
MEMBRANE
SPANNING
COAT
PROTEIN
HUMAN
GLYCOPHORIN
HALOBACTERIUM
HALOBIUM
BACTERIORHODOPSIN
MEMBRANE
BOUND
PROTEIN
THAT
SPANS
THE
MEMBRANE
FURTHERMORE
MEMBRANESPANNING
SEQUENCES
ARE
MORE
HYDROPHOBIC
THAN
SEQUENCES
THAT
PASS
THROUGH
THE
CENTER
OF
A
PROTEIN
AND
THEY
CAN
BE
DISTINGUISHED
FROM
THE
LATTER
BY
THEIR
HYDROPATHY
THE
SEQUENCES
OF
SUBUNITS
I
TO
V
AND
VII
OF
CYTOCHROME
OXIDASE
WERE
THEN
EXAMINED
AS
EXAMPLES
OF
MEMBRANE
SPANNING
POLYPEPTIDES
FULLER
ET
AL
ABOUT
WHICH
MUCH
LESS
IS
KNOWN
ALL
OF
THE
SEQUENCES
THAT
AVERAGED
GREATER
THAN
OVER
AT
LEAST
A
RESIDUE
SPAN
WERE
IDENTIFIED
AS
WELL
AS
SOME
EVEN
LONGER
MORE
HYDROPHOBIC
SEGMENTS
ALL
OF
THESE
CANDIDATES
FOR
MEMBRANE
SPANNING
SEQUENCES
ARE
PRESENTED
IN
TABLE
THE
SEQUENCES
OF
SIX
OF
THE
SEVEN
OR
MORE
SUBUNITS
OF
CYTOCHROME
OXIDASE
HAVE
BEEN
PUBLISHED
INCLUDING
ALL
OF
THE
LARGEST
THEY
ACCOUNT
FOR
RESIDUES
MORE
THAN
OF
THE
TOTAL
PROTEIN
FROM
THIS
CONSIDERATION
AND
THE
INFORMATION
GATHERED
IN
TABLE
IT
CAN
BE
CONCLUDED
THAT
ABOUT
OF
THE
MASS
OF
CYTOCHROME
OXIDASE
IS
LOCATED
WITHIN
THE
BILAYER
E
GRAND
AVERAGES
OF
HYDROPATHY
IN
THE
PAST
MANY
CLAIMS
HAVE
BEEN
MADE
TO
THE
EFFECT
THAT
INFORMATION
ABOUT
THE
SIZE
AND
SHAPE
OF
A
PROTEIN
BIGELOW
FISHER
OR
ITS
AFFILIATION
WITH
A
MEMBRANE
CAPALDI
VANDERKOOI
COULD
BE
OBTAINED
FROM
ITS
AMINO
ACID
EVALUATION
OF
PROTEIN
HYDROPATHY
TABLE
CANDIDATES
FOR
MEMBRANE
SPANNING
SEQUENCES
IN
CYTOCHROME
OXIDASE
COMPOSITION
ALONE
TO
EXPLORE
THIS
POSSIBILITY
IN
THE
PRESENT
CONTEXT
WE
COMPARED
THE
OVERALL
HYDROPATHY
OF
A
LARGE
NUMBER
OF
SEQUENCES
BY
SIMPLY
PROGRAMMING
THE
COMPUTER
TO
SUM
THE
HYDROPATHY
VALUES
OF
ALL
THE
AMINO
ACIDS
AND
DIVIDING
BY
THE
NUMBER
OF
RESIDUES
IN
THE
SEQUENCE
TO
OBTAIN
A
GRAVY
SCORE
THE
GRAVY
SCORES
WERE
PLOTTED
AS
A
FUNCTION
OF
TOTAL
SEQUENCE
LENGTH
INASMUCH
AS
IT
HAS
LONG
BEEN
THOUGHT
THAT
LARGER
GLOBULAR
PROTEINS
NEED
MORE
HYDROPHOBIC
AMINO
ACIDS
IN
ORDER
TO
FILL
UP
THEIR
INTERIORS
BIGELOW
FISHER
THE
DISTRIBUTION
OBTAINED
WHEN
THE
OVERALL
HYDROPATHIES
OF
FULLY
SEQUENCED
SOLUBLE
ENZYMES
ARE
PLOTTED
AS
A
FUNCTION
OF
THEIR
TOTAL
LENGTH
INDICATES
THAT
THE
AVERAGE
HYDROPATHY
OF
SOLUBLE
PROTEIN
IS
INDEPENDENT
OF
THE
SEQUENCE
LENGTH
AND
EARLIER
CONCLUSIONS
ABOUT
POSSIBLE
CORRELATIONS
BETWEEN
THE
SIZE
AND
SHAPE
OF
A
PROTEIN
AND
ITS
AMINO
ACID
COMPOSITION
BIGELOW
FISHER
MAY
HAVE
BEEN
OVERSTATED
INCLUDED
IN
FIGURE
ARE
THE
GRAVY
SCORES
FOR
SEVERAL
MEMBRANE
EMBEDDED
PROTEINS
WHOSE
SEQUENCES
HAVE
BEEN
ESTABLISHED
THESE
VALUES
LIE
WELL
ABOVE
THOSE
FOR
THE
SOLUBLE
PROTEINS
GRAVY
SCORES
WERE
ALSO
CALCULATED
FOR
OTHER
MEMBRANESPANNING
PROTEINS
ON
THE
BASIS
OF
THEIR
AMINO
ACID
COMPOSITIONS
AS
DETERMINED
FROM
AMINO
ACID
ANALYSIS
OF
TIMED
HYDROLYSES
TABLE
ALTHOUGH
THE
GRAVY
SCORES
FOR
THESE
MEMBRANE
BOUND
PROTEINS
ARE
ALSO
QUITE
HIGH
IN
EVERY
CASE
EXCEEDING
THE
MEAN
OF
THE
COMPOSITIONS
OF
SEQUENCED
SOLUBLE
PROTEINS
WHEN
THEIR
SPREAD
IS
J
KYTE
AND
R
F
DOOLITTLE
GRAVY
PLOT
I
ODN
I
A
A
O
E
OAAO
NO
A
D
X
XX
X
L
I
I
I
I
I
I
I
I
I
I
I
I
I
IC
LO
LENGTH
RESIDUES
FRA
PLOT
OF
MEAN
HYDROPATHIES
GRAVY
SCORES
OF
VARIOUS
PROTEINS
AGAINST
THEIR
LENGTHS
X
FULLY
SEQUENCED
SOLUBLE
ENZYMES
WHOSE
AMINO
ACID
SEQUENCES
HAVE
BEEN
TAKEN
FROM
THE
RECENT
LITERATURE
MEMBRANE
EMBEDDED
PROTEINS
WHOSE
SEQUENCES
HAVE
BEEN
DETERMINED
BACTERIORHODOPSIN
YEAST
MITOCHONDRIAL
CYTOCHROMR
OXIDASE
SUBUNITS
J
TO
III
CYTOCHROMR
H
AND
THE
OII
OLI
ATPASE
SUBUNIT
AND
CARBODIIMIDE
SENSITIVE
MITOCHONDRIAL
PRO
A
PUTATIVE
PROTEINS
INFERRED
FROM
THE
UNIDENTIFIED
READING
FRAMES
FOUND
IN
THE
DNA
OF
HUMAN
MITOCHONDRIA
ANDERSON
ET
AL
TABLE
AVERAGE
HYDROPATHY
GRAVY
FOR
THE
ENTIRE
AMINO
ACID
COMPOSITION
OF
A
COLLECTION
OF
MEMBRANE
SPNNING
PROTEINS
PROTEIN
GRAVY
REFERENCES
YEAST
CYTOCHROME
B
H
BACTERIUM
H
URN
BACTERIORHODOPSIN
CYTOCHROME
OXIDASE
YEAST
BOVINE
A
HUMAN
GLUCOSE
CARRIERB
BOVINE
RHODOPSINB
HUMAN
ANION
CARRIERB
CANINE
NA
II
ATPASE
A
SUBUNITB
RABBIT
ATPASEB
TORPEDO
CNLIFORNICA
ACETYLCHOLINE
RECEPTORB
NOBRAGA
TZAGOLOFF
KHORANA
ET
AL
SOGIN
HINKLE
HELLER
POBER
STRYER
HO
GUIDOTTI
DRICKEMER
STECK
ET
AL
KYTE
ALLEN
ET
AL
VANDLEN
ET
AL
A
FROM
SEQUENCE
B
FROM
COMPOSITION
FROM
ALL
SUBUNITS
LISTED
IN
TABLE
EVALUATION
OF
PROTEIN
HYDROPATHY
COMPARED
TO
THE
SPREAD
OF
THE
VALUES
FOR
AN
ARRAY
OF
SOLUBLE
PROTEINS
FIG
THE
CLAIM
THAT
MEMBRANE
BOUND
PROTEINS
CAN
BE
DISTINGUISHED
FROM
SOLUBLE
PROTEINS
BY
THEIR
AMINO
ACID
COMPOSITIONS
ALONE
CAPALDI
VANDERKOOI
APPEARS
TENUOUS
THERE
REMAINS
THE
POSSIBILITY
HOWEVER
THAT
THE
UNEXPECTED
HYDROPHILICITY
OF
THE
MEMBRANE
SPANNING
PROTEINS
WHOSE
COMPOSITIONS
ARE
KNOWN
ONLY
FROM
AMINO
ACID
ANALYSIS
MAY
ACTUALLY
BE
DUE
TO
A
FAILURE
TO
HYDROLYZE
MEMBRANE
SPANNING
SEQUENCES
COMPLETELY
EVEN
AFTER
HOURS
AT
C
DISCUSSION
THE
EQUILIBRIUM
THAT
DETERMINES
THE
UNIQUE
MOLECULAR
STRUCTURE
OF
A
PROTEIN
IS
THE
ONE
THAT
EXISTS
BETWEEN
IT
AND
A
RANDOM
COIL
ANFINSEN
IT
IS
GENERALLY
ASSUMED
THAT
THIS
PROCESS
CAN
BE
DESCRIBED
AS
A
SIMPLE
TWO
STATE
EQUILIBRIUM
BETWEEN
THE
NATIVE
STRUCTURE
AND
THE
RANDOM
COIL
AND
EXPERIMENTAL
RESULTS
CONSISTENT
WITH
THIS
ASSUMPTION
HAVE
BEEN
PRESENTED
TANFORD
IF
THIS
IS
INDEED
THE
CASE
THE
INDIVIDUAL
CONTRIBUTIONS
TO
THE
OVERALL
FREE
ENERGY
CHANGE
FOR
THIS
ISOMERIZATION
WOULD
BE
THE
MOST
CRITICAL
FACTORS
IN
DETERMINING
THE
OUTCOME
RATHER
THAN
ANY
KINETIC
FEATURES
OF
THE
REACTION
THESE
THERMODYNAMIC
FORCES
BY
THE
VERY
NATURE
OF
THE
PROCESS
MUST
BE
NON
COVALENT
INTERACTIONS
SEVERAL
PROVOCATIVE
DISCUSSIONS
OF
THESE
MATTERS
HAVE
BEEN
PRESENTED
COHN
EDSALL
KAUZMANN
JENCKS
CHOTHIA
MOREOVER
IT
HAS
BEEN
DEMONSTRATED
DEFINITIVELY
BY
EXPERIMENTAL
OBSERVATION
THAT
NEITHER
HYDROGEN
BONDS
KLOTZ
FRANZEN
NOR
IONIC
INTERACTIONS
COHN
EDSALL
NOR
DISPERSION
FORCES
DENO
BERKHEIMER
CAN
PROVIDE
ANY
NET
FAVORABLE
FREE
ENERGY
FOR
THE
FORMATION
OF
THE
NATIVE
STRUCTURE
IN
AQUEOUS
SOLUTION
THEREFORE
BY
EXCLUSION
AND
PERHAPS
FOR
THE
LACK
OF
A
BETTER
CANDIDATE
HYDROPHOBIC
FORCES
KAUZMANN
HAVE
ATTRACTED
THE
MOST
ATTENTION
IN
DISCUSSIONS
OF
THIS
PROCESS
FELICITOUSLY
THIS
HAS
DRAWN
ATTENTION
TO
THE
SIGNIFICANT
ROLE
OF
THE
AQUEOUS
SOLVENT
PER
SE
THE
HYDROPHOBIC
FORCE
IS
SIMPLY
THAT
FORCE
ARISING
FROM
THE
STRONG
COHESION
OF
THE
SOLVENT
WHICH
DRIVES
MOLECULES
LACKING
ANY
FAVORABLE
INTERACTIONS
WITH
THE
WATER
MOLECULES
THEMSELVES
FROM
THE
AQUEOUS
PHASE
JENCKS
IN
THE
CASE
OF
THE
FORMATION
OF
THE
NATIVE
STRUCTURE
FROM
THE
RANDOM
COIL
THIS
FORCE
PARTICIPATES
IN
THE
REACTION
BECAUSE
HYDROPHOBIC
SIDE
CHAINS
WHICH
ARE
EXPOSED
TO
WATER
IN
THE
EXTENDED
COIL
ARE
REMOVED
TO
THE
INTERIOR
OF
THE
PROTEIN
DURING
THE
FOLDING
OF
THE
NATIVE
STRUCTURE
CHOTHIA
THIS
TRANSFER
APPEARS
TO
PROVIDE
THE
ONLY
FAVORABLE
FREE
ENERGY
AVAILABLE
TO
DRIVE
THE
REACTION
TO
COMPLETION
THEREFORE
THE
MORE
AVERSION
WATER
HAS
FOR
A
GIVEN
AMINO
ACID
SIDE
CHAIN
THE
MORE
FREE
ENERGY
IS
GAINED
WHEN
THAT
RESIDUE
OR
A
PORTION
OF
IT
ENDS
UP
INSIDE
THE
NATIVE
STRUCTURE
CONVERSELY
AND
OF
EQUAL
IMPORTANCE
IT
IS
ALSO
THE
CASE
THAT
THE
MORE
ATTRACTION
WATER
HAS
FOR
A
FUNCTIONAL
GROUP
ON
AN
AMINO
ACID
SIDE
CHAIN
THE
MORE
FREE
ENERGY
IS
LOST
WHEN
THAT
FUNCTIONAL
GROUP
IS
REMOVED
FROM
WATER
DURING
THE
FOLDING
PROCESS
THIS
POINT
BECOMES
CLEAR
UPON
EXAMINATION
OF
THE
DATA
IN
TABLE
WHEN
IT
IS
REALIZED
THAT
MOST
OF
THE
FREE
ENERGIES
OF
TRANSFER
FROM
WATER
TO
THE
CONDENSED
VAPOR
ARE
ACTUALLY
UNFAVORABLE
MANY
BY
A
CONSIDERABLE
AMOUNT
THIS
IS
DUE
OF
COURSE
TO
THE
FACT
THAT
WATER
PARTICIPATES
IN
STRONG
INTERACTIONS
WITH
HYDROGENBOND
DONORS
AND
ACCEPTORS
KLOTZ
FARNHAM
AS
WELL
AS
TO
THE
NEED
TO
J
KYTE
AND
R
F
DOOLITTLE
NEUTRALIZE
CHARGED
SIDE
CHAINS
AS
A
RESULT
ONE
OF
THE
MAJOR
FREE
ENERGY
DEFICITS
IN
THE
FOLDING
OF
A
PROTEIN
RESULTS
FROM
THE
REQUIREMENT
TO
UNSOLVATE
THOSE
HYDROPHILIC
FUNCTIONAL
GROUPS
DESTINED
FOR
THE
INTERIOR
SOME
OF
THIS
INVESTMENT
IS
RETURNED
WHEN
HYDROGEN
BONDS
ARE
FORMED
IN
THE
INTERIOR
NEVERTHELESS
BECAUSE
OF
GEOMETRIC
CONSTRAINTS
THE
HYDROPHILIC
SIDE
CHAINS
IN
THE
CENTER
OF
A
PROTEIN
PARTICIPATE
IN
FAR
FEWER
HYDROGEN
BONDS
THAN
THEY
WOULD
IN
THE
UNFOLDED
AND
EXPOSED
RANDOM
COIL
WHERE
BOTH
THE
DONORS
AND
ACCEPTORS
INTERACT
FULLY
WITH
WATER
AS
SUCH
THERE
IS
A
HIGH
PROBABILITY
THAT
SIGNIFICANT
FREE
ENERGY
WILL
BE
LOST
WHENEVER
A
HYDROPHILIC
RESIDUE
IS
REMOVED
FROM
WATER
DURING
THE
FOLDING
PROCESS
IT
IS
UNDENIABLY
THE
CASE
THEREFORE
THAT
BOTH
THE
HYDROPHOBICITY
AND
THE
HYDROPHILICITY
OF
A
GIVEN
SEQUENCE
OF
AMINO
ACIDS
AFFECT
THE
OUTCOME
OF
THE
EQUILIBRIUM
BETWEEN
THE
RANDOM
COIL
AND
THE
NATIVE
STRUCTURE
ALTHOUGH
ONE
OR
THE
OTHER
OF
THESE
TWO
PROPERTIES
IS
OFTEN
EMPHASIZED
TO
MAKE
A
PARTICULAR
POINT
NEITHER
IS
MORE
IMPORTANT
THAN
THE
OTHER
FOR
EXAMPLE
IT
IS
OFTEN
STATED
THAT
THE
INTERIOR
OF
A
PROTEIN
IS
FORMED
FROM
ITS
HYDROPHOBIC
SEQUENCES
BUT
IT
IS
SELDOM
POINTED
OUT
THAT
THE
INTERIOR
OF
THE
PROTEIN
IS
ALSO
FORMED
BECAUSE
THE
HYDROPHILIC
SEQUENCES
CANNOT
BE
BURIED
THUS
IT
CAN
BE
CONCLUDED
THAT
ANY
DESCRIPTION
OF
THE
FOLDING
PROCESS
THAT
FAILS
TO
CONSIDER
EITHER
HYDROPHOBICITY
OR
HYDROPHILICITY
IS
DISCARDING
HALF
OF
THE
INFORMATION
CONTAINED
WITHIN
THE
SEQUENCE
OF
THE
PROTEIN
IT
HAS
ALSO
BEEN
POINTED
OUT
LIFSON
SANDER
JANIN
CHOTHIA
CHOTHIA
JANIN
THAT
THE
PACKING
PROPERTIES
OF
RESIDUES
SUCH
AS
LEUCINE
ISOLEUCINE
AND
VALINE
MIGHT
HAVE
AN
EFFECT
INDEPENDENT
OF
HYDROPATHY
ON
THE
FOLDING
PROCESS
AS
THE
INTERIOR
OF
THE
PROTEIN
IS
FITTED
TOGETHER
JNFORTUNATELY
VERY
LITTLE
IS
KNOWN
ABOUT
THE
FEATURES
OF
THIS
STERIC
INTERPLAY
AND
OUR
UNDERSTANDING
OF
THE
FOLDING
PROCESS
DOES
NOT
EXTEND
BEYOND
THE
CONCLUSION
THAT
HYDROPATHY
IS
OF
CENTRAL
IMPORTANCE
TO
IT
THE
CONCLUSION
THAT
CAN
BE
DRAWN
FROM
ALL
OF
THESE
CONSIDERATIONS
IS
THAT
TO
A
FIRST
APPROXIMATION
THE
NATIVE
STRUCTURE
OF
A
PROTEIN
MOLECULE
WILL
BE
THAT
STRUCTURE
THAT
PERMITS
THE
REMOVAL
OF
THE
GREATEST
AMOUNT
OF
HYDROPHOBIC
SURFACE
AREA
AND
THE
SMALLEST
NUMBER
OF
HYDROPHILIC
POSITIONS
FROM
EXPOSURE
TO
WATER
BIGELOW
FISHER
CHOTHIA
THE
OBVIOUS
PREDICTION
THAT
FOLLOWS
FROM
THIS
CONCLUSION
IS
THAT
THE
MOST
HYDROPHOBIC
SEQUENCES
IN
A
PROTEIN
WILL
BE
FOUND
IN
THE
INTERIOR
OF
THE
NATIVE
STRUCTURE
AND
THE
MOST
HYDROPHILIC
SEQUENCES
WILL
BE
FOUND
ON
THE
EXTERIOR
IN
ORDER
TO
EXPLOIT
THIS
PREDICTION
WITH
THE
GREATEST
SUCCESS
THE
MOST
ACCURATE
EVALUATIONS
OF
THE
HYDROPHOBICITY
AND
HYDROPHILICIT
Y
OF
EACH
AMINO
ACID
SIDE
CHAIN
SHOULD
BE
FORMULATED
TO
THIS
END
A
NUMBER
OF
HYDROPATHY
SCALES
HAVE
BEEN
PROPOSED
IN
OTHER
PUBLICATIONS
BUT
IN
OUR
VIEW
THEY
ALL
SUFFER
FROM
SERIOUS
DRAWBACKS
THOSE
BASED
ON
WATER
ETHANOL
TRANSFER
FREE
ENERGIES
XOZAKI
B
TANFORD
SEGREST
CY
FELDMAN
ROSE
ARE
IMPERFECT
DUE
TO
THE
PECULIARITIES
OF
ETHANOL
AS
A
SOLVENT
WHICH
SEEM
ALMOST
AS
UNUSUAL
AS
THOSE
OF
WATER
ITSELF
TABLE
A
SCALE
BASED
ON
THE
PARTITION
COEFFICIENT
BETWEEN
THE
BULK
AQUEOUS
PHASE
AND
THE
AIR
WATER
INTERFACE
BULL
BREESE
ALSO
SEEMS
A
POOR
CHOICE
BECAUSE
THE
HYDROGEN
BONDS
THAT
MUST
BE
BROKEN
AND
THE
CHARGES
THAT
MUST
BE
NEUTRALIZED
TO
REMOVE
A
RESIDUE
FROM
THE
AQUEOUS
PHASE
DURING
THE
FORMATION
OF
THE
NATIVE
STRUCTURE
PROBABLY
REMAIN
INTACT
AT
THE
AIR
WATER
INTERFACE
AND
ARE
THUS
NOT
A
EVALUATION
OF
PROTEIN
HYDROPATHY
FACTOR
IN
THE
OVERALL
REACTION
IN
A
MORE
COMPLICATED
ATTEMPT
ZIMMERMAN
ET
AI
COMPLETELY
NEGLECTED
THE
VERY
LARGE
SOLVATION
ENERGIES
ASSOCIATED
WITH
THE
HYDROPHILIC
SIDE
CHAINS
JENCKS
IN
FORMULATING
THEIR
POLARITY
RANKING
WHICH
IS
BASED
ON
ELECTROSTATIC
FORCES
IN
A
VACUUM
FURTHERMORE
THE
CRYSTAL
LATTICE
ENERGIES
INHERENT
IN
THE
AMINO
ACID
SOLUBILITIES
THAT
WERE
USED
FOR
HYDROPHOBICITY
PARAMETERS
ARE
ALSO
DISREGARDED
BY
THESE
AUTHORS
FINALLY
A
SCALE
PROPOSED
BY
VON
HEIJNE
BLOMBERG
ALTHOUGH
SOPHISTICATED
IN
ITS
INTENT
RELIES
ENTIRELY
ON
THEORETICAL
CALCULATIONS
WITH
SCANT
REFERENCE
TO
ANY
EMPIRICAL
OBSERVATION
THE
WATER
VAPOR
PARTITION
FREE
ENERGIES
TABLE
L
WHICH
WERE
FIRST
APPLIED
TO
THE
PROBLEM
OF
PROTEIN
FOLDING
BY
WOLFENDEN
ET
AL
ALSO
HAVE
SHORTCOMINGS
THE
USE
OF
THE
VAPOR
AS
THE
REFERENCE
STATE
LEADS
TO
THE
INCORPORATION
OF
THE
DISPERSION
FORCES
INTO
THE
TRANSFER
FREE
ENERGIES
SINCE
THERE
IS
IN
ALL
LIKELIHOOD
ONLY
A
NEGLIGIBLE
AND
UNPREDICTABLE
CONTRIBUTION
OF
DISPERSION
FORCES
TO
THE
PROCESS
OF
PROTEIN
FOLDING
DENO
BERKHEIMER
THESE
IN
PRINCIPLE
SHOULD
BE
SUBTRACTED
FROM
EACH
VALUE
UNFORTUNATELY
IT
IS
NOT
EVEN
CLEAR
AT
THE
MOMENT
WHAT
THE
ORDER
OF
MAGNITUDE
OF
THESE
FREE
ENERGIES
IS
LET
ALONE
THEIR
INDIVIDUAL
VALUES
JENCKS
IF
THEY
ARE
ROUGHLY
THE
SAME
FOR
EACH
SIDE
CHAIN
THEN
THEIR
ONLY
EFFECT
WOULD
BE
TO
SHIFT
THE
WHOLE
SCALE
UNIFORMLY
WITHOUT
AFFECTING
THE
RELATIVE
POSITION
OF
EACH
IF
THESE
FORCES
ARE
ROUGHLY
PROPORTIONAL
TO
THE
VOLUME
OF
THE
SIDE
CHAINS
THEY
SHOULD
ALSO
BE
FAIRLY
CONSTANT
TABLE
L
BUT
DIFFICULTIES
COULD
ARISE
WITH
VERY
LARGE
AND
VERY
SMALL
SIDE
CHAINS
SUCH
AS
TRYPTOPHAN
OR
GLYCINE
AND
ALANINE
RESPECTIVELY
FURTHERMORE
IT
IS
NOT
CLEAR
WHETHER
THE
VACUUM
IS
AN
ADEQUATE
MODEL
FOR
THE
INTERIOR
OF
A
PROTEIN
WITH
ITS
COLLECTION
OF
HETEROGENEOUS
POLARIZABILITIES
AND
ORIENTED
DIPOLES
NEVERTHELESS
AS
POINTED
OUT
BY
WOLFENDEN
ET
AL
THE
VALUES
FOR
THESE
TRANSFER
FREE
ENERGIES
CORRELATE
REMARKABLY
WELL
WITH
THE
ACTUAL
DISTRIBUTION
OF
THE
SIDE
CHAINS
BETWEEN
THE
INTERIOR
AND
EXTERIOR
OF
PROTEIN
MOLECULES
CHOTHIA
IF
IT
IS
ASSUMED
BASED
ON
THE
OBSERVED
CORRELATION
OF
THE
TRANSFER
FREE
ENERGIES
AND
THE
ACTUAL
DISTRIBUTION
OF
THE
SIDE
CHAINS
WOLFENDEN
ET
AL
THAT
BOTH
OF
THESE
PARAMETERS
ARE
TO
THE
FIRST
APPROXIMATION
MEASUREMENTS
OF
THE
HYDROPATHY
OF
A
GIVEN
AMINO
SIDE
CHAIN
THEN
THE
BEST
AVAILABLE
HYDROPATHY
INDEX
SHOULD
BE
BASED
ON
A
CONSIDERATION
OF
BOTH
OF
THESE
QUANTITIES
THIS
FOLLOWS
FROM
THE
FACT
THAT
EACH
OF
THEM
SUFFERS
FROM
ITS
OWN
UNIQUE
UNCERTAINTIES
THE
TRANSFER
FREE
ENERGIES
INCORPORATE
DISPERSION
FORCES
OF
UNKNOWN
MAGNITUDE
THE
DISTRIBUTIONS
BASED
ON
EXAMINATION
OF
SEVERAL
PROTEIN
STRUCTURES
ARE
CALCULATED
FROM
A
LIMITED
DATA
BASE
AND
ARE
BIASED
BY
STERIC
FEATURES
THAT
ARE
NOT
YET
UNDERSTOOD
SINCE
NONE
OF
THE
DRAWBACKS
IS
SHARED
BY
THESE
TWO
INDEPENDENT
MEASURES
OF
HYDROPATHY
THE
MOST
SATISFACTORY
INDEX
SHOULD
BE
FORMULATED
FROM
A
CONSIDERATION
OF
ALL
OF
THE
AVAILABLE
INFORMATION
AS
HAS
BEEN
DONE
HERE
IN
ADDITION
THE
HYDROPATHY
SCALE
PRESENTED
HERE
UNLIKE
MANY
EARLIER
ONES
SPANS
THE
ENTIRE
HYDROPATHY
SPECTRUM
FROM
THE
HYDROPHOBIC
END
TO
THE
HYDROPHILIC
FOR
THE
REASONS
DISCUSSED
ABOVE
THIS
IS
AN
ESSENTIAL
ASPECT
OF
ANY
SCALE
IT
IS
A
POINT
THAT
WAS
ALSO
EMPHASIZED
BY
WOLFENDEN
ET
AL
THE
HYDROPATHY
VALUES
PRESENTED
IN
TABLE
BEING
SINGULAR
NUMBERS
DO
NOT
HAVE
ASSOCIATED
WITH
THEM
AN
INDICATION
OF
THEIR
UNCERTAINTY
SUCH
AS
FOR
EXAMPLE
A
STANDARD
DEVIATION
IN
RETROSPECT
SOME
OF
THESE
PARAMETERS
ARE
MORE
RELIABLE
THAN
J
KYTE
AND
R
F
DOOLITTLE
OTHERS
THE
MOST
UNEQUIVOCAL
VALUES
ARE
THOSE
ASSOCIATED
WITH
LEUCINE
ISOLEUCINE
VALINE
PHENYLALANINE
METHIONINE
THREONINE
SERINE
LYSINE
GLUTAMINE
AND
ASPARAGINE
THESE
TEN
RESIDUES
TOGETHER
COMPRISE
SLIGHTLY
MORE
THAN
HALF
OF
THE
PRESENT
CENSUS
OF
THE
AMINO
ACIDS
FOUND
IN
PROTEINS
MOST
OF
THESE
SIDE
CHAINS
HAVE
PARTIAL
SPECIFIC
VOLUMES
BETWEEN
AND
MOL
WHICH
SUGGESTS
THAT
DISPERSION
FORCES
MAY
NOT
INFLUENCE
THEIR
RANK
THEIR
RELATIVE
POSITIONS
CHANGE
LITTLE
FROM
THE
FRACTION
BURIED
TO
THE
FRACTION
BURIED
TO
THE
FREE
ENERGY
OF
TRANSFER
TABLE
AS
SUCH
THESE
RESIDUES
ANCHOR
THE
SCALE
AND
ARE
PROBABLY
THOSE
MOST
RESPONSIBLE
FOR
ITS
SUCCESS
THERE
IS
A
GROUP
OF
AMINO
ACIDS
THAT
ARE
LESS
RELIABLE
CYSTEINE
IS
COMPLICATED
BY
THE
PROBLEM
OF
DISULFIDE
BONDS
PROLINE
BY
THE
LACK
OF
AN
ADEQUATE
MODEL
COMPOUND
IN
THE
TRANSFER
FREE
ENERGIES
AS
WELL
AS
ITS
TENDENCY
TO
PARTICIPATE
IN
TURNS
ON
THE
EXTERIOR
AND
ASPARTIC
ACID
GLUTAMIC
ACID
AND
TYROSINE
BY
THE
LARGE
DIFFERENCES
BETWEEN
THEIR
TENDENCY
TO
BE
BURIED
AND
THEIR
FREE
ENERGIES
OF
TRANSFER
CERTAIN
AMINO
ACIDS
TRYPTOPHAN
TYROSINE
GLUTAMIC
ACID
AND
HISTIDINE
ARE
VERY
RELUCTANT
TO
BURY
THE
LAST
OF
THEIR
SURFACE
AREA
WHILE
SOME
ALANINE
GLYCINE
AND
CYSTEINE
ARE
FAR
MORE
LIKELY
THAN
THE
OTHERS
TO
BECOME
FULLY
BURIED
FINALLY
ARGININE
WAS
ARBITRARILY
ASSIGNED
A
PARAMETER
OF
EVEN
THOUGH
NO
ARGININE
WAS
FOUND
TO
BE
EVEN
AS
MUCH
AS
BURIED
CHOTHIA
AND
NO
MODEL
COMPOUND
FOR
ARGININE
WAS
EMPLOYED
IN
THE
WATER
VAPOR
TRANSFER
STUDIES
OF
WOLFENDEN
ET
AL
IT
IS
POSSIBLE
THAT
THE
PARAMETER
FOR
THIS
SIDE
CHAIN
SHOULD
BE
EVEN
MORE
NEGATIVE
WOLFENDEN
ET
AL
GLYCINE
AND
ALANINE
ARE
ESPECIALLY
DIFFICULT
TO
CATEGORIZE
BOTH
LACK
SATISFACTORY
MODEL
COMPOUNDS
FOR
PHASE
TRANSFER
STUDIES
BECAUSE
METHANE
IS
SUCH
A
SMALL
MOLECULE
ITS
RELATIVE
HYDROPHOBICITY
IS
PROBABLY
SERIOUSLY
OVERESTIMATED
BY
WATER
VAPOR
TRANSFER
ENERGY
BECAUSE
OF
THE
AMBIGUITY
INTRODUCED
BY
DISPERSION
FORCES
INDEED
THE
USE
OF
HYDROGEN
GAS
AS
A
MODEL
COMPOUND
FOR
GLYCINE
WOLFENDEN
ET
AL
IS
SUCH
AN
EXTREME
CASE
OF
THE
PROBLEM
THAT
ARISES
FROM
THE
CONTRIBUTIONS
OF
THE
DISPERSION
FORCES
WHEN
MOLECULES
OF
SUCH
RADICALLY
DIFFERENT
ELECTRON
DENSITIES
ARE
COMPARED
THAT
ITS
WATER
VAPOR
TRANSFER
FREE
ENERGY
IS
PROBABLY
A
MEANINGLESS
NUMBER
IN
THIS
CONTEXT
AND
IT
HAS
NOT
BEEN
INCLUDED
IN
TABLE
ON
THE
OTHER
HAND
BOTH
ALANINE
AND
GLYCINE
ARE
QUITE
INSENSITIVE
TO
BECOMING
FULLY
BURIED
TABLE
WHICH
SUGGESTS
THAT
THE
SIDE
CHAINS
CONTRIBUTE
LITTLE
ENERGY
ONE
WAY
OR
THE
OTHER
TO
PROTEIN
FOLDING
BECAUSE
THEY
ARE
NOT
HYDROPATHIC
THE
CONCLUSION
FROM
THESE
ARGUMENTS
IS
THAT
THE
MORE
ALANINE
AND
GLYCINE
A
SEGMENT
CONTAINS
THE
MORE
EQUIVOCAL
ITS
HYDROPATHY
BECOMES
A
RATHER
INTERESTING
AND
UNFORESEEN
FEATURE
OF
THE
INTERACTION
BETWEEN
THE
VARIOUS
SIDE
CHAINS
AND
WATER
IS
THAT
THE
AROMATIC
AMINO
ACIDS
TRYPTOPHAN
TYROSINE
AND
HISTIDINE
ARE
FAR
MORE
POLAR
THAN
PREVIOUSLY
THOUGHT
XOZAKI
TANFORD
IT
HAS
BEEN
NOTED
THAT
AROMATIC
COMPOUNDS
ARE
MORE
SOLUBLE
IN
WATER
BY
AN
ORDER
OF
MAGNITUDE
THAN
THEIR
SURFACE
AREAS
WOULD
INDICATE
HERMANN
THE
PHENYLALANINE
SIDE
CHAIN
HOWEVER
IS
MUCH
LESS
HYDROPHILIC
THAN
THE
OTHER
THREE
AND
THIS
SUGGESTS
THAT
IT
IS
THE
HETEROATOMS
IN
THE
LATTER
THAT
ARE
THE
MAJOR
CONTRIBUTORS
TO
THEIR
HYDROPHILICITY
IN
THIS
CONTEXT
TRYPTOPHAN
IS
ONE
OF
THE
MOST
DIFFICULT
RESIDUES
TO
WHICH
TO
ASSIGN
A
HYDROPATHY
INDEX
IT
HAS
A
FAIRLY
POSITIVE
WATER
VAPOR
TRANSFER
FREE
ENERGY
EVALUATION
OF
PROTEIN
HYDROPATHY
TABLE
BUT
MUCH
OF
THIS
MAY
RESULT
FROM
LARGE
FAVORABLE
DISPERSION
FORCES
DUE
TO
THE
RESIDUE
LARGE
VOLUME
THE
OPPOSITE
PROBLEM
TO
THE
ONE
EXPERIENCED
WITH
GLYCINE
AND
ALANINE
EXAMINATION
OF
THE
ACTUAL
LOCATION
OF
TRYPTOPHAN
IN
A
NUMBER
OF
PROTEINS
CHOTHIA
HOWEVER
CLEARLY
INDICATES
THAT
THIS
SIDECHAIN
IS
INFREQUENTLY
TOTALLY
BURIED
TABLE
IN
THE
SPECIFIC
CASE
OF
THE
INTERACTION
OF
GRAMICIDIN
WITH
A
PHOSPHOLIPID
BILAYER
IT
SHOULD
BE
MENTIONED
THAT
ITS
TRYPTOPHAN
RESIDUES
ARE
CLUSTERED
AT
THE
TWO
ENDS
OF
THE
PORE
RATHER
THAN
BEING
DISTRIBUTED
EVENLY
THROUGHOUT
AGAIN
SUGGESTING
AN
UNEXPECTED
HYDROPHILICITY
FOR
THESE
RESIDUES
AND
A
RELUCTANCE
TO
BURY
THE
LAST
OF
SURFACE
TABLE
ALTHOUGH
THE
HYDROPATHY
OF
TRYPTOPHAN
IS
RELATIVELY
UNIMPORTANT
IN
CONSIDERATIONS
OF
SOLUBLE
PROTEINS
SINCE
ITS
FREQUENCY
IS
ONLY
ABOUT
L
THERE
ARE
INDICATIONS
THAT
IT
MAY
BE
VERY
SIGNIFICANT
IN
MEMBRANE
AFFILIATED
SEQUENCES
IN
PARTICULAR
OF
THE
TRYPTOPHAN
RESIDUES
IN
CA
ATPASE
SEEM
TO
BE
WITHIN
SEQUENCES
DIRECTLY
ASSOCIATED
WITH
THE
BILAYER
ALLEN
ET
AL
ANOTHER
INSTANCE
IS
THE
TRYPTOPHAN
CLUSTER
IN
CYTOCHROME
B
NOTED
ABOVE
WHICH
THE
HYDROPATHY
PROFILE
CLEARLY
POSITIONS
AT
THE
AQUEOUS
INTERFACE
FIG
FINALLY
EARLIER
CLAIMS
THAT
TRYPTOPHAN
WAS
THE
MOST
HYDROPHOBIC
OF
THE
AMINO
ACIDS
WERE
BASED
ENTIRELY
ON
TRANSFER
FREE
ENERGIES
BETWEEN
WATER
AND
ETHANOL
OR
DIOXANE
NOZAKI
TANFORD
IT
WAS
NOT
RECOGNIZED
AT
THAT
TIME
THAT
WHEN
THE
TRYPTOPHAN
SIDE
CHAIN
WHICH
POSSESSES
A
HYDROGEN
BOND
DONOR
ONLY
IS
TRANSFERRED
BETWEEN
WATER
A
SOLVENT
WITH
EQUAL
NUMBERS
OF
DONORS
AND
ACCEPTORS
AND
ETHANOL
OR
DIOXANE
SOLVENTS
WITH
EXCESSES
OF
HYDROGEN
BOND
ACCEPTORS
THERE
IS
A
NET
INCREASE
OF
ONE
MOLE
OF
HYDROGEN
BOND
MOLE
INDOLE
FORMED
DURING
THE
TRANSFER
CAUSING
THE
SIDE
CHAIN
TO
APPEAR
MUCH
MORE
HYDROPHOBIC
THAN
IT
ACTUALLY
IS
USING
THE
SAME
LOGIC
IT
IS
CLEAR
THAT
IN
A
PROTEIN
SOLUTION
WHICH
NECESSARILY
CONTAINS
MORE
ACCEPTORS
THAN
DONORS
THE
REMOVAL
OF
THE
DONOR
ON
TRYPTOPHAN
FROM
ACCESS
TO
THE
SOLVENT
IS
A
SIGNIFICANTLY
UNFAVORABLE
REACTION
IT
SEEMS
WHEN
ALL
POINTS
ARE
CONSIDERED
OBJECTIVELY
THAT
TRYPTOPHAN
IS
A
FAIRLY
HYDROPHILIC
SIDE
CHAIN
THE
PARTICULAR
VALUES
CHOSEN
FOR
THE
AMINO
ACID
HYDROPATHIES
EMBODY
ONE
OF
THE
MAJOR
DIFFERENCES
BETWEEN
THE
METHOD
PRESENTED
HERE
AND
A
SIMILAR
ONE
PROPOSED
EARLIER
BY
ROSE
HE
CHOSE
TO
EMPLOY
WATER
ETHANOL
TRANSFER
FREE
ENERGIES
IN
HIS
SCALE
THE
DISADVANTAGES
OF
WHICH
ARE
NOTED
ABOVE
HE
ALSO
CHOSE
TO
IGNORE
AT
LEAST
IN
PRINCIPLE
THE
HYDROPHILIC
FORCE
THE
ATTRACTION
THAT
THE
AQUEOUS
SOLVENT
EXHIBITS
FOR
MANY
SIDE
CHAINS
BY
SIMPLY
ASSIGNING
A
VALUE
OF
ZERO
TO
ALL
SIDE
CHAINS
FOR
WHICH
PARTITION
FREE
ENERGIES
WERE
NOT
LISTED
IN
THE
TABLES
OF
NOZAKI
TANFORD
IN
ADDITION
ROSE
CURVE
SMOOTHING
PROCEDURE
ALTHOUGH
MATHEMATICALLY
SOUND
TENDS
TO
REMOVE
A
GREAT
DEAL
OF
THE
SIMPLICITY
AND
CLARITY
OF
THE
UNSMOOTHED
MOVING
AVERAGE
IN
THE
PROGRAM
DESCRIBED
IN
THIS
PAPER
THE
MEANING
OF
EACH
VALUE
IS
CLEARLY
UNDERSTOOD
AND
A
MORE
DISTINCT
AND
GRAPHIC
RENDERING
OF
THE
SEQUENCE
OBTAINED
IN
ADDITION
WE
HAVE
EXTENDED
THE
USE
OF
THIS
APPROACH
TO
THE
AREA
OF
MEMBRANESPANNING
SEGMENTS
OF
PROTEIN
SEQUENCES
IN
THIS
REGARD
THE
MOST
NOVEL
FEATURE
OF
THE
APPROACH
IS
THAT
MEMBRANE
SPANNING
SEGMENTS
CAN
BE
IDENTIFIED
AND
DISTINGUISHED
FROM
SEQUENCES
THAT
MERELY
PASS
THROUGH
THE
INTERIOR
OF
A
PROTEIN
TABLE
SINCE
IT
IS
THESE
MEMBRANE
SPANNING
PORTIONS
OF
SEQUENCES
THAT
HAVE
PROVEN
TO
BE
MOST
DIFFICULT
TO
STUDY
ALLEN
ET
AL
A
METHOD
FOR
THEIR
J
KYTE
AND
R
F
DOOLITTLE
IDENTIFICATION
OUGHT
TO
BE
QUITE
USEFUL
FOR
INSTANCE
THE
SEQUENCE
OF
BACTERIORHODOPSIN
FIG
WAS
CORRELATED
PREVIOUSLY
WITH
AN
ELECTRON
DENSITY
MAP
ON
THE
BASIS
OF
SEVERAL
CRITERIA
ENGELMAN
ET
AL
ALL
OF
THESE
EARLIER
ARGUMENTS
WERE
BASED
HOWEVER
ON
AN
INITIAL
ASSIGNMENT
OF
THE
TRANSMEMBRANE
REGIONS
WITHIN
THE
SEQUENCE
NO
EXPLANATION
OF
HOW
THESE
DECISIONS
HAD
BEEN
MADE
WAS
PRESENTED
AND
IN
LIEU
OF
THIS
IT
CAN
BE
ASSUMED
THAT
THE
ASSIGNMENTS
MADE
IN
TABLE
ARE
BASED
ON
MORE
OBJECTIVE
CONSIDERATIONS
IF
THE
PRESENT
ASSIGNMENTS
ARE
CORRECT
THE
CRITERION
OF
ION
PAIRING
USED
IN
THE
EARLIER
STUDY
IS
NO
LONGER
MEANINGFUL
BECAUSE
THE
PARTNERS
IN
THE
PURPORTED
ION
PAIRS
WOULD
BE
DISPLACED
FROM
EACH
OTHER
THE
BELIEF
THAT
THE
DIFFICULTY
OF
BURIED
CHARGES
CAN
BE
OVERCOME
BY
FORMING
AN
IONPAIR
IS
KNOWN
TO
BE
NAIVE
INASMUCH
AS
VIRTUALLY
THE
SAME
AMOUNT
OF
FREE
ENERGY
IS
REQUIRED
TO
BURY
AN
ION
PAIR
AS
TO
BURY
A
SINGLE
FIXED
CHARGE
YARSEGIAN
THE
PROBLEM
OF
BURYING
CHARGE
IN
A
PROTEIN
IS
SOLVED
NOT
BY
FORMING
ION
PAIRS
BUT
BY
TITERING
THE
CHARGE
AND
FORMING
A
STRONG
INTERNAL
HYDROGEN
BOND
WITH
THE
NEUTRALIZED
ACID
OR
BASE
IN
THIS
LIGHT
THE
INTERACTIONS
PROPOSED
EARLIER
BETWEEN
LYSINES
AND
ARGININES
ON
THE
ONE
HAND
AND
CARBOXYLATES
ON
THE
OTHER
ARE
POOR
CHOICES
FOR
TWO
REASONS
CARBOXYLATES
ARE
WEAK
BASES
AND
WOULD
BE
UNABLE
TO
WITHDRAW
THE
PROTON
EFFECTIVELY
FROM
THE
VERY
WEAK
CATIONIC
ACIDS
AS
A
RESULT
CHARGE
WOULD
BE
INEFFECTIVELY
NEUTRALIZED
FURTHERMORE
THE
DIFFERENCE
IN
PK
VALUES
BETWEEN
ARGININE
OR
LYSINE
AND
CARBOXYLATE
IS
LARGE
WHICH
WOULD
CAUSE
THE
HYDROGEN
BOND
TO
BE
A
WEAK
ONE
JENCKS
A
MUCH
MORE
FAVORABLE
CHOICE
ON
BOTH
COUNTS
WOULD
BE
A
HYDROGEN
BOND
BETWEEN
LYSINE
OR
ARGININE
AND
TYROSINATE
ANION
IN
FACT
WHEN
THE
ALIGNED
SEQUENCES
TABLE
ARE
EXAMINED
TWO
POTENTIAL
HYDROGEN
BONDS
OF
THIS
TYPE
BECOME
IMMEDIATELY
APPARENT
THOSE
BETWEEN
LYSINE
AND
TYROSINE
ON
THE
ONE
HAND
AND
TYROSINE
AND
ARGININE
ON
THE
OTHER
IN
FACT
NEUTRAL
STRONG
HYDROGEN
BONDS
OF
THIS
TYPE
IN
WHICH
THE
PROTON
IS
RETAINED
PREFERENTIALLY
BY
THE
PHENOLIC
OXYGEN
HAVE
BEEN
OBSERVED
DIRECTLY
IN
LPSINETYROSINE
CO
POLYMERS
KRISTOF
ZUNDEL
THE
BIOLOGICAL
FUNCTION
OF
BACTERIORHODOPSIN
MUST
ALSO
BE
CONSIDERED
IT
HAS
BEEN
SUGGESTED
THAT
THIS
ENZYME
IS
A
LIGHT
DRIVEN
PROTON
PUMP
AND
IT
CAN
BE
ASSUMED
THAT
THE
PROTONS
ARE
PASSED
ACROSS
THE
MEMBRANE
ALONG
A
RELAY
SYSTEM
OF
LONE
PAIRS
THE
MOST
REASONABLE
POSSIBILITY
IS
THAT
THIS
RELAY
SYSTEM
IS
A
STRING
OF
HYDROGENBONDED
CARBOXYLIC
ACIDS
SINCE
THESE
GROUPS
CAN
TRANSFER
PROTONS
EFFICIENTLY
THROUGH
SPACE
BY
A
SIMPLE
ROTATION
FURTHERMORE
ONLY
A
STRING
OF
CARBOXYLIC
ACIDS
COULD
SHUTTLE
PROTONS
FAST
ENOUGH
TO
KEEP
UP
WITH
THE
TURNOVER
OF
THE
ENZYME
A
PROTON
ON
LYSINE
OR
ARGININE
CANNOT
BE
TRANSFERRED
TO
THE
LONE
PAIR
OF
A
WATER
MOLECULE
IN
AQUEOUS
SOLUTION
AT
A
RATE
ANY
GREATER
THAN
ABOUT
SECOND
WHILE
THE
PROTON
ON
A
CARBOXYLIC
ACID
CAN
BE
TRANSFERRED
IN
THE
SAME
REACTION
AT
SECOND
JENCKS
ALTHOUGH
THE
FORMER
RATE
MAY
BE
ENHANCED
IN
A
WELL
ORGANIZED
HYDROGENBONDED
NETWORK
WANG
IT
IS
UNLIKELY
THAT
A
PROTON
TRAVERSING
BACTERIORHODOPSIN
COULD
PASS
THROUGH
A
HYDROGEN
BOND
CONTAINING
A
BASIC
AMINO
ACID
SIDE
CHAIN
AGAIN
EXAMINATION
OF
THE
ALIGNED
SEQUENCES
TABLE
SUGGESTS
THAT
THE
CARBOXYLIC
ACID
SIDE
CHAINS
AT
RESIDUES
AND
OR
SOME
SUBSET
OF
THESE
ARE
DISTRIBUTED
APPROPRIATELY
ACROSS
THE
MEMBRANE
TO
FORM
SUCH
A
RELAY
SYSTEM
FINALLY
THE
PRESENT
ASSIGNMENT
OF
THE
MEMBRANE
SPANNING
SEQUENCES
FURTHER
EVALUATION
OF
PROTEIN
HYDROPATHY
WEAKENS
THE
ARGUMENTS
USED
EARLIER
ENGELMAN
ET
AL
TO
CORRELATE
THE
SEQUENCE
OF
BACTERIORHODOPSIN
WITH
THE
ELECTRON
DENSITY
PROFILE
IN
THE
FIRST
PLACE
THE
TOTAL
SCATTERING
POWER
OF
THE
A
SEQUENCE
IN
TABLE
IS
NOT
LESS
THAN
THOSE
OF
THE
OTHERS
AND
THIS
WOULD
MAKE
ITS
CORRELATION
WITH
A
LOW
INTENSITY
SHAFT
UNNECESSARY
MORE
TO
THE
POINT
OF
THE
PRESENT
DISCUSSION
THE
MODEL
PREFERRED
IN
THE
EARLIER
STUDY
ENGELMAN
ET
AL
PLACES
SEQUENCE
B
ONE
OF
THE
MOST
HYDROPHOBIC
TABLE
AT
A
LOCATION
WHERE
IT
IS
COMPLETELY
SURROUNDED
BY
PROTEIN
AND
SEQUENCE
F
CLEARLY
THE
MOST
HYDROPHILIC
TABLE
AT
A
LOCATION
WELL
EXPOSED
TO
THE
ALKANE
OF
THE
BILAYER
THESE
CONSIDERATIONS
DEMONSTRATE
THAT
AN
EXAMINATION
OF
THE
HYDROPATHY
OF
A
GIVEN
SEQUENCE
MAY
PROVIDE
ADDITIONAL
INFORMATION
TO
THE
CRYSTALLOGRAPHER
IN
SITUATIONS
WHERE
STRUCTURAL
DECISIONS
ARE
AMBIGUOUS
AN
ASSIGNMENT
THAT
IS
DIFFERENT
FROM
THE
PREVIOUS
ONE
AND
THAT
SATISFIES
THE
DEMANDS
OF
HYDROPATHY
MORE
SUCCESSFULLY
WOULD
BE
TO
PLACE
SEQUENCE
A
INTO
SHAFT
B
INTO
SHAFT
C
INTO
SHAFT
D
INTO
SHAFT
E
INTO
SHAFT
F
INTO
SHAFT
AND
G
INTO
SHAFT
IN
THE
ENUMERATION
OF
ENGELMAN
ET
AL
THIS
ASSIGNMENT
POSITIONS
THE
MOST
HYDROPHILIC
SEQUENCE
F
IN
THE
LOCATION
MOST
SHIELDED
FROM
THE
ALKANE
AND
THE
MOST
HYDROPHOBIC
G
IN
THE
LOCATION
MOST
EXPOSED
TO
THE
ALKANE
JUXTAPOSES
SEQUENCES
F
G
C
AND
B
FORMING
THE
PROTON
RELAY
SYSTEM
AS
WELL
AS
PERMITTING
THE
STRONG
HYDROGEN
BONDS
MENTIONED
EARLIER
AND
PLACES
THE
RETINAL
THAT
IS
ATTACHED
TO
LYSINE
BAYLEY
ET
AL
IN
THE
VERY
CENTER
OF
THE
CARBOXYLATE
RELAY
SYSTEM
AS
WELL
AS
AT
THE
LOCATION
THAT
IT
OCCUPIES
WITHIN
THE
PROJECTED
NEUTRON
DENSITY
PROFILE
KING
ET
AL
FURTHERMORE
NO
CROSSOVERS
OF
THE
SEQUENCE
ARE
REQUIRED
AND
THE
ONLY
LONG
CONNECTION
COINCIDES
FORTUITOUSLY
WITH
THE
LONGEST
STRETCH
OF
POLAR
SEQUENCE
RESIDUES
TO
THIS
ELABORATION
AS
WELL
AS
OTHERS
PRESENTED
EARLIER
IS
AN
EXAMPLE
OF
THE
INFORMATION
THAT
MIGHT
BE
GAINED
FROM
AN
INFORMED
CONSIDERATION
OF
A
HYDROPATHY
PROFILE
VMD
IS
A
MOLECULAR
GRAPHICS
PROGRAM
DESIGNED
FOR
THE
DISPLAY
AND
ANALYSIS
OF
MOLECULAR
ASSEMBLIES
IN
PARTICULAR
BIOPOLYMERS
SUCH
AS
PROTEINS
AND
NUCLEIC
ACIDS
VMD
CAN
SIMULTANEOUSLY
DISPLAY
ANY
NUMBER
OF
STRUCTURES
USING
A
WIDE
VARIETY
OF
RENDERING
STYLES
AND
COLORING
METHODS
MOLECULES
ARE
DISPLAYED
AS
ONE
OR
MORE
REPRESENTATIONS
IN
WHICH
EACH
REPRESENTATION
EMBODIES
A
PARTICULAR
RENDERING
METHOD
AND
COLORING
SCHEME
JOR
A
SELECTED
SUBSET
OF
ATOMS
THE
ATOMS
DISPLAYED
IN
EACH
REPRESENTATION
ARE
CHOSEN
USING
AN
EXTENSIVE
ATOM
SELECTION
SYNTAX
WHICH
INCLUDES
BOOLEAN
OPERATORS
AND
REGULAR
EXPRESSIONS
VMD
PROVIDES
A
COMPLETE
GRAPHICAL
USER
INTERFACE
FOR
PROGRAM
CONTROL
AS
WELL
AS
A
TEXT
INTERFACE
USING
THE
TCL
EMBEDDABLE
PARSER
TO
ALLOW
FOR
COMPLEX
SCRIPTS
WITH
VARIABLE
SUBSTITUTION
CONTROL
LOOPS
AND
FUNCTION
CALLS
FULL
SESSION
LOGGING
IS
SUPPORTED
WHICH
PRODUCES
A
VMD
COMMAND
SCRIPT
FOR
LATER
PLAYBACK
HIGH
RESOLUTION
RASTER
IMAGES
OF
DISPLAYED
MOLECULES
MAY
BE
PRODUCED
BY
GENERATING
INPUT
SCRIPTS
FOR
USE
BY
A
NUMBER
OF
PHOTOREALISTIC
IMAGE
RENDERING
APPLICATIONS
VMD
HAS
ALSO
BEEN
EXPRESSLY
DESIGNED
WITH
THE
ABILITY
TO
ANIMATE
MOLECULAR
DYNAMICS
MD
SIMULATION
TRAJECTORIES
IMPORTED
EITHER
FROM
FILES
OR
FROM
A
DIRECT
CONNECTION
TO
A
RUNNING
MD
SIMULATION
VMD
IS
THE
VISUALIZATION
COMPONENT
OF
MDSCOPE
A
SET
OF
TOOLS
FOR
INTERACTIVE
PROBLEM
SOLVING
IN
STRUCTURAL
BIOLOGY
WHICH
ALSO
INCLUDES
THE
PARALLEL
MD
PROGRAM
NAMD
AND
THE
MDCOMM
SOFTWARE
USED
TO
CONNECT
THE
VISUALIZATION
AND
SIMULATION
PROGRAMS
VMD
IS
WRITTEN
IN
C
USING
AN
OBJECT
ORIENTED
DESIGN
THE
PROGRAM
INCLUDING
SOURCE
CODE
AND
EXTENSIVE
DOCUMENTATION
IS
FREELY
AVAILABLE
VIA
ANONYMOUS
FTP
AND
THROUGH
THE
WORLD
WIDE
WEB
KEYWORDS
MOLECULAR
MODELING
MOLECULAR
DYNAMICS
VISUALIZATION
INTERACTIVE
VISUALIZATION
INTRODUCTION
THE
BURGEONING
NUMBER
OF
EXPERIMENTALLY
RESOLVED
BIOMOLECULAR
STRUCTURES
HAS
RESULTED
IN
AN
INCREASING
NEED
FOR
COLOR
PLATES
FOR
THIS
ARTICLE
ARE
ON
PAGE
AND
ADDRESS
REPRINT
REQUESTS
TO
DR
SCHULTEN
AT
THE
THEORETICAL
BIOPHYSICS
GROUP
UNIVERSITY
OF
ILLINOIS
AND
BECKMAN
INSTITUTE
NORTH
MATTHEWS
URBANA
ILLINOIS
E
MAIL
KSCHULTE
KS
UIUC
EDU
RECEIVED
OCTOBER
REVISED
DECEMBER
ACCEPTED
JANUARY
COMPUTATIONAL
TOOLS
FOR
MOLECULAR
VISUALIZATION
AND
ANALYSIS
SEVERAL
EXCELLENT
PACKAGES
EXIST
FOR
THE
GRAPHICAL
DISPLAY
OF
STATIC
MOLECULAR
STRUCTURES
SUCH
AS
RIBBONS
XMOL
MIDAS
SETOR
GRASP
AND
OTHERS
MOLECULAR
DYNAMICS
MD
STUDIES
OF
THE
FUNCTION
OF
THE
STRUCTURALLY
KNOWN
BIOPOLYMERS
ARE
BEING
WIDELY
APPLIED
THE
RESULTS
OF
SUCH
STUDIES
HOWEVER
ARE
TYPICALLY
LARGE
MOLECULAR
TRAJECTORY
FILES
WHICH
REPRESENT
SUBSTANTIAL
AMOUNTS
OF
DYNAMICAL
DATA
THAT
REQUIRE
SUITABLE
VISUALIZATION
TOOLS
E
G
TO
INITIATE
MOLECULAR
DYNAMICS
SIMULATIONS
AND
TO
DISPLAY
SEQUENCES
OF
STRUCTURES
THE
INCREASED
SPEED
AND
PARALLELIZATION
OF
COMPUTERS
MAKE
IT
POSSIBLE
TODAY
TO
CARRY
OUT
MOLECULAR
DYNAMICS
STUDIES
INTERACTIVELY
IN
ORDER
TO
PROBE
KEY
PROPERTIES
OF
BIOPOLYMERS
SUCH
AS
POTENTIAL
ENERGY
BARRIERS
ALONG
CHOSEN
REACTION
PATHWAYS
THIS
APPROACH
REQUIRES
A
NEW
MOLECULAR
GRAPHICS
USER
INTERFACE
THE
PROGRAM
VMD
HAS
BEEN
DEVELOPED
FOR
INTERACTIVE
GRAPHICAL
DISPLAY
OF
MOLECULAR
SYSTEMS
IN
PARTICULAR
BIOPOLYMERS
SUCH
AS
PROTEINS
OR
NUCLEIC
ACIDS
THE
MOTIVATION
FOR
THE
DEVELOPMENT
OF
VMD
HAS
BEEN
TO
PROVIDE
A
WELLDOCUMENTED
AND
FREELY
AVAILABLE
PROGRAM
THAT
IS
EASY
TO
USE
AND
MODIFY
AND
WHICH
ADDRESSES
SEVERAL
CHALLENGES
IN
MOLECULAR
GRAPHICS
INCLUDING
THE
FOLLOWING
SUPPORT
FOR
THE
DISPLAY
OF
DYNAMIC
DATA
SUCH
AS
MOLECULAR
TRAJECTORIES
GENERATED
BY
MOLECULAR
DYNAMICS
CALCULATIONS
DIRECT
INTERACTION
WITH
A
SEPARATE
MOLECULAR
DYNAMICS
APPLICATION
IN
ORDER
TO
PROVIDE
A
GRAPHICAL
USER
INTERFACE
AND
VISUALIZATION
CONSOLE
FOR
THE
SIMULATION
PROGRAM
THE
CAPABILITY
TO
WORK
WITH
THREE
DIMENSIONAL
IMMERSIVE
DISPLAY
DEVICES
SUCH
AS
A
LARGE
SCREEN
STEREO
PROJECTION
FACILITY
TEXT
BASED
AS
WELL
AS
MOUSE
BASED
USER
INTERFACE
CONTROLS
INCLUDING
USER
CUSTOMIZABLE
MENUS
AND
PROGRAM
EXTENSIONS
USING
AN
INTERPRETED
SCRIPTING
LANGUAGE
DISPLAY
OF
MOLECULES
IN
A
WIDE
RANGE
OF
RENDERING
STYLES
EASILY
SELECTED
BY
THE
USER
PRODUCTION
OF
HIGH
QUALITY
HARDCOPY
IMAGES
OF
CURRENTLY
DISPLAYED
MOLECULAR
SYSTEMS
WE
DESCRIBE
IN
THIS
ARTICLE
THE
FEATURES
AND
STRUCTURE
OF
THE
PROGRAM
VMD
FIRST
MENTIONING
THE
CURRENT
IMPLEMENTATION
OF
THE
PROGRAM
AND
THEN
DISCUSSING
THE
MAJOR
PROGRAM
CAPABILITIES
AND
FUNCTIONALITY
WE
ALSO
DESCRIBE
THE
USE
OF
VMD
COUPLED
WITH
A
LARGE
SCREEN
STEREO
PROJECTION
SYSTEM
AS
A
COLLABORATIVE
TOOL
FOR
SEVERAL
RESEARCHERS
TO
EMPLOY
FOR
ANALYSIS
AND
DISCUSSION
OF
MOLECULAR
ASSEMBLIES
JOURNAL
OF
MOLECULAR
GRAPHICS
BY
ELSEVIER
SCIENCE
INC
AVENUE
OF
THE
AMERICAS
NEW
YORK
NY
PII
FINALLY
WE
DISCUSS
THE
USE
OF
VMD
FOR
INTERACTIVE
MOLECULAR
DYNAMICS
MODELING
AND
LIST
THE
CURRENT
AVAILABILITY
OF
DOCUMENTATION
AND
SOURCE
CODE
IMPLEMENTATION
VMD
IS
WRITTEN
IN
C
USING
AN
OBJECT
ORIENTED
DESIGN
THAT
ASSISTS
MAINTENANCE
OF
THE
PROGRAM
AND
THE
ADDITION
OF
NEW
FEATURES
THE
DISTRIBUTION
OF
VMD
INCLUDES
DOCUMENTATION
DESCRIBING
HOW
TO
COMPILE
INSTALL
USE
AND
MODIFY
THE
PROGRAM
FOR
DIFFERENT
HARDWARE
AND
SOFTWARE
CONFIGURATIONS
VMD
REQUIRES
EITHER
THE
SILICON
GRAPHICS
GL
LIBRARY
OR
THE
OPENGL
LIBRARY
FOR
THREE
DIMENSIONAL
GRAPHICS
RENDERING
A
SAMPLE
VMD
SESSION
IS
SHOWN
IN
COLOR
PLATE
WHICH
ILLUSTRATES
THE
THREE
COMPONENTS
OF
THE
USER
INTERFACE
THE
GRAPHICS
DISPLAY
WINDOW
THE
GRAPHICAL
USER
INTERFACE
WINDOWS
AND
THE
VMD
CONSOLE
ON
THE
RIGHT
IN
COLOR
PLATE
I
IS
THE
GRAPHICS
DISPLAY
WINDOW
IN
WHICH
MOLECULES
ARE
RENDERED
AND
INTERACTIVELY
ROTATED
TRANSLATED
AND
SCALED
VIA
MOUSE
CONTROLS
A
USER
CUSTOMIZABLE
POP
UP
MENU
IS
AVAILABLE
IN
THIS
WINDOW
THE
IMAGE
SHOWN
IN
THE
GRAPHICS
DISPLAY
WINDOW
IS
REFERRED
TO
AM
THE
CURRENT
SCENE
VMD
CONTAINS
OPTIONS
FOR
RENDERING
THE
SCENE
TO
A
HIGH
QUALITY
RASTER
IMAGE
FILE
AM
DESCRIBED
BELOW
VMD
USES
XFORMS
V
FOR
THE
GRAPHICAL
USER
INTERFACE
WHICH
USES
A
COLLECTION
OF
FIWMS
TO
REPRESENT
THE
GRAPHICAL
CONTROLS
AVAILABLE
TO
THE
USER
EXAMPLES
OF
SOME
OF
THE
FORMS
AVAILABLE
IN
VMD
ARE
SHOWN
ON
THE
LEFT
IN
COLOR
PLATE
I
THE
GRAPHICAL
USER
INTERFACE
GUI
IN
VMD
INCLUDES
A
TOOLBAR
THAT
PROVIDES
ACCESS
TO
THE
SPECIFIC
TORMS
FOR
TASKS
SUCH
AM
CHANGING
THE
CURRENT
MOLECULAR
DISPLAY
CHARACTERISTICS
OR
ANIMATING
SELECTED
MOLECULES
USING
MOLECULAR
DYNAMICS
TRAJECTORIES
BELOW
THE
GRAPHICS
DISPLAY
WINDOW
IN
COLOR
PLATE
I
IS
THE
VMD
TEXT
CONSOLE
WHICH
DISPLAYS
INFORMATIVE
MESSAGES
AND
PROVIDES
A
COMMAND
PROMPT
FBR
KEYBOARD
CONTROL
OF
THE
PROGRAM
ALL
ACTIONS
IN
VMD
ARE
AVAILABLE
VIA
TEXT
COMMANDS
FULL
SESSION
LOGGING
AND
PLAYBACK
ARE
POSSIBLE
USERS
CAN
WRILE
SCRIPTS
THAT
MAY
BE
RUN
AT
ANY
TIME
AND
THAT
CAN
BE
EXECUTED
FOR
EXAMPLE
BY
ENTERING
A
SHORT
TEXT
COMMAND
OR
THROUGH
A
USER
CUSTOMIZED
POP
UP
MENU
SELECTION
VMD
EMPLOYS
TEL
AN
EMBEDDABLE
INTERPRETED
SCRIPT
LANOUAGE
PARSER
TO
PROCESS
TEXT
COMMANDS
TCL
PROVIDES
A
FULL
MET
OF
SCRIPTING
CAPABILITIES
FOR
THE
PROGRAM
AND
MAKES
POSSIBLE
COMPLEX
FEATURES
SUCH
AS
VARIABLE
SUBSTITUTION
CONDITIONAL
EXPRESSIONS
CONTROL
LOOPS
AND
SUBROUTINES
A
USER
CUSTOMIZABLE
CONFIGURATION
FILE
IS
READ
WHEN
VMD
STARTS
UP
WHICH
MAY
BE
USED
TO
DEFINE
A
PERSONALIZED
VMD
WORKING
ENVIRONMENT
AND
TO
DEFINE
NEW
COMMANDS
AND
PROGRAM
EXTENSIONS
AS
WELL
AS
TO
CREATE
CUSTOMIZED
POP
UP
MENTL
CONTROLS
CAPABILITIES
NEW
MOLECULES
ARE
READ
INTO
VMD
FROM
A
SET
OF
MOLECULAR
STRUCTURE
COORDINATE
FILES
OR
MAY
BE
READ
FROM
A
MINGLE
COORDINATE
FILE
THE
MOLECULAR
STRUCTURE
FILE
CONTAINS
STATIC
INFORMATION
ABOUT
THE
SYSTEM
SUCH
AS
BOND
CONNECTIVITY
AND
ATOMIC
MASS
AND
CHARGE
VALUES
THE
MOLECULAR
COORDINATE
FILE
CONTAINS
THE
POSITIONS
OF
ALL
THE
ATOMS
THAT
MAKE
UP
THE
MOLECULE
WHEN
A
STRUCTURE
FILE
IS
NOT
PROVIDED
THE
BOND
CONNECTIVITY
FOR
EACH
ATOM
IS
DETERMINED
BY
VMD
THROUGH
A
NEAREST
NEIGHBOR
DISTANCE
SEARCH
VMD
UNDERSTANDS
THE
CHARMM
COMPATIBLE
PSF
PROTEIN
STRUCLNRE
FILE
FL
RMAT
AND
THE
BROOKHAVEN
PDB
T
COORDINATE
FILE
FORMAT
IN
ADDITION
TO
MOLECULAR
FILE
LKWMATS
VMD
CAN
READ
AND
DISPLAY
IMAGES
IN
RASTER
INPUT
FILE
FORMAT
OWING
TO
THE
LARGE
NUMBER
OF
MOLECULAR
DATA
FILE
FORMATS
CURRENTLY
IN
USE
VMD
IMPLEMENTS
AN
IMERFACE
TO
THE
PROGRAM
BABEL
TO
READ
DATA
FROM
FORMATS
OTHER
THAN
PDB
OR
PSF
IF
BABEL
IS
INSTALLED
IT
IS
USED
TO
CONVERT
FILES
FROM
ALTERNATE
LORMATS
INTO
PDB
FORMAT
BEFORE
BEING
READ
BY
VMD
THIS
ALSO
INCLUDES
MULTIPLE
COORDINATE
SET
DATA
FILES
SUCH
AS
THOSE
IN
XYZ
FORNML
A
KEY
FEATURE
IN
VMD
IS
THE
ABILIL
TO
WORK
WITH
MOLECULAR
DYNAMICS
SIMULATION
PROGRAMS
AND
TO
DISPLAY
THE
SIMULATED
MOLECULE
AM
ITS
MOTION
IS
COMPUTED
AS
DISCUSSED
BELOW
THUS
NEW
STRUCTURES
MAY
BE
LOADED
INTO
VMD
THROUGH
CONNECTION
TO
A
RUNNING
SIMULATION
INSTEAD
OF
BEING
READ
FROM
A
FILE
ONCE
LOADED
HOWEVER
A
STRUCTURE
OBTAINED
FROM
A
NETWORK
CONNECTION
IS
TREATED
IN
THE
SAME
MANNER
AS
IF
READ
FROM
DISK
ANIMATING
MOLECULAR
STRUCTURES
FOR
EACH
MOLECULE
DISPLAYED
BY
VMD
THERE
IS
AN
ASSOCIATED
ANIMATION
LI
T
WHICH
IS
A
COLLECTION
OF
ATOMIC
COORDINATE
SETS
FOR
THE
MOLECULE
CONTROLS
ARE
AWFILABLE
TO
PLAY
BACK
THE
TRAJECTORY
WITH
OPTIONS
TO
CONTROL
THE
ANIMATION
SPEED
FL
AME
INCREMENT
AND
ANIMATION
DIRECTION
NEW
TRAJECTORY
COORDINATE
SETS
MAY
BE
READ
FL
OM
PDB
FILES
OR
FROM
DCD
FILES
BINARY
COMPATIBLE
WITH
THE
MOLECULAR
DYNAMICS
REFINEMENT
PROGRAMS
CHARMM
AND
X
PLOR
IO
THESE
COORDINATE
SETS
MAY
BE
LOADED
WHEN
THE
RNOLECULE
IS
INITIALLY
READ
INTO
VMD
OR
MAY
BE
LOADED
LATER
A
MOLECUH
R
TRAJECTOQR
EDITOR
IS
ALSO
AVAILABLE
WITH
OPTIONS
TO
DELETE
SPECIFIC
FL
AMES
OR
MET
OF
FRAMES
FROM
LHE
ANIMATION
LIST
AND
TO
WRITE
COORDINATE
SETS
TO
FILES
DISPLAYING
MOLECULAR
STRUCTURES
ANY
NUMBER
OF
MOLECULES
MAY
BE
DISPLAYED
AND
MANIPULATED
IN
THE
GRAPHICS
DISPLAY
WINDOW
AS
SHOWN
IN
COLOR
PLATE
I
EACH
STRUCTURE
IS
DRAWN
AS
SEVERAL
RELNWSENLATIONS
OR
VIEWS
OF
THE
MOLECULE
MULTIPLE
VIEWS
OF
A
MOLECULE
MAY
BE
SHOWN
SIMULTANEOUSLY
TO
CREATE
A
COMPLEX
IMAGE
OF
THE
SYSTEM
A
VIEW
IS
JUST
ONE
PARTICULAR
METHOD
OF
DRAWING
THE
MOLECULE
AND
CONSISTS
OF
THREE
CHARACTERISTICS
AN
ATOM
SUBSET
SELECTION
WHICH
DETERMINES
WHICH
ATOMS
ARE
TO
BE
INCLUDED
IN
THE
VIEW
A
REMLERING
STYLE
WHICH
DETERMINES
THE
PRIMITIVES
USED
TO
DRAW
THE
ATOMS
BONDS
AND
OTHER
MOLECULE
COMPONENTS
TABLE
I
I
LISTS
MANY
OF
THE
RENDERING
STYLES
AVAILABLE
IN
VMD
A
COLORINV
LNETHOD
WHICH
DETERMINES
WHAT
COLOR
TO
USE
FOR
THE
COMPONENTS
OF
THE
VIEW
NUMEROUS
COLORING
METHODS
ARE
AVAILABLE
SOME
OF
WHICH
ARE
LISTED
IN
TABLE
VIEWS
ARE
CREATED
OR
MODIFIED
XIA
TEXT
COMMANDS
OR
MORE
EASILY
BY
USING
THE
GRAPHICAL
INTERFACE
CONTROLS
COLOR
PLATE
SHOWS
A
DETAILED
REPRESENTATION
OF
A
PROTEIN
DIMER
J
MOL
GRAPHICS
VOL
FEBRUARY
TABLE
SELECTED
MOLECULE
RENDERING
STYLES
AVAILABLE
IN
OR
OFF
AND
MAY
BE
INTERACTIVELY
MOVED
TO
NEW
POSITIONS
VMD
WITH
THE
MOUSE
STYLE
DESCRIPTION
LINES
BONDS
VDW
CPK
DOTTED
LICORICE
TUBE
RIBBON
SURF
CAAOON
SIMPLE
LINES
FOR
BONDS
POINTS
FOR
ATOMS
LIGHTED
CYLINDERS
FOR
BONDS
NO
ATOMS
SOLID
LIGHTED
VAN
DER
WAALS
SPHERES
FOR
ATOMS
NO
BONDS
SCALED
VAN
DER
WAALS
SPHERES
FOR
ATOMS
CYLINDERS
FOR
BONDS
DOTTED
VAN
DER
WAALS
SPHERES
FOR
ATOMS
NO
BONDS
SOLID
SPHERES
AND
CYLINDERS
WITH
EQUAL
RADII
CYLINDRICAL
TUBE
THROUGH
C
ATOMS
FLAT
RIBBON
THROUGH
C
ATOMS
SOLVENT
ACCESSIBLE
SURFACE
OF
SELECTED
ATOMS
B
SIMPLIFIED
SECONDARY
STRUCTURE
REPRESENTATIONS
FOR
NUCLEIC
ACIDS
THE
P
ATOMS
ARE
USED
BUSING
THE
SURF
ALGORITHM
DEVELOPED
AT
THE
UNIVERSITY
OF
NORTH
CAROLINA
COMPLEXED
WITH
A
SEGMENT
OF
DNA
MOLECULES
MAY
BE
DISPLAYED
USING
EITHER
AN
ORTHOGRAPHIC
OR
A
PERSPECTIVE
PROJECTION
THE
ATOM
SELECTION
CAPABILITIES
OF
VMD
ARE
QUITE
EXTENSIVE
AND
INCLUDE
A
FLEXIBLE
SYNTAX
FOR
COMPLEX
SELECTION
EXPRESSIONS
EACH
ATOM
IN
A
MOLECULE
HAS
SEVERAL
CHARACTERISTICS
KEYWORDS
ARE
USED
TO
SELECT
THE
ATOMS
THAT
HAVE
VALUES
MATCHING
A
SPECIFIED
CRITERION
FOR
EXAMPLE
EACH
ATOM
HAS
A
SET
OF
CHARACTER
STRING
NAMES
AN
X
Y
Z
POSITION
AND
OTHER
NUMERIC
VALUES
SUCH
AS
CHARGE
AND
MASS
EACH
ATOM
ALSO
HAS
BOOLEAN
CHARACTERISTICS
IDENTIFYING
IT
FOR
EXAMPLE
AS
A
MEMBER
OF
AN
AMINO
ACID
OR
NUCLEIC
ACID
OR
AS
PART
OF
THE
PROTEIN
BACKBONE
BOOLEAN
OPERATIONS
MAY
BE
USED
TO
SELECT
ATOMS
BASED
ON
MULTIPLE
CHARACTERISTICS
AND
PARENTHESES
MAY
BE
USED
TO
SELECT
THE
ORDER
OF
EVALUATION
FOR
EXAMPLE
THE
SELECTION
RESNAME
ASP
OR
RESNAME
GLY
AND
MASS
II
SELECTS
ALL
ATOMS
THAT
ARE
IN
ASPARTIC
ACID
OR
GLYCINE
RESIDUES
AND
THAT
HAVE
A
MASS
GREATER
THAN
SIMILARLY
THE
SELECTION
BACKBONE
AND
WITHIN
OF
RESID
SELECTS
ALL
BACKBONE
ATOMS
THAT
ARE
WITHIN
UNITS
E
G
WITHIN
OF
RESIDUE
REGULAR
EXPRESSIONS
MAY
BE
USED
IN
STRINGS
TO
SPECIFY
QUICKLY
MANY
DIFFERENT
NAMES
IN
A
SELECTION
WHEN
A
SELECTION
CHANGES
DURING
A
TRAJECTORY
SUCH
AS
THE
ATOMS
WITHIN
SOME
RADIUS
OF
ANOTHER
SET
OF
ATOMS
THE
USER
CAN
REQUEST
AN
UPDATE
OF
THE
SELECTION
EACH
TIME
A
NEW
ANIMATION
TIME
STEP
IS
DISPLAYED
WHEN
DISPLAYING
SOLID
OBJECTS
VMD
CAN
MAKE
USE
OF
AVAILABLE
HARDWARE
ACCELERATED
LIGHTING
CAPABILITIES
A
CAPABILITY
EXPLOITED
IN
OTHER
MOLECULAR
VISUALIZATION
PACKAGES
SUCH
AS
SETOR
UP
TO
FOUR
INDEPENDENT
INFINITELY
DISTANT
LIGHT
SOURCES
MAY
BE
POSITIONED
IN
THE
SCENE
AND
USED
TO
ILLUMINATE
THE
DISPLAYED
OBJECTS
EACH
LIGHT
CAN
BE
TURNED
ON
RASTER
IMAGE
GENERATION
AN
INTERFACE
TO
A
NUMBER
OF
IMAGE
RENDERING
PACKAGES
IS
PROVIDED
IN
VMD
AND
CAN
BE
USED
TO
CREATE
INPUT
SCRIPTS
FOR
USE
BY
THESE
PROGRAMS
THE
GENERATED
INPUT
SCRIPTS
MAY
THEN
BE
READ
BY
THE
SELECTED
PACKAGE
TO
CREATE
A
RASTER
OUTPUT
IMAGE
OF
THE
GRAPHICS
SCENE
DISPLAYED
BY
VMD
SUITABLE
FOR
PUBLICATION
OR
SLIDES
TABLE
LISTS
THE
CURRENTLY
SUPPORTED
IMAGE
RENDERING
PACKAGES
THE
CAPABILITY
TO
CREATE
INPUT
SCRIPTS
FOR
IMAGE
RENDERING
PROGRAMS
MAY
BE
COMBINED
WITH
THE
TCL
SCRIPTING
LANGUAGE
AVAILABLE
IN
VMD
TO
EASILY
CREATE
HIGH
QUALITY
MOVIES
OF
A
MOLECULE
AS
AN
EXAMPLE
THE
FOLLOWING
SCRIPT
MAY
BE
USED
TO
CREATE
A
SERIES
OF
IMAGES
SHOWING
A
PREVIOUSLY
LOADED
MOLECULE
ROTATING
ABOUT
THE
Y
AXIS
BY
CREATING
INPUT
SCRIPTS
FOR
THE
PROGRAM
THAT
ARE
PROCESSED
IMMEDIATELY
AFTER
THEY
ARE
CREATED
TCL
SCRIPT
TO
CREATE
A
MOVIE
OF
A
ROTATING
MOLECULE
FOR
SET
I
I
SET
I
EXPR
I
L
CREATE
AND
PROCESS
A
SCRIPT
SET
SCRIPTFILE
ROTATE
I
SET
IMAGEFILE
ROTATE
I
RGB
RENDER
SSCRIPTFILE
CATCH
EXEC
RENDER
SSCRIPTFILE
SGI
IMAGEFILE
ROTATE
THE
CURRENT
IMAGE
BY
DEGREES
ABOUT
THE
Y
AXIS
ROT
Y
BY
AFTER
LOADING
A
MOLECULE
THIS
SCRIPT
WOULD
BE
INVOKED
SIMPLY
BY
TYPING
ASSUMING
IT
WAS
IN
A
FILE
CALLED
MOVIE
TCL
TABLE
SELECTED
MOLECULE
COLORING
STYLES
AVAILABLE
IN
VMD
STYLE
DESCRIPTION
NAME
COLOR
DETERMINED
BY
ATOM
NAME
RESNAME
COLOR
DETERMINED
BY
RESIDUE
NAME
SEGNAME
EACH
SEGMENT
SHOWN
IN
A
DIFFERENT
COLOR
MOLECULE
EACH
MOLECULE
SHOWN
IN
A
DIFFERENT
COLOR
CHAIN
COLOR
DETERMINED
BY
ONE
CHARACTER
CHAIN
IDENTIFIER
BETA
COLOR
SCALE
BASED
ON
THE
BETA
VALUES
OF
THE
PDB
FILE
OCCUPANCY
COLOR
SCALE
BASED
ON
THE
OCCUPANCY
VALUES
OF
THE
PDB
FILE
MASS
COLOR
SCALE
BASED
ON
THE
ATOMIC
MASS
OF
EACH
ATOM
CHARGE
COLOR
SCALE
BASED
ON
THE
ATOMIC
CHARGE
OF
EACH
ATOM
POS
COLOR
SCALE
BASED
ON
THE
DISTANCE
OF
EACH
ATOM
FROM
THE
CENTER
J
MOL
GRAPHICS
VOL
FEBRUARY
TABLE
AVAILABLE
RENDERING
PROGRAM
OUTPUT
FORMATS
NAME
DESCRIPTION
POV
RAYSHADE
RADIANCE
ART
FAST
RASTER
FILE
GENERATOR
PERSISTENCE
OF
VISION
RAY
TRACING
PACKAGE
RAYSHADE
RAY
TRACING
PACKAGE
RADIANCE
LIGHTING
SIMULATION
AND
RENDERING
SYSTEM
VORT
RAY
TRACER
PLAY
MOVIE
TCL
MORE
COMPLEX
TRANSFORMATIONS
ARE
PERFORMED
IN
A
SIMILAR
MANNER
STEREO
DISPLAY
THE
SCENE
DISPLAYED
IN
THE
GRAPHICS
WINDOW
MAY
BE
RENDERED
IN
STEREO
TO
ENHANCE
THE
APPEARANCE
AND
INFORMATION
CONTENT
OF
THE
DISPLAYED
SYSTEMS
THE
STEREO
VIEWING
PARAMETERS
WHICH
INCLUDE
THE
EYE
SEPARATION
DISTANCE
AND
THE
FOCAL
LENGTH
CAN
BE
INTERACTIVELY
CONTROLLED
BY
THE
USER
TWO
STEREO
DISPLAY
FORMATS
ARE
AVAILABLE
IN
VMD
A
SIDE
BY
SIDE
STEREO
DISPLAY
WHICH
SPLITS
THE
DISPLAY
WINDOW
INTO
TWO
HALVES
A
LEFT
EYE
VIEW
AND
A
RIGHT
EYE
VIEW
THIS
FORMAT
MAY
BE
USED
WITH
ALL
GRAPHICS
DISPLAY
HARDWARE
AND
IS
SUITABLE
FOR
PREPARING
IMAGES
FOR
PUBLICATION
A
CRYSTAL
EYES
STEREO
DISPLAY
WHICH
UTILIZES
SPECIAL
HARDWARE
AVAILABLE
ON
MANY
GRAPHICS
WORKSTATIONS
TO
DISPLAY
STEREO
IMAGES
TO
BE
VIEWED
WITH
LIQUID
CRYSTALSHUTTERED
GLASSES
THE
STEREO
VIEWING
MODES
MAY
BE
USED
WITH
STANDARD
DISPLAY
MONITORS
OR
WITH
EXTERNAL
STEREO
DISPLAY
EQUIPMENT
AS
AN
EXAMPLE
VMD
IS
CURRENTLY
BEING
USED
WITH
A
THREEDIMENSIONAL
PROJECTION
SYSTEM
FOR
THE
DISPLAY
AND
ANALYSIS
OF
MOLECULES
VIEWED
SIMULTANEOUSLY
BY
SEVERAL
USERS
THIS
SYSTEM
CONSISTS
OF
A
CEILING
MOUNTED
PROJECTOR
ECHOING
ONTO
A
LARGE
BY
FOOT
SCREEN
THE
STEREO
IMAGES
DISPLAYED
ON
A
GRAPHICS
WORKSTATION
MONITOR
THE
LARGE
SCREEN
DISPLAY
MAKES
IT
POSSIBLE
FOR
MANY
VIEWERS
TO
STUDY
COLLABORATIVELY
AT
A
LARGE
MAGNIFICATION
A
BIOPOLYMER
SYSTEM
THE
STEREO
DISPLAY
ENVIRONMENT
ENHANCES
THE
INFORMATION
CONTENT
OF
THE
SCENE
THROUGH
THE
ADDITION
OF
VISUAL
DEPTH
CUES
VMD
CONTAINS
SEVERAL
OPTIONS
TO
CONFIGURE
THE
GRAPHICS
DISPLAY
FOR
USE
WITH
LARGE
SCREEN
PROJECTION
SYSTEMS
E
G
TO
SET
THE
PROJECTION
SCREEN
VERTICAL
AND
HORIZONTAL
DIMENSIONS
ONE
PROBLEM
ENCOUNTERED
WHEN
SEVERAL
PEOPLE
VIEW
THE
SAME
COMPUTER
GENERATED
STEREO
IMAGE
IS
THAT
EACH
PERSON
SEES
THE
SCENE
FROM
A
DIFFERENT
PERSPECTIVE
TO
HELP
ALLEVIATE
THIS
PROBLEM
VMD
SUPPORTS
THE
USE
OF
SPATIAL
TRACKING
DEVICES
SUCH
AS
THE
POLHEMUS
FASTRAK
POLHEMUS
INC
COLCHESTER
VT
THAT
MEASURE
THE
POSITION
AND
ORIENTATION
OF
SENSORS
RELATIVE
TO
A
FIXED
POSITION
IN
ORDER
TO
PROVIDE
A
SET
OF
POINTERS
VMD
DISPLAYS
VISUAL
REPRESENTATIONS
OF
THE
POINTERS
ON
THE
SCREEN
SUCH
THAT
ALL
VIEWERS
PERCEIVE
THE
POINTERS
AT
THE
SAME
POSITIONS
RELATIVE
TO
THE
MOLECULES
NEW
FEATURES
AND
USER
INTERFACE
METHODS
ARE
CURRENTLY
BEING
ADDED
TO
VMD
FOR
USE
WITH
THIS
STEREO
PROJECTION
ENVIRONMENT
TO
PROVIDE
A
NATURAL
PROBLEM
SOLVING
ENVIRONMENT
FOR
STRUCTURAL
BIOLOGY
THE
GOAL
OF
THESE
ENHANCEMENTS
IS
TO
HELP
UNTIE
THE
USERS
FROM
THE
KEYBOARD
TO
MAKE
POSSIBLE
MANIPULATION
AND
ANALYSIS
OF
MOLECULAR
STRUCTURES
BY
SEVERAL
COLLABORATORS
AT
THE
SAME
TIME
IN
A
NATURAL
WORKING
ENVIRONMENT
THE
USER
INTERFACE
CONTROLS
OF
VMD
ARE
BEING
UPDATED
TO
MAKE
USE
OF
EACH
AVAILABLE
POINTER
AS
A
MOUSE
THAT
WOULD
BE
USED
FOR
ROTATION
AND
CONTROL
OF
THE
MOLECULES
JUST
AS
THE
NORMAL
MOUSE
IS
USED
ALSO
BEING
EXPLORED
ARE
AN
AUDIO
USER
INTERFACE
TO
ALLOW
USERS
TO
ISSUE
SPOKEN
COMMANDS
USER
INTERFACE
CONTROLS
SUCH
AS
THESE
MAY
EVENTUALLY
REPLACE
OR
AUGMENT
KEYBOARD
AND
MENU
CONTROLS
TRAJECTORY
ANALYSIS
TOOLS
VMD
INCLUDES
FUNCTIONS
FOR
ANALYZING
MOLECULAR
STRUCTURES
AND
TRAJECTORIES
THESE
FUNCTIONS
ACCESS
THE
INTERNAL
VMD
DATA
STRUCTURES
TO
RETURN
OR
MODIFY
CHARACTERISTICS
SUCH
AS
CHARGE
MASS
AND
POSITION
FOR
INDIVIDUAL
ATOMS
RESIDUES
AND
MOLECULES
MORE
COMPLEX
ANALYSIS
CAPABILITIES
SUCH
AS
COMPUTING
THE
RMS
DEVIATION
OR
CORRELATION
FUNCTIONS
OF
A
DYNAMICS
TRAJECTORY
CAN
THEN
BE
IMPLEMENTED
AS
TCL
SCRIPTS
WITHOUT
THE
NEED
TO
MODIFY
THE
VMD
SOURCE
CODE
AS
AN
EXAMPLE
THE
FOLLOWING
COMMANDS
ILLUSTRATE
THE
USE
OF
THE
VMD
ANALYSIS
LANGUAGE
TO
QUERY
AND
CHANGE
THE
CENTER
OF
MASS
OF
A
SPECIFIC
RESIDUE
THE
FIRST
STEP
IS
TO
CREATE
AN
ATOM
SELECTION
AND
BIND
IT
TO
AN
IDENTIFIER
VMD
SET
ATOMSELECT
TOP
RESID
INFORMATION
ABOUT
THE
ATOMS
IN
THIS
SELECTION
MAY
THEN
BE
RETRIEVED
USING
THE
GET
OPTION
VMD
SMY
SEL
GET
NAME
MASS
X
Y
Z
INFO
N
H
CA
CB
C
O
USING
THESE
ATOM
SELECTION
COMMANDS
AND
A
SET
OF
VECTOR
MANIPULATION
PROCEDURES
IMPLEMENTED
IN
TCL
THE
FUNCTION
TO
COMPUTE
THE
CENTER
OF
MASS
OF
A
SELECTED
SET
OF
ATOMS
IS
THEN
REALIZED
AS
FOLLOWS
TCL
PROCEDURE
TO
COMPUTE
THE
CENTER
OF
MASS
OF
A
SET
OF
ATOMS
PROC
COM
SEL
SET
ATOMS
SEL
GET
MASS
X
Y
Z
SET
TOTALMASS
SET
COM
VECZERO
FOREACH
ATOM
SATOMS
SET
MASS
LINDEX
SATOM
SET
POS
IRANGE
SATOM
SET
TOTALMASS
EXPR
STOTALMASS
SMASS
SET
COM
VECADD
COM
VECSCALE
SMASS
POS
RETURN
VECSCALE
COM
EXPR
STOTALMASS
L
L
J
MOL
GRAPHICS
VOL
FEBRUARY
THE
APPLICATION
OF
THIS
PROCEDURE
IS
STRAIGHTFORWARD
EXECUTING
THE
NEW
COMMAND
CORN
WITH
A
PREVIOUSLY
DEFINED
ATOM
SELECTION
IDENTIFIER
AS
AN
ARGUMENT
RETURNS
THE
CENTER
OF
MASS
OF
THE
ATOMS
IN
THAT
SELECTION
VMD
COM
MY
SEL
INFO
THIS
INFORMATION
COULD
THEN
BE
USED
FOR
EXAMPLE
TO
MOVE
THE
CENTER
OF
MASS
OF
THE
ATOMS
TO
SOME
OTHER
POSITION
FOR
EXAMPLE
TO
THE
ORIGIN
VMD
MOVEBY
VECINVERT
CORN
SEL
IN
ADDITION
TO
THE
CALCULATION
OF
CENTER
OF
MASS
MOTION
SEVERAL
OTHER
TCL
PROCEDURES
ARE
AVAILABLE
IN
VMD
FOR
DYNAMIC
TRAJECTORY
ANALYSIS
INCLUDING
COMPUTATION
OF
RMSD
VALUES
AUTOCORRELATION
FUNCTIONS
AND
RAMACHANDRAN
PLOT
QB
QJ
ANGLE
DATA
NEW
ANALYSIS
FUNCTIONS
CAN
BE
EASILY
DEVELOPED
AND
ADDED
TO
VMD
BY
THE
USER
INTERACTIVE
MOLECULAR
DYNAMICS
VMD
IS
DESIGNED
TO
ACT
AS
A
VISUALIZATION
CONSOLE
AND
GRAPHICAL
FRONT
END
FOR
A
MOLECULAR
DYNAMICS
APPLICATION
RUNNING
ON
A
REMOTE
SUPERCOMPUTER
OR
HIGH
PERFORMANCE
WORKSTATION
VMD
USES
A
SET
OF
DAEMONS
AND
LIBRARY
ROUTINES
KNOWN
AS
THE
MDCOMM
SOFTWARE
TO
BROKER
THE
COMMUNICATION
OF
DATA
AND
COMMANDS
BETWEEN
VMD
AND
A
REMOTE
SIMULATION
PROGRAM
THE
MDCOMM
SOFTWARE
INTERFACE
IS
INDEPENDENT
OF
THE
PARTICULAR
REMOTE
APPLICATION
THE
DAEMONS
BUFFER
DATA
TRANSFER
BETWEEN
THE
APPLICATION
AND
VMD
AND
ACT
AS
MANAGERS
FOR
THE
RUNNING
JOBS
AND
INTERPROCESS
COMMUNICATION
ONCE
A
PARTICULAR
SIMULATION
PROGRAM
HAS
BEEN
SUITABLY
MODIFIED
TO
WORK
AS
AN
MDCOMM
CLIENT
VMD
CAN
BE
USED
WITH
THAT
PROGRAM
WITHOUT
CHANGE
VMD
IS
THE
VISUALIZATION
COMPONENT
OF
A
LARGER
SET
OF
COMPUTATIONAL
TOOLS
FOR
STRUCTURAL
BIOLOGY
KNOWN
AS
MDSCOPE
RA
MDSCOPE
INCLUDES
NOT
ONLY
VMD
AND
MDCOMM
BUT
ALSO
THE
PARALLEL
MOLECULAR
DYNAMICS
PROGRAM
NAMD
NAMD
IS
A
PARALLEL
PORTABLE
MOLECULAR
DYNAMICS
PROGRAM
WRITTEN
IN
C
WHICH
IMPLEMENTS
THE
CHARMM
FORCE
FIELD
AND
CONTAINS
NUMEROUS
SIMULATION
OPTIONS
NAMD
USES
A
SPATIAL
DECOMPOSITION
ALGORITHM
TO
DISTRIBUTE
THE
COMPUTATION
TASKS
AMONG
PARALLEL
PROCESSORS
WHICH
PARTITIONS
THE
VOLUME
OF
SPACE
OCCUPIED
BY
THE
SIMULATED
MOLECULE
INTO
UNIFORM
CUBES
KNOWN
AS
PATCHES
ASSIGNED
TO
DIFFERENT
PROCESSING
NODES
WHILE
NAMD
AND
VMD
MAY
BE
USED
INDEPENDENTLY
OF
EACH
OTHER
TAKEN
TOGETHER
VMD
NAMD
AND
MDCOMM
CONSTITUTE
MDSCOPE
INFORMATION
ON
MDSCOPE
MAY
BE
OBTAINED
FROM
THE
MDSCOPE
WWW
HOME
PAGE
HTTP
WWW
KS
UIUC
EDU
RESEARCH
MDSCOPE
VMD
PROVIDES
AN
INTERFACE
TO
INITIALIZE
A
NEW
SIMULATION
AND
CAN
SERVE
ALSO
TO
MONITOR
AND
CONTROL
CERTAIN
SIMULATION
PARAMETERS
AFTER
A
SIMULATION
IS
STARTED
AND
A
CONNECTION
BETWEEN
VMD
AND
THE
APPLICATION
IS
MADE
MOLECULAR
STRUCTURES
ARE
COMMUNICATED
TO
VMD
AS
THEY
ARE
CALCULATED
THE
CONNECTION
BETWEEN
VMD
AND
A
RUNNING
SIMULATION
MAY
BE
DROPPED
AND
LATER
REESTABLISHED
E
G
TO
ALLOW
A
USER
TO
CHECK
ON
THE
PROGRESS
OF
A
RUNNING
SIMULATION
WITHOUT
HAVING
TO
STOP
AND
RESTART
THE
CALCULATION
MOLECULES
DISPLAYED
IN
THIS
MANNER
MAY
ALSO
BE
MANIPULATED
AND
RENDERED
IN
THE
SAME
FASHION
AS
MOLECULES
LOADED
FROM
DATA
FILES
AND
TRANSFERRED
MOLECULAR
STRUCTURES
MAY
BE
SAVED
IN
AN
ANIMATION
LIST
FOR
STORAGE
AND
PLAYBACK
EXAMPLE
OF
USE
COLOR
PLATE
ILLUSTRATES
AN
EXAMPLE
OF
THE
USE
OF
VMD
FOR
INTERACTIVE
MOLECULAR
DYNAMICS
THE
FIRST
STEP
IN
ESTABLISHING
A
CONNECTION
TO
A
RUNNING
SIMULATION
IS
TO
SELECT
A
HOST
COMPUTER
AND
TO
CHOOSE
BETWEEN
STARTING
A
NEW
SIMULATION
OR
RECONNECTING
TO
A
RUNNING
JOB
COLOR
PLATE
THE
INITIAL
CONNECTION
TO
THE
HOST
COMPUTER
RETURNS
THE
LISTS
OF
AVAILABLE
APPLICATIONS
AND
RUNNING
SIMULATIONS
FROM
A
DAEMON
RUNNING
ON
THE
HOST
COMPUTER
SELECTING
AN
AVAILABLE
APPLICATION
IN
ORDER
TO
START
A
NEW
SIMULATION
IN
THIS
CASE
A
SIMULATION
USING
NAMD
RESULTS
IN
VMD
REQUESTING
FROM
THE
HOST
COMPUTER
THE
LIST
OF
PARAMETERS
NECESSARY
TO
START
THE
JOB
COLOR
PLATE
ONCE
ALL
THE
PARAMETERS
ARE
ENTERED
THE
SIMULATION
PROGRAM
IS
LAUNCHED
AND
THE
STATIC
MOLECULAR
STRUCTURE
DATA
ARE
RETURNED
TO
VMD
AS
THE
MOLECULAR
TRAJECTORY
IS
COMPUTED
THE
COORDINATE
SETS
ARE
SENT
TO
VMD
FOR
DISPLAY
COLOR
PLATE
THE
AVAILABLE
GRAPHICAL
USER
INTERFACE
CONTROLS
MAY
BE
USED
TO
VIEW
OR
MODIFY
SIMULATION
PARAMETERS
OR
DISPLAY
CHARACTERISTICS
OR
TO
TERMINATE
THE
SIMULATION
COLOR
PLATE
ALSO
SHOWS
SEVERAL
ATOMS
TOGETHER
WITH
THE
APPLIED
FORCES
THE
LATTER
SPECIFIED
BY
THE
USER
WITH
THE
MOUSE
THE
HORIZONTAL
AND
VERTICAL
ARROWS
THESE
FORCES
HAVE
TRANSFORMED
THE
SMALL
POLYPEPTIDE
FROM
AN
ALPHA
HELIX
CONFORMATION
TO
THE
FORM
SHOWN
IN
COLOR
PLATE
ONCE
A
CONNECTION
TO
A
RUNNING
SIMULATION
HAS
BEEN
ESTABLISHED
VMD
PROVIDES
OPTIONS
TO
MODIFY
SIMULATION
PARAMETERS
SUCH
AS
THE
TEMPERATURE
AND
REMOTE
CONNECTION
PARAMETERS
SUCH
AS
THE
FREQUENCY
WITH
WHICH
COORDINATE
SETS
ARE
COMMUNICATED
FROM
THE
SIMULATION
PROGRAM
TO
VMD
THE
USER
CAN
ALSO
DIRECTLY
PARTICIPATE
IN
THE
SIMULATION
THROUGH
THE
ADDITION
OF
PERTURBATIVE
OR
GUIDING
FORCES
TO
SELECTED
ATOMS
OR
RESIDUES
A
FEATURE
DEVELOPED
AND
STUDIED
EARLIER
IN
THE
PROGRAM
SCULPT
FORCES
ARE
ADDED
USING
THE
MOUSE
TO
INDICATE
THE
MAGNITUDE
AND
DIRECTION
OF
THE
ADDITIONAL
INTERACTION
ON
SELECTED
ATOMS
THESE
FORCES
ARE
COMMUNICATED
TO
THE
SIMULATION
PROGRAM
AND
INCORPORATED
INTO
THE
DYNAMICS
THE
USE
OF
INTERACTIVE
GUIDING
FORCES
IN
SIMULATIONS
OF
BIOMOLECULAR
SYSTEMS
IS
CURRENTLY
BEING
APPLIED
OR
CONSIDERED
TBR
A
NUMBER
OF
PROJECTS
TWO
SYSTEMS
BEING
EXAMINED
WITH
THESE
INTERACTIVE
TOOLS
ARE
THE
PROTEIN
BACTERIORHODOPSIN
AND
THE
BINDING
OF
BIOTIN
TO
THE
PROTEIN
AVIDIN
FOR
BACTERIORHODOPSIN
BR
A
KDA
MEMBRANE
PROTEIN
USED
TO
CONVERT
LIGHT
ENERGY
INTO
A
PROTON
GRADIENT
FOR
ATP
SYNTHESIS
IN
HALOBACTERIUM
HALOBIUM
MOLECULAR
DYNAMICS
SIMULATIONS
ARE
BEING
PERFORMED
USING
INTERACTIVE
FORCES
TO
GUIDE
THE
POSITIONING
OF
WATER
MOLECULES
NEAR
KEY
RESIDUES
SUCH
WATER
MOLECULES
COULD
NOT
BE
RESOLVED
IN
THE
EXPERIMENTALLY
DETERMINED
BR
STRUCTURE
BUT
ARE
CONSIDERED
TO
PLAY
KEY
ROLES
IN
THE
PROTON
TRANSFER
MECHANISM
OF
BR
J
MOL
GRAPHICS
VOL
FEBRUARY
INTERACTIVE
FORCES
ARE
ALSO
BEING
CONSIDERED
FOR
THE
STUDY
OF
THE
INTERACTION
OF
THE
ATOM
BIOTIN
VITAMIN
WITH
THE
PROTEIN
AVIDIN
AVIDIN
IS
A
KDA
PROTEIN
FOUND
IN
TETRAMERIC
FORM
IN
ANIMAL
AND
REPTILE
EGG
WHITE
WHICH
HAS
A
STRONG
BINDING
AFFINITY
FOR
BIOTIN
TM
LNTERACTIVELY
APPLIED
FORCES
COULD
BE
USED
TO
PULL
BIOTIN
FROM
THE
BINDING
SITE
IN
AVIDIN
IN
ORDER
TO
SHED
LIGHT
ON
THE
MOLECULAR
MECHANISM
OF
HOW
AVIDIN
ACCOMMODATES
THE
BIOTIN
STRUCTURE
DOCUMENTATION
EXTENSIVE
DOCUMENTATION
ON
HOW
TO
USE
THE
VISUALIZATION
FEATURES
OF
VMD
AND
HOW
TO
MODIFY
AND
EXTEND
THE
PROGRAM
IS
AVAILABLE
THE
FOLLOWING
DOCUMENTS
IN
POSTSCRIPT
FORMAT
ARE
PROVIDED
VIA
ANONYMOUS
TIP
T
AN
INSTALLATION
GUIDE
DESCRIBING
HOW
TO
COMPILE
AND
INSTALL
VMD
A
USER
GUIDE
EXPLAINING
THE
CAPABILITIES
AND
FEATURES
OF
VMD
A
PROGRAMMER
GUIDE
LISTING
THE
STRUCTURE
AND
LAYOUT
OF
VMD
AND
INDICATING
HOW
TO
ADD
NEW
CAPABILITIES
AN
ON
LINE
FEATURE
IS
ALSO
AVAILABLE
AVAILABILITY
THE
COMPLETE
SET
OF
SOURCE
CODE
AND
DOCUMENTATION
FILES
FOR
VMD
AS
WELL
AS
A
PRECOMPILED
BINARY
FOR
SILICON
GRAPHICS
WORKSTATIONS
IS
AVAILABLE
FREE
OF
CHARGE
FOR
NONCOMMERCIAL
USE
VIA
ANONYMOUS
FTP
FROM
THE
FTP
SERVER
FTP
KS
UIUC
EDU
IN
THE
DIRECTORY
PUB
MDSCOPE
VMD
UP
TO
DATE
INFORMATION
ON
VMD
MAY
BE
OBTAINED
BY
ACCESSING
THE
VMD
WWW
HOME
PAGE
HTTP
LLWWW
KS
UIUC
EDU
RESEARCHLVMD
VMD
IS
AVAILABLE
PRIMARILY
FOR
SILICON
GRAPHICS
WORKSTATIONS
RUNNING
VERSION
OR
LATER
OF
THE
IRIX
OPERATING
SYSTEM
THE
GRAM
HAS
ALSO
BEEN
COMPILED
AND
RUN
ON
HEWLETT
PACKARD
PA
WORKSTATIONS
RUNNING
VERSION
OF
THE
HP
UX
OPERATING
SYSTEM
AND
ON
IBM
RS
WORKSTATIONS
RUNNING
AIX
MAP
INTERPRETATION
REMAINS
A
CRITICAL
STEP
IN
SOLVING
THE
STRUCTURE
OF
A
MACROMOLECULE
ERRORS
INTRODUCED
AT
THIS
EARLY
STAGE
MAY
PERSIST
THROUGHOUT
CRYSTALLOGRAPHIC
REFINEMENT
AND
RESULT
IN
AN
INCORRECT
STRUCTURE
THE
NORMALLY
QUOTED
CRYSTALLOGRAPHIC
RESIDUAL
IS
OFTEN
A
POOR
DESCRIPTION
FOR
THE
QUALITY
OF
THE
MODEL
STRATEGIES
AND
TOOLS
ARE
DESCRIBED
THAT
HELP
TO
ALLEVIATE
THIS
PROBLEM
THESE
SIMPLIFY
THE
MODEL
BUILDING
PROCESS
QUANTIFY
THE
GOODNESS
OF
FIT
OF
THE
MODEL
ON
A
PER
RESIDUE
BASIS
AND
LOCATE
POSSIBLE
ERRORS
IN
PEPTIDE
AND
SIDE
CHAIN
CONFORMATIONS
INTRODUCTION
X
RAY
CRYSTALLOGRAPHY
IS
THE
MOST
POWERFUL
TOOL
AVAILABLE
TO
PROVIDE
DETAILED
THREE
DIMENSIONAL
STRUCTURAL
INFORMATION
OF
MACROMOLECULES
AND
HAS
LED
TO
NEW
INSIGHTS
INTO
HOW
STRUCTURE
DETERMINES
PROTEIN
FUNCTION
THE
LAST
TEN
YEARS
HAVE
SEEN
A
TECHNICAL
REVOLUTION
IN
A
NUMBER
OF
VITAL
STAGES
IN
SOLVING
A
NEW
PROTEIN
STRUCTURE
THESE
INCLUDE
FOR
EXAMPLE
THE
USE
OF
MODERN
MOLECULAR
BIOLOGY
TECHNIQUES
TO
OVEREXPRESS
PROTEINS
THATARE
NORMALLY
PRESENT
IN
MINUTE
AMOUNTS
OUR
ABILITY
TO
COLLECT
MORE
ACCURATE
DIFFRACTION
DATA
HAS
IMPROVED
BY
THE
DEVELOPMENT
OF
ELECTRONIC
TWO
DIMENSIONAL
AREA
DETECTORS
AND
POWERFUL
SYNCHROTRON
BASED
X
RAY
SOURCES
EVEN
WITH
ROTATINGANODE
GENERATORS
AREA
DETECTORS
FREQUENTLY
ALLOW
THE
COLLECTION
OF
A
COMPLETE
HIGH
RESOLUTION
DATA
SET
FROM
A
SINGLE
CRYSTAL
THESE
FACTORS
DIRECTLY
AFFECT
THE
QUALITY
OF
ELECTRON
DENSITY
MAPS
PHASED
BY
THE
METHOD
OF
MULTIPLE
ISOMORPHOUS
REPLACEMENT
M
I
R
INITIAL
MODELS
ARE
NOW
ROUTINELY
IMPROVED
BY
CRYSTALLOGRAPHIC
REFINEMENT
A
NUMBER
OF
LEASTSQUARES
ALGORITHMS
HAVE
BEEN
DESCRIBED
FOR
THIS
PURPOSE
THESE
INCLUDE
THE
USE
IN
THE
REFINEMENT
OF
MODEL
RESTRAINTS
HENDRICKSON
KONNERT
CONSTRAINTS
AND
RESTRAINTS
SUSSMAN
HOLBROOK
CHURCH
KIM
EXPLICIT
MOLECULAR
MECHANICS
FORCE
FIELDS
JACK
AUTHOR
TO
WHOM
CORRESPONDENCE
SHOULD
BE
ADDRESSED
LEVITT
FAST
FOURIER
TRANSFORM
METHODS
TO
SPEED
UP
THE
CALCULATIONS
AGARWAL
AND
MORE
RECENTLY
FORCE
FIELD
BASED
MOLECULAR
DYNAMICS
ALGORITHMS
BRIINGER
KURIYAN
KARPLUS
FUJINAGA
GROS
VAN
GUNSTEREN
FORTUNATELY
THE
DECREASE
IN
THE
PRICE
PERFORMANCE
OF
COMPUTERS
HAS
ALLOWED
US
MORE
OR
LESS
TO
KEEP
UP
WITH
THE
INCREASED
COMPUTATIONAL
DEMANDS
OF
SOME
OF
THESE
ALGORITHMS
THE
INTERPRETATION
OF
MIR
MAPS
TO
PRODUCE
AN
INITIAL
MOLECULAR
MODEL
IS
A
CRITICAL
STEP
THAT
REMAINS
PROBLEMATIC
AT
THIS
STAGE
IN
THE
PROCESS
ERRORS
CAN
BE
INTRODUCED
THAT
EITHER
CANNOT
BE
REMOVED
BY
REFINEMENT
OR
REQUIRE
MANY
ALTERNATING
CYCLES
OF
REFINEMENT
AND
MANUAL
REFITTING
INCORRECT
MODELS
CAN
BE
REFINED
TO
CRYSTALLOGRAPHIC
R
FACTORS
THAT
UP
TO
A
FEW
YEARS
AGO
WOULD
HAVE
BEEN
CONSIDERED
EMINENTLY
RESPECTABLE
ESPECIALLY
FOR
LARGE
MULTI
SUBUNIT
STRUCTURES
THREE
DIMENSIONAL
COMPUTER
GRAPHICS
WORKSTATIONS
ARE
NOW
WIDELY
USED
FOR
CONSTRUCTING
MODELS
IN
MIR
MAPS
ONE
COMPUTER
PROGRAM
IN
PARTICULAR
FRODO
HAS
BEEN
WIDELY
USED
JONES
AND
IS
AVAILABLE
ON
A
RANGE
OF
WORKSTATIONS
IN
AN
ATTEMPT
TO
IMPROVE
THE
ABILITY
TO
INTERPRET
MAPS
AND
THEN
TO
CONSTRUCT
MORE
ACCURATE
MODELS
JONES
THIRUP
INTRODUCED
THE
USE
OF
SKELETONS
COUPLED
WITH
A
PROTEIN
DATABASE
OF
THE
BEST
REFINED
PROTEIN
STRUCTURES
TO
BUILD
THE
INITIAL
MODEL
THIS
WORK
SUGGESTED
THAT
ALL
PROTEIN
MODELS
COULD
BE
BUILT
FROM
FRAGMENTS
OF
EXISTING
STRUCTURES
IN
THIS
PAPER
WE
DESCRIBE
OUR
EXTENSIONS
TO
THESE
IDEAS
AND
OUR
INITIAL
ATTEMPTS
AT
REDUCING
THE
SUBJECTIVITY
INVOLVED
IN
BUILDING
MODELS
WITH
THE
OVERALL
PROCEDURE
SHOWN
IN
FIG
WE
ARE
ABLE
TO
GO
FROM
AN
INITIAL
CA
TRACE
TO
A
WELL
REFINED
MODEL
WITHOUT
MANUAL
INTERVENTION
THIS
SHOULD
ALLOW
THE
CRYSTALLOGRAPHER
TO
SPEND
MORE
TIME
CONSIDERING
ALTERNATIVE
HYPOTHESES
WITHOUT
WORRYING
ABOUT
MOST
OF
THE
DETAILED
FITTING
OF
THE
MODEL
TO
THE
ELECTRON
DENSITY
MAP
WE
ARE
AWARE
THAT
UNFORTUNATELY
SUCH
A
PROCEDURE
CAN
ALSO
BE
MISUSED
ACTING
AS
A
BLACK
BOX
TO
PRODUCE
A
TOTALLY
INCORRECT
STRUCTURE
O
INTERNATIONAL
UNION
OF
CRYSTALLOGRAPHY
T
A
JONES
J
Y
ZOU
W
COWAN
AND
M
KJELDGAARD
AN
INTRODUCTION
TO
OUR
IDEAS
ARE
IMPLEMENTED
IN
A
NEW
COMPUTER
GRAPHICS
PROGRAM
O
INFORMATION
IS
MAINTAINED
IN
A
DATABASE
THAT
CAN
BE
UPDATED
BY
THE
USER
BY
THE
PROGRAM
ITSELF
OR
BY
OTHER
UTILITY
PROGRAMS
EACH
MOLECULE
IN
THE
DATABASE
HAS
A
USER
DEFINEABLE
NAME
THE
USUAL
STRUCTURAL
DATA
ASSOCIATED
WITH
A
MOLECULE
ARE
CONVERTED
INTO
NINE
VECTORS
OF
INFORMATION
TABLE
WE
REFER
TO
SOME
OF
THESE
VECTORS
AS
PROPERTIES
THAT
CAN
BE
ASSOCIATED
WITH
RESIDUES
E
G
THE
AMINO
ACID
SEQUENCE
OR
ATOMS
E
G
THE
TEMPERATURE
FACTORS
PROPERTIES
CAN
BE
USED
FOR
COLOURING
PURPOSES
OR
TO
SELECT
THE
ATOMS
THAT
ARE
TO
BE
DISPLAYED
ANY
NUMBER
OF
MOLECULES
CAN
BE
STORED
IN
THE
DATABASE
AND
ANY
NUMBER
OF
GRAPHICAL
OBJECTS
CAN
BE
CREATED
FROM
A
MOLECULE
MAP
INTERPRETATION
BEFORE
A
COMPLETE
MODEL
CAN
BE
BUILT
IT
IS
NECESSARY
TO
UNDERSTAND
HOW
THE
PROTEIN
MAIN
CHAIN
FOLDS
THROUGH
THE
EXPERIMENTALLY
DETERMINED
THREEDIMENSIONAL
MATRIX
OF
THE
ELECTRON
DENSITY
MAP
IN
PARTICULAR
IT
IS
NECESSARY
TO
DECIDE
ON
THE
CORRESPONDENCE
BETWEEN
THE
PROTEIN
SEQUENCE
AND
THE
MAP
IN
PARALLEL
ONE
ATTEMPTS
TO
DEVELOP
AN
IDEA
FOR
THE
OVERALL
OR
A
SIGNIFICANT
PART
OF
THE
FOLD
DURING
THIS
INITIAL
STAGE
ONE
FREQUENTLY
RECOGNIZES
FEATURES
IN
THE
DENSITY
THAT
MAY
CORRESPOND
TO
A
PART
OF
THE
SEQUENCE
ONE
THEN
TRIES
TO
EXTEND
THE
SEQUENCE
ASSIGNMENT
IN
EITHER
DIRECTION
UNTIL
THE
ALIGNMENT
BREAKS
DOWN
THIS
PRODUCES
A
SERIES
OF
HYPOTHESES
THAT
MAY
BE
CONTRADICTORY
AND
REQUIRES
BOTH
AN
OVERVIEW
AND
A
DETAILED
DESCRIPTION
OF
THE
MAP
THE
OVERVIEW
CAN
BE
PRODUCED
WITH
A
SKELETON
REPRESENTATION
OF
THE
DENSITY
GREER
THAT
HAS
BEEN
IMPLEMENTED
IN
A
COMPUTER
GRAPHICS
PROGRAM
WILLIAMS
THE
DETAILED
DESCRIPTION
CAN
BE
OBTAINED
BY
THE
USUAL
CONTOURED
NET
REPRESENTATION
THESE
REPRESENTATIONS
HAVE
BEEN
MAP
CALCULATE
SKELETONISED
MAP
EDIT
SKELETONISED
MAP
ASSIGN
CA
POSITIONS
FROM
SKELETON
AUTOBUILD
MAIN
CHAIN
AUTOBUILD
SIDE
CHAIN
EACH
RESIDUE
EACH
RESIDUE
RESTORE
STEREOCHEMISTRY
CRYSTALLOGRAPHIC
REFINEMENT
FIG
STRATEGY
OVERVIEW
FOR
MODEL
BUILDING
IN
AN
ELECTRON
DENSITY
MAP
TABLE
O
DATABLOCKS
USED
TO
REPRESENT
PROTEIN
MODELS
AND
SKELETONS
PROTEIN
NAME
DU
NTERS
SKELETON
NAME
NTERS
ORTHOGONAL
ATOMIC
COORDINATES
NAMES
OF
ATOMS
E
G
CA
TEMPERATURE
FACTORS
OF
ATOMS
OCCUPANCIES
OF
ATOMS
ATOMIC
NUMBERS
NAME
OF
RESIDUE
E
G
AMINO
ACID
NAME
E
G
ALA
POINTERS
FOR
THE
RESIDUE
TO
ATOM
DATA
RESIDUE
CENTRE
OF
GRAVITY
AND
RADIUS
ORTHOGONAL
ATOMIC
COORDINATES
NAME
OF
RESIDUE
JUST
ONE
AMINO
ACID
NAME
JUST
ONE
POINTERS
FOR
THE
RESIDUE
TO
ATOM
DATA
SKELETON
STATUS
CODES
SKELETON
CONNECTIVITY
CODES
COMBINED
JONES
THIRUP
AND
USED
IN
OUR
LABORATORY
TO
SOLVE
A
NUMBER
OF
NEW
PROTEIN
STRUCTURES
MYELIN
JONES
BERGFORS
UNGE
SEDZIK
TWO
TYPES
OF
RUBISCO
MOLECULES
SCHNEIDER
LINDQVIST
BR
LORIMER
ANDERSSON
ET
AL
PAPD
HOLMGREN
BR
CELLOBIOHYDROLASE
II
CBHII
ROUVINEN
BERGFORS
TEERI
KNOWLES
JONES
AND
RIBONUCLEOTIDE
REDUCTASE
NORDLUND
SJ
SBERG
EKLUND
OUR
NEW
WAY
OF
WORKING
WITH
SKELETONS
DIFFERS
MAINLY
DUE
TO
THE
ADVANTAGES
OF
USING
O
EACH
SKELETON
IS
TREATED
AS
A
MOLECULE
WITH
A
NUMBER
OF
EXTRA
DATABASE
VECTORS
TABLE
ONE
IS
AN
ATOMIC
PROPERTY
USED
TO
SPECIFY
THE
STATUS
OF
EACH
SKELETON
ATOM
THESE
CODES
ARE
MAPPED
TO
USERDEFINED
COLOURS
WHEN
THE
SKELETON
ATOMS
ARE
DISPLAYED
WE
RECOMMEND
THE
USE
OF
A
SIMPLE
CLASSIFICATION
PROBABLE
MAIN
CHAIN
POSSIBLE
MAIN
CHAIN
AND
SIDE
CHAIN
HOWEVER
SITUATIONS
MAY
ARISE
WHERE
A
MORE
COMPLEX
SET
OF
ASSIGNMENTS
MAY
BE
NEEDED
FOR
EXAMPLE
WHEN
A
TEAM
OF
PEOPLE
ARE
TRYING
TO
INTERPRET
A
MAP
IT
MAY
BE
USEFUL
TO
HIGHLIGHT
CHANGES
MADE
BY
DIFFERENT
MEMBERS
OF
THE
TEAM
A
SECOND
VECTOR
CONTAINS
A
DESCRIPTION
OF
HOW
THE
SKELETON
ATOMS
ARE
CONNECTED
BECAUSE
OF
ERRORS
IN
THE
PHASES
USED
IN
THE
MAP
CALCULATION
THE
DENSITY
IS
RARELY
CONTINUOUS
FROM
THE
AMINO
TO
THE
CARBOXY
TERMINUS
EDITING
OF
THE
SKELETON
CONNECTIVITY
IS
THEREFORE
REQUIRED
TO
PRODUCE
A
CONTINUOUS
TRACE
THIS
IS
ACCOMPLISHED
BY
COMMANDS
THAT
BREAK
OR
MAKE
CONNECTIONS
BETWEEN
SKELETON
ATOMS
ONE
USUALLY
WORKS
WITH
AT
LEAST
TWO
OBJECTS
MADE
FROM
A
SINGLE
SKELETON
ONE
SHOWING
THE
PROPOSED
MAIN
CHAIN
TRACE
WITHIN
A
LARGE
VOLUME
E
G
A
SPHERE
OF
AND
THE
OTHER
SHOWING
ALL
SKELETON
ATOMS
WITHIN
A
SMALLER
RADIUS
E
G
IMPROVED
METHODS
FOR
BUILDING
PROTEIN
MODELS
BUILDING
THE
MODEL
JONES
THIRUP
DEMONSTRATED
THAT
GIVEN
THE
CA
COORDINATES
OF
A
PROTEIN
ONE
COULD
RECONSTRUCT
THE
MAIN
CHAIN
BY
LINKING
TOGETHER
PEPTIDE
FRAGMENTS
OF
DIFFERENT
LENGTHS
THESE
FRAGMENTS
WERE
TAKEN
FROM
A
LIBRARY
OF
REFINED
PROTEIN
STRUCTURES
THEY
FURTHER
DEMONSTRATED
THAT
AN
INITIAL
MODEL
COULD
BE
BUILT
BY
USING
THE
ELECTRON
DENSITY
SKELETON
AS
A
FRAMEWORK
TO
LOCATE
PEPTIDE
FRAGMENTS
THIS
WAS
DONE
INTERACTIVELY
BY
SPECIFYING
THAT
CERTAIN
SKELETON
ATOMS
BE
USED
AS
CA
GUIDE
POSITIONS
OR
BY
ALLOWING
THE
PROGRAM
TO
PLACE
THEM
ALONG
THE
SKELETON
AT
SUITABLE
DISTANCES
THE
LATTER
METHOD
OCCASIONALLY
RESULTS
IN
A
RESIDUE
BEING
SKIPPED
IN
A
TURN
SINCE
OUR
ULTIMATE
AIM
IS
TO
AUTOMATE
MODEL
BUILDING
FULLY
WE
NOW
INTRODUCE
A
STAGE
WHERE
THE
POSITION
OF
EACH
CA
ATOM
IN
THE
MOLECULE
IS
EXPLICITLY
DEFINED
AT
PRESENT
THIS
IS
ACHIEVED
INTERACTIVELY
BY
THE
USER
PLACING
A
PARTICULAR
CA
AT
THE
POSITION
OF
A
SKELETON
ATOM
BUILDING
A
MODEL
FROM
SUCH
A
SET
OF
GUIDE
COORDINATES
IS
A
WELL
KNOWN
PROBLEM
TO
PROTEIN
CRYSTALLOGRAPHERS
DIAMOND
TONES
AND
OTHERS
PURISMA
SCHERAGA
LIKEWISE
NUMEROUS
ALGORITHMS
COULD
BE
DEVELOPED
TO
USE
A
PROTEIN
STRUCTURE
DATABASE
TO
RECONSTRUCT
THE
WHOLE
PROTEIN
FROM
THE
CA
TRACE
ONE
COULD
FOR
EXAMPLE
USE
FIXED
LENGTH
FRAGMENTS
VARIABLE
LENGTH
FRAGMENTS
SATISFYING
SOME
CUTOFF
CRITERION
JONES
THIRUP
CLAESSENS
VAN
CUTSEM
LASTERS
WODAK
OR
DYNAMIC
PROGRAMMING
ALGORITHMS
TO
LOCATE
THE
MINIMUM
NUMBER
OF
FRAGMENTS
WHERE
EACH
FRAGMENT
SATISFIES
SOME
R
M
CUTOFF
THE
RESULTING
MODEL
SHOULD
HAVE
AS
A
MINIMUM
REQUIREMENT
THE
SIDE
CHAINS
POINTING
ROUGHLY
IN
THE
CORRECT
DIRECTION
TO
REDUCE
THE
AMOUNT
OF
MANUAL
INTERVENTION
LATER
IN
THE
REFINEMENT
THE
MAIN
CHAIN
CARBONYL
O
ATOMS
SHOULD
ALSO
BE
CORRECTLY
ORIENTED
OUR
EXPERIENCE
O
I
L
O
I
I
I
I
I
I
RESIDUE
NUMBER
FIG
THE
LONGEST
FRAGMENTS
FOUND
IN
A
DATABASE
OF
WELL
REFINED
STRUCTURES
THAT
FIT
RETINOL
BINDING
PROTEIN
WITH
R
M
CUTOFFS
OF
LOWER
CURVE
AND
UPPER
CURVE
THE
LONG
FRAGMENTS
FOUND
AROUND
RESIDUE
IN
THE
SEQUENCE
CORRESPOND
TO
THE
START
OF
A
FOUR
TURN
O
HELIX
SUGGESTS
THAT
THE
FIRST
QUALITATIVE
REQUIREMENT
IS
MET
WHEN
THE
R
M
DEVIATION
BETWEEN
CA
GUIDE
POINTS
AND
THE
DATABASE
FRAGMENT
IS
CORRECT
CARBONYL
O
ATOMS
IN
GENERAL
REQUIRE
A
R
M
FIT
OF
A
IN
FIG
WE
SHOW
THE
LONGEST
FRAGMENTS
THAT
CAN
BE
LOCATED
IN
OUR
NORMAL
DATABASE
OF
STRUCTURES
THAT
FIT
RESIDUES
IN
RETINOL
BINDING
PROTEIN
RBP
WITH
AND
A
CUTOFFS
THIS
GIVES
AVERAGE
FRAGMENT
LENGTHS
OF
AND
RESIDUES
FOR
THE
TWO
CUTOFFS
WE
COULD
THEREFORE
BUILD
ANY
PART
OF
RBP
WITH
A
FRAGMENT
OF
RESIDUES
AND
BE
SURE
OF
GETTING
THE
SIDE
CHAIN
DIRECTIONS
ROUGHLY
CORRECT
BUT
WE
WOULD
REQUIRE
FRAGMENTS
OF
RESIDUES
TO
GET
THE
CORRECT
PEPTIDE
ORIENTATIONS
SINCE
OUR
AIM
IS
NOT
TO
USE
THE
MINIMUM
NUMBER
OF
FRAGMENTS
BUT
TO
BUILD
AN
ACCURATE
STRUCTURE
FRAGMENTS
OF
RESIDUES
ARE
USED
THIS
ALLOWS
A
BETTER
CHANCE
OF
RECOGNIZING
LOW
FREQUENCY
CONFORMATIONS
THE
COMPLETE
BACKBONE
STRUCTURE
IS
BUILT
WITH
A
SIMPLE
EXTENSION
OF
OUR
ORIGINAL
SCHEME
OUTLINED
IN
FIG
THAT
WE
REFER
TO
AS
AUTOBUILDING
AT
RESIDUE
I
IN
THE
STRUCTURE
THE
BEST
FITTING
FRAGMENT
IS
FOUND
THAT
MATCHES
THE
CA
OF
I
TO
I
HOWEVER
ONLY
RESIDUES
I
TO
I
HAVE
THEIR
COORDINATES
UPDATED
FROM
THE
FRAGMENT
BECAUSE
THE
OTHER
MAIN
CHAIN
ATOMS
OF
RESIDUES
I
AND
I
ARE
NOT
FIXED
BY
THE
SUPERPOSITION
THE
NEXT
FRAGMENT
IS
CHOSEN
BY
STEPPING
FORWARD
RESIDUES
COMPARING
I
AND
I
AND
REPEATING
THE
PROCESS
THIS
ALGORITHM
DOES
NOT
BUILD
EITHER
AMINO
OR
CARBOXY
TERMINAL
RESIDUES
AND
THEREFORE
REQUIRES
AN
EXTRA
RESIDUE
AT
EACH
END
OF
THE
CHAIN
SOME
DEVIATION
FROM
STANDARD
BOND
LENGTHS
AND
ANGLES
WILL
OCCUR
AT
THE
LINKAGE
BETWEEN
TRIPEPTIDES
AND
BECAUSE
OF
DEVIATIONS
IN
THE
STRUCTURES
MAKING
UP
THE
DATABANK
THESE
DEVIATIONS
ARE
HOWEVER
SMALL
AND
CAN
BE
INITIALLY
IGNORED
THE
FITTING
ALGORITHMS
MAKE
USE
OF
PRE
CALCULATED
DISTANCE
MATRICES
TO
SPEED
UP
THE
COMPARISONS
JONES
THIRUP
TO
TEST
THE
QUALITY
OF
MODELS
PRODUCED
BY
THIS
PROCEDURE
WE
HAVE
TAKEN
THE
CA
COORDINATES
OF
CBHII
AND
REBUILT
THE
MAIN
CHAIN
UNDER
VARIOUS
CONDITIONS
THIS
STRUCTURE
IS
A
SUITABLE
EXAMPLE
BECAUSE
IT
IS
VERY
WELL
REFINED
R
FACTOR
TO
RESOLUTION
IT
IS
A
LARGE
A
FL
PROTEIN
RESIDUES
WITH
LOOPS
CONTAINING
EXTENSIVE
NON
REGULAR
SECONDARY
STRUCTURE
THE
R
M
DEVIATION
OF
THE
REBUILT
MODEL
IS
A
FOR
CA
ATOMS
AND
A
FOR
ALL
MAIN
CHAIN
C
I
X
X
X
X
X
X
X
X
X
FIG
THE
MAIN
CHAIN
OF
AUTOBUILT
STRUCTURES
IS
PRODUCED
BY
IDENTIFYING
THE
BEST
FITTING
PENTAPEPTIDES
IN
THE
DATABASE
THESE
FRAGMENTS
ARE
COMBINED
OVERLAPPING
BY
TWO
RESIDUES
ONLY
THOSE
RESIDUES
MARKED
BY
CROSSES
HAVE
THEIR
COORDINATES
UPDATED
BY
THE
TRANSFORMED
FRAGMENT
COORDINATES
T
A
JONES
J
Y
ZOU
W
COWAN
AND
M
KJELDGAARD
TABLE
AUTOBUILDING
OF
CBHII
FROM
CA
COORDINATES
CONTAINING
RANDOM
ERRORS
THE
R
M
DEVIATIONS
REFER
TO
THE
FIT
OF
THE
AUTOBUILT
STRUCTURE
TO
THE
CORRECT
STRUCTURE
R
M
MAIN
R
M
CARBONYL
CA
ERROR
R
M
CA
CHAIN
O
ATOM
I
I
ATOMS
N
CA
CFL
C
O
NOT
UNEXPECTEDLY
THE
CARBONYL
O
ATOMS
SHOW
THE
LARGEST
DEVIATION
A
SIMILAR
VALUE
FOR
MAIN
CHAIN
ATOMS
HAS
BEEN
OBTAINED
BY
REID
THORNTON
IN
RECONSTRUCTING
CLOSTRIDIUM
FLAVODOXIN
SMITH
BURNETT
DARLING
LUDWIG
FROM
CA
COORDINATES
USING
THE
FRODO
DATABASE
IN
REALITY
THE
GUIDE
CA
ATOMS
TAKEN
FROM
AN
EXPERIMENTAL
MAP
WILL
CONTAIN
SEVERE
ERRORS
PARTLY
BECAUSE
OF
THE
SKELETONIZING
ALGORITHM
AND
PARTLY
BECAUSE
OF
PHASE
ERRORS
IN
THE
MAP
THIS
HAS
BEEN
SIMULATED
BY
INTRODUCING
RANDOM
ERRORS
INTO
THE
REFINED
COORDINATES
OF
CBHII
AND
AUTOBUILDING
FROM
THE
RANDOMIZED
CA
COORDINATES
THE
DEVIATIONS
OF
THE
REBUILT
CA
MODEL
ARE
COMPARED
WITH
THE
CORRECT
STRUCTURE
IN
FIG
BELOW
AN
INTRODUCED
R
M
ERROR
OF
THE
AUTOBUILT
MODEL
SHOWS
A
DEVIATION
FROM
THE
CORRECT
STRUCTURE
THAT
IS
SLIGHTLY
WORSE
THAN
THE
INTRODUCED
ERROR
ABOVE
THIS
VALUE
THE
AUTOBUILT
MODEL
CA
IS
A
BETTER
FIT
TO
THE
CORRECT
CA
COORDINATES
TABLE
SHOWS
THE
DEVIATION
OF
THE
MAIN
CHAIN
ATOMS
AND
CARBONYL
O
ATOMS
FOR
ERRORS
APPROACHING
VALUES
TO
BE
EXPECTED
IN
MAP
INTERPRETATION
OA
O
T
FIT
IO
CORRECL
MODEL
FIG
THE
EFFECT
OF
RANDOM
ERRORS
IN
GUIDE
COORDINATES
ON
THE
AUTOBUILT
MODEL
BELOW
THE
SOLID
LINE
THE
AUTOBUILT
STRUTURE
IS
WORSE
THAN
THE
GUIDE
COORDINATES
ABOVE
THE
LINE
THE
AUTOBUILT
STRUCTURE
IS
BETTER
THE
MODEL
IS
CELLOBIOHYDROLASE
II
MODEL
THE
SIDE
CHAINS
OF
THE
BEST
REFINED
STRUCTURES
SHOW
A
HIGH
PREFERENCE
FOR
DISCRETE
CONFORMATIONS
JAMES
SIELECKI
THESE
CONFORMATIONS
TERMED
ROTAMERS
HAVE
BEEN
RECENTLY
TABULATED
PONDER
RICHARDS
MCGREGOR
ISLAM
STERNBERG
NOT
ALL
AMINO
ACIDS
HAVE
WELL
DEFINED
ROTAMERS
IN
PARTICULAR
LYSINE
AND
ARGININE
SIDE
CHAINS
ARE
POORLY
MODELLED
HOWEVER
FOR
THE
REMAINING
RESIDUES
WE
CONSIDER
BUILDING
ANYTHING
BUT
ROTAMERS
INTO
THE
INITIAL
MODEL
TO
BE
A
MISTAKE
IF
WE
CHOOSE
THE
ROTAMER
CLOSEST
TO
THE
CONFORMATION
OBSERVED
IN
OUR
REFINED
CBHII
MODEL
THE
R
M
FIT
AFTER
AUTOBUILDING
FROM
THE
CA
GUIDE
COORDINATES
IS
A
FOR
ALL
ATOMS
TAKING
THE
MOST
COMMON
ROTAMER
GIVES
AN
OVERALL
FIT
OF
A
A
RESIDUE
R
FACTOR
WHEN
DESCRIBING
THE
GOODNESS
OF
FIT
OF
AN
INITIAL
MODEL
WE
ARE
OFTEN
FORCED
TO
USE
VAGUE
QUALITATIVE
EXPRESSIONS
THIS
IS
DIRECTLY
RELATED
TO
THE
SUBJECTIVE
NATURE
OF
MAP
INTERPRETATION
WHILE
THE
CRYSTALLOGRAPHIC
R
FACTOR
UNAMBIGUOUSLY
SHOWS
HOW
WELL
A
PARTICULAR
MODEL
MATCHES
THE
OBSERVED
STRUCTURE
FACTORS
IT
STILL
SHOWS
RELATIVELY
POOR
DISCRIMINATION
OF
MAJOR
ERRORS
IN
A
MODEL
JONES
A
MORE
USEFUL
MEASURE
WOULD
INDICATE
THE
POSITION
OF
POSSIBLE
ERRORS
IN
A
STRUCTURE
WIERENGA
KALK
HOL
HAVE
PUBLISHED
HOW
WELL
THEIR
STRUCTURE
FITS
THEIR
MAP
ON
A
PER
RESIDUE
BASIS
UNAWARE
OF
THEIR
EFFORTS
WE
HAVE
INDEPENDENTLY
DEVELOPED
A
MORE
QUANTITATIVE
FUNCTION
THAT
CAN
BE
USED
TO
REMOVE
MUCH
OF
THE
SUBJECTIVITY
OF
MAP
INTERPRETATION
WE
BELIEVE
THIS
FUNCTION
WILL
ALSO
BE
USEFUL
IN
LOCALIZING
SERIOUS
ERRORS
IN
MAP
INTERPRETATION
CONSIDER
AN
ELECTRON
DENSITY
MAP
ON
A
GRID
GI
GIVEN
A
SET
OF
COORDINATES
A
CALCULATED
ELECTRON
DENSITY
CAN
BE
BUILT
UP
ON
AN
IDENTICAL
GRID
BY
ASSUMING
A
GAUSSIAN
DISTRIBUTION
FUNCTION
FOR
EACH
ATOM
DIAMOND
JONES
LILJAS
THE
ATOMS
ARE
FORCED
TO
HAVE
AN
OVERALL
TEMPERATURE
FACTOR
AND
THE
GRID
DENSITIES
ARE
SCALED
TOGETHER
WITH
A
SINGLE
SCALE
FACTOR
FOR
RESIDUE
I
THE
ELECTRON
DENSITY
OF
A
SELECTED
GROUP
OF
ATOMS
WITHIN
THIS
RESIDUE
IS
BUILT
ON
A
THIRD
IDENTICAL
GRID
FOR
EVERY
NON
ZERO
ELEMENT
IN
WE
THEN
CALCULATE
THE
REAL
SPACE
FIT
FOR
THAT
RESIDUE
AS
POBS
PCALC
POBS
PCALC
WHERE
POBS
IS
TAKEN
FROM
THE
EQUIVALENT
ELEMENT
IN
AND
PCALC
IS
THE
EQUIVALENT
ELEMENT
IN
THE
FUNCTION
MAY
BE
USED
TO
DEMONSTRATE
THE
CONTINUITY
OF
THE
MAIN
CHAIN
BY
USING
JUST
THE
N
C
A
C
C
AND
O
ATOMS
IN
THE
CALCULATION
ALTERNATIVELY
BY
DEFINING
SIDE
CHAIN
ATOMS
THE
FUNCTION
CAN
IDENTIFY
WHERE
THE
PROTEIN
SEQUENCE
IS
OUT
OF
REGISTER
WITH
THE
DENSITY
THE
RESULT
OF
THE
CALCULATION
CAN
BE
ADDED
TO
THE
O
DATABASE
AS
A
RESIDUE
PROPERTY
THAT
IN
TURN
CAN
BE
IMPROVED
METHODS
FOR
BUILDING
PROTEIN
MODELS
USED
FOR
COLOURING
AND
OR
ATOM
SELECTION
PURPOSES
WHEN
DISPLAYING
THE
MODEL
FIGS
A
AND
B
SHOW
THE
MAIN
CHAIN
FIT
FOR
TWO
WELL
REFINED
PROTEINS
RBP
AND
CBHII
R
FACTORS
OF
AND
AT
A
RESOLUTION
RESPECTIVELY
CBHII
HAS
TWO
MOLECULES
IN
THE
ASYMMETRIC
UNIT
THAT
WE
E
CO
N
T
I
I
RESXDUO
NUMBER
A
T
J
H
G
O
U
O
R
RESIDUE
NUMBER
B
I
I
I
L
I
I
I
I
I
I
I
I
I
RESLDUE
NUMBER
C
FIG
PLOTS
OF
MAIN
CHAIN
REAL
SPACE
FIT
RESIDUALS
FOR
A
REFINED
RETINOL
BINDING
PROTEIN
MODEL
B
REFINED
CELLOBIOHYDROLASE
II
CORE
MODEL
THE
CORE
PROTEIN
BEGINS
AT
RESIDUE
IN
THE
SEQUENCE
C
PARTLY
REFINED
CELLOBIOHYDROLASE
II
CORE
MODEL
TABLE
A
SIMULATION
TO
DEMONSTRATE
THE
USE
OF
RESIDUE
REAL
SPACE
FITS
TO
DETERMINE
OUT
OF
REGISTER
ERRORS
THE
SIDE
CHAINS
OF
CBHII
MODEL
WERE
MUTATED
OPTIMALLY
FITTED
TO
THE
DENSITY
BY
HAND
AND
THEN
FURTHER
REFINED
WITH
X
PLOP
THE
REAL
SPACE
FITS
RSF
ARE
MADE
FOR
ALL
ATOMS
IN
EACH
RESIDUE
THE
TWO
REGIONS
WERE
CHOSEN
AT
RANDOM
REGION
RESIDUE
CORRECT
ASN
LEU
GLY
THR
PRO
LYS
CYS
SEQUENCE
RSF
SHIFTED
ASN
GLY
THR
PRO
LYS
CYS
CYS
SEQUENCE
RSF
REGION
RESIDUE
CORRECT
ASP
LYS
THR
PRO
LEU
MET
SEQUENCE
RSF
SHIFTED
LYS
THR
PRO
LEU
MET
MET
SEQUENCE
FIT
REFER
TO
AS
A
AND
B
CLEARLY
ALL
OF
THE
CBHII
MAIN
CHAIN
HAS
CONTINUOUS
DENSITY
BUT
IN
RBP
THERE
IS
ONE
REGION
WITH
POOR
MAIN
CHAIN
DENSITY
FIG
C
SHOWS
THE
MAIN
CHAIN
FIT
OF
A
CBHII
MODEL
OBTAINED
DURING
ITS
CRYSTALLOGRAPHIC
REFINEMENT
THIS
MODEL
MT
WITH
AN
R
FACTOR
OF
FOR
ALL
DATA
IN
THE
RESOLUTION
RANGE
A
WAS
EXTENSIVELY
REBUILT
TWO
REGIONS
WERE
IDENTIFIED
WHERE
THE
SEQUENCE
WAS
OUT
OF
REGISTER
WITH
THE
DENSITY
AND
A
NUMBER
OF
LOCALIZED
POORLY
FITTING
AREAS
WERE
FOUND
IN
EITHER
THE
A
OR
B
MOLECULE
BOTH
OF
THE
OUT
OF
REGISTER
REGIONS
THE
FIRST
NTERMINAL
RESIDUES
AND
CAN
BE
RECOGNIZED
BY
THE
POOR
REAL
SPACE
RESIDUE
FIT
THE
REMAINING
SPIKES
MOSTLY
CORRESPOND
TO
RESIDUES
THAT
COULD
BE
REBUILT
BY
COPYING
THE
EQUIVALENT
ATOMS
FROM
THE
OTHER
CHAIN
THE
RESIDUE
RESIDUAL
COULD
ALSO
BE
USED
TO
SEARCH
DIRECTLY
FOR
OUT
OF
REGISTER
ERRORS
WE
HAVE
SIMULATED
THIS
BY
DELIBERATELY
INTRODUCING
SUCH
ERRORS
IN
THE
A
CHAIN
OF
OUR
BEST
REFINED
CBHII
MODEL
OPTIMIZING
THE
FIT
OF
THE
SIDE
CHAIN
TO
THE
DENSITY
BY
HAND
AND
THEN
CRYSTALLOGRAPHICALLY
REFINING
THE
STRUCTURE
STEPS
OF
POWELL
MINIMIZATION
WITH
X
PLOR
BRFINGER
ET
AL
THE
RESIDUE
REAL
SPACE
FITS
FOR
TWO
EXPERIMENTS
ARE
SHOWN
IN
TABLE
WHERE
THE
CORRECT
ALIGNMENTS
ARE
CLEARLY
IDENTIFIED
AN
AUTOMATIC
PROCEDURE
TO
SEARCH
FOR
AND
RESIDUE
MISMATCHES
WOULD
REQUIRE
PROCEDURES
TO
OPTIMIZE
THE
MUTATED
SIDE
CHAIN
TO
THE
DENSITY
THESE
TOOLS
HAVE
BEEN
DEVELOPED
AND
WILL
BE
DESCRIBED
IN
A
SEPARATE
PUBLICATION
IN
THE
ABOVE
FORMULATION
THE
GRID
ACTS
AS
AN
ENVELOPE
WITHIN
WHICH
TO
MAKE
THE
GRID
SUM
CALCULATIONS
OTHER
WAYS
OF
FORMING
THE
ENVELOPE
MAY
BE
BETTER
SUITED
FOR
CERTAIN
APPLICATIONS
FOR
EXAMPLE
WHEN
SEARCHING
FOR
OUT
OF
REGISTER
ERRORS
THE
CURRENT
METHOD
OF
DEFINING
THE
ENVELOPE
GIVES
POOR
DISCRIMIT
A
JONES
J
Y
ZOU
W
COWAN
AND
M
KJELDGAARD
TABLE
AUTOBUILD
MODEL
STATISTICS
RSFMC
AND
RSFAH
ARE
THE
AVERAGE
RESIDUE
REAL
SPACE
FIT
FACTORS
CALCULATED
FOR
MAIN
CHAIN
AND
ALL
OF
THE
RESIDUE
RESPECTIVELY
R
REFERS
TO
THE
NORMAL
CRYSTALLOGRAPHIC
R
FACTOR
AND
IS
CALCULATED
FOR
ALL
MEASUREMENTS
IN
THE
RESOLUTION
RANGE
THE
MODEL
NUMBERING
IS
EXPLAINED
IN
FIG
THE
R
M
DEVIATIONS
ARE
WITH
RESPECT
TO
OUR
BEST
REFINED
MODEL
THE
R
M
DEVIATIONS
IN
BRACKETS
ARE
CALCULATED
WHERE
ARGININE
AND
LYSINE
RESIDUES
ARE
TREATED
AS
ALANINES
R
M
R
M
R
M
R
M
R
M
MODEL
RSFMC
RSFAN
R
CA
O
MAIN
SIDE
ALL
M
M
MIIO
M
NATION
WHEN
A
SMALL
SIDE
CHAIN
FITS
IN
THE
DENSITY
MEANT
FOR
A
LONGER
SIDE
CHAIN
OTHER
ENVELOPES
CAN
BE
MADE
TO
IMPROVE
THIS
PARTICULAR
SITUATION
ALSO
OTHER
GRID
SUM
CALCULATIONS
COULD
BE
EMPLOYED
SUCH
AS
CORRELATION
COEFFICIENTS
AS
ALTERNATIVE
INDICES
OF
FIT
THE
CAREFUL
MONITORING
OF
TEMPERATURE
FACTORS
ESPECIALLY
FOR
REFINEMENTS
CARRIED
OUT
AT
HIGH
RESOLUTION
HAS
BEEN
WIDELY
USED
TO
MONITOR
COORDINATE
ERRORS
INDEED
THE
LARGE
PEAK
IN
THE
REAL
SPACE
FIT
FUNCTION
OF
RBP
IN
FIG
A
CORRESPONDS
TO
A
REGION
OF
HIGH
TEMPERATURE
FACTORS
THE
MAIN
ADVANTAGE
OF
USING
THE
REAL
SPACE
APPROACH
THEREFORE
IS
ITS
APPLICABILITY
AT
ANY
STAGE
OF
THE
MODELLING
PROCEDURE
INCLUDING
THE
INITIAL
CONSTRUCTION
OF
A
MODEL
IT
CAN
ALSO
BE
USED
FOR
STUDIES
AT
LOWER
RESOLUTION
WHERE
THE
TEMPERATURE
FACTORS
MAY
BE
POORLY
DEFINED
WE
ARE
NOT
AWARE
OF
ANY
DISADVANTAGE
OF
USING
THE
REAL
SPACE
APPROACH
INSTEAD
OF
STUDYING
TEMPERATURE
FACTORS
MG
SKELETON
G
N
ETAC
WE
ROTAMETS
J
SA
M
RSR
T
D
ROGULAFLZE
MLLL
FIG
EXPERIMENTS
ON
BUILDING
MODELS
IN
THE
MIR
MAP
OF
MYELIN
SA
REFERS
TO
CRYSTALLOGRAPHIC
REFINEMENT
USING
SIMULATED
ANNEALING
WITH
THE
PROGRAM
X
PLOR
AND
THE
PROTOCOL
SHOWN
IN
TABLE
TABLE
X
PLOR
PROTOCOL
USED
FOR
ALL
MODEL
REFINEMENTS
VALUES
AS
RECOMMENDED
IN
THE
X
PLOR
MANUAL
USED
UNLESS
STATED
OTHERWISE
BELOW
RESOLUTION
OVERALL
TEMPERATURE
FACTOR
NBONDS
DIELECTRIC
CONSTANT
E
NO
CHARGES
ON
LYS
GLU
ASP
AND
ARG
SIDE
CHAINS
CHECK
STAGE
TO
OBTAIN
THE
WEIGHTING
TERMS
W
A
AND
WE
STEPS
POWELL
MINIMIZATION
HARMONIC
REPULSIVE
TERM
STEPS
POWELL
MINIMIZATION
NORMAL
VAN
DER
WAALS
TERMS
CYCLES
MOLECULAR
DYNAMICS
AT
K
PREPARATION
STAGE
CONJUGATE
GRADIENT
MINIMIZATION
HARMONIC
RESTRAINTS
ON
THE
CA
OF
KJ
MOLE
T
STEPS
POWELL
MINIMIZATION
HARMONIC
REPULSIVE
TERM
STEPS
POWELL
MINIMIZATION
NORMAL
VAN
DER
WAALS
TERMS
SLOW
COOL
STAGE
STEPS
OF
MOLECULAR
DYNAMICS
AT
EACH
TEMPERATURE
STARTING
FROM
K
AND
DROPPING
K
UNTIL
REACHING
K
TIME
STEP
PS
FINAL
STAGE
CONJUGATE
GRADIENT
MINIMIZATION
STEPS
OF
POWELL
MINIMIZATION
WITHOUT
PHASE
RESTRAINTS
TIME
SCALE
ON
A
STELLAR
ON
AVERAGE
H
OF
CPU
AUTOMATIC
REFINEMENT
WE
CAN
NOW
ASK
OURSELVES
IF
IT
IS
POSSIBLE
TO
PRODUCE
A
COMPLETELY
REFINED
STRUCTURE
FROM
JUST
A
CA
TRACE
FOR
A
TEST
CASE
WE
HAVE
CHOSEN
A
SMALLER
CRYSTALLOGRAPHIC
PROBLEM
MYELIN
PROTEIN
JONES
ET
AL
AND
HAVE
CARRIED
OUT
A
NUMBER
OF
EXPERIMENTS
THAT
HAVE
BEEN
SUMMARIZED
IN
FIG
AND
TABLE
MODELS
HAVE
BEEN
CRYSTALLOGRAPHICALLY
REFINED
USING
THE
SAME
SIMULATED
ANNEALING
PROTOCOL
TABLE
AND
THE
PROGRAM
X
PLOR
IN
THE
ORIGINAL
STUDY
THE
STRUCTURE
WAS
SOLVED
FROM
A
MAP
PHASED
WITH
TWO
DERIVATIVES
USING
ANOMALOUS
DISPERSION
THE
DERIVATIVES
HAVE
IDENTICAL
SITES
THE
CRYSTAL
CONTAINS
THREE
MOLECULES
IN
THE
ASYMMETRIC
UNIT
EACH
MOLECULE
CONSISTING
OF
AMINO
ACIDS
NATIVE
DIFFRACTION
DATA
HAVE
BEEN
COLLECTED
TO
RESOLUTION
ORIGINALLY
A
MODEL
OF
ONE
CHAIN
WAS
BUILT
IMPROVED
METHODS
FOR
BUILDING
PROTEIN
MODELS
WITH
FRODO
FROM
A
SKELETON
USING
FRAGMENTS
FROM
THE
DATABASE
THIS
MODEL
WAS
THEN
USED
TO
BUILD
THE
OTHER
TWO
CHAINS
AND
THE
THREE
MOLECULES
REFINED
TO
THE
DENSITY
USING
THE
METHOD
DESCRIBED
BY
JONES
LILJAS
THE
RESULTS
WERE
CHECKED
AT
THE
DISPLAY
AND
MANUALLY
REFITTED
WHERE
NECESSARY
THIS
MODEL
REFERRED
TO
AS
HAS
AN
R
FACTOR
OF
WITHOUT
FATTY
ACID
LIGAND
AND
HAS
NO
OUT
OF
REGISTER
ERRORS
OUR
CURRENT
BEST
MODEL
WAS
OBTAINED
AFTER
NUMEROUS
ALTERNATING
CYCLES
OF
CRYSTALLOGRAPHIC
REFINEMENT
BY
SIMULATED
ANNEALING
AND
MANUAL
REBUILDING
MODEL
HAS
AN
R
FACTOR
OF
FOR
ALL
DATA
IN
THE
RESOLUTION
RANGE
A
THE
AVERAGE
RESIDUE
FITS
BOTH
MAIN
CHAIN
AND
ALL
ATOM
TO
THE
MIR
MAP
ARE
APPROXIMATELY
THE
SAME
FOR
BOTH
MODELS
FOR
COMPARISON
PURPOSES
WE
HAVE
REPEATED
THE
REFINEMENT
OF
USING
THE
PROTOCOL
OF
TABLE
TO
GIVE
IN
OUR
FIRST
EXPERIMENT
THE
SAME
EDITED
SKELETON
ORIGINALLY
USED
TO
BUILD
WAS
USED
TO
MAKE
AN
INITIAL
CA
TRACE
ATOMS
WERE
PLACED
WHERE
WE
HAD
LEFT
A
SIDE
CHAIN
BRANCH
POINT
IN
THE
SKELETON
A
COMPLETE
MOLECULE
WAS
AUTOBUILT
USING
THE
MOST
FREQUENT
ROTAMER
FOR
EACH
SIDE
CHAIN
THE
OTHER
TWO
CHAINS
WERE
BUILT
FROM
THIS
MODEL
BY
APPLYING
THE
KNOWN
NON
CRYSTALLOGRAPHIC
OPERATORS
TO
GIVE
MODEL
THIS
MODEL
WAS
CRYSTALLOGRAPHICALLY
REFINED
TO
GIVE
AS
JUDGED
BY
THE
R
FACTOR
THIS
REFINED
MODEL
IS
GOOD
AND
THE
R
FACTOR
SHOWS
A
SIGNIFICANT
DROP
FROM
TO
THE
R
M
FIT
OF
THE
MODELS
TO
HOWEVER
IS
NOT
SO
IMPRESSIVE
THE
MAIN
CHAIN
ATOMS
SHOW
AN
IMPROVEMENT
FROM
TO
BUT
THE
SIDE
CHAIN
ATOMS
STILL
HAVE
A
HIGH
R
M
DEVIATION
MOST
OF
THESE
SIDE
CHAIN
ERRORS
ARE
LOCALIZED
IN
TO
A
FEW
RESIDUES
IN
PARTICULAR
THE
LONGEST
AMINO
ACIDS
THIS
IS
SERIOUS
FOR
MYELIN
BECAUSE
THIS
PROTEIN
IS
PARTICULARLY
RICH
IN
ARGININE
AND
LYSINE
RESIDUES
OUT
OF
RESIDUES
SHOWS
A
WORSE
AVERAGE
FIT
TO
THE
MIR
MAP
THAN
DOES
MODEL
DESPITE
A
LOWER
R
FACTOR
REAL
SPACE
REFINEMENT
OF
A
MODEL
TO
A
MAP
SHOULD
IN
THEORY
IMPROVE
THE
GOODNESS
OF
FIT
DIAMOND
HOWEVER
WITH
A
ROUGH
INITIAL
MODEL
GREAT
CARE
MUST
BE
TAKEN
SINCE
VOLUME
FITTING
ALGORITHMS
HAVE
A
LARGE
RADIUS
OF
CONVERGENCE
THIS
CAN
EASILY
RESULT
IN
LARGE
SIDE
CHAINS
SUCH
AS
PHENYLALANINE
RINGS
MOVING
INTO
MAIN
CHAIN
DENSITY
FOR
A
MODERATELY
WELL
FITTING
MODEL
THE
SITUATION
CAN
BE
ALLEVIATED
BY
REFINING
INTO
A
RESIDUAL
MAP
JONES
LILJAS
THIS
IS
CALCULATED
BY
SUBTRACTING
THE
SCALED
DENSITY
BUILT
UP
USING
THE
CURRENT
MODEL
FROM
THE
EXPERIMENTAL
MAP
WHEN
AN
ATOM
OR
A
GROUP
OF
ATOMS
IS
TO
BE
REFINED
ITS
MODEL
DENSITY
IS
FIRST
ADDED
BACK
TO
THE
RESIDUAL
MAP
IN
THE
STRATEGY
OUTLINED
IN
FIG
AFTER
THE
MAINCHAIN
AUTOBUILD
THE
MAIN
CHAIN
ATOMS
SHOULD
HAVE
A
REASONABLE
FIT
TO
THE
DENSITY
THEREFORE
ONLY
THESE
ATOMS
SHOULD
BE
SUBTRACTED
FROM
THE
EXPERIMENTAL
MAP
FOR
EACH
RESIDUE
KEEPING
THE
CA
FIXED
AND
ALLOWING
A
ROTATIONAL
SEARCH
OF
THE
WHOLE
RESIDUE
WE
CAN
THEN
FIND
THE
ROTAMER
THAT
BEST
FITS
THE
DENSITY
ALL
RESIDUES
IN
THIS
MODEL
IN
OUR
EXPERIMENT
SHOULD
NOW
APPROXIMATELY
FIT
THE
ELECTRON
DENSITY
IN
THE
NEXT
STEP
THEREFORE
ALL
ATOMS
CAN
BE
SUBTRACTED
FROM
THE
DENSITY
TO
FORM
THE
RESIDUAL
MAP
FOR
EACH
RESIDUE
WE
THEN
CARRY
OUT
A
RIGID
BODY
ROTATION
AND
TRANSLATION
SEARCH
TO
FIND
THE
BEST
FIT
TO
THE
DENSITY
THIS
MODEL
WILL
HAVE
RELATIVELY
POOR
STEREOCHEMISTRY
AT
THE
PEPTIDE
LINKAGE
AND
SHOULD
BE
REGULARIZED
MODELS
AND
AS
JUDGED
BY
THE
RESIDUE
FITS
AGREES
WITH
THE
MIR
MAP
AS
WELL
AS
AND
THE
MODEL
AFTER
REFINEMENT
IS
BETTER
THAN
JUDGED
BY
BOTH
R
FACTOR
AND
R
M
FIT
TO
HOWEVER
THERE
ARE
A
NUMBER
OF
OBVIOUS
ERRORS
THAT
CAN
BE
RECOGNIZED
BY
INSPECTING
THOSE
RESIDUES
HAVING
THE
POOREST
FITS
FIG
THE
TWO
WORST
FITTING
RESIDUES
IN
THE
A
CHAIN
LEU
AND
MET
ARE
CLEARLY
WRONG
WHEN
VIEWED
AT
THE
DISPLAY
A
MODEL
WITH
A
FINAL
LOWER
R
FACTOR
CAN
BE
PRODUCED
BY
INTERACTIVELY
DECIDING
ON
THE
CHOICE
OF
ROTAMER
IN
THE
INITIAL
MODEL
IN
THIS
MODEL
THERE
IS
A
POOR
INITIAL
FIT
TO
THE
MIR
MAP
SINCE
NO
REAL
SPACE
REFINEMENT
OR
MANUAL
FITTING
WAS
CARRIED
OUT
THE
REFINED
MODEL
M
L
SHOWS
IMPROVED
FIT
AND
LOWER
R
FACTOR
FIG
SHOWS
A
HISTOGRAM
OF
HOW
EQUIVALENT
ATOMS
IN
AND
ARE
SPATIALLY
SEPARATED
OF
THE
ATOMS
ARE
WITHIN
OF
ONE
ANOTHER
THE
AVERAGE
RESIDUE
R
M
DEVIATIONS
ARE
PLOTTED
IN
FIG
ACCORDING
TO
AMINO
ACID
TYPE
NOT
SURPRISINGLY
THE
WORST
ERRORS
OCCUR
FOR
ARGININE
AND
LYSINE
RESIDUES
I
E
THOSE
RESIDUES
HAVING
THE
WORST
ROTAMERS
THE
BEHAVIOUR
OF
SERINE
RESIDUES
APPEARS
SURPRISING
BUT
THIS
IS
DUE
TO
ONE
RESIDUE
SER
AT
THE
AMINO
TERMINUS
DEVIATIONS
OF
AND
FOR
EACH
CHAIN
LIKEWISE
THE
ASPARAGINE
VALUE
IS
INFLUENCED
BY
ERRORS
IN
ASN
AND
ASN
THESE
ERRORS
ARE
ALSO
LIKELY
TO
BE
OVERESTIMATES
O
RESIDUE
NUMBER
FIG
THE
ALL
ATOM
RESIDUE
REAL
SPACE
FIT
OF
THE
A
CHAIN
OF
MYELIN
MODEL
M
TO
THE
MIR
MAP
T
A
JONES
J
Y
ZOU
W
COWAN
AND
M
KJELDGAARD
BECAUSE
ONLY
THE
COORDINATES
OF
THE
A
CHAIN
WERE
FITTED
TO
THE
DENSITY
WHEN
COMPARING
M
TO
MODEL
THERE
ARE
SIGNIFICANTLY
MORE
LARGE
DEVIATIONS
OBSERVED
FOR
ATOMS
IN
THE
B
AND
C
CHAINS
THE
R
M
DIFFERENCES
BETWEEN
THE
THREE
CHAINS
IN
THE
FINAL
REFINED
MODEL
IS
A
FOR
ALL
ATOMS
AND
FOR
CA
ATOMS
TO
ILLUSTRATE
THE
INADEQUACY
OF
THE
NORMAL
CRYSTALLOGRAPHIC
R
FACTOR
WE
HAVE
BUILT
A
COMPLETELY
BACK
WARDS
STRUCTURE
OF
MYELIN
IN
THIS
MODEL
RESIDUE
I
IS
BUILT
AT
RESIDUE
I
THE
AUTOBUILT
STRUCTURE
REFINES
TO
AN
R
FACTOR
OF
MODEL
THE
REAL
SPACE
FIT
VALUES
START
BADLY
AND
DO
NOT
R
IMPROVE
UPON
REFINEMENT
A
PLOT
OF
THE
MAIN
CHAIN
TORSION
ANGLES
DOES
NOT
CLEARLY
DISTINGUISH
BETWEEN
MODELS
AND
SIMILARLY
THE
R
M
DEVIATIONS
OF
BOND
LENGTHS
ANGLES
AND
FIXED
DIHEDRAL
ANGLES
HAVE
NORMAL
VALUES
REALISTICALLY
WE
CANNOT
EXPECT
TO
AUTOBUILD
A
MODEL
BETTER
THAN
WHICH
WAS
THE
RESULT
OF
MANY
HOURS
CAREFUL
MODELLING
HOWEVER
WE
HAD
HOPED
THAT
AFTER
SIMULATED
ANNEALING
THE
BEST
AUTOBUILT
MODELS
WOULD
BE
AS
GOOD
AS
THOSE
OBTAINED
STARTING
FROM
AS
A
CONTROL
THEREFORE
HAS
BEEN
REFINED
WITH
THE
SAME
PROTOCOL
THIS
MODEL
IS
THE
BEST
MODEL
WE
HAVE
PRODUCED
AS
JUDGED
BY
R
FACTOR
R
M
FIT
AND
DENSITY
FIT
WE
ARE
AWARE
OF
AND
BELIEVE
WE
CAN
OVERCOME
THE
PROBLEMS
ASSOCIATED
WITH
MODELLING
LYS
ARG
RESIDUES
IF
WE
OMIT
THEM
FROM
I
I
I
U
O
IOOOII
I
OH
IL
T
OOL
IL
I
DISTANCE
FIG
HISTOGRAM
OF
SEPARATIONS
OF
EQUIVALENT
ATOMS
IN
MODELS
AND
OF
MYELIN
THE
ATOMS
IN
THE
THREE
CHAINS
ARE
INCLUDED
M
C
M
OT
R
GI
V
ALA
PRO
SE
CYS
TH
VAL
LIE
LEU
H
ASPASN
GHJ
GIN
PHE
TVR
TRP
MET
LYS
AR
AMINO
ACID
FIG
R
M
DEVIATIONS
OF
AND
OF
MYELIN
ACCORDING
TO
AMINO
ACID
TYPE
THE
PROTEIN
HAS
NO
HISTIDINE
RESIDUES
THE
COMPARISON
THE
R
M
DIFFERENCES
OF
AND
TO
THEN
DIFFER
BY
ONLY
K
LOCATING
ERRORS
IN
THE
MODEL
DURING
REFINEMENT
DATABASES
CAN
ALSO
BE
USED
TO
MONITOR
THE
QUALITY
OF
STRUCTURES
UNDERGOING
CRYSTALLOGRAPHIC
REFINEMENT
IN
RESIDUE
NUMBER
A
O
T
I
I
I
I
I
I
RESIDUE
NUMBER
B
N
T
I
JT
I
I
I
T
I
RESIDUE
NUMBER
C
FIG
CARBONYL
O
ATOM
ERROR
INDICATIONS
PEPFLIP
FOR
A
A
WELL
REFINED
HIGH
RESOLUTION
STRUCTURE
CRAMBIN
B
AND
C
MODELS
AND
OF
THE
CYTOCHROME
OF
THE
REACTION
CENTRE
IMPROVED
METHODS
FOR
BUILDING
PROTEIN
MODELS
THIS
PUBLICATION
WE
ARE
CONCERNED
WITH
ERRORS
IN
PEPTIDE
ORIENTATION
AND
SIDE
CHAIN
CONFORMATION
TO
MONITOR
PEPTIDE
ERRORS
EACH
PENTAPEPTIDE
IN
THE
STRUCTURE
IS
COMPARED
WITH
THE
DATABASE
AT
POSITION
I
IN
THE
SEQUENCE
THEREFORE
WE
LOCATE
THE
BESTFITTING
FRAGMENTS
TO
THE
ZONE
I
I
THE
R
M
DEVIATION
OF
THE
CARBONYL
O
ATOM
OF
RESIDUE
I
TO
THE
EQUIVALENT
O
ATOMS
OF
THESE
DATABASE
FRAGMENTS
IS
THEN
USED
AS
AN
INDEX
OF
FIT
THE
DISTRIBUTION
FOR
A
WELL
REFINED
STRUCTURE
CRAMBIN
HENDRICKSON
TEETER
IS
SHOWN
IN
FIG
A
THE
SMALL
PEAKS
IN
THIS
FUNCTION
OCCUR
AT
LOOPS
CONNECTING
SECONDARY
STRUCTURE
ELEMENTS
AND
ARE
THE
RESULT
OF
SOME
FANNING
IN
THE
ORIENTATION
OF
THE
PEPTIDE
PLANES
FIG
B
SHOWS
THE
RESULT
OBTAINED
FROM
A
PARTLY
REFINED
STRUCTURE
MODEL
OF
THE
CYTOCHROME
OF
THE
REACTION
CENTRE
FROM
RHODOPSEUDOMONAS
VIRIDIS
DEISENHOFER
MICHEL
THIS
PLOT
IS
MORE
REPRESENTATIVE
OF
THE
RESULTS
OBTAINED
WHILE
MONITORING
A
REFINEMENT
THE
VERY
SHARP
PEAKS
HAVING
R
M
DEVIATIONS
CORRESPOND
TO
PEPTIDES
WHERE
THE
O
ATOM
POINTS
IN
THE
OPPOSITE
DIRECTION
FROM
THE
DATABASE
STRUCTURES
FIG
WE
HAVE
COMPARED
THE
SUGGESTIONS
MADE
FROM
THIS
CALCULATION
WITH
THE
INDEPENDENT
ACTIONS
TAKEN
BY
DEISENHOFER
MICHEL
DURING
THEIR
REFINEMENT
TABLE
SHOWS
A
GOOD
CORRELATION
BETWEEN
THE
SUGGESTED
ERRORS
AND
THE
ACTIONS
TAKEN
IN
PRODUCING
MODEL
IN
THEIR
REFINEMENT
OUR
EXPERIENCE
WITH
THIS
METHOD
SUGGESTS
THAT
EVERY
RESIDUE
SHOWING
A
DEVIATION
A
IS
WORTH
INVESTIGATING
THE
METHOD
GIVES
FALSE
PEAKS
FOR
STRUCTURES
WITH
CIS
PEPTIDES
BECAUSE
THERE
ARE
TOO
FEW
SUCH
STRUCTURES
IN
THE
DATABASE
IT
ALSO
HIGHLIGHTS
CONFORMATIONS
THAT
HAVE
A
MODERATE
BUT
NOT
ABSOLUTE
REQUIREMENT
FOR
A
GLYCINE
AT
THE
NEXT
RESIDUE
IN
THE
SEQUENCE
SUCH
CONFORMATIONS
FREQUENTLY
HAVE
CARBONYL
O
ATOMS
ORIENTATED
IN
ONE
DIRECTION
FOR
THE
GLYCINE
AND
IN
THE
OPPOSITE
DIRECTION
FOR
NON
GLYCINE
RESIDUES
THUS
MODEL
OF
THE
CYTOCHROME
ALSO
SHOWS
SPIKES
THAT
PERSIST
TO
THEIR
FINAL
MODEL
THE
SIDE
CHAIN
CONFORMATIONS
CAN
BE
MONITORED
TO
FIND
THE
R
M
DEVIATION
TO
EACH
POSSIBLE
ROTAMER
FOR
THE
RESIDUE
THE
LOWEST
VALUE
IS
TAKEN
AS
THE
INDEX
OF
FIG
THE
WORST
CARBONYL
OF
CYTOCHROME
MODEL
THICK
LINES
INCLUDING
SIDE
CHAIN
ATOMS
WITH
THE
DATABASE
STRUCTURE
OVERLAID
THIN
LINES
MAIN
CHAIN
ATOMS
THE
CARBONYL
O
ATOM
OF
RESIDUE
POINTS
IN
THE
OPPOSITE
DIRECTION
COMPARED
TO
THE
DATABASE
STRUCTURE
TABLE
SORTED
LIST
OF
PROPOSED
PEPTIDE
FLIPS
FOR
REACTION
CENTRE
CYTOCHROME
MODEL
THE
COLUMN
GIVES
THE
DISTANCE
SEPARATING
THE
CARBONYL
O
ATOMS
IN
MODELS
AND
THE
ACTION
COLUMN
STATES
THE
ACTION
CARRIED
OUT
BY
DEISENHOFER
DURING
HIS
REFINEMENT
RESIDUE
R
M
O
ACTION
PEPTIDE
FLIP
PEPTIDE
FLIP
PEPTIDE
FLIP
PEPTIDE
FLIP
PEPTIDE
FLIP
NO
ACTION
BUT
POLYPROLINE
REGION
NO
ACTION
NO
ACTION
NO
ACTION
BUT
WAS
A
REGION
OF
MANY
ERRORS
NO
ACTION
BUT
PEPTIDE
FLIP
HALF
PEPTIDE
FLIP
NO
ACTION
NO
ACTION
BUT
PEPTIDE
FLIP
NO
ACTION
NO
ACTION
PEPTIDE
FLIP
NO
ACTION
BUT
PEPTIDE
FLIP
HALF
PEPTIDE
FLIP
FIT
HIGH
VALUES
MAY
CORRESPOND
TO
ERRORS
IN
THE
STRUCTURE
AS
IMPLEMENTED
BOTH
ALGORITHMS
CALCULATE
RESIDUE
PROPERTIES
THAT
CAN
BE
USED
WITH
O
FOR
COLOURING
AND
SELECTION
PURPOSES
THE
IMPLEMENTATION
IS
NOTEWORTHY
IN
ANOTHER
RESPECT
THE
PROGRAMS
GENERATE
FILES
OF
O
COMMANDS
THAT
CAN
BE
ACTIVATED
ONE
BY
ONE
TO
PLACE
THE
USER
AT
THE
TROUBLE
SPOT
ACTIVATING
THE
NECESSARY
COMMANDS
TO
ILLUSTRATE
THE
PROBLEM
THE
USER
THEN
SIMPLY
AGREES
THAT
THERE
IS
AN
ERROR
AND
CORRECTS
IT
OR
MOVES
ON
TO
THE
NEXT
PROBLEM
WE
INTEND
TO
DEVELOP
THIS
IDEA
FURTHER
TO
OTHER
PROBLEMS
SO
THAT
THE
USER
IS
PRESENTED
WITH
A
SUGGESTION
THE
REASONS
AND
THEN
HAS
TO
DECIDE
THIS
WORK
HAS
BEEN
SUPPORTED
BY
UPPSALA
UNIVERSITY
AND
THE
SWEDISH
NATURAL
SCIENCE
RESEARCH
COUNCIL
MK
WAS
SUPPORTED
BY
THE
BIOREGULATION
CENTRE
AT
AARHUS
UNIVERSITY
WE
THANK
DR
JOHAN
DEISENHOFER
FOR
MAKING
HIS
COORDINATES
AVAILABLE
TO
US
AND
DR
RIK
WEIRANGA
FOR
POINTING
OUT
TO
US
HIS
INDEPENDENT
USE
OF
REAL
SPACE
FITTING
ABSTRACT
THE
DESIGN
IMPLEMENTATION
AND
CAPABILITIES
OF
AN
EXTENSIBLE
VISUALIZATION
SYSTEM
UCSF
CHIMERA
ARE
DISCUSSED
CHIMERA
IS
SEGMENTED
INTO
A
CORE
THAT
PROVIDES
BASIC
SERVICES
AND
VISUALIZATION
AND
EXTENSIONS
THAT
PROVIDE
MOST
HIGHER
LEVEL
FUNCTIONALITY
THIS
ARCHITECTURE
ENSURES
THAT
THE
EXTENSION
MECHANISM
SATISFIES
THE
DEMANDS
OF
OUTSIDE
DEVELOPERS
WHO
WISH
TO
INCORPORATE
NEW
FEATURES
TWO
UNUSUAL
EXTENSIONS
ARE
PRESENTED
MULTISCALE
WHICH
ADDS
THE
ABILITY
TO
VISUALIZE
LARGE
SCALE
MOLECULAR
ASSEMBLIES
SUCH
AS
VIRAL
COATS
AND
COLLABORATORY
WHICH
ALLOWS
RESEARCHERS
TO
SHARE
A
CHIMERA
SESSION
INTERACTIVELY
DESPITE
BEING
AT
SEPARATE
LOCALES
OTHER
EXTENSIONS
INCLUDE
MULTALIGN
VIEWER
FOR
SHOWING
MULTIPLE
SEQUENCE
ALIGNMENTS
AND
ASSOCIATED
STRUCTURES
VIEWDOCK
FOR
SCREENING
DOCKED
LIGAND
ORIENTATIONS
MOVIE
FOR
REPLAYING
MOLECULAR
DYNAMICS
TRAJECTORIES
AND
VOLUME
VIEWER
FOR
DISPLAY
AND
ANALYSIS
OF
VOLUMETRIC
DATA
A
DISCUSSION
OF
THE
USAGE
OF
CHIMERA
IN
REAL
WORLD
SITUATIONS
IS
GIVEN
ALONG
WITH
ANTICIPATED
FUTURE
DIRECTIONS
CHIMERA
INCLUDES
FULL
USER
DOCUMENTATION
IS
FREE
TO
ACADEMIC
AND
NONPROFIT
USERS
AND
IS
AVAILABLE
FOR
MICROSOFT
WINDOWS
LINUX
APPLE
MAC
OS
X
SGI
IRIX
AND
HP
UNIX
FROM
HTTP
WWW
CGL
UCSF
EDU
CHIMERA
WILEY
PERIODICALS
INC
J
COMPUT
CHEM
KEY
WORDS
MOLECULAR
GRAPHICS
EXTENSIBILITY
VISUALIZATION
MULTISCALE
MODELING
SEQUENCE
ALIGNMENT
INTRODUCTION
SINCE
ITS
INCEPTION
THE
UCSF
COMPUTER
GRAPHICS
LABORATORY
HAS
WORKED
ON
MOLECULAR
VISUALIZATION
SYSTEMS
TO
MEET
THE
NEEDS
OF
RESEARCHERS
IN
THE
FIELD
BEGINNING
WITH
MMS
IN
TO
OUR
CURRENT
OFFERING
UCSF
HENCEFORTH
CHIMERA
CHIMERA
IMMEDIATE
PREDECESSOR
THE
MIDAS
MIDASPLUS
HENCEFORTH
MIDAS
PROVIDED
US
WITH
THE
INSIGHT
THAT
EXTENSIBIL
ITY
SHOULD
BE
CONSIDERED
CRITICALLY
IMPORTANT
IN
THE
DESIGN
OF
A
VISUALIZATION
SYSTEM
MIDAS
WAS
A
HIGHLY
SUCCESSFUL
MOLECULAR
GRAPHICS
SYSTEM
HOWEVER
IT
WAS
RELATIVELY
DIFFICULT
FOR
USERS
TO
ADD
NEW
FUNCTION
ALITY
THE
FIRST
EXTENSION
MECHANISM
INTRODUCED
INTO
MIDAS
WAS
THE
ABILITY
TO
SEND
AN
ANNOTATED
PROTEIN
DATA
BANK
PDB
FILE
REPRE
SENTING
THE
CURRENTLY
DISPLAYED
SCENE
TO
AN
EXTERNAL
PROGRAM
THIS
WAS
MOTIVATED
BY
OUR
DESIRE
TO
INTERFACE
TO
RENDERING
PROGRAMS
SUCH
AS
ONCE
THIS
EXTENSION
MECHANISM
WAS
AVAIL
ABLE
IT
BECAME
RELATIVELY
EASY
TO
DEVELOP
RENDERING
BACK
ENDS
OF
OUR
OWN
AND
SOON
THEREAFTER
WE
DEVELOPED
BOTH
A
FAST
SPACE
FILLING
RENDERER
WITH
SHADOWS
CONIC
AND
A
JANE
RICHARDSON
RIB
BON
DEPICTION
PROGRAM
WITH
MANY
CAPABILITIES
RIBBONJR
FURTHER
MORE
OUTSIDE
DEVELOPERS
EXPLOITED
THE
MECHANISM
IN
WAYS
THAT
WE
HAD
NOT
ANTICIPATED
THOMAS
HYNES
THEN
WITH
GENENTECH
WROTE
NEON
A
PROGRAM
TO
ALLOW
MIDAS
TO
DEPICT
SHADOWED
BALL
AND
STICK
SCENES
NEON
ACTED
AS
A
FILTER
BETWEEN
MIDAS
AND
CONIC
TAKING
THE
PDB
FILE
OUTPUT
BY
MIDAS
AND
PRODUCING
ANOTHER
PDB
FILE
WITH
AN
ORDER
OF
MAGNITUDE
MORE
ATOMS
NEON
OUTPUT
CONTAINED
LARGER
RADIUS
ATOMS
FOR
BALLS
AND
SERIES
OF
MANY
CLOSELY
SPACED
SMALLER
RADIUS
ATOMS
TO
SIMULATE
STICKS
TO
OUR
SURPRISE
CONIC
WAS
ABLE
TO
PROCESS
THE
NEON
FILE
QUICKLY
ENOUGH
SECONDS
TO
MINUTES
ON
COMPUTERS
OF
THE
DAY
TO
BE
USABLE
THIS
WHOLE
NEON
CONCEPT
WAS
SOMETHING
THAT
WOULD
NEVER
HAVE
OCCURRED
TO
US
AND
OPENED
OUR
EYES
TO
THE
POWER
OF
AN
EFFECTIVE
EXTENSION
MECHANISM
A
SECOND
EXTENSION
MECHANISM
WAS
SUBSEQUENTLY
CREATED
TO
ALLOW
MIDAS
TO
COMMUNICATE
ON
AN
ONGOING
BASIS
WITH
EXTERNAL
PROGRAMS
THE
MIDAS
USER
COULD
SEND
COMMANDS
TO
AN
EXTERNAL
PROGRAM
AND
THE
EXTERNAL
PROGRAM
COULD
ISSUE
MIDAS
COMMANDS
TO
CAUSE
CHANGES
IN
THE
MIDAS
SESSION
ALTHOUGH
THIS
MECHANISM
WAS
ALSO
QUITE
SUCCESSFUL
IT
WAS
ULTIMATELY
CONSTRAINED
TO
THE
AVAILABLE
MIDAS
COMMAND
SET
THE
RESTRICTIONS
IMPOSED
BY
THE
ORIGINAL
CORRESPONDENCE
TO
T
E
FERRIN
E
MAIL
TEF
CGL
UCSF
EDU
CONTRACT
GRANT
SPONSOR
NIH
CONTRACT
GRANT
NUMBER
WILEY
PERIODICALS
INC
PETTERSEN
ET
AL
VOL
NO
JOURNAL
OF
COMPUTATIONAL
CHEMISTRY
FIGURE
A
SINGLE
FRAME
OF
A
MOLECULAR
DYNAMICS
TRAJECTORY
OF
A
BUCKYTUBE
IN
WATER
SHOWN
WITH
THE
MOVIE
EXTENSION
A
LENS
HAS
BEEN
PLACED
OVER
THE
CENTER
OF
THE
TUBE
TO
STRIP
AWAY
THE
SURFACE
AND
REVEAL
THE
HYDROGEN
BONDED
CHAIN
OF
WATERS
PASSING
THROUGH
THE
TUBE
THE
TRAJECTORY
WAS
COMPUTED
WITH
POLARIZABLE
MOLECULAR
DYNAMICS
USING
THE
AMBER
SANDER
MODULE
J
CALDWELL
UCSF
UNPUBLISHED
DATA
MIDAS
DESIGN
WERE
PROVING
PROBLEMATIC
AND
WE
WERE
MOTIVATED
TO
CREATE
A
NEW
SYSTEM
WITH
GREATER
EXTENSIBILITY
CHIMERA
WAS
DESIGNED
WITH
EXTENSIBILITY
AS
A
PRIMARY
GOAL
WE
ALSO
WANTED
CHIMERA
TO
BE
PORTABLE
TO
A
WIDE
VARIETY
OF
PLATFORMS
AND
TO
INCLUDE
STATE
OF
THE
ART
GRAPHICS
CAPABILITIES
SUCH
AS
TRANS
PARENCY
AND
INTERACTIVE
BALL
AND
STICK
SPACE
FILLING
RIBBON
AND
SOLID
SURFACE
REPRESENTATIONS
ANOTHER
DESIGN
GOAL
WAS
TO
MAKE
CHIMERA
ACCESSIBLE
TO
USERS
AT
ALL
SKILL
LEVELS
BY
PROVIDING
BOTH
A
GRAPHICAL
MENU
WINDOW
INTERFACE
AND
A
COMMAND
LINE
INTERFACE
CHIMERA
ARCHITECTURE
CHIMERA
PRIMARY
PROGRAMMING
LANGUAGE
IS
PYTHON
IMPOR
TANTLY
PYTHON
IS
AN
INTERPRETED
OBJECT
ORIENTED
PROGRAMMING
LAN
GUAGE
THAT
IS
ALSO
EASY
TO
LEARN
AND
VERY
READABLE
BECAUSE
PYTHON
IS
INTERPRETED
IT
IS
GOOD
FOR
RAPID
DEVELOPMENT
AND
DEBUGGING
READABILITY
IS
IMPORTANT
FOR
A
TEAM
DEVELOPMENT
PROJECT
LIKE
CHIMERA
AND
AN
EASY
TO
LEARN
LANGUAGE
ENABLES
OTHERS
TO
DEVELOP
EXTENSIONS
WITHOUT
UNDUE
EFFORT
CHIMERA
INCLUDES
THE
PYTHON
STANDARD
IDLE
INTERACTIVE
DEVELOPMENT
TO
HELP
DIAGNOSE
PROBLEMS
DURING
EXTENSION
DEVELOPMENT
CHIMERA
IS
DIVIDED
INTO
A
CORE
AND
EXTENSIONS
THE
CORE
PRO
VIDES
BASIC
SERVICES
AND
MOLECULAR
GRAPHICS
CAPABILITIES
ALL
HIGHER
LEVEL
FUNCTIONALITY
IS
PROVIDED
THROUGH
EXTENSIONS
THIS
DESIGN
WITH
THE
BULK
OF
CHIMERA
FUNCTIONS
PROVIDED
BY
EXTENSIONS
EN
SURES
THAT
THE
EXTENSION
MECHANISM
IS
ROBUST
ENOUGH
TO
HANDLE
THE
NEEDS
OF
OUTSIDE
RESEARCHERS
WANTING
TO
EXTEND
CHIMERA
IN
NOVEL
WAYS
EXTENSIONS
CAN
BE
INTEGRATED
INTO
THE
CHIMERA
MENU
SYSTEM
AND
CAN
PRESENT
A
SEPARATE
GRAPHICAL
USER
INTERFACE
AS
NEEDED
USING
THE
TKINTER
TIX
AND
OR
TOOLKITS
THE
CHIMERA
CORE
CONSISTS
OF
A
C
LAYER
THAT
HANDLES
TIME
CRITICAL
OPERATIONS
E
G
GRAPHICS
RENDERING
AND
A
PYTHON
LAYER
THAT
HANDLES
ALL
OTHER
FUNCTIONS
ALL
SIGNIFICANT
C
DATA
AND
FUNCTIONS
ARE
MADE
ACCESSIBLE
TO
THE
PYTHON
LAYER
CORE
CAPABILI
TIES
INCLUDE
MOLECULAR
FILE
INPUT
OUTPUT
MOLECULAR
SURFACE
GENER
ATION
USING
THE
MSMS
ALGORITHM
AND
ASPECTS
OF
GRAPHICAL
DIS
PLAY
SUCH
AS
WIRE
FRAME
BALL
AND
STICK
RIBBON
AND
SPHERE
REPRESENTATIONS
TRANSPARENCY
CONTROL
NEAR
AND
FAR
CLIPPING
PLANES
AND
LENSES
SCREEN
AREAS
WITH
DIFFERENT
DISPLAY
ATTRIBUTES
SEE
FIG
ANOTHER
CORE
SERVICE
IS
MAINTENANCE
AND
DISPLAY
OF
THE
CURRENT
SELECTION
USERS
MAY
SELECT
PARTS
OF
STRUCTURES
BY
PICKING
WITH
THE
MOUSE
BY
MAKING
MENU
CHOICES
E
G
AROMATIC
RINGS
OR
VIA
CERTAIN
EXTENSION
ACTIONS
THE
SELECTED
STRUCTURE
AREAS
ARE
HIGH
LIGHTED
WITH
A
PARTICULAR
COLOR
OR
A
COLORED
OUTLINE
EXTENSIONS
CAN
QUERY
FOR
THE
CONTENTS
OF
THE
SELECTION
MANY
MENU
ACTIONS
SUCH
AS
COLORING
OR
SETTING
THE
DISPLAY
STYLE
WORK
ON
THE
CURRENT
SELECTION
FIGURE
BLUETONGUE
VIRUS
CORE
PARTICLE
PDB
IDENTIFIER
WITH
DOUBLE
STRANDED
RNA
ATTACHED
TO
THE
SURFACE
TOP
TRIMERS
IN
THE
OUTER
PROTEIN
LAYER
THAT
ARE
EQUIVALENT
UNDER
THE
ICOSAHEDRAL
SYMMETRY
ARE
GIVEN
THE
SAME
COLOR
THE
FREE
END
OF
THE
RNA
ATTACHES
TO
OTHER
VIRAL
PARTICLES
IN
THE
CRYSTAL
A
CLOSEUP
OF
THE
INNER
LAYER
BOTTOM
SHOWS
BALL
AND
STICK
AND
RIBBON
MODELS
AND
A
SURFACE
AT
HIGHER
RESOLUTION
THE
CORE
ALSO
MAINTAINS
A
TRIGGER
MECHANISM
WHEREIN
CHANGES
TO
CORE
DATA
STRUCTURES
OR
STATE
ARE
REPORTED
TO
EXTENSIONS
THAT
HAVE
REGISTERED
CALLBACKS
WITH
THE
CORRESPONDING
TRIGGER
FOR
EXAMPLE
THERE
IS
A
SELECTION
CHANGED
TRIGGER
THAT
FIRES
WHENEVER
THE
CURRENT
SELECTION
CHANGES
EXTENSIONS
ARE
WRITTEN
EITHER
ENTIRELY
IN
PYTHON
OR
IN
A
COMBI
NATION
OF
PYTHON
AND
C
C
THE
LATTER
USING
A
SHARED
LIBRARY
LOADED
AT
RUNTIME
EXTENSIONS
CAN
BE
PLACED
IN
THE
CHIMERA
INSTALLATION
DIRECTORY
WHICH
WOULD
MAKE
THE
EXTENSION
AVAILABLE
TO
ALL
USERS
OR
IN
THE
USER
OWN
FILE
AREA
EXTENSIONS
ARE
LOADED
ON
DEMAND
TYPICALLY
WHEN
THE
USER
ACCESSES
A
MENU
ENTRY
THAT
STARTS
THE
EXTENSION
THE
CLASS
STRUCTURE
OF
MOLECULAR
DATA
AND
OTHER
EXTENSION
PROGRAMMING
INFORMATION
CAN
BE
FOUND
AT
HTTP
WWW
CGL
UCSF
EDU
CHIMERA
DOCS
PROGRAMMERSGUIDE
EXAMPLES
WE
DEMONSTRATE
CHIMERA
EXTENSIBILITY
BY
PRESENTING
SEVERAL
EXTENSIONS
THE
MULTISCALE
AND
COLLABORATORY
EXTENSIONS
ARE
QUITE
UNIQUE
AND
DEMONSTRATE
THE
WIDE
SPECTRUM
OF
ABILITIES
THAT
CAN
BE
GENERATED
THE
OTHERS
PROVIDE
INSIGHT
INTO
THE
USE
OF
CORE
FACILITIES
BY
EXTENSIONS
AND
THE
INTEGRATION
OF
EXTENSIONS
WITH
THE
CHIMERA
ENVIRONMENT
MULTISCALE
THE
MULTISCALE
EXTENSION
ADDS
CAPABILITIES
FOR
INTERACTIVELY
EXPLOR
ING
LARGE
MOLECULAR
ASSEMBLIES
WE
HAVE
FOCUSED
ON
VIRAL
STRUC
TURES
CONDENSED
CHROMOSOMES
AND
RIBOSOMES
ADDITIONAL
EXAM
PLES
INCLUDE
CYTOSKELETAL
FIBERS
AND
MOTORS
FLAGELLAR
STRUCTURES
AND
CHAPERONINS
THE
MULTISCALE
EXTENSION
DISPLAYS
STRUCTURES
FROM
THE
AND
GENERATES
THEIR
MULTIMERIC
FORMS
BY
USING
TRANSFORMA
TION
MATRICES
TO
POSITION
THE
SUBUNITS
MULTISCALE
CAN
ALSO
BE
USED
WITH
LARGE
ASSEMBLIES
WHERE
THERE
ARE
NO
REPEATED
SUBUNITS
PDB
CHAINS
CAN
BE
DISPLAYED
AS
LOW
RESOLUTION
SURFACES
OR
IN
ANY
OF
THE
STANDARD
MOLECULAR
REPRESENTATIONS
AVAILABLE
IN
CHIMERA
MULTI
SCALE
PERMITS
BIOLOGICALLY
MEANINGFUL
LEVELS
OF
QUATERNARY
STRUC
TURE
TO
BE
DEFINED
THE
ABILITIES
TO
BUILD
MULTIMERIC
FORMS
DISPLAY
LOW
RESOLUTION
REPRESENTATIONS
AND
DEFINE
LEVELS
OF
STRUCTURE
ARE
IMPORTANT
FOR
INTERACTIVELY
EXPLORING
LARGE
COMPLEXES
MULTISCALE
USES
CHIMERA
CORE
MOLECULAR
DISPLAY
ABILITIES
DATA
STRUCTURES
FILE
READING
AND
SELECTION
MANAGEMENT
AND
THE
VOLUME
VIEWER
EXTENSION
FOR
SURFACE
CALCULATION
AND
RENDERING
THIS
READY
TO
USE
INFRASTRUCTURE
ALLOWED
US
TO
FOCUS
ON
THE
NEW
CAPA
BILITIES
NEEDED
FOR
DISPLAYING
COMPLEXES
MOST
OF
THE
AVAILABLE
ATOMIC
RESOLUTION
VIRAL
STRUCTURES
ARE
ICOSAHEDRAL
PARTICLES
WITH
FOLD
SYMMETRY
PDB
FILES
PROVIDE
ATOMIC
COORDINATES
FOR
ONLY
ONE
SUBUNIT
TO
BUILD
A
MULTIMERIC
MODEL
SUBUNITS
ARE
POSITIONED
USING
ROTATION
TRANSLATION
MATRICES
READ
FROM
THE
PDB
FILE
HEADER
PDB
REMARK
RECORDS
GIVE
MATRICES
THAT
CAN
BE
USED
TO
GENERATE
THE
BIOLOGICAL
OLIGOMERIZA
TION
STATE
CRYSTALLOGRAPHIC
SMTRY
RECORDS
AND
NONCRYSTALLO
GRAPHIC
SYMMETRY
MTRIX
RECORDS
MATRICES
OR
MATRICES
INFERRED
FROM
THE
SPACE
GROUP
RECORD
OF
CRYSTAL
STRUCTURES
CAN
ALSO
BE
USED
MULTISCALE
VISUALIZATION
CAPABILITIES
HAVE
REVEALED
SHORTCOMINGS
IN
THE
MATRIX
INFORMATION
FOR
MANY
LARGE
SCALE
STRUC
TURE
ENTRIES
THAT
OTHERWISE
WOULD
HAVE
BEEN
DIFFICULT
TO
DETECT
WE
ARE
WORKING
WITH
THE
PDB
TO
FIND
AND
CORRECT
THESE
ENTRIES
FOR
EFFICIENCY
THE
MULTISCALE
EXTENSION
ONLY
LOADS
ATOMIC
COORDINATES
FOR
SUBUNITS
WHEN
THEY
ARE
NEEDED
WHEN
A
MODEL
IS
FIRST
DISPLAYED
ONLY
A
LOW
RESOLUTION
SURFACE
REPRESENTATION
IS
SHOWN
SO
NO
ADDITIONAL
COPIES
OF
THE
COORDINATES
NEED
TO
BE
LOADED
CHIMERA
ATOMIC
AND
RESIDUE
LEVEL
DISPLAY
STYLES
ARE
ALSO
AVAILABLE
BUT
ARE
TYPICALLY
USED
FOR
ONLY
A
SMALL
NUMBER
OF
SUBUNITS
SO
THAT
THE
AMOUNT
OF
DETAIL
DEPICTED
DOES
NOT
OVERWHELM
THE
USER
THE
MULTISCALE
EXTENSION
DOES
NOT
USE
THE
HIGH
RESOLUTION
MOLECULAR
SURFACES
THAT
ARE
A
CORE
FEATURE
OF
CHIMERA
SUCH
SUR
FACES
WOULD
RENDER
TOO
SLOWLY
FOR
A
LARGE
MULTIMER
AND
PROVIDE
TOO
HIGH
A
LEVEL
OF
DETAIL
TO
BEST
ILLUSTRATE
THE
ORGANIZATION
OF
SUBUNITS
THE
MULTISCALE
EXTENSION
WAS
ORIGINALLY
WRITTEN
ENTIRELY
IN
PYTHON
TO
SPEED
UP
THE
SURFACE
CALCULATION
CERTAIN
CRITICAL
ROU
TINES
WERE
REWRITTEN
IN
C
CONVERTING
THESE
ROUTINES
FROM
INTERPRETED
PYTHON
TO
COMPILED
C
MADE
THEM
RUN
ABOUT
TIMES
FASTER
TRANSLATION
IS
GENERALLY
STRAIGHTFORWARD
BECAUSE
PY
THON
OBJECTS
SUCH
AS
MOLECULES
ATOMS
AND
LISTS
HAVE
EQUIVALENT
C
OBJECTS
RENDERING
THE
SURFACE
WITH
OPENGL
ANOTHER
TIME
CRITICAL
STEP
USES
THE
C
MODULE
IN
THE
VOLUME
VIEWER
EXTENSION
SUBUNITS
CAN
BE
SELECTED
WITH
THE
MOUSE
TO
SIMPLIFY
SELECTING
LARGER
PIECES
OF
A
STRUCTURE
NEW
STRUCTURE
LEVELS
CAN
BE
DEFINED
HIERARCHICALLY
FOR
EXAMPLE
THE
BLUETONGUE
VIRUS
CORE
HAS
TWO
PROTEIN
LAYERS
THE
OUTER
LAYER
BEING
COMPOSED
OF
TRIMERS
FIG
FOR
THIS
STRUCTURE
IT
IS
USEFUL
TO
DEFINE
INNER
AND
OUTER
LAYERS
AND
TRIMERS
AS
STRUCTURAL
LEVELS
AFTER
AN
INDIVIDUAL
OUTER
LAYER
MONOMER
IS
SELECTED
THE
SELECTION
CAN
THEN
BE
PRO
MOTED
TO
THE
CONTAINING
TRIMER
AND
SUBSEQUENTLY
PROMOTED
TO
THE
WHOLE
LAYER
OF
TRIMERS
THE
WHOLE
OUTER
LAYER
CAN
THEN
BE
HIDDEN
IF
THE
OBJECT
OF
INTEREST
IS
THE
INNER
PROTEIN
LAYER
BESIDES
BEING
PROMOTED
A
SELECTION
CAN
BE
EXTENDED
TO
ALL
IDENTICAL
COPIES
OF
THE
CURRENTLY
SELECTED
SUBUNITS
IT
IS
ALSO
POSSIBLE
TO
SELECT
JUST
THE
SUBUNITS
FOR
WHICH
ATOMIC
INFORMATION
HAS
BEEN
LOADED
STRUCTURE
LEVELS
CAN
BE
SPECIFIED
IN
A
PYTHON
SCRIPT
STRUCTURAL
HIERARCHIES
ARE
SOMETIMES
DESCRIBED
IN
TEXT
IN
THE
HEADERS
OF
PDB
FILES
THE
MMCIF
FILE
FORMAT
AVAILABLE
FROM
THE
HAS
A
LIMITED
ABILITY
TO
DESCRIBE
SUCH
HIGHER
LEVELS
OF
STRUCTURE
IN
A
COMPUTER
READABLE
FORM
BUT
FEW
SUBMITTED
DATA
SETS
PROVIDE
THIS
INFORMA
TION
FOR
MULTIMERIC
STRUCTURES
INVESTIGATIONS
ARE
OFTEN
FACILITATED
BY
THE
PRESENCE
OF
MORE
THAN
ONE
COPY
OF
THE
ASYMMETRIC
UNIT
THE
BLUETONGUE
VIRUS
ILLUSTRATES
HOW
WORKING
WITH
THE
FULL
VIRAL
SHELL
CAN
AID
ANALYSIS
THE
CRYSTALLOGRAPHIC
DATA
USED
TO
DETERMINE
THE
CAPSID
STRUCTURE
REVEALED
VIRAL
DOUBLE
STRANDED
RNA
STUCK
TO
THE
OUTSIDE
OF
THE
FIG
TO
INVESTIGATE
THE
SPECIFIC
ATOMIC
CONTACTS
BETWEEN
THE
RNA
AND
VIRUS
IT
IS
HELPFUL
TO
LOCATE
THE
SEVERAL
SUBUNITS
OF
THE
ICOSAHEDRAL
PARTICLE
ADJACENT
TO
THE
RNA
BY
INSPECTING
THE
FULL
PARTICLE
THESE
CAN
THEN
BE
EXAM
INED
USING
AN
ALL
ATOM
DISPLAY
TO
DETERMINE
THE
CONTACTS
ACCOUNT
ING
FOR
THE
STICKINESS
OF
THE
CAPSID
THE
MULTISCALE
EXTENSION
IS
INTENDED
FOR
PROBLEMS
WHERE
BOTH
LARGE
SCALE
AND
ATOMIC
SCALE
DETAILS
ARE
RELEVANT
THE
TOOLS
NEEDED
TO
EXPLORE
MODELS
WITH
MANY
LEVELS
OF
STRUCTURE
AND
LARGE
NUMBERS
OF
ATOMS
ARE
NECESSARILY
COMPLEX
THE
CHIMERA
MULTISCALE
EXTEN
SION
HAS
ADDRESSED
ONLY
THE
MOST
IMMEDIATE
NEEDS
WE
ANTICIPATE
INCREASING
ITS
CAPABILITIES
SIGNIFICANTLY
IN
FUTURE
RELEASES
MULTALIGN
VIEWER
THE
MULTALIGN
VIEWER
EXTENSION
ALLOWS
CHIMERA
TO
DISPLAY
SE
QUENCE
ALIGNMENTS
TOGETHER
WITH
ASSOCIATED
STRUCTURES
FIG
PETTERSEN
ET
AL
VOL
NO
JOURNAL
OF
COMPUTATIONAL
CHEMISTRY
FIGURE
THREE
STRUCTURES
IN
CHIMERA
ASSOCIATED
WITH
SEQUENCES
IN
AN
ALIGNMENT
SHOWN
BY
MULTALIGN
VIEWER
THE
SEQUENCES
WITH
COLOR
SWATCHES
BEHIND
THEIR
NAMES
ARE
ASSOCIATED
WITH
THE
PECTATE
LYASE
STRUC
TURES
AND
SHOWN
IN
YELLOW
MAGENTA
AND
CYAN
RESPECTIVELY
THE
STRUCTURES
WERE
SUPERIMPOSED
USING
THE
SEQUENCE
ALIGN
MENT
THE
FITS
WERE
REFINED
BY
ITERATIVELY
REMOVING
BAD
RESIDUE
PAIRINGS
THE
SEQUENCES
ARE
COLORED
BY
SECONDARY
STRUCTURE
STRAND
AND
HELIX
REGIONS
ARE
PINK
AND
GOLD
RESPECTIVELY
AND
SELECTED
STRUCTURE
REGIONS
ARE
GREEN
INDICATED
ON
THE
STRUCTURES
WITH
A
GREEN
OUTLINE
CHIMERA
ZONE
SELECTION
METHOD
WAS
USED
TO
SELECT
ALL
RESIDUES
WITHIN
Å
OF
THE
ACTIVE
SITE
METAL
ION
IN
ONE
OF
THE
STRUCTURES
ONCE
ASSOCIATIONS
HAVE
BEEN
SET
UP
MANY
USEFUL
FEATURES
BECOME
ACTIVE
POSITIONING
THE
MOUSE
OVER
A
SEQUENCE
CHARACTER
SHOWS
THE
NUMBER
OF
THE
CORRESPONDING
RESIDUE
IN
THE
STRUCTURE
IN
A
STATUS
AREA
MAKING
SELECTIONS
ON
THE
STRUCTURES
HIGHLIGHTS
THE
CORRESPONDING
REGIONS
OF
THE
SEQUENCE
ALIGNMENT
DRAGGING
BOXES
ON
THE
SEQUENCE
ALIGNMENT
SELECTS
AND
HIGHLIGHTS
THE
CORRESPOND
ING
STRUCTURE
REGIONS
STRUCTURE
REGIONS
CAN
BE
SELECTED
BASED
ON
CONSERVATION
IN
THE
ALIGNMENT
GREATLY
FACILITATING
COLORING
BY
CONSERVATION
LEVEL
OR
SHOWING
ONLY
CONSERVED
SIDE
CHAINS
SEC
ONDARY
STRUCTURE
ELEMENTS
CAN
BE
DEPICTED
ON
THE
ALIGNMENT
WITH
COLORED
BOXES
CLICKING
ON
RESIDUES
IN
THE
SEQUENCE
MAKES
THE
CHIMERA
WINDOW
ZOOM
IN
ON
THE
CORRESPONDING
STRUCTURE
RESIDUES
STRUCTURES
CAN
BE
SUPERIMPOSED
USING
THE
SEQUENCE
ALIGNMENT
OPTIONALLY
USING
ONLY
HIGHLY
CONSERVED
RESIDUES
AND
ALSO
OPTION
ALLY
ITERATIVELY
REFINING
THE
FIT
BY
PRUNING
POORLY
SUPERIMPOSED
RESIDUES
AN
ALIGNMENT
CAN
BE
SEARCHED
WITH
A
LITERAL
STRING
OR
A
PROS
PATTERN
MATCHES
ARE
HIGHLIGHTED
ON
THE
ALIGNMENT
AND
CAN
ALSO
BE
HIGHLIGHTED
ON
ASSOCIATED
STRUCTURES
OTHER
EXTENSIONS
CAN
CALL
MULTALIGN
VIEWER
TO
SHOW
ALIGN
MENTS
FOR
EXAMPLE
THE
SSD
STRUCTURE
SUPERPOSITION
DATABASE
EXTENSION
USES
MULTALIGN
VIEWER
TO
SHOW
SEQUENCE
ALIGNMENTS
CORRESPONDING
TO
STRUCTURAL
ALIGNMENTS
OF
INTEREST
MULTALIGN
VIEWER
IS
UNDER
ACTIVE
DEVELOPMENT
IMPORTANT
SHORT
TERM
GOALS
ARE
TO
PROVIDE
MORE
SOPHISTICATED
EDITING
FACILITIES
AND
TO
DISPLAY
AND
INTERACT
WITH
PHYLOGENETIC
INFORMATION
VIEWDOCK
MULTALIGN
VIEWER
CAN
READ
AND
WRITE
SEQUENCE
ALIGNMENTS
IN
A
WIDE
VARIETY
OF
POPULAR
FORMATS
CURRENTLY
ALN
ALIGNED
FASTA
GCG
MSF
GCG
RSF
ALIGNED
NBRF
PIR
AND
STOCKHOLM
MULTALIGN
VIEWER
FACILITATES
ANALYSIS
OF
ALIGNMENTS
IN
THE
CON
TEXT
OF
STRUCTURAL
INFORMATION
AND
VICE
VERSA
FIRST
STRUCTURES
IN
CHIMERA
MUST
BE
ASSOCIATED
WITH
THEIR
CORRESPONDING
SEQUENCES
IN
AN
ALIGNMENT
WHEN
MULTALIGN
VIEWER
OPENS
AN
ALIGNMENT
IT
EXAMINES
THE
STRUCTURES
CURRENTLY
OPEN
IN
CHIMERA
AND
CHECKS
EACH
CHAIN
FOR
HIGH
SEQUENCE
IDENTITY
WITH
AN
ALIGNMENT
SEQUENCE
CHAINS
WITH
HIGH
IDENTITY
ARE
ASSOCIATED
WITH
THE
BEST
MATCHING
SEQUENCE
HOWEVER
ONLY
ONE
CHAIN
PER
STRUCTURE
IS
ASSOCIATED
WITH
A
SEQUENCE
MULTALIGN
VIEWER
REGISTERS
WITH
THE
CHIMERA
CORE
MODEL
OPENED
TRIGGER
SO
THAT
AS
NEW
STRUCTURES
ARE
OPENED
THEY
WILL
ALSO
BE
EXAMINED
AND
ASSOCIATED
IF
APPROPRIATE
CONVERSELY
IF
THE
ALIGNMENT
SEQUENCE
NAMES
ARE
RECOGNIZABLE
AS
INCLUDING
OR
IDENTIFIERS
USING
A
FEW
SIMPLE
CRITERIA
THE
RESEARCHER
CAN
USE
A
MULTALIGN
VIEWER
MENU
ITEM
OR
PREFERENCE
SETTING
TO
LOAD
ALL
OF
THE
CORRESPONDING
STRUCTURES
INTO
CHIMERA
THIS
WAS
EASY
TO
IMPLEMENT
BECAUSE
THE
CHIMERA
CORE
OFFERS
FUNCTIONS
FOR
OPENING
PDB
SCOP
FILES
BASED
ON
THEIR
IDENTIFIERS
AND
WILL
RETRIEVE
THEM
VIA
THE
WORLD
WIDE
WEB
OR
LOCAL
DISK
AS
APPROPRIATE
IF
MULTALIGN
VIEWER
FAILS
TO
MAKE
AN
APPROPRIATE
AUTOMATIC
ASSOCIATION
BETWEEN
A
SEQUENCE
AND
STRUCTURE
IT
CAN
BE
MANUALLY
DIRECTED
TO
MAKE
THE
ASSOCIATION
ASSOCIATIONS
ARE
INDICOMPUTER
GRAPHIC
CATED
BY
SHOWING
THE
COLOR
OF
THE
ASSOCIATED
MODEL
BEHIND
THE
NAME
OF
THE
SEQUENCE
FIG
THE
VIEWDOCK
EXTENSION
FACILITATES
INTERACTIVE
SCREENING
OF
LIGAND
ORIENTATIONS
FROM
DOCK
DOCK
CALCULATES
POSSIBLE
BINDING
ORIENTATIONS
GIVEN
THE
STRUCTURES
OF
LIGAND
AND
RECEPTOR
MOLECULES
OFTEN
A
LARGE
DATABASE
OF
COMPOUNDS
IS
SEARCHED
AGAINST
A
TARGET
PROTEIN
WHERE
EACH
COMPOUND
IS
TREATED
AS
A
LIGAND
AND
THE
TARGET
IS
TREATED
AS
THE
RECEPTOR
SIMPLE
SCORING
METHODS
ARE
USED
TO
IDENTIFY
THE
MOST
FAVORABLE
BINDING
MODES
OF
A
GIVEN
MOLECULE
AND
THEN
TO
RANK
THE
MOLECULES
THE
OUTPUT
CONSISTS
OF
A
LARGE
NUMBER
OF
CANDIDATE
LIGANDS
IN
THE
BINDING
ORIENTATIONS
CONSIDERED
MOST
FAVORABLE
BY
DOCK
FIGURE
THE
VIEWDOCK
INTERFACE
LISTS
DOCKED
MOLECULES
CLICKING
ON
A
LINE
DISPLAYS
JUST
THE
CORRESPONDING
MOLECULE
AND
SHOWS
ITS
INFORMATION
IN
THE
LOWER
PART
OF
THE
PANEL
RIBOSE
MONOPHOSPHATE
IS
SHOWN
DOCKED
TO
H
RAS
CARBON
ATOMS
ARE
LIGHT
GRAY
OXYGEN
ATOMS
ARE
RED
NITROGEN
ATOMS
ARE
BLUE
AND
PHOSPHORUS
ATOMS
ARE
CYAN
HYDROGENS
ARE
NOT
SHOWN
POTENTIAL
HYDROGEN
BONDS
ARE
INDI
CATED
WITH
YELLOW
LINES
VIEWDOCK
READS
THE
DOCK
OUTPUT
AND
PROVIDES
A
CONVENIENT
INTERFACE
FOR
FILTERING
RESULTS
IN
THE
CONTEXT
OF
THE
TARGET
STRUCTURE
WHEN
A
LINE
IN
THE
LIST
OF
COMPOUNDS
IS
CLICKED
JUST
THE
CORRE
SPONDING
MOLECULE
IS
SHOWN
IN
THE
PUTATIVE
BINDING
SITE
AND
ITS
INFORMATION
IS
SHOWN
IN
THE
LOWER
PART
OF
THE
PANEL
FIG
THE
INFORMATION
MAY
INCLUDE
COMPOUND
NAME
DESCRIPTION
AND
VARIOUS
SCORES
AND
SCORE
COMPONENTS
ANY
OF
THE
DESCRIPTORS
CAN
BE
SHOWN
IN
THE
LIST
AND
OR
USED
TO
SORT
IT
IT
IS
ALSO
POSSIBLE
TO
VIEW
MORE
THAN
ONE
DOCKED
MOLECULE
AT
A
TIME
COMPOUNDS
CAN
BE
DELETED
FROM
THE
LIST
IF
VISUAL
INSPECTION
REVEALS
THEM
TO
BE
UNSUITABLE
COMPOUNDS
CAN
ALSO
BE
SCREENED
BY
THE
NUMBER
OF
HYDROGEN
BONDS
FORMED
WITH
THE
TARGET
STRUCTURE
AND
BY
WHETHER
OR
NOT
THE
HYDROGEN
BONDS
INVOLVE
SPECIFIED
GROUPS
IN
THE
SITE
HYDROGEN
BOND
DETECTION
USES
A
SET
OF
DETAILED
DISTANCE
AND
ANGLE
CRITERIA
FROM
A
PUBLISHED
SMALL
MOLECULE
CRYSTAL
SUR
AND
IS
AN
EXTENSION
PROVIDED
CAPABILITY
OF
CHIMERA
MOVIE
THE
MOVIE
EXTENSION
ALLOWS
CHIMERA
TO
SHOW
MOLECULAR
DYNAMICS
TRAJECTORIES
THE
TRAJECTORIES
MAY
BE
PLAYED
FORWARD
OR
BACKWARD
EITHER
A
SINGLE
FRAME
AT
A
TIME
OR
CONTINUOUSLY
ALL
GENERIC
CHI
MERA
CAPABILITIES
SUCH
AS
COLORING
HYDROGEN
BOND
DETECTION
LENSES
FIG
AND
SAVING
PDB
FILES
ARE
AVAILABLE
FOR
USE
WITH
THE
TRAJECTORY
MOVIE
EXPLICITLY
SUPPORTS
EXECUTION
OF
A
SCRIPT
PYTHON
OR
CHIMERA
COMMANDS
AT
EACH
FRAME
THIS
MAKES
IT
EASY
FOR
EXAMPLE
TO
SAVE
IMAGES
FOR
LATER
ASSEMBLY
INTO
A
QUICKTIME
OR
MPEG
VIDEO
MOVIE
CURRENTLY
SUPPORTS
ALL
VERSIONS
OF
TRAJECTORY
FILES
AND
SUPPORT
FOR
AND
FORMATS
IS
IN
PROGRESS
VOLUME
VIEWER
THE
VOLUME
VIEWER
EXTENSION
DISPLAYS
THREE
DIMENSIONAL
GRID
DATA
SUCH
AS
DENSITY
MAPS
FROM
ELECTRON
MICROSCOPE
RECON
STRUCTIONS
OR
X
RAY
CRYSTALLOGRAPHY
CALCULATED
ELECTROSTATIC
POTEN
TIAL
AND
SOLVENT
OCCUPANCY
FROM
MOLECULAR
DYNAMICS
SIMULATIONS
IT
READS
SEVERAL
FILE
FORMATS
OR
MRC
BRIX
OR
OR
XPLOR
SPIDER
OR
POTENTIAL
MAPS
PRIISM
NETCDF
AND
SCORING
GRIDS
DIS
PLAYS
ISOSURFACES
MESHES
AND
TRANSLUCENT
SOLIDS
AND
ALLOWS
IN
TERACTIVE
ADJUSTMENT
OF
THRESHOLDS
TRANSPARENCY
AND
BRIGHTNESS
VOLUME
DATA
IS
OFTEN
DISPLAYED
WITH
RELATED
MOLECULAR
MODELS
THE
DISPLAY
IS
AUTOMATICALLY
UPDATED
WHEN
SETTINGS
ARE
CHANGED
FOR
EXAMPLE
DRAGGING
A
THRESHOLD
INDICATOR
SHOWN
ON
A
HISTOGRAM
OF
DATA
VALUES
UPDATES
THE
DISPLAYED
SURFACE
OR
MESH
FOR
LARGE
DATA
SETS
SUBSAMPLING
CAN
BE
USED
TO
IMPROVE
THE
RESPONSE
TIME
WHEN
THE
DISPLAY
IS
ROTATED
OR
A
THRESHOLD
IS
CHANGED
SUBSAMPLING
WITH
STEP
SIZE
RENDERS
THE
DATA
AFTER
OMITTING
EVERY
OTHER
DATA
PLANE
ALONG
EACH
AXIS
DATA
SETS
OF
BY
BY
VALUES
CAN
BE
DISPLAYED
WITH
A
NEW
THRESHOLD
ONCE
A
SECOND
OR
ROTATED
AT
FRAMES
PER
SECOND
ON
GENERIC
DESKTOP
PC
HARDWARE
EQUIPPED
WITH
A
MID
RANGE
GRAPHICS
ADAPTER
A
SUBREGION
OF
THE
DATA
CAN
BE
CHOSEN
BY
DRAGGING
A
BOX
WITH
THE
MOUSE
AND
THEN
SHOWN
INSTEAD
OF
THE
WHOLE
DATA
SET
SUBREGIONS
CAN
BE
NAMED
SO
THAT
IT
IS
EASY
TO
RETURN
TO
THEM
IN
LATER
SESSIONS
THE
VOLUME
PATH
TRACER
EXTENSION
ALLOWS
MARKER
PLACEMENT
AND
PATH
TRACING
IN
GRID
DATA
MARKERS
ARE
PLACED
BY
MOUSE
CLICK
THE
MARKER
IS
POSITIONED
ON
THE
CLOSEST
VISIBLE
DATA
MAXIMUM
ALONG
THE
LINE
OF
SIGHT
UNDER
THE
CURSOR
MARKERS
CAN
BE
MOVED
AFTER
THEY
ARE
PLACED
CONSECUTIVELY
PLACED
MARKERS
CAN
BE
LINKED
WITH
SEGMENTS
TO
TRACE
A
PATH
ADDITIONAL
CONNECTIONS
CAN
BE
ADDED
WITH
THE
MOUSE
TO
BUILD
SIMPLE
STRUCTURAL
MODELS
VOLUME
PATH
TRACER
WAS
DEVELOPED
TO
TRACE
PROTEIN
BACKBONES
IN
INTERMEDIATE
RESOLU
TION
Å
DENSITY
MAPS
FROM
ELECTRON
CRYO
MICROSCOPY
FIG
AND
FLUORESCENTLY
LABELED
CHROMOSOMES
IN
MULTIWAVELENGTH
LIGHT
MICROSCOPY
DATA
FIG
MARKERS
AND
ASSOCIATED
CONNECTING
SEGMENTS
ARE
IMPLEMENTED
USING
THE
SAME
MECHANISM
AS
ATOMS
AND
BONDS
THUS
DISPLAY
STYLES
AND
COLORS
CAN
BE
CHANGED
IN
THE
SAME
WAY
AS
FOR
ATOMS
AND
BONDS
DISTANCES
BETWEEN
PAIRS
OF
MARKERS
AND
BETWEEN
MARKERS
AND
MOLECULAR
STRUCTURES
CAN
BE
MEASURED
AND
TRACED
STRUCTURES
CAN
BE
ALIGNED
USING
CHIMERA
MOLECULE
MANIPULATION
CAPABILI
TIES
TRACED
PATHS
CAN
BE
DISPLAYED
AS
SMOOTHLY
INTERPOLATED
CURVES
FIG
MARKERS
AND
CONNECTING
SEGMENTS
CAN
BE
SAVED
IN
AN
FILE
FOR
ANALYSIS
BY
OTHER
SOFTWARE
COLLABORATORY
CHIMERA
COLLABORATORY
EXTENSION
ENABLES
RESEARCHERS
AT
GEO
GRAPHICALLY
DISTANT
LOCATIONS
TO
SHARE
A
MOLECULAR
MODELING
SESSION
IN
REAL
TIME
BY
DEFAULT
ALL
USERS
CONNECTED
TO
THE
SAME
SESSION
HAVE
EQUAL
CONTROL
OVER
THE
MODELS
STRUCTURES
BEING
VIEWED
A
CHANGE
MADE
BY
ANY
PARTICIPANT
IS
IMMEDIATELY
PROPAGATED
TO
ALL
OTHER
PARTICIPANTS
SO
THAT
A
SYNCHRONIZED
VIEW
OF
THE
DATA
IS
MAINTAINED
THROUGHOUT
A
SESSION
BECAUSE
OF
THE
COMPLEX
NATURE
OF
MOLECULAR
MODELS
INTER
ACTIVE
EXAMINATION
OF
MODELS
IN
A
REAL
TIME
COLLABORATIVE
ENVIRON
MENT
IS
FAR
MORE
EFFECTIVE
THAN
TRADITIONAL
ASYNCHRONOUS
FORMS
OF
COMMUNICATION
SUCH
AS
PASSING
MOLECULAR
DATA
BACK
AND
FORTH
THROUGH
E
MAIL
A
CRUCIAL
ELEMENT
OF
REAL
TIME
COLLABORATION
SOFT
WARE
IS
THE
EFFICIENT
TRANSFER
OF
INFORMATION
NOT
ONLY
MUST
THE
SOFTWARE
ENSURE
THAT
INFORMATION
IS
TRANSMITTED
RAPIDLY
IT
MUST
ALSO
CONSIDER
THE
AVAILABILITY
OF
NETWORK
RESOURCES
SUCH
AS
BANDWIDTH
AND
TRANSMIT
INFORMATION
IN
AN
EFFICIENT
FORMAT
SO
THAT
THE
APPLI
CATION
CAN
RUN
IN
PARALLEL
WITH
OTHER
BANDWIDTH
HEAVY
APPLICATIONS
SUCH
AS
VIDEOCONFERENCING
SOFTWARE
GIVEN
THESE
CONSIDERATIONS
APPLICATION
INDEPENDENT
COLLABORATION
TOOLS
ARE
NOT
AS
RESPONSIVE
FOR
SHARING
MOLECULAR
MODELING
SESSIONS
SUCH
DESKTOP
SHARING
APPLICATIONS
E
G
MICROSOFT
NETMEETING
AND
VIRTUAL
NETWORK
FUNCTION
BY
TRANSMITTING
THE
CONTENTS
OF
THE
SCREEN
FROM
THE
WORKSTATION
RUNNING
THE
APPLICATION
TO
ALL
WHO
ARE
SHARING
IT
THIS
CAN
BE
BANDWIDTH
INTENSIVE
ESPECIALLY
FOR
MOLECULAR
GRAPHICS
WHERE
MOST
OPERATIONS
ALTER
A
LARGE
AMOUNT
OF
SCREEN
CONTENT
INSTEAD
THE
COLLABORATORY
WORKS
ON
A
LOWER
LEVEL
BY
TRANSMITTING
SMALL
MESSAGES
DESCRIBING
JUST
THE
DATA
THAT
HAS
BEEN
MODIFIED
THE
COLLABORATORY
UTILIZES
A
STAR
ARCHITECTURE
WITH
A
CENTRAL
HUB
CONNECTED
TO
MULTIPLE
NODES
EACH
NODE
IS
A
USER
RUNNING
CHIMERA
WHILE
THE
HUB
IS
A
SEPARATELY
RUNNING
APPLICATION
THAT
ACTS
AS
A
RENDEZVOUS
POINT
BETWEEN
THE
NODES
PARTICIPANTS
INSTANCES
OF
CHIMERA
ARE
NOTIFIED
WHEN
A
MODEL
HAS
BEEN
OPENED
CLOSED
OR
MODIFIED
A
DATA
FILE
NEED
ONLY
BE
PRESENT
ON
THE
SYSTEM
OF
THE
PARTICIPANT
WHO
OPENS
THE
FILE
IN
CHIMERA
PARAMETERS
MONITORED
PETTERSEN
ET
AL
VOL
NO
JOURNAL
OF
COMPUTATIONAL
CHEMISTRY
FIGURE
DENSITY
MAP
FOR
RICE
DWARF
VIRUS
CAPSID
PROTEIN
SHOWN
AS
A
MESH
LEFT
THE
MAP
WAS
OBTAINED
BY
ELECTRON
CRYO
MICROSCOPY
AND
HAS
Å
RESOLUTION
COMPUTATIONALLY
IDENTIFIED
ALPHA
HELICES
ARE
SHOWN
AS
AND
THE
CONNECTING
TURNS
HAVE
BEEN
HAND
TRACED
USING
CHIMERA
VOLUME
PATH
TRACER
ON
THE
RIGHT
IS
A
CRYSTAL
STRUCTURE
OF
THE
DISTANTLY
RELATED
BLUETONGUE
VIRUS
CAPSID
PROTEIN
FOR
CHANGES
INCLUDE
DISPLAY
COLOR
MOLECULAR
REPRESENTATION
AND
SPATIAL
PROPERTIES
SUCH
AS
POSITION
AND
ORIENTATION
CHANGE
TRACKING
IS
ACCOMPLISHED
USING
THE
CHIMERA
CORE
TRIGGER
MECHANISM
CORBA
COMMON
OBJECT
REQUEST
BROKER
ARCHITECTURE
MES
SAGES
ARE
USED
TO
RELAY
INFORMATION
THEY
ARE
PLATFORM
AND
LAN
GUAGE
INDEPENDENT
ALLOWING
THE
COLLABORATORY
TO
WORK
ON
A
VA
RIETY
OF
SYSTEMS
THE
PERSON
WHO
STARTS
THE
HUB
ACTS
AS
THE
SESSION
ADMINISTRATOR
THE
ADMINISTRATOR
CAN
SPECIFY
A
PASSWORD
THAT
OTHERS
MUST
SUPPLY
TO
JOIN
THE
SESSION
THE
ADMINISTRATOR
CAN
ALSO
OBTAIN
INFORMATION
ABOUT
CURRENT
PARTICIPANTS
SUCH
AS
USERNAME
AND
TOTAL
TIME
CON
NECTED
CLOSE
THE
SESSION
TO
NEW
PARTICIPANTS
AND
CONTROL
WHETHER
EACH
USER
CAN
AFFECT
THE
STATE
OF
THE
SESSION
PARTICIPANTS
CAN
JOIN
THE
SESSION
AT
ANY
TIME
WHEN
THEY
SIGN
IN
THEIR
LOCAL
INSTANCES
OF
CHIMERA
WILL
BE
UPDATED
TO
REFLECT
THE
GLOBAL
STATE
OF
THE
SESSION
PARTICIPANTS
CAN
LEAVE
THE
COLLABORATIVE
SESSION
AT
ANY
TIME
AND
CONTINUE
THEIR
MODELING
SESSIONS
IN
AN
ISOLATED
SETTING
SEVERAL
FEATURES
FACILITATE
REMOTE
COLLABORATION
A
PARTICIPANT
CAN
DISPLAY
THE
POSITION
OF
HIS
POINTER
ON
COLLABORATORS
SCREENS
TO
DRAW
ATTENTION
TO
A
REGION
OF
INTEREST
ALTHOUGH
USERS
ARE
EXPECTED
TO
COMMUNICATE
PRIMARILY
BY
TELEPHONE
OR
AN
INDEPENDENT
VIDEO
CONFERENCING
APPLICATION
THE
COLLABORATORY
PROVIDES
A
CHAT
MECHANISM
FOR
PASSING
TEXT
MESSAGES
THIS
CAN
BE
ESPECIALLY
USEFUL
FOR
TRANSFERRING
URLS
OR
SEQUENCE
INFORMATION
USERS
CAN
ALSO
VIEW
OTHER
PARTICIPANTS
COMMANDS
AS
THEY
ARE
ENTERED
AND
SEE
WHO
IS
ACTIVELY
MANIPULATING
THE
MODELS
THE
STAR
ARCHITECTURE
SCALES
WELL
BECAUSE
EACH
NODE
HAS
KNOWL
EDGE
OF
ONLY
THE
HUB
NOT
OTHER
NODES
THE
COLLABORATORY
HAS
BEEN
USED
PRODUCTIVELY
WITH
THREE
PARTICIPANTS
IN
A
SESSION
AND
IN
A
TEST
SITUATION
HAS
BEEN
ABLE
TO
ACCOMMODATE
UP
TO
USERS
IN
PRACTICE
HUMAN
FACTORS
TEND
TO
LIMIT
THE
SIZE
OF
A
USEFUL
COLLABORATION
INTERPERSONAL
COMMUNICATION
CAN
BE
DIFFICULT
WHEN
SUBTLE
VISUAL
CUES
SUCH
AS
BODY
LANGUAGE
AND
EYE
CONTACT
ARE
MISSING
AS
IS
OFTEN
THE
CASE
WITH
VIDEOCONFERENCING
HOWEVER
WHEN
USED
IN
A
SENSI
BLE
COLLABORATIVE
SETTING
I
E
EFFICIENT
VOICE
VIDEO
TRANSMISSION
A
REASONABLE
NUMBER
OF
PARTICIPANTS
THE
CHIMERA
COLLABORATORY
AND
ITS
RICH
SET
OF
FEATURES
HELP
TO
ALLEVIATE
THESE
ISSUES
RESULTS
CHIMERA
IS
FREELY
AVAILABLE
TO
ACADEMIC
AND
NONPROFIT
RESEARCH
ERS
FROM
HTTP
WWW
CGL
UCSF
EDU
CHIMERA
AND
CAN
BE
LICENSED
BY
COMMERCIAL
INSTITUTIONS
FOR
A
FEE
EXTENSIONS
TO
CHIMERA
DEVELOPED
BY
OUTSIDE
RESEARCHERS
CAN
BE
REDISTRIBUTED
FREELY
SINCE
CHIMERA
FIRST
PUBLIC
RELEASE
IN
MARCH
DOWNLOADS
OF
CHIMERA
HAVE
STEADILY
INCREASED
AMOUNTING
TO
APPROXI
MATELY
PER
MONTH
AT
THIS
WRITING
AND
TOTALING
MORE
THAN
MULTIPLE
DOWNLOADS
TO
THE
SAME
IP
ADDRESS
FOR
THE
SAME
OS
PLATFORM
IN
A
SINGLE
H
PERIOD
ARE
COUNTED
AS
A
SINGLE
DOWNLOAD
AS
STATED
EARLIER
PORTABILITY
HAS
BEEN
ONE
OF
THE
PRIMARY
DESIGN
GOALS
OF
CHIMERA
OUR
IMPLEMENTATION
BASED
ON
MANY
WIDELY
AVAILABLE
STANDARDS
SUCH
AS
OPENGL
HAS
PROVEN
TO
BE
QUITE
PORTABLE
AND
THERE
ARE
CHIMERA
DISTRIBUTIONS
FOR
MICROSOFT
WIN
FIGURE
FLUORESCENTLY
LABELED
DROSOPHILA
CHROMOSOME
IMAGED
BY
WIDE
FIELD
DECONVOLUTION
MICROSCOPY
M
LOWENSTEIN
AND
J
SEDAT
UCSF
UNPUBLISHED
DATA
THREE
FLUOROPHORES
WERE
USED
TO
LABEL
SPECIFIC
SEGMENTS
OF
CHROMOSOME
TWO
HOMOLOGOUS
COPIES
OF
THE
CHROMOSOME
ARE
SHOWN
THE
CYAN
ISOSURFACE
IS
THE
NUCLEAR
ENVELOPE
THE
INDIVIDUAL
FLUORESCENT
SPOTS
HAVE
BEEN
MARKED
WITH
THE
VOLUME
PATH
TRACER
EXTENSION
AND
PATHS
CONNECTING
THE
MARKERS
ARE
SHOWN
AS
SMOOTH
TUBES
TRACED
STRUCTURES
FROM
MANY
CELLS
CAN
BE
CLUSTERED
TO
STUDY
STRUCTURAL
PATTERNS
OF
CHROMOSOME
ORGANIZATION
IN
THE
NUCLEUS
DOWS
XP
NT
LINUX
APPLE
MAC
OS
X
SGI
IRIX
AND
HP
UNIX
THE
GRAPHICAL
MENU
WINDOW
AND
COMMAND
LINE
INTERFACES
PRO
VIDE
RICH
AND
OVERLAPPING
SETS
OF
FUNCTIONALITY
WHICH
WILL
CONTINUE
TO
GROW
AS
CHIMERA
IS
DEVELOPED
DETAILED
USER
DOCUMENTATION
IS
INCLUDED
WITH
THE
PROGRAM
OUR
GOAL
OF
ENABLING
OTHERS
TO
EXTEND
CHIMERA
HAS
ENJOYED
INCREASING
SUCCESS
AS
THE
USE
OF
CHIMERA
HAS
BECOME
MORE
WIDE
SPREAD
CURRENTLY
EXTENSIONS
WRITTEN
AND
OR
DISTRIBUTED
BY
OTHERS
INCLUDE
SSD
WHICH
EXTENDS
CHIMERA
FOR
USE
WITH
THE
STRUCTURE
SUPERPOSITION
A
WEB
ACCESSIBLE
RESOURCE
VIEWFEA
TURE
WHICH
ALLOWS
CHIMERA
TO
SHOW
RESULTS
FROM
FEATURE
A
PROGRAM
FOR
PREDICTING
METAL
BINDING
OR
ACTIVE
SITES
IN
BIOMOL
ECULES
AND
EMANIMATOR
LUDTKE
BAYLOR
COLLEGE
OF
MEDICINE
UNPUBLISHED
WHICH
MAKES
IT
EASY
TO
CREATE
ANIMATION
SEQUENCES
IN
CHIMERA
AND
SAVE
THEM
AS
MPEG
FILES
IN
ADDITION
CHIMERA
IS
SUPPORTED
AS
A
DISPLAY
APPLICATION
FOR
SEQUENCE
AND
STRUCTURE
INFORMATION
BY
THE
WEB
ACCESSIBLE
DATABASES
AND
THE
STRUCTURE
FUNCTION
LINKAGE
DATABASE
BABBITT
LABORATORY
UCSF
DISCUSSION
CHIMERA
HAS
BEEN
DESIGNED
TO
FACILITATE
THE
ADDITION
OF
NEW
FUNC
TIONALITY
IN
PARTICULAR
NEARLY
ALL
CONCEPTS
FOR
EXAMPLE
ATOMS
BONDS
AND
MOLECULES
ARE
REPRESENTED
AS
PYTHON
OBJECTS
WHICH
MEANS
THEY
CAN
TAKE
ADVANTAGE
OF
THE
OBJECT
ORIENTED
NATURE
OF
PYTHON
THE
DOWNSIDE
OF
MAKING
EVERYTHING
INTO
PYTHON
OBJECTS
IS
A
PERFORMANCE
PENALTY
BOTH
IN
SPEED
AND
IN
MEMORY
USAGE
WE
DECIDED
TO
FAVOR
PROGRAMMABILITY
OVER
PERFORMANCE
WHEREAS
PERFORMANCE
DEFICIENCIES
CAN
BE
ADDRESSED
TRANSPARENTLY
TO
END
USERS
BY
ALGORITHMIC
CHANGES
AND
HARDWARE
IMPROVEMENTS
SUCH
AS
INCREASED
PROCESSOR
SPEED
AND
FASTER
GRAPHICS
ADAPTERS
MODIFICA
TIONS
TO
USER
AND
PROGRAMMING
INTERFACES
ARE
TYPICALLY
MORE
DIS
RUPTIVE
CURRENTLY
ONE
OF
OUR
BIGGEST
CHALLENGES
IS
TO
IMPROVE
PERFOR
MANCE
IN
THE
CONTEXT
OF
THE
LARGE
SCALE
SYSTEMS
FOR
WHICH
THE
MULTISCALE
EXTENSION
WAS
DESIGNED
ALTHOUGH
MANY
STRUCTURES
FROM
CRYSTALLOGRAPHY
AND
NMR
DETERMINATION
ARE
NOT
VERY
LARGE
TENS
OF
THOUSANDS
OF
ATOMS
THE
COMPLEXITY
INCREASES
RAPIDLY
AS
ONE
CONSIDERS
OBJECTS
SUCH
AS
VIRAL
PARTICLES
THE
ORDER
OF
MAGNI
TUDE
INCREASES
IN
SCALE
REQUIRE
BETTER
ALGORITHMS
FOR
SIMPLIFYING
THE
REPRESENTATION
AND
MORE
EFFICIENT
USE
OF
DESKTOP
COMPUTING
RE
SOURCES
IN
THE
ORTHOGONAL
DIRECTION
OF
PROGRAMMABILITY
WE
ARE
INVES
TIGATING
AVENUES
FOR
FACILITATING
INTERACTIONS
BETWEEN
CHIMERA
EX
TENSIONS
IN
OUR
CURRENT
IMPLEMENTATION
EXTENSIONS
MUST
EXPLICITLY
MONITOR
PREDEFINED
TRIGGERS
TO
DETECT
CHANGES
MADE
BY
THE
CHIMERA
CORE
AND
OTHER
EXTENSIONS
THE
CHANGE
DETECTION
GRANULARITY
IS
CURRENTLY
QUITE
COARSE
MEANING
THAT
EXTENSIONS
MAY
NEED
TO
SIFT
THROUGH
A
LARGE
AMOUNT
OF
DATA
TO
DETECT
A
FEW
INTERESTING
DATA
MODIFICATIONS
WE
PLAN
TO
ALTER
THE
LOW
LEVEL
OBJECT
IMPLEMENTA
TION
TO
ADDRESS
THESE
SHORTCOMINGS
ABSTRACT
THIS
PAPER
PRESENTS
A
METHOD
FOR
EXTRACTING
DISTINCTIVE
INVARIANT
FEATURES
FROM
IMAGES
THAT
CAN
BE
USED
TO
PERFORM
RELIABLE
MATCHING
BETWEEN
DIFFERENT
VIEWS
OF
AN
OBJECT
OR
SCENE
THE
FEATURES
ARE
INVARIANT
TO
IMAGE
SCALE
AND
ROTATION
AND
ARE
SHOWN
TO
PROVIDE
ROBUST
MATCHING
ACROSS
A
SUBSTANTIAL
RANGE
OF
AFFINE
DISTORTION
CHANGE
IN
VIEWPOINT
ADDITION
OF
NOISE
AND
CHANGE
IN
ILLUMINATION
THE
FEATURES
ARE
HIGHLY
DISTINCTIVE
IN
THE
SENSE
THAT
A
SINGLE
FEATURE
CAN
BE
CORRECTLY
MATCHED
WITH
HIGH
PROBABILITY
AGAINST
A
LARGE
DATABASE
OF
FEATURES
FROM
MANY
IMAGES
THIS
PAPER
ALSO
DESCRIBES
AN
APPROACH
TO
USING
THESE
FEATURES
FOR
OBJECT
RECOGNITION
THE
RECOGNITION
PROCEEDS
BY
MATCHING
INDIVIDUAL
FEATURES
TO
A
DATABASE
OF
FEATURES
FROM
KNOWN
OBJECTS
USING
A
FAST
NEAREST
NEIGHBOR
ALGORITHM
FOLLOWED
BY
A
HOUGH
TRANSFORM
TO
IDENTIFY
CLUSTERS
BELONGING
TO
A
SINGLE
OBJECT
AND
FINALLY
PERFORMING
VERIFICATION
THROUGH
LEAST
SQUARES
SOLUTION
FOR
CONSISTENT
POSE
PARAMETERS
THIS
APPROACH
TO
RECOGNITION
CAN
ROBUSTLY
IDENTIFY
OBJECTS
AMONG
CLUTTER
AND
OCCLUSION
WHILE
ACHIEVING
NEAR
REAL
TIME
PERFORMANCE
KEYWORDS
INVARIANT
FEATURES
OBJECT
RECOGNITION
SCALE
INVARIANCE
IMAGE
MATCHING
INTRODUCTION
IMAGE
MATCHING
IS
A
FUNDAMENTAL
ASPECT
OF
MANY
PROB
LEMS
IN
COMPUTER
VISION
INCLUDING
OBJECT
OR
SCENE
RECOGNITION
SOLVING
FOR
STRUCTURE
FROM
MULTIPLE
IM
AGES
STEREO
CORRESPONDENCE
AND
MOTION
TRACKING
THIS
PAPER
DESCRIBES
IMAGE
FEATURES
THAT
HAVE
MANY
PROP
ERTIES
THAT
MAKE
THEM
SUITABLE
FOR
MATCHING
DIFFERING
IMAGES
OF
AN
OBJECT
OR
SCENE
THE
FEATURES
ARE
INVARIANT
TO
IMAGE
SCALING
AND
ROTATION
AND
PARTIALLY
INVARIANT
TO
CHANGE
IN
ILLUMINATION
AND
CAMERA
VIEWPOINT
THEY
ARE
WELL
LOCALIZED
IN
BOTH
THE
SPATIAL
AND
FREQUENCY
DO
MAINS
REDUCING
THE
PROBABILITY
OF
DISRUPTION
BY
OCCLU
SION
CLUTTER
OR
NOISE
LARGE
NUMBERS
OF
FEATURES
CAN
BE
EXTRACTED
FROM
TYPICAL
IMAGES
WITH
EFFICIENT
ALGORITHMS
IN
ADDITION
THE
FEATURES
ARE
HIGHLY
DISTINCTIVE
WHICH
ALLOWS
A
SINGLE
FEATURE
TO
BE
CORRECTLY
MATCHED
WITH
HIGH
PROBABILITY
AGAINST
A
LARGE
DATABASE
OF
FEATURES
PROVIDING
A
BASIS
FOR
OBJECT
AND
SCENE
RECOGNITION
THE
COST
OF
EXTRACTING
THESE
FEATURES
IS
MINIMIZED
BY
TAKING
A
CASCADE
FILTERING
APPROACH
IN
WHICH
THE
MORE
EXPENSIVE
OPERATIONS
ARE
APPLIED
ONLY
AT
LOCATIONS
THAT
PASS
AN
INITIAL
TEST
FOLLOWING
ARE
THE
MAJOR
STAGES
OF
COMPUTATION
USED
TO
GENERATE
THE
SET
OF
IMAGE
FEATURES
SCALE
SPACE
EXTREMA
DETECTION
THE
FIRST
STAGE
OF
COMPUTATION
SEARCHES
OVER
ALL
SCALES
AND
IMAGE
LO
CATIONS
IT
IS
IMPLEMENTED
EFFICIENTLY
BY
USING
A
DIFFERENCE
OF
GAUSSIAN
FUNCTION
TO
IDENTIFY
POTEN
TIAL
INTEREST
POINTS
THAT
ARE
INVARIANT
TO
SCALE
AND
ORIENTATION
KEYPOINT
LOCALIZATION
AT
EACH
CANDIDATE
LOCATION
A
DETAILED
MODEL
IS
FIT
TO
DETERMINE
LOCATION
AND
SCALE
KEYPOINTS
ARE
SELECTED
BASED
ON
MEASURES
OF
THEIR
STABILITY
ORIENTATION
ASSIGNMENT
ONE
OR
MORE
ORIENTATIONS
ARE
ASSIGNED
TO
EACH
KEYPOINT
LOCATION
BASED
ON
LOCAL
IMAGE
GRADIENT
DIRECTIONS
ALL
FUTURE
OPERATIONS
ARE
PERFORMED
ON
IMAGE
DATA
THAT
HAS
BEEN
TRANSFORMED
RELATIVE
TO
THE
ASSIGNED
ORIENTATION
SCALE
AND
LOCA
TION
FOR
EACH
FEATURE
THEREBY
PROVIDING
INVARIANCE
TO
THESE
TRANSFORMATIONS
LOWE
KEYPOINT
DESCRIPTOR
THE
LOCAL
IMAGE
GRADIENTS
ARE
MEASURED
AT
THE
SELECTED
SCALE
IN
THE
REGION
AROUND
EACH
KEYPOINT
THESE
ARE
TRANSFORMED
INTO
A
REPRE
SENTATION
THAT
ALLOWS
FOR
SIGNIFICANT
LEVELS
OF
LOCAL
SHAPE
DISTORTION
AND
CHANGE
IN
ILLUMINATION
THIS
APPROACH
HAS
BEEN
NAMED
THE
SCALE
INVARIANT
FEA
TURE
TRANSFORM
SIFT
AS
IT
TRANSFORMS
IMAGE
DATA
INTO
SCALE
INVARIANT
COORDINATES
RELATIVE
TO
LOCAL
FEATURES
AN
IMPORTANT
ASPECT
OF
THIS
APPROACH
IS
THAT
IT
GEN
ERATES
LARGE
NUMBERS
OF
FEATURES
THAT
DENSELY
COVER
THE
IMAGE
OVER
THE
FULL
RANGE
OF
SCALES
AND
LOCATIONS
A
TYP
ICAL
IMAGE
OF
SIZE
PIXELS
WILL
GIVE
RISE
TO
ABOUT
STABLE
FEATURES
ALTHOUGH
THIS
NUMBER
DEPENDS
ON
BOTH
IMAGE
CONTENT
AND
CHOICES
FOR
VARIOUS
PARAME
TERS
THE
QUANTITY
OF
FEATURES
IS
PARTICULARLY
IMPORTANT
FOR
OBJECT
RECOGNITION
WHERE
THE
ABILITY
TO
DETECT
SMALL
OBJECTS
IN
CLUTTERED
BACKGROUNDS
REQUIRES
THAT
AT
LEAST
FEATURES
BE
CORRECTLY
MATCHED
FROM
EACH
OBJECT
FOR
RELIABLE
IDENTIFICATION
FOR
IMAGE
MATCHING
AND
RECOGNITION
SIFT
FEATURES
ARE
FIRST
EXTRACTED
FROM
A
SET
OF
REFERENCE
IMAGES
AND
STORED
IN
A
DATABASE
A
NEW
IMAGE
IS
MATCHED
BY
INDI
VIDUALLY
COMPARING
EACH
FEATURE
FROM
THE
NEW
IMAGE
TO
THIS
PREVIOUS
DATABASE
AND
FINDING
CANDIDATE
MATCHING
FEATURES
BASED
ON
EUCLIDEAN
DISTANCE
OF
THEIR
FEATURE
VECTORS
THIS
PAPER
WILL
DISCUSS
FAST
NEAREST
NEIGHBOR
ALGORITHMS
THAT
CAN
PERFORM
THIS
COMPUTATION
RAPIDLY
AGAINST
LARGE
DATABASES
THE
KEYPOINT
DESCRIPTORS
ARE
HIGHLY
DISTINCTIVE
WHICH
ALLOWS
A
SINGLE
FEATURE
TO
FIND
ITS
CORRECT
MATCH
WITH
GOOD
PROBABILITY
IN
A
LARGE
DATABASE
OF
FEATURES
HOWEVER
IN
A
CLUTTERED
IMAGE
MANY
FEATURES
FROM
THE
BACKGROUND
WILL
NOT
HAVE
ANY
CORRECT
MATCH
IN
THE
DATABASE
GIVING
RISE
TO
MANY
FALSE
MATCHES
IN
AD
DITION
TO
THE
CORRECT
ONES
THE
CORRECT
MATCHES
CAN
BE
FILTERED
FROM
THE
FULL
SET
OF
MATCHES
BY
IDENTIFY
ING
SUBSETS
OF
KEYPOINTS
THAT
AGREE
ON
THE
OBJECT
AND
ITS
LOCATION
SCALE
AND
ORIENTATION
IN
THE
NEW
IMAGE
THE
PROBABILITY
THAT
SEVERAL
FEATURES
WILL
AGREE
ON
THESE
PARAMETERS
BY
CHANCE
IS
MUCH
LOWER
THAN
THE
PROBABILITY
THAT
ANY
INDIVIDUAL
FEATURE
MATCH
WILL
BE
IN
ERROR
THE
DETERMINATION
OF
THESE
CONSISTENT
CLUS
TERS
CAN
BE
PERFORMED
RAPIDLY
BY
USING
AN
EFFICIENT
HASH
TABLE
IMPLEMENTATION
OF
THE
GENERALIZED
HOUGH
TRANSFORM
EACH
CLUSTER
OF
OR
MORE
FEATURES
THAT
AGREE
ON
AN
OBJECT
AND
ITS
POSE
IS
THEN
SUBJECT
TO
FURTHER
DETAILED
VERIFICATION
FIRST
A
LEAST
SQUARED
ESTIMATE
IS
MADE
FOR
AN
AFFINE
APPROXIMATION
TO
THE
OBJECT
POSE
ANY
OTHER
IMAGE
FEATURES
CONSISTENT
WITH
THIS
POSE
ARE
IDENTIFIED
AND
OUTLIERS
ARE
DISCARDED
FINALLY
A
DETAILED
COMPU
TATION
IS
MADE
OF
THE
PROBABILITY
THAT
A
PARTICULAR
SET
OF
FEATURES
INDICATES
THE
PRESENCE
OF
AN
OBJECT
GIVEN
THE
ACCURACY
OF
FIT
AND
NUMBER
OF
PROBABLE
FALSE
MATCHES
OBJECT
MATCHES
THAT
PASS
ALL
THESE
TESTS
CAN
BE
IDENTIFIED
AS
CORRECT
WITH
HIGH
CONFIDENCE
RELATED
RESEARCH
THE
DEVELOPMENT
OF
IMAGE
MATCHING
BY
USING
A
SET
OF
LOCAL
INTEREST
POINTS
CAN
BE
TRACED
BACK
TO
THE
WORK
OF
MORAVEC
ON
STEREO
MATCHING
USING
A
CORNER
DE
TECTOR
THE
MORAVEC
DETECTOR
WAS
IMPROVED
BY
HARRIS
AND
STEPHENS
TO
MAKE
IT
MORE
REPEATABLE
UN
DER
SMALL
IMAGE
VARIATIONS
AND
NEAR
EDGES
HARRIS
ALSO
SHOWED
ITS
VALUE
FOR
EFFICIENT
MOTION
TRACKING
AND
STRUCTURE
FROM
MOTION
RECOVERY
HARRIS
AND
THE
HARRIS
CORNER
DETECTOR
HAS
SINCE
BEEN
WIDELY
USED
FOR
MANY
OTHER
IMAGE
MATCHING
TASKS
WHILE
THESE
FEATURE
DETECTORS
ARE
USUALLY
CALLED
CORNER
DETECTORS
THEY
ARE
NOT
SELECTING
JUST
CORNERS
BUT
RATHER
ANY
IMAGE
LOCATION
THAT
HAS
LARGE
GRADIENTS
IN
ALL
DIRECTIONS
AT
A
PREDETER
MINED
SCALE
THE
INITIAL
APPLICATIONS
WERE
TO
STEREO
AND
SHORT
RANGE
MOTION
TRACKING
BUT
THE
APPROACH
WAS
LATER
EX
TENDED
TO
MORE
DIFFICULT
PROBLEMS
ZHANG
ET
AL
SHOWED
THAT
IT
WAS
POSSIBLE
TO
MATCH
HARRIS
CORNERS
OVER
A
LARGE
IMAGE
RANGE
BY
USING
A
CORRELATION
WINDOW
AROUND
EACH
CORNER
TO
SELECT
LIKELY
MATCHES
OUTLIERS
WERE
THEN
REMOVED
BY
SOLVING
FOR
A
FUNDAMENTAL
MA
TRIX
DESCRIBING
THE
GEOMETRIC
CONSTRAINTS
BETWEEN
THE
TWO
VIEWS
OF
RIGID
SCENE
AND
REMOVING
MATCHES
THAT
DID
NOT
AGREE
WITH
THE
MAJORITY
SOLUTION
AT
THE
SAME
TIME
A
SIMILAR
APPROACH
WAS
DEVELOPED
BY
TORR
FOR
LONG
RANGE
MOTION
MATCHING
IN
WHICH
GEOMETRIC
CON
STRAINTS
WERE
USED
TO
REMOVE
OUTLIERS
FOR
RIGID
OBJECTS
MOVING
WITHIN
AN
IMAGE
THE
GROUND
BREAKING
WORK
OF
SCHMID
AND
MOHR
SHOWED
THAT
INVARIANT
LOCAL
FEATURE
MATCHING
COULD
BE
EXTENDED
TO
GENERAL
IMAGE
RECOGNITION
PROB
LEMS
IN
WHICH
A
FEATURE
WAS
MATCHED
AGAINST
A
LARGE
DATABASE
OF
IMAGES
THEY
ALSO
USED
HARRIS
CORNERS
TO
SELECT
INTEREST
POINTS
BUT
RATHER
THAN
MATCHING
WITH
A
CORRELATION
WINDOW
THEY
USED
A
ROTATIONALLY
IN
VARIANT
DESCRIPTOR
OF
THE
LOCAL
IMAGE
REGION
THIS
AL
LOWED
FEATURES
TO
BE
MATCHED
UNDER
ARBITRARY
ORIEN
TATION
CHANGE
BETWEEN
THE
TWO
IMAGES
FURTHERMORE
THEY
DEMONSTRATED
THAT
MULTIPLE
FEATURE
MATCHES
COULD
ACCOMPLISH
GENERAL
RECOGNITION
UNDER
OCCLUSION
AND
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
CLUTTER
BY
IDENTIFYING
CONSISTENT
CLUSTERS
OF
MATCHED
FEATURES
THE
HARRIS
CORNER
DETECTOR
IS
VERY
SENSITIVE
TO
CHANGES
IN
IMAGE
SCALE
SO
IT
DOES
NOT
PROVIDE
A
GOOD
BA
SIS
FOR
MATCHING
IMAGES
OF
DIFFERENT
SIZES
EARLIER
WORK
BY
THE
AUTHOR
LOWE
EXTENDED
THE
LOCAL
FEATURE
APPROACH
TO
ACHIEVE
SCALE
INVARIANCE
THIS
WORK
ALSO
DESCRIBED
A
NEW
LOCAL
DESCRIPTOR
THAT
PROVIDED
MORE
DISTINCTIVE
FEATURES
WHILE
BEING
LESS
SENSITIVE
TO
LOCAL
IMAGE
DISTORTIONS
SUCH
AS
VIEWPOINT
CHANGE
THIS
CURRENT
PAPER
PROVIDES
A
MORE
IN
DEPTH
DEVELOPMENT
AND
ANALYSIS
OF
THIS
EARLIER
WORK
WHILE
ALSO
PRESENT
ING
A
NUMBER
OF
IMPROVEMENTS
IN
STABILITY
AND
FEATURE
INVARIANCE
THERE
IS
A
CONSIDERABLE
BODY
OF
PREVIOUS
RESEARCH
ON
IDENTIFYING
REPRESENTATIONS
THAT
ARE
STABLE
UNDER
SCALE
CHANGE
SOME
OF
THE
FIRST
WORK
IN
THIS
AREA
WAS
BY
CROWLEY
AND
PARKER
WHO
DEVELOPED
A
REPRE
SENTATION
THAT
IDENTIFIED
PEAKS
AND
RIDGES
IN
SCALE
SPACE
AND
LINKED
THESE
INTO
A
TREE
STRUCTURE
THE
TREE
STRUCTURE
COULD
THEN
BE
MATCHED
BETWEEN
IMAGES
WITH
ARBITRARY
SCALE
CHANGE
MORE
RECENT
WORK
ON
GRAPH
BASED
MATCH
ING
BY
SHOKOUFANDEH
ET
AL
PROVIDES
MORE
DIS
TINCTIVE
FEATURE
DESCRIPTORS
USING
WAVELET
COEFFICIENTS
THE
PROBLEM
OF
IDENTIFYING
AN
APPROPRIATE
AND
CON
SISTENT
SCALE
FOR
FEATURE
DETECTION
HAS
BEEN
STUDIED
IN
DEPTH
BY
LINDEBERG
HE
DESCRIBES
THIS
AS
A
PROBLEM
OF
SCALE
SELECTION
AND
WE
MAKE
USE
OF
HIS
RESULTS
BELOW
RECENTLY
THERE
HAS
BEEN
AN
IMPRESSIVE
BODY
OF
WORK
ON
EXTENDING
LOCAL
FEATURES
TO
BE
INVARIANT
TO
FULL
AFFINE
TRANSFORMATIONS
BAUMBERG
TUYTE
LAARS
AND
VAN
GOOL
MIKOLAJCZYK
AND
SCHMID
SCHAFFALITZKY
AND
ZISSERMAN
BROWN
AND
LOWE
THIS
ALLOWS
FOR
INVARIANT
MATCHING
TO
FEA
TURES
ON
A
PLANAR
SURFACE
UNDER
CHANGES
IN
ORTHOGRAPHIC
PROJECTION
IN
MOST
CASES
BY
RESAMPLING
THE
IMAGE
IN
A
LOCAL
AFFINE
FRAME
HOWEVER
NONE
OF
THESE
APPROACHES
ARE
YET
FULLY
AFFINE
INVARIANT
AS
THEY
START
WITH
INITIAL
FEATURE
SCALES
AND
LOCATIONS
SELECTED
IN
A
NON
AFFINE
INVARIANT
MANNER
DUE
TO
THE
PROHIBITIVE
COST
OF
EXPLOR
ING
THE
FULL
AFFINE
SPACE
THE
AFFINE
FRAMES
ARE
ARE
ALSO
MORE
SENSITIVE
TO
NOISE
THAN
THOSE
OF
THE
SCALE
INVARIANT
FEATURES
SO
IN
PRACTICE
THE
AFFINE
FEATURES
HAVE
LOWER
REPEATABILITY
THAN
THE
SCALE
INVARIANT
FEATURES
UNLESS
THE
AFFINE
DISTORTION
IS
GREATER
THAN
ABOUT
A
DEGREE
TILT
OF
A
PLANAR
SURFACE
MIKOLAJCZYK
WIDER
AFFINE
IN
VARIANCE
MAY
NOT
BE
IMPORTANT
FOR
MANY
APPLICATIONS
AS
TRAINING
VIEWS
ARE
BEST
TAKEN
AT
LEAST
EVERY
DE
GREES
ROTATION
IN
VIEWPOINT
MEANING
THAT
RECOGNITION
IS
WITHIN
DEGREES
OF
THE
CLOSEST
TRAINING
VIEW
IN
OR
DER
TO
CAPTURE
NON
PLANAR
CHANGES
AND
OCCLUSION
EFFECTS
FOR
OBJECTS
WHILE
THE
METHOD
TO
BE
PRESENTED
IN
THIS
PAPER
IS
NOT
FULLY
AFFINE
INVARIANT
A
DIFFERENT
APPROACH
IS
USED
IN
WHICH
THE
LOCAL
DESCRIPTOR
ALLOWS
RELATIVE
FEATURE
POSI
TIONS
TO
SHIFT
SIGNIFICANTLY
WITH
ONLY
SMALL
CHANGES
IN
THE
DESCRIPTOR
THIS
APPROACH
NOT
ONLY
ALLOWS
THE
DE
SCRIPTORS
TO
BE
RELIABLY
MATCHED
ACROSS
A
CONSIDERABLE
RANGE
OF
AFFINE
DISTORTION
BUT
IT
ALSO
MAKES
THE
FEATURES
MORE
ROBUST
AGAINST
CHANGES
IN
VIEWPOINT
FOR
NON
PLANAR
SURFACES
OTHER
ADVANTAGES
INCLUDE
MUCH
MORE
EFFICIENT
FEATURE
EXTRACTION
AND
THE
ABILITY
TO
IDENTIFY
LARGER
NUMBERS
OF
FEATURES
ON
THE
OTHER
HAND
AFFINE
INVARIANCE
IS
A
VALUABLE
PROPERTY
FOR
MATCHING
PLANAR
SURFACES
UNDER
VERY
LARGE
VIEW
CHANGES
AND
FURTHER
RESEARCH
SHOULD
BE
PERFORMED
ON
THE
BEST
WAYS
TO
COM
BINE
THIS
WITH
NON
PLANAR
VIEWPOINT
INVARIANCE
IN
AN
EFFICIENT
AND
STABLE
MANNER
MANY
OTHER
FEATURE
TYPES
HAVE
BEEN
PROPOSED
FOR
USE
IN
RECOGNITION
SOME
OF
WHICH
COULD
BE
USED
IN
ADDITION
TO
THE
FEATURES
DESCRIBED
IN
THIS
PAPER
TO
PROVIDE
FUR
THER
MATCHES
UNDER
DIFFERING
CIRCUMSTANCES
ONE
CLASS
OF
FEATURES
ARE
THOSE
THAT
MAKE
USE
OF
IMAGE
CONTOURS
OR
REGION
BOUNDARIES
WHICH
SHOULD
MAKE
THEM
LESS
LIKELY
TO
BE
DISRUPTED
BY
CLUTTERED
BACKGROUNDS
NEAR
OBJECT
BOUNDARIES
MATAS
ET
AL
HAVE
SHOWN
THAT
THEIR
MAXIMALLY
STABLE
EXTREMAL
REGIONS
CAN
PRODUCE
LARGE
NUMBERS
OF
MATCHING
FEATURES
WITH
GOOD
STABIL
ITY
MIKOLAJCZYK
ET
AL
HAVE
DEVELOPED
A
NEW
DESCRIPTOR
THAT
USES
LOCAL
EDGES
WHILE
IGNORING
UNRE
LATED
NEARBY
EDGES
PROVIDING
THE
ABILITY
TO
FIND
STABLE
FEATURES
EVEN
NEAR
THE
BOUNDARIES
OF
NARROW
SHAPES
SU
PERIMPOSED
ON
BACKGROUND
CLUTTER
NELSON
AND
SELINGER
HAVE
SHOWN
GOOD
RESULTS
WITH
LOCAL
FEATURES
BASED
ON
GROUPINGS
OF
IMAGE
CONTOURS
SIMILARLY
POPE
AND
LOWE
USED
FEATURES
BASED
ON
THE
HIERARCHI
CAL
GROUPING
OF
IMAGE
CONTOURS
WHICH
ARE
PARTICULARLY
USEFUL
FOR
OBJECTS
LACKING
DETAILED
TEXTURE
THE
HISTORY
OF
RESEARCH
ON
VISUAL
RECOGNITION
CON
TAINS
WORK
ON
A
DIVERSE
SET
OF
OTHER
IMAGE
PROPERTIES
THAT
CAN
BE
USED
AS
FEATURE
MEASUREMENTS
CARNEIRO
AND
JEPSON
DESCRIBE
PHASE
BASED
LOCAL
FEATURES
THAT
REPRESENT
THE
PHASE
RATHER
THAN
THE
MAGNITUDE
OF
LOCAL
SPATIAL
FREQUENCIES
WHICH
IS
LIKELY
TO
PROVIDE
IMPROVED
INVARIANCE
TO
ILLUMINATION
SCHIELE
AND
CROWLEY
HAVE
PROPOSED
THE
USE
OF
MULTIDIMENSIONAL
HISTOGRAMS
SUMMARIZING
THE
DISTRIBUTION
OF
MEASUREMENTS
WITHIN
IMAGE
REGIONS
THIS
TYPE
OF
FEATURE
MAY
BE
PARTICU
LARLY
USEFUL
FOR
RECOGNITION
OF
TEXTURED
OBJECTS
WITH
LOWE
DEFORMABLE
SHAPES
BASRI
AND
JACOBS
HAVE
DEMONSTRATED
THE
VALUE
OF
EXTRACTING
LOCAL
REGION
BOUNDARIES
FOR
RECOGNITION
OTHER
USEFUL
PROPERTIES
TO
INCORPORATE
INCLUDE
COLOR
MOTION
FIGURE
GROUND
DIS
CRIMINATION
REGION
SHAPE
DESCRIPTORS
AND
STEREO
DEPTH
CUES
THE
LOCAL
FEATURE
APPROACH
CAN
EASILY
INCORPORATE
NOVEL
FEATURE
TYPES
BECAUSE
EXTRA
FEATURES
CONTRIBUTE
TO
ROBUSTNESS
WHEN
THEY
PROVIDE
CORRECT
MATCHES
BUT
OTHERWISE
DO
LITTLE
HARM
OTHER
THAN
THEIR
COST
OF
COMPU
TATION
THEREFORE
FUTURE
SYSTEMS
ARE
LIKELY
TO
COMBINE
MANY
FEATURE
TYPES
DETECTION
OF
SCALE
SPACE
EXTREMA
AS
DESCRIBED
IN
THE
INTRODUCTION
WE
WILL
DETECT
KEY
POINTS
USING
A
CASCADE
FILTERING
APPROACH
THAT
USES
EFFI
CIENT
ALGORITHMS
TO
IDENTIFY
CANDIDATE
LOCATIONS
THAT
ARE
THEN
EXAMINED
IN
FURTHER
DETAIL
THE
FIRST
STAGE
OF
KEY
POINT
DETECTION
IS
TO
IDENTIFY
LOCATIONS
AND
SCALES
THAT
CAN
BE
REPEATABLY
ASSIGNED
UNDER
DIFFERING
VIEWS
OF
THE
SAME
OBJECT
DETECTING
LOCATIONS
THAT
ARE
INVARIANT
TO
SCALE
CHANGE
OF
THE
IMAGE
CAN
BE
ACCOMPLISHED
BY
SEARCHING
FOR
STABLE
FEATURES
ACROSS
ALL
POSSIBLE
SCALES
USING
A
CONTINUOUS
FUNCTION
OF
SCALE
KNOWN
AS
SCALE
SPACE
WITKIN
IT
HAS
BEEN
SHOWN
BY
KOENDERINK
AND
LINDEBERG
THAT
UNDER
A
VARIETY
OF
REASONABLE
ASSUMPTIONS
THE
ONLY
POSSIBLE
SCALE
SPACE
KERNEL
IS
THE
GAUSSIAN
FUNCTION
THEREFORE
THE
SCALE
SPACE
OF
AN
IMAGE
IS
DEFINED
AS
A
FUNCTION
L
X
Y
Σ
THAT
IS
PRODUCED
FROM
THE
CONVOLUTION
OF
A
VARIABLE
SCALE
GAUSSIAN
G
X
Y
Σ
WITH
AN
INPUT
IMAGE
I
X
Y
THERE
ARE
A
NUMBER
OF
REASONS
FOR
CHOOSING
THIS
FUNCTION
FIRST
IT
IS
A
PARTICULARLY
EFFICIENT
FUNCTION
TO
COMPUTE
AS
THE
SMOOTHED
IMAGES
L
NEED
TO
BE
COM
PUTED
IN
ANY
CASE
FOR
SCALE
SPACE
FEATURE
DESCRIPTION
AND
D
CAN
THEREFORE
BE
COMPUTED
BY
SIMPLE
IMAGE
SUBTRACTION
IN
ADDITION
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
PRO
VIDES
A
CLOSE
APPROXIMATION
TO
THE
SCALE
NORMALIZED
LAPLACIAN
OF
GAUSSIAN
Σ
G
AS
STUDIED
BY
LINDEBERG
LINDEBERG
SHOWED
THAT
THE
NORMAL
IZATION
OF
THE
LAPLACIAN
WITH
THE
FACTOR
Σ
IS
REQUIRED
FOR
TRUE
SCALE
INVARIANCE
IN
DETAILED
EXPERIMENTAL
COM
PARISONS
MIKOLAJCZYK
FOUND
THAT
THE
MAXIMA
AND
MINIMA
OF
Σ
G
PRODUCE
THE
MOST
STABLE
IMAGE
FEATURES
COMPARED
TO
A
RANGE
OF
OTHER
POSSIBLE
IMAGE
FUNCTIONS
SUCH
AS
THE
GRADIENT
HESSIAN
OR
HARRIS
COR
NER
FUNCTION
THE
RELATIONSHIP
BETWEEN
D
AND
Σ
G
CAN
BE
UN
DERSTOOD
FROM
THE
HEAT
DIFFUSION
EQUATION
PARAMETER
IZED
IN
TERMS
OF
Σ
RATHER
THAN
THE
MORE
USUAL
T
Σ
G
Σ
G
Σ
FROM
THIS
WE
SEE
THAT
G
CAN
BE
COMPUTED
FROM
THE
FINITE
DIFFERENCE
APPROXIMATION
TO
G
Σ
USING
THE
DIFFERENCE
OF
NEARBY
SCALES
AT
KΣ
AND
Σ
Σ
G
G
G
X
Y
KΣ
G
X
Y
Σ
Σ
ΣKΣ
AND
THEREFORE
G
X
Y
KΣ
G
X
Y
Σ
K
Σ
G
L
X
Y
Σ
G
X
Y
Σ
I
X
Y
THIS
SHOWS
THAT
WHEN
THE
DIFFERENCE
OF
GAUSSIAN
FUNC
WHERE
IS
THE
CONVOLUTION
OPERATION
IN
X
AND
Y
TION
HAS
SCALES
DIFFERING
BY
A
CONSTANT
FACTOR
IT
ALREADY
INCORPORATES
THE
Σ
SCALE
NORMALIZATION
REQUIRED
FOR
AND
THE
SCALE
INVARIANT
LAPLACIAN
THE
FACTOR
K
IN
THE
EQUATION
IS
A
CONSTANT
OVER
ALL
SCALES
AND
THEREFORE
DOES
G
X
Y
Σ
E
NOT
INFLUENCE
EXTREMA
LOCATION
THE
APPROXIMATION
ER
Σ
ROR
WILL
GO
TO
ZERO
AS
K
GOES
TO
BUT
IN
PRACTICE
WE
HAVE
TO
EFFICIENTLY
DETECT
STABLE
KEYPOINT
LOCATIONS
IN
SCALE
FOUND
THAT
THE
APPROXIMATION
HAS
ALMOST
NO
IMPACT
ON
THE
STABILITY
OF
EXTREMA
DETECTION
OR
LOCALIZATION
FOR
SPACE
WE
HAVE
PROPOSED
LOWE
USING
SCALE
SPACE
EXTREMA
IN
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
EVEN
SIGNIFICANT
DIFFERENCES
IN
SCALE
SUCH
AS
K
CONVOLVED
WITH
THE
IMAGE
D
X
Y
Σ
WHICH
CAN
BE
AN
EFFICIENT
APPROACH
TO
CONSTRUCTION
OF
D
X
Y
Σ
IS
SHOWN
IN
FIG
THE
INITIAL
IMAGE
IS
INCREMENTALLY
COMPUTED
FROM
THE
DIFFERENCE
OF
TWO
NEARBY
SCALES
SEP
CONVOLVED
WITH
GAUSSIANS
TO
PRODUCE
IMAGES
SEPARATED
ARATED
BY
A
CONSTANT
MULTIPLICATIVE
FACTOR
K
BY
A
CONSTANT
FACTOR
K
IN
SCALE
SPACE
SHOWN
STACKED
IN
D
X
Y
Σ
G
X
Y
KΣ
G
X
Y
Σ
I
X
Y
THE
LEFT
COLUMN
WE
CHOOSE
TO
DIVIDE
EACH
OCTAVE
OF
SCALE
SPACE
I
E
DOUBLING
OF
Σ
INTO
AN
INTEGER
NUM
L
X
Y
KΣ
L
X
Y
Σ
BER
OF
INTERVALS
SO
K
WE
MUST
PRODUCE
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
FIGURE
FOR
EACH
OCTAVE
OF
SCALE
SPACE
THE
INITIAL
IMAGE
IS
REPEATEDLY
CONVOLVED
WITH
GAUSSIANS
TO
PRODUCE
THE
SET
OF
SCALE
SPACE
IMAGES
SHOWN
ON
THE
LEFT
ADJACENT
GAUSSIAN
IMAGES
ARE
SUBTRACTED
TO
PRODUCE
THE
DIFFERENCE
OF
GAUSSIAN
IMAGES
ON
THE
RIGHT
AFTER
EACH
OCTAVE
THE
GAUSSIAN
IMAGE
IS
DOWN
SAMPLED
BY
A
FACTOR
OF
AND
THE
PROCESS
REPEATED
IMAGES
IN
THE
STACK
OF
BLURRED
IMAGES
FOR
EACH
OCTAVE
SO
THAT
FINAL
EXTREMA
DETECTION
COVERS
A
COMPLETE
OC
TAVE
ADJACENT
IMAGE
SCALES
ARE
SUBTRACTED
TO
PRODUCE
THE
DIFFERENCE
OF
GAUSSIAN
IMAGES
SHOWN
ON
THE
RIGHT
ONCE
A
COMPLETE
OCTAVE
HAS
BEEN
PROCESSED
WE
RESAM
PLE
THE
GAUSSIAN
IMAGE
THAT
HAS
TWICE
THE
INITIAL
VALUE
OF
Σ
IT
WILL
BE
IMAGES
FROM
THE
TOP
OF
THE
STACK
BY
TAKING
EVERY
SECOND
PIXEL
IN
EACH
ROW
AND
COLUMN
THE
ACCURACY
OF
SAMPLING
RELATIVE
TO
Σ
IS
NO
DIFFERENT
THAN
FOR
THE
START
OF
THE
PREVIOUS
OCTAVE
WHILE
COMPUTATION
IS
GREATLY
REDUCED
FIGURE
MAXIMA
AND
MINIMA
OF
THE
DIFFERENCE
OF
GAUSSIAN
IM
AGES
ARE
DETECTED
BY
COMPARING
A
PIXEL
MARKED
WITH
X
TO
ITS
NEIGHBORS
IN
REGIONS
AT
THE
CURRENT
AND
ADJACENT
SCALES
MARKED
WITH
CIRCLES
LOCAL
EXTREMA
DETECTION
IN
ORDER
TO
DETECT
THE
LOCAL
MAXIMA
AND
MINIMA
OF
D
X
Y
Σ
EACH
SAMPLE
POINT
IS
COMPARED
TO
ITS
EIGHT
NEIGHBORS
IN
THE
CURRENT
IMAGE
AND
NINE
NEIGHBORS
IN
THE
SCALE
ABOVE
AND
BELOW
SEE
FIG
IT
IS
SELECTED
ONLY
IF
IT
IS
LARGER
THAN
ALL
OF
THESE
NEIGHBORS
OR
SMALLER
THAN
ALL
OF
THEM
THE
COST
OF
THIS
CHECK
IS
REASONABLY
LOW
DUE
TO
THE
FACT
THAT
MOST
SAMPLE
POINTS
WILL
BE
ELIMINATED
FOLLOWING
THE
FIRST
FEW
CHECKS
AN
IMPORTANT
ISSUE
IS
TO
DETERMINE
THE
FREQUENCY
OF
SAMPLING
IN
THE
IMAGE
AND
SCALE
DOMAINS
THAT
IS
NEEDED
TO
RELIABLY
DETECT
THE
EXTREMA
UNFORTUNATELY
IT
TURNS
OUT
THAT
THERE
IS
NO
MINIMUM
SPACING
OF
SAM
PLES
THAT
WILL
DETECT
ALL
EXTREMA
AS
THE
EXTREMA
CAN
BE
ARBITRARILY
CLOSE
TOGETHER
THIS
CAN
BE
SEEN
BY
CONSID
ERING
A
WHITE
CIRCLE
ON
A
BLACK
BACKGROUND
WHICH
WILL
HAVE
A
SINGLE
SCALE
SPACE
MAXIMUM
WHERE
THE
CIRCULAR
POSITIVE
CENTRAL
REGION
OF
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
MATCHES
THE
SIZE
AND
LOCATION
OF
THE
CIRCLE
FOR
A
VERY
ELONGATED
ELLIPSE
THERE
WILL
BE
TWO
MAX
IMA
NEAR
EACH
END
OF
THE
ELLIPSE
AS
THE
LOCATIONS
OF
MAXIMA
ARE
A
CONTINUOUS
FUNCTION
OF
THE
IMAGE
FOR
SOME
ELLIPSE
WITH
INTERMEDIATE
ELONGATION
THERE
WILL
BE
A
TRANSITION
FROM
A
SINGLE
MAXIMUM
TO
TWO
WITH
THE
MAXIMA
ARBITRARILY
CLOSE
TO
EACH
OTHER
NEAR
THE
TRANSITION
LOWE
FIGURE
THE
TOP
LINE
OF
THE
FIRST
GRAPH
SHOWS
THE
PERCENT
OF
KEYPOINTS
THAT
ARE
REPEATABLY
DETECTED
AT
THE
SAME
LOCATION
AND
SCALE
IN
A
TRANSFORMED
IMAGE
AS
A
FUNCTION
OF
THE
NUMBER
OF
SCALES
SAMPLED
PER
OCTAVE
THE
LOWER
LINE
SHOWS
THE
PERCENT
OF
KEYPOINTS
THAT
HAVE
THEIR
DESCRIPTORS
CORRECTLY
MATCHED
TO
A
LARGE
DATABASE
THE
SECOND
GRAPH
SHOWS
THE
TOTAL
NUMBER
OF
KEYPOINTS
DETECTED
IN
A
TYPICAL
IMAGE
AS
A
FUNCTION
OF
THE
NUMBER
OF
SCALE
SAMPLES
THEREFORE
WE
MUST
SETTLE
FOR
A
SOLUTION
THAT
TRADES
OFF
EFFICIENCY
WITH
COMPLETENESS
IN
FACT
AS
MIGHT
BE
EXPECTED
AND
IS
CONFIRMED
BY
OUR
EXPERIMENTS
EXTREMA
THAT
ARE
CLOSE
TOGETHER
ARE
QUITE
UNSTABLE
TO
SMALL
PER
TURBATIONS
OF
THE
IMAGE
WE
CAN
DETERMINE
THE
BEST
CHOICES
EXPERIMENTALLY
BY
STUDYING
A
RANGE
OF
SAMPLING
FREQUENCIES
AND
USING
THOSE
THAT
PROVIDE
THE
MOST
RELI
ABLE
RESULTS
UNDER
A
REALISTIC
SIMULATION
OF
THE
MATCHING
TASK
FREQUENCY
OF
SAMPLING
IN
SCALE
THE
EXPERIMENTAL
DETERMINATION
OF
SAMPLING
FREQUENCY
THAT
MAXIMIZES
EXTREMA
STABILITY
IS
SHOWN
IN
FIGS
AND
THESE
FIGURES
AND
MOST
OTHER
SIMULATIONS
IN
THIS
PA
PER
ARE
BASED
ON
A
MATCHING
TASK
USING
A
COLLECTION
OF
REAL
IMAGES
DRAWN
FROM
A
DIVERSE
RANGE
INCLUDING
OUTDOOR
SCENES
HUMAN
FACES
AERIAL
PHOTOGRAPHS
AND
INDUSTRIAL
IMAGES
THE
IMAGE
DOMAIN
WAS
FOUND
TO
HAVE
ALMOST
NO
INFLUENCE
ON
ANY
OF
THE
RESULTS
EACH
IMAGE
WAS
THEN
SUBJECT
TO
A
RANGE
OF
TRANSFORMATIONS
INCLUD
ING
ROTATION
SCALING
AFFINE
STRETCH
CHANGE
IN
BRIGHTNESS
AND
CONTRAST
AND
ADDITION
OF
IMAGE
NOISE
BECAUSE
THE
CHANGES
WERE
SYNTHETIC
IT
WAS
POSSIBLE
TO
PRECISELY
PREDICT
WHERE
EACH
FEATURE
IN
AN
ORIGINAL
IMAGE
SHOULD
APPEAR
IN
THE
TRANSFORMED
IMAGE
ALLOWING
FOR
MEASURE
MENT
OF
CORRECT
REPEATABILITY
AND
POSITIONAL
ACCURACY
FOR
EACH
FEATURE
FIGURE
SHOWS
THESE
SIMULATION
RESULTS
USED
TO
EX
AMINE
THE
EFFECT
OF
VARYING
THE
NUMBER
OF
SCALES
PER
OCTAVE
AT
WHICH
THE
IMAGE
FUNCTION
IS
SAMPLED
PRIOR
TO
FIGURE
THE
TOP
LINE
IN
THE
GRAPH
SHOWS
THE
PERCENT
OF
KEYPOINT
LOCATIONS
THAT
ARE
REPEATABLY
DETECTED
IN
A
TRANSFORMED
IMAGE
AS
A
FUNCTION
OF
THE
PRIOR
IMAGE
SMOOTHING
FOR
THE
FIRST
LEVEL
OF
EACH
OCTAVE
THE
LOWER
LINE
SHOWS
THE
PERCENT
OF
DESCRIPTORS
CORRECTLY
MATCHED
AGAINST
A
LARGE
DATABASE
EXTREMA
DETECTION
IN
THIS
CASE
EACH
IMAGE
WAS
RESAM
PLED
FOLLOWING
ROTATION
BY
A
RANDOM
ANGLE
AND
SCALING
BY
A
RANDOM
AMOUNT
BETWEEN
OF
TIMES
THE
ORIG
INAL
SIZE
KEYPOINTS
FROM
THE
REDUCED
RESOLUTION
IMAGE
WERE
MATCHED
AGAINST
THOSE
FROM
THE
ORIGINAL
IMAGE
SO
THAT
THE
SCALES
FOR
ALL
KEYPOINTS
WOULD
BE
BE
PRESENT
IN
THE
MATCHED
IMAGE
IN
ADDITION
IMAGE
NOISE
WAS
ADDED
MEANING
THAT
EACH
PIXEL
HAD
A
RANDOM
NUMBER
ADDED
FROM
THE
UNIFORM
INTERVAL
WHERE
PIXEL
VALUES
ARE
IN
THE
RANGE
EQUIVALENT
TO
PRO
VIDING
SLIGHTLY
LESS
THAN
BITS
OF
ACCURACY
FOR
IMAGE
PIXELS
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
THE
TOP
LINE
IN
THE
FIRST
GRAPH
OF
FIG
SHOWS
THE
PERCENT
OF
KEYPOINTS
THAT
ARE
DETECTED
AT
A
MATCHING
LOCATION
AND
SCALE
IN
THE
TRANSFORMED
IMAGE
FOR
ALL
EXAMPLES
IN
THIS
PAPER
WE
DEFINE
A
MATCHING
SCALE
AS
BEING
WITHIN
A
FACTOR
OF
OF
THE
CORRECT
SCALE
AND
A
MATCHING
LOCATION
AS
BEING
WITHIN
Σ
PIXELS
WHERE
Σ
IS
THE
SCALE
OF
THE
KEYPOINT
DEFINED
FROM
EQ
AS
THE
STANDARD
DEVIATION
OF
THE
SMALLEST
GAUSSIAN
USED
IN
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
THE
LOWER
LINE
ON
THIS
GRAPH
SHOWS
THE
NUMBER
OF
KEYPOINTS
THAT
ARE
CORRECTLY
MATCHED
TO
A
DATABASE
OF
KEYPOINTS
USING
THE
NEAREST
NEIGHBOR
MATCHING
PROCEDURE
TO
BE
DESCRIBED
IN
SECTION
THIS
SHOWS
THAT
ONCE
THE
KEY
POINT
IS
REPEATABLY
LOCATED
IT
IS
LIKELY
TO
BE
USEFUL
FOR
RECOGNITION
AND
MATCHING
TASKS
AS
THIS
GRAPH
SHOWS
THE
HIGHEST
REPEATABILITY
IS
OBTAINED
WHEN
SAMPLING
SCALES
PER
OCTAVE
AND
THIS
IS
THE
NUMBER
OF
SCALE
SAMPLES
USED
FOR
ALL
OTHER
EXPERIMENTS
THROUGHOUT
THIS
PAPER
IT
MIGHT
SEEM
SURPRISING
THAT
THE
REPEATABILITY
DOES
NOT
CONTINUE
TO
IMPROVE
AS
MORE
SCALES
ARE
SAMPLED
THE
REASON
IS
THAT
THIS
RESULTS
IN
MANY
MORE
LOCAL
EX
TREMA
BEING
DETECTED
BUT
THESE
EXTREMA
ARE
ON
AVERAGE
LESS
STABLE
AND
THEREFORE
ARE
LESS
LIKELY
TO
BE
DETECTED
IN
THE
TRANSFORMED
IMAGE
THIS
IS
SHOWN
BY
THE
SECOND
GRAPH
IN
FIG
WHICH
SHOWS
THE
AVERAGE
NUMBER
OF
KEYPOINTS
DETECTED
AND
CORRECTLY
MATCHED
IN
EACH
IM
AGE
THE
NUMBER
OF
KEYPOINTS
RISES
WITH
INCREASED
SAM
PLING
OF
SCALES
AND
THE
TOTAL
NUMBER
OF
CORRECT
MATCHES
ALSO
RISES
SINCE
THE
SUCCESS
OF
OBJECT
RECOGNITION
OFTEN
DEPENDS
MORE
ON
THE
QUANTITY
OF
CORRECTLY
MATCHED
KEY
POINTS
AS
OPPOSED
TO
THEIR
PERCENTAGE
CORRECT
MATCH
ING
FOR
MANY
APPLICATIONS
IT
WILL
BE
OPTIMAL
TO
USE
A
LARGER
NUMBER
OF
SCALE
SAMPLES
HOWEVER
THE
COST
OF
COMPUTATION
ALSO
RISES
WITH
THIS
NUMBER
SO
FOR
THE
EX
PERIMENTS
IN
THIS
PAPER
WE
HAVE
CHOSEN
TO
USE
JUST
SCALE
SAMPLES
PER
OCTAVE
TO
SUMMARIZE
THESE
EXPERIMENTS
SHOW
THAT
THE
SCALE
SPACE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
HAS
A
LARGE
NUMBER
OF
EXTREMA
AND
THAT
IT
WOULD
BE
VERY
EXPENSIVE
TO
DETECT
THEM
ALL
FORTUNATELY
WE
CAN
DETECT
THE
MOST
STABLE
AND
USEFUL
SUBSET
EVEN
WITH
A
COARSE
SAMPLING
OF
SCALES
FREQUENCY
OF
SAMPLING
IN
THE
SPATIAL
DOMAIN
JUST
AS
WE
DETERMINED
THE
FREQUENCY
OF
SAMPLING
PER
OC
TAVE
OF
SCALE
SPACE
SO
WE
MUST
DETERMINE
THE
FREQUENCY
OF
SAMPLING
IN
THE
IMAGE
DOMAIN
RELATIVE
TO
THE
SCALE
OF
SMOOTHING
GIVEN
THAT
EXTREMA
CAN
BE
ARBITRARILY
CLOSE
TOGETHER
THERE
WILL
BE
A
SIMILAR
TRADE
OFF
BETWEEN
SAM
PLING
FREQUENCY
AND
RATE
OF
DETECTION
FIGURE
SHOWS
AN
EXPERIMENTAL
DETERMINATION
OF
THE
AMOUNT
OF
PRIOR
SMOOTHING
Σ
THAT
IS
APPLIED
TO
EACH
IMAGE
LEVEL
BEFORE
BUILDING
THE
SCALE
SPACE
REPRESENTATION
FOR
AN
OCTAVE
AGAIN
THE
TOP
LINE
IS
THE
REPEATABILITY
OF
KEYPOINT
DE
TECTION
AND
THE
RESULTS
SHOW
THAT
THE
REPEATABILITY
CON
TINUES
TO
INCREASE
WITH
Σ
HOWEVER
THERE
IS
A
COST
TO
USING
A
LARGE
Σ
IN
TERMS
OF
EFFICIENCY
SO
WE
HAVE
CHO
SEN
TO
USE
Σ
WHICH
PROVIDES
CLOSE
TO
OPTIMAL
REPEATABILITY
THIS
VALUE
IS
USED
THROUGHOUT
THIS
PAPER
AND
WAS
USED
FOR
THE
RESULTS
IN
FIG
OF
COURSE
IF
WE
PRE
SMOOTH
THE
IMAGE
BEFORE
EX
TREMA
DETECTION
WE
ARE
EFFECTIVELY
DISCARDING
THE
HIGH
EST
SPATIAL
FREQUENCIES
THEREFORE
TO
MAKE
FULL
USE
OF
THE
INPUT
THE
IMAGE
CAN
BE
EXPANDED
TO
CREATE
MORE
SAMPLE
POINTS
THAN
WERE
PRESENT
IN
THE
ORIGINAL
WE
DOUBLE
THE
SIZE
OF
THE
INPUT
IMAGE
USING
LINEAR
INTER
POLATION
PRIOR
TO
BUILDING
THE
FIRST
LEVEL
OF
THE
PYRA
MID
WHILE
THE
EQUIVALENT
OPERATION
COULD
EFFECTIVELY
HAVE
BEEN
PERFORMED
BY
USING
SETS
OF
SUBPIXEL
OFFSET
FILTERS
ON
THE
ORIGINAL
IMAGE
THE
IMAGE
DOUBLING
LEADS
TO
A
MORE
EFFICIENT
IMPLEMENTATION
WE
ASSUME
THAT
THE
ORIGINAL
IMAGE
HAS
A
BLUR
OF
AT
LEAST
Σ
THE
MIN
IMUM
NEEDED
TO
PREVENT
SIGNIFICANT
ALIASING
AND
THAT
THEREFORE
THE
DOUBLED
IMAGE
HAS
Σ
RELATIVE
TO
ITS
NEW
PIXEL
SPACING
THIS
MEANS
THAT
LITTLE
ADDITIONAL
SMOOTHING
IS
NEEDED
PRIOR
TO
CREATION
OF
THE
FIRST
OC
TAVE
OF
SCALE
SPACE
THE
IMAGE
DOUBLING
INCREASES
THE
NUMBER
OF
STABLE
KEYPOINTS
BY
ALMOST
A
FACTOR
OF
BUT
NO
SIGNIFICANT
FURTHER
IMPROVEMENTS
WERE
FOUND
WITH
A
LARGER
EXPANSION
FACTOR
ACCURATE
KEYPOINT
LOCALIZATION
ONCE
A
KEYPOINT
CANDIDATE
HAS
BEEN
FOUND
BY
COM
PARING
A
PIXEL
TO
ITS
NEIGHBORS
THE
NEXT
STEP
IS
TO
PER
FORM
A
DETAILED
FIT
TO
THE
NEARBY
DATA
FOR
LOCATION
SCALE
AND
RATIO
OF
PRINCIPAL
CURVATURES
THIS
INFORMATION
AL
LOWS
POINTS
TO
BE
REJECTED
THAT
HAVE
LOW
CONTRAST
AND
ARE
THEREFORE
SENSITIVE
TO
NOISE
OR
ARE
POORLY
LOCALIZED
ALONG
AN
EDGE
THE
INITIAL
IMPLEMENTATION
OF
THIS
APPROACH
LOWE
SIMPLY
LOCATED
KEYPOINTS
AT
THE
LOCATION
AND
SCALE
OF
THE
CENTRAL
SAMPLE
POINT
HOWEVER
RECENTLY
BROWN
HAS
DEVELOPED
A
METHOD
BROWN
AND
LOWE
FOR
FITTING
A
QUADRATIC
FUNCTION
TO
THE
LOCAL
SAMPLE
POINTS
TO
DETERMINE
THE
INTERPOLATED
LOCATION
OF
THE
MAXIMUM
AND
HIS
EXPERIMENTS
SHOWED
THAT
THIS
PROVIDES
A
SUB
STANTIAL
IMPROVEMENT
TO
MATCHING
AND
STABILITY
HIS
LOWE
APPROACH
USES
THE
TAYLOR
EXPANSION
UP
TO
THE
QUADRATIC
TERMS
OF
THE
SCALE
SPACE
FUNCTION
D
X
Y
Σ
SHIFTED
SO
THAT
THE
ORIGIN
IS
AT
THE
SAMPLE
POINT
D
X
D
D
T
XT
D
X
X
X
WHERE
D
AND
ITS
DERIVATIVES
ARE
EVALUATED
AT
THE
SAMPLE
POINT
AND
X
X
Y
Σ
T
IS
THE
OFFSET
FROM
THIS
POINT
THE
LOCATION
OF
THE
EXTREMUM
Xˆ
IS
DETERMINED
BY
TAK
ING
THE
DERIVATIVE
OF
THIS
FUNCTION
WITH
RESPECT
TO
X
AND
SETTING
IT
TO
ZERO
GIVING
Xˆ
D
D
X
AS
SUGGESTED
BY
BROWN
THE
HESSIAN
AND
DERIVATIVE
OF
D
ARE
APPROXIMATED
BY
USING
DIFFERENCES
OF
NEIGH
BORING
SAMPLE
POINTS
THE
RESULTING
LINEAR
SYSTEM
CAN
BE
SOLVED
WITH
MINIMAL
COST
IF
THE
OFFSET
Xˆ
IS
LARGER
THAN
IN
ANY
DIMENSION
THEN
IT
MEANS
THAT
THE
EX
TREMUM
LIES
CLOSER
TO
A
DIFFERENT
SAMPLE
POINT
IN
THIS
CASE
THE
SAMPLE
POINT
IS
CHANGED
AND
THE
INTERPOLATION
PERFORMED
INSTEAD
ABOUT
THAT
POINT
THE
FINAL
OFFSET
Xˆ
IS
ADDED
TO
THE
LOCATION
OF
ITS
SAMPLE
POINT
TO
GET
THE
INTERPOLATED
ESTIMATE
FOR
THE
LOCATION
OF
THE
EXTREMUM
THE
FUNCTION
VALUE
AT
THE
EXTREMUM
D
Xˆ
IS
USEFUL
FOR
REJECTING
UNSTABLE
EXTREMA
WITH
LOW
CONTRAST
THIS
CAN
BE
OBTAINED
BY
SUBSTITUTING
EQS
INTO
GIVING
D
Xˆ
D
D
T
Xˆ
X
FOR
THE
EXPERIMENTS
IN
THIS
PAPER
ALL
EXTREMA
WITH
A
VALUE
OF
D
Xˆ
LESS
THAN
WERE
DISCARDED
AS
BEFORE
WE
ASSUME
IMAGE
PIXEL
VALUES
IN
THE
RANGE
FIGURE
SHOWS
THE
EFFECTS
OF
KEYPOINT
SELECTION
ON
A
NATURAL
IMAGE
IN
ORDER
TO
AVOID
TOO
MUCH
CLUTTER
A
LOW
RESOLUTION
BY
PIXEL
IMAGE
IS
USED
AND
KEY
POINTS
ARE
SHOWN
AS
VECTORS
GIVING
THE
LOCATION
SCALE
AND
ORIENTATION
OF
EACH
KEYPOINT
ORIENTATION
ASSIGN
MENT
IS
DESCRIBED
BELOW
FIGURE
A
SHOWS
THE
ORIGI
NAL
IMAGE
WHICH
IS
SHOWN
AT
REDUCED
CONTRAST
BEHIND
FIGURE
THIS
FIGURE
SHOWS
THE
STAGES
OF
KEYPOINT
SELECTION
A
THE
PIXEL
ORIGINAL
IMAGE
B
THE
INITIAL
KEYPOINTS
LOCATIONS
AT
MAXIMA
AND
MINIMA
OF
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
KEYPOINTS
ARE
DISPLAYED
AS
VECTORS
INDICATING
SCALE
ORIENTATION
AND
LOCATION
C
AFTER
APPLYING
A
THRESHOLD
ON
MINIMUM
CONTRAST
KEYPOINTS
REMAIN
D
THE
FINAL
KEYPOINTS
THAT
REMAIN
FOLLOWING
AN
ADDITIONAL
THRESHOLD
ON
RATIO
OF
PRINCIPAL
CURVATURES
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
THE
SUBSEQUENT
FIGURES
FIGURE
B
SHOWS
THE
ONE
SO
THAT
Α
RΒ
THEN
KEYPOINTS
AT
ALL
DETECTED
MAXIMA
AND
MINIMA
OF
THE
TR
H
Α
Β
RΒ
Β
R
DIFFERENCE
OF
GAUSSIAN
FUNCTION
WHILE
C
SHOWS
THE
KEYPOINTS
THAT
REMAIN
FOLLOWING
REMOVAL
OF
THOSE
DET
H
ΑΒ
RΒ
R
WITH
A
VALUE
OF
D
Xˆ
LESS
THAN
PART
D
WILL
BE
WHICH
DEPENDS
ONLY
ON
THE
RATIO
OF
THE
EIGENVAL
EXPLAINED
IN
THE
FOLLOWING
SECTION
UES
RATHER
THAN
THEIR
INDIVIDUAL
VALUES
THE
QUANTITY
R
R
IS
AT
A
MINIMUM
WHEN
THE
TWO
EIGENVALUES
ELIMINATING
EDGE
RESPONSES
ARE
EQUAL
AND
IT
INCREASES
WITH
R
THEREFORE
TO
CHECK
THAT
THE
RATIO
OF
PRINCIPAL
CURVATURES
IS
BELOW
SOME
FOR
STABILITY
IT
IS
NOT
SUFFICIENT
TO
REJECT
KEYPOINTS
WITH
THRESHOLD
R
WE
ONLY
NEED
TO
CHECK
LOW
CONTRAST
THE
DIFFERENCE
OF
GAUSSIAN
FUNCTION
WILL
TR
H
R
HAVE
A
STRONG
RESPONSE
ALONG
EDGES
EVEN
IF
THE
LOCA
DET
H
TION
ALONG
THE
EDGE
IS
POORLY
DETERMINED
AND
THEREFORE
R
UNSTABLE
TO
SMALL
AMOUNTS
OF
NOISE
THIS
IS
VERY
EFFICIENT
TO
COMPUTE
WITH
LESS
THAN
A
POORLY
DEFINED
PEAK
IN
THE
DIFFERENCE
OF
GAUSSIAN
FLOATING
POINT
OPERATIONS
REQUIRED
TO
TEST
EACH
KEYPOINT
FUNCTION
WILL
HAVE
A
LARGE
PRINCIPAL
CURVATURE
ACROSS
THE
EXPERIMENTS
IN
THIS
PAPER
USE
A
VALUE
OF
R
THE
EDGE
BUT
A
SMALL
ONE
IN
THE
PERPENDICULAR
DIRECTION
THE
PRINCIPAL
CURVATURES
CAN
BE
COMPUTED
FROM
A
WHICH
ELIMINATES
KEYPOINTS
THAT
HAVE
A
RATIO
BETWEEN
THE
PRINCIPAL
CURVATURES
GREATER
THAN
THE
TRANSI
HESSIAN
MATRIX
H
COMPUTED
AT
THE
LOCATION
AND
SCALE
TION
FROM
FIG
C
TO
D
SHOWS
THE
EFFECTS
OF
THIS
OF
THE
KEYPOINT
OPERATION
DX
X
DX
Y
H
DX
Y
DYY
ORIENTATION
ASSIGNMENT
THE
DERIVATIVES
ARE
ESTIMATED
BY
TAKING
DIFFERENCES
OF
BY
ASSIGNING
A
CONSISTENT
ORIENTATION
TO
EACH
KEYPOINT
BASED
ON
LOCAL
IMAGE
PROPERTIES
THE
KEYPOINT
DESCRIP
NEIGHBORING
SAMPLE
POINTS
TOR
CAN
BE
REPRESENTED
RELATIVE
TO
THIS
ORIENTATION
AND
THE
EIGENVALUES
OF
H
ARE
PROPORTIONAL
TO
THE
PRINCI
THEREFORE
ACHIEVE
INVARIANCE
TO
IMAGE
ROTATION
THIS
AP
PAL
CURVATURES
OF
D
BORROWING
FROM
THE
APPROACH
USED
PROACH
CONTRASTS
WITH
THE
ORIENTATION
INVARIANT
DESCRIP
BY
HARRIS
AND
STEPHENS
WE
CAN
AVOID
EXPLICITLY
TORS
OF
SCHMID
AND
MOHR
IN
WHICH
EACH
IMAGE
COMPUTING
THE
EIGENVALUES
AS
WE
ARE
ONLY
CONCERNED
PROPERTY
IS
BASED
ON
A
ROTATIONALLY
INVARIANT
MEASURE
WITH
THEIR
RATIO
LET
Α
BE
THE
EIGENVALUE
WITH
THE
LARGEST
THE
DISADVANTAGE
OF
THAT
APPROACH
IS
THAT
IT
LIMITS
THE
MAGNITUDE
AND
Β
BE
THE
SMALLER
ONE
THEN
WE
CAN
COM
DESCRIPTORS
THAT
CAN
BE
USED
AND
DISCARDS
IMAGE
INFOR
PUTE
THE
SUM
OF
THE
EIGENVALUES
FROM
THE
TRACE
OF
H
AND
MATION
BY
NOT
REQUIRING
ALL
MEASURES
TO
BE
BASED
ON
A
THEIR
PRODUCT
FROM
THE
DETERMINANT
CONSISTENT
ROTATION
FOLLOWING
EXPERIMENTATION
WITH
A
NUMBER
OF
AP
TR
H
DX
X
DYY
Α
Β
PROACHES
TO
ASSIGNING
A
LOCAL
ORIENTATION
THE
FOLLOW
ING
APPROACH
WAS
FOUND
TO
GIVE
THE
MOST
STABLE
RESULTS
DET
H
DX
X
DYY
DX
Y
ΑΒ
THE
SCALE
OF
THE
KEYPOINT
IS
USED
TO
SELECT
THE
GAUSSIAN
SMOOTHED
IMAGE
L
WITH
THE
CLOSEST
SCALE
SO
THAT
ALL
IN
THE
UNLIKELY
EVENT
THAT
THE
DETERMINANT
IS
NEGATIVE
COMPUTATIONS
ARE
PERFORMED
IN
A
SCALE
INVARIANT
MAN
THE
CURVATURES
HAVE
DIFFERENT
SIGNS
SO
THE
POINT
IS
DIS
NER
FOR
EACH
IMAGE
SAMPLE
L
X
Y
AT
THIS
SCALE
THE
CARDED
AS
NOT
BEING
AN
EXTREMUM
LET
R
BE
THE
RATIO
BE
GRADIENT
MAGNITUDE
M
X
Y
AND
ORIENTATION
Θ
X
Y
TWEEN
THE
LARGEST
MAGNITUDE
EIGENVALUE
AND
THE
SMALLER
IS
PRECOMPUTED
USING
PIXEL
DIFFERENCES
M
X
Y
Y
L
X
Y
L
X
Y
L
X
Y
Θ
X
Y
X
L
X
Y
L
X
Y
L
X
TAN
L
X
Y
Y
LOWE
AN
ORIENTATION
HISTOGRAM
IS
FORMED
FROM
THE
GRADIENT
ORIENTATIONS
OF
SAMPLE
POINTS
WITHIN
A
REGION
AROUND
THE
KEYPOINT
THE
ORIENTATION
HISTOGRAM
HAS
BINS
COV
ERING
THE
DEGREE
RANGE
OF
ORIENTATIONS
EACH
SAM
PLE
ADDED
TO
THE
HISTOGRAM
IS
WEIGHTED
BY
ITS
GRADIENT
MAGNITUDE
AND
BY
A
GAUSSIAN
WEIGHTED
CIRCULAR
WIN
DOW
WITH
A
Σ
THAT
IS
TIMES
THAT
OF
THE
SCALE
OF
THE
KEYPOINT
PEAKS
IN
THE
ORIENTATION
HISTOGRAM
CORRESPOND
TO
DOMINANT
DIRECTIONS
OF
LOCAL
GRADIENTS
THE
HIGHEST
PEAK
IN
THE
HISTOGRAM
IS
DETECTED
AND
THEN
ANY
OTHER
LO
CAL
PEAK
THAT
IS
WITHIN
OF
THE
HIGHEST
PEAK
IS
USED
TO
ALSO
CREATE
A
KEYPOINT
WITH
THAT
ORIENTATION
THEREFORE
FOR
LOCATIONS
WITH
MULTIPLE
PEAKS
OF
SIMILAR
MAGNITUDE
THERE
WILL
BE
MULTIPLE
KEYPOINTS
CREATED
AT
THE
SAME
LO
CATION
AND
SCALE
BUT
DIFFERENT
ORIENTATIONS
ONLY
ABOUT
OF
POINTS
ARE
ASSIGNED
MULTIPLE
ORIENTATIONS
BUT
THESE
CONTRIBUTE
SIGNIFICANTLY
TO
THE
STABILITY
OF
MATCH
ING
FINALLY
A
PARABOLA
IS
FIT
TO
THE
HISTOGRAM
VALUES
CLOSEST
TO
EACH
PEAK
TO
INTERPOLATE
THE
PEAK
POSITION
FOR
BETTER
ACCURACY
FIGURE
SHOWS
THE
EXPERIMENTAL
STABILITY
OF
LOCA
TION
SCALE
AND
ORIENTATION
ASSIGNMENT
UNDER
DIFFER
ING
AMOUNTS
OF
IMAGE
NOISE
AS
BEFORE
THE
IMAGES
ARE
ROTATED
AND
SCALED
BY
RANDOM
AMOUNTS
THE
TOP
LINE
SHOWS
THE
STABILITY
OF
KEYPOINT
LOCATION
AND
SCALE
AS
SIGNMENT
THE
SECOND
LINE
SHOWS
THE
STABILITY
OF
MATCH
ING
WHEN
THE
ORIENTATION
ASSIGNMENT
IS
ALSO
REQUIRED
TO
BE
WITHIN
DEGREES
AS
SHOWN
BY
THE
GAP
BETWEEN
THE
TOP
TWO
LINES
THE
ORIENTATION
ASSIGNMENT
REMAINS
ACCURATE
OF
THE
TIME
EVEN
AFTER
ADDITION
OF
FIGURE
THE
TOP
LINE
IN
THE
GRAPH
SHOWS
THE
PERCENT
OF
KEYPOINT
LOCATIONS
AND
SCALES
THAT
ARE
REPEATABLY
DETECTED
AS
A
FUNCTION
OF
PIXEL
NOISE
THE
SECOND
LINE
SHOWS
THE
REPEATABILITY
AFTER
ALSO
REQUIRING
AGREEMENT
IN
ORIENTATION
THE
BOTTOM
LINE
SHOWS
THE
FINAL
PERCENT
OF
DESCRIPTORS
CORRECTLY
MATCHED
TO
A
LARGE
DATABASE
PIXEL
NOISE
EQUIVALENT
TO
A
CAMERA
PROVIDING
LESS
THAN
BITS
OF
PRECISION
THE
MEASURED
VARIANCE
OF
ORIENTA
TION
FOR
THE
CORRECT
MATCHES
IS
ABOUT
DEGREES
RISING
TO
DEGREES
FOR
NOISE
THE
BOTTOM
LINE
IN
FIG
SHOWS
THE
FINAL
ACCURACY
OF
CORRECTLY
MATCHING
A
KEY
POINT
DESCRIPTOR
TO
A
DATABASE
OF
KEYPOINTS
TO
BE
DISCUSSED
BELOW
AS
THIS
GRAPH
SHOWS
THE
SIFT
FEA
TURES
ARE
RESISTANT
TO
EVEN
LARGE
AMOUNTS
OF
PIXEL
NOISE
AND
THE
MAJOR
CAUSE
OF
ERROR
IS
THE
INITIAL
LOCATION
AND
SCALE
DETECTION
THE
LOCAL
IMAGE
DESCRIPTOR
THE
PREVIOUS
OPERATIONS
HAVE
ASSIGNED
AN
IMAGE
LO
CATION
SCALE
AND
ORIENTATION
TO
EACH
KEYPOINT
THESE
PARAMETERS
IMPOSE
A
REPEATABLE
LOCAL
COORDINATE
SYSTEM
IN
WHICH
TO
DESCRIBE
THE
LOCAL
IMAGE
REGION
AND
THEREFORE
PROVIDE
INVARIANCE
TO
THESE
PARAMETERS
THE
NEXT
STEP
IS
TO
COMPUTE
A
DESCRIPTOR
FOR
THE
LOCAL
IMAGE
REGION
THAT
IS
HIGHLY
DISTINCTIVE
YET
IS
AS
INVARIANT
AS
POSSIBLE
TO
REMAINING
VARIATIONS
SUCH
AS
CHANGE
IN
ILLUMINATION
OR
VIEWPOINT
ONE
OBVIOUS
APPROACH
WOULD
BE
TO
SAMPLE
THE
LOCAL
IMAGE
INTENSITIES
AROUND
THE
KEYPOINT
AT
THE
APPROPRIATE
SCALE
AND
TO
MATCH
THESE
USING
A
NORMALIZED
CORRELA
TION
MEASURE
HOWEVER
SIMPLE
CORRELATION
OF
IMAGE
PATCHES
IS
HIGHLY
SENSITIVE
TO
CHANGES
THAT
CAUSE
MIS
REGISTRATION
OF
SAMPLES
SUCH
AS
AFFINE
OR
VIEWPOINT
CHANGE
OR
NON
RIGID
DEFORMATIONS
A
BETTER
APPROACH
HAS
BEEN
DEMONSTRATED
BY
EDELMAN
ET
AL
THEIR
PROPOSED
REPRESENTATION
WAS
BASED
UPON
A
MODEL
OF
BIOLOGICAL
VISION
IN
PARTICULAR
OF
COMPLEX
NEURONS
IN
PRIMARY
VISUAL
CORTEX
THESE
COMPLEX
NEURONS
RESPOND
TO
A
GRADIENT
AT
A
PARTICULAR
ORIENTATION
AND
SPATIAL
FRE
QUENCY
BUT
THE
LOCATION
OF
THE
GRADIENT
ON
THE
RETINA
IS
ALLOWED
TO
SHIFT
OVER
A
SMALL
RECEPTIVE
FIELD
RATHER
THAN
BEING
PRECISELY
LOCALIZED
EDELMAN
ET
AL
HYPOTH
ESIZED
THAT
THE
FUNCTION
OF
THESE
COMPLEX
NEURONS
WAS
TO
ALLOW
FOR
MATCHING
AND
RECOGNITION
OF
OBJECTS
FROM
A
RANGE
OF
VIEWPOINTS
THEY
HAVE
PERFORMED
DE
TAILED
EXPERIMENTS
USING
COMPUTER
MODELS
OF
OBJECT
AND
ANIMAL
SHAPES
WHICH
SHOW
THAT
MATCHING
GRADI
ENTS
WHILE
ALLOWING
FOR
SHIFTS
IN
THEIR
POSITION
RESULTS
IN
MUCH
BETTER
CLASSIFICATION
UNDER
ROTATION
FOR
EX
AMPLE
RECOGNITION
ACCURACY
FOR
OBJECTS
ROTATED
IN
DEPTH
BY
DEGREES
INCREASED
FROM
FOR
CORRELATION
OF
GRADIENTS
TO
USING
THE
COMPLEX
CELL
MODEL
OUR
IMPLEMENTATION
DESCRIBED
BELOW
WAS
INSPIRED
BY
THIS
IDEA
BUT
ALLOWS
FOR
POSITIONAL
SHIFT
USING
A
DIFFERENT
COMPUTATIONAL
MECHANISM
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
FIGURE
A
KEYPOINT
DESCRIPTOR
IS
CREATED
BY
FIRST
COMPUTING
THE
GRADIENT
MAGNITUDE
AND
ORIENTATION
AT
EACH
IMAGE
SAMPLE
POINT
IN
A
REGION
AROUND
THE
KEYPOINT
LOCATION
AS
SHOWN
ON
THE
LEFT
THESE
ARE
WEIGHTED
BY
A
GAUSSIAN
WINDOW
INDICATED
BY
THE
OVERLAID
CIRCLE
THESE
SAMPLES
ARE
THEN
ACCUMULATED
INTO
ORIENTATION
HISTOGRAMS
SUMMARIZING
THE
CONTENTS
OVER
SUBREGIONS
AS
SHOWN
ON
THE
RIGHT
WITH
THE
LENGTH
OF
EACH
ARROW
CORRESPONDING
TO
THE
SUM
OF
THE
GRADIENT
MAGNITUDES
NEAR
THAT
DIRECTION
WITHIN
THE
REGION
THIS
FIGURE
SHOWS
A
DESCRIPTOR
ARRAY
COMPUTED
FROM
AN
SET
OF
SAMPLES
WHEREAS
THE
EXPERIMENTS
IN
THIS
PAPER
USE
DESCRIPTORS
COMPUTED
FROM
A
SAMPLE
ARRAY
DESCRIPTOR
REPRESENTATION
FIGURE
ILLUSTRATES
THE
COMPUTATION
OF
THE
KEYPOINT
DE
SCRIPTOR
FIRST
THE
IMAGE
GRADIENT
MAGNITUDES
AND
ORI
ENTATIONS
ARE
SAMPLED
AROUND
THE
KEYPOINT
LOCATION
USING
THE
SCALE
OF
THE
KEYPOINT
TO
SELECT
THE
LEVEL
OF
GAUSSIAN
BLUR
FOR
THE
IMAGE
IN
ORDER
TO
ACHIEVE
ORI
ENTATION
INVARIANCE
THE
COORDINATES
OF
THE
DESCRIPTOR
AND
THE
GRADIENT
ORIENTATIONS
ARE
ROTATED
RELATIVE
TO
THE
KEYPOINT
ORIENTATION
FOR
EFFICIENCY
THE
GRADIENTS
ARE
PRECOMPUTED
FOR
ALL
LEVELS
OF
THE
PYRAMID
AS
DE
SCRIBED
IN
SECTION
THESE
ARE
ILLUSTRATED
WITH
SMALL
ARROWS
AT
EACH
SAMPLE
LOCATION
ON
THE
LEFT
SIDE
OF
FIG
A
GAUSSIAN
WEIGHTING
FUNCTION
WITH
Σ
EQUAL
TO
ONE
HALF
THE
WIDTH
OF
THE
DESCRIPTOR
WINDOW
IS
USED
TO
AS
SIGN
A
WEIGHT
TO
THE
MAGNITUDE
OF
EACH
SAMPLE
POINT
THIS
IS
ILLUSTRATED
WITH
A
CIRCULAR
WINDOW
ON
THE
LEFT
SIDE
OF
FIG
ALTHOUGH
OF
COURSE
THE
WEIGHT
FALLS
OFF
SMOOTHLY
THE
PURPOSE
OF
THIS
GAUSSIAN
WINDOW
IS
TO
AVOID
SUDDEN
CHANGES
IN
THE
DESCRIPTOR
WITH
SMALL
CHANGES
IN
THE
POSITION
OF
THE
WINDOW
AND
TO
GIVE
LESS
EMPHASIS
TO
GRADIENTS
THAT
ARE
FAR
FROM
THE
CENTER
OF
THE
DESCRIPTOR
AS
THESE
ARE
MOST
AFFECTED
BY
MISREGISTRATION
ERRORS
THE
KEYPOINT
DESCRIPTOR
IS
SHOWN
ON
THE
RIGHT
SIDE
OF
FIG
IT
ALLOWS
FOR
SIGNIFICANT
SHIFT
IN
GRADIENT
PO
SITIONS
BY
CREATING
ORIENTATION
HISTOGRAMS
OVER
SAMPLE
REGIONS
THE
FIGURE
SHOWS
EIGHT
DIRECTIONS
FOR
EACH
ORIENTATION
HISTOGRAM
WITH
THE
LENGTH
OF
EACH
AR
ROW
CORRESPONDING
TO
THE
MAGNITUDE
OF
THAT
HISTOGRAM
ENTRY
A
GRADIENT
SAMPLE
ON
THE
LEFT
CAN
SHIFT
UP
TO
SAMPLE
POSITIONS
WHILE
STILL
CONTRIBUTING
TO
THE
SAME
HISTOGRAM
ON
THE
RIGHT
THEREBY
ACHIEVING
THE
OBJECTIVE
OF
ALLOWING
FOR
LARGER
LOCAL
POSITIONAL
SHIFTS
IT
IS
IMPORTANT
TO
AVOID
ALL
BOUNDARY
AFFECTS
IN
WHICH
THE
DESCRIPTOR
ABRUPTLY
CHANGES
AS
A
SAMPLE
SHIFTS
SMOOTHLY
FROM
BEING
WITHIN
ONE
HISTOGRAM
TO
ANOTHER
OR
FROM
ONE
ORIENTATION
TO
ANOTHER
THEREFORE
TRILIN
EAR
INTERPOLATION
IS
USED
TO
DISTRIBUTE
THE
VALUE
OF
EACH
GRADIENT
SAMPLE
INTO
ADJACENT
HISTOGRAM
BINS
IN
OTHER
WORDS
EACH
ENTRY
INTO
A
BIN
IS
MULTIPLIED
BY
A
WEIGHT
OF
D
FOR
EACH
DIMENSION
WHERE
D
IS
THE
DISTANCE
OF
THE
SAMPLE
FROM
THE
CENTRAL
VALUE
OF
THE
BIN
AS
MEASURED
IN
UNITS
OF
THE
HISTOGRAM
BIN
SPACING
THE
DESCRIPTOR
IS
FORMED
FROM
A
VECTOR
CONTAINING
THE
VALUES
OF
ALL
THE
ORIENTATION
HISTOGRAM
ENTRIES
COR
RESPONDING
TO
THE
LENGTHS
OF
THE
ARROWS
ON
THE
RIGHT
SIDE
OF
FIG
THE
FIGURE
SHOWS
A
ARRAY
OF
ORIENTA
TION
HISTOGRAMS
WHEREAS
OUR
EXPERIMENTS
BELOW
SHOW
THAT
THE
BEST
RESULTS
ARE
ACHIEVED
WITH
A
ARRAY
OF
HISTOGRAMS
WITH
ORIENTATION
BINS
IN
EACH
THEREFORE
THE
EXPERIMENTS
IN
THIS
PAPER
USE
A
ELEMENT
FEATURE
VECTOR
FOR
EACH
KEYPOINT
FINALLY
THE
FEATURE
VECTOR
IS
MODIFIED
TO
REDUCE
THE
EFFECTS
OF
ILLUMINATION
CHANGE
FIRST
THE
VECTOR
IS
NOR
MALIZED
TO
UNIT
LENGTH
A
CHANGE
IN
IMAGE
CONTRAST
IN
WHICH
EACH
PIXEL
VALUE
IS
MULTIPLIED
BY
A
CONSTANT
WILL
MULTIPLY
GRADIENTS
BY
THE
SAME
CONSTANT
SO
THIS
CONTRAST
CHANGE
WILL
BE
CANCELED
BY
VECTOR
NORMALIZATION
A
BRIGHTNESS
CHANGE
IN
WHICH
A
CONSTANT
IS
ADDED
TO
EACH
IMAGE
PIXEL
WILL
NOT
AFFECT
THE
GRADIENT
VALUES
AS
THEY
ARE
COMPUTED
FROM
PIXEL
DIFFERENCES
THEREFORE
THE
DE
SCRIPTOR
IS
INVARIANT
TO
AFFINE
CHANGES
IN
ILLUMINATION
HOWEVER
NON
LINEAR
ILLUMINATION
CHANGES
CAN
ALSO
OC
CUR
DUE
TO
CAMERA
SATURATION
OR
DUE
TO
ILLUMINATION
LOWE
CHANGES
THAT
AFFECT
SURFACES
WITH
DIFFERING
ORIENTA
TIONS
BY
DIFFERENT
AMOUNTS
THESE
EFFECTS
CAN
CAUSE
A
LARGE
CHANGE
IN
RELATIVE
MAGNITUDES
FOR
SOME
GRADIENTS
BUT
ARE
LESS
LIKELY
TO
AFFECT
THE
GRADIENT
ORIENTATIONS
THEREFORE
WE
REDUCE
THE
INFLUENCE
OF
LARGE
GRADIENT
MAGNITUDES
BY
THRESHOLDING
THE
VALUES
IN
THE
UNIT
FEA
TURE
VECTOR
TO
EACH
BE
NO
LARGER
THAN
AND
THEN
RENOR
MALIZING
TO
UNIT
LENGTH
THIS
MEANS
THAT
MATCHING
THE
MAGNITUDES
FOR
LARGE
GRADIENTS
IS
NO
LONGER
AS
IMPOR
TANT
AND
THAT
THE
DISTRIBUTION
OF
ORIENTATIONS
HAS
GREATER
EMPHASIS
THE
VALUE
OF
WAS
DETERMINED
EXPERIMEN
TALLY
USING
IMAGES
CONTAINING
DIFFERING
ILLUMINATIONS
FOR
THE
SAME
OBJECTS
DESCRIPTOR
TESTING
THERE
ARE
TWO
PARAMETERS
THAT
CAN
BE
USED
TO
VARY
THE
COMPLEXITY
OF
THE
DESCRIPTOR
THE
NUMBER
OF
ORIENTA
TIONS
R
IN
THE
HISTOGRAMS
AND
THE
WIDTH
N
OF
THE
N
N
ARRAY
OF
ORIENTATION
HISTOGRAMS
THE
SIZE
OF
THE
RESULTING
DESCRIPTOR
VECTOR
IS
AS
THE
COMPLEXITY
OF
THE
DESCRIPTOR
GROWS
IT
WILL
BE
ABLE
TO
DISCRIMINATE
BET
TER
IN
A
LARGE
DATABASE
BUT
IT
WILL
ALSO
BE
MORE
SENSITIVE
TO
SHAPE
DISTORTIONS
AND
OCCLUSION
FIGURE
SHOWS
EXPERIMENTAL
RESULTS
IN
WHICH
THE
NUMBER
OF
ORIENTATIONS
AND
SIZE
OF
THE
DESCRIPTOR
WERE
VARIED
THE
GRAPH
WAS
GENERATED
FOR
A
VIEWPOINT
TRANS
FORMATION
IN
WHICH
A
PLANAR
SURFACE
IS
TILTED
BY
DE
GREES
AWAY
FROM
THE
VIEWER
AND
IMAGE
NOISE
IS
ADDED
THIS
IS
NEAR
THE
LIMITS
OF
RELIABLE
MATCHING
AS
IT
IS
IN
THESE
MORE
DIFFICULT
CASES
THAT
DESCRIPTOR
PERFOR
MANCE
IS
MOST
IMPORTANT
THE
RESULTS
SHOW
THE
PERCENT
OF
KEYPOINTS
THAT
FIND
A
CORRECT
MATCH
TO
THE
SINGLE
CLOS
EST
NEIGHBOR
AMONG
A
DATABASE
OF
KEYPOINTS
THE
GRAPH
SHOWS
THAT
A
SINGLE
ORIENTATION
HISTOGRAM
N
IS
VERY
POOR
AT
DISCRIMINATING
BUT
THE
RESULTS
CONTINUE
TO
IMPROVE
UP
TO
A
ARRAY
OF
HISTOGRAMS
WITH
ORIENTATIONS
AFTER
THAT
ADDING
MORE
ORIENTA
TIONS
OR
A
LARGER
DESCRIPTOR
CAN
ACTUALLY
HURT
MATCHING
BY
MAKING
THE
DESCRIPTOR
MORE
SENSITIVE
TO
DISTORTION
THESE
RESULTS
WERE
BROADLY
SIMILAR
FOR
OTHER
DEGREES
OF
VIEWPOINT
CHANGE
AND
NOISE
ALTHOUGH
IN
SOME
SIM
PLER
CASES
DISCRIMINATION
CONTINUED
TO
IMPROVE
FROM
ALREADY
HIGH
LEVELS
WITH
AND
HIGHER
DESCRIPTOR
SIZES
THROUGHOUT
THIS
PAPER
WE
USE
A
DESCRIPTOR
WITH
ORIENTATIONS
RESULTING
IN
FEATURE
VECTORS
WITH
DIMENSIONS
WHILE
THE
DIMENSIONALITY
OF
THE
DESCRIPTOR
MAY
SEEM
HIGH
WE
HAVE
FOUND
THAT
IT
CONSISTENTLY
PER
FORMS
BETTER
THAN
LOWER
DIMENSIONAL
DESCRIPTORS
ON
A
RANGE
OF
MATCHING
TASKS
AND
THAT
THE
COMPUTATIONAL
COST
OF
MATCHING
REMAINS
LOW
WHEN
USING
THE
APPROXIMATE
NEAREST
NEIGHBOR
METHODS
DESCRIBED
BELOW
SENSITIVITY
TO
AFFINE
CHANGE
THE
SENSITIVITY
OF
THE
DESCRIPTOR
TO
AFFINE
CHANGE
IS
EX
AMINED
IN
FIG
THE
GRAPH
SHOWS
THE
RELIABILITY
OF
KEYPOINT
LOCATION
AND
SCALE
SELECTION
ORIENTATION
AS
SIGNMENT
AND
NEAREST
NEIGHBOR
MATCHING
TO
A
DATABASE
AS
A
FUNCTION
OF
ROTATION
IN
DEPTH
OF
A
PLANE
AWAY
FROM
FIGURE
THIS
GRAPH
SHOWS
THE
PERCENT
OF
KEYPOINTS
GIVING
THE
CORRECT
MATCH
TO
A
DATABASE
OF
KEYPOINTS
AS
A
FUNCTION
OF
WIDTH
OF
THE
N
N
KEYPOINT
DESCRIPTOR
AND
THE
NUMBER
OF
ORIENTATIONS
IN
EACH
HISTOGRAM
THE
GRAPH
IS
COMPUTED
FOR
IMAGES
WITH
AFFINE
VIEWPOINT
CHANGE
OF
DEGREES
AND
ADDITION
OF
NOISE
FIGURE
THIS
GRAPH
SHOWS
THE
STABILITY
OF
DETECTION
FOR
KEYPOINT
LOCATION
ORIENTATION
AND
FINAL
MATCHING
TO
A
DATABASE
AS
A
FUNCTION
OF
AFFINE
DISTORTION
THE
DEGREE
OF
AFFINE
DISTORTION
IS
EXPRESSED
IN
TERMS
OF
THE
EQUIVALENT
VIEWPOINT
ROTATION
IN
DEPTH
FOR
A
PLANAR
SURFACE
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
A
VIEWER
IT
CAN
BE
SEEN
THAT
EACH
STAGE
OF
COMPUTATION
HAS
REDUCED
REPEATABILITY
WITH
INCREASING
AFFINE
DISTOR
TION
BUT
THAT
THE
FINAL
MATCHING
ACCURACY
REMAINS
ABOVE
OUT
TO
A
DEGREE
CHANGE
IN
VIEWPOINT
TO
ACHIEVE
RELIABLE
MATCHING
OVER
A
WIDER
VIEWPOINT
ANGLE
ONE
OF
THE
AFFINE
INVARIANT
DETECTORS
COULD
BE
USED
TO
SELECT
AND
RESAMPLE
IMAGE
REGIONS
AS
DISCUSSED
IN
SECTION
AS
MENTIONED
THERE
NONE
OF
THESE
AP
PROACHES
IS
TRULY
AFFINE
INVARIANT
AS
THEY
ALL
START
FROM
INITIAL
FEATURE
LOCATIONS
DETERMINED
IN
A
NON
AFFINE
INVARIANT
MANNER
IN
WHAT
APPEARS
TO
BE
THE
MOST
AFFINE
INVARIANT
METHOD
MIKOLAJCZYK
HAS
PROPOSED
AND
RUN
DETAILED
EXPERIMENTS
WITH
THE
HARRIS
AFFINE
DE
TECTOR
HE
FOUND
THAT
ITS
KEYPOINT
REPEATABILITY
IS
BELOW
THAT
GIVEN
HERE
OUT
TO
ABOUT
A
DEGREE
VIEWPOINT
AN
GLE
BUT
THAT
IT
THEN
RETAINS
CLOSE
TO
REPEATABILITY
OUT
TO
AN
ANGLE
OF
DEGREES
WHICH
PROVIDES
BETTER
PERFORMANCE
FOR
EXTREME
AFFINE
CHANGES
THE
DISADVAN
TAGES
ARE
A
MUCH
HIGHER
COMPUTATIONAL
COST
A
REDUC
TION
IN
THE
NUMBER
OF
KEYPOINTS
AND
POORER
STABILITY
FOR
SMALL
AFFINE
CHANGES
DUE
TO
ERRORS
IN
ASSIGNING
A
CONSIS
TENT
AFFINE
FRAME
UNDER
NOISE
IN
PRACTICE
THE
ALLOWABLE
RANGE
OF
ROTATION
FOR
OBJECTS
IS
CONSIDERABLY
LESS
THAN
FOR
PLANAR
SURFACES
SO
AFFINE
INVARIANCE
IS
USUALLY
NOT
THE
LIMITING
FACTOR
IN
THE
ABILITY
TO
MATCH
ACROSS
VIEWPOINT
CHANGE
IF
A
WIDE
RANGE
OF
AFFINE
INVARIANCE
IS
DESIRED
SUCH
AS
FOR
A
SURFACE
THAT
IS
KNOWN
TO
BE
PLA
NAR
THEN
A
SIMPLE
SOLUTION
IS
TO
ADOPT
THE
APPROACH
OF
PRITCHARD
AND
HEIDRICH
IN
WHICH
ADDITIONAL
SIFT
FEATURES
ARE
GENERATED
FROM
AFFINE
TRANSFORMED
VER
SIONS
OF
THE
TRAINING
IMAGE
CORRESPONDING
TO
DEGREE
VIEWPOINT
CHANGES
THIS
ALLOWS
FOR
THE
USE
OF
STANDARD
SIFT
FEATURES
WITH
NO
ADDITIONAL
COST
WHEN
PROCESS
ING
THE
IMAGE
TO
BE
RECOGNIZED
BUT
RESULTS
IN
AN
IN
CREASE
IN
THE
SIZE
OF
THE
FEATURE
DATABASE
BY
A
FACTOR
OF
MATCHING
TO
LARGE
DATABASES
AN
IMPORTANT
REMAINING
ISSUE
FOR
MEASURING
THE
DIS
TINCTIVENESS
OF
FEATURES
IS
HOW
THE
RELIABILITY
OF
MATCH
ING
VARIES
AS
A
FUNCTION
OF
THE
NUMBER
OF
FEATURES
IN
THE
DATABASE
BEING
MATCHED
MOST
OF
THE
EXAMPLES
IN
THIS
PAPER
ARE
GENERATED
USING
A
DATABASE
OF
IM
AGES
WITH
ABOUT
KEYPOINTS
FIGURE
SHOWS
HOW
THE
MATCHING
RELIABILITY
VARIES
AS
A
FUNCTION
OF
DATABASE
SIZE
THIS
FIGURE
WAS
GENERATED
USING
A
LARGER
DATABASE
OF
IMAGES
WITH
A
VIEWPOINT
DEPTH
ROTA
TION
OF
DEGREES
AND
IMAGE
NOISE
IN
ADDITION
TO
THE
USUAL
RANDOM
IMAGE
ROTATION
AND
SCALE
CHANGE
FIGURE
THE
DASHED
LINE
SHOWS
THE
PERCENT
OF
KEYPOINTS
COR
RECTLY
MATCHED
TO
A
DATABASE
AS
A
FUNCTION
OF
DATABASE
SIZE
USING
A
LOGARITHMIC
SCALE
THE
SOLID
LINE
SHOWS
THE
PERCENT
OF
KEYPOINTS
ASSIGNED
THE
CORRECT
LOCATION
SCALE
AND
ORIENTATION
IMAGES
HAD
RAN
DOM
SCALE
AND
ROTATION
CHANGES
AN
AFFINE
TRANSFORM
OF
DEGREES
AND
IMAGE
NOISE
OF
ADDED
PRIOR
TO
MATCHING
THE
DASHED
LINE
SHOWS
THE
PORTION
OF
IMAGE
FEATURES
FOR
WHICH
THE
NEAREST
NEIGHBOR
IN
THE
DATABASE
WAS
THE
CORRECT
MATCH
AS
A
FUNCTION
OF
DATABASE
SIZE
SHOWN
ON
A
LOGARITHMIC
SCALE
THE
LEFTMOST
POINT
IS
MATCHING
AGAINST
FEATURES
FROM
ONLY
A
SINGLE
IMAGE
WHILE
THE
RIGHTMOST
POINT
IS
SELECTING
MATCHES
FROM
A
DATABASE
OF
ALL
FEATURES
FROM
THE
IMAGES
IT
CAN
BE
SEEN
THAT
MATCHING
RELIABILITY
DOES
DECREASE
AS
A
FUNCTION
OF
THE
NUMBER
OF
DISTRACTORS
YET
ALL
INDICATIONS
ARE
THAT
MANY
CORRECT
MATCHES
WILL
CONTINUE
TO
BE
FOUND
OUT
TO
VERY
LARGE
DATABASE
SIZES
THE
SOLID
LINE
IS
THE
PERCENTAGE
OF
KEYPOINTS
THAT
WERE
IDENTIFIED
AT
THE
CORRECT
MATCHING
LOCATION
AND
ORIENTATION
IN
THE
TRANSFORMED
IMAGE
SO
IT
IS
ONLY
THESE
POINTS
THAT
HAVE
ANY
CHANCE
OF
HAVING
MATCHING
DE
SCRIPTORS
IN
THE
DATABASE
THE
REASON
THIS
LINE
IS
FLAT
IS
THAT
THE
TEST
WAS
RUN
OVER
THE
FULL
DATABASE
FOR
EACH
VALUE
WHILE
ONLY
VARYING
THE
PORTION
OF
THE
DATABASE
USED
FOR
DISTRACTORS
IT
IS
OF
INTEREST
THAT
THE
GAP
BE
TWEEN
THE
TWO
LINES
IS
SMALL
INDICATING
THAT
MATCHING
FAILURES
ARE
DUE
MORE
TO
ISSUES
WITH
INITIAL
FEATURE
LO
CALIZATION
AND
ORIENTATION
ASSIGNMENT
THAN
TO
PROBLEMS
WITH
FEATURE
DISTINCTIVENESS
EVEN
OUT
TO
LARGE
DATABASE
SIZES
APPLICATION
TO
OBJECT
RECOGNITION
THE
MAJOR
TOPIC
OF
THIS
PAPER
IS
THE
DERIVATION
OF
DIS
TINCTIVE
INVARIANT
KEYPOINTS
AS
DESCRIBED
ABOVE
TO
LOWE
DEMONSTRATE
THEIR
APPLICATION
WE
WILL
NOW
GIVE
A
BRIEF
DESCRIPTION
OF
THEIR
USE
FOR
OBJECT
RECOGNITION
IN
THE
PRESENCE
OF
CLUTTER
AND
OCCLUSION
MORE
DETAILS
ON
AP
PLICATIONS
OF
THESE
FEATURES
TO
RECOGNITION
ARE
AVAILABLE
IN
OTHER
PAPERS
LOWE
SE
ET
AL
OBJECT
RECOGNITION
IS
PERFORMED
BY
FIRST
MATCHING
EACH
KEYPOINT
INDEPENDENTLY
TO
THE
DATABASE
OF
KEY
POINTS
EXTRACTED
FROM
TRAINING
IMAGES
MANY
OF
THESE
INITIAL
MATCHES
WILL
BE
INCORRECT
DUE
TO
AMBIGUOUS
FEA
TURES
OR
FEATURES
THAT
ARISE
FROM
BACKGROUND
CLUTTER
THEREFORE
CLUSTERS
OF
AT
LEAST
FEATURES
ARE
FIRST
IDENTI
FIED
THAT
AGREE
ON
AN
OBJECT
AND
ITS
POSE
AS
THESE
CLUSTERS
HAVE
A
MUCH
HIGHER
PROBABILITY
OF
BEING
CORRECT
THAN
IN
DIVIDUAL
FEATURE
MATCHES
THEN
EACH
CLUSTER
IS
CHECKED
BY
PERFORMING
A
DETAILED
GEOMETRIC
FIT
TO
THE
MODEL
AND
THE
RESULT
IS
USED
TO
ACCEPT
OR
REJECT
THE
INTERPRETATION
KEYPOINT
MATCHING
THE
BEST
CANDIDATE
MATCH
FOR
EACH
KEYPOINT
IS
FOUND
BY
IDENTIFYING
ITS
NEAREST
NEIGHBOR
IN
THE
DATABASE
OF
KEYPOINTS
FROM
TRAINING
IMAGES
THE
NEAREST
NEIGHBOR
IS
DEFINED
AS
THE
KEYPOINT
WITH
MINIMUM
EUCLIDEAN
DISTANCE
FOR
THE
INVARIANT
DESCRIPTOR
VECTOR
AS
WAS
DE
SCRIBED
IN
SECTION
HOWEVER
MANY
FEATURES
FROM
AN
IMAGE
WILL
NOT
HAVE
ANY
CORRECT
MATCH
IN
THE
TRAINING
DATABASE
BECAUSE
THEY
ARISE
FROM
BACKGROUND
CLUTTER
OR
WERE
NOT
DETECTED
IN
THE
TRAINING
IMAGES
THEREFORE
IT
WOULD
BE
USEFUL
TO
HAVE
A
WAY
TO
DISCARD
FEATURES
THAT
DO
NOT
HAVE
ANY
GOOD
MATCH
TO
THE
DATABASE
A
GLOBAL
THRESHOLD
ON
DIS
TANCE
TO
THE
CLOSEST
FEATURE
DOES
NOT
PERFORM
WELL
AS
SOME
DESCRIPTORS
ARE
MUCH
MORE
DISCRIMINATIVE
THAN
OTHERS
A
MORE
EFFECTIVE
MEASURE
IS
OBTAINED
BY
COM
PARING
THE
DISTANCE
OF
THE
CLOSEST
NEIGHBOR
TO
THAT
OF
THE
SECOND
CLOSEST
NEIGHBOR
IF
THERE
ARE
MULTIPLE
TRAINING
IMAGES
OF
THE
SAME
OBJECT
THEN
WE
DEFINE
THE
SECOND
CLOSEST
NEIGHBOR
AS
BEING
THE
CLOSEST
NEIGHBOR
THAT
IS
KNOWN
TO
COME
FROM
A
DIFFERENT
OBJECT
THAN
THE
FIRST
SUCH
AS
BY
ONLY
USING
IMAGES
KNOWN
TO
CONTAIN
DIFFERENT
OBJECTS
THIS
MEASURE
PERFORMS
WELL
BECAUSE
CORRECT
MATCHES
NEED
TO
HAVE
THE
CLOSEST
NEIGHBOR
SIGNIFICANTLY
CLOSER
THAN
THE
CLOSEST
INCORRECT
MATCH
TO
ACHIEVE
RELI
ABLE
MATCHING
FOR
FALSE
MATCHES
THERE
WILL
LIKELY
BE
A
NUMBER
OF
OTHER
FALSE
MATCHES
WITHIN
SIMILAR
DISTANCES
DUE
TO
THE
HIGH
DIMENSIONALITY
OF
THE
FEATURE
SPACE
WE
CAN
THINK
OF
THE
SECOND
CLOSEST
MATCH
AS
PROVID
ING
AN
ESTIMATE
OF
THE
DENSITY
OF
FALSE
MATCHES
WITHIN
THIS
PORTION
OF
THE
FEATURE
SPACE
AND
AT
THE
SAME
TIME
IDENTIFYING
SPECIFIC
INSTANCES
OF
FEATURE
AMBIGUITY
FIGURE
THE
PROBABILITY
THAT
A
MATCH
IS
CORRECT
CAN
BE
DETER
MINED
BY
TAKING
THE
RATIO
OF
DISTANCE
FROM
THE
CLOSEST
NEIGHBOR
TO
THE
DISTANCE
OF
THE
SECOND
CLOSEST
USING
A
DATABASE
OF
KEYPOINTS
THE
SOLID
LINE
SHOWS
THE
PDF
OF
THIS
RATIO
FOR
CORRECT
MATCHES
WHILE
THE
DOTTED
LINE
IS
FOR
MATCHES
THAT
WERE
INCORRECT
FIGURE
SHOWS
THE
VALUE
OF
THIS
MEASURE
FOR
REAL
IMAGE
DATA
THE
PROBABILITY
DENSITY
FUNCTIONS
FOR
COR
RECT
AND
INCORRECT
MATCHES
ARE
SHOWN
IN
TERMS
OF
THE
RATIO
OF
CLOSEST
TO
SECOND
CLOSEST
NEIGHBORS
OF
EACH
KEY
POINT
MATCHES
FOR
WHICH
THE
NEAREST
NEIGHBOR
WAS
A
CORRECT
MATCH
HAVE
A
PDF
THAT
IS
CENTERED
AT
A
MUCH
LOWER
RATIO
THAN
THAT
FOR
INCORRECT
MATCHES
FOR
OUR
OB
JECT
RECOGNITION
IMPLEMENTATION
WE
REJECT
ALL
MATCHES
IN
WHICH
THE
DISTANCE
RATIO
IS
GREATER
THAN
WHICH
ELIMINATES
OF
THE
FALSE
MATCHES
WHILE
DISCARDING
LESS
THAN
OF
THE
CORRECT
MATCHES
THIS
FIGURE
WAS
GENERATED
BY
MATCHING
IMAGES
FOLLOWING
RANDOM
SCALE
AND
ORIENTATION
CHANGE
A
DEPTH
ROTATION
OF
DEGREES
AND
ADDITION
OF
IMAGE
NOISE
AGAINST
A
DATABASE
OF
KEYPOINTS
EFFICIENT
NEAREST
NEIGHBOR
INDEXING
NO
ALGORITHMS
ARE
KNOWN
THAT
CAN
IDENTIFY
THE
EXACT
NEAREST
NEIGHBORS
OF
POINTS
IN
HIGH
DIMENSIONAL
SPACES
THAT
ARE
ANY
MORE
EFFICIENT
THAN
EXHAUSTIVE
SEARCH
OUR
KEYPOINT
DESCRIPTOR
HAS
A
DIMENSIONAL
FEATURE
VECTOR
AND
THE
BEST
ALGORITHMS
SUCH
AS
THE
K
D
TREE
FRIEDMAN
ET
AL
PROVIDE
NO
SPEEDUP
OVER
EX
HAUSTIVE
SEARCH
FOR
MORE
THAN
ABOUT
DIMENSIONAL
SPACES
THEREFORE
WE
HAVE
USED
AN
APPROXIMATE
ALGO
RITHM
CALLED
THE
BEST
BIN
FIRST
BBF
ALGORITHM
BEIS
AND
LOWE
THIS
IS
APPROXIMATE
IN
THE
SENSE
THAT
IT
RETURNS
THE
CLOSEST
NEIGHBOR
WITH
HIGH
PROBABILITY
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
THE
BBF
ALGORITHM
USES
A
MODIFIED
SEARCH
ORDERING
FOR
THE
K
D
TREE
ALGORITHM
SO
THAT
BINS
IN
FEATURE
SPACE
ARE
SEARCHED
IN
THE
ORDER
OF
THEIR
CLOSEST
DISTANCE
FROM
THE
QUERY
LOCATION
THIS
PRIORITY
SEARCH
ORDER
WAS
FIRST
EXAMINED
BY
ARYA
AND
MOUNT
AND
THEY
PRO
VIDE
FURTHER
STUDY
OF
ITS
COMPUTATIONAL
PROPERTIES
IN
ARYA
ET
AL
THIS
SEARCH
ORDER
REQUIRES
THE
USE
OF
A
HEAP
BASED
PRIORITY
QUEUE
FOR
EFFICIENT
DETERMINA
TION
OF
THE
SEARCH
ORDER
AN
APPROXIMATE
ANSWER
CAN
BE
RETURNED
WITH
LOW
COST
BY
CUTTING
OFF
FURTHER
SEARCH
AFTER
A
SPECIFIC
NUMBER
OF
THE
NEAREST
BINS
HAVE
BEEN
EXPLORED
IN
OUR
IMPLEMENTATION
WE
CUT
OFF
SEARCH
AF
TER
CHECKING
THE
FIRST
NEAREST
NEIGHBOR
CANDIDATES
FOR
A
DATABASE
OF
KEYPOINTS
THIS
PROVIDES
A
SPEEDUP
OVER
EXACT
NEAREST
NEIGHBOR
SEARCH
BY
ABOUT
ORDERS
OF
MAGNITUDE
YET
RESULTS
IN
LESS
THAN
A
LOSS
IN
THE
NUMBER
OF
CORRECT
MATCHES
ONE
REASON
THE
BBF
ALGORITHM
WORKS
PARTICULARLY
WELL
FOR
THIS
PROB
LEM
IS
THAT
WE
ONLY
CONSIDER
MATCHES
IN
WHICH
THE
NEAR
EST
NEIGHBOR
IS
LESS
THAN
TIMES
THE
DISTANCE
TO
THE
SECOND
NEAREST
NEIGHBOR
AS
DESCRIBED
IN
THE
PREVIOUS
SECTION
AND
THEREFORE
THERE
IS
NO
NEED
TO
EXACTLY
SOLVE
THE
MOST
DIFFICULT
CASES
IN
WHICH
MANY
NEIGHBORS
ARE
AT
VERY
SIMILAR
DISTANCES
CLUSTERING
WITH
THE
HOUGH
TRANSFORM
TO
MAXIMIZE
THE
PERFORMANCE
OF
OBJECT
RECOGNITION
FOR
SMALL
OR
HIGHLY
OCCLUDED
OBJECTS
WE
WISH
TO
IDEN
TIFY
OBJECTS
WITH
THE
FEWEST
POSSIBLE
NUMBER
OF
FEA
TURE
MATCHES
WE
HAVE
FOUND
THAT
RELIABLE
RECOGNITION
IS
POSSIBLE
WITH
AS
FEW
AS
FEATURES
A
TYPICAL
IM
AGE
CONTAINS
OR
MORE
FEATURES
WHICH
MAY
COME
FROM
MANY
DIFFERENT
OBJECTS
AS
WELL
AS
BACKGROUND
CLUT
TER
WHILE
THE
DISTANCE
RATIO
TEST
DESCRIBED
IN
SECTION
WILL
ALLOW
US
TO
DISCARD
MANY
OF
THE
FALSE
MATCHES
ARISING
FROM
BACKGROUND
CLUTTER
THIS
DOES
NOT
REMOVE
MATCHES
FROM
OTHER
VALID
OBJECTS
AND
WE
OFTEN
STILL
NEED
TO
IDENTIFY
CORRECT
SUBSETS
OF
MATCHES
CONTAIN
ING
LESS
THAN
INLIERS
AMONG
OUTLIERS
MANY
WELL
KNOWN
ROBUST
FITTING
METHODS
SUCH
AS
RANSAC
OR
LEAST
MEDIAN
OF
SQUARES
PERFORM
POORLY
WHEN
THE
PERCENT
OF
INLIERS
FALLS
MUCH
BELOW
FORTUNATELY
MUCH
BETTER
PERFORMANCE
CAN
BE
OBTAINED
BY
CLUSTER
ING
FEATURES
IN
POSE
SPACE
USING
THE
HOUGH
TRANSFORM
HOUGH
BALLARD
GRIMSON
THE
HOUGH
TRANSFORM
IDENTIFIES
CLUSTERS
OF
FEATURES
WITH
A
CONSISTENT
INTERPRETATION
BY
USING
EACH
FEATURE
TO
VOTE
FOR
ALL
OBJECT
POSES
THAT
ARE
CONSISTENT
WITH
THE
FEA
TURE
WHEN
CLUSTERS
OF
FEATURES
ARE
FOUND
TO
VOTE
FOR
THE
SAME
POSE
OF
AN
OBJECT
THE
PROBABILITY
OF
THE
INTERPRE
TATION
BEING
CORRECT
IS
MUCH
HIGHER
THAN
FOR
ANY
SINGLE
FEATURE
EACH
OF
OUR
KEYPOINTS
SPECIFIES
PARAMETERS
LOCATION
SCALE
AND
ORIENTATION
AND
EACH
MATCHED
KEYPOINT
IN
THE
DATABASE
HAS
A
RECORD
OF
THE
KEYPOINT
PARAMETERS
RELATIVE
TO
THE
TRAINING
IMAGE
IN
WHICH
IT
WAS
FOUND
THEREFORE
WE
CAN
CREATE
A
HOUGH
TRANS
FORM
ENTRY
PREDICTING
THE
MODEL
LOCATION
ORIENTATION
AND
SCALE
FROM
THE
MATCH
HYPOTHESIS
THIS
PREDICTION
HAS
LARGE
ERROR
BOUNDS
AS
THE
SIMILARITY
TRANSFORM
IM
PLIED
BY
THESE
PARAMETERS
IS
ONLY
AN
APPROXIMATION
TO
THE
FULL
DEGREE
OF
FREEDOM
POSE
SPACE
FOR
A
OBJECT
AND
ALSO
DOES
NOT
ACCOUNT
FOR
ANY
NON
RIGID
DEFORMA
TIONS
THEREFORE
WE
USE
BROAD
BIN
SIZES
OF
DEGREES
FOR
ORIENTATION
A
FACTOR
OF
FOR
SCALE
AND
TIMES
THE
MAXIMUM
PROJECTED
TRAINING
IMAGE
DIMENSION
USING
THE
PREDICTED
SCALE
FOR
LOCATION
TO
AVOID
THE
PROBLEM
OF
BOUNDARY
EFFECTS
IN
BIN
ASSIGNMENT
EACH
KEYPOINT
MATCH
VOTES
FOR
THE
CLOSEST
BINS
IN
EACH
DIMENSION
GIVING
A
TOTAL
OF
ENTRIES
FOR
EACH
HYPOTHESIS
AND
FUR
THER
BROADENING
THE
POSE
RANGE
IN
MOST
IMPLEMENTATIONS
OF
THE
HOUGH
TRANSFORM
A
MULTI
DIMENSIONAL
ARRAY
IS
USED
TO
REPRESENT
THE
BINS
HOWEVER
MANY
OF
THE
POTENTIAL
BINS
WILL
REMAIN
EMPTY
AND
IT
IS
DIFFICULT
TO
COMPUTE
THE
RANGE
OF
POSSIBLE
BIN
VALUES
DUE
TO
THEIR
MUTUAL
DEPENDENCE
FOR
EXAMPLE
THE
DEPENDENCY
OF
LOCATION
DISCRETIZATION
ON
THE
SE
LECTED
SCALE
THESE
PROBLEMS
CAN
BE
AVOIDED
BY
USING
A
PSEUDO
RANDOM
HASH
FUNCTION
OF
THE
BIN
VALUES
TO
IN
SERT
VOTES
INTO
A
ONE
DIMENSIONAL
HASH
TABLE
IN
WHICH
COLLISIONS
ARE
EASILY
DETECTED
SOLUTION
FOR
AFFINE
PARAMETERS
THE
HOUGH
TRANSFORM
IS
USED
TO
IDENTIFY
ALL
CLUSTERS
WITH
AT
LEAST
ENTRIES
IN
A
BIN
EACH
SUCH
CLUSTER
IS
THEN
SUBJECT
TO
A
GEOMETRIC
VERIFICATION
PROCEDURE
IN
WHICH
A
LEAST
SQUARES
SOLUTION
IS
PERFORMED
FOR
THE
BEST
AFFINE
PROJECTION
PARAMETERS
RELATING
THE
TRAINING
IMAGE
TO
THE
NEW
IMAGE
AN
AFFINE
TRANSFORMATION
CORRECTLY
ACCOUNTS
FOR
ROTATION
OF
A
PLANAR
SURFACE
UNDER
ORTHOGRAPHIC
PROJEC
TION
BUT
THE
APPROXIMATION
CAN
BE
POOR
FOR
ROTATION
OF
NON
PLANAR
OBJECTS
A
MORE
GENERAL
SOLUTION
WOULD
BE
TO
SOLVE
FOR
THE
FUNDAMENTAL
MATRIX
LUONG
AND
FAUGERAS
HARTLEY
AND
ZISSERMAN
HOW
EVER
A
FUNDAMENTAL
MATRIX
SOLUTION
REQUIRES
AT
LEAST
POINT
MATCHES
AS
COMPARED
TO
ONLY
FOR
THE
AFFINE
SO
LUTION
AND
IN
PRACTICE
REQUIRES
EVEN
MORE
MATCHES
FOR
GOOD
STABILITY
WE
WOULD
LIKE
TO
PERFORM
RECOGNITION
LOWE
WITH
AS
FEW
AS
FEATURE
MATCHES
SO
THE
AFFINE
SOLUTION
PROVIDES
A
BETTER
STARTING
POINT
AND
WE
CAN
ACCOUNT
FOR
ERRORS
IN
THE
AFFINE
APPROXIMATION
BY
ALLOWING
FOR
LARGE
RESIDUAL
ERRORS
IF
WE
IMAGINE
PLACING
A
SPHERE
AROUND
AN
OBJECT
THEN
ROTATION
OF
THE
SPHERE
BY
DE
GREES
WILL
MOVE
NO
POINT
WITHIN
THE
SPHERE
BY
MORE
THAN
TIMES
THE
PROJECTED
DIAMETER
OF
THE
SPHERE
FOR
THE
EXAMPLES
OF
TYPICAL
OBJECTS
USED
IN
THIS
PA
PER
AN
AFFINE
SOLUTION
WORKS
WELL
GIVEN
THAT
WE
ALLOW
RESIDUAL
ERRORS
UP
TO
TIMES
THE
MAXIMUM
PROJECTED
DIMENSION
OF
THE
OBJECT
A
MORE
GENERAL
APPROACH
IS
GIVEN
IN
BROWN
AND
LOWE
IN
WHICH
THE
INITIAL
SOLUTION
IS
BASED
ON
A
SIMILARITY
TRANSFORM
WHICH
THEN
PROGRESSES
TO
SOLUTION
FOR
THE
FUNDAMENTAL
MATRIX
IN
THOSE
CASES
IN
WHICH
A
SUFFICIENT
NUMBER
OF
MATCHES
ARE
FOUND
THE
AFFINE
TRANSFORMATION
OF
A
MODEL
POINT
X
Y
T
TO
AN
IMAGE
POINT
U
V
T
CAN
BE
WRITTEN
AS
U
X
TX
V
Y
TY
WHERE
THE
MODEL
TRANSLATION
IS
TX
TY
T
AND
THE
AFFINE
ROTATION
SCALE
AND
STRETCH
ARE
REPRESENTED
BY
THE
MI
PARAMETERS
WE
WISH
TO
SOLVE
FOR
THE
TRANSFORMATION
PARAMETERS
SO
THE
EQUATION
ABOVE
CAN
BE
REWRITTEN
TO
GATHER
THE
UNKNOWNS
INTO
A
COLUMN
VECTOR
X
Y
U
X
Y
V
TX
TY
THIS
EQUATION
SHOWS
A
SINGLE
MATCH
BUT
ANY
NUMBER
OF
FURTHER
MATCHES
CAN
BE
ADDED
WITH
EACH
MATCH
CON
TRIBUTING
TWO
MORE
ROWS
TO
THE
FIRST
AND
LAST
MATRIX
AT
LEAST
MATCHES
ARE
NEEDED
TO
PROVIDE
A
SOLUTION
WE
CAN
WRITE
THIS
LINEAR
SYSTEM
AS
AX
B
THE
LEAST
SQUARES
SOLUTION
FOR
THE
PARAMETERS
X
CAN
BE
DETERMINED
BY
SOLVING
THE
CORRESPONDING
NORMAL
EQUATIONS
X
ATA
WHICH
MINIMIZES
THE
SUM
OF
THE
SQUARES
OF
THE
DISTANCES
FROM
THE
PROJECTED
MODEL
LOCATIONS
TO
THE
CORRESPOND
ING
IMAGE
LOCATIONS
THIS
LEAST
SQUARES
APPROACH
COULD
READILY
BE
EXTENDED
TO
SOLVING
FOR
POSE
AND
INTERNAL
PARAMETERS
OF
ARTICULATED
AND
FLEXIBLE
OBJECTS
LOWE
OUTLIERS
CAN
NOW
BE
REMOVED
BY
CHECKING
FOR
AGREE
MENT
BETWEEN
EACH
IMAGE
FEATURE
AND
THE
MODEL
GIVEN
THE
MORE
ACCURATE
LEAST
SQUARES
SOLUTION
WE
NOW
RE
QUIRE
EACH
MATCH
TO
AGREE
WITHIN
HALF
THE
ERROR
RANGE
THAT
WAS
USED
FOR
THE
PARAMETERS
IN
THE
HOUGH
TRANS
FORM
BINS
IF
FEWER
THAN
POINTS
REMAIN
AFTER
DISCARDING
OUTLIERS
THEN
THE
MATCH
IS
REJECTED
AS
OUTLIERS
ARE
DIS
CARDED
THE
LEAST
SQUARES
SOLUTION
IS
RE
SOLVED
WITH
THE
REMAINING
POINTS
AND
THE
PROCESS
ITERATED
IN
ADDITION
A
TOP
DOWN
MATCHING
PHASE
IS
USED
TO
ADD
ANY
FURTHER
MATCHES
THAT
AGREE
WITH
THE
PROJECTED
MODEL
POSITION
THESE
MAY
HAVE
BEEN
MISSED
FROM
THE
HOUGH
TRANS
FORM
BIN
DUE
TO
THE
SIMILARITY
TRANSFORM
APPROXIMATION
OR
OTHER
ERRORS
THE
FINAL
DECISION
TO
ACCEPT
OR
REJECT
A
MODEL
HYPOTH
ESIS
IS
BASED
ON
A
DETAILED
PROBABILISTIC
MODEL
GIVEN
IN
A
PREVIOUS
PAPER
LOWE
THIS
METHOD
FIRST
COMPUTES
THE
EXPECTED
NUMBER
OF
FALSE
MATCHES
TO
THE
MODEL
POSE
GIVEN
THE
PROJECTED
SIZE
OF
THE
MODEL
THE
NUMBER
OF
FEATURES
WITHIN
THE
REGION
AND
THE
ACCURACY
OF
THE
FIT
A
BAYESIAN
ANALYSIS
THEN
GIVES
THE
PROBABIL
ITY
THAT
THE
OBJECT
IS
PRESENT
BASED
ON
THE
ACTUAL
NUMBER
OF
MATCHING
FEATURES
FOUND
WE
ACCEPT
A
MODEL
IF
THE
FINAL
PROBABILITY
FOR
A
CORRECT
INTERPRETATION
IS
GREATER
THAN
FOR
OBJECTS
THAT
PROJECT
TO
SMALL
REGIONS
OF
AN
IMAGE
FEATURES
MAY
BE
SUFFICIENT
FOR
RELIABLE
RECOG
NITION
FOR
LARGE
OBJECTS
COVERING
MOST
OF
A
HEAVILY
TEXTURED
IMAGE
THE
EXPECTED
NUMBER
OF
FALSE
MATCHES
IS
HIGHER
AND
AS
MANY
AS
FEATURE
MATCHES
MAY
BE
NECESSARY
RECOGNITION
EXAMPLES
FIGURE
SHOWS
AN
EXAMPLE
OF
OBJECT
RECOGNITION
FOR
A
CLUTTERED
AND
OCCLUDED
IMAGE
CONTAINING
OBJECTS
THE
TRAINING
IMAGES
OF
A
TOY
TRAIN
AND
A
FROG
ARE
SHOWN
ON
THE
LEFT
THE
MIDDLE
IMAGE
OF
SIZE
PIX
ELS
CONTAINS
INSTANCES
OF
THESE
OBJECTS
HIDDEN
BEHIND
OTHERS
AND
WITH
EXTENSIVE
BACKGROUND
CLUTTER
SO
THAT
DETECTION
OF
THE
OBJECTS
MAY
NOT
BE
IMMEDIATE
EVEN
FOR
HUMAN
VISION
THE
IMAGE
ON
THE
RIGHT
SHOWS
THE
FINAL
CORRECT
IDENTIFICATION
SUPERIMPOSED
ON
A
REDUCED
CON
TRAST
VERSION
OF
THE
IMAGE
THE
KEYPOINTS
THAT
WERE
USED
FOR
RECOGNITION
ARE
SHOWN
AS
SQUARES
WITH
AN
EXTRA
LINE
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
FIGURE
THE
TRAINING
IMAGES
FOR
TWO
OBJECTS
ARE
SHOWN
ON
THE
LEFT
THESE
CAN
BE
RECOGNIZED
IN
A
CLUTTERED
IMAGE
WITH
EXTENSIVE
OCCLUSION
SHOWN
IN
THE
MIDDLE
THE
RESULTS
OF
RECOGNITION
ARE
SHOWN
ON
THE
RIGHT
A
PARALLELOGRAM
IS
DRAWN
AROUND
EACH
RECOGNIZED
OBJECT
SHOWING
THE
BOUNDARIES
OF
THE
ORIGINAL
TRAINING
IMAGE
UNDER
THE
AFFINE
TRANSFORMATION
SOLVED
FOR
DURING
RECOGNITION
SMALLER
SQUARES
INDICATE
THE
KEYPOINTS
THAT
WERE
USED
FOR
RECOGNITION
FIGURE
THIS
EXAMPLE
SHOWS
LOCATION
RECOGNITION
WITHIN
A
COMPLEX
SCENE
THE
TRAINING
IMAGES
FOR
LOCATIONS
ARE
SHOWN
AT
THE
UPPER
LEFT
AND
THE
PIXEL
TEST
IMAGE
TAKEN
FROM
A
DIFFERENT
VIEWPOINT
IS
ON
THE
UPPER
RIGHT
THE
RECOGNIZED
REGIONS
ARE
SHOWN
ON
THE
LOWER
IMAGE
WITH
KEYPOINTS
SHOWN
AS
SQUARES
AND
AN
OUTER
PARALLELOGRAM
SHOWING
THE
BOUNDARIES
OF
THE
TRAINING
IMAGES
UNDER
THE
AFFINE
TRANSFORM
USED
FOR
RECOGNITION
LOWE
TO
INDICATE
ORIENTATION
THE
SIZES
OF
THE
SQUARES
CORRE
SPOND
TO
THE
IMAGE
REGIONS
USED
TO
CONSTRUCT
THE
DE
SCRIPTOR
AN
OUTER
PARALLELOGRAM
IS
ALSO
DRAWN
AROUND
EACH
INSTANCE
OF
RECOGNITION
WITH
ITS
SIDES
CORRESPOND
ING
TO
THE
BOUNDARIES
OF
THE
TRAINING
IMAGES
PROJECTED
UNDER
THE
FINAL
AFFINE
TRANSFORMATION
DETERMINED
DURING
RECOGNITION
ANOTHER
POTENTIAL
APPLICATION
OF
THE
APPROACH
IS
TO
PLACE
RECOGNITION
IN
WHICH
A
MOBILE
DEVICE
OR
VEHICLE
COULD
IDENTIFY
ITS
LOCATION
BY
RECOGNIZING
FAMILIAR
LO
CATIONS
FIGURE
GIVES
AN
EXAMPLE
OF
THIS
APPLICATION
IN
WHICH
TRAINING
IMAGES
ARE
TAKEN
OF
A
NUMBER
OF
LOCA
TIONS
AS
SHOWN
ON
THE
UPPER
LEFT
THESE
CAN
EVEN
BE
OF
SUCH
SEEMINGLY
NON
DISTINCTIVE
ITEMS
AS
A
WOODEN
WALL
OR
A
TREE
WITH
TRASH
BINS
THE
TEST
IMAGE
OF
SIZE
BY
PIXELS
ON
THE
UPPER
RIGHT
WAS
TAKEN
FROM
A
VIEW
POINT
ROTATED
ABOUT
DEGREES
AROUND
THE
SCENE
FROM
THE
ORIGINAL
POSITIONS
YET
THE
TRAINING
IMAGE
LOCATIONS
ARE
EASILY
RECOGNIZED
ALL
STEPS
OF
THE
RECOGNITION
PROCESS
CAN
BE
IMPLE
MENTED
EFFICIENTLY
SO
THE
TOTAL
TIME
TO
RECOGNIZE
ALL
OBJECTS
IN
FIGS
OR
IS
LESS
THAN
SECONDS
ON
A
GHZ
PENTIUM
PROCESSOR
WE
HAVE
IMPLEMENTED
THESE
ALGORITHMS
ON
A
LAPTOP
COMPUTER
WITH
ATTACHED
VIDEO
CAMERA
AND
HAVE
TESTED
THEM
EXTENSIVELY
OVER
A
WIDE
RANGE
OF
CONDITIONS
IN
GENERAL
TEXTURED
PLANAR
SURFACES
CAN
BE
IDENTIFIED
RELIABLY
OVER
A
ROTATION
IN
DEPTH
OF
UP
TO
DEGREES
IN
ANY
DIRECTION
AND
UNDER
ALMOST
ANY
ILLUMINATION
CONDITIONS
THAT
PROVIDE
SUF
FICIENT
LIGHT
AND
DO
NOT
PRODUCE
EXCESSIVE
GLARE
FOR
OBJECTS
THE
RANGE
OF
ROTATION
IN
DEPTH
FOR
RELIABLE
RECOGNITION
IS
ONLY
ABOUT
DEGREES
IN
ANY
DIRECTION
AND
ILLUMINATION
CHANGE
IS
MORE
DISRUPTIVE
FOR
THESE
REASONS
OBJECT
RECOGNITION
IS
BEST
PERFORMED
BY
INTEGRATING
FEATURES
FROM
MULTIPLE
VIEWS
SUCH
AS
WITH
LOCAL
FEATURE
VIEW
CLUSTERING
LOWE
THESE
KEYPOINTS
HAVE
ALSO
BEEN
APPLIED
TO
THE
PROB
LEM
OF
ROBOT
LOCALIZATION
AND
MAPPING
WHICH
HAS
BEEN
PRESENTED
IN
DETAIL
IN
OTHER
PAPERS
SE
ET
AL
IN
THIS
APPLICATION
A
TRINOCULAR
STEREO
SYSTEM
IS
USED
TO
DE
TERMINE
ESTIMATES
FOR
KEYPOINT
LOCATIONS
KEYPOINTS
ARE
USED
ONLY
WHEN
THEY
APPEAR
IN
ALL
IMAGES
WITH
CON
SISTENT
DISPARITIES
RESULTING
IN
VERY
FEW
OUTLIERS
AS
THE
ROBOT
MOVES
IT
LOCALIZES
ITSELF
USING
FEATURE
MATCHES
TO
THE
EXISTING
MAP
AND
THEN
INCREMENTALLY
ADDS
FEATURES
TO
THE
MAP
WHILE
UPDATING
THEIR
POSITIONS
USING
A
KALMAN
FILTER
THIS
PROVIDES
A
ROBUST
AND
AC
CURATE
SOLUTION
TO
THE
PROBLEM
OF
ROBOT
LOCALIZATION
IN
UNKNOWN
ENVIRONMENTS
THIS
WORK
HAS
ALSO
ADDRESSED
THE
PROBLEM
OF
PLACE
RECOGNITION
IN
WHICH
A
ROBOT
CAN
BE
SWITCHED
ON
AND
RECOGNIZE
ITS
LOCATION
ANYWHERE
WITHIN
A
LARGE
MAP
SE
ET
AL
WHICH
IS
EQUIVA
LENT
TO
A
IMPLEMENTATION
OF
OBJECT
RECOGNITION
CONCLUSIONS
THE
SIFT
KEYPOINTS
DESCRIBED
IN
THIS
PAPER
ARE
PAR
TICULARLY
USEFUL
DUE
TO
THEIR
DISTINCTIVENESS
WHICH
EN
ABLES
THE
CORRECT
MATCH
FOR
A
KEYPOINT
TO
BE
SELECTED
FROM
A
LARGE
DATABASE
OF
OTHER
KEYPOINTS
THIS
DISTINC
TIVENESS
IS
ACHIEVED
BY
ASSEMBLING
A
HIGH
DIMENSIONAL
VECTOR
REPRESENTING
THE
IMAGE
GRADIENTS
WITHIN
A
LOCAL
REGION
OF
THE
IMAGE
THE
KEYPOINTS
HAVE
BEEN
SHOWN
TO
BE
INVARIANT
TO
IMAGE
ROTATION
AND
SCALE
AND
ROBUST
ACROSS
A
SUBSTANTIAL
RANGE
OF
AFFINE
DISTORTION
ADDITION
OF
NOISE
AND
CHANGE
IN
ILLUMINATION
LARGE
NUMBERS
OF
KEYPOINTS
CAN
BE
EXTRACTED
FROM
TYPICAL
IMAGES
WHICH
LEADS
TO
ROBUSTNESS
IN
EXTRACTING
SMALL
OBJECTS
AMONG
CLUTTER
THE
FACT
THAT
KEYPOINTS
ARE
DETECTED
OVER
A
COM
PLETE
RANGE
OF
SCALES
MEANS
THAT
SMALL
LOCAL
FEATURES
ARE
AVAILABLE
FOR
MATCHING
SMALL
AND
HIGHLY
OCCLUDED
OB
JECTS
WHILE
LARGE
KEYPOINTS
PERFORM
WELL
FOR
IMAGES
SUBJECT
TO
NOISE
AND
BLUR
THEIR
COMPUTATION
IS
EFFI
CIENT
SO
THAT
SEVERAL
THOUSAND
KEYPOINTS
CAN
BE
EX
TRACTED
FROM
A
TYPICAL
IMAGE
WITH
NEAR
REAL
TIME
PER
FORMANCE
ON
STANDARD
PC
HARDWARE
THIS
PAPER
HAS
ALSO
PRESENTED
METHODS
FOR
USING
THE
KEYPOINTS
FOR
OBJECT
RECOGNITION
THE
APPROACH
WE
HAVE
DESCRIBED
USES
APPROXIMATE
NEAREST
NEIGHBOR
LOOKUP
A
HOUGH
TRANSFORM
FOR
IDENTIFYING
CLUSTERS
THAT
AGREE
ON
OBJECT
POSE
LEAST
SQUARES
POSE
DETERMINATION
AND
FINAL
VERIFICATION
OTHER
POTENTIAL
APPLICATIONS
INCLUDE
VIEW
MATCHING
FOR
RECONSTRUCTION
MOTION
TRACKING
AND
SEGMENTATION
ROBOT
LOCALIZATION
IMAGE
PANORAMA
AS
SEMBLY
EPIPOLAR
CALIBRATION
AND
ANY
OTHERS
THAT
REQUIRE
IDENTIFICATION
OF
MATCHING
LOCATIONS
BETWEEN
IMAGES
THERE
ARE
MANY
DIRECTIONS
FOR
FURTHER
RESEARCH
IN
DERIVING
INVARIANT
AND
DISTINCTIVE
IMAGE
FEATURES
SYS
TEMATIC
TESTING
IS
NEEDED
ON
DATA
SETS
WITH
FULL
VIEW
POINT
AND
ILLUMINATION
CHANGES
THE
FEATURES
DESCRIBED
IN
THIS
PAPER
USE
ONLY
A
MONOCHROME
INTENSITY
IMAGE
SO
FURTHER
DISTINCTIVENESS
COULD
BE
DERIVED
FROM
INCLUD
ING
ILLUMINATION
INVARIANT
COLOR
DESCRIPTORS
FUNT
AND
FINLAYSON
BROWN
AND
LOWE
SIMILARLY
LOCAL
TEXTURE
MEASURES
APPEAR
TO
PLAY
AN
IMPORTANT
ROLE
IN
HUMAN
VISION
AND
COULD
BE
INCORPORATED
INTO
FEA
TURE
DESCRIPTORS
IN
A
MORE
GENERAL
FORM
THAN
THE
SINGLE
SPATIAL
FREQUENCY
USED
BY
THE
CURRENT
DESCRIPTORS
AN
ATTRACTIVE
ASPECT
OF
THE
INVARIANT
LOCAL
FEATURE
APPROACH
DISTINCTIVE
IMAGE
FEATURES
FROM
SCALE
INVARIANT
KEYPOINTS
TO
MATCHING
IS
THAT
THERE
IS
NO
NEED
TO
SELECT
JUST
ONE
FEATURE
TYPE
AND
THE
BEST
RESULTS
ARE
LIKELY
TO
BE
OB
TAINED
BY
USING
MANY
DIFFERENT
FEATURES
ALL
OF
WHICH
CAN
CONTRIBUTE
USEFUL
MATCHES
AND
IMPROVE
OVERALL
ROBUSTNESS
ANOTHER
DIRECTION
FOR
FUTURE
RESEARCH
WILL
BE
TO
IN
DIVIDUALLY
LEARN
FEATURES
THAT
ARE
SUITED
TO
RECOGNIZING
PARTICULAR
OBJECTS
CATEGORIES
THIS
WILL
BE
PARTICULARLY
IMPORTANT
FOR
GENERIC
OBJECT
CLASSES
THAT
MUST
COVER
A
BROAD
RANGE
OF
POSSIBLE
APPEARANCES
THE
RESEARCH
OF
WEBER
ET
AL
AND
FERGUS
ET
AL
HAS
SHOWN
THE
POTENTIAL
OF
THIS
APPROACH
BY
LEARNING
SMALL
SETS
OF
LOCAL
FEATURES
THAT
ARE
SUITED
TO
RECOGNIZING
GENERIC
CLASSES
OF
OBJECTS
IN
THE
LONG
TERM
FEATURE
SETS
ARE
LIKELY
TO
CONTAIN
BOTH
PRIOR
AND
LEARNED
FEATURES
THAT
WILL
BE
USED
ACCORDING
TO
THE
AMOUNT
OF
TRAINING
DATA
THAT
HAS
BEEN
AVAILABLE
FOR
VARIOUS
OBJECT
CLASSES
ABSTRACT
CLUSTAL
X
IS
A
NEW
WINDOWS
INTERFACE
FOR
THE
WIDELY
USED
PROGRESSIVE
MULTIPLE
SEQUENCE
ALIGNMENT
PROGRAM
CLUSTAL
W
THE
NEW
SYSTEM
IS
EASY
TO
USE
PROVIDING
AN
INTEGRATED
SYSTEM
FOR
PERFORMING
MULTIPLE
SEQUENCE
AND
PROFILE
ALIGNMENTS
AND
ANALYSING
THE
RESULTS
CLUSTAL
X
DISPLAYS
THE
SEQUENCE
ALIGNMENT
IN
A
WINDOW
ON
THE
SCREEN
A
VERSATILE
SEQUENCE
COLOURING
SCHEME
ALLOWS
THE
USER
TO
HIGHLIGHT
CONSERVED
FEATURES
IN
THE
ALIGNMENT
PULL
DOWN
MENUS
PROVIDE
ALL
THE
OPTIONS
REQUIRED
FOR
TRADITIONAL
MULTIPLE
SEQUENCE
AND
PROFILE
ALIGNMENT
NEW
FEATURES
INCLUDE
THE
ABILITY
TO
CUT
AND
PASTE
SEQUENCES
TO
CHANGE
THE
ORDER
OF
THE
ALIGNMENT
SELECTION
OF
A
SUBSET
OF
THE
SEQUENCES
TO
BE
REALIGNED
AND
SELECTION
OF
A
SUB
RANGE
OF
THE
ALIGNMENT
TO
BE
REALIGNED
AND
INSERTED
BACK
INTO
THE
ORIGINAL
ALIGNMENT
ALIGNMENT
QUALITY
ANALYSIS
CAN
BE
PERFORMED
AND
LOW
SCORING
SEGMENTS
OR
EXCEPTIONAL
RESIDUES
CAN
BE
HIGHLIGHTED
QUALITY
ANALYSIS
AND
REALIGNMENT
OF
SELECTED
RESIDUE
RANGES
PROVIDE
THE
USER
WITH
A
POWERFUL
TOOL
TO
IMPROVE
AND
REFINE
DIFFICULT
ALIGNMENTS
AND
TO
TRAP
ERRORS
IN
INPUT
SEQUENCES
CLUSTAL
X
HAS
BEEN
COMPILED
ON
SUN
SOLARIS
ON
SILICON
GRAPHICS
DIGITAL
UNIX
ON
DECSTATIONS
MICROSOFT
WINDOWS
BIT
FOR
PCS
LINUX
ELF
FOR
PCS
AND
MACINTOSH
POWERMAC
INTRODUCTION
THE
MOST
WIDELY
USED
METHOD
IN
MOLECULAR
BIOLOGY
TO
ALIGN
SETS
OF
NUCLEOTIDE
OR
AMINO
ACID
SEQUENCES
IS
TO
BUILD
UP
A
MULTIPLE
ALIGNMENT
PROGRESSIVELY
THE
MOST
CLOSELY
RELATED
GROUPS
OF
SEQUENCES
ARE
ALIGNED
FIRST
AND
THEN
THESE
GROUPS
ARE
GRADUALLY
ALIGNED
TOGETHER
KEEPING
THE
EARLY
ALIGNMENTS
FIXED
THIS
APPROACH
WORKS
WELL
WHEN
THE
SEQUENCES
ARE
SUFFICIENTLY
CLOSELY
RELATED
HOWEVER
A
GLOBALLY
OPTIMAL
SOLUTION
OR
A
BIOLOGICALLY
SIGNIFICANT
ONE
CANNOT
BE
GUARANTEED
IN
MORE
DIFFICULT
CASES
WHERE
MANY
SEQUENCES
HAVE
RESIDUE
IDENTITY
THIS
AUTOMATIC
METHOD
BECOMES
LESS
RELIABLE
ANY
MISALIGNED
REGIONS
INTRODUCED
IN
PREVIOUS
STAGES
OF
THE
PROGRESSIVE
ALIGNMENT
ARE
NOT
CORRECTED
LATER
AS
NEW
INFORMATION
FROM
OTHER
SEQUENCES
IS
ADDED
IN
SUCH
CASES
THE
AUTOMATIC
ALIGNMENTS
NEED
TO
BE
REFINED
EITHER
MANUALLY
OR
AUTOMATICALLY
NUMEROUS
SEQUENCE
EDITORS
HAVE
BEEN
DEVELOPED
WHICH
ALLOW
THE
USER
TO
DISPLAY
AND
MANUALLY
MAKE
OR
MODIFY
AN
ALIGNMENT
EG
THESE
PROGRAMS
ARE
USEFUL
FOR
MAKING
SMALL
REFINEMENTS
TO
AN
ALIGNMENT
BUT
THE
TOTALLY
MANUAL
ALIGNMENT
OF
LARGE
NUMBERS
OF
SEQUENCES
IS
NOT
FEASIBLE
MANUAL
ALIGNMENT
IS
ALSO
HIGHLY
SUBJECTIVE
HENCE
IS
AT
LEAST
AS
LIKELY
AS
THE
AUTOMATIC
ALIGNMENT
PROCESS
TO
RESULT
IN
ERRORS
IN
THE
ALIGNMENT
THE
CLUSTAL
X
INTERFACE
HAS
BEEN
WRITTEN
TO
PROVIDE
A
SINGLE
ENVIRONMENT
IN
WHICH
THE
USER
CAN
PERFORM
MULTIPLE
ALIGNMENTS
VIEW
THE
RESULTS
AND
IF
NECESSARY
REFINE
AND
IMPROVE
THE
ALIGNMENT
TOOLS
FOR
ALIGNMENT
QUALITY
ANALYSIS
HAVE
BEEN
DEVELOPED
WHICH
ALLOW
THE
USER
TO
HIGHLIGHT
LOW
SCORING
REGIONS
IN
THE
ALIGNMENT
OPTIONS
ARE
AVAILABLE
FOR
AUTOMATICALLY
CORRECTING
THESE
LOW
SCORING
REGIONS
BY
REALIGNING
A
MISALIGNED
SEQUENCE
OR
A
SELECTED
REGION
OF
AN
ALIGNMENT
IN
EARLIER
CLUSTAL
PROGRAMS
NESTED
TEXT
MENUS
PROVIDED
ALL
THE
OPTIONS
TO
DO
MULTIPLE
SEQUENCE
PROFILE
ALIGNMENTS
AND
SIMPLE
PHYLOGENETIC
TREE
GENERATION
THE
OUTPUT
ALIGNMENTS
WERE
WRITTEN
TO
FILE
FOR
DISPLAY
PRINTING
OR
FURTHER
MANIPULATION
WITH
THESE
SIMPLE
MENUS
THE
CLUSTAL
PROGRAMS
COULD
BE
HIGHLY
PORTABLE
AND
RUN
ON
ESSENTIALLY
ALL
COMPUTERS
PORTABILITY
HAS
BEEN
A
MAJOR
FACTOR
IN
THE
WIDESPREAD
USAGE
OF
THE
CLUSTAL
SERIES
FOR
SEQUENCE
ALIGNMENT
ON
THE
OTHER
HAND
MUCH
MORE
ATTRACTIVE
AND
POWERFUL
USER
INTERFACES
CAN
BE
BUILT
USING
NON
PORTABLE
WINDOWS
SYSTEMS
THE
NCBI
SOFTWARE
DEVELOPMENT
TOOLKIT
VERSION
NATIONAL
CENTER
FOR
BIOTECHNOLOGY
INFORMATION
BETHESDA
MD
PROVIDES
ONE
SOLUTION
TO
THE
WINDOWS
PORTABILITY
PROBLEM
IT
INTERFACES
BETWEEN
THE
APPLICATION
CODE
AND
VARIOUS
HOST
WINDOWING
SYSTEMS
INCLUDING
THE
X
WINDOW
SYSTEM
MACINTOSH
WINDOWS
AND
MICROSOFT
WINDOWS
WE
HAVE
MADE
USE
OF
THE
TOOLKIT
TO
PROVIDE
A
PORTABLE
WINDOWS
INTERFACE
TERMED
CLUSTAL
X
TO
WHOM
CORRESPONDENCE
SHOULD
BE
ADDRESSED
TEL
FAX
EMAIL
JEANMOUGIN
IGBMC
U
STRASBG
FR
CLUSTAL
X
IS
A
NEW
GRAPHICAL
INTERFACE
TO
THE
CLUSTAL
W
PROGRAM
WHICH
DISPLAYS
THE
SEQUENCE
ALIGNMENT
IN
A
WINDOW
ON
THE
SCREEN
ALLOWING
THE
USER
TO
MOVE
EASILY
BETWEEN
DIFFERENT
PARTS
OF
THE
ALIGNMENT
PULL
DOWN
MENUS
PROVIDE
ALL
THE
OPTIONS
FAMILIAR
TO
USERS
OF
THE
TEXT
MENU
DRIVEN
CLUSTAL
W
PLUS
SEVERAL
NEW
FEATURES
A
VERSATILE
CONFIGURABLE
COLOURING
SYSTEM
IS
USED
TO
HIGHLIGHT
CONSERVED
RESIDUE
FEATURES
IN
THE
ALIGNMENT
OPTIONS
TO
MARK
SUSPECT
REGIONS
AND
REALIGN
SELECTED
RESIDUE
RANGES
GIVE
THE
USER
MORE
INFORMATION
AND
CONTROL
OVER
THE
ALIGNMENT
PROCESS
AND
ALLOW
DIFFICULT
ALIGNMENTS
TO
BE
GRADUALLY
BUILT
AND
REFINED
MATERIALS
AND
METHODS
WE
MAKE
USE
OF
THE
NCBI
VIBRANT
VIRTUAL
INTERFACE
FOR
BIOLOGICAL
RESEARCH
AND
TECHNOLOGY
DEVELOPMENT
LIBRARY
WHICH
ACTS
AS
AN
INTERFACE
BETWEEN
THE
APPLICATION
CODE
OF
CLUSTAL
X
AND
THE
HOST
WINDOWING
SYSTEM
THE
NCBI
LIBRARIES
ARE
LINKED
TO
THE
CLUSTAL
X
CODE
PROVIDING
MECHANISMS
FOR
DISPLAYING
WINDOWS
MENUS
BUTTONS
ETC
IN
THIS
WAY
THE
CLUSTAL
X
CODE
REMAINS
INDEPENDENT
OF
THE
UNDERLYING
OPERATING
SYSTEM
AND
COMPUTER
THE
CLUSTAL
X
CODE
IS
WRITTEN
IN
ANSI
C
AND
SHOULD
BE
PORTABLE
TO
ANY
MACHINE
CAPABLE
OF
SUPPORTING
THE
NCBI
VIBRANT
TOOLKIT
CLUSTAL
X
IS
AVAILABLE
FOR
A
NUMBER
OF
PLATFORMS
INCLUDING
SUN
SOLARIS
IRIX
ON
SILICON
GRAPHICS
DIGITAL
UNIX
ON
DECSTATIONS
MICROSOFT
WINDOWS
BIT
FOR
PCS
LINUX
ELF
FOR
PCS
AND
MACINTOSH
POWERMAC
THE
SOURCE
CODE
IS
PROVIDED
FOR
ANYONE
WISHING
TO
PORT
TO
ANY
OTHER
PLATFORM
SUPPORTED
BY
THE
VIBRANT
PROJECT
THE
SOURCE
CODE
FOR
CLUSTAL
X
AND
SEVERAL
EXECUTABLE
VERSIONS
FOR
DIFFERENT
MACHINES
ARE
FREELY
AVAILABLE
BY
ANONYMOUS
FTP
TO
FTP
IGBMC
U
STRASBG
FR
HYPERTEXT
DOCUMENTATION
CAN
BE
VIEWED
AT
WWW
IGBMC
U
STRASBG
FR
BIOINFO
CLUSTALX
THE
NCBI
VIBRANT
TOOLKIT
IS
AVAILABLE
BY
ANONYMOUS
FTP
FROM
NCBI
NLM
NIH
GOV
INSTALLATION
THE
CLUSTAL
X
PROGRAM
IS
EASILY
INSTALLED
BY
COPYING
THE
EXECUTABLE
FILE
TO
A
SYSTEM
DIRECTORY
WHICH
CAN
BE
SEEN
BY
ALL
USERS
SEVERAL
PARAMETER
FILES
NAMED
PAR
AND
AN
ON
LINE
HELP
TEXT
FILE
CLUSTALX
HLP
FOR
MS
WINDOWS
OTHERWISE
ARE
ALSO
REQUIRED
BY
CLUSTAL
X
THESE
FILES
SHOULD
BE
COPIED
TO
ONE
OF
THE
FOLLOWING
DIRECTORIES
I
THE
USER
CURRENT
DIRECTORY
II
THE
USER
HOME
DIRECTORY
III
ANY
OF
THE
DIRECTORIES
SPECIFIED
BY
THE
PATH
ENVIRONMENT
VARIABLE
RESULTS
ALGORITHMS
CHECKING
ALIGNMENT
QUALITY
THREE
METHODS
OF
ALIGNMENT
QUALITY
ANALYSIS
ARE
IMPLEMENTED
I
A
QUALITY
SCORE
IS
CALCULATED
FOR
EACH
COLUMN
IN
THE
ALIGNMENT
WHICH
DEPENDS
ON
THE
AMINO
ACID
VARIABILITY
IN
THE
COLUMN
A
HIGH
SCORE
INDICATES
A
HIGHLY
CONSERVED
COLUMN
A
LOW
SCORE
INDICATING
A
LESS
WELL
CONSERVED
POSITION
THE
SCORES
ARE
AUTOMATICALLY
PLOTTED
IN
THE
WINDOW
DISPLAY
FIG
II
THE
RESIDUES
WHICH
GET
EXCEPTIONALLY
LOW
SCORES
IN
THE
ABOVE
QUALITY
CALCULATION
CAN
BE
HIGHLIGHTED
IN
THE
ALIGNMENT
DISPLAY
FIG
III
LOW
SCORING
SEGMENTS
IN
EACH
SEQUENCE
OF
THE
ALIGNMENT
CAN
BE
HIGHLIGHTED
THESE
ARE
FOUND
BY
SUMMING
NEGATIVE
SCORES
IN
THE
PROFILE
BUILT
FROM
THE
SEQUENCE
ALIGNMENT
FIGS
AND
NUCLEIC
ACIDS
RESEARCH
VOL
NO
HIGHLIGHTED
RESIDUES
MAY
BE
EXPECTED
TO
OCCUR
AT
A
MODERATE
FREQUENCY
IN
ALL
THE
SEQUENCES
BECAUSE
OF
THEIR
STEADY
DIVERGENCE
DUE
TO
THE
NATURAL
PROCESSES
OF
EVOLUTION
ALTHOUGH
THE
MOST
DIVERGENT
SEQUENCES
ARE
LIKELY
TO
HAVE
THE
MOST
OUTLIERS
HOWEVER
THE
HIGHLIGHTED
RESIDUES
ARE
ESPECIALLY
USEFUL
IN
POINTING
TO
SEQUENCE
MISALIGNMENTS
THESE
CAN
ARISE
DUE
TO
VARIOUS
REASONS
I
PARTIAL
OR
TOTAL
MISALIGNMENTS
CAUSED
BY
A
FAILURE
IN
THE
ALIGNMENT
ALGORITHM
II
PARTIAL
OR
TOTAL
MISALIGNMENTS
BECAUSE
AT
LEAST
ONE
OF
THE
SEQUENCES
IN
THE
GIVEN
SET
IS
PARTLY
OR
COMPLETELY
UNRELATED
TO
THE
OTHER
SEQUENCES
III
FRAMESHIFT
TRANSLATION
ERRORS
IN
A
PROTEIN
SEQUENCE
CAUSING
LOCAL
MISMATCHED
REGIONS
TO
BE
HEAVILY
HIGHLIGHTED
SEE
DISCUSSION
FOR
MORE
DETAILS
OCCASIONALLY
HIGHLIGHTED
RESIDUES
MAY
POINT
TO
REGIONS
OF
SOME
BIOLOGICAL
SIGNIFICANCE
THIS
MIGHT
HAPPEN
FOR
EXAMPLE
IF
A
PROTEIN
ALIGNMENT
CONTAINS
A
SEQUENCE
WHICH
HAS
ACQUIRED
NEW
FUNCTIONS
RELATIVE
TO
THE
MAIN
SEQUENCE
SET
QUALITY
SCORES
SUPPOSE
WE
HAVE
AN
ALIGNMENT
OF
M
SEQUENCES
OF
LENGTH
N
THEN
THE
ALIGNMENT
CAN
BE
WRITTEN
AS
N
N
AM
AM
AM
AM
N
SUPPOSE
WE
ALSO
DEFINE
A
RESIDUE
COMPARISON
MATRIX
C
OF
SIZE
R
R
WHERE
R
IS
THE
NUMBER
OF
RESIDUES
C
A
B
IS
THE
SCORE
FOR
ALIGNING
RESIDUE
A
WITH
RESIDUE
B
ALL
SCORES
IN
THIS
MATRIX
ARE
POSITIVE
THE
PROBLEM
IS
TO
CALCULATE
A
SCORE
FOR
THE
CONSERVATION
OF
THE
JTH
POSITION
IN
THE
ALIGNMENT
VINGRON
AND
SIBBALD
USED
A
GEOMETRIC
ANALYSIS
BASED
ON
A
CONTINUOUS
SEQUENCE
SPACE
IN
ORDER
TO
COMPARE
SEQUENCE
WEIGHTING
METHODS
THE
METHOD
DEFINES
AN
N
DIMENSIONAL
SPACE
WHERE
N
IS
THE
LENGTH
OF
THE
ALIGNMENT
EACH
SEQUENCE
CAN
BE
PLACED
IN
THE
SPACE
AND
THE
DISTANCE
BETWEEN
TWO
SEQUENCES
IS
DEFINED
AS
THE
EUCLIDEAN
DISTANCE
BETWEEN
THE
SEQUENCES
IN
THE
SPACE
WE
HAVE
APPLIED
AN
ANALOGOUS
APPROACH
TO
EACH
POSITION
IN
THE
ALIGNMENT
AN
R
DIMENSIONAL
SPACE
IS
DEFINED
IN
WHICH
EACH
COLUMN
OF
THE
ALIGNMENT
CAN
BE
CONSIDERED
FOR
A
SPECIFIED
POSITION
J
IN
THE
ALIGNMENT
EACH
SEQUENCE
CONSISTS
OF
A
SINGLE
RESIDUE
WHICH
IS
ASSIGNED
A
POINT
IN
THE
SPACE
FOR
SEQUENCE
I
POSITION
J
THE
POINT
IS
DEFINED
AS
C
AIJ
C
A
IJ
C
R
AIJ
WE
THEN
CALCULATE
A
CONSENSUS
VALUE
X
FOR
THE
JTH
POSITION
IN
THE
ALIGNMENT
X
IS
DEFINED
AS
R
FI
J
C
I
I
R
M
FI
J
C
I
XI
M
R
FI
J
C
I
R
I
M
NUCLEIC
ACIDS
RESEARCH
VOL
NO
FIGURE
THE
CLUSTAL
X
WINDOW
IN
MULTIPLE
ALIGNMENT
MODE
AN
ALIGNMENT
OF
SOME
EFTU
PROTEINS
IS
DISPLAYED
LOW
SCORING
SEGMENTS
ARE
HIGHLIGHTED
USING
A
WHITE
CHARACTER
ON
A
BLACK
BACKGROUND
EXCEPTIONAL
RESIDUES
ARE
SHOWN
AS
A
WHITE
CHARACTER
ON
A
GREY
BACKGROUND
THE
QUALITY
ANALYSIS
REVEALS
TWO
ANOMALOUSLY
LOW
SCORING
REGIONS
RULER
POSITIONS
IN
AND
IN
THESE
WERE
FOUND
TO
BE
CAUSED
BY
FRAMESHIFT
ERRORS
TWO
MORE
SEQUENCES
AND
NOT
SHOWN
HERE
HAVE
RESIDUE
SEQUENCING
ERRORS
IN
THIS
REGION
WHICH
CLUSTAL
X
WILL
ALSO
HIGHLIGHT
WHERE
FI
J
IS
THE
COUNT
OF
RESIDUES
I
AT
POSITION
J
IN
THE
ALIGNMENT
NOW
IF
IS
THE
POSITION
OF
SEQUENCE
I
IN
THE
R
DIMENSIONAL
SPACE
WE
CAN
CALCULATE
THE
DISTANCE
DI
BETWEEN
EACH
SEQUENCE
RESIDUE
I
AND
THE
CONSENSUS
POSITION
X
DI
R
XR
SR
R
WHERE
XR
IS
THE
RTH
DIMENSION
OF
POSITION
X
AND
SR
IS
THE
RTH
DIMENSION
OF
POSITION
WE
DEFINE
THE
QUALITY
SCORE
FOR
THE
JTH
POSITION
IN
THE
ALIGNMENT
AS
THE
MEAN
OF
THE
SEQUENCE
DISTANCES
DI
M
DI
QUALITY
SCORE
I
FINALLY
THE
SCORES
ARE
NORMALISED
BY
MULTIPLYING
BY
THE
PERCEN
TAGE
OF
SEQUENCES
WHICH
HAVE
RESIDUES
AND
NOT
GAPS
AT
THIS
POSITION
THESE
SCORES
ARE
USED
IN
MEASURE
I
ABOVE
AS
AN
ESTIMATE
OF
THE
CONSERVATION
OF
EACH
ALIGNMENT
COLUMN
FIG
EXCEPTIONAL
RESIDUES
IT
WOULD
BE
USEFUL
FOR
EACH
COLUMN
IN
THE
ALIGNMENT
TO
IDENTIFY
THOSE
SEQUENCES
IN
THE
ABOVE
CALCULATIONS
WHICH
ARE
FOUND
A
LONG
WAY
FROM
THE
CONSENSUS
POINT
I
E
WHICH
HAVE
A
LARGE
DISTANCE
DI
THUS
LOWERING
THE
QUALITY
SCORE
FOR
THE
COLUMN
FOR
THE
JTH
POSITION
IN
THE
ALIGNMENT
WE
TAKE
THE
SET
OF
SEQUENCES
WHICH
HAVE
A
RESIDUE
AT
THIS
POSITION
AND
NOT
A
GAP
THE
DISTANCES
DI
FOR
THIS
SET
OF
SEQUENCES
ARE
ARRANGED
IN
AN
ARRAY
IN
ORDER
OF
SIZE
FROM
SMALLEST
TO
LARGEST
WE
CAN
FIND
THE
UPPER
AND
LOWER
QUARTILES
THE
DISTANCES
LYING
ONE
QUARTER
OF
THE
WAY
FROM
THE
TOP
AND
BOTTOM
OF
THE
ARRAY
RESPECTIVELY
AND
THE
INTER
QUARTILE
RANGE
THE
DIFFERENCE
BETWEEN
THE
TWO
QUARTILES
A
RESIDUE
AIJ
IS
CONSIDERED
AS
AN
EXCEPTION
IN
MEASURE
II
ABOVE
IF
THE
SEQUENCE
DISTANCE
DI
IS
GREATER
THAN
UPPER
QUARTILE
INTER
QUARTILE
RANGE
SCALING
FACTOR
THE
SCALING
FACTOR
CAN
BE
ADJUSTED
BY
THE
USER
TO
SELECT
THE
PROPORTION
OF
RESIDUE
EXCEPTIONS
THAT
WILL
BE
HIGHLIGHTED
IN
THE
ALIGNMENT
DISPLAY
EXCEPTIONAL
RESIDUES
IN
AN
EFTU
ALIGNMENT
ARE
SHOWN
IN
FIGURE
THIS
CALCULATION
RUNS
AUTOMATICALLY
IN
A
VERY
SHORT
TIME
EACH
TIME
THE
SCREEN
IS
UPDATED
LOW
SCORING
SEGMENTS
GIVEN
THE
ABOVE
ALIGNMENT
OF
M
SEQUENCES
OF
LENGTH
N
AND
A
RESIDUE
EXCHANGE
MATRIX
WE
CAN
BUILD
A
PROFILE
WHICH
IS
WEIGHTED
FOR
SEQUENCE
DIVERGENCE
METHODS
FOR
CALCULAT
ING
SEQUENCE
WEIGHTS
ARE
DISCUSSED
BY
HENIKOFF
AND
HENIKOFF
HERE
WE
CALCULATE
SEQUENCE
WEIGHTS
DIRECTLY
FROM
A
NEIGHBOUR
JOINING
TREE
USING
THE
BRANCH
PROPORTIONAL
METHOD
WHICH
CORRECTS
FOR
UNEQUAL
REPRESENTATION
BY
DOWNWEIGHTING
SIMILAR
SEQUENCES
AND
UPWEIGHTING
DIVERGENT
ONES
EACH
SEQUENCE
IS
ASSIGNED
A
WEIGHT
WI
IN
THE
RESIDUE
COMPARISON
MATRIX
C
THE
SCORES
FOR
COMMON
RESIDUE
SUBSTITUTIONS
ARE
POSITIVE
WHILE
RARER
SUBSTITUTIONS
ARE
SCORED
NEGATIVELY
BY
DEFAULT
THE
GONNET
PAM
MATRIX
IS
USED
BUT
THE
USER
MAY
SUPPLY
A
DIFFERENT
MATRIX
E
G
A
LOWER
PAM
VALUE
IS
APPROPRIATE
IF
THE
SEQUENCES
ARE
CLOSELY
RELATED
THE
PROFILE
P
HAS
A
COLUMN
OF
SCORES
FOR
EACH
POSITION
IN
THE
ALIGNMENT
THE
COLUMN
IS
OF
HEIGHT
R
AND
CONSISTS
OF
A
SCORE
NUCLEIC
ACIDS
RESEARCH
VOL
NO
FIGURE
DETECTION
AND
CORRECTION
OF
MISALIGNED
SEGMENTS
WITH
CLUSTAL
X
A
A
SET
OF
EFTUS
TESTED
FOR
LOW
SCORING
REGIONS
HIGHLIGHTS
A
PART
OF
THE
SEQUENCE
WHICH
WE
DELIBERATELY
MISALIGNED
BY
INCORRECT
GAP
INSERTION
THE
RANGE
SELECTED
TO
BE
REALIGNED
IS
MARKED
ABOVE
THE
ALIGNMENT
B
AFTER
REMOVAL
OF
GAPS
AND
REALIGNMENT
OF
THE
SELECTED
RESIDUE
RANGE
THE
SEQUENCE
IS
NOW
CORRECTLY
ALIGNED
AND
THE
ERRONEOUS
GAPS
HAVE
BEEN
REMOVED
THE
LOW
SCORING
SEGMENT
CHECK
THE
COLUMN
CONSERVATION
INDICATORS
ABOVE
THE
ALIGNMENT
AND
THE
QUALITY
GRAPH
BELOW
IT
ALL
REFLECT
THE
IMPROVEMENT
IN
THE
ALIGNMENT
FOR
EACH
RESIDUE
IN
THE
MATRIX
C
THE
PROFILE
SCORE
FOR
RESIDUE
R
AT
POSITION
J
IN
THE
ALIGNMENT
IS
DEFINED
AS
C
R
AIJ
WIM
P
R
J
I
M
WI
I
FOR
THE
JTH
POSITION
IN
THE
ITH
SEQUENCE
THE
SCORE
SIJ
IS
DEFINED
AS
SIJ
P
AIJ
J
THE
LOW
SCORING
REGIONS
IN
THE
ITH
SEQUENCE
ARE
FOUND
BY
SUMMING
THE
SCORES
SIJ
ALONG
THE
ALIGNMENT
IN
BOTH
THE
FORWARD
AND
BACKWARD
DIRECTIONS
IF
THE
SUM
IS
FOUND
TO
BE
POSITIVE
IT
IS
RESET
TO
ZERO
THE
FORWARD
PHASE
CAN
BE
DESCRIBED
BY
THE
FOLLOWING
RECURRENCE
RELATIONS
FJ
SIJ
IF
FJ
SIJ
T
FJ
IF
FJ
SIJH
W
IF
J
HAVING
FOUND
THE
REGIONS
IN
THE
SEQUENCE
WHICH
HAVE
NEGATIVE
FJ
SCORES
THESE
REGIONS
ARE
THEN
REFINED
BY
REMOVING
THOSE
POSITIONS
AT
THE
END
OF
EACH
SEGMENT
WHICH
HAVE
A
POSITIVE
PROFILE
SCORE
SIJ
THE
FJ
SCORES
FOR
THESE
POSITIONS
ARE
RESET
TO
ZERO
SIMILARLY
THE
BACKWARD
PHASE
CAN
BE
DESCRIBED
AS
BJ
SIJ
IF
BJ
SIJ
T
BJ
IF
BJ
SIJ
W
IF
J
N
THE
REGIONS
IN
THE
SEQUENCE
WHICH
HAVE
NEGATIVE
BJ
SCORES
ARE
AGAIN
REFINED
BY
REMOVING
THOSE
POSITIONS
AT
THE
BEGINNING
OF
EACH
SEGMENT
WHICH
HAVE
A
POSITIVE
PROFILE
SCORE
SIJ
THE
BJ
SCORES
FOR
THESE
POSITIONS
ARE
RESET
TO
ZERO
NUCLEIC
ACIDS
RESEARCH
VOL
NO
THE
CALCULATION
IS
REPEATED
FOR
EACH
SEQUENCE
COMPARED
WITH
A
PROFILE
FOR
ALL
ALIGNED
SEQUENCES
EXCEPT
ITSELF
THE
LOW
SCORING
SEGMENTS
DEFINED
AS
THOSE
POSITIONS
FOR
WHICH
BOTH
FJ
AND
BJ
ARE
NEGATIVE
ARE
THEN
HIGHLIGHTED
IN
THE
DISPLAY
FIGS
AND
THE
LOW
SCORING
SEGMENT
CALCULATION
IS
DONE
WHEN
THE
USER
SELECTS
THE
CALCULATE
LOW
SCORING
SEGMENTS
OPTION
IT
TAKES
ONLY
A
FEW
SECONDS
TO
PERFORM
UNLESS
THE
ALIGNMENT
IS
VERY
LARGE
MAKING
IT
A
PRACTICAL
TOOL
FOR
INTERACTIVE
USE
IMPLEMENTATION
CLUSTAL
X
DISPLAYS
A
WINDOW
ON
THE
SCREEN
INCLUDING
A
SET
OF
PULL
DOWN
MENUS
ON
LINE
HELP
IS
AVAILABLE
THE
EXACT
FORMAT
OF
THE
SCREEN
WILL
DEPEND
ON
THE
HOST
COMPUTER
AND
THE
OPERATING
SYSTEM
THE
USER
MAY
SELECT
ONE
OF
TWO
MODES
I
MULTIPLE
ALIGNMENT
MODE
WHICH
DISPLAYS
A
SINGLE
DISPLAY
AREA
FOR
MULTIPLE
SEQUENCE
ALIGNMENT
OR
II
PROFILE
ALIGNMENT
MODE
WHICH
HAS
TWO
DISPLAY
AREAS
ALLOWING
THE
USER
TO
USE
PREVIOUSLY
ALIGNED
SEQUENCES
FOR
ALIGNMENT
FIGURE
SHOWS
A
CLUSTAL
X
WINDOW
IN
MULTIPLE
ALIGNMENT
MODE
ALIGNMENTS
OR
INDIVIDUAL
SEQUENCES
CAN
BE
LOADED
INTO
THE
DISPLAY
AREAS
DISPLAYED
ON
THE
SCREEN
USING
THE
MENU
OPTIONS
SCROLL
BARS
ALLOW
EASY
MOVEMENT
TO
DIFFERENT
PARTS
OF
THE
ALIGNMENT
EXTRA
LINES
ARE
ADDED
TO
THE
SEQUENCE
DATA
DISPLAYING
A
RULER
AN
INDICATOR
OF
ALIGNMENT
CONSERVATION
PLUS
ANY
SECONDARY
STRUCTURE
DATA
WHICH
WAS
FOUND
IN
THE
INPUT
ALIGNMENT
FILE
THE
ORDER
OF
THE
SEQUENCES
IN
THE
DISPLAY
CAN
BE
CHANGED
BY
CLICKING
ON
THE
SEQUENCE
NAMES
AND
SELECTING
THE
CUT
AND
PASTE
OPTIONS
FROM
THE
MENUS
IN
PROFILE
ALIGNMENT
MODE
THESE
OPTIONS
ALSO
ALLOW
THE
USER
TO
MOVE
SEQUENCES
FROM
ONE
PROFILE
TO
THE
OTHER
THE
SEQUENCES
CAN
BE
SAVED
AT
ANY
TIME
TO
AN
ALIGNMENT
FILE
IN
ONE
OF
A
NUMBER
OF
FILE
FORMATS
THE
SEQUENCE
DISPLAY
CAN
ALSO
BE
SAVED
IN
A
COLOUR
POSTSCRIPT
FILE
FOR
PRINTING
ON
A
POSTSCRIPT
PRINTER
COLOURING
THE
ALIGNMENT
DISPLAY
THE
SEQUENCES
ARE
AUTOMATICALLY
COLOURED
TO
HIGHLIGHT
CONSERVED
REGIONS
OF
THE
ALIGNMENT
THE
COLOURS
USED
AND
THE
SPECIFICATION
OF
THE
CONSERVATION
OF
RESIDUES
CAN
BE
CONFIGURED
BY
THE
USER
THE
RULES
GOVERNING
THE
COLOURING
OF
RESIDUES
ARE
READ
FROM
A
COLOUR
PARAMETER
FILE
WHICH
CAN
BE
LOADED
AT
ANY
TIME
TWO
TYPES
OF
COLOURING
RULES
ARE
DEFINED
I
A
RESIDUE
CAN
BE
ASSIGNED
A
SPECIFIC
COLOUR
REGARDLESS
OF
ITS
POSITION
IN
THE
ALIGNMENT
IN
THIS
CASE
ALL
OCCURRENCES
OF
THE
RESIDUE
WILL
BE
COLOURED
IN
THE
ALIGNMENT
DISPLAY
II
A
RESIDUE
CAN
BE
ASSIGNED
DIFFERENT
COLOURS
DEPENDING
ON
THE
CONSENSUS
OF
THE
ALIGNMENT
AT
EACH
POSITION
IN
THIS
WAY
FOR
EXAMPLE
CONSERVED
HYDROPHOBIC
OR
HYDROPHILIC
POSITIONS
IN
THE
ALIGNMENT
CAN
BE
HIGHLIGHTED
FIG
REALIGNING
DIVERGENT
REGIONS
IN
DIFFICULT
CASES
WITH
A
FAMILY
OF
HIGHLY
DIVERGENT
SEQUENCES
IT
IS
POSSIBLE
THAT
MISALIGNMENTS
ARE
INTRODUCED
DURING
THE
MULTIPLE
ALIGNMENT
PROCESS
CLUSTAL
X
PROVIDES
TWO
SIMPLE
MECHANISMS
FOR
REALIGNING
THE
MOST
DIVERGENT
REGIONS
I
MISALIGNED
SEQUENCES
MAY
BE
SELECTED
BY
CLICKING
ON
THE
SEQUENCE
NAMES
A
SINGLE
MENU
OPTION
THEN
REMOVES
THESE
SEQUENCES
FROM
THE
ALIGNMENT
SET
AND
REALIGNS
THEM
TO
THE
REMAINING
SEQUENCES
II
THE
SECOND
OPTION
ALLOWS
THE
USER
TO
SPECIFY
A
RANGE
OF
THE
ALIGNMENT
TO
BE
REALIGNED
IN
THIS
CASE
THE
SELECTED
SUB
RANGE
OF
THE
ALIGNMENT
IS
REMOVED
AND
MULTIPLY
ALIGNED
USING
THE
STANDARD
PROGRESSIVE
MULTIPLE
SEQUENCE
ALIGNMENT
METHOD
THE
SUB
RANGE
IS
THEN
FITTED
BACK
INTO
THE
FULL
ALIGNMENT
USING
THESE
TWO
OPTIONS
THE
ORIGINAL
MULTIPLE
SEQUENCE
ALIGNMENT
MAY
BE
ITERATIVELY
IMPROVED
AND
REFINED
DISCUSSION
IDEALLY
METHODS
FOR
MULTIPLE
SEQUENCE
ALIGNMENT
SHOULD
GUARANTEE
TO
FIND
THE
BIOLOGICALLY
CORRECT
ALIGNMENT
FOR
A
SET
OF
SEQUENCES
IN
PRACTICE
THIS
IS
DIFFICULT
TO
ACHIEVE
FIRSTLY
IT
IS
DIFFICULT
TO
DEFINE
AN
OPTIMAL
ALIGNMENT
BETWEEN
DIVERGENT
NUCLEOTIDE
OR
PROTEIN
SEQUENCES
EVEN
GIVEN
TERTIARY
STRUCTURAL
INFORMATION
SECONDLY
METHODS
THAT
FIND
AN
OPTIMAL
MULTIPLE
SEQUENCE
ALIGNMENT
HAVE
BEEN
IMPRACTICAL
TO
IMPLEMENT
MAINLY
DUE
TO
THEIR
COMPUTATIONAL
COST
AS
COMPUTER
PERFORMANCE
IMPROVES
METHODS
WHICH
ITERATE
TOWARD
AN
OPTIMAL
ALIGNMENT
ARE
LIKELY
TO
BECOME
USEFUL
MEANWHILE
THE
HEURISTICAL
APPROACH
OF
PROGRESSIVE
ALIGNMENT
IS
MOST
OFTEN
USED
AS
THE
ALGORITHM
IS
REASONABLY
FAST
AND
MINIMISES
ERROR
IN
ALIGNMENTS
OF
MODERATE
DIFFICULTY
HOWEVER
BECAUSE
THE
FULL
INFORMATION
IN
THE
SEQUENCE
SET
IS
NOT
USED
TO
ALIGN
EACH
SEQUENCE
IT
CAN
BE
POSSIBLE
TO
SEE
ONE
OR
MORE
MISALIGNED
SEQUENCE
SEGMENTS
IN
THE
OUTPUT
ALIGNMENT
IN
SUCH
CASES
THE
SEQUENCES
WOULD
BE
EXPECTED
TO
ALIGN
CORRECTLY
IF
THE
FULL
INFORMATION
WAS
USED
OR
IF
ALIGNMENT
PARAMETERS
SUCH
AS
GAP
PENALTIES
WERE
ADJUSTED
WHEN
WE
DEVELOPED
CLUSTAL
W
WE
GAVE
THE
USER
THE
ABILITY
TO
ITERATE
THE
ALIGNMENT
PROCESS
BY
REALIGNING
AN
ALIGNMENT
OR
BY
PROFILE
ALIGNING
SEQUENCES
TO
AN
ALIGNMENT
IN
THIS
WAY
THE
USER
COULD
CHOOSE
TO
ITERATE
THE
ALIGNMENT
PROCESS
THEREBY
OVERCOMING
SOME
OF
THE
DEFECTS
OF
PROGRESSIVE
ALIGNMENT
WITH
CLUSTAL
X
WE
HAVE
TAKEN
THIS
CAPABILITY
FURTHER
BY
BUILDING
IN
ALGORITHMS
TO
TARGET
THE
PROBLEM
REGIONS
OF
AN
ALIGNMENT
AND
LETTING
THE
USER
REALIGN
SOLELY
THE
SUSPECT
RESIDUE
RANGES
USING
THESE
TOOLS
HIGH
QUALITY
ALIGNMENTS
OF
DIVERGENT
SEQUENCE
SETS
ARE
PRODUCED
MORE
QUICKLY
AND
WITH
GREATER
CONFIDENCE
THAN
HAS
PREVIOUSLY
BEEN
POSSIBLE
BY
PROGRESSIVE
ALIGNMENT
MANY
PROGRAMS
HAVE
BEEN
DEVELOPED
WHICH
ALLOW
TO
A
GREATER
OR
LESSER
DEGREE
MANUAL
INTERVENTION
IN
THE
AUTOMATIC
ALIGNMENT
PROCESS
FOR
EXAMPLE
SOMAP
WAS
DESIGNED
TO
RUN
UNDER
THE
DEC
VMS
OPERATING
SYSTEM
THE
PROGRAM
ALLOWS
THE
USER
TO
MANUALLY
BUILD
UP
A
MULTIPLE
SEQUENCE
ALIGNMENT
IT
CAN
ACCEPT
AUTOMATIC
ALIGNMENTS
CREATED
BY
THE
ORIGINAL
CLUSTAL
PROGRAM
TO
PROVIDE
A
STARTING
POINT
FOR
THE
MANUAL
EDITING
PROCESS
SEAVIEW
IS
A
UNIX
X
WINDOW
BASED
MULTIPLE
SEQUENCE
ALIGNMENT
EDITOR
WHICH
IS
INTERFACED
TO
THE
CLUSTAL
W
PROGRAM
SEQPUP
DON
GILBERT
BIOLOGY
DEPARTMENT
INDIANA
UNIVERSITY
BLOOMINGTON
IN
IS
A
SEQUENCE
EDITOR
AND
ANALYSIS
PROGRAM
WHICH
CAN
LAUNCH
EXTERNAL
APPLICATIONS
SUCH
AS
CLUSTAL
W
TO
PERFORM
SEQUENCE
ALIGNMENT
SEQLAB
WISCONSIN
PACKAGE
VERSION
GENETICS
COMPUTER
GROUP
GCG
MADISON
WI
IS
A
GRAPHICAL
USER
INTERFACE
BASED
ON
THE
OSF
MOTIF
WINDOWING
SYSTEM
IT
DISPLAYS
SEQUENCE
ALIGNMENTS
ON
THE
SCREEN
AND
INCLUDES
POWERFUL
SEQUENCE
EDITING
FACILITIES
THE
PILEUP
PROGRAM
IS
INTERFACED
TO
THE
SEQLAB
EDITOR
TO
PERFORM
AUTOMATIC
MULTIPLE
SEQUENCE
ALIGNMENTS
NUMEROUS
MAC
AND
PC
ALIGNMENT
EDITORS
HAVE
ALSO
BEEN
DEVELOPED
MOST
OF
THESE
EDITORS
WILL
ACCEPT
ALIGNMENT
OUTPUT
FROM
CLUSTAL
PROGRAMS
HOWEVER
USING
CLUSTAL
X
THE
AMOUNT
OF
TIME
SPENT
EDITING
ALIGNMENTS
BY
HAND
SHOULD
BE
MINIMISED
WHILE
A
HAND
EDITED
ALIGNMENT
CAN
ITSELF
BE
RETURNED
FOR
ERROR
CHECKING
CLUSTAL
X
IS
NOT
CONFINED
TO
EITHER
VMS
OR
UNIX
WORK
STATIONS
BUT
ALSO
RUNS
ON
MACINTOSH
AND
PC
COMPUTERS
THE
PROGRAM
PROVIDES
A
FLEXIBLE
APPROACH
TO
THE
PROBLEM
OF
THE
MULTIPLE
ALIGNMENT
OF
LARGE
NUMBERS
OF
SEQUENCES
THE
METHODS
USED
CAN
BE
APPLIED
EQUALLY
WELL
TO
BOTH
NUCLEOTIDE
AND
AMINO
ACID
SEQUENCES
AN
INITIAL
AUTOMATIC
ALIGNMENT
USING
THE
TRADITIONAL
PROGRESSIVE
PAIRWISE
APPROACH
PROVIDES
A
GOOD
STARTING
POINT
FOR
FURTHER
REFINEMENT
THE
ALIGNMENTS
ARE
DISPLAYED
ON
THE
SCREEN
AND
THE
USER
CAN
MOVE
AROUND
EASILY
BETWEEN
DIFFERENT
PARTS
OF
THE
ALIGNMENT
A
VERSATILE
RESIDUE
COLOURING
SCHEME
BASED
ON
THE
CONSERVATION
OF
EACH
POSITION
IN
THE
ALIGNMENT
AUTOMATICALLY
HIGHLIGHTS
CONSERVED
OR
SPECIAL
FEATURES
ALIGNMENT
ANALYSIS
AND
ERROR
DETECTION
TOOLS
FOR
ALIGNMENT
QUALITY
ANALYSIS
HAVE
BEEN
DEVELOPED
AND
INCORPORATED
INTO
THE
PACKAGE
A
QUALITY
ESTIMATE
FOR
EACH
POSITION
IN
THE
ALIGNMENT
IS
PLOTTED
ON
THE
SCREEN
FIG
HIGHLY
CONSERVED
POSITIONS
IN
THE
ALIGNMENT
WILL
GET
A
HIGH
QUALITY
SCORE
WHILST
EITHER
LOW
CONSERVATION
OR
EXCEPTIONAL
RESIDUES
AT
A
PARTIALLY
CONSERVED
POSITION
WILL
LOWER
THE
SCORE
FOR
THE
COLUMN
THE
EXCEPTIONAL
RESIDUES
WHICH
MAY
BE
DUE
TO
MISALIGNMENT
OF
THE
SEQUENCES
OR
SIMPLY
DIVERGENCE
CAN
BE
HIGHLIGHTED
IN
THE
ALIGNMENT
FIG
SOMETIMES
THESE
MAY
BE
OF
BIOLOGICAL
INTEREST
ALTHOUGH
MOST
DIVERGENCE
IS
DUE
TO
NEUTRAL
EVOLUTIONARY
PROCESSES
SEVERAL
METHODS
FOR
CALCULATING
THE
CONSERVATION
OF
AN
ALIGNMENT
COLUMN
HAVE
BEEN
DEVELOPED
ZVELEBIL
ET
AL
USED
PHYSICO
CHEMICAL
PROPERTIES
OF
AMINO
ACIDS
TO
QUANTIFY
THE
CONSERVATION
OF
A
POSITION
IN
AN
ALIGNMENT
IN
ORDER
TO
PREDICT
PROTEIN
SECONDARY
STRUCTURE
SMITH
AND
SMITH
DEFINE
THE
INFORMATION
DENSITY
OF
A
SUB
REGION
ASSUMING
THAT
ALL
AMINO
ACIDS
ARE
INFORMATIONALLY
EQUIVALENT
SANDER
AND
SCHNEIDER
CALCULATE
A
VARIATION
ENTROPY
FOR
EACH
COLUMN
BROUILLET
ET
AL
CALCULATE
THE
MEAN
AND
STANDARD
DEVIATION
OF
THE
PAIRWISE
DISTANCES
BETWEEN
AMINO
ACIDS
IN
EACH
COLUMN
OF
AN
ALIGNMENT
USING
A
DISTANCE
MATRIX
NONE
OF
THESE
METHODS
WERE
FOUND
TO
BE
IDEAL
FOR
INCORPORATION
INTO
CLUSTAL
X
APART
FROM
THE
LATTER
NONE
OF
THE
METHODS
USE
A
STANDARD
RESIDUE
EXCHANGE
MATRIX
AS
IS
NEEDED
FOR
CONSISTENCY
WITH
THE
ALIGNMENT
PROCESS
AS
WELL
AS
PROVIDING
A
NATURAL
WAY
TO
ALLOW
THE
USER
TO
CUSTOMISE
THE
QUALITY
ANALYSIS
BY
VARYING
THE
MATRIX
THE
ADVANTAGE
OF
THE
GEOMETRIC
INTERPRETION
DEVELOPED
FOR
CLUSTAL
X
IS
THAT
STATISTICAL
METHODS
CAN
THEN
BE
APPLIED
TO
DEFINE
A
MEAN
VALUE
FOR
THE
COLUMN
AND
DISTANCES
CAN
BE
MEASURED
BETWEEN
EACH
SEQUENCE
AND
THE
MEAN
UPPER
LIMITS
FOR
THE
EXPECTED
DISTANCE
BETWEEN
ANY
RESIDUE
AND
THE
MEAN
VALUE
CAN
BE
DEFINED
AND
THUS
EXCEPTIONAL
RESIDUES
CAN
BE
IDENTIFIED
LOW
SCORING
SEGMENTS
IN
THE
SEQUENCES
CAN
ALSO
BE
HIGHLIGHTED
IN
THE
ALIGNMENT
FIGS
AND
LOW
SCORING
SEGMENTS
MOST
OFTEN
RESULT
FROM
ONE
OF
THREE
MAJOR
CAUSES
HIGH
DIVERGENCE
BETWEEN
THE
SEQUENCES
ERRORS
IN
INPUT
SEQUENCES
MOST
NOTABLY
FRAMESHIFTS
AND
MISALIGNMENTS
IF
THE
CAUSE
CAN
BE
ASCRIBED
TO
HIGH
DIVERGENCE
THE
ALIGNMENT
MAY
NOT
BE
WRONG
BUT
SHOULD
BE
REGARDED
AS
UNRELIABLE
IN
THE
LOW
SCORING
SEGMENT
IN
PARTICULARLY
UNRELIABLE
SEGMENTS
CLUSTAL
X
MAY
MARK
OUT
EVERY
SEQUENCE
THE
ALIGNMENT
IN
SUCH
A
REGION
IS
LIKELY
TO
BE
MEANINGLESS
FRAMESHIFT
ERRORS
ARE
MORE
FREQUENT
THAN
USUALLY
REALISED
IN
THE
ALIGNMENT
OF
EFTUS
TAKEN
FROM
SWISS
PROT
RELEASE
FOUR
SEQUENCES
HAVE
SHORT
FRAMESHIFTS
WITHIN
THE
REGION
SHOWN
IN
FIGURE
SUSPECT
SEQUENCES
CAN
BE
INVESTIGATED
WITH
FRAMESHIFTING
ALIGNMENT
PROGRAMS
SUCH
AS
PAIRWISE
IN
WISETOOLS
OR
FRAMESEARCH
IN
THE
GCG
PACKAGE
IT
IS
IMPORTANT
TO
DETECT
AND
REMOVE
SEQUENCES
CONTAINING
ERRORS
AS
THEY
CONFOUND
MANY
TYPES
OF
INFERENCES
BASED
ON
MULTIPLE
ALIGNMENTS
AND
MAY
THEMSELVES
ALSO
CAUSE
THE
PROPAGATION
OF
FURTHER
ALIGNMENT
ERRORS
WE
HAVE
FOUND
THE
LOW
SCORING
SEGMENTS
TEST
TO
BE
REMARKABLY
POWERFUL
PICKING
UP
A
NUMBER
OF
FRAMESHIFTS
AND
LEADING
TO
THE
CORRECTION
OF
MANY
MISALIGNMENTS
NOT
EVERY
HIGHLIGHTED
REGION
NUCLEIC
ACIDS
RESEARCH
VOL
NO
IS
FALSE
BUT
BY
CHECKING
THEM
OVER
THE
MAJOR
ERRORS
ARE
ALMOST
ALWAYS
UNCOVERED
NEVERTHELESS
THERE
ARE
SITUATIONS
WHERE
THE
TEST
MAY
GIVE
A
FALSE
SENSE
OF
ALIGNMENT
ACCURACY
THIS
COULD
HAPPEN
WHEN
ALIGNING
SEQUENCES
WITH
STRONG
AMINO
ACID
RESIDUE
BIASES
REDUCED
SEQUENCE
COMPLEXITY
TANDEM
REPEATS
ARE
ANOTHER
CASE
SINCE
SUPERPOSITION
OF
THE
WRONG
REPEATS
COULD
STILL
GIVE
A
HIGH
SCORING
ALIGNMENT
ALIGNMENTS
OF
HIGHLY
DIVERGENT
MEMBRANE
PROTEINS
ARE
TRICKY
ON
BOTH
COUNTS
SINCE
THERE
ARE
MANY
TRANSMEMBRANE
HELICES
WITH
HYDROPHOBIC
AMINO
ACID
BIASES
MORE
SPECIALISED
DETAILED
ALIGNMENT
ANALYSIS
PROGRAMS
ARE
AVAILABLE
THE
ADVANTAGES
OF
CLUSTAL
X
ARE
THAT
THE
QUALITY
ANALYSES
ARE
VERY
FAST
AS
WELL
AS
BEING
INTEGRATED
INTO
THE
ALIGNMENT
PACKAGE
AND
THE
RESULTS
ARE
DISPLAYED
GRAPHICALLY
ON
THE
SCREEN
WITH
ANY
LOW
SCORING
REGIONS
HIGHLIGHTED
BY
SHADING
THE
ALIGNMENT
BACKGROUND
THIS
INTERACTIVE
SYSTEM
PROVIDES
AN
EFFICIENT
AND
FLEXIBLE
APPROACH
TO
ALIGNMENT
ANALYSIS
AND
CORRECTION
CORRECTING
MISALIGNED
REGIONS
IN
FIGURE
A
MODEL
PROTEIN
MISALIGNMENT
HAS
BEEN
SET
UP
FOR
CLARITY
THE
CLOSELY
RELATED
EFTU
SEQUENCES
HAVE
BEEN
DELIBERATELY
MISALIGNED
GENUINE
MISALIGNMENTS
WOULD
NORMALLY
BE
HIGHLY
DIVERGENT
WITH
ONLY
A
FEW
IDENTITIES
IN
PARTICULARLY
CONSERVED
COLUMNS
IN
SUCH
CASES
IF
THE
CORRECT
ALIGNMENT
CAN
BE
ASCERTAINED
THIS
MAY
BE
BY
MATCHES
BETWEEN
RESIDUE
SIMILARITIES
RATHER
THAN
IDENTITIES
IN
THE
EXAMPLE
A
MISALIGNED
SEGMENT
OF
IS
FIRST
DETECTED
AND
MARKED
BY
APPLYING
THE
LOW
SCORING
SEGMENTS
ALGORITHM
FIG
NEXT
A
REGION
OF
THE
ALIGNMENT
SPANNING
THE
ERROR
IS
SELECTED
USING
THE
CURSOR
THE
MENU
OPTION
RESET
ALL
GAPS
BEFORE
ALIGNMENT
IS
TOGGLED
ON
IN
THIS
EXAMPLE
THERE
ARE
FALSELY
INSERTED
GAPS
THAT
MUST
BE
DELETED
THIS
IS
NOT
ALWAYS
THE
CASE
AND
IF
THE
EXISTING
GAPS
SEEM
CORRECT
THE
OPTION
CAN
STAY
SWITCHED
OFF
NOW
THE
REALIGN
SELECTED
RESIDUE
RANGE
OPTION
IS
INVOKED
THE
MISALIGNED
REGION
IS
NOW
RAPIDLY
AND
CORRECTLY
ALIGNED
AGAIN
AND
THE
FALSE
GAPS
ARE
DELETED
FIG
THIS
TIME
THE
LOW
SCORING
SEGMENTS
ALGORITHM
FINDS
ONLY
SHORT
SEGMENTS
ASCRIBABLE
TO
NATURAL
SEQUENCE
DIVERGENCE
REALIGNMENTS
IN
WHICH
THE
GAPS
ARE
LEFT
IN
MAY
RESULT
IN
COLUMNS
WITH
NOTHING
BUT
PADDING
CHARACTERS
IN
WHICH
CASE
THERE
IS
A
MENU
OPTION
AVAILABLE
TO
DELETE
THESE
THE
REALIGNMENT
PROCESS
USES
THE
ALIGNMENT
PARAMETER
DEFAULT
SETTINGS
OR
AS
THEY
ARE
SET
UP
BY
THE
USER
MISALIGNED
REGIONS
ARE
OFTEN
MORE
DIVERGENT
THAN
OTHER
REGIONS
OF
THE
ALIGNMENT
WHICH
MEANS
THAT
THE
ALIGNMENT
SCORE
MAY
NOT
BE
MUCH
HIGHER
THAN
MISALIGNED
ALTERNATIVES
THEREFORE
IT
MAY
BE
NECESSARY
TO
LOWER
GAP
PENALTIES
TO
ALLOW
THE
SEQUENCES
TO
ALIGN
THIS
IS
TESTED
BY
TRIAL
AND
ERROR
HOWEVER
THE
USER
SHOULD
BE
AWARE
OF
TWO
FACTORS
THAT
ALREADY
AFFECT
THE
GAP
PENALTIES
IN
THE
LOCAL
REALIGNMENT
THERE
IS
NO
GAP
PENALTY
AT
THE
ENDS
OF
A
SELECTED
REGION
SO
IT
IS
FREE
TO
PUT
NEW
GAPS
THERE
JUDICIOUS
SELECTION
OF
THE
RANGE
BOUNDARIES
CAN
DIRECT
GAPS
TO
DESIRED
SITES
GAP
PENALTIES
ARE
ALSO
LOWERED
AT
EXISTING
GAPS
IF
THESE
ARE
RETAINED
THESE
FACTORS
MEAN
THAT
THE
SELECTED
RANGE
MAY
GIVE
A
BETTER
ALIGNMENT
WITHOUT
HAVING
TO
LOWER
THE
GAP
PENALTIES
FURTHER
USES
FOR
THE
LOW
SCORING
SEGMENTS
IN
CLUSTAL
X
THE
NEW
ALGORITHM
FOR
MARKING
LOW
SCORING
SEGMENTS
HAS
BEEN
IMPLEMENTED
FOR
VISUAL
INTERACTION
HOWEVER
THE
ALGORITHM
HAS
THE
POTENTIAL
FOR
WIDER
USAGE
THERE
ARE
CURRENTLY
MANY
PROJECTS
TO
AUTOMATICALLY
PRODUCE
DATABASES
OF
NUCLEIC
ACIDS
RESEARCH
VOL
NO
MULTIPLE
SEQUENCE
ALIGNMENTS
THE
ALIGNMENTS
TEND
NOT
TO
BE
OF
HIGH
QUALITY
AS
IT
HAS
BEEN
DIFFICULT
TO
DISTINGUISH
GOOD
AND
BAD
ALIGNED
REGIONS
RAPIDLY
AND
RELIABLY
REMOVING
SEQUENCES
WITH
LOW
SCORING
SEGMENTS
BELOW
A
CUT
OFF
SCORE
SHOULD
DRAMATICALLY
IMPROVE
THESE
ALIGNMENTS
AS
ALL
SEQUENCES
THAT
CONTAIN
MAJOR
ERRORS
OR
ARE
TOO
DIVERGENT
TO
ALIGN
CAN
BE
TRAPPED
THE
ALGORITHM
ALSO
HAS
THE
POTENTIAL
TO
AUTOMATICALLY
ESTABLISH
THE
DOMAIN
BOUNDARIES
IN
SETS
OF
PARTIALLY
RELATED
MULTI
DOMAIN
PROTEINS
IN
THIS
CASE
THE
SMITH
WATERMAN
BEST
LOCAL
ALIGNMENT
ALGORITHM
FINDING
THE
APPROXIMATE
REGIONS
ENCOMPASSING
THE
HOMOLOGOUS
DOMAINS
WOULD
BE
HARNESSED
TO
THE
FORWARDS
BACKWARDS
APPROACH
SUMMING
BOTH
THE
POSITIVE
AND
NEGATIVE
SCORING
SEGMENTS
IN
ORDER
TO
DEFINE
SHARP
BOUNDARIES
A
SIMPLER
APPLICATION
WOULD
BE
END
TRIMMING
IN
AN
ALIGNMENT
SINCE
THE
TERMINI
OF
PROTEINS
ARE
OFTEN
POORLY
CONSERVED
ABSTRACT
SUMMARY
THE
CLUSTAL
W
AND
CLUSTAL
X
MULTIPLE
SEQUENCE
ALIGNMENT
PROGRAMS
HAVE
BEEN
COMPLETELY
REWRITTEN
IN
CÞÞ
THIS
WILL
FACILITATE
THE
FURTHER
DEVELOPMENT
OF
THE
ALIGNMENT
ALGORITHMS
IN
THE
FUTURE
AND
HAS
ALLOWED
PROPER
PORTING
OF
THE
PROGRAMS
TO
THE
LATEST
VERSIONS
OF
LINUX
MACINTOSH
AND
WINDOWS
OPERATING
SYSTEMS
AVAILABILITY
THE
PROGRAMS
CAN
BE
RUN
ON
LINE
FROM
THE
EBI
WEB
SERVER
HTTP
WWW
EBI
AC
UK
TOOLS
THE
SOURCE
CODE
AND
EXECUTABLES
FOR
WINDOWS
LINUX
AND
MACINTOSH
COMPUTERS
ARE
AVAILABLE
FROM
THE
EBI
FTP
SITE
FTP
FTP
EBI
AC
UK
PUB
SOFTWARE
CONTACT
CLUSTALW
UCD
IE
INTRODUCTION
MULTIPLE
SEQUENCE
ALIGNMENTS
ARE
NOW
ONE
OF
THE
MOST
WIDELY
USED
BIOINFORMATICS
ANALYSES
THEY
ARE
NEEDED
ROUTINELY
AS
PARTS
OF
MORE
COMPLICATED
ANALYSES
OR
ANALYSIS
PIPELINES
AND
THERE
ARE
SEVERAL
VERY
WIDELY
USED
PACKAGES
E
G
CLUSTAL
W
THOMPSON
ET
AL
CLUSTAL
X
THOMPSON
ET
AL
T
COFFEE
NOTREDAME
ET
AL
MAFFT
KATOH
ET
AL
AND
MUSCLE
EDGAR
CLUSTAL
IS
ALSO
THE
OLDEST
OF
THE
CURRENTLY
MOST
WIDELY
USED
PROGRAMS
HAVING
BEEN
FIRST
DISTRIBUTED
BY
POST
ON
FLOPPY
DISKS
IN
THE
LATE
IT
WAS
INITIALLY
WRITTEN
IN
MICROSOFT
FORTRAN
FOR
MS
DOS
AND
ORIGINALLY
RAN
ON
IBM
COMPATIBLE
PERSONAL
COMPUTERS
AS
FOUR
SEPARATE
EXECUTABLE
PROGRAMS
HIGGINS
AND
SHARP
THESE
WERE
LATER
REWRITTEN
IN
C
AND
MERGED
INTO
A
SINGLE
PROGRAM
CLUSTAL
V
HIGGINS
ET
AL
THAT
WAS
DISTRIBUTED
FOR
VAX
VMS
UNIX
APPLE
MACINTOSH
AND
IBM
COMPATIBLE
PCS
THESE
PROGRAMS
WERE
DISTRIBUTED
FROM
THE
EMBL
FILE
SERVER
STOEHR
AND
OMOND
AN
E
MAIL
AND
FTP
SERVER
BASED
AT
THE
EMBL
IN
HEIDELBERG
GERMANY
THE
CURRENT
CLUSTAL
PROGRAMS
ALL
DERIVE
FROM
CLUSTAL
W
THOMPSON
ET
AL
WHICH
INCORPORATED
A
NOVEL
POSITION
SPECIFIC
SCORING
SCHEME
AND
A
WEIGHTING
SCHEME
FOR
DOWN
WEIGHTING
OVER
REPRESENTED
SEQUENCE
GROUPS
THE
W
TO
WHOM
CORRESPONDENCE
SHOULD
BE
ADDRESSED
STANDS
FOR
WEIGHTS
THESE
PROGRAMS
HAVE
BEEN
AMENDED
AND
ADDED
TO
MANY
TIMES
SINCE
IN
ORDER
TO
INCREASE
FUNCTIONALITY
AND
TO
INCREASE
SENSITIVITY
THE
USER
FRIENDLINESS
HAS
ALSO
BEEN
GREATLY
ENHANCED
BY
THE
ADDITION
IN
OF
A
FULL
GRAPHICAL
USER
INTERFACE
THOMPSON
ET
AL
THIS
HAS
MADE
THE
CODE
COMPLICATED
TO
MAINTAIN
AND
DEVELOP
AS
THE
GRAPHICAL
INTERFACE
MUST
BE
CONSTANTLY
MODIFIED
AND
RECOMPILED
FOR
NEW
OPERATING
SYSTEMS
AND
DESKTOP
ENVIRONMENTS
WINDOWS
MACINTOSH
VMS
UNIX
AND
LINUX
BY
THE
LATE
CLUSTAL
W
AND
CLUSTAL
X
WERE
THE
MOST
WIDELY
USED
MULTIPLE
ALIGNMENT
PROGRAMS
THEY
WERE
ABLE
TO
ALIGN
MEDIUM
SIZED
DATA
SETS
VERY
QUICKLY
AND
WERE
EASY
TO
USE
THE
ALIGNMENTS
WERE
OF
SUFFICIENT
QUALITY
NOT
TO
REQUIRE
MANUAL
EDITING
OR
ADJUSTMENT
VERY
OFTEN
THIS
SITUATION
CHANGED
GREATLY
WITH
THE
APPEARANCE
OF
THE
FIRST
CUSTOM
MADE
BENCHMARK
TEST
SET
FOR
MULTIPLE
ALIGNMENT
PROGRAMS
BALIBASE
THOMPSON
ET
AL
THIS
WAS
FOLLOWED
BY
THE
APPEARANCE
OF
T
COFFEE
WHICH
WAS
ABLE
TO
MAKE
VERY
ACCURATE
ALIGNMENTS
OF
VERY
DIVERGENT
PROTEINS
BUT
ONLY
FOR
SMALL
SETS
OF
SEQUENCES
GIVEN
ITS
HIGH
COMPUTATIONAL
COST
WITH
THE
INCREASE
IN
PROCESSING
SPEED
OF
DESKTOP
COMPUTERS
AND
SUBSEQUENT
OPTIMISATION
OF
THE
T
COFFEE
CODE
THE
LATTER
IS
NOW
PRACTICAL
FOR
ROUTINE
USE
ON
MODERATELY
SIZED
ALIGNMENT
PROBLEMS
MORE
RECENTLY
MAFFT
AND
MUSCLE
APPEARED
WHICH
WERE
INITIALLY
AT
LEAST
AS
ACCURATE
AS
CLUSTAL
IN
TERMS
OF
ALIGNMENT
ACCURACY
BUT
WHICH
WERE
ALSO
EXTREMELY
FAST
AND
ABLE
TO
ALIGN
MANY
THOUSANDS
OF
SEQUENCES
OVER
THE
PAST
OR
YEARS
THESE
PROGRAMS
HAVE
ALSO
GRADUALLY
BECOME
MORE
AND
MORE
ACCURATE
WITH
DIFFICULT
ALIGNMENTS
NONETHELESS
CLUSTAL
W
AND
CLUSTAL
X
CONTINUE
TO
BE
VERY
WIDELY
USED
INCREASINGLY
ON
WEBSITES
THE
EBI
CLUSTAL
SITE
GETS
LITERALLY
MILLIONS
OF
MULTIPLE
ALIGNMENT
JOBS
PER
YEAR
IT
IS
IN
THIS
CONTEXT
THAT
WE
DEVELOPED
CLUSTAL
W
AND
CLUSTAL
X
THESE
PROGRAMS
WERE
REWRITTEN
IN
CÞÞ
WITH
A
SIMPLE
OBJECT
MODEL
IN
ORDER
TO
MAKE
IT
EASIER
TO
MAINTAIN
THE
CODE
AND
MORE
IMPORTANTLY
TO
MAKE
IT
EASIER
TO
MODIFY
OR
EVEN
REPLACE
SOME
OF
THE
ALIGNMENT
ALGORITHMS
WE
HAVE
PRODUCED
TWO
NEW
PROGRAMS
WHICH
ARE
VERY
SIMILAR
IN
LOOK
AND
FEEL
TO
THE
OLDER
VERSION
PROGRAMS
BUT
WHICH
CAN
NOW
BE
MANAGED
MORE
EASILY
WE
HAVE
ALSO
MADE
SOME
MINOR
ADJUSTMENTS
TO
THE
THE
AUTHOR
PUBLISHED
BY
OXFORD
UNIVERSITY
PRESS
ALL
RIGHTS
RESERVED
FOR
PERMISSIONS
PLEASE
EMAIL
JOURNALS
PERMISSIONS
OXFORDJOURNALS
ORG
M
A
LARKIN
ET
AL
FIG
CLUSTALX
SCREENSHOT
ON
MAC
OS
X
ALIGNMENT
ALGORITHMS
WE
HAVE
INCLUDED
NEW
CODE
FOR
UPGMA
GUIDE
TREES
AS
AN
ALTERNATIVE
TO
THE
USUAL
NEIGHBOR
JOINING
GUIDE
TREES
THIS
HELPS
SPEED
UP
THE
ALIGNMENT
OF
EXTREMELY
LARGE
DATA
SETS
OF
TENS
OF
THOUSANDS
OF
SEQUENCES
WE
HAVE
ALSO
INCLUDED
AN
ITERATIVE
ALIGNMENT
FACILITY
TO
INCREASE
ALIGNMENT
ACCURACY
CLUSTAL
X
IS
THE
NEW
VERSION
OF
THE
CLUSTAL
X
GRAPHICAL
ALIGNMENT
TOOL
THE
ORIGINAL
CLUSTAL
X
WAS
DEVELOPED
USING
NCBI
VIBRANT
TOOLBOX
THE
VIBRANT
TOOLBOX
IS
NO
LONGER
SUPPORTED
WHICH
LED
TO
PROBLEMS
COMPILING
CLUSTAL
X
ON
NEWER
VERSIONS
OF
OPERATING
SYSTEMS
THE
GRAPHICAL
INTERFACE
SECTIONS
OF
CLUSTAL
X
HAVE
BEEN
COMPLETELY
REWRITTEN
USING
THE
QT
GUI
TOOLBOX
QT
IS
AN
EASY
TO
USE
MULTI
PLATFORM
CÞÞ
GUI
TOOLKIT
THE
CODE
NEED
ONLY
BE
COMPILED
ONCE
ON
EACH
OF
THE
PLATFORMS
THE
QT
TOOLBOX
PROVIDES
A
NATIVE
LOOK
AND
FEEL
ON
WINDOWS
LINUX
AND
MAC
PLATFORMS
CLUSTAL
X
HAS
THE
SAME
FUNCTIONALITY
AS
CLUSTAL
X
NEW
FEATURES
TWO
NEW
OPTIONS
HAVE
BEEN
INCLUDED
IN
CLUSTAL
W
TO
ALLOW
FASTER
ALIGNMENT
OF
VERY
LARGE
DATA
SETS
AND
TO
INCREASE
ALIGNMENT
ACCURACY
THE
DEFAULT
OPTIONS
OF
CLUSTAL
W
AND
CLUSTAL
X
ARE
THE
SAME
AS
CLUSTAL
W
AND
WILL
GIVE
THE
SAME
ALIGNMENT
RESULTS
THE
GUIDE
TREES
IN
CLUSTAL
HAVE
BEEN
CALCULATED
USING
THE
NEIGHBOR
JOINING
NJ
METHOD
FOR
THE
PAST
YEARS
OR
SO
IN
THE
EARLIEST
VERSIONS
OF
THE
PROGRAM
UPGMA
WAS
USED
UPGMA
IS
FASTER
THAN
NJ
BUT
PRONE
TO
CLUSTER
LONG
BRANCHES
TOGETHER
WHEN
EVOLUTIONARY
RATES
ARE
VERY
UNEQUAL
IN
DIFFERENT
LINEAGES
BOTH
ALGORITHMS
HAVE
COMPLEXITY
OF
O
BUT
UPGMA
IS
FASTER
FOR
A
GIVEN
DATA
SET
AND
THE
DIFFERENCE
BECOMES
PRONOUNCED
WITH
VERY
LARGE
N
ON
A
STANDARD
DESKTOP
PC
IT
IS
POSSIBLE
TO
CLUSTER
SEQUENCES
IN
LESS
THAN
A
MINUTE
USING
UPGMA
WHILE
NJ
WOULD
TAKE
OVER
AN
HOUR
WE
HAVE
REIMPLEMENTED
A
VERY
EFFICIENT
ALGORITHM
FOR
UPGMA
WHICH
CAN
BE
CALLED
BY
USING
THE
COMMAND
LINE
OPTION
IT
IS
MARGINALLY
LESS
ACCURATE
ON
THE
BALIBASE
BENCHMARK
BUT
ON
LARGE
ALIGNMENTS
E
G
GLOBIN
SEQUENCES
THIS
IS
OFFSET
BY
THE
SAVINGS
IN
PROCESSING
TIME
H
VERSUS
H
ITERATION
IS
A
QUICK
AND
EFFECTIVE
METHOD
OF
REFINING
ALIGNMENTS
A
REMOVE
FIRST
ITERATION
SCHEME
WHICH
OPTIMIZES
THE
WEIGHTED
SUM
OF
PAIRS
WSP
SCORE
HAS
BEEN
INCLUDED
IN
THIS
VERSION
OF
CLUSTAL
DURING
EACH
ITERATION
STEP
EACH
SEQUENCE
IS
REMOVED
FROM
THE
ALIGNMENT
IN
TURN
AND
REALIGNED
IF
THE
WSP
SCORE
IS
REDUCED
THEN
THE
RESULTING
ALIGNMENT
IS
RETAINED
THE
ITERATION
SCHEME
CAN
BE
USED
TO
EITHER
REFINE
THE
FINAL
ALIGNMENT
OR
AT
EACH
STEP
IN
THE
PROGRESSIVE
ALIGNMENT
ITERATING
DURING
THE
PROGRESSIVE
ALIGNMENT
TENDS
TO
BE
MORE
ACCURATE
BUT
ALSO
MUCH
MORE
TIME
CONSUMING
AS
THERE
ARE
NODES
IN
THE
GUIDE
TREE
THE
COMMAND
LINE
OPTION
REFINES
THE
FINAL
ALIGNMENT
WHILE
THE
OPTION
INCORPORATES
THE
SCHEME
INTO
THE
PROGRESSIVE
ALIGNMENT
THE
NUMBER
OF
ITERATION
CYCLES
IS
SET
VIA
THE
COMMAND
LINE
OPTION
NUMITERS
MOLECULAR
GRAPHICS
STILL
PLAYS
AN
IMPORTANT
ROLE
IN
THE
DETER
MINATION
OF
PROTEIN
STRUCTURES
USING
X
RAY
CRYSTALLOGRAPHIC
DATA
DESPITE
ON
GOING
EFFORTS
TO
AUTOMATE
MODEL
BUILDING
FUNCTIONS
SUCH
AS
SIDE
CHAIN
PLACEMENT
LOOP
LIGAND
AND
FRAGMENT
TTING
STRUCTURE
COMPARISON
ANALYSIS
AND
VALIDATION
ARE
ROUTINELY
PERFORMED
USING
MOLECULAR
GRAPHICS
LOWER
Ê
RESOLUTION
DMIN
WORSE
THAN
A
DATA
IN
PARTICULAR
NEED
INTERACTIVE
TTING
THE
INTRODUCTION
OF
FRODO
JONES
AND
THEN
O
JONES
ET
AL
TO
THE
ELD
OF
PROTEIN
CRYSTALLOGRAPHY
WAS
IN
EACH
CASE
REVOLUTIONARY
EACH
IN
THEIR
TIME
BREAKING
NEW
GROUND
IN
DEMONSTRATING
WHAT
WAS
POSSIBLE
WITH
THE
CURRENT
HARDWARE
THESE
TOOLS
ALLOWED
PROTEIN
CRYSTALLOGRAPHERS
TO
ENJOY
WHAT
IS
WIDELY
HELD
TO
BE
THE
MOST
THRILLING
PART
OF
THEIR
WORK
GIVING
BIRTH
AS
IT
WERE
TO
A
NEW
PROTEIN
STRUCTURE
THE
PROGRAM
SUITE
COLLABORATIVE
COMPUTATIONAL
PROJECT
NUMBER
IS
AN
INTEGRATED
COLLECTION
OF
SOFTWARE
FOR
MACROMOLECULAR
CRYSTALLOGRAPHY
WITH
A
SCOPE
RANGING
FROM
DATA
PROCESSING
TO
STRUCTURE
RE
NEMENT
AND
VALIDATION
UNTIL
RECENTLY
MOLECULAR
GRAPHICS
HAD
NOT
BEEN
PART
OF
THE
SUITE
WITH
THE
RECENT
COMPUTATIONAL
AND
GRAPHICAL
PERFORMANCE
OF
RELATIVELY
CHEAP
HARDWARE
THE
TIME
HAD
ARRIVED
FOR
TO
PROVIDE
GRAPHICAL
FUNCTIONALITY
FOR
KNOWLEDGE
BASED
SEMI
AUTOMATIC
BUILDING
USING
POWERFUL
MODERN
LANGUAGES
IN
A
EXIBLE
EXTENDIBLE
PACKAGE
POTTERTON
ET
AL
IS
AN
INITIATIVE
BY
TO
PROVIDE
LIBRARIES
AND
A
MOLECULAR
GRAPHICS
APPLICATION
THAT
IS
A
POPULAR
SYSTEM
FOR
REPRESENT
ATION
MODELLING
STRUCTURE
DETERMINATION
ANALYSIS
AND
VALIDATION
THE
AIM
IS
TO
PROVIDE
A
SYSTEM
THAT
IS
EASY
TO
USE
AND
A
PLATFORM
FOR
DEVELOPERS
WHO
WISH
TO
INTEGRATE
MACRO
MOLECULAR
COMPUTATION
WITH
A
MOLECULAR
GRAPHICS
INTERFACE
THERE
ARE
SEVERAL
MODULES
TO
SUCH
GRAPHICAL
FUNCTIONALITY
THE
PROTEIN
MODEL
BUILDING
MAP
TTING
TOOLS
DESCRIBED
HERE
ARE
ONLY
A
PART
THESE
TOOLS
ARE
AVAILABLE
AS
A
STAND
ALONE
SOFTWARE
PACKAGE
COOT
A
MAP
TTING
PROGRAM
HAS
TO
PROVIDE
CERTAIN
FUNCTIONALITY
WHICH
IS
NOT
REQUIRED
BY
A
MOLECULAR
DISPLAY
PROGRAM
THESE
FUNCTIONS
INCLUDE
SYMMETRY
COORDINATES
ELECTRON
DENSITY
MAP
CONTOURING
AND
THE
ABILITY
TO
MOVE
THE
COORDINATES
IN
VARIOUS
WAYS
SUCH
AS
MODEL
IDEALIZATION
OR
ACCORDING
TO
SIDE
CHAIN
ROTAMER
PROBABILITIES
DOI
ACTA
CRYST
RESEARCH
PAPERS
THE
MAP
TTING
AND
MODEL
BUILDING
FUNCTIONS
DESCRIBED
HERE
HAVE
A
FUNCTIONALITY
BROADLY
SIMILAR
TO
THAT
OF
PROGRAMS
SUCH
AS
O
XTALVIEW
FROM
X
T
MCREE
OR
QUANTA
ACCELRYS
SAN
DIEGO
CA
USA
HOWEVER
IN
THE
SPIRIT
OF
THE
PROGRAM
SUITE
IT
IS
POSSIBLE
FOR
OTHERS
TO
READ
AND
MODIFY
THE
PROGRAM
COOT
ATTEMPTS
GENERALLY
SPEAKING
TO
PROVIDE
MORE
TRANS
PARENCY
EASE
OF
USE
BETTER
EXTENDABILITY
SEMI
AUTOMATED
MODEL
BUILDING
METHODS
AND
CONVENIENT
INTEGRATION
WITH
PROGRAMS
OF
THE
SUITE
PROGRAM
FUNCTIONS
COOT
HAS
BEEN
SUBSTANTIALLY
BUILT
AROUND
TWO
MAJOR
LIBRARIES
MMDB
KRISSINEL
ET
AL
A
LIBRARY
FOR
THE
HANDLING
OF
MACROMOLECULAR
COORDINATES
AND
CLIPPER
COWTAN
A
LIBRARY
FOR
CRYSTALLOGRAPHIC
OBJECTS
AND
COMPUTATION
THEREOF
THE
VARIOUS
FUNCTIONS
OF
COOT
ARE
SPLIT
INTO
STAND
ALONE
CLASSES
IN
THE
SENSE
THAT
AN
ATTEMPT
HAS
BEEN
MADE
TO
MINIMIZE
THE
DEPENDENCE
OF
THE
CLASSES
ON
ANYTHING
OTHER
THAN
THE
ABOVE
LIBRARIES
WITH
PORTABILITY
IN
MIND
SPECIAL
EFFORT
WAS
MADE
NOT
TO
INTRODUCE
GUI
DEPENDENCES
INTO
THE
INTERFACE
TO
COOT
LIBRARY
OF
TOOLS
COOT
IS
EVENT
DRIVEN
FUNCTIONS
ARE
ONLY
RUN
AS
A
RESULT
OF
USER
ACTION
TYPICALLY
MOVING
OR
CLICKING
THE
MOUSE
SYMMETRY
COORDINATE
SYMMETRY
IS
RECOMPUTED
AND
REDISPLAYED
AT
EVERY
RECENTRE
EVENT
FOR
EACH
MOLECULE
FOR
WHICH
THE
USER
WISHES
TO
DISPLAY
SYMMETRY
SYMMETRY
ATOMS
ARE
DISPLAYED
WITHIN
A
PARTICULAR
DISTANCE
CRITERION
OF
THE
DISPLAY
CENTRE
BY
USING
A
SET
OF
PRE
COMPUTED
GUIDE
POINTS
THAT
MARK
THE
EXTENTS
OF
THE
MOLECULE
AND
APPLYING
THE
SYMMETRY
OPERATORS
AND
CELL
SHIFTS
TO
THESE
GUIDE
POINTS
A
SET
OF
OPERATOR
INDEXES
AND
CELL
SHIFTS
ARE
GENERATED
THAT
MAY
CONTAIN
SYMMETRY
RELATED
ATOMS
CLOSE
TO
THE
SCREEN
CENTRE
WHERE
CLOSE
IS
DE
NED
BY
A
USER
SETTABLE
PARAMETER
FOR
EACH
OF
THESE
SETS
ALL
ATOMS
IN
THE
MOLECULE
ARE
TRANSFORMED
AND
A
CHECK
IS
MADE
FOR
EACH
TO
SEE
IF
IT
IS
WITHIN
THE
SYMMETRY
DISPLAY
RADIUS
OF
THE
POSITION
AT
THE
CENTRE
OF
THE
SCREEN
THUS
SYMMETRY
IS
KEPT
CURRENT
AND
RELEVANT
TO
THE
CURRENT
DISPLAY
CENTRE
ELECTRON
DENSITY
BECAUSE
COOT
IS
BASED
ON
THE
CLIPPER
LIBRARIES
IT
IS
EASY
TO
GENERATE
MAPS
BY
READING
A
LE
OF
STRUCTURE
FACTORS
THAT
CONTAIN
PHASE
INFORMATION
TYPICALLY
AN
MTZ
LE
DENSITY
IS
NOT
LIMITED
TO
ANY
PARTICULAR
PART
OF
THE
UNIT
CELL
THE
RELEVANT
SYMMETRY
RELATED
DENSITY
IS
GENERATED
AND
THEN
CONTOURED
AUTOMATICALLY
USING
CLIPPER
FUNCTIONALITY
THE
ELECTRON
DENSITY
MAPS
CAN
BE
SIMPLY
RECONTOURED
PROVOKED
BY
SCRIPT
OR
KEYBOARD
OR
MOUSE
EVENTS
AT
A
DIFFERENT
LEVEL
USING
A
PREDETERMINED
INCREMENT
EVERY
MAP
DISPLAYED
OR
UN
DISPLAYED
IS
REGENERATED
AND
CONTOURED
THIS
PROCESS
IS
NOT
OPTIMALLY
FAST
BUT
SIMPLI
ES
THE
USER
INTERFACE
INTERFACE
TO
REFMAC
ON
READING
AN
MTZ
LE
ONE
CAN
OPTIONALLY
ASSIGN
PARA
METERS
FOR
RUNNING
REFMAC
MURSHUDOV
ET
AL
REFMAC
IS
A
PROGRAM
OF
THE
SUITE
FOR
MAXIMUM
LIKELIHOOD
BASED
MACROMOLECULAR
RE
NEMENT
AFTER
A
PERIOD
OF
INTERACTIVE
MODEL
BUILDING
THE
USER
CAN
CHOOSE
TO
USE
REFMAC
TO
RE
NE
THE
CURRENT
COORDINATES
IN
COMBINATION
WITH
MTZ
PARAMETERS
COOT
BLOCKS
UNTIL
REFMAC
HAS
TERMINATED
AND
THEN
AUTOMATICALLY
READS
THE
NEWLY
GENERATED
RE
NED
COORDINATES
AND
MTZ
LE
FROM
WHICH
A
MAP
IS
GENERATED
AND
DISPLAYED
RIGID
BODY
REFINEMENT
CLIPPER
LIBRARY
FUNCTIONS
PROVIDE
EASY
ACCESS
TO
THE
MAP
GRADIENTS
FOR
A
SELECTED
COORDINATE
SET
THE
MAP
GRADIENTS
AT
THE
ATOM
CENTRES
ARE
AVERAGED
A
SHIFT
IS
APPLIED
TO
ALL
THE
SELECTED
ATOMS
THAT
IS
SOME
SIMPLE
FRACTION
OF
THE
AVERAGE
GRADIENT
THE
ROTATIONAL
COMPONENT
OF
THE
RIGID
BODY
RE
NE
MENT
IS
GENERATED
IN
THE
FOLLOWING
MANNER
THE
ROTATIONS
TO
BE
CALCULATED
X
Y
AND
Z
ARE
SMALL
ROTATIONS
AROUND
THE
COORDINATE
AXES
THE
CENTRE
OF
ROTATION
V
BEING
THE
CENTRE
OF
THE
ROTATING
ATOMS
LET
VPI
BE
THE
PROJECTION
ON
TO
THE
XY
PLANE
OF
THE
VECTOR
BETWEEN
THE
POSITION
OF
ATOM
I
AND
V
THE
UNIT
VECTOR
BEING
VP
THE
DOT
PRODUCT
OF
THE
GRADIENT
WITH
VP
PROVIDES
DVP
I
I
I
ANGLE
IS
ARCTAN
D
V
THESE
ANGLES
ARE
THE
REQUIRED
C
VPI
J
J
C
AVAILABLE
FOR
EACH
ATOM
AND
THEY
ARE
AVERAGED
TO
OBTAIN
THREE
PERPENDICULAR
ROTATIONS
X
Y
AND
Z
THESE
ANGLE
TRANSFOR
MATIONS
ARE
APPLIED
TO
THE
COORDINATES
THE
APPLICATION
OF
TRANSFORMATIONS
CONTINUES
UNTIL
THE
AVERAGE
SHIFT
LENGTH
IS
LESS
Ê
THAN
A
THIS
IS
A
REASONABLE
APPROACH
FOR
MUCH
OF
A
PROTEIN
STRUCTURE
BUT
COULD
BEHAVE
BADLY
WHERE
THERE
IS
A
COMBINA
TION
OF
RELATIVELY
HEAVY
AND
LIGHT
ATOMS
SUCH
AS
SULFATES
OR
METHIONINES
THIS
PROBLEM
COULD
BE
COUNTERED
BY
WEIGHTING
THE
ATOM
DENSITY
SCORE
BY
THE
ATOMIC
WEIGHT
ROTAMERS
THE
ROTAMER
LIBRARY
USED
IN
COOT
IS
THE
BACKBONE
INDEPENDENT
LIBRARY
OF
DUNBRACK
COHEN
IT
IS
FORMED
FROM
A
REASONABLY
LARGE
SAMPLE
SET
CHAINS
IS
REASONABLY
UP
TO
DATE
MAY
AND
PROVIDES
A
MORE
ACCURATE
ESTIMA
TION
OF
THE
POPULATION
OF
RARE
ROTAMERS
THE
COOT
FUNCTION
AUTO
T
ROTAMER
TAKES
A
SET
OF
MOST
LIKELY
ROTAMERS
FOR
A
PARTICULAR
SIDE
CHAIN
AND
GENERATES
COORDINATES
FOR
EACH
ROTAMER
EACH
TEST
ROTAMER
IS
THEN
RIGID
BODY
RE
NED
AND
THE
NAL
POSITION
IS
SCORED
ACCORDING
TO
THE
T
TO
THE
DENSITY
THE
RESIDUE
BACKBONE
ATOMS
ARE
INCLUDED
IN
THE
SET
OF
RE
NED
ATOMS
THE
BEST
T
ROTAMER
IS
CHOSEN
AND
REPLACES
THE
PREVIOUS
COORDINATES
REGULARIZATION
AND
REFINEMENT
MOLECULAR
GRAPHICS
MODEL
BUILDING
REQUIRES
THE
ABILITY
TO
REGULARIZE
IDEALIZE
THE
COORDINATES
OF
THE
MODEL
IN
ORDER
TO
DO
SO
THE
IDEAL
VALUES
OF
THE
GEOMETRY
OF
THE
MACROMOLECULE
ACTA
CRYST
EMSLEY
COWTAN
MODEL
BUILDING
TOOLS
FOR
MOLECULAR
GRAPHICS
RESEARCH
PAPERS
SHOULD
BE
KNOWN
THESE
IDEAL
VALUES
CAN
COME
IN
VARIOUS
FORMS
THE
INTERFACE
IN
COOT
READS
THE
MMCIF
DICTIONARIES
OF
REFMAC
WHICH
DE
NE
IDEA
VALUES
AND
ESTIMATED
STANDARD
DEVIATIONS
FOR
BOND
LENGTHS
ANGLES
TORSIONS
PLANES
AND
CHIRAL
CENTRES
COOT
USES
THE
POLAK
RIBIERE
VARIANT
OF
THE
BFGS
BROYDEN
FLETCHER
GOLDFARB
SHANNO
CONJUGATE
GRADIENT
MULTI
VARIABLE
FUNCTION
MINIMIZER
TO
OPTIMIZE
THE
COORDINATES
THE
ANALYTICAL
GRADIENT
DERIVATIONS
ARE
DESCRIBED
IN
APPENDIX
A
FITTING
TO
THE
MAP
AS
DESCRIBED
ABOVE
THE
MAP
GRADIENTS
ARE
PROVIDED
BY
A
CLIPPER
FUNCTION
THESE
MAP
GRADIENTS
AT
THE
POSITIONS
OF
THE
ATOM
CENTRES
ARE
SIMPLY
MULTIPLIED
BY
A
USER
CHANGEABLE
SCALING
FACTOR
AND
ADDED
TO
THE
GEOMETRIC
TERMS
TO
DE
NE
THE
TARGET
FUNCTION
THIS
IS
CALLED
RE
NEMENT
IN
COOT
FINDING
LIGANDS
A
MAP
CAN
BE
MASKED
BY
A
SET
OF
COORDINATES
TYPICALLY
THOSE
OF
THE
CURRENTLY
DETERMINED
ATOMS
OF
THE
PROTEIN
MODEL
THIS
APPROACH
LEAVES
A
MAP
THAT
HAS
POSITIVE
DENSITY
AT
PLACES
WHERE
THERE
ARE
NO
ATOMS
TO
REPRESENT
THAT
DENSITY
SIMILAR
IN
FACT
TO
AN
FO
Ÿ
FC
MAP
THIS
MASKED
MAP
IS
SEARCHED
FOR
CLUSTERS
OF
DENSITY
ABOVE
A
PARTICULAR
LEVEL
THE
CLUSTERING
OF
THE
GRID
POINTS
OF
THE
ASYMMETRIC
UNIT
INTO
POTENTIAL
LIGAND
SITES
IS
PERFORMED
CONVENIENTLY
USING
A
RECURSIVE
NEIGHBOUR
SEARCH
OF
THE
MAP
THE
CLUSTERS
ARE
SORTED
ACCORDING
TO
SIZE
AND
ELECTRON
DENSITY
VALUE
EIGENVALUES
AND
EIGENVECTORS
ARE
CALCULATED
FOR
EACH
CLUSTER
OF
GRID
POINTS
SIMILARLY
THE
EIGENVALUES
AND
EIGENVECTORS
OF
THE
SEARCH
LIGANDS
THERE
CAN
OF
COURSE
BE
JUST
ONE
SEARCH
LIGAND
ARE
COMPUTED
THE
PARAMETERS
BEING
THE
POSITIONS
OF
THE
ATOM
CENTRES
THE
EIGENVALUES
OF
THE
LIGANDS
ARE
COMPARED
WITH
THE
EIGENVALUES
OF
EACH
OF
THE
ELECTRON
DENSITY
CLUSTERS
AND
IF
THEY
ARE
SUF
CIENTLY
SIMILAR
THE
LIGAND
IS
PLACED
INTO
THE
CLUSTER
BY
MATCHING
THE
CENTRE
OF
THE
TEST
LIGAND
AND
THE
CENTRE
OF
THE
CLUSTER
THE
LIGAND
IS
ORIENTED
IN
EACH
OF
THE
FOUR
DIFFERENT
ORIENTATIONS
THAT
PROVIDE
COINCIDING
EIGENVECTORS
AND
THEN
RIGID
BODY
RE
NED
AND
SCORED
THE
SCORE
IS
SIMPLY
THE
SUM
OF
THE
ELECTRON
DENSITY
AT
THE
ATOM
CENTRES
THE
SCORE
AT
EACH
SITE
FOR
EACH
DIFFERENT
LIGAND
IS
COMPARED
AND
THE
BEST
T
HIGHEST
SCORE
WITH
SUF
CIENT
FRACTION
OF
ATOMS
IN
POSITIVE
DENSITY
AFTER
THE
RIGID
BODY
RE
NEMENT
IS
CHOSEN
THIS
LAST
CHECK
ENSURES
THAT
OVERSIZED
LIGANDS
ARE
NOT
TTED
INTO
SMALL
CLUSTERS
FLEXIBLE
LIGANDS
INSTEAD
OF
HAVING
A
SERIES
OF
DIFFERENT
LIGAND
COMPOUNDS
THE
SEARCH
LIGANDS
CAN
BE
GENER
ATED
FROM
A
SINGLE
LIGAND
THAT
HAS
ROTATABLE
BONDS
THE
LIGAND
DICTIONARY
PROVIDES
A
DESCRIPTION
OF
THE
GEOMETRY
OF
THE
LIGAND
INCLUDING
TORSIONS
THESE
TORSIONS
ARE
RANDOMLY
SAMPLED
FOR
A
NUMBER
OF
TRIALS
BY
DEFAULT
TO
PROVIDE
COORDINATES
THAT
CAN
BE
CHECKED
AGAINST
THE
POTENTIAL
LIGAND
SITES
AS
DESCRIBED
ABOVE
AN
ENHANCEMENT
WOULD
BE
TO
ALLOW
THE
DETERMINATION
OF
THE
NUMBER
OF
TRIALS
TO
DEPEND
ON
THE
NUMBER
OF
TORSIONS
FINDING
WATER
MOLECULES
THE
ELECTRON
DENSITY
IS
CLUSTERED
AS
DESCRIBED
FOR
LIGANDS
FOR
CLUSTERS
THAT
HAVE
A
Ê
VOLUME
BELOW
A
CERTAIN
UPPER
LIMIT
A
WHICH
STOPS
WATER
MOLECULES
BEING
PLACED
IN
MULTI
ATOM
LIGAND
SITES
A
STARTING
POSITION
IS
DETERMINED
FROM
THE
MEAN
POSITION
OF
THE
GRID
COORDINATES
OF
THE
CLUSTER
THIS
POSITION
IS
THEN
OPTIMIZED
BY
RE
NING
THE
POSITION
TO
THE
LOCAL
MAXIMUM
AS
DETERMINED
BY
CUBIC
INTERPOLATION
OF
THE
MAP
A
MAP
SPHERICITY
TEST
IS
THEN
APPLIED
THE
VARIANCE
OF
THE
CUBIC
INTERPOLATED
ELECTRON
DENSITY
Ê
AT
POINTS
AND
A
FROM
THE
LOCAL
MAXIMUM
IN
POSITIVE
AND
NEGATIVE
OFFSETS
ALONG
THE
X
Y
AND
Z
AXES
ARE
DETERMINED
THE
VARIANCES
ARE
SUMMED
AND
MUST
BE
LOWER
THAN
A
USER
Ê
CHANGEABLE
CUTOFF
DEFAULT
E
A
THE
SUCCESSFUL
POSI
TIONS
ARE
THEN
COMPARED
WITH
THE
COORDINATES
OF
THE
PROTEIN
O
AND
N
ATOMS
IF
THE
DISTANCE
IS
BETWEEN
USER
CHANGEABLE
Ê
CRITERIA
DEFAULT
A
THEN
THE
POSITION
IS
ACCEPTED
AS
A
SOLVENT
O
ATOM
AND
OPTIONALLY
ADDED
TO
THE
PROTEIN
MODEL
ADD
TERMINAL
RESIDUE
GIVEN
THE
SELECTION
OF
A
TERMINAL
RESIDUE
WHICH
ALSO
COULD
MERELY
BE
THE
START
OF
A
GAP
OF
UNPLACED
RESIDUES
TWO
RESIDUE
TYPE
INDEPENDENT
RANDOMLY
SELECTED
PAIRS
ARE
MADE
FROM
CLIPPER
RAMACHANDRAN
DISTRIBUTION
OF
PAIRS
THESE
ANGLES
ARE
USED
TO
GENERATE
POSITIONS
OF
C
C
O
AND
N
MAIN
CHAIN
ATOMS
FOR
THE
NEIGHBOURING
TWO
RESIDUES
USING
THE
PEPTIDE
GEOMETRY
THIS
SET
OF
ATOMS
THEN
UNDERGO
RIGID
BODY
RE
NEMENT
TO
OPTIMIZE
THE
T
TO
THE
MAP
THE
SCORE
OF
THE
T
AND
THE
POSITIONS
OF
THE
ATOMS
ARE
RECORDED
THIS
PROCEDURE
IS
THEN
REPEATED
A
NUMBER
OF
TIMES
BY
DEFAULT
THE
MAIN
CHAIN
ATOMS
OF
THE
NEIGHBOURING
RESIDUE
BEST
T
ATOMS
ARE
THEN
OFFERED
AS
A
POSITION
OF
THE
NEIGHBOURING
RESIDUE
THE
ATOMS
OF
THE
NEXT
NEIGHBOURING
RESIDUE
ARE
DISCARDED
SKELETONIZATION
AND
CA
BUILDING
COOT
USES
A
CLIPPER
MAP
TO
GENERATE
AND
STORE
THE
SKELETON
THIS
APPROACH
IS
CONVENIENT
BECAUSE
LIKE
ELECTRON
DENSITY
MAPS
THE
SKELETON
CAN
BE
DISPLAYED
ON
THE
Y
ANYWHERE
IN
THE
CRYSTAL
I
E
IT
IS
NOT
LIMITED
TO
A
PRECALCULATED
REGION
THE
CLIPPER
SKELETONIZATION
ALGORITHM
IS
SIMILAR
TO
THAT
EMPLOYED
IN
DM
FROM
COWTAN
A
SKELETON
BOND
BONE
IS
DRAWN
BETWEEN
NEIGHBOURING
MAP
GRID
POINTS
IF
BOTH
PARTS
ARE
MARKED
AS
SKELETON
POINTS
THE
SKELETON
CAN
BE
FURTHER
TRIMMED
BY
RECURSIVE
TIP
REMOVAL
A
TIP
BEING
A
GRID
POINT
WITH
ONE
OR
ZERO
NEIGHBOURS
THIS
PROCESS
REMOVES
SIDE
CHAINS
AND
POTENTIALLY
PARTS
OF
THE
TERMINI
BUT
PROVIDES
AN
EASY
MEANS
OF
IDENTIFYING
THE
FOLD
AND
NON
CRYSTALLOGRAPHIC
SYMMETRY
LIKE
SOME
VALIDATION
KLEYWEGT
AND
OTHER
ATTEMPTS
AT
AUTOMATED
MODEL
BUILDING
MORRIS
ET
AL
OLD
ELD
HUBBARD
OLD
ELD
A
LIKELIHOOD
DISTRIBUTION
FOR
THE
PSEUDO
TORSION
ANGLE
C
N
ÐC
N
ÐC
N
Ð
C
N
VERSUS
THE
ANGLE
C
N
ÐC
N
ÐC
N
HAS
BEEN
GENERATED
FROM
HIGH
RESOLUTION
STRUCTURES
IN
THE
PDB
BERMAN
ET
AL
FIG
ONCE
AT
LEAST
THREE
C
ATOMS
HAVE
BEEN
PLACED
THIS
IS
USED
AS
PRIOR
KNOWLEDGE
IN
THE
PLACEMENT
OF
THE
NEXT
C
POSITION
IN
THE
FOLLOWING
MANNER
Ê
SKELETON
POINTS
BETWEEN
AND
A
FROM
THE
CURRENT
C
POSITION
WHICH
HAS
AN
ASSOCIATED
NEARBY
SKELETON
POINT
ARE
SELECTED
THESE
SKELETON
POINTS
ARE
TESTED
FOR
DIRECT
CONNEC
TIVITY
TO
THE
CURRENT
SKELETON
POINT
SKELETON
POINTS
THAT
ARE
EMSLEY
COWTAN
MODEL
BUILDING
TOOLS
FOR
MOLECULAR
GRAPHICS
ACTA
CRYST
C
PSEUDO
TORSION
ANGLE
VERSUS
OPENING
ANGLE
FOR
PROTEINS
IN
THE
PDB
USED
IN
THE
LIKELIHOOD
ASSIGNMENT
OF
POTENTIAL
C
POSITIONS
DIRECTLY
CONNECTED
ARE
ASSIGNED
A
SCORE
OF
THOSE
THAT
ARE
UNCONNECTED
ARE
ASSIGNED
A
SCORE
OF
FOR
EACH
SELECTED
Ê
SKELETON
POINT
A
TEST
POINT
IS
THEN
GENERATED
A
FROM
THE
CURRENT
C
POSITION
IN
THE
DIRECTION
OF
SKELETON
POINT
A
C
PSEUDO
TORSION
ANGLE
AND
ANGLE
PAIR
ARE
GENERATED
FROM
THE
POSITION
OF
THE
TEST
POINT
THE
CURRENT
C
POSITION
AND
THE
TWO
PREVIOUSLY
ASSIGNED
C
POSITIONS
THIS
PSEUDO
TORSION
ANGLE
AND
ANGLE
PAIR
ARE
USED
TO
GENERATE
A
SCORE
BY
LOOKING
UP
THE
VALUE
IN
THE
INTERNAL
REPRESENTATION
OF
FIG
USING
CUBIC
INTERPOLATION
THIS
VALUE
IS
COMBINED
WITH
THE
SKELETON
BASED
SCORE
FOR
THIS
PARTICULAR
TEST
POINT
THIS
PROCEDURE
IS
THEN
REPEATED
IN
A
LOOK
AHEAD
MANNER
ASSUMING
THAT
THE
TEST
POINT
IS
A
MEMBER
OF
THE
SET
OF
FOUR
C
POSITIONS
GENERATING
THE
C
PSEUDO
TORSION
ANGLE
PAIR
THE
MOST
LIKELY
SOLUTION
FOR
THE
LOOK
AHEAD
IS
COMBINED
WITH
THE
SCORE
FOR
THE
CURRENT
TEST
POINT
THE
TEST
POINTS
ARE
THEN
SORTED
BY
COMBINED
SCORE
AND
INTERACTIVELY
OFFERED
AS
POTENTIAL
POSITIONS
FOR
THE
NEXT
C
ATOM
THE
POSITIONS
WITH
THE
BEST
SCORE
BEING
OFFERED
RST
OCCASIONALLY
USUALLY
AS
A
RESULT
OF
A
POSITIONAL
ERROR
IN
THE
Ê
CURRENT
C
POSITION
A
IS
THE
WRONG
DISTANCE
TO
THE
NEXT
CORRECT
C
POSITION
THUS
THE
USER
IS
ALLOWED
TO
CHANGE
THE
Ê
LENGTH
TO
SOMETHING
OTHER
THAN
A
THE
DEPTH
OF
THE
LOOK
AHEAD
IN
THE
CURRENT
IMPLEMENTATION
IS
AT
LEVEL
BUT
COULD
TRIVIALLY
BE
EXTENDED
IN
TESTS
A
LEVEL
LOOK
AHEAD
WAS
BETTER
BUT
TOOK
TOO
LONG
TO
BE
CONSIDERED
PLEASANTLY
INTERACTIVE
THIS
ALGORITHM
HAS
ROOM
FOR
IMPROVEMENT
FOR
EXAMPLE
BY
CONSIDERING
THE
VALUE
OF
THE
DENSITY
AT
THE
TEST
POINT
AND
ALONG
THE
C
PSEUDO
BOND
ONE
THIRD
AND
TWO
THIRDS
OF
THE
WAY
ALONG
THE
BOND
CORRESPONDING
TO
POSITIONS
THAT
ARE
CLOSE
TO
THE
PEPTIDE
C
AND
N
ATOMS
OLD
ELD
C
COORDINATES
ARE
CONVERTED
TO
MAIN
CHAIN
COORDINATES
IN
A
MANNER
SIMILAR
TO
THAT
PREVIOUSLY
DESCRIBED
JONES
THIRUP
ESNOUF
ANGLES
THE
MIDDLE
ATOM
A
MIDDLE
ATOM
IS
SOMEWHAT
MORE
TRICKY
THAN
AN
END
ATOM
BECAUSE
THE
DERIVATIVES
OF
AB
AND
A
B
ARE
NOT
SO
TRIVIAL
LET
US
CHANGE
THE
INDEXING
SO
THAT
WE
ARE
ACTUALLY
TALKING
ABOUT
THE
MIDDLE
ATOM
L
ANGLES
AN
END
ATOM
ATOMS
K
OR
M
THIS
CASE
IS
SIMPLER
BECAUSE
THERE
ARE
NO
CROSS
TERMS
IN
R
XK
AND
Q
XK
ˆ
WHERE
B
IS
A
UNIT
VECTOR
IN
THE
DIRECTION
OF
B
B
B
B
THIS
DE
NITION
OF
THE
TORSION
ANGLE
IS
USED
RATHER
THAN
THE
MORE
COMMON
DE
NITION
WHICH
USES
THREE
CROSS
PRODUCTS
BECAUSE
OUR
VERSION
AND
ITS
DERIVATIVES
ARE
FASTER
TO
CALCULATE
LET
US
SPLIT
THE
EXPRESSION
UP
INTO
TRACTABLE
PORTIONS
THE
EVALUATION
OF
IN
THE
PROGRAM
WILL
COMBINE
THESE
EXPRESSIONS
STARTING
AT
THE
END
THE
MOST
SIMPLE
FROM
THE
PRIMATIVES
WHERE
EIJ
IS
THE
DISTANCE
OF
THE
ITH
PLANE
RESTRAINT
JTH
ATOM
FROM
THE
ITH
PLANE
RESTRAINT
LEAST
SQUARES
PLANE
RECALL
THE
EQUATION
OF
A
PLANE
AX
BY
CZ
D
FIRSTLY
THE
CENTRES
OF
THE
SETS
OF
ATOMS
XCEN
YCEN
ZCEN
ARE
DETERMINED
THE
PLANE
IS
MOVED
SO
THAT
IT
CROSSES
THE
ORIGIN
AND
THEREFORE
D
IT
IS
MOVED
BACK
LATER
THE
PROBLEM
THEN
INVOLVES
THREE
EQUATIONS
THREE
UNKNOWNS
AND
AN
EIGENVALUE
PROBLEM
WITH
THE
SMALLEST
EIGENVALUE
CORRESPONDING
TO
THE
BEST
T
PLANE
THE
LEAST
SQUARES
PLANES
OF
THE
PLANE
RESTRAINTS
ARE
RECAL
CULATED
AT
EVERY
ITERATION
THE
AUTHORS
THANK
GARIB
MURSHUDOV
ELEANOR
J
DODSON
JACK
QUINE
AND
THE
MANY
COOT
TESTERS
KC
IS
SUPPORTED
BY
THE
ROYAL
SOCIETY
GRANT
NO
PE
IS
FUNDED
BY
BBSRC
GRANT
NO
STATISTICS
TEXTBOOKS
IN
THE
SOCIAL
BEHAVIORAL
AND
BIOMED
ICAL
SCIENCES
TYPICALLY
STRESS
THE
IMPORTANCE
OF
POWER
ANALY
SES
BY
DEFINITION
THE
POWER
OF
A
STATISTICAL
TEST
IS
THE
PROB
ABILITY
THAT
ITS
NULL
HYPOTHESIS
WILL
BE
REJECTED
GIVEN
THAT
IT
IS
IN
FACT
FALSE
OBVIOUSLY
SIGNIFICANCE
TESTS
THAT
LACK
STA
TISTICAL
POWER
ARE
OF
LIMITED
USE
BECAUSE
THEY
CANNOT
RELIABLY
DISCRIMINATE
BETWEEN
AND
THE
ALTERNATIVE
HYPOTHESIS
OF
INTEREST
HOWEVER
ALTHOUGH
POWER
ANALYSES
ARE
INDISPENS
ABLE
FOR
RATIONAL
STATISTICAL
DECISIONS
IT
WAS
NOT
UNTIL
THE
LATE
THAT
POWER
CHARTS
SEE
E
G
SCHEFFÉ
AND
POWER
TABLES
SEE
E
G
COHEN
WERE
SUPPLEMENTED
BY
MORE
EFFICIENT
PRECISE
AND
EASY
TO
USE
POWER
ANALYSIS
PROGRAMS
FOR
PERSONAL
COMPUTERS
GOLDSTEIN
G
POWER
ERD
FELDER
FAUL
BUCHNER
CAN
BE
SEEN
AS
A
SECOND
GENERATION
POWER
ANALYSIS
PROGRAM
DESIGNED
AS
A
STAND
ALONE
APPLICATION
TO
HANDLE
SEVERAL
TYPES
OF
STATISTICAL
TESTS
COMMONLY
USED
IN
SOCIAL
AND
BEHAVIORAL
RESEARCH
IN
THE
PAST
YEARS
THIS
PROGRAM
HAS
BEEN
FOUND
USEFUL
NOT
ONLY
IN
THE
SOCIAL
AND
BEHAVIORAL
SCIENCES
BUT
ALSO
IN
MANY
OTHER
DISCI
PLINES
THAT
ROUTINELY
APPLY
STATISTICAL
TESTS
INCLUDING
BIOLOGY
BAEZA
STOTZ
GENETICS
AKKAD
ET
AL
ECOL
OGY
SHEPPARD
FOREST
AND
WILDLIFE
RESEARCH
MELLINA
HINCH
DONALDSON
PEARSON
THE
GEOSCIENCES
BUS
BEY
PHARMACOLOGY
QUEDNOW
ET
AL
AND
MED
ICAL
RESEARCH
GLEISSNER
CLUSMANN
SASSEN
ELGER
HELM
STAEDTER
G
POWER
WAS
EVALUATED
POSITIVELY
IN
THE
REVIEWS
OF
WHICH
WE
ARE
AWARE
KORNBROT
ORTSEIFEN
BRUCKNER
BURKE
KIESER
THOMAS
KREBS
IT
HAS
BEEN
USED
IN
SEVERAL
POWER
TUTORIALS
E
G
BUCHNER
ERDFELDER
FAUL
ERDFELDER
BUCHNER
FAUL
BRANDT
LEVIN
SHEPPARD
AND
IN
STATIS
TICS
TEXTBOOKS
E
G
FIELD
KEPPEL
WICKENS
MYERS
WELL
RASCH
FRIESE
HOFMANN
NAUMANN
NEVERTHELESS
THE
USER
FEEDBACK
THAT
WE
RE
CEIVED
COINCIDED
WITH
OUR
OWN
EXPERIENCE
IN
SHOWING
SOME
LIMITATIONS
AND
WEAKNESSES
OF
G
POWER
THAT
REQUIRED
A
MAJOR
EXTENSION
AND
REVISION
IN
THE
PRESENT
ARTICLE
WE
DESCRIBE
G
POWER
A
PROGRAM
THAT
WAS
DESIGNED
TO
ADDRESS
THE
PROBLEMS
OF
G
POWER
WE
BEGIN
WITH
AN
OUTLINE
OF
THE
MAJOR
IMPROVEMENTS
IN
G
POWER
AND
THEN
DISCUSS
THE
TYPES
OF
POWER
ANALYSES
COV
ERED
BY
THIS
PROGRAM
NEXT
WE
DESCRIBE
PROGRAM
HANDLING
AND
THE
TYPES
OF
STATISTICAL
TESTS
TO
WHICH
IT
CAN
BE
APPLIED
WE
THEN
DISCUSS
THE
STATISTICAL
ALGORITHMS
OF
G
POWER
AND
THEIR
ACCURACY
FINALLY
PROGRAM
AVAILABILITY
AND
SOME
INTER
NET
RESOURCES
SUPPORTING
USERS
OF
G
POWER
ARE
DESCRIBED
IMPROVEMENTS
IN
G
POWER
IN
COMPARISON
WITH
G
POWER
G
POWER
IS
AN
IMPROVEMENT
OVER
G
POWER
IN
FIVE
MAJOR
RESPECTS
FIRST
WHEREAS
G
POWER
REQUIRES
THE
E
ERDFELDER
ERDFELDER
PSYCHOLOGIE
UNI
MANNHEIM
DE
COPYRIGHT
PSYCHONOMIC
SOCIETY
INC
FAUL
ERDFELDER
LANG
AND
BUCHNER
DOS
AND
MAC
OS
OPERATING
SYSTEMS
THAT
WERE
COM
MON
IN
THE
BUT
ARE
NOW
OUTDATED
G
POWER
RUNS
ON
THE
PERSONAL
COMPUTER
PLATFORMS
CURRENTLY
IN
WIDEST
USE
WINDOWS
XP
WINDOWS
VISTA
AND
MAC
OS
X
THE
WINDOWS
AND
MAC
VERSIONS
OF
THE
PROGRAM
ARE
ES
SENTIALLY
EQUIVALENT
THEY
USE
THE
SAME
COMPUTATIONAL
ROUTINES
AND
SHARE
VERY
SIMILAR
USER
INTERFACES
FOR
THIS
REASON
WE
WILL
NOT
DIFFERENTIATE
BETWEEN
THESE
VERSIONS
IN
WHAT
FOLLOWS
USERS
SIMPLY
HAVE
TO
MAKE
SURE
TO
DOWNLOAD
THE
VERSION
APPROPRIATE
FOR
THEIR
OPERATING
SYSTEM
SECOND
WHEREAS
G
POWER
IS
LIMITED
TO
THREE
TYPES
OF
POWER
ANALYSES
G
POWER
SUPPORTS
FIVE
DIFFERENT
WAYS
TO
ASSESS
STATISTICAL
POWER
IN
ADDITION
TO
THE
A
PRI
ORI
POST
HOC
AND
COMPROMISE
POWER
ANALYSES
THAT
WERE
ALREADY
COVERED
BY
G
POWER
THE
NEW
PROGRAM
OFFERS
SENSITIVITY
ANALYSES
AND
CRITERION
ANALYSES
THIRD
G
POWER
PROVIDES
DEDICATED
POWER
ANALYSIS
OPTIONS
FOR
A
VARIETY
OF
FREQUENTLY
USED
T
F
Z
AND
EXACT
TESTS
IN
ADDITION
TO
THE
STANDARD
TESTS
COVERED
BY
G
POWER
THE
TESTS
CAPTURED
BY
G
POWER
AND
THEIR
EFFECT
SIZE
PARAMETERS
ARE
DESCRIBED
IN
THE
PROGRAM
HAN
DLING
SECTION
IMPORTANTLY
USERS
ARE
NOT
LIMITED
TO
THESE
TESTS
BECAUSE
G
POWER
ALSO
OFFERS
POWER
ANALYSES
FOR
GENERIC
T
F
Z
AND
BINOMIAL
TESTS
FOR
WHICH
THE
NON
CENTRALITY
PARAMETER
OF
THE
DISTRIBUTION
UNDER
MAY
BE
ENTERED
DIRECTLY
IN
THIS
WAY
USERS
ARE
PROVIDED
WITH
A
FLEXIBLE
TOOL
FOR
COMPUTING
THE
POWER
OF
BASICALLY
ANY
STATISTICAL
TEST
THAT
USES
T
F
Z
OR
BINOMIAL
REFERENCE
DISTRIBUTIONS
FOURTH
STATISTICAL
TESTS
CAN
BE
SPECIFIED
IN
G
POWER
USING
TWO
DIFFERENT
APPROACHES
THE
DISTRIBUTION
BASED
AP
PROACH
AND
THE
DESIGN
BASED
APPROACH
IN
THE
DISTRIBUTION
BASED
APPROACH
USERS
SELECT
THE
FAMILY
OF
THE
TEST
STATISTIC
T
F
Z
OR
EXACT
TEST
AND
THE
PARTICULAR
TEST
WITHIN
THAT
FAMILY
THIS
IS
HOW
POWER
ANALYSES
WERE
SPECIFIED
IN
G
POWER
IN
ADDITION
A
SEPARATE
MENU
IN
G
POWER
PROVIDES
ACCESS
TO
POWER
ANALYSES
VIA
THE
DESIGN
BASED
APPROACH
USERS
SELECT
THE
PARAMETER
CLASS
TO
WHICH
THE
STATISTICAL
TEST
REFERS
CORRELATIONS
MEANS
PROPORTIONS
REGRESSION
COEFFICIENTS
VARIANCES
AND
THE
DESIGN
OF
THE
STUDY
E
G
NUMBER
OF
GROUPS
INDEPENDENT
VS
DEPEN
DENT
SAMPLES
ON
THE
BASIS
OF
THE
FEEDBACK
WE
RECEIVED
ABOUT
G
POWER
WE
EXPECT
THAT
SOME
USERS
MIGHT
FIND
THE
DESIGN
BASED
INPUT
MODE
MORE
INTUITIVE
AND
EASIER
TO
USE
FIFTH
G
POWER
SUPPORTS
USERS
WITH
ENHANCED
GRAPH
ICS
FEATURES
THE
DETAILS
OF
THESE
FEATURES
WILL
BE
OUTLINED
IN
THE
PROGRAM
HANDLING
SECTION
TYPES
OF
STATISTICAL
POWER
ANALYSES
THE
POWER
OF
A
STATISTICAL
TEST
IS
THE
COMPLEMENT
OF
WHICH
DENOTES
THE
TYPE
II
OR
BETA
ERROR
PROBABILITY
OF
FALSELY
RETAINING
AN
INCORRECT
STATISTICAL
POWER
DE
PENDS
ON
THREE
CLASSES
OF
PARAMETERS
THE
SIGNIFICANCE
LEVEL
I
E
THE
TYPE
I
ERROR
PROBABILITY
OF
THE
TEST
THE
SIZE
OF
THE
SAMPLE
USED
FOR
THE
TEST
AND
AN
EFFECT
SIZE
PARAMETER
DEFINING
AND
THUS
INDEXING
THE
DEGREE
OF
DEVIATION
FROM
IN
THE
UNDERLYING
POPULATION
DE
PENDING
ON
THE
AVAILABLE
RESOURCES
THE
ACTUAL
PHASE
OF
THE
RESEARCH
PROCESS
AND
THE
SPECIFIC
RESEARCH
QUESTION
FIVE
DIFFERENT
TYPES
OF
POWER
ANALYSIS
CAN
BE
REASONABLE
CF
ERDFELDER
ET
AL
ERDFELDER
FAUL
BUCHNER
WE
DESCRIBE
THESE
METHODS
AND
THEIR
USES
IN
TURN
A
PRIORI
POWER
ANALYSES
IN
A
PRIORI
POWER
ANALYSES
COHEN
SAMPLE
SIZE
N
IS
COMPUTED
AS
A
FUNCTION
OF
THE
REQUIRED
POWER
LEVEL
THE
PRESPECIFIED
SIGNIFICANCE
LEVEL
AND
THE
POPULATION
EFFECT
SIZE
TO
BE
DETECTED
WITH
PROBABILITY
A
PRIORI
ANALYSES
PROVIDE
AN
EFFICIENT
METHOD
OF
CONTROLLING
STATISTICAL
POWER
BEFORE
A
STUDY
IS
ACTUALLY
CON
DUCTED
SEE
E
G
BREDENKAMP
HAGER
AND
CAN
BE
RECOMMENDED
WHENEVER
RESOURCES
SUCH
AS
THE
TIME
AND
MONEY
REQUIRED
FOR
DATA
COLLECTION
ARE
NOT
CRITICAL
POST
HOC
POWER
ANALYSES
IN
CONTRAST
TO
A
PRIORI
POWER
ANALYSES
POST
HOC
POWER
ANALYSES
COHEN
OFTEN
MAKE
SENSE
AFTER
A
STUDY
HAS
ALREADY
BEEN
CONDUCTED
IN
POST
HOC
ANALYSES
IS
COMPUTED
AS
A
FUNCTION
OF
THE
POPULATION
EFFECT
SIZE
PARAMETER
AND
THE
SAMPLE
SIZE
USED
IN
A
STUDY
IT
THUS
BECOMES
POSSIBLE
TO
ASSESS
WHETHER
OR
NOT
A
PUBLISHED
STATISTICAL
TEST
IN
FACT
HAD
A
FAIR
CHANCE
OF
REJECTING
AN
IN
CORRECT
IMPORTANTLY
POST
HOC
ANALYSES
LIKE
A
PRIORI
ANALYSES
REQUIRE
AN
EFFECT
SIZE
SPECIFICATION
FOR
THE
UNDERLYING
POPULATION
POST
HOC
POWER
ANALYSES
SHOULD
NOT
BE
CONFUSED
WITH
SO
CALLED
RETROSPECTIVE
POWER
ANAL
YSES
IN
WHICH
THE
EFFECT
SIZE
IS
ESTIMATED
FROM
SAMPLE
DATA
AND
USED
TO
CALCULATE
THE
OBSERVED
POWER
A
SAMPLE
ESTIMATE
OF
THE
TRUE
POWER
RETROSPECTIVE
POWER
ANALY
SES
ARE
BASED
ON
THE
HIGHLY
QUESTIONABLE
ASSUMPTION
THAT
THE
SAMPLE
EFFECT
SIZE
IS
ESSENTIALLY
IDENTICAL
TO
THE
EFFECT
SIZE
IN
THE
POPULATION
FROM
WHICH
IT
WAS
DRAWN
ZUMBO
HUBLEY
OBVIOUSLY
THIS
ASSUMPTION
IS
LIKELY
TO
BE
FALSE
AND
THE
MORE
SO
THE
SMALLER
THE
SAMPLE
IN
ADDITION
SAMPLE
EFFECT
SIZES
ARE
TYPICALLY
BIASED
ESTIMATES
OF
THEIR
POPULATION
COUNTERPARTS
RICHARDSON
FOR
THESE
REASONS
WE
AGREE
WITH
OTHER
CRITICS
OF
RETROSPECTIVE
POWER
ANALYSES
E
G
GERARD
SMITH
WEERAKKODY
HOE
NIG
HEISEY
KROMREY
HOGARTY
LENTH
STEIDL
HAYES
SCHAUBER
RATHER
THAN
USE
RETROSPECTIVE
POWER
ANALYSES
RESEARCHERS
SHOULD
SPECIFY
POPULATION
EFFECT
SIZES
ON
A
PRIORI
GROUNDS
TO
SPECIFY
THE
EFFECT
SIZE
SIMPLY
MEANS
TO
DEFINE
THE
MINIMUM
DEGREE
OF
VIOLATION
OF
A
RESEARCHER
WOULD
LIKE
TO
DETECT
WITH
A
PROBABILITY
NOT
LESS
THAN
COHEN
DEFINITIONS
OF
SMALL
MEDIUM
AND
LARGE
EFFECTS
CAN
BE
HELPFUL
IN
SUCH
EFFECT
SIZE
SPECIFICATIONS
SEE
E
G
SMITH
BAYEN
HOWEVER
RESEARCHERS
SHOULD
BE
AWARE
OF
THE
FACT
THAT
THESE
CONVENTIONS
MAY
HAVE
DIFFERENT
MEANINGS
FOR
DIFFER
ENT
TESTS
CF
ERDFELDER
ET
AL
COMPROMISE
POWER
ANALYSES
IN
COMPROMISE
POWER
ANALYSES
ERDFELDER
ERDFELDER
ET
AL
MÜLLER
MANZ
HOYER
BOTH
AND
ARE
COMPUTED
AS
FUNCTIONS
OF
THE
EF
FECT
SIZE
N
AND
THE
ERROR
PROBABILITY
RATIO
Q
TO
ILLUSTRATE
SETTING
Q
TO
WOULD
MEAN
THAT
THE
RESEARCHER
PREFERS
BALANCED
TYPE
I
AND
TYPE
II
ERROR
RISKS
G
POWER
WHEREAS
A
Q
OF
WOULD
IMPLY
THAT
CF
COHEN
COMPROMISE
POWER
ANALYSES
CAN
BE
USEFUL
BOTH
BEFORE
AND
AFTER
DATA
COLLECTION
FOR
EXAMPLE
AN
A
PRIORI
POWER
ANALYSIS
MIGHT
RESULT
IN
A
SAMPLE
SIZE
THAT
EXCEEDS
THE
AVAILABLE
RESOURCES
IN
SUCH
A
SITUATION
A
RESEARCHER
COULD
SPECIFY
THE
MAXIMUM
AFFORDABLE
SAMPLE
SIZE
AND
USING
A
COMPROMISE
POWER
ANALYSIS
COMPUTE
AND
ASSOCIATED
WITH
SAY
Q
ALTERNATIVELY
IF
A
STUDY
HAS
ALREADY
BEEN
CONDUCTED
BUT
HAS
NOT
YET
BEEN
ANALYZED
A
RESEARCHER
COULD
ASK
FOR
A
REASONABLE
DECISION
CRITERION
THAT
GUARANTEES
PERFECTLY
BALANCED
ERROR
RISKS
I
E
GIVEN
THE
SIZE
OF
THE
SAMPLE
AND
THE
CRITICAL
EFFECT
SIZE
IN
WHICH
HE
OR
SHE
IS
INTERESTED
OF
COURSE
COMPROMISE
POWER
ANALYSES
CAN
EASILY
RESULT
IN
UNCONVENTIONAL
SIG
NIFICANCE
LEVELS
GREATER
THAN
IN
THE
CASE
OF
SMALL
SAMPLES
OR
EFFECT
SIZES
OR
LESS
THAN
IN
THE
CASE
OF
LARGE
SAMPLES
OR
EFFECT
SIZES
HOWEVER
WE
BELIEVE
THAT
THE
BENEFIT
OF
BALANCED
TYPE
I
AND
TYPE
II
ERROR
RISKS
OFTEN
OFFSETS
THE
COSTS
OF
VIOLATING
SIGNIFICANCE
LEVEL
CONVEN
TIONS
CF
GIGERENZER
KRAUSS
VITOUCH
SENSITIVITY
ANALYSES
IN
SENSITIVITY
ANALYSES
THE
CRITICAL
POPULATION
EFFECT
SIZE
IS
COMPUTED
AS
A
FUNCTION
OF
AND
N
SENSITIVITY
ANALYSES
MAY
BE
PARTICULARLY
USEFUL
FOR
EVALUATING
PUB
LISHED
RESEARCH
THEY
PROVIDE
ANSWERS
TO
QUESTIONS
SUCH
AS
WHAT
EFFECT
SIZE
WAS
A
STUDY
ABLE
TO
DETECT
WITH
A
POWER
OF
GIVEN
ITS
SAMPLE
SIZE
AND
AS
SPECIFIED
BY
THE
AUTHOR
IN
OTHER
WORDS
WHAT
IS
THE
MINIMUM
EF
FECT
SIZE
TO
WHICH
THE
TEST
WAS
SUFFICIENTLY
SENSITIVE
IN
ADDITION
IT
MAY
BE
USEFUL
TO
PERFORM
SENSITIVITY
ANALYSES
BEFORE
CONDUCTING
A
STUDY
TO
SEE
WHETHER
GIVEN
A
LIM
ITED
N
THE
SIZE
OF
THE
EFFECT
THAT
CAN
BE
DETECTED
IS
AT
ALL
REALISTIC
OR
FOR
INSTANCE
MUCH
TOO
LARGE
TO
BE
EXPECTED
REALISTICALLY
CRITERION
ANALYSES
FINALLY
CRITERION
ANALYSES
COMPUTE
AND
THE
ASSOCI
ATED
DECISION
CRITERION
AS
A
FUNCTION
OF
THE
EFFECT
SIZE
AND
A
GIVEN
SAMPLE
SIZE
CRITERION
ANALYSES
ARE
ALTER
NATIVES
TO
POST
HOC
POWER
ANALYSES
THEY
MAY
BE
REASON
ABLE
WHENEVER
THE
CONTROL
OF
IS
LESS
IMPORTANT
THAN
THE
CONTROL
OF
IN
CASE
OF
GOODNESS
OF
FIT
TESTS
FOR
STATISTICAL
MODELS
FOR
EXAMPLE
IT
IS
MOST
IMPORTANT
TO
MINIMIZE
THE
RISK
OF
WRONG
DECISIONS
IN
FAVOR
OF
THE
MODEL
RE
SEARCHERS
COULD
THUS
USE
CRITERION
ANALYSES
TO
COMPUTE
THE
SIGNIFICANCE
LEVEL
WHICH
IS
COMPATIBLE
WITH
FOR
A
SMALL
EFFECT
SIZE
WHEREAS
G
POWER
WAS
LIMITED
TO
THE
FIRST
THREE
TYPES
OF
POWER
ANALYSIS
G
POWER
COVERS
ALL
FIVE
TYPES
ON
THE
BASIS
OF
THE
FEEDBACK
WE
RECEIVED
FROM
G
POWER
USERS
WE
BELIEVE
THAT
ANY
QUESTION
RELATED
TO
STATISTICAL
POWER
THAT
ARISES
IN
RESEARCH
PRACTICE
CAN
BE
CATEGORIZED
UNDER
ONE
OF
THESE
ANALYSIS
TYPES
PROGRAM
HANDLING
USING
G
POWER
TYPICALLY
INVOLVES
THE
FOLLOWING
FOUR
STEPS
SELECT
THE
STATISTICAL
TEST
APPROPRIATE
FOR
THE
PROBLEM
CHOOSE
ONE
OF
THE
FIVE
TYPES
OF
POWER
ANALYSES
DEFINED
IN
THE
PREVIOUS
SECTION
PROVIDE
THE
INPUT
PARAMETERS
REQUIRED
FOR
THE
ANALYSIS
AND
CLICK
ON
CALCULATE
TO
OBTAIN
THE
RESULTS
IN
THE
FIRST
STEP
THE
STATISTICAL
TEST
IS
CHOSEN
USING
THE
DISTRIBUTION
BASED
OR
THE
DESIGN
BASED
APPROACH
G
POWER
USERS
PROBABLY
HAVE
ADAPTED
TO
THE
DISTRIBUTION
BASED
APPROACH
ONE
FIRST
SELECTS
THE
FAMILY
OF
THE
TEST
STATISTIC
T
F
Z
OR
EXACT
TEST
USING
THE
TEST
FAM
ILY
MENU
IN
THE
MAIN
WINDOW
THE
STATISTICAL
TEST
MENU
ADAPTS
ACCORDINGLY
SHOWING
A
LIST
OF
ALL
TESTS
AVAILABLE
FOR
THE
TEST
FAMILY
FOR
THE
TWO
GROUPS
T
TEST
FOR
EXAMPLE
ONE
WOULD
FIRST
SELECT
THE
T
FAMILY
OF
DISTRIBUTIONS
AND
THEN
MEANS
DIFFERENCE
BETWEEN
TWO
INDEPENDENT
MEANS
TWO
GROUPS
IN
THE
STATISTICAL
TEST
MENU
SEE
FIGURE
AL
TERNATIVELY
ONE
MIGHT
USE
THE
DESIGN
BASED
APPROACH
OF
TEST
SELECTION
WITH
THE
TESTS
PULL
DOWN
MENU
IN
THE
TOP
ROW
IT
IS
POSSIBLE
TO
SELECT
THE
PARAMETER
CLASS
TO
WHICH
THE
STATISTICAL
TEST
REFERS
I
E
CORRELATION
AND
REGRESSION
MEANS
PROPORTIONS
VARIANCES
OR
GENERIC
AND
THE
DE
SIGN
OF
THE
STUDY
E
G
NUMBER
OF
GROUPS
INDEPENDENT
VS
DEPENDENT
SAMPLES
FOR
EXAMPLE
A
RESEARCHER
WOULD
SELECT
MEANS
FOLLOWED
BY
TWO
INDEPENDENT
GROUPS
TO
SPECIFY
THE
TWO
GROUPS
T
TEST
SEE
FIGURE
THE
DESIGN
BASED
APPROACH
HAS
THE
ADVANTAGE
THAT
TEST
OPTIONS
REFER
RING
TO
THE
SAME
PARAMETER
CLASS
E
G
MEANS
ARE
LOCATED
IN
CLOSE
PROXIMITY
WHEREAS
IN
THE
DISTRIBUTION
BASED
AP
PROACH
THEY
MAY
BE
SCATTERED
ACROSS
DIFFERENT
DISTRIBUTION
FAMILIES
IN
THE
SECOND
STEP
THE
TYPE
OF
POWER
ANALYSIS
MENU
IN
THE
CENTER
OF
THE
MAIN
WINDOW
SHOULD
BE
USED
TO
CHOOSE
THE
APPROPRIATE
ANALYSIS
TYPE
IN
THE
THIRD
STEP
THE
POWER
ANALYSIS
INPUT
PARAMETERS
ARE
SPECIFIED
IN
THE
LOWER
LEFT
OF
THE
MAIN
WINDOW
TO
ILLUSTRATE
AN
A
PRIORI
POWER
ANALYSIS
FOR
A
TWO
GROUPS
T
TEST
WOULD
REQUIRE
A
DECISION
BETWEEN
A
ONE
TAILED
AND
A
TWO
TAILED
TEST
A
SPECIFICATION
OF
COHEN
EFFECT
SIZE
MEASURE
D
UNDER
THE
SIGNIFICANCE
LEVEL
THE
REQUIRED
POWER
OF
THE
TEST
AND
THE
PREFERRED
GROUP
SIZE
ALLOCATION
RATIO
THE
FINAL
STEP
CONSISTS
OF
CLICKING
ON
CALCULATE
TO
OBTAIN
THE
OUTPUT
IN
THE
LOWER
RIGHT
OF
THE
MAIN
WINDOW
FOR
INSTANCE
INPUT
PARAMETERS
SPECIFYING
A
ONE
TAILED
T
TEST
A
MEDIUM
EFFECT
SIZE
OF
D
AND
AN
ALLOCATION
RATIO
OF
WOULD
RESULT
IN
A
TOTAL
SAMPLE
SIZE
OF
N
OBSERVATION
UNITS
IN
EACH
GROUP
SEE
FIGURES
AND
THE
NONCENTRALITY
PA
RAMETER
Y
DEFINING
THE
T
DISTRIBUTION
UNDER
THE
DECISION
CRITERION
TO
BE
USED
I
E
THE
CRITICAL
VALUE
OF
THE
T
STATIS
TIC
THE
DEGREES
OF
OF
THE
T
TEST
AND
THE
ACTUAL
POWER
VALUE
ARE
ALSO
DISPLAYED
NOTE
THAT
THE
ACTUAL
POWER
WILL
OFTEN
BE
SLIGHTLY
LARGER
THAN
THE
PRESPECIFIED
POWER
IN
A
PRIORI
POWER
ANALYSES
THE
REASON
IS
THAT
NONINTEGER
SAMPLE
SIZES
ARE
ALWAYS
ROUNDED
UP
BY
G
POWER
TO
OBTAIN
INTEGER
VALUES
CONSISTENT
WITH
A
POWER
LEVEL
NOT
LOWER
THAN
THE
PRESPECIFIED
ONE
IN
ADDITION
TO
THE
NUMERICAL
OUTPUT
G
POWER
DIS
PLAYS
THE
CENTRAL
AND
THE
NONCENTRAL
TEST
STATISTIC
DISTRIBUTIONS
ALONG
WITH
THE
DECISION
CRITERION
AND
THE
AS
SOCIATED
ERROR
PROBABILITIES
IN
THE
UPPER
PART
OF
THE
MAIN
WINDOW
SEE
FIGURE
THIS
SUPPORTS
UNDERSTANDING
OF
THE
EFFECTS
OF
THE
INPUT
PARAMETERS
AND
IS
LIKELY
TO
BE
A
FAUL
ERDFELDER
LANG
AND
BUCHNER
FIGURE
THE
DISTRIBUTION
BASED
APPROACH
OF
TEST
SPECIFICATION
IN
G
POWER
USEFUL
VISUALIZATION
TOOL
IN
THE
TEACHING
OF
OR
THE
LEARNING
ABOUT
INFERENTIAL
STATISTICS
THE
DISTRIBUTIONS
PLOT
CAN
BE
PRINTED
SAVED
OR
COPIED
BY
CLICKING
ON
THE
RIGHT
MOUSE
BUTTON
INSIDE
THE
PLOT
AREA
THE
INPUT
AND
OUTPUT
OF
EACH
POWER
CALCULATION
IN
A
G
POWER
SESSION
IS
AUTOMATICALLY
WRITTEN
TO
A
PROTOCOL
THAT
CAN
BE
DISPLAYED
BY
SELECTING
THE
PROTOCOL
OF
POWER
ANALYSES
TAB
IN
THE
MAIN
WINDOW
IT
IS
POSSIBLE
TO
CLEAR
THE
PROTOCOL
OR
TO
PRINT
SAVE
AND
COPY
THE
PROTOCOL
IN
THE
SAME
WAY
AS
THE
DISTRIBUTIONS
PLOT
BECAUSE
COHEN
BOOK
ON
POWER
ANALYSIS
APPEARS
TO
BE
WELL
KNOWN
IN
THE
SOCIAL
AND
BEHAVIORAL
SCIENCES
WE
MADE
USE
OF
HIS
EFFECT
SIZE
MEASURES
WHENEVER
POSSIBLE
RESEARCHERS
UNFAMILIAR
WITH
THESE
MEASURES
AND
USERS
WHO
PREFER
TO
COMPUTE
COHEN
MEASURES
FROM
MORE
BASIC
PARAMETERS
CAN
CLICK
ON
THE
DETERMINE
BUTTON
TO
THE
LEFT
OF
THE
EFFECT
SIZE
INPUT
FIELD
SEE
FIGURES
AND
A
DRAWER
WILL
OPEN
NEXT
TO
THE
MAIN
WINDOW
AND
PROVIDE
ACCESS
TO
AN
EFFECT
SIZE
CALCULATOR
TAILORED
TO
THE
SELECTED
TEST
SEE
FIGURE
FOR
THE
TWO
GROUPS
T
TEST
FOR
EXAMPLE
USERS
CAN
SPECIFY
THE
MEANS
AND
THE
COMMON
SD
À
IN
THE
POPULATIONS
UNDERLYING
THE
GROUPS
TO
CALCULATE
COHEN
D
À
CLICKING
ON
THE
CALCULATE
AND
TRANSFER
TO
MAIN
WINDOW
BUTTON
COPIES
THE
COMPUTED
EF
FECT
SIZE
TO
THE
APPROPRIATE
FIELD
IN
THE
MAIN
WINDOW
ANOTHER
USEFUL
OPTION
IS
THE
POWER
PLOT
WINDOW
SEE
FIGURE
WHICH
IS
OPENED
BY
CLICKING
ON
X
Y
PLOT
FOR
A
RANGE
OF
VALUES
ON
THE
LOWER
RIGHT
SIDE
OF
THE
MAIN
WIN
DOW
SEE
FIGURES
AND
BY
SELECTING
THE
APPROPRIATE
PARAMETERS
FOR
THE
Y
AND
X
AXES
ONE
PARAMETER
EFFECT
SIZE
OR
SAMPLE
SIZE
CAN
BE
PLOTTED
AS
A
FUNCTION
OF
ANY
OTHER
PARAMETER
OF
THE
REMAINING
TWO
PARAMETERS
ONE
CAN
BE
CHOSEN
TO
DRAW
A
FAM
ILY
OF
GRAPHS
WHEREAS
THE
FOURTH
PARAMETER
IS
KEPT
CONSTANT
FOR
INSTANCE
SAMPLE
SIZE
CAN
BE
DRAWN
AS
A
FUNCTION
OF
THE
POWER
FOR
SEVERAL
DIFFERENT
POPULATION
EFFECTS
SIZES
WHILE
IS
KEPT
AT
A
PARTICULAR
VALUE
THE
PLOT
MAY
BE
PRINTED
SAVED
OR
COPIED
BY
CLICKING
ON
THE
RIGHT
MOUSE
BUTTON
INSIDE
THE
PLOT
AREA
SELECTING
THE
TABLE
TAB
REVEALS
THE
DATA
UN
DERLYING
THE
PLOT
THEY
MAY
BE
COPIED
TO
OTHER
APPLICATIONS
THE
POWER
PLOT
WINDOW
INHERITS
ALL
INPUT
PARAMETERS
OF
THE
ANALYSIS
THAT
IS
ACTIVE
WHEN
THE
X
Y
PLOT
FOR
A
RANGE
OF
G
POWER
FIGURE
THE
DESIGN
BASED
APPROACH
OF
TEST
SPECIFICATION
IN
G
POWER
AND
THE
EFFECT
SIZE
DRAWER
FIGURE
THE
POWER
PLOT
WINDOW
OF
G
POWER
FAUL
ERDFELDER
LANG
AND
BUCHNER
VALUES
BUTTON
IS
CLICKED
ONLY
SOME
OF
THESE
PARAMETERS
CAN
BE
DIRECTLY
MANIPULATED
IN
THE
POWER
PLOT
WINDOW
FOR
INSTANCE
SWITCHING
FROM
A
PLOT
OF
A
TWO
TAILED
TEST
TO
A
PLOT
OF
A
ONE
TAILED
TEST
REQUIRES
CHOOSING
THE
TAIL
ONE
OPTION
IN
THE
MAIN
WINDOW
AND
THEN
CLICKING
ON
THE
X
Y
PLOT
FOR
A
RANGE
OF
VALUES
BUTTON
TYPES
OF
STATISTICAL
TESTS
G
POWER
PROVIDES
POWER
ANALYSES
FOR
TEST
STATISTICS
FOLLOWING
T
F
OR
STANDARD
NORMAL
DISTRIBUTIONS
UNDER
EITHER
EXACT
OR
ASYMPTOTIC
AND
NONCENTRAL
DISTRIBUTIONS
OF
THE
SAME
TEST
FAMILIES
UNDER
IN
ADDITION
IT
INCLUDES
POWER
ANALYSES
FOR
SOME
EXACT
TESTS
IN
TABLES
WE
BRIEFLY
DESCRIBE
THE
TESTS
CURRENTLY
COVERED
BY
G
POWER
TABLE
LISTS
THE
SYMBOLS
USED
IN
TABLES
AND
THEIR
MEANINGS
TESTS
FOR
CORRELATION
AND
REGRESSION
TABLE
SUMMARIZES
THE
PROCEDURES
SUPPORTED
FOR
TEST
ING
HYPOTHESES
ON
CORRELATION
AND
REGRESSION
ONE
SAMPLE
TESTS
ARE
PROVIDED
FOR
THE
POINT
BISERIAL
MODEL
THAT
IS
THE
MODEL
FOR
CORRELATIONS
BETWEEN
A
BINARY
VARIABLE
AND
A
CONTINUOUS
VARIABLE
AND
FOR
CORRELATIONS
BETWEEN
TWO
NORMALLY
DISTRIBUTED
VARIABLES
COHEN
CHAP
THE
LATTER
TEST
USES
THE
EXACT
SAMPLE
CORRELATION
COEFFICIENT
DISTRIBUTION
BARABESI
GRECO
OR
OPTIONALLY
A
LARGE
SAMPLE
APPROXIMATION
BASED
ON
FISHER
R
TO
Z
TRANS
FORMATION
THE
TWO
SAMPLE
TEST
FOR
DIFFERENCES
BETWEEN
TWO
CORRELATIONS
USES
COHEN
CHAP
EFFECT
SIZE
Q
AND
IS
BASED
ON
FISHER
R
TO
Z
TRANSFORMATION
COHEN
DE
FINES
QS
OF
AND
AS
SMALL
MEDIUM
AND
LARGE
EFFECTS
RESPECTIVELY
THE
TWO
PROCEDURES
AVAILABLE
FOR
THE
MULTIPLE
REGRES
SION
MODEL
HANDLE
THE
CASES
OF
A
TEST
OF
AN
OVERALL
EFFECT
THAT
IS
THE
HYPOTHESIS
THAT
THE
POPULATION
VALUE
OF
IS
DIFFERENT
FROM
ZERO
AND
A
TEST
OF
THE
HYPOTH
ESIS
THAT
ADDING
MORE
PREDICTORS
INCREASES
THE
VALUE
OF
COHEN
CHAP
ACCORDING
TO
COHEN
CRITERIA
EFFECT
SIZES
F
OF
AND
ARE
CONSIDERED
SMALL
MEDIUM
AND
LARGE
RESPECTIVELY
TESTS
FOR
MEANS
UNIVARIATE
CASE
TABLE
SUMMARIZES
THE
POWER
ANALYSIS
PROCEDURES
FOR
TESTS
ON
MEANS
G
POWER
SUPPORTS
ALL
CASES
OF
THE
T
TEST
FOR
MEANS
DESCRIBED
BY
COHEN
CHAP
THE
TEST
FOR
INDEPENDENT
MEANS
THE
TEST
OF
THE
NULL
HYPOTHESIS
THAT
THE
POPULATION
MEAN
EQUALS
SOME
SPECIFIED
VALUE
ONE
SAMPLE
CASE
AND
THE
TEST
ON
THE
MEANS
OF
TWO
DEPENDENT
SAMPLES
MATCHED
PAIRS
COHEN
D
AND
DZ
ARE
USED
AS
EFFECT
SIZE
INDICES
COHEN
DEFINES
DS
OF
AND
AS
SMALL
MEDIUM
AND
LARGE
EFFECTS
RESPECTIVELY
EFFECT
SIZE
DIALOGS
ARE
AVAILABLE
TO
COMPUTE
THE
APPROPRIATE
EFFECT
SIZE
PARAM
ETER
FROM
MEANS
AND
SDS
FOR
EXAMPLE
ASSUME
WE
WANT
TO
COMPARE
VISUAL
SEARCH
TIMES
FOR
TARGETS
EMBEDDED
IN
RARE
VERSUS
FREQUENT
LOCAL
CONTEXTS
IN
A
WITHIN
SUBJECTS
DESIGN
CF
HOFFMANN
SEBALD
EXPERIMENT
IT
IS
EX
PECTED
THAT
THE
MEAN
SEARCH
TIME
FOR
TARGETS
IN
RARE
CONTEXTS
E
G
MSEC
SHOULD
DECREASE
BY
AT
LEAST
MSEC
I
E
TO
MSEC
IN
FREQUENT
CONTEXTS
AS
A
CONSEQUENCE
OF
LOCAL
CONTEXTUAL
CUING
IF
PRIOR
EVIDENCE
SUGGESTS
POPULATION
SDS
OF
SAY
À
MSEC
IN
EACH
OF
THE
CONDITIONS
AND
A
CORRELATION
OF
BETWEEN
SEARCH
TIMES
IN
THE
TWO
CON
DITIONS
WE
CAN
USE
THE
EFFECT
SIZE
DRAWER
OF
G
POWER
FOR
THE
MATCHED
PAIRS
T
TEST
TO
CALCULATE
THE
EFFECT
SIZE
DZ
SEE
THE
SECOND
ROW
OF
TABLE
FOR
THE
FORMULA
BY
SELECTING
A
POST
HOC
POWER
ANALYSIS
FOR
ONE
TAILED
MATCHED
PAIRS
T
TESTS
WE
EASILY
SEE
THAT
FOR
DZ
AND
N
PARTICIPANTS
THE
POWER
IS
ONLY
THUS
PROVIDED
THAT
THE
ASSUMPTIONS
OUTLINED
ABOVE
ARE
APPROPRI
ATE
THE
NONSIGNIFICANT
STATISTIC
T
OBTAINED
BY
HOFFMANN
AND
SEBALD
EXPERIMENT
P
MIGHT
IN
FACT
BE
DUE
TO
A
TYPE
II
ERROR
THIS
INTERPRETATION
WOULD
BE
CONSISTENT
WITH
THE
FACT
THAT
HOFFMANN
AND
SEBALD
OB
TABLE
SYMBOLS
AND
THEIR
MEANINGS
AS
USED
IN
THE
TABLES
SYMBOLS
MEANING
I
POPULATION
MEAN
IN
GROUP
I
VECTOR
OF
POPULATION
MEANS
IN
GROUP
I
I
XY
POPULATION
MEAN
OF
THE
DIFFERENCE
N
TOTAL
SAMPLE
SIZE
NI
SAMPLE
SIZE
IN
GROUP
I
À
STANDARD
DEVIATION
IN
THE
POPULATION
À
STANDARD
DEVIATION
OF
THE
EFFECT
ÀXY
STANDARD
DEVIATION
OF
THE
DIFFERENCE
NONCENTRALITY
PARAMETER
OF
THE
NONCENTRAL
F
AND
DISTRIBUTION
Y
NONCENTRALITY
PARAMETER
OF
THE
NONCENTRAL
T
DISTRIBUTION
DF
DEGREES
OF
FREEDOM
NUMERATOR
AND
DENOMINATOR
DEGREES
OF
FREEDOM
RESPECTIVELY
POPULATION
CORRELATION
IN
GROUP
I
SQUARED
MULTIPLE
CORRELATION
COEFFICIENTS
CORRESPONDING
TO
THE
PROPORTION
OF
Y
B
VARIANCE
THAT
CAN
BE
ACCOUNTED
FOR
BY
MULTIPLE
REGRESSION
ON
THE
SET
OF
PREDICTOR
VARIABLES
A
AND
A
B
RESPECTIVELY
POPULATION
VARIANCE
COVARIANCE
MATRIX
M
MATRIX
OF
REGRESSION
PARAMETERS
POPULATION
MEANS
C
CONTRAST
MATRIX
CONTRASTS
BETWEEN
ROWS
OF
M
A
CONTRAST
MATRIX
CONTRASTS
BETWEEN
COLUMNS
OF
M
I
PROBABILITY
OF
SUCCESS
IN
GROUP
I
G
POWER
TABLE
TESTS
FOR
CORRELATION
AND
REGRESSION
TEST
NULL
NONCENTRALITY
PARAMETER
TEST
FAMILY
HYPOTHESIS
EFFECT
SIZE
OTHER
PARAMETERS
AND
DEGREES
OF
FREEDOM
DIFFERENCE
FROM
T
TESTS
ZERO
POINT
BISERIAL
N
MODEL
DF
N
DIFFERENCE
FROM
EXACT
C
CONSTANT
CONSTANT
TESTS
CORRELATION
C
BIVARIATE
NORMAL
INEQUALITY
OF
TWO
Z
TESTS
Q
Q
CORRELATION
Z
LN
I
COEFFICIENTS
I
I
MULTIPLE
F
TESTS
A
NUMBER
OF
F
N
REGRESSION
F
Y
A
PREDICTORS
P
A
P
DEVIATION
OF
Y
A
N
P
FROM
ZERO
MULTIPLE
F
TESTS
A
B
A
R
TOTAL
NUMBER
OF
F
N
REGRESSION
F
Y
A
B
Y
A
PREDICTORS
P
Q
INCREASE
OF
Y
A
B
A
B
N
P
NUMBER
OF
TESTED
PREDICTORS
Q
B
SERVED
SIGNIFICANT
LOCAL
CONTEXTUAL
CUING
EFFECTS
IN
EACH
OF
THE
OTHER
FOUR
EXPERIMENTS
THEY
REPORTED
THE
PROCEDURES
PROVIDED
BY
G
POWER
TO
TEST
EFFECTS
IN
BETWEEN
SUBJECTS
DESIGNS
WITH
MORE
THAN
TWO
GROUPS
I
E
ONE
WAY
ANOVA
DESIGNS
AND
GENERAL
MAIN
EFFECTS
AND
INTERACTIONS
IN
FACTORIAL
ANOVA
DESIGNS
OF
ANY
ORDER
ARE
IDENTICAL
TO
THOSE
IN
G
POWER
ERDFELDER
ET
AL
IN
ALL
THESE
CASES
THE
EFFECT
SIZE
F
AS
DEFINED
BY
COHEN
IS
USED
IN
A
ONE
WAY
ANOVA
THE
EFFECT
SIZE
DRAWER
CAN
BE
USED
TO
COMPUTE
F
FROM
THE
MEANS
AND
GROUP
SIZES
OF
K
GROUPS
AND
AN
SD
COMMON
TO
ALL
GROUPS
FOR
TESTS
OF
EFFECTS
IN
FACTORIAL
DESIGNS
THE
EFFECT
SIZE
DRAWER
OFFERS
THE
POSSIBILITY
OF
COMPUTING
EFFECT
SIZE
F
FROM
THE
VARI
ANCE
EXPLAINED
BY
THE
TESTED
EFFECT
AND
THE
ERROR
VARIANCE
COHEN
DEFINES
FS
OF
AND
AS
SMALL
MEDIUM
AND
LARGE
EFFECTS
RESPECTIVELY
NEW
IN
G
POWER
ARE
PROCEDURES
FOR
ANALYZING
MAIN
EFFECTS
AND
INTERACTIONS
FOR
A
B
MIXED
DESIGNS
WHERE
A
IS
A
BETWEEN
SUBJECTS
FACTOR
OR
AN
ENUMERATION
OF
THE
GROUPS
GENERATED
BY
CROSS
CLASSIFICATION
OF
SEVERAL
BETWEEN
SUBJECTS
FACTORS
AND
B
IS
A
WITHIN
SUBJECTS
FAC
TOR
OR
AN
ENUMERATION
OF
THE
REPEATED
MEASURES
GENERATED
BY
CROSS
CLASSIFICATION
OF
SEVERAL
WITHIN
SUBJECTS
FACTORS
BOTH
THE
UNIVARIATE
AND
THE
MULTIVARIATE
APPROACHES
TO
RE
PEATED
MEASURES
O
BRIEN
KAISER
ARE
SUPPORTED
THE
MULTIVARIATE
APPROACH
WILL
BE
DISCUSSED
BELOW
THE
UNIVARIATE
APPROACH
IS
BASED
ON
THE
SPHERICITY
ASSUMP
TION
THIS
ASSUMPTION
IS
CORRECT
IF
IN
THE
POPULATION
ALL
VARIANCES
OF
THE
REPEATED
MEASUREMENTS
ARE
EQUAL
AND
ALL
CORRELATIONS
BETWEEN
PAIRS
OF
REPEATED
MEASUREMENTS
ARE
EQUAL
IF
ALL
THE
DISTRIBUTIONAL
ASSUMPTIONS
ARE
MET
THEN
THE
UNIVARIATE
APPROACH
IS
THE
MOST
POWERFUL
METHOD
MULLER
BARTON
O
BRIEN
KAISER
UNFORTUNATELY
THE
ASSUMPTION
OF
EQUAL
CORRELATIONS
IS
VIOLATED
QUITE
OFTEN
WHICH
CAN
LEAD
TO
VERY
MISLEADING
RESULTS
IN
ORDER
TO
COMPENSATE
FOR
SUCH
ADVERSE
EFFECTS
IN
TESTS
OF
WITHIN
EFFECTS
OR
BETWEEN
WITHIN
INTERACTIONS
THE
NONCENTRALITY
PARAMETER
AND
THE
DEGREES
OF
FREEDOM
OF
THE
F
DISTRIBU
TION
CAN
BE
MULTIPLIED
BY
A
CORRECTION
FACTOR
E
GEISSER
GREENHOUSE
HUYNH
FELDT
E
IF
THE
SPHERICITY
ASSUMPTION
IS
MET
AND
APPROACHES
M
WITH
INCREASING
DEGREES
OF
VIOLATION
OF
SPHERICITY
WHERE
M
DENOTES
THE
NUMBER
OF
REPEATED
MEASUREMENTS
G
POWER
PROVIDES
THREE
SEPARATE
YET
VERY
SIMILAR
ROU
TINES
TO
CALCULATE
POWER
IN
THE
UNIVARIATE
APPROACH
FOR
BETWEEN
EFFECTS
WITHIN
EFFECTS
AND
INTERACTIONS
IF
THE
TO
BE
DETECTED
EFFECT
SIZE
F
IS
KNOWN
THESE
PROCEDURES
ARE
VERY
EASY
TO
APPLY
TO
ILLUSTRATE
BERTI
MÜNZER
SCHRÖGER
AND
PECHMANN
COMPARED
THE
PITCH
DISCRIMINATION
ABILITY
OF
MUSICIANS
AND
CONTROL
SUBJECTS
BETWEEN
SUBJECTS
FACTOR
A
FOR
DIFFERENT
INTERFERENCE
CONDITIONS
WITHIN
SUBJECTS
FACTOR
B
ASSUMING
THAT
A
B
AND
A
B
EFFECTS
OF
MEDIUM
SIZE
F
SEE
COHEN
TABLE
OF
THE
PRESENT
ARTICLE
SHOULD
BE
DETECTED
GIVEN
A
CORRELATION
OF
BETWEEN
REPEATED
MEASURES
AND
A
SIGNIFICANCE
LEVEL
OF
THE
POWER
VALUES
OF
THE
F
TESTS
FOR
THE
A
MAIN
EFFECT
THE
B
MAIN
EFFECT
AND
THE
A
B
INTERACTION
ARE
EASILY
COMPUTED
AS
AND
RE
SPECTIVELY
BY
INSERTING
F
THE
TOTAL
SAMPLE
SIZE
THE
NUMBER
OF
GROUPS
THE
NUMBER
OF
REPETI
TIONS
AND
INTO
THE
APPROPRIATE
INPUT
FIELDS
OF
THE
PROCEDURES
DESIGNED
FOR
THESE
TESTS
IF
THE
TO
BE
DETECTED
EFFECT
SIZE
F
IS
UNKNOWN
IT
MUST
BE
COMPUTED
FROM
MORE
BASIC
PARAMETERS
CHARACTERIZING
THE
EXPECTED
POPULATION
SCENARIO
UNDER
TO
DEMONSTRATE
THE
GENERAL
PROCEDURE
WE
WILL
SHOW
HOW
TO
DO
POST
HOC
POWER
ANALYSES
IN
THE
SCENARIO
ILLUSTRATED
IN
FIGURE
AS
SUMING
THE
VARIANCE
AND
CORRELATIONS
STRUCTURE
DEFINED
IN
MATRIX
WE
FIRST
CONSIDER
THE
POWER
OF
THE
WITHIN
EFFECT
WE
SELECT
THE
F
TESTS
FAMILY
THE
REPEATED
MEA
FAUL
ERDFELDER
LANG
AND
BUCHNER
TABLE
TESTS
FOR
MEANS
UNIVARIATE
CASE
TEST
NULL
NONCENTRALITY
PARAMETER
TEST
FAMILY
HYPOTHESIS
EFFECT
SIZE
OTHER
PARAMETERS
AND
DEGREES
OF
FREEDOM
C
C
DIFFERENCE
FROM
T
TESTS
D
Y
D
NÅ
CONSTANT
ONE
DF
N
SAMPLE
CASE
XY
INEQUALITY
OF
T
TESTS
DZ
X
Y
Y
DZ
NÅ
TWO
DEPENDENT
DF
N
X
Y
MEANS
MATCHED
PAIRS
X
Y
X
Y
INEQUALITY
OF
T
TESTS
D
D
TWO
INDEPENDENT
N
N
MEANS
DF
N
ANOVA
FIXED
F
TESTS
I
EFFECTS
ONE
I
K
WAY
INEQUALITY
OF
MULTIPLE
MEANS
F
NUMBER
OF
F
GROUPS
K
K
NJ
I
N
K
K
N
ANOVA
FIXED
F
TESTS
I
F
TOTAL
NUMBER
OF
F
EFFECTS
I
K
CELLS
IN
THE
Q
MULTIFACTOR
DESIGN
K
N
K
DESIGNS
AND
DEGREES
OF
PLANNED
FREEDOM
OF
THE
COMPARISONS
TESTED
EFFECT
Q
ANOVA
F
TESTS
I
F
LEVELS
OF
F
REPEATED
I
K
BETWEEN
FACTOR
K
U
M
MEASURES
M
BETWEEN
EFFECTS
LEVELS
OF
K
REPEATED
MEASURES
N
K
FACTOR
M
ANOVA
F
TESTS
I
F
F
REPEATED
I
M
M
U
MEASURES
POPULATION
WITHIN
EFFECTS
CORRELATION
M
E
AMONG
REPEATED
N
K
M
E
MEASURES
ANOVA
F
TESTS
IJ
I
F
F
REPEATED
Å
J
M
FOR
WITHIN
AND
U
MEASURES
I
K
BETWEEN
WITHIN
J
M
WITHIN
BETWEEN
K
M
E
INTERACTIONS
INTERACTIONS
N
K
M
E
NONSPHERICITY
CORRECTION
E
SURES
WITHIN
FACTORS
ANOVA
APPROACH
TEST
AND
POST
HOC
AS
THE
TYPE
OF
POWER
ANALYSIS
BOTH
THE
NUMBER
OF
GROUPS
AND
REPETITIONS
FIELDS
ARE
SET
TO
TOTAL
SAMPLE
SIZE
IS
SET
TO
AND
ERROR
PROBABILITY
TO
REFERRING
TO
MATRIX
WE
INSERT
IN
THE
CORR
AMONG
REP
MEA
SURES
INPUT
FIELD
AND
SINCE
SPHERICITY
OBVIOUSLY
HOLDS
IN
THIS
CASE
SET
NONSPHERICITY
CORRECTION
E
TO
TO
DETER
MINE
EFFECT
SIZE
F
WE
FIRST
CALCULATE
À
THE
VARIANCE
OF
THE
TIME
TIME
TIME
I
NI
GROUP
GROUP
GROUP
J
FIGURE
SAMPLE
REPEATED
MEASURES
DESIGNS
THREE
GROUPS
ARE
REPEATEDLY
MEASURED
AT
THREE
DIF
FERENT
TIMES
THE
SHADED
PORTION
OF
THE
TABLE
IS
THE
POSTULATED
MATRIX
M
OF
POPULATION
MEANS
IJ
THE
LAST
COLUMN
OF
THE
TABLE
CONTAINS
THE
SAMPLE
SIZE
OF
EACH
GROUP
THE
SYMMETRIC
MATRICES
SRI
SPECIFY
TWO
DIF
FERENT
COVARIANCE
STRUCTURES
BETWEEN
MEASUREMENTS
TAKEN
AT
DIFFERENT
TIMES
THE
MAIN
DIAGONAL
CONTAINS
THE
SDS
OF
THE
MEASUREMENTS
AT
EACH
TIME
AND
THE
OFF
DIAGONAL
ELEMENTS
CONTAIN
THE
CORRELATIONS
BETWEEN
PAIRS
OF
MEASUREMENTS
TAKEN
AT
DIFFERENT
TIMES
G
POWER
WITHIN
EFFECT
FROM
THE
THREE
COLUMN
MEANS
J
OF
MATRIX
M
AND
THE
GRAND
MEAN
WE
GET
CLICKING
ON
THE
DETERMINE
BUTTON
NEXT
TO
THE
EFFECT
SIZE
LABEL
OPENS
THE
EFFECT
SIZE
DRAWER
WE
CHOOSE
THE
FROM
VARIANCES
OPTION
AND
SET
VARIANCE
EXPLAINED
BY
SPECIAL
EFFECT
TO
AND
VARIANCE
WITHIN
GROUPS
TO
CLICKING
ON
THE
CALCULATE
AND
TRANSFER
TO
MAIN
WINDOW
BUTTON
CALCULATES
AN
EFFECT
SIZE
F
AND
TRANSFERS
F
TO
THE
EFFECT
SIZE
FIELD
IN
THE
MAIN
WINDOW
CLICKING
ON
CALCULATE
YIELDS
THE
RESULTS
THE
POWER
IS
THE
CRITICAL
F
VALUE
WITH
AND
IS
AND
THE
NONCENTRALITY
PARAMETER
IS
THE
PROCEDURE
FOR
TESTS
OF
BETWEEN
WITHIN
INTERACTIONS
EF
FECTS
REPEATED
MEASURES
WITHIN
BETWEEN
INTERAC
TIONS
ANOVA
APPROACH
IS
ALMOST
IDENTICAL
TO
THAT
JUST
DESCRIBED
THE
ONLY
DIFFERENCE
IS
IN
HOW
THE
EFFECT
SIZE
F
IS
COMPUTED
HERE
WE
FIRST
CALCULATE
THE
VARIANCE
OF
THE
RESIDUAL
VALUES
IJ
I
J
OF
MATRIX
M
667
90123
USING
THE
EFFECT
SIZE
DRAWER
IN
THE
SAME
WAY
AS
ABOVE
WE
GET
AN
EFFECT
SIZE
F
WHICH
RESULTS
IN
A
POWER
OF
TO
TEST
BETWEEN
EFFECTS
WE
CHOOSE
REPEATED
MEASURES
BETWEEN
FACTORS
ANOVA
APPROACH
AND
SET
ALL
PARAMETERS
TO
THE
SAME
VALUES
AS
BEFORE
NOTE
THAT
IN
THIS
CASE
WE
DO
NOT
NEED
TO
SPECIFY
E
NO
CORRECTION
IS
NECESSARY
BECAUSE
TESTS
OF
BETWEEN
FACTORS
DO
NOT
REQUIRE
THE
SPHERICITY
ASSUMPTION
TO
CALCULATE
THE
EFFECT
SIZE
WE
USE
EFFECT
SIZE
FROM
MEANS
IN
THE
EFFECT
SIZE
DRAWER
WE
SELECT
THREE
GROUPS
SET
SD
À
WITHIN
EACH
GROUP
TO
AND
INSERT
FOR
EACH
GROUP
THE
COR
RESPONDING
ROW
MEAN
I
OF
M
AND
AN
EQUAL
GROUP
SIZE
OF
EFFECT
SIZE
F
IS
CAL
CULATED
AND
THE
RESULTING
POWER
IS
NOTE
THAT
G
POWER
CAN
EASILY
HANDLE
PURE
REPEATED
MEASURES
DESIGNS
WITHOUT
ANY
BETWEEN
SUBJECTS
FACTORS
SEE
E
G
FRINGS
WENTURA
SCHWARZ
MÜLLER
BY
CHOOSING
THE
REPEATED
MEASURES
WITHIN
FAC
TORS
ANOVA
APPROACH
PROCEDURE
AND
SETTING
THE
NUM
BER
OF
GROUPS
TO
TESTS
FOR
MEAN
VECTORS
MULTIVARIATE
CASE
G
POWER
CONTAINS
SEVERAL
PROCEDURES
FOR
PERFORMING
POWER
ANALYSES
IN
MULTIVARIATE
DESIGNS
SEE
TABLE
ALL
THESE
TESTS
BELONG
TO
THE
F
TEST
FAMILY
THE
HOTELLING
T
TESTS
ARE
EXTENSIONS
OF
UNIVARIATE
T
TESTS
TO
THE
MULTIVARIATE
CASE
IN
WHICH
MORE
THAN
ONE
DEPENDENT
VARIABLE
IS
MEASURED
INSTEAD
OF
TWO
SINGLE
MEANS
TWO
MEAN
VECTORS
ARE
COMPARED
AND
INSTEAD
OF
A
SINGLE
VARIANCE
A
VARIANCE
COVARIANCE
MATRIX
IS
CONSID
ERED
RENCHER
IN
THE
ONE
SAMPLE
CASE
POSITS
THAT
THE
VECTOR
OF
POPULATION
MEANS
IS
IDENTICAL
TO
A
SPECI
FIED
CONSTANT
MEAN
VECTOR
THE
EFFECT
SIZE
DRAWER
CAN
BE
USED
TO
CALCULATE
THE
EFFECT
SIZE
FROM
THE
DIFFERENCE
C
AND
THE
EXPECTED
VARIANCE
COVARIANCE
MATRIX
UNDER
FOR
EXAMPLE
ASSUME
THAT
WE
HAVE
TWO
VARIABLES
A
DIFFERENCE
VECTOR
C
UNDER
VARI
ANCES
AND
A
COVARIANCE
OF
RENCHER
P
TO
PERFORM
A
POST
HOC
POWER
ANALYSIS
CHOOSE
F
TESTS
THEN
MULTIVARIATE
HOTELLING
T
ONE
GROUP
AND
SET
THE
ANALYSIS
TYPE
TO
POST
HOC
ENTER
IN
THE
RESPONSE
VARIABLES
FIELD
AND
THEN
CLICK
ON
THE
DETERMINE
BUTTON
NEXT
TO
THE
EFFECT
SIZE
LABEL
IN
THE
EFFECT
SIZE
DRAWER
AT
INPUT
METHOD
MEANS
AND
CHOOSE
VARIANCE
COVARIANCE
MATRIX
AND
CLICK
ON
SPECIFY
EDIT
INPUT
VALUES
UNDER
THE
MEANS
TAB
INSERT
IN
BOTH
INPUT
FIELDS
UNDER
THE
COV
SIGMA
TAB
IN
SERT
AND
IN
THE
MAIN
DIAGONAL
AND
AS
THE
OFF
DIAGONAL
ELEMENT
IN
THE
LOWER
LEFT
CELL
CLICKING
ON
THE
CALCULATE
AND
TRANSFER
TO
MAIN
WINDOW
BUTTON
INITIATES
THE
CALCULATION
OF
THE
EFFECT
SIZE
AND
TRANSFERS
IT
TO
THE
MAIN
WINDOW
FOR
THIS
EFFECT
SIZE
AND
A
TOTAL
SAMPLE
SIZE
OF
N
THE
POWER
AMOUNTS
TO
THE
PROCEDURE
IN
THE
TWO
GROUP
CASE
IS
EXACTLY
THE
SAME
WITH
THE
FOLLOWING
EXCEPTIONS
FIRST
IN
THE
EFFECT
SIZE
DRAWER
TWO
MEAN
VECTORS
HAVE
TO
BE
SPECIFIED
SECOND
THE
GROUP
SIZES
MAY
DIFFER
THE
MANOVA
TESTS
IN
G
POWER
REFER
TO
THE
MULTI
VARIATE
GENERAL
LINEAR
MODEL
O
BRIEN
MULLER
O
BRIEN
SHIEH
Y
XB
E
WHERE
Y
IS
N
P
OF
RANK
P
X
IS
N
R
OF
RANK
R
AND
THE
R
P
MATRIX
B
CONTAINS
FIXED
COEFFICIENTS
THE
ROWS
OF
E
ARE
TAKEN
TO
BE
INDEPENDENT
P
VARIATE
NORMAL
RANDOM
VECTORS
WITH
MEAN
AND
P
P
POSITIVE
DEFINITE
COVARIANCE
MATRIX
THE
MULTIVARIATE
GENERAL
LINEAR
HYPOTHESIS
IS
CBA
WHERE
C
IS
C
R
WITH
FULL
ROW
RANK
AND
A
IS
P
A
WITH
FULL
COLUMN
RANK
IN
G
POWER
IS
ASSUMED
TO
BE
ZERO
HAS
A
C
DEGREES
OF
FREEDOM
ALL
TESTS
OF
THE
HYPOTHESIS
REFER
TO
THE
MATRICES
H
T
CXT
WX
N
CBU
CBU
CT
NH
AND
E
UT
UN
R
WHERE
IS
A
Q
Q
ESSENCE
MODEL
MATRIX
IS
A
Q
Q
DI
X
W
AGONAL
MATRIX
CONTAINING
WEIGHTS
WJ
NJ
N
AND
XT
X
T
N
X
WX
SEE
O
BRIEN
SHIEH
P
LET
BE
THE
MIN
A
C
EIGENVALUES
OF
AND
THE
EIGENVALUES
OF
N
R
THAT
IS
I
IN
N
R
G
POWER
OFFERS
POWER
ANALYSES
FOR
THE
MULTIVARIATE
MODEL
FOLLOWING
EITHER
THE
APPROACH
OUTLINED
IN
MULLER
AND
PETERSON
MULLER
LAVANGE
LANDESMAN
RAMEY
RAMEY
OR
ALTERNATIVELY
THE
APPROACH
OF
O
BRIEN
AND
SHIEH
SHIEH
BOTH
APPROACHES
APPROXIMATE
THE
EXACT
DISTRIBUTIONS
OF
WILKS
U
RAO
THE
HOTELLING
LAWLEY
T
PILLAI
SAMSON
THE
HOTELLING
LAWLEY
FAUL
ERDFELDER
LANG
AND
BUCHNER
TABLE
TESTS
FOR
MEAN
VECTORS
MULTIVARIATE
CASE
TEST
NULL
NONCENTRALITY
PARAMETER
TEST
FAMILY
HYPOTHESIS
EFFECT
SIZE
OTHER
PARAMETERS
AND
DEGREES
OF
FREEDOM
HOTELLING
T
F
TESTS
NUMBER
OF
C
VÅ
T
V
Å
DIFFERENCE
FROM
RESPONSE
K
V
C
CONSTANT
MEAN
VARIABLES
K
N
K
VECTOR
HOTELLING
T
F
TESTS
NUMBER
OF
N
N
VÅ
T
V
Å
DIFFERENCE
RESPONSE
V
BETWEEN
TWO
VARIABLES
K
K
MEAN
VECTORS
N
K
MANOVA
F
TESTS
CM
EFFECT
SIZE
NUMBER
OF
NONCENTRALITY
PARAMETER
GLOBAL
EFFECTS
MEANS
MATRIX
FMULT
GROUPS
G
AND
DEGREES
OF
FREEDOM
M
DEPENDS
ON
THE
TEST
NUMBER
OF
DEPEND
ON
THE
TEST
STATISTIC
CONTRAST
STATISTICS
RESPONSE
AND
ALGORITHM
USED
SEE
MATRIX
C
WILKS
U
VARIABLES
K
EFFECT
SIZE
COLUMN
AND
HOTELLING
TABLE
LAWLEY
T
HOTELLING
MANOVA
F
TESTS
NUMBER
OF
LAWLEY
T
SPECIAL
EFFECTS
GROUPS
G
PILLAI
V
NUMBER
OF
AND
ALGORITHMS
PREDICTORS
P
MULLER
NUMBER
OF
PETERSON
RESPONSE
VARIABLES
K
O
BRIEN
SHIEH
MANOVA
F
TESTSCMA
LEVELS
OF
REPEATED
MEANS
MATRIX
BETWEEN
FACTOR
MEASURES
M
K
BETWEEN
BETWEEN
LEVELS
OF
EFFECTS
CONTRAST
REPEATED
MATRIX
C
MEASURES
FACTOR
MANOVA
F
TESTS
WITHIN
M
REPEATED
CONTRAST
MEASURES
MATRIX
A
WITHIN
EFFECTS
MANOVA
F
TESTS
REPEATED
MEASURES
BETWEEN
WITHIN
INTERACTIONS
T
MCKEON
AND
PILLAI
V
PILLAI
MIJARES
BY
F
DISTRIBUTIONS
AND
ARE
ASYMPTOTICALLY
EQUIVALENT
TABLE
OUTLINES
DETAILS
OF
BOTH
APPROXIMATIONS
THE
TYPE
OF
STATISTIC
U
T
T
V
AND
THE
APPROACH
MULLER
PETERSON
OR
O
BRIEN
SHIEH
CAN
BE
SELECTED
IN
AN
OPTIONS
DIALOG
THAT
CAN
BE
EVOKED
BY
CLICKING
ON
THE
OPTIONS
BUT
TON
AT
THE
BOTTOM
OF
THE
MAIN
WINDOW
THE
APPROACH
OF
MULLER
AND
PETERSON
HAS
FOUND
WIDESPREAD
USE
FOR
INSTANCE
IT
HAS
BEEN
ADOPTED
IN
THE
SPSS
SOFTWARE
PACKAGE
WE
NEVERTHELESS
RECOMMEND
THE
APPROACH
OF
O
BRIEN
AND
SHIEH
BECAUSE
IT
HAS
A
NUMBER
OF
ADVANTAGES
UNLIKE
THE
METHOD
OF
MULLER
AND
PETERSON
IT
PROVIDES
THE
EXACT
NONCENTRAL
F
DISTRI
BUTION
WHENEVER
THE
HYPOTHESIS
INVOLVES
AT
MOST
POSITIVE
EIGENVALUES
ITS
APPROXIMATIONS
FOR
EIGENVALUES
ARE
ALMOST
ALWAYS
MORE
ACCURATE
THAN
THOSE
OF
MULLER
AND
PETERSON
METHOD
WHICH
SYSTEMATICALLY
UNDERESTIMATES
POWER
AND
IT
PROVIDES
A
SIMPLER
FORM
OF
THE
NONCENTRALITY
PARAMETER
THAT
IS
N
WHERE
IS
NOT
A
FUNCTION
OF
THE
TOTAL
SAMPLE
SIZE
G
POWER
PROVIDES
PROCEDURES
TO
CALCULATE
THE
POWER
FOR
GLOBAL
EFFECTS
IN
A
ONE
WAY
MANOVA
AND
FOR
SPECIAL
EFFECTS
AND
INTERACTIONS
IN
FACTORIAL
MANOVA
DESIGNS
THESE
PROCEDURES
ARE
THE
DIRECT
MULTIVARIATE
ANALOGUES
OF
THE
ANOVA
ROUTINES
DESCRIBED
ABOVE
TABLE
SUM
MARIZES
INFORMATION
THAT
IS
NEEDED
IN
ADDITION
TO
THE
FORMULAS
GIVEN
ABOVE
TO
CALCULATE
EFFECT
SIZE
F
FROM
HY
POTHESIZED
VALUES
FOR
MEAN
MATRIX
M
CORRESPONDING
TO
MATRIX
B
IN
THE
MODEL
COVARIANCE
MATRIX
AND
CONTRAST
MATRIX
C
WHICH
DESCRIBES
THE
EFFECT
UNDER
SCRUTINY
THE
EFFECT
SIZE
DRAWER
CAN
BE
USED
TO
CALCULATE
F
FROM
KNOWN
VALUES
OF
THE
STATISTIC
U
T
T
OR
V
NOTE
HOWEVER
THAT
THE
TRANSFORMATION
OF
T
TO
F
DEPENDS
ON
THE
SAMPLE
SIZE
THUS
THIS
TEST
STATISTIC
SEEMS
NOT
VERY
WELL
SUITED
FOR
A
PRIORI
ANALYSES
IN
LINE
WITH
BREDENKAMP
AND
ERDFELDER
WE
RECOMMEND
V
AS
THE
MULTIVARIATE
TEST
STATISTIC
ANOTHER
GROUP
OF
PROCEDURES
IN
G
POWER
SUPPORTS
THE
MULTIVARIATE
APPROACH
TO
POWER
ANALYSES
OF
REPEATED
MEASURES
DESIGNS
G
POWER
PROVIDES
SEPARATE
BUT
VERY
SIMILAR
ROUTINES
FOR
THE
ANALYSIS
OF
BETWEEN
EFFECTS
WITHIN
EFFECTS
AND
INTERACTIONS
IN
SIMPLE
A
B
DESIGNS
WHERE
A
IS
A
BETWEEN
SUBJECTS
FACTOR
AND
B
A
WITHIN
SUBJECTS
FACTOR
TO
ILLUSTRATE
THE
GENERAL
PROCEDURE
WE
DESCRIBE
IN
SOME
DETAIL
A
POST
HOC
ANALYSIS
OF
THE
WITHIN
EFFECT
FOR
NOTE
MP
MULLER
PETERSON
ALGORITHM
OS
O
BRIEN
AND
SHIEH
ALGORITHM
AND
ARE
EIGENVALUES
OF
THE
EFFECT
SIZE
MATRIX
FOR
DETAILS
AND
THE
MEANING
OF
THE
VARIABLES
A
C
R
AND
N
SEE
TEXT
ON
P
THE
SCENARIO
ILLUSTRATED
IN
FIGURE
ASSUMING
THE
VARIANCE
AND
CORRELATIONS
STRUCTURE
DEFINED
IN
MATRIX
WE
FIRST
CHOOSE
F
TESTS
THEN
REPEATED
MEASURES
WITHIN
FACTORS
MANOVA
APPROACH
IN
THE
TYPE
OF
POWER
ANALYSIS
MENU
WE
CHOOSE
POST
HOC
WE
CLICK
ON
THE
OPTIONS
BUTTON
TO
OPEN
A
DIALOG
IN
WHICH
WE
DESELECT
THE
USE
MEAN
CORRELATION
IN
EFFECT
SIZE
CALCULATION
OPTION
WE
CHOOSE
PILLAI
V
STATISTIC
AND
THE
O
BRIEN
AND
SHIEH
ALGORITHM
BACK
AT
THE
MAIN
WINDOW
WE
SET
BOTH
NUMBER
OF
GROUPS
AND
REPETITIONS
TO
TOTAL
SAMPLE
SIZE
TO
AND
ERROR
PROBABILITY
TO
TO
COMPUTE
THE
EFFECT
SIZE
F
V
FOR
THE
PILLAI
STATISTIC
WE
OPEN
THE
EFFECT
SIZE
DRAWER
BY
CLICKING
ON
THE
DETERMINE
BUTTON
NEXT
TO
THE
EFFECT
SIZE
LABEL
IN
THE
EFFECT
SIZE
DRAWER
SELECT
AS
PROCEDURE
EFFECT
SIZE
FROM
MEAN
AND
VARIANCE
COVARIANCE
MATRIX
AND
AS
INPUT
METHOD
SD
AND
CORRELATION
MATRIX
CLICKING
ON
SPECIFY
EDIT
MATRICES
OPENS
ANOTHER
WINDOW
IN
WHICH
WE
SPECIFY
THE
HYPOTHESIZED
PARAMETERS
UNDER
THE
MEANS
TAB
WE
INSERT
OUR
MEANS
MATRIX
M
UNDER
THE
COV
SIGMA
TAB
WE
CHOOSE
SD
AND
CORRELATION
AND
INSERT
THE
VALUES
OF
BECAUSE
THIS
MATRIX
IS
ALWAYS
SYMMETRIC
IT
SUF
FICES
TO
SPECIFY
THE
LOWER
DIAGONAL
VALUES
AFTER
CLOSING
THE
DIALOG
AND
CLICKING
ON
CALCULATE
AND
TRANSFER
TO
MAIN
WINDOW
WE
GET
A
VALUE
OF
FOR
PILLAI
V
AND
THE
EFFECT
SIZE
F
V
CLICKING
ON
CALCULATE
SHOWS
THAT
THE
POWER
IS
THE
ANALYSES
OF
BETWEEN
EFFECTS
AND
INTERACTION
EFFECTS
ARE
PERFORMED
ANALOGOUSLY
TESTS
FOR
PROPORTIONS
THE
SUPPORT
FOR
TESTS
ON
PROPORTIONS
HAS
BEEN
GREATLY
ENHANCED
IN
G
POWER
TABLE
SUMMARIZES
THE
TESTS
THAT
ARE
CURRENTLY
IMPLEMENTED
IN
PARTICULAR
ALL
TESTS
ON
PRO
PORTIONS
CONSIDERED
BY
COHEN
ARE
NOW
AVAILABLE
INCLUDING
THE
SIGN
TEST
CHAP
THE
Z
TESTS
FOR
THE
DIFFER
ENCE
BETWEEN
TWO
PROPORTIONS
CHAP
AND
THE
TESTS
FOR
GOODNESS
OF
FIT
AND
CONTINGENCY
TABLES
CHAP
THE
SIGN
TEST
IS
IMPLEMENTED
AS
A
SPECIAL
CASE
C
OF
THE
MORE
GENERAL
BINOMIAL
TEST
ALSO
AVAILABLE
IN
G
POWER
THAT
A
SINGLE
PROPORTION
HAS
A
SPECIFIED
VALUE
C
IN
BOTH
PROCEDURES
COHEN
EFFECT
SIZE
G
IS
USED
AND
EXACT
POWER
VALUES
BASED
ON
THE
BINOMIAL
DISTRIBUTION
ARE
CAL
CULATED
NOTE
HOWEVER
THAT
DUE
TO
THE
DISCRETE
NATURE
OF
THE
BINOMIAL
DISTRIBUTION
THE
NOMINAL
VALUE
OF
USUALLY
CANNOT
BE
REALIZED
SINCE
THE
TABLES
IN
CHAPTER
OF
COHEN
BOOK
USE
THE
VALUE
CLOSEST
TO
THE
NOMINAL
VALUE
EVEN
IF
IT
IS
HIGHER
THAN
THE
NOMINAL
VALUE
THE
TABULATED
POWER
VALUES
FAUL
ERDFELDER
LANG
AND
BUCHNER
NOTE
A
D
INDICATE
ALTERNATIVE
EFFECT
SIZE
MEASURES
ARE
SOMETIMES
LARGER
THAN
THOSE
CALCULATED
BY
G
POWER
G
POWER
ALWAYS
REQUIRES
THE
ACTUAL
NOT
TO
BE
LARGER
THAN
THE
NOMINAL
VALUE
NUMEROUS
PROCEDURES
HAVE
BEEN
PROPOSED
TO
TEST
THE
NULL
HYPOTHESIS
THAT
TWO
INDEPENDENT
PROPORTIONS
ARE
IDEN
TICAL
COHEN
D
AGOSTINO
CHASE
BELANGER
SUISSA
SHUSTER
UPTON
AND
G
POWER
IMPLEMENTS
SEVERAL
OF
THEM
THE
SIMPLEST
PROCEDURE
IS
A
Z
TEST
WITH
OPTIONAL
ARCSIN
TRANSFORMATION
AND
OPTIONAL
CONTI
NUITY
CORRECTION
BESIDES
THESE
TWO
COMPUTATIONAL
OPTIONS
ONE
CAN
ALSO
CHOOSE
WHETHER
COHEN
EFFECT
SIZE
MEASURE
H
OR
ALTERNATIVELY
TWO
PROPORTIONS
ARE
USED
TO
SPECIFY
THE
ALTERNATE
HYPOTHESIS
WITH
THE
OPTIONS
USE
CONTINUITY
COR
RECTION
OFF
AND
USE
ARCSIN
TRANSFORM
ON
THE
PROCEDURE
CALCULATES
POWER
VALUES
CLOSE
TO
THOSE
TABULATED
BY
COHEN
CHAP
WITH
BOTH
USE
CONTINUITY
CORRECTION
AND
USE
ARCSIN
TRANSFORM
OFF
THE
UNCORRECTED
APPROXIMA
TION
IS
COMPUTED
FLEISS
WITH
USE
CONTINUITY
COR
RECTION
ON
AND
USE
ARCSIN
TRANSFORM
OFF
THE
CORRECTED
APPROXIMATION
IS
COMPUTED
FLEISS
A
SECOND
VARIANT
IS
FISHER
EXACT
CONDITIONAL
TEST
HASE
MAN
NORMALLY
G
POWER
CALCULATES
THE
EXACT
UNCONDITIONAL
POWER
HOWEVER
DESPITE
THE
HIGHLY
OPTI
MIZED
ALGORITHM
USED
IN
G
POWER
LONG
COMPUTATION
TIMES
MAY
RESULT
FOR
LARGE
SAMPLE
SIZES
E
G
N
THEREFORE
A
LIMITING
N
CAN
BE
SPECIFIED
IN
THE
OPTIONS
DIALOG
THAT
DETERMINES
AT
WHICH
SAMPLE
SIZE
G
POWER
SWITCHES
TO
A
LARGE
SAMPLE
APPROXIMATION
A
THIRD
VARIANT
CALCULATES
THE
EXACT
UNCONDITIONAL
POWER
FOR
APPROXIMATE
TEST
STATISTICS
T
TABLE
SUMMARIZES
THE
SUPPORTED
STATISTICS
THE
LOGIC
UNDERLYING
THIS
PROCEDURE
IS
TO
ENUMERATE
ALL
POSSIBLE
OUTCOMES
FOR
THE
BI
NOMIAL
TABLE
GIVEN
FIXED
SAMPLE
SIZES
IN
THE
TWO
RESPECTIVE
GROUPS
THIS
IS
DONE
BY
CHOOSING
AS
SUCCESS
FREQUENCIES
AND
IN
THE
FIRST
AND
THE
SECOND
GROUPS
RESPECTIVELY
ANY
COMBINATION
OF
THE
VALUES
AND
GIVEN
THE
SUCCESS
PROBABILITIES
IN
THE
TWO
RESPECTIVE
GROUPS
THE
PROBABILITY
OF
OBSERVING
A
TABLE
X
WITH
SUCCESS
FREQUENCIES
IS
NOTE
XI
SUCCESS
FREQUENCY
IN
GROUP
I
NI
SAMPLE
SIZE
IN
GROUP
I
N
TOTAL
SAMPLE
SIZE
ˆI
XI
NI
THE
Z
TESTS
IN
THE
TABLE
ARE
MORE
COMMONLY
KNOWN
AS
TESTS
THE
EQUIVALENT
Z
TEST
IS
USED
TO
PROVIDE
TWO
SIDED
TESTS
TO
CALCULATE
POWER
AND
THE
ACTUAL
TYPE
I
ERROR
THE
TEST
STATISTIC
T
IS
COMPUTED
FOR
EACH
TABLE
AND
COMPARED
WITH
THE
CRITICAL
VALUE
T
IF
A
DENOTES
THE
SET
OF
ALL
TA
BLES
X
REJECTED
BY
THIS
CRITERION
THAT
IS
THOSE
WITH
T
T
THEN
THE
POWER
AND
THE
LEVEL
ARE
GIVEN
BY
X
A
P
X
AND
X
A
P
X
WHERE
DENOTES
THE
SUCCESS
PROBABILITY
IN
BOTH
GROUPS
AS
ASSUMED
IN
THE
NULL
HYPOTHESIS
NOTE
THAT
THE
ACTUAL
LEVEL
CAN
BE
LARGER
THAN
THE
NOMINAL
LEVEL
THE
PREFERRED
INPUT
METHOD
PROPORTIONS
DIFFERENCE
RISK
RATIO
OR
ODDS
RATIO
SEE
TABLE
AND
THE
TEST
STATISTIC
TO
USE
SEE
TABLE
CAN
BE
CHANGED
IN
THE
OPTIONS
DIALOG
NOTE
THAT
THE
TEST
STATISTIC
ACTUALLY
USED
TO
ANALYZE
THE
DATA
MUST
BE
CHOSEN
FOR
LARGE
SAMPLE
SIZES
THE
EXACT
COMPUTATION
MAY
TAKE
TOO
MUCH
TIME
THEREFORE
A
LIMITING
N
CAN
BE
SPECIFIED
IN
THE
OPTIONS
DIALOG
THAT
DETERMINES
AT
WHICH
SAMPLE
SIZE
G
POWER
SWITCHES
TO
LARGE
SAMPLE
APPROXIMATIONS
G
POWER
ALSO
PROVIDES
A
GROUP
OF
PROCEDURES
TO
TEST
THE
HYPOTHESIS
THAT
THE
DIFFERENCE
RISK
RATIO
OR
ODDS
RATIO
OF
A
PROPORTION
WITH
RESPECT
TO
A
SPECIFIED
REFERENCE
PRO
PORTION
IS
DIFFERENT
UNDER
FROM
A
DIFFERENCE
RISK
RATIO
OR
ODDS
RATIO
OF
THE
SAME
REFERENCE
PROPORTION
ASSUMED
IN
THESE
PROCEDURES
ARE
AVAILABLE
IN
THE
EXACT
TEST
FAMILY
AS
PROPORTIONS
INEQUALITY
OFFSET
TWO
INDEPEN
DENT
GROUPS
UNCONDITIONAL
THE
ENUMERATION
PROCE
DURE
DESCRIBED
ABOVE
FOR
THE
TESTS
ON
DIFFERENCES
BETWEEN
PROPORTIONS
WITHOUT
OFFSET
IS
ALSO
USED
IN
THIS
CASE
IN
THE
TESTS
WITHOUT
OFFSET
THE
DIFFERENT
INPUT
PARAMETERS
E
G
DIFFERENCES
RISK
RATIO
ARE
EQUIVALENT
WAYS
OF
SPECIFYING
TWO
PROPORTIONS
THE
SPECIFIC
CHOICE
HAS
NO
INFLUENCE
ON
THE
RESULTS
IN
THE
CASE
OF
TESTS
WITH
OFFSET
HOWEVER
EACH
INPUT
METHOD
HAS
A
DIFFERENT
SET
OF
AVAILABLE
TEST
STATISTICS
THE
PREFERRED
INPUT
METHOD
SEE
TABLE
AND
THE
TEST
STA
TISTIC
TO
USE
SEE
TABLE
CAN
BE
CHANGED
IN
THE
OPTIONS
DIALOG
AS
IN
THE
OTHER
EXACT
PROCEDURES
THE
COMPUTATION
MAY
BE
TIME
CONSUMING
AND
A
LIMITING
N
CAN
BE
SPECIFIED
IN
THE
OPTIONS
DIALOG
THAT
DETERMINES
AT
WHICH
SAMPLE
SIZE
G
POWER
SWITCHES
TO
LARGE
SAMPLE
APPROXIMATIONS
ALSO
NEW
IN
G
POWER
IS
AN
EXACT
PROCEDURE
TO
CALCU
LATE
THE
POWER
FOR
THE
MCNEMAR
TEST
THE
NULL
HYPOTHESIS
OF
THIS
TEST
STATES
THAT
THE
PROPORTIONS
OF
SUCCESSES
ARE
IDENTI
CAL
IN
TWO
DEPENDENT
SAMPLES
FIGURE
SHOWS
THE
STRUCTURE
OF
THE
UNDERLYING
DESIGN
A
BINARY
RESPONSE
IS
SAMPLED
FROM
THE
SAME
SUBJECT
OR
A
MATCHED
PAIR
IN
A
STANDARD
CON
DITION
AND
IN
A
TREATMENT
CONDITION
THE
NULL
HYPOTHESIS
T
IS
FORMALLY
EQUIVALENT
TO
THE
HYPOTHESIS
FOR
THE
ODD
RATIO
OR
TO
FULLY
SPECIFY
WE
NEED
TO
SPECIFY
NOT
ONLY
THE
ODDS
RATIO
BUT
ALSO
THE
PROPORTION
OF
DISCORDANT
PAIRS
D
THAT
IS
THE
EXPECTED
PROPORTION
OF
RESPONSES
THAT
DIFFER
IN
THE
STANDARD
AND
THE
TREATMENT
CONDITIONS
THE
EXACT
PROCEDURE
USED
IN
G
POWER
CALCU
LATES
THE
UNCONDITIONAL
POWER
FOR
THE
EXACT
CONDITIONAL
TEST
WHICH
CALCULATES
THE
POWER
CONDITIONAL
ON
THE
NUMBER
OF
DISCORDANT
PAIRS
ND
LET
P
ND
I
BE
THE
PROBABILITY
THAT
THE
NUMBER
OF
DISCORDANT
PAIRS
IS
I
THEN
THE
UNCONDITIONAL
POWER
IS
THE
SUM
OVER
ALL
I
N
OF
THE
CONDITIONAL
POWER
FOR
ND
I
WEIGHTED
WITH
P
ND
I
THIS
PROCEDURE
IS
VERY
EFFICIENT
BUT
FOR
VERY
LARGE
SAMPLE
SIZES
THE
EXACT
COMPUTATION
MAY
TAKE
TOO
MUCH
TIME
AGAIN
A
LIMITING
N
THAT
DETERMINES
AT
WHICH
SAMPLE
SIZE
G
POWER
SWITCHES
TO
A
LARGE
SAMPLE
APPROXIMATION
CAN
BE
SPECIFIED
IN
THE
OP
TIONS
DIALOG
THE
LARGE
SAMPLE
APPROXIMATION
CALCULATES
NOTE
XI
SUCCESS
FREQUENCY
IN
GROUP
I
NI
SAMPLE
SIZE
IN
GROUP
I
N
TOTAL
SAMPLE
SIZE
ˆI
XI
NI
Y
DIFFERENCE
BETWEEN
PROPORTIONS
POSTULATED
IN
RISK
RATIO
POSTULATED
IN
ODDS
RATIO
POSTULATED
IN
THE
POWER
ON
THE
BASIS
OF
AN
ORDINARY
ONE
SAMPLE
BINOMIAL
TEST
WITH
BIN
N
D
AS
THE
DISTRIBUTION
UNDER
AND
BIN
N
D
OR
OR
AS
THE
DISTRIBUTION
TESTS
FOR
VARIANCES
TABLE
SUMMARIZES
IMPORTANT
PROPERTIES
OF
THE
TWO
PROCEDURES
FOR
TESTING
HYPOTHESES
ON
VARIANCES
THAT
ARE
CURRENTLY
SUPPORTED
BY
G
POWER
IN
THE
ONE
GROUP
CASE
THE
NULL
HYPOTHESIS
THAT
THE
POPULATION
VARIANCE
HAS
A
SPECIFIED
VALUE
C
IS
TESTED
THE
VARIANCE
RATIO
C
IS
USED
AS
THE
EFFECT
SIZE
THE
CENTRAL
AND
NONCENTRAL
DISTRIBUTIONS
CORRESPONDING
TO
AND
RESPECTIVELY
ARE
CENTRAL
DISTRIBUTIONS
WITH
N
DFS
BECAUSE
AND
ARE
BASED
ON
THE
SAME
MEAN
TO
COMPARE
THE
VARIANCE
DISTRIBUTIONS
UNDER
BOTH
HYPOTHESES
THE
DISTRIBUTION
IS
SCALED
WITH
THE
VALUE
R
POSTULATED
FOR
THE
RATIO
C
IN
THE
ALTERNATE
HYPOTHESIS
THAT
IS
THE
NONCENTRAL
DISTRIBUTION
IS
OSTLE
MALONE
IN
THE
TWO
GROUPS
CASE
STATES
THAT
THE
VARIANCES
IN
TWO
POPULATIONS
ARE
IDENTICAL
AS
IN
THE
ONE
SAMPLE
CASE
TWO
CENTRAL
F
DISTRI
BUTIONS
ARE
COMPARED
THE
DISTRIBUTION
BEING
SCALED
BY
THE
VALUE
OF
THE
VARIANCE
RATIO
POSTULATED
IN
GENERIC
TESTS
BESIDES
THE
SPECIFIC
ROUTINES
DESCRIBED
IN
TABLES
THAT
COVER
A
CONSIDERABLE
PART
OF
THE
TESTS
COMMONLY
USED
G
POWER
PROVIDES
GENERIC
POWER
ANALYSIS
ROUTINES
THAT
MAY
BE
USED
FOR
ANY
TEST
BASED
ON
THE
T
F
Z
OR
BINOMIAL
DISTRIBUTION
IN
GENERIC
ROUTINES
THE
PARAMETERS
OF
THE
CENTRAL
AND
NONCENTRAL
DISTRIBUTIONS
ARE
SPECIFIED
DIRECTLY
TO
DEMONSTRATE
THE
USES
AND
LIMITATIONS
OF
THESE
GENERIC
ROUTINES
WE
WILL
SHOW
HOW
TO
DO
A
TWO
TAILED
POWER
ANALY
SIS
FOR
THE
ONE
SAMPLE
T
TEST
USING
THE
GENERIC
ROUTINE
THE
RESULTS
CAN
BE
COMPARED
WITH
THOSE
OF
THE
SPECIFIC
ROU
TINE
AVAILABLE
IN
G
POWER
FOR
THAT
TEST
FIRST
WE
SELECT
THE
T
TESTS
FAMILY
AND
THEN
GENERIC
T
TEST
THE
GENERIC
TEST
OPTION
IS
ALWAYS
LOCATED
AT
THE
END
OF
THE
LIST
OF
TESTS
NEXT
WE
SELECT
POST
HOC
AS
THE
TYPE
OF
POWER
ANALYSIS
WE
CHOOSE
A
TWO
TAILED
TEST
AND
AS
ERROR
PROBABILITY
WE
NOW
NEED
TO
SPECIFY
THE
NONCENTRALITY
PARAMETER
Y
AND
THE
DEGREES
OF
FREEDOM
FOR
OUR
TEST
WE
LOOK
UP
THE
DEFINITIONS
FOR
THE
ONE
SAMPLE
TEST
IN
TABLE
AND
FIND
THAT
Y
D
NÅ
AND
DF
N
ASSUMING
A
MEDIUM
EFFECT
OF
D
AND
N
WE
ARRIVE
AT
Y
AND
DF
AFTER
INSERTING
THESE
VALUES
AND
CLICKING
ON
CALCULATE
WE
OBTAIN
A
POWER
OF
THE
CRITICAL
VALUE
T
CORRESPONDS
TO
THE
SPECIFIED
IN
THIS
POST
HOC
POWER
ANALYSIS
THE
GENERIC
ROUTINE
IS
ALMOST
AS
SIMPLE
AS
THE
SPECIFIC
ROUTINE
THE
MAIN
DISADVANTAGE
OF
THE
GENERIC
ROUTINES
IS
HOWEVER
THAT
THE
DEPENDENCE
OF
THE
NONCEN
TRALITY
PARAMETER
ON
THE
SAMPLE
SIZE
IS
IMPLICIT
AS
A
CON
SEQUENCE
WE
CANNOT
PERFORM
A
PRIORI
ANALYSES
AUTOMATI
CALLY
RATHER
WE
NEED
TO
ITERATE
N
BY
HAND
UNTIL
WE
FIND
AN
APPROPRIATE
POWER
VALUE
STATISTICAL
METHODS
AND
NUMERICAL
ALGORITHMS
THE
SUBROUTINES
USED
TO
COMPUTE
THE
DISTRIBUTION
FUNC
TIONS
AND
THE
INVERSE
OF
THE
NONCENTRAL
T
F
Z
AND
BINOMIAL
DISTRIBUTIONS
ARE
BASED
ON
THE
C
VERSION
OF
THE
DCDFLIB
AVAILABLE
FROM
WWW
NETLIB
ORG
RANDOM
WHICH
WAS
SLIGHTLY
MODIFIED
FOR
OUR
PURPOSES
G
POWER
DOES
NOT
PROVIDE
THE
APPROXIMATE
POWER
ANALYSES
THAT
WERE
AVAILABLE
IN
THE
SPEED
MODE
OF
G
POWER
TWO
AR
GUMENTS
GUIDED
US
IN
SUPPORTING
EXACT
POWER
CALCULATIONS
ONLY
FIRST
FOUR
DIGIT
PRECISION
OF
POWER
CALCULATIONS
MAY
BE
MANDATORY
IN
MANY
APPLICATIONS
FOR
EXAMPLE
BOTH
COMPROMISE
POWER
ANALYSES
FOR
VERY
LARGE
SAMPLES
AND
ERROR
PROBABILITY
ADJUSTMENTS
IN
CASE
OF
MULTIPLE
TESTS
OF
SIGNIFICANCE
MAY
RESULT
IN
VERY
SMALL
VALUES
OF
OR
WESTERMANN
HAGER
SECOND
AS
A
CONSEQUENCE
OF
IMPROVED
COMPUTER
TECHNOLOGY
EXACT
CALCULATIONS
HAVE
BECOME
SO
FAST
THAT
THE
SPEED
GAIN
ASSOCIATED
WITH
AP
PROXIMATE
POWER
CALCULATIONS
IS
NOT
EVEN
NOTICEABLE
THUS
FROM
A
COMPUTATIONAL
STANDPOINT
THERE
IS
LITTLE
ADVANTAGE
TO
USING
APPROXIMATE
RATHER
THAN
EXACT
METHODS
CF
BRAD
LEY
RUSSELL
REEVE
PROGRAM
AVAILABILITY
AND
INTERNET
SUPPORT
TO
SUMMARIZE
G
POWER
IS
A
MAJOR
EXTENSION
OF
AND
IMPROVEMENT
OVER
G
POWER
IN
THAT
IT
OFFERS
EASY
TO
APPLY
POWER
ANALYSES
FOR
A
MUCH
LARGER
VARIETY
OF
COMMON
STATISTICAL
TESTS
PROGRAM
HANDLING
IS
MORE
FLEXIBLE
EASIER
TO
UNDERSTAND
AND
MORE
INTUITIVE
THAN
IN
G
POWER
REDUCING
THE
RISK
OF
ERRONEOUS
APPLICATIONS
THE
ADDED
GRAPHICAL
FEATURES
SHOULD
BE
USEFUL
FOR
BOTH
RESEARCH
AND
TEACHING
PURPOSES
THUS
G
POWER
IS
LIKELY
TO
BECOME
A
USEFUL
TOOL
FOR
EMPIRICAL
RESEARCHERS
AND
STUDENTS
OF
AP
PLIED
STATISTICS
LIKE
ITS
PREDECESSOR
G
POWER
IS
A
NONCOMMERCIAL
PROGRAM
THAT
CAN
BE
DOWNLOADED
FREE
OF
CHARGE
COPIES
OF
THE
MAC
AND
WINDOWS
VERSIONS
ARE
AVAILABLE
ONLY
AT
WWW
PSYCHO
UNI
DUESSELDORF
DE
ABTEILUNGEN
AAP
USERS
INTERESTED
IN
DISTRIBUTING
THE
PROGRAM
IN
ANOTHER
WAY
MUST
ASK
FOR
PERMISSION
FROM
THE
AUTHORS
COMMER
CIAL
DISTRIBUTION
IS
STRICTLY
FORBIDDEN
THE
G
POWER
WEB
PAGE
OFFERS
AN
EXPANDING
WEB
BASED
TUTORIAL
DESCRIBING
HOW
TO
USE
THE
PROGRAM
ALONG
WITH
EXAMPLES
USERS
WHO
LET
US
KNOW
THEIR
E
MAIL
AD
DRESSES
WILL
BE
INFORMED
OF
UPDATES
ALTHOUGH
CONSIDERABLE
EFFORT
HAS
BEEN
PUT
INTO
PROGRAM
DEVELOPMENT
AND
EVALU
ATION
THERE
IS
NO
WARRANTY
WHATSOEVER
USERS
ARE
ASKED
TO
KINDLY
REPORT
POSSIBLE
BUGS
AND
DIFFICULTIES
IN
PROGRAM
HANDLING
TO
GPOWER
FEEDBACK
UNI
DUESSELDORF
DE
FAUL
ERDFELDER
LANG
AND
BUCHNER
AUTHOR
NOTE
MANUSCRIPT
PREPARATION
WAS
SUPPORTED
BY
GRANT
SFB
PROJECT
FROM
THE
DEUTSCHE
FORSCHUNGSGEMEINSCHAFT
AND
A
GRANT
FROM
THE
STATE
OF
BADEN
WÜRTTEMBERG
GERMANY
LANDESFORSCHUNGSPROGRAMM
EVIDENZBASIERTE
STRESSPRÄVENTION
CORRESPONDENCE
CONCERNING
THIS
ARTICLE
SHOULD
BE
ADDRESSED
TO
F
FAUL
INSTITUT
FÜR
PSYCHOLOGIE
CHRISTIAN
ALBRECHTS
UNIVERSITÄT
OLSHAUSENSTR
D
KIEL
GERMANY
OR
TO
E
ERDFELDER
LEHRSTUHL
FÜR
PSYCHOLOGIE
III
UNIVERSITÄT
MANNHEIM
SCHLOSS
EHRENHOF
OST
D
MANNHEIM
GERMANY
E
MAIL
FFAUL
PSYCHOLOGIE
UNI
KIEL
DE
OR
ERDFELDER
PSYCHOLOGIE
UNI
MANNHEIM
DE
NOTES
THE
OBSERVED
POWER
IS
REPORTED
IN
MANY
FREQUENTLY
USED
COMPUTER
PROGRAMS
E
G
THE
MANOVA
PROCEDURE
OF
SPSS
WE
RECOMMEND
CHECKING
THE
DEGREES
OF
FREEDOM
REPORTED
BY
G
POWER
BY
COMPARING
THEM
FOR
EXAMPLE
WITH
THOSE
REPORTED
BY
THE
PROGRAM
USED
TO
ANALYZE
THE
SAMPLE
DATA
IF
THE
DEGREES
OF
FREEDOM
DO
NOT
MATCH
THE
INPUT
PROVIDED
TO
G
POWER
IS
INCORRECT
AND
THE
POWER
CALCULATIONS
DO
NOT
APPLY
PLOTS
OF
THE
CENTRAL
AND
NONCENTRAL
DISTRIBUTIONS
ARE
SHOWN
ONLY
FOR
TESTS
BASED
ON
THE
T
F
Z
OR
BINOMIAL
DISTRIBUTION
NO
PLOTS
ARE
SHOWN
FOR
TESTS
THAT
INVOLVE
AN
ENUMERATION
PROCEDURE
E
G
THE
MCNE
MAR
TEST
WE
THANK
DAVE
KENNY
FOR
MAKING
US
AWARE
OF
THE
FACT
THAT
THE
T
TEST
CORRELATION
POWER
ANALYSES
OF
G
POWER
ARE
CORRECT
ONLY
IN
THE
POINT
BISERIAL
CASE
I
E
FOR
CORRELATIONS
BETWEEN
A
BINARY
VARIABLE
AND
A
CONTINUOUS
VARIABLE
THE
LATTER
BEING
NORMALLY
DISTRIBUTED
FOR
EACH
VALUE
OF
THE
BINARY
VARIABLE
FOR
CORRELATIONS
BETWEEN
TWO
CONTINU
OUS
VARIABLES
FOLLOWING
A
BIVARIATE
NORMAL
DISTRIBUTION
THE
T
TEST
COR
RELATION
PROCEDURE
OF
G
POWER
OVERESTIMATES
POWER
FOR
THIS
REASON
G
POWER
OFFERS
SEPARATE
POWER
ANALYSES
FOR
POINT
BISERIAL
CORRELATIONS
IN
THE
T
FAMILY
OF
DISTRIBUTIONS
AND
CORRELATIONS
BETWEEN
TWO
NORMALLY
DISTRIBUTED
VARIABLES
IN
THE
EXACT
DISTRIBUTION
FAMILY
HOWEVER
POWER
VALUES
USUALLY
DIFFER
ONLY
SLIGHTLY
BETWEEN
PROCEDURES
TO
ILLUSTRATE
AS
SUME
WE
ARE
INTERESTED
IN
THE
POWER
OF
A
TWO
TAILED
TEST
OF
FOR
CONTINUOUSLY
DISTRIBUTED
MEASURES
DERIVED
FROM
TWO
IMPLICIT
ASSOCIATION
TESTS
IATS
DIFFERING
IN
CONTENT
ASSUME
FURTHER
THAT
DUE
TO
METHOD
SPECIFIC
VARIANCE
IN
BOTH
VERSIONS
OF
THE
IAT
THE
TRUE
PEARSON
CORRELATION
IS
ACTUALLY
EFFECT
SIZE
GIVEN
AND
N
SEE
BACK
SCHMUKLE
EGLOFF
P
AN
EXACT
POST
HOC
POWER
ANALYSIS
FOR
CORRELATIONS
DIFFERENCES
FROM
CONSTANT
ONE
SAMPLE
CASE
REVEALS
THE
CORRECT
POWER
VALUE
OF
CHOOSING
THE
INCORRECT
CORRELA
TION
POINT
BISERIAL
MODEL
PROCEDURE
FROM
THE
T
TEST
FAMILY
WOULD
RESULT
IN
MANUSCRIPT
RECEIVED
DECEMBER
ACCEPTED
FOR
PUBLICATION
JANUARY
RICH
FEATURE
HIERARCHIES
FOR
ACCURATE
OBJECT
DETECTION
AND
SEMANTIC
SEGMENTATION
ROSS
JEFF
TREVOR
JITENDRA
UC
BERKELEY
AND
ICSI
RBG
JDONAHUE
TREVOR
MALIK
EECS
BERKELEY
EDU
ABSTRACT
R
CNN
REGIONS
WITH
CNN
FEATURES
WARPED
REGION
AEROPLANE
NO
OBJECT
DETECTION
PERFORMANCE
AS
MEASURED
ON
THE
PERSON
YES
CANONICAL
PASCAL
VOC
DATASET
HAS
PLATEAUED
IN
THE
LAST
CNN
FEW
YEARS
THE
BEST
PERFORMING
METHODS
ARE
COMPLEX
EN
TVMONITOR
NO
SEMBLE
SYSTEMS
THAT
TYPICALLY
COMBINE
MULTIPLE
LOW
LEVEL
INPUT
EXTRACT
REGION
COMPUTE
CLASSIFY
IMAGE
FEATURES
WITH
HIGH
LEVEL
CONTEXT
IN
THIS
PAPER
WE
IMAGE
PROPOSALS
CNN
FEATURES
REGIONS
PROPOSE
A
SIMPLE
AND
SCALABLE
DETECTION
ALGORITHM
THAT
IM
FIGURE
OBJECT
DETECTION
SYSTEM
OVERVIEW
OUR
SYSTEM
PROVES
MEAN
AVERAGE
PRECISION
MAP
BY
MORE
THAN
TAKES
AN
INPUT
IMAGE
EXTRACTS
AROUND
BOTTOM
UP
REGION
RELATIVE
TO
THE
PREVIOUS
BEST
RESULT
ON
VOC
ACHIEVING
PROPOSALS
COMPUTES
FEATURES
FOR
EACH
PROPOSAL
USING
A
LARGE
A
MAP
OF
OUR
APPROACH
COMBINES
TWO
KEY
INSIGHTS
CONVOLUTIONAL
NEURAL
NETWORK
CNN
AND
THEN
CLASSIFIES
EACH
ONE
CAN
APPLY
HIGH
CAPACITY
CONVOLUTIONAL
NEURAL
NET
REGION
USING
CLASS
SPECIFIC
LINEAR
SVMS
R
CNN
ACHIEVES
A
MEAN
WORKS
CNNS
TO
BOTTOM
UP
REGION
PROPOSALS
IN
ORDER
TO
AVERAGE
PRECISION
MAP
OF
ON
PASCAL
VOC
FOR
LOCALIZE
AND
SEGMENT
OBJECTS
AND
WHEN
LABELED
TRAINING
COMPARISON
REPORTS
MAP
USING
THE
SAME
REGION
PRO
POSALS
BUT
WITH
A
SPATIAL
PYRAMID
AND
BAG
OF
VISUAL
WORDS
AP
DATA
IS
SCARCE
SUPERVISED
PRE
TRAINING
FOR
AN
AUXILIARY
TASK
PROACH
THE
POPULAR
DEFORMABLE
PART
MODELS
PERFORM
AT
FOLLOWED
BY
DOMAIN
SPECIFIC
FINE
TUNING
YIELDS
A
SIGNIFI
CANT
PERFORMANCE
BOOST
SINCE
WE
COMBINE
REGION
PROPOS
INSPIRED
HIERARCHICAL
AND
SHIFT
INVARIANT
MODEL
FOR
PATTERN
ALS
WITH
CNNS
WE
CALL
OUR
METHOD
R
CNN
REGIONS
WITH
RECOGNITION
WAS
AN
EARLY
ATTEMPT
AT
JUST
SUCH
A
PROCESS
CNN
FEATURES
WE
ALSO
PRESENT
EXPERIMENTS
THAT
PROVIDE
THE
NEOCOGNITRON
HOWEVER
LACKED
A
SUPERVISED
TRAINING
AL
INSIGHT
INTO
WHAT
THE
NETWORK
LEARNS
REVEALING
A
RICH
HIER
GORITHM
LECUN
ET
AL
PROVIDED
THE
MISSING
ALGORITHM
ARCHY
OF
IMAGE
FEATURES
SOURCE
CODE
FOR
THE
COMPLETE
SYS
BY
SHOWING
THAT
STOCHASTIC
GRADIENT
DESCENT
VIA
BACKPROP
TEM
IS
AVAILABLE
AT
HTTP
WWW
CS
BERKELEY
EDU
AGATION
CAN
TRAIN
CONVOLUTIONAL
NEURAL
NETWORKS
CNNS
A
RBG
RCNN
CLASS
OF
MODELS
THAT
EXTEND
THE
NEOCOGNITRON
CNNS
SAW
HEAVY
USE
IN
THE
E
G
BUT
THEN
INTRODUCTION
FELL
OUT
OF
FASHION
PARTICULARLY
IN
COMPUTER
VISION
WITH
THE
FEATURES
MATTER
THE
LAST
DECADE
OF
PROGRESS
ON
VARIOUS
RISE
OF
SUPPORT
VECTOR
MACHINES
IN
KRIZHEVSKY
ET
AL
VISUAL
RECOGNITION
TASKS
HAS
BEEN
BASED
CONSIDERABLY
ON
THE
REKINDLED
INTEREST
IN
CNNS
BY
SHOWING
SUBSTANTIALLY
USE
OF
SIFT
AND
HOG
BUT
IF
WE
LOOK
AT
PERFOR
HIGHER
IMAGE
CLASSIFICATION
ACCURACY
ON
THE
IMAGENET
LARGE
MANCE
ON
THE
CANONICAL
VISUAL
RECOGNITION
TASK
PASCAL
SCALE
VISUAL
RECOGNITION
CHALLENGE
ILSVRC
VOC
OBJECT
DETECTION
IT
IS
GENERALLY
ACKNOWLEDGED
THEIR
SUCCESS
RESULTED
FROM
TRAINING
A
LARGE
CNN
ON
THAT
PROGRESS
HAS
BEEN
SLOW
DURING
WITH
SMALL
MILLION
LABELED
IMAGES
TOGETHER
WITH
A
FEW
TWISTS
ON
LE
GAINS
OBTAINED
BY
BUILDING
ENSEMBLE
SYSTEMS
AND
EMPLOY
CUN
CNN
E
G
MAX
X
RECTIFYING
NON
LINEARITIES
AND
ING
MINOR
VARIANTS
OF
SUCCESSFUL
METHODS
DROPOUT
REGULARIZATION
SIFT
AND
HOG
ARE
BLOCKWISE
ORIENTATION
HISTOGRAMS
THE
SIGNIFICANCE
OF
THE
IMAGENET
RESULT
WAS
VIGOROUSLY
A
REPRESENTATION
WE
COULD
ASSOCIATE
ROUGHLY
WITH
COMPLEX
DEBATED
DURING
THE
ILSVRC
WORKSHOP
THE
CENTRAL
CELLS
IN
THE
FIRST
CORTICAL
AREA
IN
THE
PRIMATE
VISUAL
PATH
ISSUE
CAN
BE
DISTILLED
TO
THE
FOLLOWING
TO
WHAT
EXTENT
DO
WAY
BUT
WE
ALSO
KNOW
THAT
RECOGNITION
OCCURS
SEVERAL
THE
CNN
CLASSIFICATION
RESULTS
ON
IMAGENET
GENERALIZE
TO
STAGES
DOWNSTREAM
WHICH
SUGGESTS
THAT
THERE
MIGHT
BE
HIER
OBJECT
DETECTION
RESULTS
ON
THE
PASCAL
VOC
CHALLENGE
ARCHICAL
MULTI
STAGE
PROCESSES
FOR
COMPUTING
FEATURES
THAT
WE
ANSWER
THIS
QUESTION
DECISIVELY
BY
BRIDGING
THE
ARE
EVEN
MORE
INFORMATIVE
FOR
VISUAL
RECOGNITION
CHASM
BETWEEN
IMAGE
CLASSIFICATION
AND
OBJECT
DETECTION
FUKUSHIMA
NEOCOGNITRON
A
BIOLOGICALLY
THIS
PAPER
IS
THE
FIRST
TO
SHOW
THAT
A
CNN
CAN
LEAD
TO
DRA
MATICALLY
HIGHER
OBJECT
DETECTION
PERFORMANCE
ON
PASCAL
OUR
SYSTEM
IS
ALSO
QUITE
EFFICIENT
THE
ONLY
CLASS
SPECIFIC
VOC
AS
COMPARED
TO
SYSTEMS
BASED
ON
SIMPLER
HOG
LIKE
COMPUTATIONS
ARE
A
REASONABLY
SMALL
MATRIX
VECTOR
PRODUCT
FEATURES
ACHIEVING
THIS
RESULT
REQUIRED
SOLVING
TWO
PROB
AND
GREEDY
NON
MAXIMUM
SUPPRESSION
THIS
COMPUTATIONAL
LEMS
LOCALIZING
OBJECTS
WITH
A
DEEP
NETWORK
AND
TRAINING
A
PROPERTY
FOLLOWS
FROM
FEATURES
THAT
ARE
SHARED
ACROSS
ALL
CAT
HIGH
CAPACITY
MODEL
WITH
ONLY
A
SMALL
QUANTITY
OF
ANNOTATED
EGORIES
AND
THAT
ARE
ALSO
TWO
ORDERS
OF
MAGNITUDE
LOWER
DETECTION
DATA
DIMENSIONAL
THAN
PREVIOUSLY
USED
REGION
FEATURES
CF
UNLIKE
IMAGE
CLASSIFICATION
DETECTION
REQUIRES
LOCALIZ
ONE
ADVANTAGE
OF
HOG
LIKE
FEATURES
IS
THEIR
SIMPLIC
ING
LIKELY
MANY
OBJECTS
WITHIN
AN
IMAGE
ONE
APPROACH
ITY
IT
EASIER
TO
UNDERSTAND
THE
INFORMATION
THEY
CARRY
AL
FRAMES
LOCALIZATION
AS
A
REGRESSION
PROBLEM
HOWEVER
WORK
THOUGH
SHOWS
THAT
OUR
INTUITION
CAN
FAIL
US
CAN
WE
FROM
SZEGEDY
ET
AL
CONCURRENT
WITH
OUR
OWN
INDI
GAIN
INSIGHT
INTO
THE
REPRESENTATION
LEARNED
BY
THE
CNN
CATES
THAT
THIS
STRATEGY
MAY
NOT
FARE
WELL
IN
PRACTICE
THEY
PERHAPS
THE
DENSELY
CONNECTED
LAYERS
WITH
MORE
THAN
REPORT
A
MAP
OF
ON
VOC
COMPARED
TO
THE
MILLION
PARAMETERS
ARE
THE
KEY
THEY
ARE
NOT
WE
ACHIEVED
BY
OUR
METHOD
AN
ALTERNATIVE
IS
TO
BUILD
A
LOBOTOMIZED
THE
CNN
AND
FOUND
THAT
A
SURPRISINGLY
LARGE
SLIDING
WINDOW
DETECTOR
CNNS
HAVE
BEEN
USED
IN
THIS
WAY
PROPORTION
OF
ITS
PARAMETERS
CAN
BE
REMOVED
WITH
FOR
AT
LEAST
TWO
DECADES
TYPICALLY
ON
CONSTRAINED
OBJECT
CAT
ONLY
A
MODERATE
DROP
IN
DETECTION
ACCURACY
INSTEAD
BY
EGORIES
SUCH
AS
FACES
AND
PEDESTRIANS
IN
ORDER
PROBING
UNITS
IN
THE
NETWORK
WE
SEE
THAT
THE
CONVOLUTIONAL
TO
MAINTAIN
HIGH
SPATIAL
RESOLUTION
THESE
CNNS
TYPICALLY
LAYERS
LEARN
A
DIVERSE
SET
OF
RICH
FEATURES
FIGURE
ONLY
HAVE
TWO
CONVOLUTIONAL
AND
POOLING
LAYERS
WE
ALSO
UNDERSTANDING
THE
FAILURE
MODES
OF
OUR
APPROACH
IS
ALSO
CONSIDERED
ADOPTING
A
SLIDING
WINDOW
APPROACH
HOWEVER
CRITICAL
FOR
IMPROVING
IT
AND
SO
WE
REPORT
RESULTS
FROM
THE
UNITS
HIGH
UP
IN
OUR
NETWORK
WHICH
HAS
FIVE
CONVOLUTIONAL
DETECTION
ANALYSIS
TOOL
OF
HOIEM
ET
AL
AS
AN
IMMEDI
LAYERS
HAVE
VERY
LARGE
RECEPTIVE
FIELDS
PIXELS
ATE
CONSEQUENCE
OF
THIS
ANALYSIS
WE
DEMONSTRATE
THAT
A
SIM
AND
STRIDES
PIXELS
IN
THE
INPUT
IMAGE
WHICH
MAKES
PLE
BOUNDING
BOX
REGRESSION
METHOD
SIGNIFICANTLY
REDUCES
PRECISE
LOCALIZATION
WITHIN
THE
SLIDING
WINDOW
PARADIGM
AN
MISLOCALIZATIONS
WHICH
ARE
THE
DOMINANT
ERROR
MODE
OPEN
TECHNICAL
CHALLENGE
BEFORE
DEVELOPING
TECHNICAL
DETAILS
WE
NOTE
THAT
BE
INSTEAD
WE
SOLVE
THE
CNN
LOCALIZATION
PROBLEM
BY
OP
CAUSE
R
CNN
OPERATES
ON
REGIONS
IT
IS
NATURAL
TO
EXTEND
IT
ERATING
WITHIN
THE
RECOGNITION
USING
REGIONS
PARADIGM
AS
TO
THE
TASK
OF
SEMANTIC
SEGMENTATION
WITH
MINOR
MODIFI
ARGUED
FOR
BY
GU
ET
AL
IN
AT
TEST
TIME
OUR
METHOD
CATIONS
WE
ALSO
ACHIEVE
STATE
OF
THE
ART
RESULTS
ON
THE
PAS
GENERATES
AROUND
CATEGORY
INDEPENDENT
REGION
PRO
CAL
VOC
SEGMENTATION
TASK
WITH
AN
AVERAGE
SEGMENTATION
POSALS
FOR
THE
INPUT
IMAGE
EXTRACTS
A
FIXED
LENGTH
FEATURE
ACCURACY
OF
ON
THE
VOC
TEST
SET
VECTOR
FROM
EACH
PROPOSAL
USING
A
CNN
AND
THEN
CLASSI
FIES
EACH
REGION
WITH
CATEGORY
SPECIFIC
LINEAR
SVMS
WE
OBJECT
DETECTION
WITH
R
CNN
USE
A
SIMPLE
TECHNIQUE
AFFINE
IMAGE
WARPING
TO
COMPUTE
OUR
OBJECT
DETECTION
SYSTEM
CONSISTS
OF
THREE
MODULES
A
FIXED
SIZE
CNN
INPUT
FROM
EACH
REGION
PROPOSAL
REGARD
THE
FIRST
GENERATES
CATEGORY
INDEPENDENT
REGION
PROPOSALS
LESS
OF
THE
REGION
SHAPE
FIGURE
PRESENTS
AN
OVERVIEW
OF
THESE
PROPOSALS
DEFINE
THE
SET
OF
CANDIDATE
DETECTIONS
AVAIL
OUR
METHOD
AND
HIGHLIGHTS
SOME
OF
OUR
RESULTS
SINCE
OUR
ABLE
TO
OUR
DETECTOR
THE
SECOND
MODULE
IS
A
LARGE
CONVO
SYSTEM
COMBINES
REGION
PROPOSALS
WITH
CNNS
WE
DUB
THE
LUTIONAL
NEURAL
NETWORK
THAT
EXTRACTS
A
FIXED
LENGTH
FEATURE
METHOD
R
CNN
REGIONS
WITH
CNN
FEATURES
VECTOR
FROM
EACH
REGION
THE
THIRD
MODULE
IS
A
SET
OF
CLASS
A
SECOND
CHALLENGE
FACED
IN
DETECTION
IS
THAT
LABELED
SPECIFIC
LINEAR
SVMS
IN
THIS
SECTION
WE
PRESENT
OUR
DESIGN
DATA
IS
SCARCE
AND
THE
AMOUNT
CURRENTLY
AVAILABLE
IS
INSUFFI
DECISIONS
FOR
EACH
MODULE
DESCRIBE
THEIR
TEST
TIME
USAGE
CIENT
FOR
TRAINING
A
LARGE
CNN
THE
CONVENTIONAL
SOLUTION
TO
DETAIL
HOW
THEIR
PARAMETERS
ARE
LEARNED
AND
SHOW
RESULTS
ON
THIS
PROBLEM
IS
TO
USE
UNSUPERVISED
PRE
TRAINING
FOLLOWED
PASCAL
VOC
BY
SUPERVISED
FINE
TUNING
E
G
THE
SECOND
MAJOR
CONTRIBUTION
OF
THIS
PAPER
IS
TO
SHOW
THAT
SUPERVISED
PRE
MODULE
DESIGN
TRAINING
ON
A
LARGE
AUXILIARY
DATASET
ILSVRC
FOLLOWED
BY
REGION
PROPOSALS
A
VARIETY
OF
RECENT
PAPERS
OFFER
METH
DOMAIN
SPECIFIC
FINE
TUNING
ON
A
SMALL
DATASET
PASCAL
ODS
FOR
GENERATING
CATEGORY
INDEPENDENT
REGION
PROPOSALS
IS
AN
EFFECTIVE
PARADIGM
FOR
LEARNING
HIGH
CAPACITY
CNNS
EXAMPLES
INCLUDE
OBJECTNESS
SELECTIVE
SEARCH
WHEN
DATA
IS
SCARCE
IN
OUR
EXPERIMENTS
FINE
TUNING
FOR
DE
CATEGORY
INDEPENDENT
OBJECT
PROPOSALS
CONSTRAINED
TECTION
IMPROVES
MAP
PERFORMANCE
BY
PERCENTAGE
POINTS
PARAMETRIC
MIN
CUTS
CPMC
MULTI
SCALE
COMBINATORIAL
AFTER
FINE
TUNING
OUR
SYSTEM
ACHIEVES
A
MAP
OF
ON
GROUPING
AND
CIRES
AN
ET
AL
WHO
DETECT
MITOTIC
CELLS
VOC
COMPARED
TO
FOR
THE
HIGHLY
TUNED
HOG
BY
APPLYING
A
CNN
TO
REGULARLY
SPACED
SQUARE
CROPS
WHICH
BASED
DEFORMABLE
PART
MODEL
DPM
ARE
A
SPECIAL
CASE
OF
REGION
PROPOSALS
WHILE
R
CNN
IS
AG
A
TECH
REPORT
DESCRIBING
R
CNN
FIRST
APPEARED
AT
HTTP
ARXIV
NOSTIC
TO
THE
PARTICULAR
REGION
PROPOSAL
METHOD
WE
USE
SE
ORG
ABS
IN
NOV
LECTIVE
SEARCH
TO
ENABLE
A
CONTROLLED
COMPARISON
WITH
PRIOR
ONLY
CLASS
SPECIFIC
COMPUTATIONS
ARE
DOT
PRODUCTS
BETWEEN
FEATURES
AND
SVM
WEIGHTS
AND
NON
MAXIMUM
SUPPRESSION
IN
PRACTICE
ALL
DOT
PRODUCTS
FOR
AN
IMAGE
ARE
BATCHED
INTO
A
SINGLE
MATRIX
MATRIX
PRODUCT
THE
FEATURE
MATRIX
IS
TYPI
AEROPLANE
BICYCLE
BIRD
CAR
CALLY
AND
THE
SVM
WEIGHT
MATRIX
IS
N
FIGURE
WARPED
TRAINING
SAMPLES
FROM
VOC
TRAIN
WHERE
N
IS
THE
NUMBER
OF
CLASSES
THIS
ANALYSIS
SHOWS
THAT
R
CNN
CAN
SCALE
TO
THOUSANDS
DETECTION
WORK
E
G
OF
OBJECT
CLASSES
WITHOUT
RESORTING
TO
APPROXIMATE
TECH
NIQUES
SUCH
AS
HASHING
EVEN
IF
THERE
WERE
CLASSES
FEATURE
EXTRACTION
WE
EXTRACT
A
DIMENSIONAL
FEA
THE
RESULTING
MATRIX
MULTIPLICATION
TAKES
ONLY
SECONDS
ON
TURE
VECTOR
FROM
EACH
REGION
PROPOSAL
USING
THE
CAFFE
A
MODERN
MULTI
CORE
CPU
THIS
EFFICIENCY
IS
NOT
MERELY
THE
IMPLEMENTATION
OF
THE
CNN
DESCRIBED
BY
KRIZHEVSKY
ET
RESULT
OF
USING
REGION
PROPOSALS
AND
SHARED
FEATURES
THE
AL
FEATURES
ARE
COMPUTED
BY
FORWARD
PROPAGATING
A
UVA
SYSTEM
DUE
TO
ITS
HIGH
DIMENSIONAL
FEATURES
WOULD
MEAN
SUBTRACTED
RGB
IMAGE
THROUGH
FIVE
CON
BE
TWO
ORDERS
OF
MAGNITUDE
SLOWER
WHILE
REQUIRING
VOLUTIONAL
LAYERS
AND
TWO
FULLY
CONNECTED
LAYERS
WE
REFER
OF
MEMORY
JUST
TO
STORE
LINEAR
PREDICTORS
COMPARED
TO
READERS
TO
FOR
MORE
NETWORK
ARCHITECTURE
DETAILS
JUST
FOR
OUR
LOWER
DIMENSIONAL
FEATURES
IN
ORDER
TO
COMPUTE
FEATURES
FOR
A
REGION
PROPOSAL
WE
IT
IS
ALSO
INTERESTING
TO
CONTRAST
R
CNN
WITH
THE
RECENT
MUST
FIRST
CONVERT
THE
IMAGE
DATA
IN
THAT
REGION
INTO
A
FORM
WORK
FROM
DEAN
ET
AL
ON
SCALABLE
DETECTION
USING
DPMS
THAT
IS
COMPATIBLE
WITH
THE
CNN
ITS
ARCHITECTURE
REQUIRES
AND
HASHING
THEY
REPORT
A
MAP
OF
AROUND
ON
VOC
INPUTS
OF
A
FIXED
PIXEL
SIZE
OF
THE
MANY
POSSI
AT
A
RUN
TIME
OF
MINUTES
PER
IMAGE
WHEN
INTRODUCING
BLE
TRANSFORMATIONS
OF
OUR
ARBITRARY
SHAPED
REGIONS
WE
OPT
DISTRACTOR
CLASSES
WITH
OUR
APPROACH
DETECTORS
CAN
FOR
THE
SIMPLEST
REGARDLESS
OF
THE
SIZE
OR
ASPECT
RATIO
OF
THE
RUN
IN
ABOUT
A
MINUTE
ON
A
CPU
AND
BECAUSE
NO
APPROXI
CANDIDATE
REGION
WE
WARP
ALL
PIXELS
IN
A
TIGHT
BOUNDING
BOX
MATIONS
ARE
MADE
MAP
WOULD
REMAIN
AT
SECTION
AROUND
IT
TO
THE
REQUIRED
SIZE
PRIOR
TO
WARPING
WE
DILATE
THE
TIGHT
BOUNDING
BOX
SO
THAT
AT
THE
WARPED
SIZE
THERE
ARE
EX
TRAINING
ACTLY
P
PIXELS
OF
WARPED
IMAGE
CONTEXT
AROUND
THE
ORIGINAL
BOX
WE
USE
P
FIGURE
SHOWS
A
RANDOM
SAMPLING
OF
SUPERVISED
PRE
TRAINING
WE
DISCRIMINATIVELY
PRE
TRAINED
WARPED
TRAINING
REGIONS
THE
SUPPLEMENTARY
MATERIAL
DIS
THE
CNN
ON
A
LARGE
AUXILIARY
DATASET
ILSVRC
WITH
CUSSES
ALTERNATIVES
TO
WARPING
IMAGE
LEVEL
ANNOTATIONS
I
E
NO
BOUNDING
BOX
LABELS
PRE
TRAINING
WAS
PERFORMED
USING
THE
OPEN
SOURCE
CAFFE
CNN
TEST
TIME
DETECTION
LIBRARY
IN
BRIEF
OUR
CNN
NEARLY
MATCHES
THE
PERFOR
AT
TEST
TIME
WE
RUN
SELECTIVE
SEARCH
ON
THE
TEST
IMAGE
MANCE
OF
KRIZHEVSKY
ET
AL
OBTAINING
A
TOP
ERROR
RATE
TO
EXTRACT
AROUND
REGION
PROPOSALS
WE
USE
SELECTIVE
PERCENTAGE
POINTS
HIGHER
ON
THE
ILSVRC
VALIDA
SEARCH
FAST
MODE
IN
ALL
EXPERIMENTS
WE
WARP
EACH
TION
SET
THIS
DISCREPANCY
IS
DUE
TO
SIMPLIFICATIONS
IN
THE
PROPOSAL
AND
FORWARD
PROPAGATE
IT
THROUGH
THE
CNN
IN
OR
TRAINING
PROCESS
DER
TO
READ
OFF
FEATURES
FROM
THE
DESIRED
LAYER
THEN
FOR
EACH
CLASS
WE
SCORE
EACH
EXTRACTED
FEATURE
VECTOR
USING
THE
DOMAIN
SPECIFIC
FINE
TUNING
TO
ADAPT
OUR
CNN
TO
THE
SVM
TRAINED
FOR
THAT
CLASS
GIVEN
ALL
SCORED
REGIONS
IN
AN
NEW
TASK
DETECTION
AND
THE
NEW
DOMAIN
WARPED
VOC
IMAGE
WE
APPLY
A
GREEDY
NON
MAXIMUM
SUPPRESSION
FOR
WINDOWS
WE
CONTINUE
STOCHASTIC
GRADIENT
DESCENT
SGD
EACH
CLASS
INDEPENDENTLY
THAT
REJECTS
A
REGION
IF
IT
HAS
AN
TRAINING
OF
THE
CNN
PARAMETERS
USING
ONLY
WARPED
RE
INTERSECTION
OVER
UNION
IOU
OVERLAP
WITH
A
HIGHER
SCORING
GION
PROPOSALS
FROM
VOC
ASIDE
FROM
REPLACING
THE
CNN
SELECTED
REGION
LARGER
THAN
A
LEARNED
THRESHOLD
IMAGENET
SPECIFIC
WAY
CLASSIFICATION
LAYER
WITH
A
RAN
DOMLY
INITIALIZED
WAY
CLASSIFICATION
LAYER
FOR
THE
RUN
TIME
ANALYSIS
TWO
PROPERTIES
MAKE
DETECTION
EFFI
VOC
CLASSES
PLUS
BACKGROUND
THE
CNN
ARCHITECTURE
IS
UN
CIENT
FIRST
ALL
CNN
PARAMETERS
ARE
SHARED
ACROSS
ALL
CATE
CHANGED
WE
TREAT
ALL
REGION
PROPOSALS
WITH
IOU
OVER
GORIES
SECOND
THE
FEATURE
VECTORS
COMPUTED
BY
THE
CNN
LAP
WITH
A
GROUND
TRUTH
BOX
AS
POSITIVES
FOR
THAT
BOX
CLASS
ARE
LOW
DIMENSIONAL
WHEN
COMPARED
TO
OTHER
COMMON
AP
AND
THE
REST
AS
NEGATIVES
WE
START
SGD
AT
A
LEARNING
RATE
PROACHES
SUCH
AS
SPATIAL
PYRAMIDS
WITH
BAG
OF
VISUAL
WORD
OF
OF
THE
INITIAL
PRE
TRAINING
RATE
WHICH
AL
ENCODINGS
THE
FEATURES
USED
IN
THE
UVA
DETECTION
SYSTEM
LOWS
FINE
TUNING
TO
MAKE
PROGRESS
WHILE
NOT
CLOBBERING
THE
FOR
EXAMPLE
ARE
TWO
ORDERS
OF
MAGNITUDE
LARGER
THAN
INITIALIZATION
IN
EACH
SGD
ITERATION
WE
UNIFORMLY
SAMPLE
OURS
VS
DIMENSIONAL
POSITIVE
WINDOWS
OVER
ALL
CLASSES
AND
BACKGROUND
THE
RESULT
OF
SUCH
SHARING
IS
THAT
THE
TIME
SPENT
COM
WINDOWS
TO
CONSTRUCT
A
MINI
BATCH
OF
SIZE
WE
BIAS
PUTING
REGION
PROPOSALS
AND
FEATURES
IMAGE
ON
A
GPU
THE
SAMPLING
TOWARDS
POSITIVE
WINDOWS
BECAUSE
THEY
ARE
EX
OR
IMAGE
ON
A
CPU
IS
AMORTIZED
OVER
ALL
CLASSES
THE
TREMELY
RARE
COMPARED
TO
BACKGROUND
VOC
TEST
AERO
BIKE
BIRD
BOAT
BOTTLE
BUS
CAR
CAT
CHAIR
COW
TABLE
DOG
HORSE
MBIKE
PERSON
PLANT
SHEEP
SOFA
TRAIN
TV
MAP
DPM
UVA
REGIONLETS
SEGDPM
R
CNN
R
CNN
BB
TABLE
DETECTION
AVERAGE
PRECISION
ON
VOC
TEST
R
CNN
IS
MOST
DIRECTLY
COMPARABLE
TO
UVA
AND
REGIONLETS
SINCE
ALL
METHODS
USE
SELECTIVE
SEARCH
REGION
PROPOSALS
BOUNDING
BOX
REGRESSION
BB
IS
DESCRIBED
IN
SECTION
AT
PUBLICATION
TIME
SEGDPM
WAS
THE
TOP
PERFORMER
ON
THE
PASCAL
VOC
LEADERBOARD
DPM
AND
SEGDPM
USE
CONTEXT
RESCORING
NOT
USED
BY
THE
OTHER
METHODS
OBJECT
CATEGORY
CLASSIFIERS
CONSIDER
TRAINING
A
BINARY
GION
PROPOSAL
ALGORITHM
TO
CLASSIFY
REGIONS
THEIR
METHOD
CLASSIFIER
TO
DETECT
CARS
IT
CLEAR
THAT
AN
IMAGE
REGION
BUILDS
A
FOUR
LEVEL
SPATIAL
PYRAMID
AND
POPULATES
IT
WITH
TIGHTLY
ENCLOSING
A
CAR
SHOULD
BE
A
POSITIVE
EXAMPLE
SIMI
DENSELY
SAMPLED
SIFT
EXTENDED
OPPONENTSIFT
AND
RGB
LARLY
IT
CLEAR
THAT
A
BACKGROUND
REGION
WHICH
HAS
NOTHING
SIFT
DESCRIPTORS
EACH
VECTOR
QUANTIZED
WITH
WORD
TO
DO
WITH
CARS
SHOULD
BE
A
NEGATIVE
EXAMPLE
LESS
CLEAR
CODEBOOKS
CLASSIFICATION
IS
PERFORMED
WITH
A
HISTOGRAM
IS
HOW
TO
LABEL
A
REGION
THAT
PARTIALLY
OVERLAPS
A
CAR
WE
RE
INTERSECTION
KERNEL
SVM
COMPARED
TO
THEIR
MULTI
FEATURE
SOLVE
THIS
ISSUE
WITH
AN
IOU
OVERLAP
THRESHOLD
BELOW
WHICH
NON
LINEAR
KERNEL
SVM
APPROACH
WE
ACHIEVE
A
LARGE
IM
REGIONS
ARE
DEFINED
AS
NEGATIVES
THE
OVERLAP
THRESHOLD
PROVEMENT
IN
MAP
FROM
TO
MAP
WHILE
ALSO
WAS
SELECTED
BY
A
GRID
SEARCH
OVER
ON
A
BEING
MUCH
FASTER
SECTION
OUR
METHOD
ACHIEVES
SIM
VALIDATION
SET
WE
FOUND
THAT
SELECTING
THIS
THRESHOLD
CARE
ILAR
PERFORMANCE
MAP
ON
VOC
TEST
FULLY
IS
IMPORTANT
SETTING
IT
TO
AS
IN
DECREASED
MAP
BY
POINTS
SIMILARLY
SETTING
IT
TO
DECREASED
MAP
VISUALIZATION
ABLATION
AND
MODES
OF
ERROR
BY
POINTS
POSITIVE
EXAMPLES
ARE
DEFINED
SIMPLY
TO
BE
THE
GROUND
TRUTH
BOUNDING
BOXES
FOR
EACH
CLASS
VISUALIZING
LEARNED
FEATURES
ONCE
FEATURES
ARE
EXTRACTED
AND
TRAINING
LABELS
ARE
AP
FIRST
LAYER
FILTERS
CAN
BE
VISUALIZED
DIRECTLY
AND
ARE
EASY
PLIED
WE
OPTIMIZE
ONE
LINEAR
SVM
PER
CLASS
SINCE
THE
TO
UNDERSTAND
THEY
CAPTURE
ORIENTED
EDGES
AND
OPPO
TRAINING
DATA
IS
TOO
LARGE
TO
FIT
IN
MEMORY
WE
ADOPT
THE
NENT
COLORS
UNDERSTANDING
THE
SUBSEQUENT
LAYERS
IS
MORE
STANDARD
HARD
NEGATIVE
MINING
METHOD
HARD
NEG
CHALLENGING
ZEILER
AND
FERGUS
PRESENT
A
VISUALLY
ATTRAC
ATIVE
MINING
CONVERGES
QUICKLY
AND
IN
PRACTICE
MAP
STOPS
TIVE
DECONVOLUTIONAL
APPROACH
IN
WE
PROPOSE
A
SIMPLE
INCREASING
AFTER
ONLY
A
SINGLE
PASS
OVER
ALL
IMAGES
AND
COMPLEMENTARY
NON
PARAMETRIC
METHOD
THAT
DIRECTLY
IN
SUPPLEMENTARY
MATERIAL
WE
DISCUSS
WHY
THE
POSITIVE
SHOWS
WHAT
THE
NETWORK
LEARNED
AND
NEGATIVE
EXAMPLES
ARE
DEFINED
DIFFERENTLY
IN
FINE
TUNING
THE
IDEA
IS
TO
SINGLE
OUT
A
PARTICULAR
UNIT
FEATURE
IN
THE
VERSUS
SVM
TRAINING
WE
ALSO
DISCUSS
WHY
IT
NECESSARY
NETWORK
AND
USE
IT
AS
IF
IT
WERE
AN
OBJECT
DETECTOR
IN
ITS
OWN
TO
TRAIN
DETECTION
CLASSIFIERS
RATHER
THAN
SIMPLY
USE
OUTPUTS
RIGHT
THAT
IS
WE
COMPUTE
THE
UNIT
ACTIVATIONS
ON
A
LARGE
FROM
THE
FINAL
LAYER
OF
THE
FINE
TUNED
CNN
SET
OF
HELD
OUT
REGION
PROPOSALS
ABOUT
MILLION
SORT
THE
PROPOSALS
FROM
HIGHEST
TO
LOWEST
ACTIVATION
PERFORM
NON
RESULTS
ON
PASCAL
VOC
MAXIMUM
SUPPRESSION
AND
THEN
DISPLAY
THE
TOP
SCORING
RE
FOLLOWING
THE
PASCAL
VOC
BEST
PRACTICES
WE
GIONS
OUR
METHOD
LETS
THE
SELECTED
UNIT
SPEAK
FOR
ITSELF
VALIDATED
ALL
DESIGN
DECISIONS
AND
HYPERPARAMETERS
ON
THE
BY
SHOWING
EXACTLY
WHICH
INPUTS
IT
FIRES
ON
WE
AVOID
AVER
VOC
DATASET
SECTION
FOR
FINAL
RESULTS
ON
THE
AGING
IN
ORDER
TO
SEE
DIFFERENT
VISUAL
MODES
AND
GAIN
INSIGHT
VOC
DATASETS
WE
FINE
TUNED
THE
CNN
ON
VOC
INTO
THE
INVARIANCES
COMPUTED
BY
THE
UNIT
TRAIN
AND
OPTIMIZED
OUR
DETECTION
SVMS
ON
VOC
WE
VISUALIZE
UNITS
FROM
LAYER
WHICH
IS
THE
MAX
TRAINVAL
WE
SUBMITTED
TEST
RESULTS
TO
THE
EVALUATION
SERVER
POOLED
OUTPUT
OF
THE
NETWORK
FIFTH
AND
FINAL
CONVOLUTIONAL
ONLY
ONCE
FOR
EACH
OF
THE
TWO
MAJOR
ALGORITHM
VARIANTS
WITH
LAYER
THE
FEATURE
MAP
IS
AND
WITHOUT
BOUNDING
BOX
REGRESSION
DIMENSIONAL
IGNORING
BOUNDARY
EFFECTS
EACH
UNIT
HAS
TABLE
SHOWS
COMPLETE
RESULTS
ON
VOC
WE
COM
A
RECEPTIVE
FIELD
OF
PIXELS
IN
THE
ORIGINAL
PARE
OUR
METHOD
AGAINST
FOUR
STRONG
BASELINES
INCLUDING
PIXEL
INPUT
A
CENTRAL
UNIT
HAS
A
NEARLY
GLOBAL
VIEW
SEGDPM
WHICH
COMBINES
DPM
DETECTORS
WITH
THE
WHILE
ONE
NEAR
THE
EDGE
HAS
A
SMALLER
CLIPPED
SUPPORT
OUTPUT
OF
A
SEMANTIC
SEGMENTATION
SYSTEM
AND
USES
AD
EACH
ROW
IN
FIGURE
DISPLAYS
THE
TOP
ACTIVATIONS
FOR
DITIONAL
INTER
DETECTOR
CONTEXT
AND
IMAGE
CLASSIFIER
RESCOR
A
UNIT
FROM
A
CNN
THAT
WE
FINE
TUNED
ON
VOC
ING
THE
MOST
GERMANE
COMPARISON
IS
TO
THE
UVA
SYSTEM
TRAINVAL
SIX
OF
THE
FUNCTIONALLY
UNIQUE
UNITS
ARE
VISU
FROM
UIJLINGS
ET
AL
SINCE
OUR
SYSTEMS
USE
THE
SAME
RE
ALIZED
THE
SUPPLEMENTARY
MATERIAL
INCLUDES
MORE
THESE
FIGURE
TOP
REGIONS
FOR
SIX
UNITS
RECEPTIVE
FIELDS
AND
ACTIVATION
VALUES
ARE
DRAWN
IN
WHITE
SOME
UNITS
ARE
ALIGNED
TO
CONCEPTS
SUCH
AS
PEOPLE
ROW
OR
TEXT
OTHER
UNITS
CAPTURE
TEXTURE
AND
MATERIAL
PROPERTIES
SUCH
AS
DOT
ARRAYS
AND
SPECULAR
REFLECTIONS
VOC
TEST
AERO
BIKE
BIRD
BOAT
BOTTLE
BUS
CAR
CAT
CHAIR
COW
TABLE
DOG
HORSE
MBIKE
PERSON
PLANT
SHEEP
SOFA
TRAIN
TV
MAP
R
CNN
R
CNN
R
CNN
R
CNN
FT
R
CNN
FT
R
CNN
FT
R
CNN
FT
BB
DPM
DPM
ST
DPM
HSC
TABLE
DETECTION
AVERAGE
PRECISION
ON
VOC
TEST
ROWS
SHOW
R
CNN
PERFORMANCE
WITHOUT
FINE
TUNING
ROWS
SHOW
RESULTS
FOR
THE
CNN
PRE
TRAINED
ON
ILSVRC
AND
THEN
FINE
TUNED
FT
ON
VOC
TRAINVAL
ROW
INCLUDES
A
SIMPLE
BOUNDING
BOX
REGRESSION
BB
STAGE
THAT
REDUCES
LOCALIZATION
ERRORS
SECTION
ROWS
PRESENT
DPM
METHODS
AS
A
STRONG
BASELINE
THE
FIRST
USES
ONLY
HOG
WHILE
THE
NEXT
TWO
USE
DIFFERENT
FEATURE
LEARNING
APPROACHES
TO
AUGMENT
OR
REPLACE
HOG
UNITS
WERE
SELECTED
TO
SHOW
A
REPRESENTATIVE
SAMPLE
OF
WHAT
TURES
IT
MULTIPLIES
A
WEIGHT
MATRIX
BY
THE
THE
NETWORK
LEARNS
IN
THE
SECOND
ROW
WE
SEE
A
UNIT
THAT
FEATURE
MAP
RESHAPED
AS
A
DIMENSIONAL
VECTOR
AND
FIRES
ON
DOG
FACES
AND
DOT
ARRAYS
THE
UNIT
CORRESPONDING
TO
THEN
ADDS
A
VECTOR
OF
BIASES
THIS
INTERMEDIATE
VECTOR
IS
THE
THIRD
ROW
IS
A
RED
BLOB
DETECTOR
THERE
ARE
ALSO
DETECTORS
COMPONENT
WISE
HALF
WAVE
RECTIFIED
X
MAX
X
FOR
HUMAN
FACES
AND
MORE
ABSTRACT
PATTERNS
SUCH
AS
TEXT
AND
LAYER
IS
THE
FINAL
LAYER
OF
THE
NETWORK
IT
IS
IMPLE
TRIANGULAR
STRUCTURES
WITH
WINDOWS
THE
NETWORK
APPEARS
MENTED
BY
MULTIPLYING
THE
FEATURES
COMPUTED
BY
BY
A
TO
LEARN
A
REPRESENTATION
THAT
COMBINES
A
SMALL
NUMBER
OF
WEIGHT
MATRIX
AND
SIMILARLY
ADDING
A
VECTOR
CLASS
TUNED
FEATURES
TOGETHER
WITH
A
DISTRIBUTED
REPRESENTA
OF
BIASES
AND
APPLYING
HALF
WAVE
RECTIFICATION
TION
OF
SHAPE
TEXTURE
COLOR
AND
MATERIAL
PROPERTIES
THE
WE
START
BY
LOOKING
AT
RESULTS
FROM
THE
CNN
WITHOUT
SUBSEQUENT
FULLY
CONNECTED
LAYER
HAS
THE
ABILITY
TO
MODEL
FINE
TUNING
ON
PASCAL
I
E
ALL
CNN
PARAMETERS
WERE
PRE
A
LARGE
SET
OF
COMPOSITIONS
OF
THESE
RICH
FEATURES
TRAINED
ON
ILSVRC
ONLY
ANALYZING
PERFORMANCE
LAYER
BY
LAYER
TABLE
ROWS
REVEALS
THAT
FEATURES
FROM
ABLATION
STUDIES
GENERALIZE
WORSE
THAN
FEATURES
FROM
THIS
MEANS
PERFORMANCE
LAYER
BY
LAYER
WITHOUT
FINE
TUNING
TO
UN
THAT
OR
ABOUT
MILLION
OF
THE
CNN
PARAMETERS
DERSTAND
WHICH
LAYERS
ARE
CRITICAL
FOR
DETECTION
PERFORMANCE
CAN
BE
REMOVED
WITHOUT
DEGRADING
MAP
MORE
SURPRISING
IS
WE
ANALYZED
RESULTS
ON
THE
VOC
DATASET
FOR
EACH
OF
THE
THAT
REMOVING
BOTH
AND
PRODUCES
QUITE
GOOD
RESULTS
CNN
LAST
THREE
LAYERS
LAYER
WAS
BRIEFLY
DESCRIBED
EVEN
THOUGH
FEATURES
ARE
COMPUTED
USING
ONLY
OF
IN
SECTION
THE
FINAL
TWO
LAYERS
ARE
SUMMARIZED
BELOW
THE
CNN
PARAMETERS
MUCH
OF
THE
CNN
REPRESENTATIONAL
LAYER
IS
FULLY
CONNECTED
TO
TO
COMPUTE
FEA
POWER
COMES
FROM
ITS
CONVOLUTIONAL
LAYERS
RATHER
THAN
FROM
THE
MUCH
LARGER
DENSELY
CONNECTED
LAYERS
THIS
FINDING
SUG
SEE
HOW
OUR
ERROR
TYPES
COMPARE
WITH
DPM
A
FULL
SUM
GESTS
POTENTIAL
UTILITY
IN
COMPUTING
A
DENSE
FEATURE
MAP
IN
MARY
OF
THE
ANALYSIS
TOOL
IS
BEYOND
THE
SCOPE
OF
THIS
PA
THE
SENSE
OF
HOG
OF
AN
ARBITRARY
SIZED
IMAGE
BY
USING
ONLY
PER
AND
WE
ENCOURAGE
READERS
TO
CONSULT
TO
UNDERSTAND
THE
CONVOLUTIONAL
LAYERS
OF
THE
CNN
THIS
REPRESENTATION
SOME
FINER
DETAILS
SUCH
AS
NORMALIZED
AP
SINCE
THE
WOULD
ENABLE
EXPERIMENTATION
WITH
SLIDING
WINDOW
DETEC
ANALYSIS
IS
BEST
ABSORBED
IN
THE
CONTEXT
OF
THE
ASSOCIATED
TORS
INCLUDING
DPM
ON
TOP
OF
FEATURES
PLOTS
WE
PRESENT
THE
DISCUSSION
WITHIN
THE
CAPTIONS
OF
FIG
URE
AND
FIGURE
PERFORMANCE
LAYER
BY
LAYER
WITH
FINE
TUNING
WE
NOW
R
CNN
ANIMALS
R
CNN
FT
ANIMALS
R
CNN
FT
BB
ANIMALS
LOOK
AT
RESULTS
FROM
OUR
CNN
AFTER
HAVING
FINE
TUNED
ITS
PA
RAMETERS
ON
VOC
TRAINVAL
THE
IMPROVEMENT
IS
STRIK
THE
FIRST
DPM
FEATURE
LEARNING
METHOD
DPM
ST
TOTAL
FALSE
POSITIVES
TOTAL
FALSE
POSITIVES
TOTAL
FALSE
POSITIVES
AUGMENTS
HOG
FEATURES
WITH
HISTOGRAMS
OF
SKETCH
TOKEN
FIGURE
DISTRIBUTION
OF
TOP
RANKED
FALSE
POSITIVE
FP
TYPES
PROBABILITIES
INTUITIVELY
A
SKETCH
TOKEN
IS
A
TIGHT
DISTRI
EACH
PLOT
SHOWS
THE
EVOLVING
DISTRIBUTION
OF
FP
TYPES
AS
MORE
FPS
BUTION
OF
CONTOURS
PASSING
THROUGH
THE
CENTER
OF
AN
IMAGE
ARE
CONSIDERED
IN
ORDER
OF
DECREASING
SCORE
EACH
FP
IS
CATEGO
PATCH
SKETCH
TOKEN
PROBABILITIES
ARE
COMPUTED
AT
EACH
PIXEL
RIZED
INTO
OF
TYPES
LOC
POOR
LOCALIZATION
A
DETECTION
WITH
BY
A
RANDOM
FOREST
THAT
WAS
TRAINED
TO
CLASSIFY
PIXEL
AN
IOU
OVERLAP
WITH
THE
CORRECT
CLASS
BETWEEN
AND
OR
A
DU
PATCHES
INTO
ONE
OF
SKETCH
TOKENS
OR
BACKGROUND
PLICATE
SIM
CONFUSION
WITH
A
SIMILAR
CATEGORY
OTH
CONFUSION
WITH
A
DISSIMILAR
OBJECT
CATEGORY
BG
A
FP
THAT
FIRED
ON
BACK
THE
SECOND
METHOD
DPM
HSC
REPLACES
HOG
WITH
GROUND
COMPARED
WITH
DPM
SEE
SIGNIFICANTLY
MORE
OF
HISTOGRAMS
OF
SPARSE
CODES
HSC
TO
COMPUTE
AN
HSC
OUR
ERRORS
RESULT
FROM
POOR
LOCALIZATION
RATHER
THAN
CONFUSION
WITH
SPARSE
CODE
ACTIVATIONS
ARE
SOLVED
FOR
AT
EACH
PIXEL
USING
BACKGROUND
OR
OTHER
OBJECT
CLASSES
INDICATING
THAT
THE
CNN
FEA
A
LEARNED
DICTIONARY
OF
PIXEL
GRAYSCALE
ATOMS
TURES
ARE
MUCH
MORE
DISCRIMINATIVE
THAN
HOG
LOOSE
LOCALIZA
THE
RESULTING
ACTIVATIONS
ARE
RECTIFIED
IN
THREE
WAYS
FULL
AND
TION
LIKELY
RESULTS
FROM
OUR
USE
OF
BOTTOM
UP
REGION
PROPOSALS
AND
BOTH
HALF
WAVES
SPATIALLY
POOLED
UNIT
NORMALIZED
AND
THE
POSITIONAL
INVARIANCE
LEARNED
FROM
PRE
TRAINING
THE
CNN
FOR
THEN
POWER
TRANSFORMED
X
SIGN
X
X
Α
WHOLE
IMAGE
CLASSIFICATION
COLUMN
THREE
SHOWS
HOW
OUR
SIMPLE
ALL
R
CNN
VARIANTS
STRONGLY
OUTPERFORM
THE
THREE
DPM
BOUNDING
BOX
REGRESSION
METHOD
FIXES
MANY
LOCALIZATION
ERRORS
BASELINES
TABLE
ROWS
INCLUDING
THE
TWO
THAT
USE
FEATURE
LEARNING
COMPARED
TO
THE
LATEST
VERSION
OF
DPM
BOUNDING
BOX
REGRESSION
WHICH
USES
ONLY
HOG
FEATURES
OUR
MAP
IS
MORE
THAN
PERCENTAGE
POINTS
HIGHER
VS
A
RELA
BASED
ON
THE
ERROR
ANALYSIS
WE
IMPLEMENTED
A
SIMPLE
TIVE
IMPROVEMENT
THE
COMBINATION
OF
HOG
AND
SKETCH
TO
METHOD
TO
REDUCE
LOCALIZATION
ERRORS
INSPIRED
BY
THE
BOUND
KENS
YIELDS
MAP
POINTS
OVER
HOG
ALONE
WHILE
HSC
ING
BOX
REGRESSION
EMPLOYED
IN
DPM
WE
TRAIN
A
LINEAR
IMPROVES
OVER
HOG
BY
MAP
POINTS
WHEN
COMPARED
REGRESSION
MODEL
TO
PREDICT
A
NEW
DETECTION
WINDOW
GIVEN
INTERNALLY
TO
THEIR
PRIVATE
DPM
BASELINES
BOTH
USE
NON
THE
FEATURES
FOR
A
SELECTIVE
SEARCH
REGION
PROPOSAL
PUBLIC
IMPLEMENTATIONS
OF
DPM
THAT
UNDERPERFORM
THE
OPEN
FULL
DETAILS
ARE
GIVEN
IN
THE
SUPPLEMENTARY
MATERIAL
RE
SOURCE
VERSION
THESE
METHODS
ACHIEVE
MAPS
OF
SULTS
IN
TABLE
TABLE
AND
FIGURE
SHOW
THAT
THIS
SIMPLE
AND
RESPECTIVELY
APPROACH
FIXES
A
LARGE
NUMBER
OF
MISLOCALIZED
DETECTIONS
BOOSTING
MAP
BY
TO
POINTS
DETECTION
ERROR
ANALYSIS
SEMANTIC
SEGMENTATION
WE
APPLIED
THE
EXCELLENT
DETECTION
ANALYSIS
TOOL
FROM
HOIEM
ET
AL
IN
ORDER
TO
REVEAL
OUR
METHOD
ERROR
REGION
CLASSIFICATION
IS
A
STANDARD
TECHNIQUE
FOR
SEMAN
MODES
UNDERSTAND
HOW
FINE
TUNING
CHANGES
THEM
AND
TO
TIC
SEGMENTATION
ALLOWING
US
TO
EASILY
APPLY
R
CNN
TO
THE
R
CNN
SENSITIVITY
AND
IMPACT
R
CNN
FT
SENSITIVITY
AND
IMPACT
R
CNN
FT
BB
SENSITIVITY
AND
IMPACT
DPM
VOC
SENSITIVITY
AND
IMPACT
FIGURE
SENSITIVITY
TO
OBJECT
CHARACTERISTICS
EACH
PLOT
SHOWS
THE
MEAN
OVER
CLASSES
NORMALIZED
AP
SEE
FOR
THE
HIGHEST
AND
LOWEST
PERFORMING
SUBSETS
WITHIN
SIX
DIFFERENT
OBJECT
CHARACTERISTICS
OCCLUSION
TRUNCATION
BOUNDING
BOX
AREA
ASPECT
RATIO
VIEWPOINT
PART
VISIBILITY
WE
SHOW
PLOTS
FOR
OUR
METHOD
R
CNN
WITH
AND
WITHOUT
FINE
TUNING
FT
AND
BOUNDING
BOX
REGRESSION
BB
AS
WELL
AS
FOR
DPM
VOC
OVERALL
FINE
TUNING
DOES
NOT
REDUCE
SENSITIVITY
THE
DIFFERENCE
BETWEEN
MAX
AND
MIN
BUT
DOES
SUBSTANTIALLY
IMPROVE
BOTH
THE
HIGHEST
AND
LOWEST
PERFORMING
SUBSETS
FOR
NEARLY
ALL
CHARACTERISTICS
THIS
INDICATES
THAT
FINE
TUNING
DOES
MORE
THAN
SIMPLY
IMPROVE
THE
LOWEST
PERFORMING
SUBSETS
FOR
ASPECT
RATIO
AND
BOUNDING
BOX
AREA
AS
ONE
MIGHT
CONJECTURE
BASED
ON
HOW
WE
WARP
NETWORK
INPUTS
INSTEAD
FINE
TUNING
IMPROVES
ROBUSTNESS
FOR
ALL
CHARACTERISTICS
INCLUDING
OCCLUSION
TRUNCATION
VIEWPOINT
AND
PART
VISIBILITY
PASCAL
VOC
SEGMENTATION
CHALLENGE
TO
FACILITATE
A
DI
FULL
R
CNN
FG
R
CNN
FULL
FG
R
CNN
RECT
COMPARISON
WITH
THE
CURRENT
LEADING
SEMANTIC
SEGMEN
P
TATION
SYSTEM
CALLED
P
FOR
SECOND
ORDER
POOLING
WE
WORK
WITHIN
THEIR
OPEN
SOURCE
FRAMEWORK
P
USES
TABLE
SEGMENTATION
MEAN
ACCURACY
ON
VOC
VALI
CPMC
TO
GENERATE
REGION
PROPOSALS
PER
IMAGE
AND
THEN
DATION
COLUMN
PRESENTS
P
USE
OUR
CNN
PRE
TRAINED
ON
PREDICTS
THE
QUALITY
OF
EACH
REGION
FOR
EACH
CLASS
USING
ILSVRC
SUPPORT
VECTOR
REGRESSION
SVR
THE
HIGH
PERFORMANCE
OF
THEIR
APPROACH
IS
DUE
TO
THE
QUALITY
OF
THE
CPMC
REGIONS
ALWAYS
OUTPERFORMS
AND
THE
FOLLOWING
DISCUSSION
REFERS
AND
THE
POWERFUL
SECOND
ORDER
POOLING
OF
MULTIPLE
FEATURE
TO
THE
FEATURES
THE
FG
STRATEGY
SLIGHTLY
OUTPERFORMS
FULL
TYPES
ENRICHED
VARIANTS
OF
SIFT
AND
LBP
WE
ALSO
NOTE
INDICATING
THAT
THE
MASKED
REGION
SHAPE
PROVIDES
A
STRONGER
THAT
FARABET
ET
AL
RECENTLY
DEMONSTRATED
GOOD
RESULTS
SIGNAL
MATCHING
OUR
INTUITION
HOWEVER
FULL
FG
ACHIEVES
ON
SEVERAL
DENSE
SCENE
LABELING
DATASETS
NOT
INCLUDING
PAS
AN
AVERAGE
ACCURACY
OF
OUR
BEST
RESULT
BY
A
MAR
CAL
USING
A
CNN
AS
A
MULTI
SCALE
PER
PIXEL
CLASSIFIER
GIN
OF
ALSO
MODESTLY
OUTPERFORMING
P
INDICATING
WE
FOLLOW
AND
EXTEND
THE
PASCAL
SEGMENTATION
THAT
THE
CONTEXT
PROVIDED
BY
THE
FULL
FEATURES
IS
HIGHLY
INFOR
TRAINING
SET
TO
INCLUDE
THE
EXTRA
ANNOTATIONS
MADE
AVAILABLE
MATIVE
EVEN
GIVEN
THE
FG
FEATURES
NOTABLY
TRAINING
THE
BY
HARIHARAN
ET
AL
DESIGN
DECISIONS
AND
HYPERPARAM
SVRS
ON
OUR
FULL
FG
FEATURES
TAKES
AN
HOUR
ON
A
SINGLE
CORE
ETERS
WERE
CROSS
VALIDATED
ON
THE
VOC
VALIDATION
SET
COMPARED
TO
HOURS
FOR
TRAINING
ON
P
FEATURES
FINAL
TEST
RESULTS
WERE
EVALUATED
ONLY
ONCE
IN
TABLE
WE
PRESENT
RESULTS
ON
THE
VOC
TEST
SET
COMPARING
OUR
BEST
PERFORMING
METHOD
FULL
FG
CNN
FEATURES
FOR
SEGMENTATION
WE
EVALUATE
THREE
STRATE
AGAINST
TWO
STRONG
BASELINES
OUR
METHOD
ACHIEVES
THE
HIGH
GIES
FOR
COMPUTING
FEATURES
ON
CPMC
REGIONS
ALL
OF
WHICH
EST
SEGMENTATION
ACCURACY
FOR
OUT
OF
CATEGORIES
AND
BEGIN
BY
WARPING
THE
RECTANGULAR
WINDOW
AROUND
THE
RE
THE
HIGHEST
OVERALL
SEGMENTATION
ACCURACY
OF
AVER
GION
TO
THE
FIRST
STRATEGY
FULL
IGNORES
THE
RE
AGED
ACROSS
CATEGORIES
BUT
LIKELY
TIES
WITH
THE
P
RESULT
GION
SHAPE
AND
COMPUTES
CNN
FEATURES
DIRECTLY
ON
THE
UNDER
ANY
REASONABLE
MARGIN
OF
ERROR
STILL
BETTER
PERFOR
WARPED
WINDOW
EXACTLY
AS
WE
DID
FOR
DETECTION
HOWEVER
MANCE
COULD
LIKELY
BE
ACHIEVED
BY
FINE
TUNING
THESE
FEATURES
IGNORE
THE
NON
RECTANGULAR
SHAPE
OF
THE
RE
GION
TWO
REGIONS
MIGHT
HAVE
VERY
SIMILAR
BOUNDING
BOXES
CONCLUSION
WHILE
HAVING
VERY
LITTLE
OVERLAP
THEREFORE
THE
SECOND
STRAT
EGY
FG
COMPUTES
CNN
FEATURES
ONLY
ON
A
REGION
FORE
IN
RECENT
YEARS
OBJECT
DETECTION
PERFORMANCE
HAD
STAG
GROUND
MASK
WE
REPLACE
THE
BACKGROUND
WITH
THE
MEAN
NATED
THE
BEST
PERFORMING
SYSTEMS
WERE
COMPLEX
EN
INPUT
SO
THAT
BACKGROUND
REGIONS
ARE
ZERO
AFTER
MEAN
SUB
SEMBLES
COMBINING
MULTIPLE
LOW
LEVEL
IMAGE
FEATURES
WITH
TRACTION
THE
THIRD
STRATEGY
FULL
FG
SIMPLY
CONCATENATES
HIGH
LEVEL
CONTEXT
FROM
OBJECT
DETECTORS
AND
SCENE
CLASSI
THE
FULL
AND
FG
FEATURES
OUR
EXPERIMENTS
VALIDATE
THEIR
COM
FIERS
THIS
PAPER
PRESENTS
A
SIMPLE
AND
SCALABLE
OBJECT
DE
PLEMENTARITY
TECTION
ALGORITHM
THAT
GIVES
A
RELATIVE
IMPROVEMENT
OVER
THE
BEST
PREVIOUS
RESULTS
ON
PASCAL
VOC
RESULTS
ON
VOC
TABLE
SHOWS
A
SUMMARY
OF
OUR
WE
ACHIEVED
THIS
PERFORMANCE
THROUGH
TWO
INSIGHTS
THE
RESULTS
ON
THE
VOC
VALIDATION
SET
COMPARED
WITH
P
FIRST
IS
TO
APPLY
HIGH
CAPACITY
CONVOLUTIONAL
NEURAL
NET
SEE
SUPPLEMENTARY
MATERIAL
FOR
COMPLETE
PER
CATEGORY
RE
WORKS
TO
BOTTOM
UP
REGION
PROPOSALS
IN
ORDER
TO
LOCALIZE
SULTS
WITHIN
EACH
FEATURE
COMPUTATION
STRATEGY
LAYER
AND
SEGMENT
OBJECTS
THE
SECOND
IS
A
PARADIGM
FOR
TRAIN
TABLE
SEGMENTATION
ACCURACY
ON
VOC
TEST
WE
COMPARE
AGAINST
TWO
STRONG
BASELINES
THE
REGIONS
AND
PARTS
R
P
METHOD
OF
AND
THE
SECOND
ORDER
POOLING
P
METHOD
OF
WITHOUT
ANY
FINE
TUNING
OUR
CNN
ACHIEVES
TOP
SEGMENTATION
PERFOR
MANCE
OUTPERFORMING
R
P
AND
ROUGHLY
MATCHING
P
INTRODUCTION
IN
THE
LAST
THREE
YEARS
OUR
OBJECT
CLASSIFICATION
AND
DETECTION
CAPABILITIES
HAVE
DRAMATICALLY
IMPROVED
DUE
TO
ADVANCES
IN
DEEP
LEARNING
AND
CONVOLUTIONAL
NETWORKS
ONE
ENCOURAGING
NEWS
IS
THAT
MOST
OF
THIS
PROGRESS
IS
NOT
JUST
THE
RESULT
OF
MORE
POWERFUL
HARDWARE
LARGER
DATASETS
AND
BIGGER
MODELS
BUT
MAINLY
A
CONSEQUENCE
OF
NEW
IDEAS
ALGORITHMS
AND
IMPROVED
NETWORK
ARCHITECTURES
NO
NEW
DATA
SOURCES
WERE
USED
FOR
EXAMPLE
BY
THE
TOP
ENTRIES
IN
THE
ILSVRC
COMPETITION
BESIDES
THE
CLASSIFICATION
DATASET
OF
THE
SAME
COMPETITION
FOR
DETECTION
PURPOSES
OUR
GOOGLENET
SUBMISSION
TO
ILSVRC
ACTUALLY
USES
TIMES
FEWER
PARAMETERS
THAN
THE
WINNING
ARCHITECTURE
OF
KRIZHEVSKY
ET
AL
FROM
TWO
YEARS
AGO
WHILE
BEING
SIGNIFICANTLY
MORE
ACCURATE
ON
THE
OBJECT
DETECTION
FRONT
THE
BIGGEST
GAINS
HAVE
NOT
COME
FROM
NAIVE
APPLICATION
OF
BIGGER
AND
BIGGER
DEEP
NETWORKS
BUT
FROM
THE
SYNERGY
OF
DEEP
ARCHITECTURES
AND
CLASSICAL
COMPUTER
VISION
LIKE
THE
R
CNN
ALGORITHM
BY
GIRSHICK
ET
AL
ANOTHER
NOTABLE
FACTOR
IS
THAT
WITH
THE
ONGOING
TRACTION
OF
MOBILE
AND
EMBEDDED
COMPUTING
THE
EFFICIENCY
OF
OUR
ALGORITHMS
ESPECIALLY
THEIR
POWER
AND
MEMORY
USE
GAINS
IMPORTANCE
IT
IS
NOTEWORTHY
THAT
THE
CONSIDERATIONS
LEADING
TO
THE
DESIGN
OF
THE
DEEP
ARCHITECTURE
PRESENTED
IN
THIS
PAPER
INCLUDED
THIS
FACTOR
RATHER
THAN
HAVING
A
SHEER
FIXATION
ON
ACCURACY
NUMBERS
FOR
MOST
OF
THE
EXPERIMENTS
THE
MODELS
WERE
DESIGNED
TO
KEEP
A
COMPUTATIONAL
BUDGET
OF
BILLION
MULTIPLY
ADDS
AT
INFERENCE
TIME
SO
THAT
THE
THEY
DO
NOT
END
UP
TO
BE
A
PURELY
ACADEMIC
CURIOSITY
BUT
COULD
BE
PUT
TO
REAL
WORLD
USE
EVEN
ON
LARGE
DATASETS
AT
A
REASONABLE
COST
IN
THIS
PAPER
WE
WILL
FOCUS
ON
AN
EFFICIENT
DEEP
NEURAL
NETWORK
ARCHITECTURE
FOR
COMPUTER
VISION
CODENAMED
INCEPTION
WHICH
DERIVES
ITS
NAME
FROM
THE
NETWORK
IN
NETWORK
PAPER
BY
LIN
ET
AL
IN
CONJUNCTION
WITH
THE
FAMOUS
WE
NEED
TO
GO
DEEPER
INTERNET
MEME
IN
OUR
CASE
THE
WORD
DEEP
IS
USED
IN
TWO
DIFFERENT
MEANINGS
FIRST
OF
ALL
IN
THE
SENSE
THAT
WE
INTRODUCE
A
NEW
LEVEL
OF
ORGANIZATION
IN
THE
FORM
OF
THE
INCEPTION
MODULE
AND
ALSO
IN
THE
MORE
DIRECT
SENSE
OF
INCREASED
NETWORK
DEPTH
IN
GENERAL
ONE
CAN
VIEW
THE
INCEPTION
MODEL
AS
A
LOGICAL
CULMINATION
OF
WHILE
TAKING
INSPIRATION
AND
GUIDANCE
FROM
THE
THEORETICAL
WORK
BY
ARORA
ET
AL
THE
BENEFITS
OF
THE
ARCHITECTURE
ARE
EXPERIMENTALLY
VERIFIED
ON
THE
ILSVRC
CLASSIFICATION
AND
DETECTION
CHALLENGES
WHERE
IT
SIGNIFICANTLY
OUTPERFORMS
THE
CURRENT
STATE
OF
THE
ART
RELATED
WORK
STARTING
WITH
LENET
CONVOLUTIONAL
NEURAL
NETWORKS
CNN
HAVE
TYPICALLY
HAD
A
STANDARD
STRUCTURE
STACKED
CONVOLUTIONAL
LAYERS
OPTIONALLY
FOLLOWED
BY
CON
TRAST
NORMALIZATION
AND
MAX
POOLING
ARE
FOLLOWED
BY
ONE
OR
MORE
FULLY
CONNECTED
LAYERS
VARIANTS
OF
THIS
BASIC
DESIGN
ARE
PREVALENT
IN
THE
IMAGE
CLASSIFICATION
LITERATURE
AND
HAVE
YIELDED
THE
BEST
RESULTS
TO
DATE
ON
MNIST
CIFAR
AND
MOST
NOTABLY
ON
THE
IMAGENET
CLASSIFICATION
CHALLENGE
FOR
LARGER
DATASETS
SUCH
AS
IMAGENET
THE
RECENT
TREND
HAS
BEEN
TO
INCREASE
THE
NUMBER
OF
LAYERS
AND
LAYER
SIZE
WHILE
USING
DROPOUT
TO
ADDRESS
THE
PROBLEM
OF
OVERFITTING
DESPITE
CONCERNS
THAT
MAX
POOLING
LAYERS
RESULT
IN
LOSS
OF
ACCURATE
SPATIAL
INFORMATION
THE
SAME
CONVOLUTIONAL
NETWORK
ARCHITECTURE
AS
HAS
ALSO
BEEN
SUCCESSFULLY
EMPLOYED
FOR
LOCALIZATION
OBJECT
DETECTION
AND
HUMAN
POSE
ESTIMATION
INSPIRED
BY
A
NEUROSCIENCE
MODEL
OF
THE
PRIMATE
VISUAL
CORTEX
SERRE
ET
AL
USED
A
SERIES
OF
FIXED
GABOR
FILTERS
OF
DIFFERENT
SIZES
TO
HANDLE
MULTIPLE
SCALES
WE
USE
A
SIMILAR
STRATEGY
HERE
HOWEVER
CONTRARY
TO
THE
FIXED
LAYER
DEEP
MODEL
OF
ALL
FILTERS
IN
THE
INCEPTION
ARCHITECTURE
ARE
LEARNED
FURTHERMORE
INCEPTION
LAYERS
ARE
REPEATED
MANY
TIMES
LEADING
TO
A
LAYER
DEEP
MODEL
IN
THE
CASE
OF
THE
GOOGLENET
MODEL
NETWORK
IN
NETWORK
IS
AN
APPROACH
PROPOSED
BY
LIN
ET
AL
IN
ORDER
TO
INCREASE
THE
REPRESENTATIONAL
POWER
OF
NEURAL
NETWORKS
IN
THEIR
MODEL
ADDITIONAL
CONVOLUTIONAL
LAYERS
ARE
ADDED
TO
THE
NETWORK
INCREASING
ITS
DEPTH
WE
USE
THIS
APPROACH
HEAVILY
IN
OUR
ARCHITECTURE
HOWEVER
IN
OUR
SETTING
CONVOLUTIONS
HAVE
DUAL
PURPOSE
MOST
CRITICALLY
THEY
ARE
USED
MAINLY
AS
DIMENSION
REDUCTION
MODULES
TO
REMOVE
COMPUTATIONAL
BOTTLENECKS
THAT
WOULD
OTHERWISE
LIMIT
THE
SIZE
OF
OUR
NETWORKS
THIS
ALLOWS
FOR
NOT
JUST
INCREASING
THE
DEPTH
BUT
ALSO
THE
WIDTH
OF
OUR
NETWORKS
WITHOUT
A
SIGNIFICANT
PERFORMANCE
PENALTY
FINALLY
THE
CURRENT
STATE
OF
THE
ART
FOR
OBJECT
DETECTION
IS
THE
REGIONS
WITH
CONVOLUTIONAL
NEURAL
NETWORKS
R
CNN
METHOD
BY
GIRSHICK
ET
AL
R
CNN
DECOMPOSES
THE
OVERALL
DETECTION
PROBLEM
INTO
TWO
SUBPROBLEMS
UTILIZING
LOWLEVEL
CUES
SUCH
AS
COLOR
AND
TEXTURE
IN
ORDER
TO
GENERATE
OBJECT
LOCATION
PROPOSALS
IN
A
CATEGORY
AGNOSTIC
FASHION
AND
USING
CNN
CLASSIFIERS
TO
IDENTIFY
OBJECT
CATEGORIES
AT
THOSE
LOCATIONS
SUCH
A
TWO
STAGE
APPROACH
LEVERAGES
THE
ACCURACY
OF
BOUNDING
BOX
SEGMENTATION
WITH
LOW
LEVEL
CUES
AS
WELL
AS
THE
HIGHLY
POWERFUL
CLASSIFICATION
POWER
OF
STATE
OFTHE
ART
CNNS
WE
ADOPTED
A
SIMILAR
PIPELINE
IN
OUR
DETECTION
SUBMISSIONS
BUT
HAVE
EXPLORED
ENHANCEMENTS
IN
BOTH
STAGES
SUCH
AS
MULTI
BOX
PREDICTION
FOR
HIGHER
OBJECT
BOUNDING
BOX
RECALL
AND
ENSEMBLE
APPROACHES
FOR
BETTER
CATEGORIZATION
OF
BOUNDING
BOX
PROPOSALS
MOTIVATION
AND
HIGH
LEVEL
CONSIDERATIONS
THE
MOST
STRAIGHTFORWARD
WAY
OF
IMPROVING
THE
PERFORMANCE
OF
DEEP
NEURAL
NETWORKS
IS
BY
INCREASING
THEIR
SIZE
THIS
INCLUDES
BOTH
INCREASING
THE
DEPTH
THE
NUMBER
OF
NET
FIGURE
TWO
DISTINCT
CLASSES
FROM
THE
CLASSES
OF
THE
ILSVRC
CLASSIFICATION
CHALLENGE
DOMAIN
KNOWLEDGE
IS
REQUIRED
TO
DISTINGUISH
BETWEEN
THESE
CLASSES
WORK
LEVELS
AS
WELL
AS
ITS
WIDTH
THE
NUMBER
OF
UNITS
AT
EACH
LEVEL
THIS
IS
AN
EASY
AND
SAFE
WAY
OF
TRAINING
HIGHER
QUALITY
MODELS
ESPECIALLY
GIVEN
THE
AVAILABILITY
OF
A
LARGE
AMOUNT
OF
LABELED
TRAINING
DATA
HOWEVER
THIS
SIMPLE
SOLUTION
COMES
WITH
TWO
MAJOR
DRAWBACKS
BIGGER
SIZE
TYPICALLY
MEANS
A
LARGER
NUMBER
OF
PARAMETERS
WHICH
MAKES
THE
ENLARGED
NETWORK
MORE
PRONE
TO
OVERFITTING
ESPECIALLY
IF
THE
NUMBER
OF
LABELED
EXAMPLES
IN
THE
TRAINING
SET
IS
LIMITED
THIS
IS
A
MAJOR
BOTTLENECK
AS
STRONGLY
LABELED
DATASETS
ARE
LABORIOUS
AND
EXPENSIVE
TO
OBTAIN
OFTEN
REQUIRING
EXPERT
HUMAN
RATERS
TO
DISTINGUISH
BETWEEN
VARIOUS
FINE
GRAINED
VISUAL
CATEGORIES
SUCH
AS
THOSE
IN
IMAGENET
EVEN
IN
THE
CLASS
ILSVRC
SUBSET
AS
SHOWN
IN
FIGURE
THE
OTHER
DRAWBACK
OF
UNIFORMLY
INCREASED
NETWORK
SIZE
IS
THE
DRAMATICALLY
INCREASED
USE
OF
COMPUTATIONAL
RESOURCES
FOR
EXAMPLE
IN
A
DEEP
VISION
NETWORK
IF
TWO
CONVOLUTIONAL
LAYERS
ARE
CHAINED
ANY
UNIFORM
INCREASE
IN
THE
NUMBER
OF
THEIR
FILTERS
RESULTS
IN
A
QUADRATIC
INCREASE
OF
COMPUTATION
IF
THE
ADDED
CAPACITY
IS
USED
INEFFICIENTLY
FOR
EXAMPLE
IF
MOST
WEIGHTS
END
UP
TO
BE
CLOSE
TO
ZERO
THEN
MUCH
OF
THE
COMPUTATION
IS
WASTED
AS
THE
COMPUTATIONAL
BUDGET
IS
ALWAYS
FINITE
AN
EFFICIENT
DISTRIBUTION
OF
COMPUTING
RESOURCES
IS
PREFERRED
TO
AN
INDISCRIMINATE
INCREASE
OF
SIZE
EVEN
WHEN
THE
MAIN
OBJECTIVE
IS
TO
INCREASE
THE
QUALITY
OF
PERFORMANCE
A
FUNDAMENTAL
WAY
OF
SOLVING
BOTH
OF
THESE
ISSUES
WOULD
BE
TO
INTRODUCE
SPARSITY
AND
REPLACE
THE
FULLY
CONNECTED
LAYERS
BY
THE
SPARSE
ONES
EVEN
INSIDE
THE
CONVOLUTIONS
BESIDES
MIMICKING
BIOLOGICAL
SYSTEMS
THIS
WOULD
ALSO
HAVE
THE
ADVANTAGE
OF
FIRMER
THEORETICAL
UNDERPINNINGS
DUE
TO
THE
GROUNDBREAKING
WORK
OF
ARORA
ET
AL
THEIR
MAIN
RESULT
STATES
THAT
IF
THE
PROBABILITY
DISTRIBUTION
OF
THE
DATASET
IS
REPRESENTABLE
BY
A
LARGE
VERY
SPARSE
DEEP
NEURAL
NETWORK
THEN
THE
OPTIMAL
NETWORK
TOPOLOGY
CAN
BE
CONSTRUCTED
LAYER
AFTER
LAYER
BY
ANALYZING
THE
CORRELATION
STATISTICS
OF
THE
PRECEDING
LAYER
ACTIVATIONS
AND
CLUSTERING
NEURONS
WITH
HIGHLY
CORRELATED
OUTPUTS
ALTHOUGH
THE
STRICT
MATHEMATICAL
PROOF
REQUIRES
VERY
STRONG
CONDITIONS
THE
FACT
THAT
THIS
STATEMENT
RESONATES
WITH
THE
WELL
KNOWN
HEBBIAN
PRINCIPLE
NEURONS
THAT
FIRE
TOGETHER
WIRE
TOGETHER
SUGGESTS
THAT
THE
UNDERLYING
IDEA
IS
APPLICABLE
EVEN
UNDER
LESS
STRICT
CONDITIONS
IN
PRACTICE
UNFORTUNATELY
TODAY
COMPUTING
INFRASTRUCTURES
ARE
VERY
INEFFICIENT
WHEN
IT
COMES
TO
NUMERICAL
CALCULATION
ON
NON
UNIFORM
SPARSE
DATA
STRUCTURES
EVEN
IF
THE
NUMBER
OF
ARITHMETIC
OPERATIONS
IS
REDUCED
BY
THE
OVERHEAD
OF
LOOKUPS
AND
CACHE
MISSES
WOULD
DOMINATE
SWITCHING
TO
SPARSE
MATRICES
MIGHT
NOT
PAY
OFF
THE
GAP
IS
WIDENED
YET
FURTHER
BY
THE
USE
OF
STEADILY
IMPROVING
AND
HIGHLY
TUNED
NUMERICAL
LIBRARIES
THAT
ALLOW
FOR
EXTREMELY
FAST
DENSE
MATRIX
MULTIPLICATION
EXPLOITING
THE
MINUTE
DETAILS
OF
THE
UNDERLYING
CPU
OR
GPU
HARDWARE
ALSO
NON
UNIFORM
SPARSE
MODELS
REQUIRE
MORE
SOPHISTICATED
ENGINEERING
AND
COMPUTING
INFRASTRUCTURE
MOST
CURRENT
VISION
ORIENTED
MACHINE
LEARNING
SYSTEMS
UTILIZE
SPARSITY
IN
THE
SPATIAL
DOMAIN
JUST
BY
THE
VIRTUE
OF
EMPLOYING
CONVOLUTIONS
HOWEVER
CONVOLUTIONS
ARE
IMPLEMENTED
AS
COLLECTIONS
OF
DENSE
CONNECTIONS
TO
THE
PATCHES
IN
THE
EARLIER
LAYER
CONVNETS
HAVE
TRADITIONALLY
USED
RANDOM
AND
SPARSE
CONNECTION
TABLES
IN
THE
FEATURE
DIMENSIONS
SINCE
IN
ORDER
TO
BREAK
THE
SYMMETRY
AND
IMPROVE
LEARNING
YET
THE
TREND
CHANGED
BACK
TO
FULL
CONNECTIONS
WITH
IN
ORDER
TO
FURTHER
OPTIMIZE
PARALLEL
COMPUTATION
CURRENT
STATE
OF
THE
ART
ARCHITECTURES
FOR
COMPUTER
VISION
HAVE
UNIFORM
STRUCTURE
THE
LARGE
NUMBER
OF
FILTERS
AND
GREATER
BATCH
SIZE
ALLOWS
FOR
THE
EFFICIENT
USE
OF
DENSE
COMPUTATION
THIS
RAISES
THE
QUESTION
OF
WHETHER
THERE
IS
ANY
HOPE
FOR
A
NEXT
INTERMEDIATE
STEP
AN
ARCHITECTURE
THAT
MAKES
USE
OF
FILTER
LEVEL
SPARSITY
AS
SUGGESTED
BY
THE
THEORY
BUT
EXPLOITS
OUR
CURRENT
HARDWARE
BY
UTILIZING
COMPUTATIONS
ON
DENSE
MATRICES
THE
VAST
LITERATURE
ON
SPARSE
MATRIX
COMPUTATIONS
E
G
SUGGESTS
THAT
CLUSTERING
SPARSE
MATRICES
INTO
RELATIVELY
DENSE
SUBMATRICES
TENDS
TO
GIVE
COMPETITIVE
PERFORMANCE
FOR
SPARSE
MATRIX
MULTIPLICATION
IT
DOES
NOT
SEEM
FAR
FETCHED
TO
THINK
THAT
SIMILAR
METHODS
WOULD
BE
UTILIZED
FOR
THE
AUTOMATED
CONSTRUCTION
OF
NON
UNIFORM
DEEPLEARNING
ARCHITECTURES
IN
THE
NEAR
FUTURE
THE
INCEPTION
ARCHITECTURE
STARTED
OUT
AS
A
CASE
STUDY
FOR
ASSESSING
THE
HYPOTHETICAL
OUTPUT
OF
A
SOPHISTICATED
NETWORK
TOPOLOGY
CONSTRUCTION
ALGORITHM
THAT
TRIES
TO
APPROXIMATE
A
SPARSE
STRUCTURE
IMPLIED
BY
FOR
VISION
NETWORKS
AND
COVERING
THE
HYPOTHESIZED
OUTCOME
BY
DENSE
READILY
AVAILABLE
COMPONENTS
DESPITE
BEING
A
HIGHLY
SPECULATIVE
UNDERTAKING
MODEST
GAINS
WERE
OBSERVED
EARLY
ON
WHEN
COMPARED
WITH
REFERENCE
NETWORKS
BASED
ON
WITH
A
BIT
OF
TUNING
THE
GAP
WIDENED
AND
INCEPTION
PROVED
TO
BE
ESPECIALLY
USEFUL
IN
THE
CONTEXT
OF
LOCALIZATION
AND
OBJECT
DETECTION
AS
THE
BASE
NETWORK
FOR
AND
INTERESTINGLY
WHILE
MOST
OF
THE
ORIGINAL
ARCHITECTURAL
CHOICES
HAVE
BEEN
QUESTIONED
AND
TESTED
THOROUGHLY
IN
SEPARATION
THEY
TURNED
OUT
TO
BE
CLOSE
TO
OPTIMAL
LOCALLY
ONE
MUST
BE
CAUTIOUS
THOUGH
ALTHOUGH
THE
INCEPTION
ARCHITECTURE
HAS
BECOME
A
SUCCESS
FOR
COMPUTER
VISION
IT
IS
STILL
QUESTIONABLE
WHETHER
THIS
CAN
BE
ATTRIBUTED
TO
THE
GUIDING
PRINCIPLES
THAT
HAVE
LEAD
TO
ITS
CONSTRUCTION
MAKING
SURE
OF
THIS
WOULD
REQUIRE
A
MUCH
MORE
THOROUGH
ANALYSIS
AND
VERIFICATION
ARCHITECTURAL
DETAILS
THE
MAIN
IDEA
OF
THE
INCEPTION
ARCHITECTURE
IS
TO
CONSIDER
HOW
AN
OPTIMAL
LOCAL
SPARSE
STRUCTURE
OF
A
CONVOLUTIONAL
VISION
NETWORK
CAN
BE
APPROXIMATED
AND
COVERED
BY
READILY
AVAILABLE
DENSE
COMPONENTS
NOTE
THAT
ASSUMING
TRANSLATION
INVARIANCE
MEANS
THAT
OUR
NETWORK
WILL
BE
BUILT
FROM
CONVOLUTIONAL
BUILDING
BLOCKS
ALL
WE
NEED
IS
TO
FIND
THE
OPTIMAL
LOCAL
CONSTRUCTION
AND
TO
REPEAT
IT
SPATIALLY
ARORA
ET
AL
SUGGESTS
A
LAYER
BY
LAYER
CONSTRUCTION
WHERE
ONE
SHOULD
ANALYZE
THE
CORRELATION
STATISTICS
OF
THE
LAST
LAYER
AND
CLUSTER
THEM
INTO
GROUPS
OF
UNITS
WITH
HIGH
CORRELATION
THESE
CLUSTERS
FORM
THE
UNITS
OF
THE
NEXT
LAYER
AND
ARE
CONNECTED
TO
THE
UNITS
IN
THE
PREVIOUS
LAYER
WE
ASSUME
THAT
EACH
UNIT
FROM
AN
EARLIER
LAYER
CORRESPONDS
TO
SOME
REGION
OF
THE
INPUT
IMAGE
AND
THESE
UNITS
ARE
GROUPED
INTO
FILTER
BANKS
IN
THE
LOWER
LAYERS
THE
ONES
CLOSE
TO
THE
INPUT
CORRELATED
UNITS
WOULD
CONCENTRATE
IN
LOCAL
REGIONS
THUS
WE
WOULD
END
UP
WITH
A
LOT
OF
CLUSTERS
CONCENTRATED
IN
A
SINGLE
REGION
AND
THEY
CAN
BE
COVERED
BY
A
LAYER
OF
CONVOLUTIONS
IN
THE
NEXT
LAYER
AS
SUGGESTED
IN
HOWEVER
ONE
CAN
ALSO
EXPECT
THAT
THERE
WILL
BE
A
SMALLER
NUMBER
OF
MORE
SPATIALLY
SPREAD
OUT
CLUSTERS
THAT
CAN
BE
COVERED
BY
CONVOLUTIONS
OVER
LARGER
PATCHES
AND
THERE
WILL
BE
A
DECREASING
NUMBER
OF
PATCHES
OVER
LARGER
AND
LARGER
REGIONS
IN
ORDER
TO
AVOID
PATCH
ALIGNMENT
ISSUES
CURRENT
INCARNATIONS
OF
THE
INCEPTION
ARCHITECTURE
ARE
RESTRICTED
TO
FILTER
SIZES
AND
THIS
DECISION
WAS
BASED
MORE
ON
CONVENIENCE
RATHER
THAN
NECESSITY
IT
ALSO
MEANS
THAT
THE
SUGGESTED
ARCHITECTURE
IS
A
COMBINATION
OF
ALL
THOSE
LAYERS
WITH
THEIR
OUTPUT
FILTER
BANKS
CONCATENATED
INTO
A
SINGLE
OUTPUT
VECTOR
FORMING
THE
INPUT
OF
THE
NEXT
STAGE
ADDITIONALLY
SINCE
POOLING
OPERATIONS
HAVE
BEEN
ESSENTIAL
FOR
THE
SUCCESS
OF
CURRENT
CONVOLUTIONAL
NETWORKS
IT
SUGGESTS
THAT
ADDING
AN
ALTERNATIVE
PARALLEL
POOLING
PATH
IN
EACH
SUCH
STAGE
SHOULD
HAVE
ADDITIONAL
BENEFICIAL
EFFECT
TOO
SEE
FIGURE
A
AS
THESE
INCEPTION
MODULES
ARE
STACKED
ON
TOP
OF
EACH
OTHER
THEIR
OUTPUT
CORRELATION
STATISTICS
ARE
BOUND
TO
VARY
AS
FEATURES
OF
HIGHER
ABSTRACTION
ARE
CAPTURED
BY
HIGHER
LAYERS
THEIR
SPATIAL
CONCENTRATION
IS
EXPECTED
TO
DECREASE
THIS
SUGGESTS
THAT
THE
RATIO
OF
AND
CONVOLUTIONS
SHOULD
INCREASE
AS
WE
MOVE
TO
HIGHER
LAYERS
ONE
BIG
PROBLEM
WITH
THE
ABOVE
MODULES
AT
LEAST
IN
THIS
NA
IVE
FORM
IS
THAT
EVEN
A
MODEST
NUMBER
OF
CONVOLUTIONS
CAN
BE
PROHIBITIVELY
EXPENSIVE
ON
TOP
OF
A
CONVOLUTIONAL
LAYER
WITH
A
LARGE
NUMBER
OF
FILTERS
THIS
PROBLEM
BECOMES
EVEN
MORE
PRONOUNCED
ONCE
POOLING
UNITS
ARE
ADDED
TO
THE
MIX
THE
NUMBER
OF
OUTPUT
FILTERS
EQUALS
TO
THE
CONVOLUTIONS
CONVOLUTIONS
CONVOLUTIONS
FILTER
CONCATENATION
PREVIOUS
LAYER
MAX
POOLING
A
INCEPTION
MODULE
NA
IVE
VERSION
CONVOLUTIONS
CONVOLUTIONS
CONVOLUTIONS
FILTER
CONCATENATION
PREVIOUS
LAYER
CONVOLUTIONS
CONVOLUTIONS
MAX
POOLING
CONVOLUTIONS
B
INCEPTION
MODULE
WITH
DIMENSIONALITY
REDUCTION
FIGURE
INCEPTION
MODULE
BER
OF
FILTERS
IN
THE
PREVIOUS
STAGE
THE
MERGING
OF
OUTPUT
OF
THE
POOLING
LAYER
WITH
OUTPUTS
OF
THE
CONVOLUTIONAL
LAYERS
WOULD
LEAD
TO
AN
INEVITABLE
INCREASE
IN
THE
NUMBER
OF
OUTPUTS
FROM
STAGE
TO
STAGE
WHILE
THIS
ARCHITECTURE
MIGHT
COVER
THE
OPTIMAL
SPARSE
STRUCTURE
IT
WOULD
DO
IT
VERY
INEFFICIENTLY
LEADING
TO
A
COMPUTATIONAL
BLOW
UP
WITHIN
A
FEW
STAGES
THIS
LEADS
TO
THE
SECOND
IDEA
OF
THE
INCEPTION
ARCHITECTURE
JUDICIOUSLY
REDUCING
DIMENSION
WHEREVER
THE
COMPUTATIONAL
REQUIREMENTS
WOULD
INCREASE
TOO
MUCH
OTHERWISE
THIS
IS
BASED
ON
THE
SUCCESS
OF
EMBEDDINGS
EVEN
LOW
DIMENSIONAL
EMBEDDINGS
MIGHT
CONTAIN
A
LOT
OF
INFORMATION
ABOUT
A
RELATIVELY
LARGE
IMAGE
PATCH
HOWEVER
EMBEDDINGS
REPRESENT
INFORMATION
IN
A
DENSE
COMPRESSED
FORM
AND
COMPRESSED
INFORMATION
IS
HARDER
TO
PROCESS
THE
REPRESENTATION
SHOULD
BE
KEPT
SPARSE
AT
MOST
PLACES
AS
REQUIRED
BY
THE
CONDITIONS
OF
AND
COMPRESS
THE
SIGNALS
ONLY
WHENEVER
THEY
HAVE
TO
BE
AGGREGATED
EN
MASSE
THAT
IS
CONVOLUTIONS
ARE
USED
TO
COMPUTE
REDUCTIONS
BEFORE
THE
EXPENSIVE
AND
CONVOLUTIONS
BESIDES
BEING
USED
AS
REDUCTIONS
THEY
ALSO
INCLUDE
THE
USE
OF
RECTIFIED
LINEAR
ACTIVATION
MAKING
THEM
DUAL
PURPOSE
THE
FINAL
RESULT
IS
DEPICTED
IN
FIGURE
B
IN
GENERAL
AN
INCEPTION
NETWORK
IS
A
NETWORK
CONSISTING
OF
MODULES
OF
THE
ABOVE
TYPE
STACKED
UPON
EACH
OTHER
WITH
OCCASIONAL
MAX
POOLING
LAYERS
WITH
STRIDE
TO
HALVE
THE
RESOLUTION
OF
THE
GRID
FOR
TECHNICAL
REASONS
MEMORY
EFFICIENCY
DURING
TRAINING
IT
SEEMED
BENEFICIAL
TO
START
USING
INCEPTION
MODULES
ONLY
AT
HIGHER
LAYERS
WHILE
KEEPING
THE
LOWER
LAYERS
IN
TRADITIONAL
CONVOLUTIONAL
FASHION
THIS
IS
NOT
STRICTLY
NECESSARY
SIMPLY
REFLECTING
SOME
INFRASTRUCTURAL
INEFFICIENCIES
IN
OUR
CURRENT
IMPLEMENTATION
A
USEFUL
ASPECT
OF
THIS
ARCHITECTURE
IS
THAT
IT
ALLOWS
FOR
INCREASING
THE
NUMBER
OF
UNITS
AT
EACH
STAGE
SIGNIFICANTLY
WITHOUT
AN
UNCONTROLLED
BLOW
UP
IN
COMPUTATIONAL
COMPLEXITY
AT
LATER
STAGES
THIS
IS
ACHIEVED
BY
THE
UBIQUITOUS
USE
OF
DIMENSIONALITY
REDUCTION
PRIOR
TO
EXPENSIVE
CONVOLUTIONS
WITH
LARGER
PATCH
SIZES
FURTHERMORE
THE
DESIGN
FOLLOWS
THE
PRACTICAL
INTUITION
THAT
VISUAL
INFORMATION
SHOULD
BE
PROCESSED
AT
VARIOUS
SCALES
AND
THEN
AGGREGATED
SO
THAT
THE
NEXT
STAGE
CAN
ABSTRACT
FEATURES
FROM
THE
DIFFERENT
SCALES
SIMULTANEOUSLY
THE
IMPROVED
USE
OF
COMPUTATIONAL
RESOURCES
ALLOWS
FOR
INCREASING
BOTH
THE
WIDTH
OF
EACH
STAGE
AS
WELL
AS
THE
NUMBER
OF
STAGES
WITHOUT
GETTING
INTO
COMPUTATIONAL
DIFFICULTIES
ONE
CAN
UTILIZE
THE
INCEPTION
ARCHITECTURE
TO
CREATE
SLIGHTLY
INFERIOR
BUT
COMPUTATIONALLY
CHEAPER
VERSIONS
OF
IT
WE
HAVE
FOUND
THAT
ALL
THE
AVAILABLE
KNOBS
AND
LEVERS
ALLOW
FOR
A
CONTROLLED
BALANCING
OF
COMPUTATIONAL
RESOURCES
RESULTING
IN
NETWORKS
THAT
ARE
FASTER
THAN
SIMILARLY
PERFORMING
NETWORKS
WITH
NON
INCEPTION
ARCHITECTURE
HOWEVER
THIS
REQUIRES
CAREFUL
MANUAL
DESIGN
AT
THIS
POINT
GOOGLENET
BY
THE
GOOGLENET
NAME
WE
REFER
TO
THE
PARTICULAR
INCARNATION
OF
THE
INCEPTION
ARCHITECTURE
USED
IN
OUR
SUBMISSION
FOR
THE
ILSVRC
COMPETITION
WE
ALSO
USED
ONE
DEEPER
AND
WIDER
INCEPTION
NETWORK
WITH
SLIGHTLY
SUPERIOR
QUALITY
BUT
ADDING
IT
TO
THE
ENSEMBLE
SEEMED
TO
IMPROVE
THE
RESULTS
ONLY
MARGINALLY
WE
OMIT
THE
DETAILS
OF
THAT
NETWORK
AS
EMPIRICAL
EVIDENCE
SUGGESTS
THAT
THE
INFLUENCE
OF
THE
EXACT
ARCHITECTURAL
PARAMETERS
IS
RELATIVELY
MINOR
TABLE
ILLUSTRATES
THE
MOST
COMMON
INSTANCE
OF
INCEPTION
USED
IN
THE
COMPETITION
THIS
NETWORK
TRAINED
WITH
DIFFERENT
IMAGEPATCH
SAMPLING
METHODS
WAS
USED
FOR
OUT
OF
THE
MODELS
IN
OUR
ENSEMBLE
ALL
THE
CONVOLUTIONS
INCLUDING
THOSE
INSIDE
THE
INCEPTION
MODULES
USE
RECTIFIED
LINEAR
ACTIVATION
THE
SIZE
OF
THE
RECEPTIVE
FIELD
IN
OUR
NETWORK
IS
IN
THE
RGB
COLOR
SPACE
WITH
ZERO
MEAN
REDUCE
AND
REDUCE
STANDS
FOR
THE
NUMBER
OF
FILTERS
IN
THE
REDUCTION
LAYER
USED
BEFORE
THE
AND
CONVOLUTIONS
ONE
CAN
SEE
THE
NUMBER
OF
FILTERS
IN
THE
PROJECTION
LAYER
AFTER
THE
BUILT
IN
MAX
POOLING
IN
THE
POOL
PROJ
COLUMN
ALL
THESE
REDUCTION
PROJECTION
LAYERS
USE
RECTIFIED
LINEAR
ACTIVATION
AS
WELL
THE
NETWORK
WAS
DESIGNED
WITH
COMPUTATIONAL
EFFICIENCY
AND
PRACTICALITY
IN
MIND
SO
THAT
INFERENCE
CAN
BE
RUN
ON
INDIVIDUAL
DEVICES
INCLUDING
EVEN
THOSE
WITH
LIMITED
COMPUTATIONAL
RESOURCES
ESPECIALLY
WITH
LOW
MEMORY
FOOTPRINT
TYPE
PATCH
SIZE
STRIDE
OUTPUT
SIZE
DEPTH
REDUCE
REDUCE
POOL
PROJ
PARAMS
OPS
CONVOLUTION
MAX
POOL
CONVOLUTION
MAX
POOL
INCEPTION
INCEPTION
MAX
POOL
INCEPTION
INCEPTION
INCEPTION
INCEPTION
INCEPTION
MAX
POOL
INCEPTION
INCEPTION
AVG
POOL
DROPOUT
LINEAR
SOFTMAX
TABLE
GOOGLENET
INCARNATION
OF
THE
INCEPTION
ARCHITECTURE
THE
NETWORK
IS
LAYERS
DEEP
WHEN
COUNTING
ONLY
LAYERS
WITH
PARAMETERS
OR
LAYERS
IF
WE
ALSO
COUNT
POOLING
THE
OVERALL
NUMBER
OF
LAYERS
INDEPENDENT
BUILDING
BLOCKS
USED
FOR
THE
CONSTRUCTION
OF
THE
NETWORK
IS
ABOUT
THE
EXACT
NUMBER
DEPENDS
ON
HOW
LAYERS
ARE
COUNTED
BY
THE
MACHINE
LEARNING
INFRASTRUCTURE
THE
USE
OF
AVERAGE
POOLING
BEFORE
THE
CLASSIFIER
IS
BASED
ON
ALTHOUGH
OUR
IMPLEMENTATION
HAS
AN
ADDITIONAL
LINEAR
LAYER
THE
LINEAR
LAYER
ENABLES
US
TO
EASILY
ADAPT
OUR
NETWORKS
TO
OTHER
LABEL
SETS
HOWEVER
IT
IS
USED
MOSTLY
FOR
CONVENIENCE
AND
WE
DO
NOT
EXPECT
IT
TO
HAVE
A
MAJOR
EFFECT
WE
FOUND
THAT
A
MOVE
FROM
FULLY
CONNECTED
LAYERS
TO
AVERAGE
POOLING
IMPROVED
THE
TOP
ACCURACY
BY
ABOUT
HOWEVER
THE
USE
OF
DROPOUT
REMAINED
ESSENTIAL
EVEN
AFTER
REMOVING
THE
FULLY
CONNECTED
LAYERS
GIVEN
RELATIVELY
LARGE
DEPTH
OF
THE
NETWORK
THE
ABILITY
TO
PROPAGATE
GRADIENTS
BACK
THROUGH
ALL
THE
LAYERS
IN
AN
EFFECTIVE
MANNER
WAS
A
CONCERN
THE
STRONG
PERFORMANCE
OF
SHALLOWER
NETWORKS
ON
THIS
TASK
SUGGESTS
THAT
THE
FEATURES
PRODUCED
BY
THE
LAYERS
IN
THE
MIDDLE
OF
THE
NETWORK
SHOULD
BE
VERY
DISCRIMINATIVE
BY
ADDING
AUXILIARY
CLASSIFIERS
CONNECTED
TO
THESE
INTERMEDIATE
LAYERS
DISCRIMINATION
IN
THE
LOWER
STAGES
IN
THE
CLASSIFIER
WAS
EXPECTED
THIS
WAS
THOUGHT
TO
COMBAT
THE
VANISHING
GRADIENT
PROBLEM
WHILE
PROVIDING
REGULARIZATION
THESE
CLASSIFIERS
TAKE
THE
FORM
OF
SMALLER
CONVOLUTIONAL
NETWORKS
PUT
ON
TOP
OF
THE
OUTPUT
OF
THE
INCEPTION
AND
MODULES
DURING
TRAINING
THEIR
LOSS
GETS
ADDED
TO
THE
TOTAL
LOSS
OF
THE
NETWORK
WITH
A
DISCOUNT
WEIGHT
THE
LOSSES
OF
THE
AUXILIARY
CLASSIFIERS
WERE
WEIGHTED
BY
AT
INFERENCE
TIME
THESE
AUXILIARY
NETWORKS
ARE
DISCARDED
LATER
CONTROL
EXPERIMENTS
HAVE
SHOWN
THAT
THE
EFFECT
OF
THE
AUXILIARY
NETWORKS
IS
RELATIVELY
MINOR
AROUND
AND
THAT
IT
REQUIRED
ONLY
ONE
OF
THEM
TO
ACHIEVE
THE
SAME
EFFECT
THE
EXACT
STRUCTURE
OF
THE
EXTRA
NETWORK
ON
THE
SIDE
INCLUDING
THE
AUXILIARY
CLASSIFIER
IS
AS
FOLLOWS
AN
AVERAGE
POOLING
LAYER
WITH
FILTER
SIZE
AND
STRIDE
RESULTING
IN
AN
OUTPUT
FOR
THE
AND
FOR
THE
STAGE
A
CONVOLUTION
WITH
FILTERS
FOR
DIMENSION
REDUCTION
AND
RECTIFIED
LINEAR
ACTIVATION
A
FULLY
CONNECTED
LAYER
WITH
UNITS
AND
RECTIFIED
LINEAR
ACTIVATION
A
DROPOUT
LAYER
WITH
RATIO
OF
DROPPED
OUTPUTS
A
LINEAR
LAYER
WITH
SOFTMAX
LOSS
AS
THE
CLASSIFIER
PREDICTING
THE
SAME
CLASSES
AS
THE
MAIN
CLASSIFIER
BUT
REMOVED
AT
INFERENCE
TIME
A
SCHEMATIC
VIEW
OF
THE
RESULTING
NETWORK
IS
DEPICTED
IN
FIGURE
TRAINING
METHODOLOGY
GOOGLENET
NETWORKS
WERE
TRAINED
USING
THE
DISTBELIEF
DISTRIBUTED
MACHINE
LEARNING
SYSTEM
USING
MODEST
AMOUNT
OF
MODEL
AND
DATA
PARALLELISM
ALTHOUGH
WE
USED
A
CPU
BASED
IMPLEMENTATION
ONLY
A
ROUGH
ESTIMATE
SUGGESTS
THAT
THE
GOOGLENET
NETWORK
COULD
BE
TRAINED
TO
CONVERGENCE
USING
FEW
HIGH
END
GPUS
WITHIN
A
WEEK
THE
MAIN
LIMITATION
BEING
THE
MEMORY
USAGE
OUR
TRAINING
USED
ASYNCHRONOUS
STOCHASTIC
GRADIENT
DESCENT
WITH
MOMENTUM
FIXED
LEARNING
RATE
SCHEDULE
DECREASING
THE
LEARNING
RATE
BY
EVERY
EPOCHS
POLYAK
AVERAGING
WAS
USED
TO
CREATE
THE
FINAL
MODEL
USED
AT
INFERENCE
TIME
IMAGE
SAMPLING
METHODS
HAVE
CHANGED
SUBSTANTIALLY
OVER
THE
MONTHS
LEADING
TO
THE
COMPETITION
AND
ALREADY
CONVERGED
MODELS
WERE
TRAINED
ON
WITH
OTHER
OPTIONS
SOMETIMES
IN
CONJUNCTION
WITH
CHANGED
HYPERPARAMETERS
SUCH
AS
DROPOUT
AND
THE
LEARNING
RATE
THEREFORE
IT
IS
HARD
TO
GIVE
A
DEFINITIVE
GUIDANCE
TO
THE
MOST
EFFECTIVE
SINGLE
WAY
TO
TRAIN
THESE
NETWORKS
TO
COMPLICATE
MATTERS
FURTHER
SOME
OF
THE
MODELS
WERE
MAINLY
TRAINED
ON
SMALLER
RELATIVE
CROPS
OTHERS
ON
LARGER
ONES
INSPIRED
BY
STILL
ONE
PRESCRIPTION
THAT
WAS
VERIFIED
TO
WORK
VERY
WELL
AFTER
THE
COMPETITION
INCLUDES
SAMPLING
OF
VARIOUS
SIZED
PATCHES
OF
THE
IMAGE
WHOSE
SIZE
IS
DISTRIBUTED
EVENLY
BETWEEN
AND
OF
THE
IMAGE
AREA
WITH
ASPECT
RATIO
CONSTRAINED
TO
THE
INTERVAL
ALSO
WE
FOUND
THAT
THE
PHOTOMETRIC
DISTORTIONS
OF
ANDREW
HOWARD
WERE
USEFUL
TO
COMBAT
OVERFITTING
TO
THE
IMAGING
CONDITIONS
OF
TRAINING
DATA
ILSVRC
CLASSIFICATION
CHALLENGE
SETUP
AND
RESULTS
THE
ILSVRC
CLASSIFICATION
CHALLENGE
INVOLVES
THE
TASK
OF
CLASSIFYING
THE
IMAGE
INTO
ONE
OF
LEAF
NODE
CATEGORIES
IN
THE
IMAGENET
HIERARCHY
THERE
ARE
ABOUT
MILLION
IMAGES
FOR
TRAINING
FOR
VALIDATION
AND
IMAGES
FOR
TESTING
EACH
IMAGE
IS
ASSOCIATED
WITH
ONE
GROUND
TRUTH
CATEGORY
AND
PERFORMANCE
IS
MEASURED
BASED
ON
THE
HIGHEST
SCORING
CLASSIFIER
PREDICTIONS
TWO
NUMBERS
ARE
USUALLY
REPORTED
THE
TOP
ACCURACY
RATE
WHICH
COMPARES
THE
GROUND
TRUTH
AGAINST
THE
FIRST
PREDICTED
CLASS
AND
THE
TOP
ERROR
RATE
WHICH
COMPARES
THE
GROUND
TRUTH
AGAINST
THE
FIRST
PREDICTED
CLASSES
AN
IMAGE
IS
DEEMED
CORRECTLY
CLASSIFIED
IF
THE
GROUND
TRUTH
IS
AMONG
THE
TOP
REGARDLESS
OF
ITS
RANK
IN
THEM
THE
CHALLENGE
USES
THE
TOP
ERROR
RATE
FOR
RANKING
PURPOSES
INPUT
GOOGLENET
NETWORK
WITH
ALL
THE
BELLS
AND
WHISTLES
WE
PARTICIPATED
IN
THE
CHALLENGE
WITH
NO
EXTERNAL
DATA
USED
FOR
TRAINING
IN
ADDITION
TO
THE
TRAINING
TECHNIQUES
AFOREMENTIONED
IN
THIS
PAPER
WE
ADOPTED
A
SET
OF
TECHNIQUES
DURING
TESTING
TO
OBTAIN
A
HIGHER
PERFORMANCE
WHICH
WE
DESCRIBE
NEXT
WE
INDEPENDENTLY
TRAINED
VERSIONS
OF
THE
SAME
GOOGLENET
MODEL
INCLUDING
ONE
WIDER
VERSION
AND
PERFORMED
ENSEMBLE
PREDICTION
WITH
THEM
THESE
MODELS
WERE
TRAINED
WITH
THE
SAME
INITIALIZATION
EVEN
WITH
THE
SAME
INITIAL
WEIGHTS
DUE
TO
AN
OVERSIGHT
AND
LEARNING
RATE
POLICIES
THEY
DIFFERED
ONLY
IN
SAMPLING
METHODOLOGIES
AND
THE
RANDOMIZED
INPUT
IMAGE
ORDER
DURING
TESTING
WE
ADOPTED
A
MORE
AGGRESSIVE
CROPPING
APPROACH
THAN
THAT
OF
KRIZHEVSKY
ET
AL
SPECIFICALLY
WE
RESIZED
THE
IMAGE
TO
SCALES
WHERE
THE
SHORTER
DIMENSION
HEIGHT
OR
WIDTH
IS
AND
RESPECTIVELY
TAKE
THE
LEFT
CENTER
AND
RIGHT
SQUARE
OF
THESE
RESIZED
IMAGES
IN
THE
CASE
OF
PORTRAIT
IMAGES
WE
TAKE
THE
TOP
CENTER
AND
BOTTOM
SQUARES
FOR
EACH
SQUARE
WE
THEN
TAKE
THE
CORNERS
AND
THE
CENTER
CROP
AS
WELL
AS
THE
SQUARE
RESIZED
TO
AND
THEIR
MIRRORED
VERSIONS
THIS
LEADS
TO
CROPS
PER
IMAGE
A
SIMILAR
APPROACH
WAS
USED
BY
ANDREW
HOWARD
IN
THE
PREVIOUS
YEAR
ENTRY
WHICH
WE
EMPIRICALLY
VERIFIED
TO
PERFORM
SLIGHTLY
WORSE
THAN
THE
PROPOSED
SCHEME
WE
NOTE
THAT
SUCH
AGGRESSIVE
CROPPING
MAY
NOT
BE
NECESSARY
IN
REAL
APPLICATIONS
AS
THE
BENEFIT
OF
MORE
CROPS
BECOMES
MARGINAL
AFTER
A
REASONABLE
NUMBER
OF
CROPS
ARE
PRESENT
AS
WE
WILL
SHOW
LATER
ON
THE
SOFTMAX
PROBABILITIES
ARE
AVERAGED
OVER
MULTIPLE
CROPS
AND
OVER
ALL
THE
INDIVIDUAL
CLASSIFIERS
TO
OBTAIN
THE
FINAL
PREDICTION
IN
OUR
EXPERIMENTS
WE
ANALYZED
ALTERNATIVE
APPROACHES
ON
THE
VALIDATION
DATA
SUCH
AS
MAX
POOLING
OVER
CROPS
AND
AVERAGING
OVER
CLASSIFIERS
BUT
THEY
LEAD
TO
INFERIOR
PERFORMANCE
THAN
THE
SIMPLE
AVERAGING
IN
THE
REMAINDER
OF
THIS
PAPER
WE
ANALYZE
THE
MULTIPLE
FACTORS
THAT
CONTRIBUTE
TO
THE
OVERALL
PERFORMANCE
OF
THE
FINAL
SUBMISSION
OUR
FINAL
SUBMISSION
TO
THE
CHALLENGE
OBTAINS
A
TOP
ERROR
OF
ON
BOTH
THE
VALIDATION
AND
TESTING
DATA
RANKING
THE
FIRST
AMONG
OTHER
PARTICIPANTS
THIS
IS
A
RELATIVE
REDUCTION
COMPARED
TO
THE
SUPERVISION
APPROACH
IN
AND
ABOUT
RELATIVE
REDUCTION
COMPARED
TO
THE
PREVIOUS
YEAR
BEST
APPROACH
CLARIFAI
BOTH
OF
WHICH
USED
EXTERNAL
DATA
FOR
TRAINING
THE
CLASSIFIERS
TABLE
SHOWS
THE
STATISTICS
OF
SOME
OF
THE
TOP
PERFORMING
APPROACHES
OVER
THE
PAST
YEARS
WE
ALSO
ANALYZE
AND
REPORT
THE
PERFORMANCE
OF
MULTIPLE
TESTING
CHOICES
BY
VARYING
THE
NUMBER
OF
MODELS
AND
THE
TEAM
YEAR
PLACE
ERROR
TOP
USES
EXTERNAL
DATA
SUPERVISION
NO
SUPERVISION
IMAGENET
CLARIFAI
NO
CLARIFAI
IMAGENET
MSRA
NO
VGG
NO
GOOGLENET
NO
TABLE
CLASSIFICATION
PERFORMANCE
NUMBER
OF
MODELS
NUMBER
OF
CROPS
COST
TOP
ERROR
COMPARED
TO
BASE
BASE
TABLE
GOOGLENET
CLASSIFICATION
PERFORMANCE
BREAK
DOWN
NUMBER
OF
CROPS
USED
WHEN
PREDICTING
AN
IMAGE
IN
TABLE
WHEN
WE
USE
ONE
MODEL
WE
CHOSE
THE
ONE
WITH
THE
LOWEST
TOP
ERROR
RATE
ON
THE
VALIDATION
DATA
ALL
NUMBERS
ARE
REPORTED
ON
THE
VALIDATION
DATASET
IN
ORDER
TO
NOT
OVERFIT
TO
THE
TESTING
DATA
STATISTICS
ILSVRC
DETECTION
CHALLENGE
SETUP
AND
RESULTS
THE
ILSVRC
DETECTION
TASK
IS
TO
PRODUCE
BOUNDING
BOXES
AROUND
OBJECTS
IN
IMAGES
AMONG
POSSIBLE
CLASSES
DETECTED
OBJECTS
COUNT
AS
CORRECT
IF
THEY
MATCH
THE
CLASS
OF
THE
GROUNDTRUTH
AND
THEIR
BOUNDING
BOXES
OVERLAP
BY
AT
LEAST
USING
THE
JACCARD
INDEX
EXTRANEOUS
DETECTIONS
COUNT
AS
FALSE
POSITIVES
AND
ARE
PENALIZED
CONTRARY
TO
THE
CLASSIFICATION
TASK
EACH
IMAGE
MAY
CONTAIN
MANY
OBJECTS
OR
NONE
AND
THEIR
SCALE
MAY
VARY
RESULTS
ARE
REPORTED
USING
THE
MEAN
AVERAGE
PRECISION
MAP
THE
APPROACH
TAKEN
BY
GOOGLENET
FOR
DETECTION
IS
SIMILAR
TO
THE
R
CNN
BY
BUT
IS
AUGMENTED
WITH
THE
INCEPTION
MODEL
AS
THE
REGION
CLASSIFIER
ADDITIONALLY
THE
REGION
PROPOSAL
STEP
IS
IMPROVED
BY
COMBINING
THE
SELECTIVE
SEARCH
APPROACH
WITH
MULTIBOX
PREDICTIONS
FOR
HIGHER
OBJECT
BOUNDING
BOX
RECALL
IN
ORDER
TO
REDUCE
THE
NUMBER
OF
FALSE
POSITIVES
THE
SUPERTEAM
YEAR
PLACE
MAP
EXTERNAL
DATA
ENSEMBLE
APPROACH
UVA
EUVISION
NONE
FISHER
VECTORS
DEEP
INSIGHT
IMAGENET
CNN
CUHK
DEEPID
NET
IMAGENET
CNN
GOOGLENET
IMAGENET
CNN
TABLE
COMPARISON
OF
DETECTION
PERFORMANCES
UNREPORTED
VALUES
ARE
NOTED
WITH
QUESTION
MARKS
PIXEL
SIZE
WAS
INCREASED
BY
THIS
HALVES
THE
PROPOSALS
COMING
FROM
THE
SELECTIVE
SEARCH
ALGORITHM
WE
ADDED
BACK
REGION
PROPOSALS
COMING
FROM
MULTI
BOX
RESULTING
IN
TOTAL
IN
ABOUT
OF
THE
PROPOSALS
USED
BY
WHILE
INCREASING
THE
COVERAGE
FROM
TO
THE
OVERALL
EFFECT
OF
CUTTING
THE
NUMBER
OF
PROPOSALS
WITH
INCREASED
COVERAGE
IS
A
IMPROVEMENT
OF
THE
MEAN
AVERAGE
PRECISION
FOR
THE
SINGLE
MODEL
CASE
FINALLY
WE
USE
AN
ENSEMBLE
OF
GOOGLENETS
WHEN
CLASSIFYING
EACH
REGION
THIS
LEADS
TO
AN
INCREASE
IN
ACCURACY
FROM
TO
NOTE
THAT
CONTRARY
TO
R
CNN
WE
DID
NOT
USE
BOUNDING
BOX
REGRESSION
DUE
TO
LACK
OF
TIME
WE
FIRST
REPORT
THE
TOP
DETECTION
RESULTS
AND
SHOW
THE
PROGRESS
SINCE
THE
FIRST
EDITION
OF
THE
DETECTION
TASK
COMPARED
TO
THE
RESULT
THE
ACCURACY
HAS
ALMOST
DOUBLED
THE
TOP
PERFORMING
TEAMS
ALL
USE
CONVOLUTIONAL
NETWORKS
WE
REPORT
THE
OFFICIAL
SCORES
IN
TABLE
AND
COMMON
STRATEGIES
FOR
EACH
TEAM
THE
USE
OF
EXTERNAL
DATA
ENSEMBLE
MODELS
OR
CONTEXTUAL
MODELS
THE
EXTERNAL
DATA
IS
TYPICALLY
THE
CLASSIFICATION
DATA
FOR
PRE
TRAINING
A
MODEL
THAT
IS
LATER
REFINED
ON
THE
DETECTION
DATA
SOME
TEAMS
ALSO
MENTION
THE
USE
OF
THE
LOCALIZATION
DATA
SINCE
A
GOOD
PORTION
OF
THE
LOCALIZATION
TASK
BOUNDING
BOXES
ARE
NOT
INCLUDED
IN
THE
DETECTION
DATASET
ONE
CAN
PRE
TRAIN
A
GENERAL
BOUNDING
BOX
REGRESSOR
WITH
THIS
DATA
THE
SAME
WAY
CLASSIFICATION
IS
USED
FOR
PRE
TRAINING
THE
GOOGLENET
ENTRY
DID
NOT
USE
THE
LOCALIZATION
DATA
FOR
PRETRAINING
IN
TABLE
WE
COMPARE
RESULTS
USING
A
SINGLE
MODEL
ONLY
THE
TOP
PERFORMING
MODEL
IS
BY
DEEP
INSIGHT
AND
SURPRISINGLY
ONLY
IMPROVES
BY
POINTS
WITH
AN
ENSEMBLE
OF
MODELS
WHILE
THE
GOOGLENET
OBTAINS
SIGNIFICANTLY
STRONGER
RESULTS
WITH
THE
ENSEMBLE
CONCLUSIONS
OUR
RESULTS
YIELD
A
SOLID
EVIDENCE
THAT
APPROXIMATING
THE
EXPECTED
OPTIMAL
SPARSE
STRUCTURE
BY
READILY
AVAILABLE
DENSE
BUILDING
BLOCKS
IS
A
VIABLE
METHOD
FOR
IMPROVING
NEURAL
NETWORKS
FOR
COMPUTER
VISION
THE
MAIN
ADVANTAGE
OF
THIS
METHOD
IS
A
SIGNIFICANT
QUALITY
GAIN
AT
A
MODEST
INCREASE
OF
COMPUTATIONAL
REQUIREMENTS
COMPARED
TO
SHALLOWER
AND
NARROWER
ARCHITECTURES
OUR
OBJECT
DETECTION
WORK
WAS
COMPETITIVE
DESPITE
NOT
TEAM
MAP
CONTEXTUAL
MODEL
BOUNDING
BOX
REGRESSION
TRIMPS
SOUSHEN
NO
BERKELEY
VISION
NO
YES
UVAEUVISION
CUHK
NO
GOOGLENET
NO
NO
DEEP
INSIGHT
YES
YES
TABLE
SINGLE
MODEL
PERFORMANCE
FOR
DETECTION
UTILIZING
CONTEXT
NOR
PERFORMING
BOUNDING
BOX
REGRESSION
SUGGESTING
YET
FURTHER
EVIDENCE
OF
THE
STRENGTHS
OF
THE
INCEPTION
ARCHITECTURE
FOR
BOTH
CLASSIFICATION
AND
DETECTION
IT
IS
EXPECTED
THAT
SIMILAR
QUALITY
OF
RESULT
CAN
BE
ACHIEVED
BY
MUCH
MORE
EXPENSIVE
NON
INCEPTION
TYPE
NETWORKS
OF
SIMILAR
DEPTH
AND
WIDTH
STILL
OUR
APPROACH
YIELDS
SOLID
EVIDENCE
THAT
MOVING
TO
SPARSER
ARCHITECTURES
IS
FEASIBLE
AND
USEFUL
IDEA
IN
GENERAL
THIS
SUGGEST
FUTURE
WORK
TOWARDS
CREATING
SPARSER
AND
MORE
REFINED
STRUCTURES
IN
AUTOMATED
WAYS
ON
THE
BASIS
OF
AS
WELL
AS
ON
APPLYING
THE
INSIGHTS
OF
THE
INCEPTION
ARCHITECTURE
TO
OTHER
DOMAINS
SUPERPIXEL
ALGORITHMS
GROUP
PIXELS
INTO
PERCEPTUALLY
MEANINGFUL
ATOMIC
REGIONS
WHICH
CAN
BE
USED
TO
REPLACE
THE
RIGID
STRUCTURE
OF
THE
PIXEL
GRID
FIG
THEY
CAPTURE
IMAGE
REDUNDANCY
PROVIDE
A
CONVENIENT
PRIMITIVE
FROM
WHICH
TO
COMPUTE
IMAGE
FEATURES
AND
GREATLY
REDUCE
THE
COMPLEXITY
OF
SUBSEQUENT
IMAGE
PROCESSING
TASKS
THEY
HAVE
BECOME
KEY
BUILDING
BLOCKS
OF
MANY
COMPUTER
VISION
ALGORITHMS
SUCH
AS
TOP
SCORING
MULTICLASS
OBJECT
SEGMENTATION
ENTRIES
TO
THE
PASCAL
VOC
CHALLENGE
DEPTH
ESTIMATION
SEGMENTATION
BODY
MODEL
ESTIMATION
AND
OBJECT
LOCALIZATION
THERE
ARE
MANY
APPROACHES
TO
GENERATING
SUPERPIXELS
EACH
WITH
ITS
OWN
ADVANTAGES
AND
DRAWBACKS
THAT
MAY
BE
BETTER
SUITED
TO
A
PARTICULAR
APPLICATION
FOR
EXAMPLE
IF
ADHERENCE
TO
IMAGE
BOUNDARIES
IS
OF
PARAMOUNT
IMPORTANCE
THE
GRAPH
BASED
METHOD
OF
MAY
BE
AN
IDEAL
CHOICE
HOWEVER
IF
SUPERPIXELS
ARE
TO
BE
USED
TO
BUILD
A
GRAPH
A
METHOD
THAT
PRODUCES
A
MORE
REGULAR
LATTICE
SUCH
AS
IS
PROBABLY
A
BETTER
CHOICE
WHILE
IT
IS
DIFFICULT
TO
DEFINE
WHAT
CONSTITUTES
AN
IDEAL
APPROACH
FOR
ALL
APPLICATIONS
WE
BELIEVE
THE
FOLLOWING
PROPERTIES
ARE
GENERALLY
DESIRABLE
SUPERPIXELS
SHOULD
ADHERE
WELL
TO
IMAGE
BOUNDARIES
WHEN
USED
TO
REDUCE
COMPUTATIONAL
COMPLEXITY
AS
A
PREPROCESSING
STEP
SUPERPIXELS
SHOULD
BE
FAST
TO
COMPUTE
MEMORY
EFFICIENT
AND
SIMPLE
TO
USE
WHEN
USED
FOR
SEGMENTATION
PURPOSES
SUPERPIXELS
SHOULD
BOTH
INCREASE
THE
SPEED
AND
IMPROVE
THE
QUALITY
OF
THE
RESULTS
WE
THEREFORE
PERFORMED
AN
EMPIRICAL
COMPARISON
OF
FIVE
STATEOF
THE
ART
SUPERPIXEL
METHODS
EVALUATING
THEIR
SPEED
ABILITY
TO
ADHERE
TO
IMAGE
BOUNDARIES
AND
IMPACT
ON
SEGMENTATION
PERFORMANCE
WE
ALSO
PROVIDE
A
QUALITATIVE
REVIEW
OF
THESE
AND
OTHER
SUPERPIXEL
METHODS
OUR
CONCLUSION
IS
THAT
NO
EXISTING
METHOD
IS
SATISFACTORY
IN
ALL
REGARDS
TO
ADDRESS
THIS
WE
PROPOSE
A
NEW
SUPERPIXEL
ALGORITHM
SIMPLE
LINEAR
ITERATIVE
CLUSTERING
SLIC
WHICH
ADAPTS
K
MEANS
CLUSTERING
TO
GENERATE
SUPERPIXELS
IN
A
MANNER
SIMILAR
TO
WHILE
STRIKINGLY
SIMPLE
SLIC
IS
SHOWN
TO
YIELD
STATE
OF
THE
ART
ADHERENCE
TO
IMAGE
BOUNDARIES
ON
THE
BERKELEY
BENCHMARK
AND
OUTPERFORMS
EXISTING
METHODS
WHEN
USED
FOR
SEGMENTATION
ON
THE
PASCAL
AND
MSRC
DATA
SETS
FURTHERMORE
IT
IS
FASTER
AND
MORE
MEMORY
EFFICIENT
THAN
EXISTING
METHODS
IN
ADDITION
TO
THESE
QUANTIFIABLE
BENEFITS
SLIC
IS
EASY
TO
USE
OFFERS
FLEXIBILITY
IN
THE
COMPACTNESS
AND
NUMBER
OF
THE
SUPERPIXELS
IT
GENERATES
IS
STRAIGHTFORWARD
TO
EXTEND
TO
HIGHER
DIMENSIONS
AND
IS
FREELY
AVAILABLE
EXISTING
SUPERPIXEL
METHODS
ALGORITHMS
FOR
GENERATING
SUPERPIXELS
CAN
BE
BROADLY
CATEGORIZED
AS
EITHER
GRAPH
BASED
OR
GRADIENT
ASCENT
METHODS
BELOW
WE
REVIEW
POPULAR
SUPERPIXEL
METHODS
FOR
EACH
OF
THESE
CATEGORIES
INCLUDING
SOME
THAT
WERE
NOT
ORIGINALLY
DESIGNED
SPECIFICALLY
TO
GENERATE
SUPERPIXELS
TABLE
PROVIDES
A
QUALITATIVE
AND
QUANTITATIVE
SUMMARY
OF
THE
REVIEWED
METHODS
INCLUDING
THEIR
RELATIVE
PERFORMANCE
GRAPH
BASED
ALGORITHMS
GRAPH
BASED
APPROACHES
TO
SUPERPIXEL
GENERATION
TREAT
EACH
PIXEL
AS
A
NODE
IN
A
GRAPH
EDGE
WEIGHTS
BETWEEN
TWO
NODES
ARE
PROPORTIONAL
TO
THE
SIMILARITY
BETWEEN
NEIGHBORING
PIXELS
SUPERPIXELS
ARE
CREATED
BY
MINIMIZING
A
COST
FUNCTION
DEFINED
OVER
THE
GRAPH
THE
NORMALIZED
CUTS
ALGORITHM
RECURSIVELY
PARTITIONS
A
GRAPH
OF
ALL
PIXELS
IN
THE
IMAGE
USING
CONTOUR
AND
TEXTURE
CUES
GLOBALLY
MINIMIZING
A
COST
FUNCTION
DEFINED
ON
THE
EDGES
AT
THE
PARTITION
BOUNDARIES
IT
PRODUCES
VERY
REGULAR
VISUALLY
PLEASING
SUPERPIXELS
HOWEVER
THE
BOUNDARY
ADHERENCE
OF
IS
RELATIVELY
POOR
AND
IT
IS
THE
SLOWEST
AMONG
THE
METHODS
PARTICULARLY
FOR
LARGE
IMAGES
ALTHOUGH
ATTEMPTS
TO
SPEED
UP
THE
ALGORITHM
EXIST
HAS
A
COMPLEXITY
OF
Þ
WHERE
N
IS
THE
NUMBER
OF
PIXELS
FELZENSZWALB
AND
HUTTENLOCHER
PROPOSE
AN
ALTERNATIVE
GRAPH
BASED
APPROACH
THAT
HAS
BEEN
APPLIED
TO
GENERATE
SUPERPIXELS
IT
PERFORMS
AN
AGGLOMERATIVE
CLUSTERING
OF
PIXELS
AS
NODES
ON
A
GRAPH
SUCH
THAT
EACH
SUPERPIXEL
IS
THE
MINIMUM
SPANNING
TREE
OF
THE
CONSTITUENT
PIXELS
ADHERES
WELL
TO
IMAGE
BOUNDARIES
IN
PRACTICE
BUT
PRODUCES
SUPERPIXELS
WITH
VERY
IRREGULAR
SIZES
AND
SHAPES
IT
IS
OÐN
LOGNÞ
COMPLEX
AND
FAST
IN
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
R
ACHANTA
A
SHAJI
AND
SU
SSTRUNK
ARE
WITH
THE
IMAGES
AND
VISUAL
REPRESENTATION
GROUP
SCHOOL
OF
COMPUTER
AND
COMMUNICATION
SCIENCES
ECOLE
POLYTECHNIQUE
FE
DE
RALE
DE
LAUSANNE
STATION
EPFL
CH
LAUSANNE
SWITZERLAND
E
MAIL
RADHAKRISHNA
ACHANTA
APPU
SHAJI
SABINE
SUSSTRUNK
EPFL
CH
K
SMITH
IS
WITH
ETH
SWISS
FEDERAL
INSTITUTE
OF
TECHNOLOGY
ZURICH
LIGHT
MICROSCOPY
CENTER
INSTITUTE
FOR
BIOCHEMISTRY
SCHAFMATTSTRASSE
ETHZHONGGERBERG
CH
ZURICH
SWITZERLAND
E
MAIL
KEVIN
SMITH
LMC
BIOL
ETHZ
CH
A
LUCCHI
AND
P
FUA
ARE
WITH
THE
COMPUTER
VISION
LABORATORY
SCHOOL
OF
COMPUTER
AND
COMMUNICATION
SCIENCES
ECOLE
POLYTECHNIQUE
FE
DE
RALE
DE
LAUSANNE
STATION
BC
EPFL
CH
LAUSANNE
SWITZERLAND
E
MAIL
AURELINE
LUCCHI
PASCAL
FUA
EPFL
CH
MANUSCRIPT
RECEIVED
MAY
REVISED
JAN
ACCEPTED
MAY
PUBLISHED
ONLINE
MAY
RECOMMENDED
FOR
ACCEPTANCE
BY
P
FELZENSZWALB
FOR
INFORMATION
ON
OBTAINING
REPRINTS
OF
THIS
ARTICLE
PLEASE
SEND
E
MAIL
TO
TPAMI
COMPUTER
ORG
AND
REFERENCE
IEEECS
LOG
NUMBER
TPAMI
DIGITAL
OBJECT
IDENTIFIER
NO
TPAMI
CROSS
PLATFORM
EXECUTABLES
AND
SOURCE
CODE
FOR
SLIC
SUPERPIXELS
AND
SUPERVOXELS
CAN
BE
FOUND
AT
HTTP
IVRG
EPFL
CH
RESEARCH
SUPERPIXELS
IEEE
PUBLISHED
BY
THE
IEEE
COMPUTER
SOCIETY
PRACTICE
HOWEVER
IT
DOES
NOT
OFFER
AN
EXPLICIT
CONTROL
OVER
THE
AMOUNT
OF
SUPERPIXELS
OR
THEIR
COMPACTNESS
MOORE
ET
AL
PROPOSE
A
METHOD
TO
GENERATE
SUPERPIXELS
THAT
CONFORM
TO
A
GRID
BY
FINDING
OPTIMAL
PATHS
OR
SEAMS
THAT
SPLIT
THE
IMAGE
INTO
SMALLER
VERTICAL
OR
HORIZONTAL
REGIONS
OPTIMAL
PATHS
ARE
FOUND
USING
A
GRAPH
CUTS
METHOD
SIMILAR
TO
SEAM
CARVING
WHILE
THE
COMPLEXITY
OF
IS
LOGNÞ
ACCORDING
TO
THE
AUTHORS
THIS
DOES
NOT
ACCOUNT
FOR
THE
PRECOMPUTED
BOUNDARY
MAPS
WHICH
STRONGLY
INFLUENCE
THE
QUALITY
AND
SPEED
OF
THE
OUTPUT
AND
IN
VEKSLER
ET
AL
USE
A
GLOBAL
OPTIMIZATION
APPROACH
SIMILAR
TO
THE
TEXTURE
SYNTHESIS
WORK
OF
SUPERPIXELS
ARE
OBTAINED
BY
STITCHING
TOGETHER
OVERLAPPING
IMAGE
PATCHES
SUCH
THAT
EACH
PIXEL
BELONGS
TO
ONLY
ONE
OF
THE
OVERLAPPING
REGIONS
THEY
SUGGEST
TWO
VARIANTS
OF
THEIR
METHOD
ONE
FOR
GENERATING
COMPACT
SUPERPIXELS
AND
ONE
FOR
CONSTANTINTENSITY
SUPERPIXELS
GRADIENT
ASCENT
BASED
ALGORITHMS
STARTING
FROM
A
ROUGH
INITIAL
CLUSTERING
OF
PIXELS
GRADIENT
ASCENT
METHODS
ITERATIVELY
REFINE
THE
CLUSTERS
UNTIL
SOME
CONVERGENCE
CRITERION
IS
MET
TO
FORM
SUPERPIXELS
IN
MEAN
SHIFT
AN
ITERATIVE
MODE
SEEKING
PROCEDURE
FOR
LOCATING
LOCAL
MAXIMA
OF
A
DENSITY
FUNCTION
IS
APPLIED
TO
FIND
MODES
IN
THE
COLOR
OR
INTENSITY
FEATURE
SPACE
OF
AN
IMAGE
PIXELS
THAT
CONVERGE
TO
THE
SAME
MODE
DEFINE
THE
SUPERPIXELS
IS
AN
OLDER
APPROACH
PRODUCING
IRREGULARLY
SHAPED
SUPERPIXELS
OF
NONUNIFORM
SIZE
IT
IS
COMPLEX
MAKING
IT
RELATIVELY
SLOW
AND
DOES
NOT
OFFER
DIRECT
CONTROL
OVER
THE
AMOUNT
SIZE
OR
COMPACTNESS
OF
SUPERPIXELS
QUICK
SHIFT
ALSO
USES
A
MODE
SEEKING
SEGMENTATION
SCHEME
IT
INITIALIZES
THE
SEGMENTATION
USING
A
MEDOID
SHIFT
PROCEDURE
IT
THEN
MOVES
EACH
POINT
IN
THE
FEATURE
SPACE
TO
THE
NEAREST
NEIGHBOR
THAT
INCREASES
THE
PARZEN
DENSITY
ESTIMATE
WHILE
IT
HAS
RELATIVELY
GOOD
BOUNDARY
ADHERENCE
IS
QUITE
SLOW
WITH
AN
COMPLEXITY
D
IS
A
SMALL
CONSTANT
DOES
NOT
ALLOW
FOR
EXPLICIT
CONTROL
OVER
THE
SIZE
OR
NUMBER
OF
SUPERPIXELS
PREVIOUS
WORKS
HAVE
USED
FOR
OBJECT
LOCALIZATION
AND
MOTION
SEGMENTATION
THE
WATERSHED
APPROACH
PERFORMS
A
GRADIENT
ASCENT
STARTING
FROM
LOCAL
MINIMA
TO
PRODUCE
WATERSHEDS
LINES
THAT
SEPARATE
CATCHMENT
BASINS
THE
RESULTING
SUPERPIXELS
ARE
OFTEN
HIGHLY
IRREGULAR
IN
SIZE
AND
SHAPE
AND
DO
NOT
EXHIBIT
GOOD
BOUNDARY
ADHERENCE
THE
APPROACH
OF
IS
RELATIVELY
FAST
OÐN
LOGNÞ
COMPLEXITY
BUT
DOES
NOT
OFFER
CONTROL
OVER
THE
AMOUNT
OF
SUPERPIXELS
OR
THEIR
COMPACTNESS
THE
TURBOPIXEL
METHOD
PROGRESSIVELY
DILATES
A
SET
OF
SEED
LOCATIONS
USING
LEVEL
SET
BASED
GEOMETRIC
FLOW
THE
GEOMETRIC
FLOW
RELIES
ON
LOCAL
IMAGE
GRADIENTS
AIMING
TO
REGULARLY
DISTRIBUTE
SUPERPIXELS
ON
THE
IMAGE
PLANE
UNLIKE
SUPERPIXELS
ARE
CONSTRAINED
TO
HAVE
UNIFORM
SIZE
COMPACTNESS
AND
BOUNDARY
ADHERENCE
RELIES
ON
ALGORITHMS
OF
VARYING
COMPLEXITY
BUT
IN
PRACTICE
AS
THE
AUTHORS
CLAIM
HAS
APPROXIMATELY
OÐNÞ
BEHAVIOR
HOWEVER
IT
IS
AMONG
THE
SLOWEST
ALGORITHMS
EXAMINED
AND
EXHIBITS
RELATIVELY
POOR
BOUNDARY
ADHERENCE
SLIC
SUPERPIXELS
WE
PROPOSE
A
NEW
METHOD
FOR
GENERATING
SUPERPIXELS
WHICH
IS
FASTER
THAN
EXISTING
METHODS
MORE
MEMORY
EFFICIENT
EXHIBITS
STATE
OF
THE
ART
BOUNDARY
ADHERENCE
AND
IMPROVES
THE
PERFORMANCE
OF
SEGMENTATION
ALGORITHMS
SIMPLE
LINEAR
ITERATIVE
CLUSTERING
IS
AN
ADAPTATION
OF
K
MEANS
FOR
SUPERPIXEL
GENERATION
WITH
TWO
IMPORTANT
DISTINCTIONS
THE
NUMBER
OF
DISTANCE
CALCULATIONS
IN
THE
OPTIMIZATION
IS
DRAMATICALLY
REDUCED
BY
LIMITING
THE
SEARCH
SPACE
TO
A
REGION
PROPORTIONAL
TO
THE
SUPERPIXEL
SIZE
THIS
REDUCES
THE
COMPLEXITY
TO
BE
LINEAR
IN
THE
NUMBER
OF
PIXELS
N
AND
INDEPENDENT
OF
THE
NUMBER
OF
SUPERPIXELS
K
A
WEIGHTED
DISTANCE
MEASURE
COMBINES
COLOR
AND
SPATIAL
PROXIMITY
WHILE
SIMULTANEOUSLY
PROVIDING
CONTROL
OVER
THE
SIZE
AND
COMPACTNESS
OF
THE
SUPERPIXELS
SLIC
IS
SIMILAR
TO
THE
APPROACH
USED
AS
A
PREPROCESSING
STEP
FOR
DEPTH
ESTIMATION
DESCRIBED
IN
WHICH
WAS
NOT
FULLY
EXPLORED
IN
THE
CONTEXT
OF
SUPERPIXEL
GENERATION
ALGORITHM
SLIC
IS
SIMPLE
TO
USE
AND
UNDERSTAND
BY
DEFAULT
THE
ONLY
PARAMETER
OF
THE
ALGORITHM
IS
K
THE
DESIRED
NUMBER
OF
APPROXIMATELY
EQUALLY
SIZED
SUPERPIXELS
FOR
COLOR
IMAGES
IN
THE
CIELAB
COLOR
SPACE
THE
CLUSTERING
PROCEDURE
BEGINS
WITH
AN
INITIALIZATION
STEP
WHERE
K
INITIAL
CLUSTER
CENTERS
CI
AI
BI
XI
YI
T
ARE
SAMPLED
ON
A
REGULAR
GRID
SPACED
PIXELS
APART
TO
PRODUCE
ROUGHLY
EQUALLY
SIZED
SUPERPIXELS
THE
GRID
INTERVAL
IS
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
N
K
P
THE
CENTERS
ARE
MOVED
TO
SEED
LOCATIONS
CORRESPONDING
TO
THE
LOWEST
GRADIENT
POSITION
IN
A
NEIGHBORHOOD
THIS
IS
DONE
TO
AVOID
CENTERING
A
SUPERPIXEL
ON
AN
EDGE
AND
TO
REDUCE
THE
CHANCE
OF
SEEDING
A
SUPERPIXEL
WITH
A
NOISY
PIXEL
NEXT
IN
THE
ASSIGNMENT
STEP
EACH
PIXEL
I
IS
ASSOCIATED
WITH
THE
NEAREST
CLUSTER
CENTER
WHOSE
SEARCH
REGION
OVERLAPS
ITS
LOCATION
AS
DEPICTED
IN
FIG
THIS
IS
THE
KEY
TO
SPEEDING
UP
OUR
ALGORITHM
BECAUSE
LIMITING
THE
SIZE
OF
THE
SEARCH
REGION
SIGNIFICANTLY
REDUCES
THE
NUMBER
OF
DISTANCE
CALCULATIONS
AND
RESULTS
IN
A
SIGNIFICANT
SPEED
ADVANTAGE
OVER
CONVENTIONAL
K
MEANS
CLUSTERING
WHERE
EACH
PIXEL
MUST
BE
COMPARED
WITH
ALL
CLUSTER
CENTERS
THIS
IS
ONLY
POSSIBLE
THROUGH
THE
INTRODUCTION
OF
A
DISTANCE
MEASURE
D
WHICH
DETERMINES
THE
NEAREST
CLUSTER
CENTER
FOR
EACH
PIXEL
AS
DISCUSSED
IN
SECTION
SINCE
THE
EXPECTED
SPATIAL
EXTENT
OF
A
SUPERPIXEL
IS
A
REGION
OF
APPROXIMATE
SIZE
THE
SEARCH
FOR
SIMILAR
PIXELS
IS
DONE
IN
A
REGION
AROUND
THE
SUPERPIXEL
CENTER
ONCE
EACH
PIXEL
HAS
BEEN
ASSOCIATED
TO
THE
NEAREST
CLUSTER
CENTER
AN
UPDATE
STEP
ADJUSTS
THE
CLUSTER
CENTERS
TO
BE
THE
MEAN
A
B
X
Y
T
VECTOR
OF
ALL
THE
PIXELS
BELONGING
TO
THE
CLUSTER
THE
NORM
IS
USED
TO
COMPUTE
A
RESIDUAL
ERROR
E
BETWEEN
THE
NEW
CLUSTER
CENTER
LOCATIONS
AND
PREVIOUS
CLUSTER
CENTER
LOCATIONS
THE
ASSIGNMENT
AND
UPDATE
STEPS
CAN
BE
REPEATED
ITERATIVELY
UNTIL
THE
ERROR
CONVERGES
BUT
WE
HAVE
FOUND
THAT
ITERATIONS
SUFFICES
FOR
MOST
IMAGES
AND
REPORT
ALL
RESULTS
IN
THIS
PAPER
USING
THIS
CRITERIA
FINALLY
A
POSTPROCESSING
STEP
ENFORCES
CONNECTIVITY
BY
REASSIGNING
DISJOINT
PIXELS
TO
NEARBY
SUPERPIXELS
THE
ENTIRE
ALGORITHM
IS
SUMMARIZED
IN
ALGORITHM
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
OPTIONALLY
THE
COMPACTNESS
OF
THE
SUPERPIXELS
CAN
BE
CONTROLLED
BY
ADJUSTING
M
WHICH
IS
DISCUSSED
IN
SECTION
FIG
IMAGES
SEGMENTED
USING
SLIC
INTO
SUPERPIXELS
OF
SIZE
AND
PIXELS
APPROXIMATELY
ALGORITHM
SLIC
SUPERPIXEL
SEGMENTATION
INITIALIZATION
INITIALIZE
CLUSTER
CENTERS
CK
AK
BK
XK
YK
T
BY
SAMPLING
PIXELS
AT
REGULAR
GRID
STEPS
MOVE
CLUSTER
CENTERS
TO
THE
LOWEST
GRADIENT
POSITION
IN
A
NEIGHBORHOOD
SET
LABEL
LÐIÞ
FOR
EACH
PIXEL
I
SET
DISTANCE
DÐIÞ
FOR
EACH
PIXEL
I
REPEAT
ASSIGNMENT
FOR
EACH
CLUSTER
CENTER
CK
DO
FOR
EACH
PIXEL
I
IN
A
REGION
AROUND
CK
DO
COMPUTE
THE
DISTANCE
D
BETWEEN
CK
AND
I
IF
D
DÐIÞ
THEN
SET
DÐIÞ
D
SET
LÐIÞ
K
END
IF
END
FOR
END
FOR
UPDATE
COMPUTE
NEW
CLUSTER
CENTERS
COMPUTE
RESIDUAL
ERROR
E
UNTIL
E
THRESHOLD
DISTANCE
MEASURE
SLIC
SUPERPIXELS
CORRESPOND
TO
CLUSTERS
IN
THE
LABXY
COLOR
IMAGE
PLANE
SPACE
THIS
PRESENTS
A
PROBLEM
IN
DEFINING
THE
DISTANCE
MEASURE
D
WHICH
MAY
NOT
BE
IMMEDIATELY
OBVIOUS
D
COMPUTES
THE
DISTANCE
BETWEEN
A
PIXEL
I
AND
CLUSTER
CENTER
CK
IN
ALGORITHM
A
PIXEL
COLOR
IS
REPRESENTED
IN
THE
CIELAB
COLOR
SPACE
A
B
T
WHOSE
RANGE
OF
POSSIBLE
VALUES
IS
KNOWN
THE
PIXEL
POSITION
POSITION
Y
T
ON
THE
OTHER
HAND
MAY
TAKE
A
RANGE
OF
VALUES
THAT
VARIES
ACCORDING
TO
THE
SIZE
OF
THE
IMAGE
SIMPLY
DEFINING
D
TO
BE
THE
EUCLIDEAN
DISTANCE
IN
LABXY
SPACE
WILL
CAUSE
INCONSISTENCIES
IN
CLUSTERING
BEHAVIOR
FOR
DIFFERENT
SUPERPIXEL
SIZES
FOR
LARGE
SUPERPIXELS
SPATIAL
DISTANCES
OUTWEIGH
COLOR
PROXIMITY
GIVING
MORE
RELATIVE
IMPORTANCE
TO
SPATIAL
PROXIMITY
THAN
COLOR
THIS
PRODUCES
COMPACT
SUPERPIXELS
THAT
DO
NOT
ADHERE
WELL
TO
IMAGE
BOUNDARIES
FOR
SMALLER
SUPERPIXELS
THE
CONVERSE
IS
TRUE
TO
COMBINE
THE
TWO
DISTANCES
INTO
A
SINGLE
MEASURE
IT
IS
NECESSARY
TO
NORMALIZE
COLOR
PROXIMITY
AND
SPATIAL
PROXIMITY
BY
THEIR
RESPECTIVE
MAXIMUM
DISTANCES
WITHIN
A
CLUSTER
NS
AND
NC
DOING
SO
IS
WRITTEN
DC
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
ÐLJ
Þ
ÐAJ
Þ
ÐBJ
Q
DS
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
ÐXJ
Þ
ÐYJ
Q
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
DC
NC
Þ
DS
NS
THE
MAXIMUM
SPATIAL
DISTANCE
EXPECTED
WITHIN
A
GIVEN
CLUSTER
SHOULD
CORRESPOND
TO
THE
SAMPLING
INTERVAL
NS
FFIFFI
Ð
P
N
KÞ
DETERMINING
THE
MAXIMUM
COLOR
DISTANCE
NC
IS
NOT
SO
STRAIGHTFORWARD
AS
COLOR
DISTANCES
CAN
VARY
SIGNIFICANTLY
FROM
CLUSTER
TO
CLUSTER
AND
IMAGE
TO
IMAGE
THIS
PROBLEM
CAN
BE
AVOIDED
BY
FIXING
NC
TO
A
CONSTANT
M
SO
THAT
BECOMES
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
DC
M
Þ
DS
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
FIG
REDUCING
THE
SUPERPIXEL
SEARCH
REGIONS
THE
COMPLEXITY
OF
SLIC
IS
LINEAR
IN
THE
NUMBER
OF
PIXELS
IN
THE
IMAGE
OÐNÞ
WHILE
THE
CONVENTIONAL
K
MEANS
ALGORITHM
IS
OÐKNIÞ
WHERE
I
IS
THE
NUMBER
OF
ITERATIONS
THIS
IS
ACHIEVED
BY
LIMITING
THE
SEARCH
SPACE
OF
EACH
CLUSTER
CENTER
IN
THE
ASSIGNMENT
STEP
A
IN
THE
CONVENTIONAL
K
MEANS
ALGORITHM
DISTANCES
ARE
COMPUTED
FROM
EACH
CLUSTER
CENTER
TO
EVERY
PIXEL
IN
THE
IMAGE
B
SLIC
ONLY
COMPUTES
DISTANCES
FROM
EACH
CLUSTER
CENTER
TO
PIXELS
WITHIN
A
REGION
NOTE
THAT
THE
EXPECTED
SUPERPIXEL
SIZE
IS
ONLY
INDICATED
BY
THE
SMALLER
SQUARE
THIS
APPROACH
NOT
ONLY
REDUCES
DISTANCE
COMPUTATIONS
BUT
ALSO
MAKES
SLIC
COMPLEXITY
INDEPENDENT
OF
THE
NUMBER
OF
SUPERPIXELS
TABLE
SUMMARY
OF
EXISTING
SUPERPIXEL
ALGORITHMS
THE
ABILITY
OF
A
SUPERPIXEL
METHOD
TO
ADHERE
TO
BOUNDARIES
FOUND
IN
THE
BERKELEY
DATA
SET
IS
MEASURED
ACCORDING
TO
TWO
STANDARD
METRICS
UNDER
SEGMENTATION
ERROR
AND
BOUNDARY
RECALL
FOR
SUPERPIXELS
WE
ALSO
REPORT
THE
AVERAGE
TIME
REQUIRED
TO
SEGMENT
IMAGES
USING
AN
INTEL
DUAL
CORE
GHZ
PROCESSOR
WITH
GB
RAM
AND
THE
CLASS
AVERAGED
SEGMENTATION
ACCURACY
OBTAINED
ON
THE
MSRC
DATA
SET
USING
THE
METHOD
DESCRIBED
IN
BOLD
ENTRIES
INDICATE
BEST
PERFORMANCE
IN
EACH
CATEGORY
ABILITY
TO
SPECIFY
THE
AMOUNT
OF
SUPERPIXELS
CONTROL
THEIR
COMPACTNESS
AND
ABILITY
TO
GENERATE
SUPERVOXELS
IS
ALSO
PROVIDED
WHICH
SIMPLIFIES
TO
THE
DISTANCE
MEASURE
WE
USE
IN
PRACTICE
D
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
DC
Þ
DS
BY
DEFINING
D
IN
THIS
MANNER
M
ALSO
ALLOWS
US
TO
WEIGH
THE
RELATIVE
IMPORTANCE
BETWEEN
COLOR
SIMILARITY
AND
SPATIAL
PROXIMITY
WHEN
M
IS
LARGE
SPATIAL
PROXIMITY
IS
MORE
IMPORTANT
AND
THE
RESULTING
SUPERPIXELS
ARE
MORE
COMPACT
I
E
THEY
HAVE
A
LOWER
AREA
TO
PERIMETER
RATIO
WHEN
M
IS
SMALL
THE
RESULTING
SUPERPIXELS
ADHERE
MORE
TIGHTLY
TO
IMAGE
BOUNDARIES
BUT
HAVE
LESS
REGULAR
SIZE
AND
SHAPE
WHEN
USING
THE
CIELAB
COLOR
SPACE
M
CAN
BE
IN
THE
RANGE
EQUATION
CAN
BE
ADAPTED
FOR
GRAYSCALE
IMAGES
BY
SETTING
DC
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
ÐLJ
Q
IT
CAN
ALSO
BE
EXTENDED
TO
HANDLE
SUPERVOXELS
AS
DEPICTED
IN
FIG
BY
INCLUDING
THE
DEPTH
DIMENSION
TO
THE
SPATIAL
PROXIMITY
TERM
OF
DS
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
ÐXI
Þ
ÐYI
YJÞ
Þ
ÐZI
Q
POSTPROCESSING
LIKE
SOME
OTHER
SUPERPIXEL
ALGORITHMS
SLIC
DOES
NOT
EXPLICITLY
ENFORCE
CONNECTIVITY
AT
THE
END
OF
THE
CLUSTERING
PROCEDURE
SOME
ORPHANED
PIXELS
THAT
DO
NOT
BELONG
TO
THE
SAME
CONNECTED
COMPONENT
AS
THEIR
CLUSTER
CENTER
MAY
REMAIN
TO
CORRECT
FOR
THIS
SUCH
PIXELS
ARE
ASSIGNED
THE
LABEL
OF
THE
NEAREST
CLUSTER
CENTER
USING
A
CONNECTED
COMPONENTS
ALGORITHM
COMPLEXITY
BY
LOCALIZING
THE
SEARCH
IN
THE
CLUSTERING
PROCEDURE
SLIC
AVOIDS
PERFORMING
THOUSANDS
OF
REDUNDANT
DISTANCE
CALCULATIONS
IN
PRACTICE
A
PIXEL
FALLS
IN
THE
NEIGHBORHOOD
OF
LESS
THAN
EIGHT
CLUSTER
CENTERS
MEANING
THAT
SLIC
IS
OÐNÞ
COMPLEX
IN
CONTRAST
THE
TRIVIAL
UPPER
BOUND
FOR
THE
CLASSICAL
K
MEANS
ALGORITHM
IS
OÐKNÞ
AND
THE
PRACTICAL
TIME
COMPLEXITY
IS
OÐNKIÞ
WHERE
I
IS
THE
NUMBER
OF
ITERATIONS
REQUIRED
FOR
CONVERGENCE
WHILE
SCHEMES
TO
REDUCE
THE
COMPLEXITY
OF
K
MEANS
HAVE
BEEN
PROPOSED
USING
PRIME
NUMBER
LENGTH
SAMPLING
RANDOM
SAMPLING
LOCAL
CLUSTER
SWAPPING
AND
BY
SETTING
LOWER
AND
UPPER
BOUNDS
THESE
METHODS
ARE
VERY
GENERAL
IN
NATURE
SLIC
IS
SPECIFICALLY
TAILORED
TO
THE
PROBLEM
OF
SUPERPIXEL
CLUSTERING
FINALLY
UNLIKE
MOST
SUPERPIXEL
METHODS
AND
THE
AFOREMENTIONED
APPROACHES
TO
SPEED
UP
K
MEANS
THE
COMPLEXITY
OF
SLIC
IS
LINEAR
IN
THE
NUMBER
OF
PIXELS
IRRESPECTIVE
OF
K
COMPARISON
WITH
STATE
OF
THE
ART
WE
PERFORMED
A
QUANTITATIVE
COMPARISON
OF
SLIC
AND
FIVE
STATE
OFTHE
ART
SUPERPIXEL
METHODS
USING
PUBLICLY
AVAILABLE
SOURCE
CODE
THESE
ALGORITHMS
INCLUDE
AND
TWO
VERSIONS
OF
THE
ALGORITHM
PROPOSED
IN
AND
EXAMPLES
OF
SUPERPIXEL
SEGMENTATIONS
PRODUCED
BY
EACH
METHOD
APPEAR
IN
FIG
ADHERENCE
TO
BOUNDARIES
ARGUABLY
THE
MOST
IMPORTANT
PROPERTY
OF
A
SUPERPIXEL
METHOD
IS
ITS
ABILITY
TO
ADHERE
TO
IMAGE
BOUNDARIES
BOUNDARY
RECALL
AND
UNDERSEGMENTATION
ERROR
ARE
STANDARD
MEASURES
FOR
BOUNDARY
ADHERENCE
IN
FIGS
AND
SLIC
AND
ARE
COMPARED
USING
THESE
MEASURES
ON
THE
BERKELEY
DATABASE
IN
ADDITION
A
BASELINE
PERFORMANCE
OBTAINED
BY
SEGMENTING
THE
IMAGE
INTO
UNIFORM
SQUARES
IS
DENOTED
AS
SQUARES
THE
BERKELEY
DATA
SET
CONTAINS
IMAGES
AND
APPROXIMATELY
HUMAN
ANNOTATED
GROUND
TRUTH
SEGMENTATIONS
CORRESPONDING
TO
EACH
IMAGE
BOUNDARY
RECALL
MEASURES
WHAT
FRACTION
OF
THE
GROUND
TRUTH
EDGES
FALL
WITHIN
AT
LEAST
TWO
PIXELS
OF
A
SUPERPIXEL
BOUNDARY
THE
BOUNDARY
RECALL
OF
EACH
METHOD
IS
PLOTTED
IN
FIG
FOR
INCREASING
NUMBERS
OF
SUPERPIXELS
A
HIGH
BOUNDARY
RECALL
INDICATES
THAT
VERY
FEW
TRUE
EDGES
WERE
MISSED
SUPERPIXELS
GENERATED
BY
SLIC
AND
DEMONSTRATED
THE
BEST
BOUNDARY
RECALL
PERFORMANCE
IF
WE
REDUCE
SLIC
COMPACTNESS
M
FROM
ITS
DEFAULT
VALUE
OF
SLIC
SHOWS
SUPERIOR
PERFORMANCE
TO
UNDER
SEGMENTATION
ERROR
SHOWN
IN
FIG
IS
ANOTHER
MEASURE
OF
BOUNDARY
ADHERENCE
GIVEN
A
REGION
FROM
THE
GROUND
TRUTH
SEGMENTATION
GI
AND
THE
SET
OF
SUPERPIXELS
REQUIRED
TO
COVER
IT
SJJSJ
T
GI
IT
MEASURES
HOW
MANY
PIXELS
FROM
SJ
LEAK
ACROSS
THE
BOUNDARY
OF
GI
IF
J
J
IS
THE
SIZE
OF
A
SEGMENT
IN
PIXELS
M
IS
THE
NUMBER
OF
GROUND
TRUTH
SEGMENTS
AND
B
IS
A
MINIMUM
NUMBER
OF
PIXELS
IN
SJ
OVERLAPPING
GI
UNDER
SEGMENTATION
ERROR
IS
EXPRESSED
AS
U
N
XM
X
SJ
JSJ
T
GI
B
JSJJ
B
CA
N
B
IS
SET
TO
PERCENT
OF
JSJJ
IN
OUR
EXPERIMENTS
TO
ACCOUNT
FOR
AMBIGUITIES
IN
THE
GROUND
TRUTH
SUPERPIXELS
THAT
DO
NOT
TIGHTLY
FIT
THE
GROUND
TRUTH
RESULT
IN
A
HIGH
VALUE
OF
U
COMPUTATIONAL
AND
MEMORY
EFFICIENCY
SUPERPIXELS
ARE
OFTEN
USED
TO
REPLACE
THE
PIXEL
GRID
TO
HELP
SPEED
UP
OTHER
ALGORITHMS
THUS
IT
IS
IMPORTANT
THAT
SUPERPIXELS
CAN
BE
GENERATED
EFFICIENTLY
IN
THE
FIRST
PLACE
IN
FIG
WE
COMPARE
THE
TIME
REQUIRED
FOR
THE
VARIOUS
SUPERPIXEL
METHODS
TO
SEGMENT
IMAGES
OF
INCREASING
SIZE
ON
AN
INTEL
DUAL
CORE
GHZ
PROCESSOR
WITH
GB
RAM
SLIC
WITH
ITS
OÐNÞ
COMPLEXITY
IS
THE
FASTEST
SUPERPIXEL
METHOD
AND
ITS
ADVANTAGE
INCREASES
WITH
THE
SIZE
OF
THE
IMAGE
WHILE
IS
COMPETITIVE
WITH
OÐNÞ
LOGN
COMPLEXITY
THE
REMAINING
METHODS
SHOW
A
SIGNIFICANT
GAP
IN
PROCESSING
SPEED
IT
IS
ALSO
IMPORTANT
THAT
A
SUPERPIXEL
ALGORITHM
BE
MEMORY
EFFICIENT
IN
ORDER
TO
HANDLE
LARGE
IMAGES
SLIC
IS
THE
MOST
MEMORY
EFFICIENT
METHOD
REQUIRING
ONLY
N
FLOATS
TO
STORE
THE
DISTANCE
FROM
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
FIG
SLIC
SUPERVOXELS
COMPUTED
FOR
A
VIDEO
SEQUENCE
TOP
FRAMES
FROM
A
SHORT
VIDEO
SEQUENCE
OF
A
FLAG
WAVING
BOTTOM
LEFT
A
VOLUME
CONTAINING
THE
VIDEO
THE
LAST
FRAME
APPEARS
AT
THE
TOP
OF
THE
VOLUME
BOTTOM
RIGHT
A
SUPERVOXEL
SEGMENTATION
OF
THE
VIDEO
SUPERVOXELS
WITH
ORANGE
CLUSTER
CENTERS
ARE
REMOVED
FOR
DISPLAY
PURPOSES
HTTP
PEOPLE
CS
UCHICAGO
EDU
PFF
SEGMENT
HTTP
WWW
CS
SFU
CA
MORI
RESEARCH
SUPERPIXELS
HTTP
WWW
CS
TORONTO
EDU
BABALEX
TAR
GZ
HTTP
WWW
VLFEAT
ORG
DOWNLOAD
HTML
HTTP
WWW
CSD
UWO
CA
FACULTY
OLGA
CODE
ZIP
EACH
PIXEL
TO
ITS
NEAREST
CLUSTER
CENTER
OTHER
METHODS
HAVE
COMPARATIVELY
HIGH
MEMORY
REQUIREMENTS
AND
REQUIRE
FLOATS
TO
STORE
EDGE
WEIGHTS
AND
THRESHOLDS
FOR
FOUR
CONNECTIVITY
OR
FOR
EIGHT
CONNECTIVITY
SEGMENTATION
PERFORMANCE
SUPERPIXELS
ARE
COMMONLY
USED
AS
A
PREPROCESSING
STEP
IN
SEGMENTATION
ALGORITHMS
A
GOOD
SUPERPIXEL
ALGORITHM
SHOULD
IMPROVE
THE
PERFORMANCE
OF
THE
SEGMENTATION
ALGORITHM
THAT
USES
IT
WE
COMPARED
THE
SEGMENTATION
RESULTING
FROM
SLIC
AND
ON
THE
MSRC
DATA
SET
THESE
RESULTS
WERE
OBTAINED
USING
THE
METHOD
OF
WHICH
USES
SUPERPIXELS
TO
COMPUTE
COLOR
TEXTURE
GEOMETRY
AND
LOCATION
FEATURES
IT
THEN
TRAINS
CLASSIFIERS
FOR
THE
OBJECT
CLASSES
AND
LEARNS
A
CRF
MODEL
THE
RESULTS
APPEARING
IN
TABLE
SHOW
THAT
SLIC
SUPERPIXELS
YIELD
THE
BEST
PERFORMANCE
SLIC
ALSO
REDUCES
THE
COMPUTATIONAL
TIME
BY
A
FACTOR
OF
OVER
OVER
THE
METHOD
USED
IN
EXAMPLE
IMAGES
SEGMENTED
USING
SLIC
ARE
SHOWN
IN
FIG
WE
ALSO
TESTED
ON
THE
PASCAL
VOC
DATA
SET
USING
THE
APPROACH
OF
AS
SHOWN
IN
TABLE
SLIC
PROVIDED
A
BOOST
IN
SEGMENTATION
ACCURACY
OVER
AND
REDUCED
THE
TIME
SPENT
GENERATING
SUPERPIXELS
BY
AN
ORDER
OF
MAGNITUDE
DISCUSSION
IN
ADDITION
TO
THE
PROPERTIES
DISCUSSED
ABOVE
OTHER
CONSIDERATIONS
SHOULD
FACTOR
INTO
THE
QUALITY
OF
A
SUPERPIXEL
ALGORITHM
ONE
SUCH
CONSIDERATION
IS
THE
EASE
OF
USE
SUPERPIXEL
METHODS
WITH
MANY
DIFFICULT
TO
TUNE
PARAMETERS
CAN
RESULT
IN
LOST
TIME
OR
POOR
PERFORMANCE
ANOTHER
CONSIDERATION
IS
THE
ABILITY
TO
SPECIFY
THE
AMOUNT
OF
SUPERPIXELS
WHICH
NOT
ALL
METHODS
PROVIDE
FINALLY
THE
ABILITY
TO
CONTROL
THE
COMPACTNESS
OF
THE
SUPERPIXELS
IS
IMPORTANT
COMPACT
REGULAR
SUPERPIXELS
ARE
OFTEN
DESIRABLE
BECAUSE
THEIR
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
FIG
MULTICLASS
SEGMENTATION
TOP
IMAGES
FROM
THE
MSRC
DATA
SET
MIDDLE
GROUND
TRUTH
ANNOTATIONS
BOTTOM
RESULTS
OBTAINED
USING
SLIC
SUPERPIXELS
IN
PLACE
OF
FOLLOWING
THE
METHOD
PROPOSED
IN
TABLE
MULTICLASS
OBJECT
SEGMENTATION
ON
THE
PASCAL
VOC
DATA
SET
RESULTS
FOR
THE
METHOD
OF
USING
SLIC
AND
SUPERPIXELS
FIG
BOUNDARY
ADHERENCE
AND
SEGMENTATION
SPEED
A
BOUNDARY
RECALL
MEASURES
THE
FRACTION
OF
THE
GROUND
TRUTH
EDGES
THAT
FALL
WITHIN
AT
LEAST
TWO
PIXELS
OF
A
SUPERPIXEL
BOUNDARY
WHILE
DEMONSTRATES
THE
BEST
BOUNDARY
RECALL
REDUCING
M
FROM
THE
DEFAULT
VALUE
INCREASES
THE
BOUNDARY
RECALL
OF
SLIC
OVER
THAT
OF
B
UNDER
SEGMENTATION
ERROR
MEASURES
THE
AMOUNT
OF
SUPERPIXEL
LEAK
FOR
A
GIVEN
GROUND
TRUTH
REGION
SLIC
OUTPERFORMS
THE
OTHER
METHODS
SHOWING
THE
LOWEST
UNDER
SEGMENTATION
ERROR
FOR
MOST
OF
THE
USEFUL
OPERATING
REGIME
C
TIME
REQUIRED
TO
GENERATE
SUPERPIXELS
FOR
IMAGES
OF
INCREASING
SIZE
SLIC
IS
THE
FASTEST
SUPERPIXEL
METHOD
FOLLOWED
CLOSELY
BY
AND
THEN
A
SIGNIFICANT
GAP
IS
NOT
PLOTTED
DUE
TO
ITS
PARTICULARLY
SLOW
SPEED
BOUNDED
SIZE
AND
FEW
NEIGHBORS
FORM
A
MORE
INTERPRETABLE
GRAPH
AND
CAN
EXTRACT
MORE
LOCALLY
RELEVANT
FEATURES
HOWEVER
COMPACTNESS
COMES
AT
THE
EXPENSE
OF
BOUNDARY
ADHERENCE
AND
THE
ABILITY
TO
CONTROL
THIS
TRADEOFF
CAN
BE
USEFUL
IN
THE
FOLLOWING
WE
REVIEW
THE
PERFORMANCE
OF
EACH
SUPERPIXEL
METHOD
WITH
RESPECT
TO
BOUNDARY
ADHERENCE
SPEED
MEMORY
EFFICIENCY
SEGMENTATION
QUALITY
PARAMETER
TUNING
ABILITY
TO
SPECIFY
THE
AMOUNT
OF
SUPERPIXELS
AND
ABILITY
TO
CONTROL
SUPERPIXEL
COMPACTNESS
WHILE
PRODUCED
SOME
OF
THE
MOST
COMPACT
AND
CONSISTENTLY
SIZED
SUPERPIXELS
IT
FARED
THE
WORST
AMONG
ALL
METHODS
IN
BOTH
BOUNDARY
RECALL
AND
UNDER
SEGMENTATION
ERROR
ALSO
SUFFERS
FROM
A
SLOW
RUNNING
TIME
AND
RESULTED
IN
POOR
SEGMENTATION
PERFORMANCE
NEXT
TO
IT
IS
THE
SLOWEST
SUPERPIXEL
ALGORITHM
IT
IS
ALMOST
TIMES
SLOWER
THAN
SLIC
FOR
A
IMAGE
TAKING
ON
THE
OTHER
HAND
HAS
ONLY
ONE
PARAMETER
TO
TUNE
AND
OFFERS
DIRECT
CONTROL
OVER
THE
NUMBER
OF
SUPERPIXELS
NORMALIZED
CUTS
SHOWED
ONLY
A
SMALL
IMPROVEMENT
OVER
THE
SUPERPIXELS
PRODUCED
BY
ARE
EVEN
MORE
COMPACT
THAN
THOSE
OF
MAKING
THEM
ATTRACTIVE
FOR
GRAPHBASED
APPLICATIONS
HOWEVER
THE
BOUNDARY
ADHERENCE
IS
VERY
POOR
RANKING
SIXTH
IN
BOUNDARY
RECALL
AND
FIFTH
IN
UNDERSEGMENTATION
ERROR
DESPITE
THIS
THE
SEGMENTATION
QUALITY
WAS
SURPRISINGLY
HIGH
THE
RUNNING
TIME
OF
IS
PROHIBITIVELY
SLOW
AND
THE
METHOD
FAILED
TO
SEGMENT
IMAGES
PRODUCING
OUT
OF
MEMORY
ERRORS
AND
THESE
TWO
METHODS
SHOWED
SIMILAR
PERFORMANCE
DESPITE
THEIR
DIFFERENCES
IN
DESIGN
COMPACT
VERSUS
CONSTANT
INTENSITY
SUPERPIXELS
COMPACT
SUPERPIXELS
ARE
MORE
COMPACT
THAN
THOUGH
MUCH
LESS
THAN
AND
IN
TERMS
OF
BOUNDARY
RECALL
AND
RANKED
IN
THE
MIDDLE
OF
THE
PACK
FIFTH
AND
FOURTH
RESPECTIVELY
THEIR
STANDING
IMPROVED
SLIGHTLY
FOR
UNDER
SEGMENTATION
ERROR
THIRD
AND
FOURTH
WHILE
AND
ARE
FASTER
THAN
AND
THEIR
SLOW
RUNTIME
STILL
LIMITS
THEIR
USEFULNESS
REQUIRING
AND
RESPECTIVELY
AND
THEY
REPORTED
ONE
OF
THE
WORST
SEGMENTATION
PERFORMANCES
HAS
THREE
PARAMETERS
TO
TUNE
INCLUDING
PATCH
SIZE
WHICH
CAN
BE
DIFFICULT
TO
SET
ON
THE
POSITIVE
SIDE
ALLOWS
FOR
CONTROL
OF
THE
NUMBER
OF
SUPERPIXELS
AND
CAN
PRODUCE
SUPERVOXELS
QUICKSHIFT
PERFORMED
WELL
IN
TERMS
OF
UNDER
SEGMENTATION
ERROR
AND
BOUNDARY
RECALL
RANKING
SECOND
AND
THIRD
OVERALL
HOWEVER
SHOWED
RELATIVELY
POOR
SEGMENTATION
PERFORMANCE
AND
OTHER
LIMITATIONS
MAKE
IT
A
LESS
THAN
IDEAL
CHOICE
IT
HAS
A
SLOW
RUNTIME
REQUIRES
SEVERAL
NONINTUITIVE
PARAMETERS
TO
BE
TUNED
AND
DOES
NOT
OFFER
CONTROL
OVER
THE
AMOUNT
OR
COMPACTNESS
OF
SUPERPIXELS
FINALLY
THE
SOURCE
CODE
FAILS
TO
ENSURE
THAT
SUPERPIXELS
ARE
COMPLETELY
CONNECTED
COMPONENTS
WHICH
CAN
BE
PROBLEMATIC
FOR
SUBSEQUENT
PROCESSING
ADHERES
WELL
TO
IMAGE
BOUNDARIES
ALTHOUGH
THE
SUPERPIXELS
ARE
VERY
IRREGULAR
IT
RANKS
FIRST
IN
BOUNDARY
RECALL
OUTPERFORMING
SLIC
BY
A
SMALL
MARGIN
IT
IS
THE
SECOND
FASTEST
METHOD
SEGMENTING
A
IMAGE
IN
WITHOUT
PERFORMING
A
PARAMETER
SEARCH
HOWEVER
SHOWED
RELATIVELY
POOR
SEGMENTATION
PERFORMANCE
AND
UNDER
SEGMENTATION
ERROR
LIKELY
BECAUSE
ITS
LARGE
IRREGULARLY
SHAPED
SUPERPIXELS
ARE
NOT
SUITED
TO
SEGMENTATION
METHODS
SUCH
AS
LAST
DOES
NOT
ALLOW
THE
NUMBER
OF
SUPERPIXELS
OR
COMPACTNESS
TO
BE
CONTROLLED
WITH
ITS
THREE
INPUT
PARAMETERS
SLIC
AMONG
THE
SUPERPIXEL
METHODS
CONSIDERED
HERE
SLIC
IS
CLEARLY
THE
BEST
OVERALL
PERFORMER
IT
IS
THE
FASTEST
METHOD
SEGMENTING
A
IMAGE
IN
AND
MOST
MEMORY
EFFICIENT
IT
BOASTS
EXCELLENT
BOUNDARY
ADHERENCE
OUTPERFORMING
ALL
OTHER
METHODS
IN
UNDER
SEGMENTATION
ERROR
AND
IS
SECOND
ONLY
TO
IN
BOUNDARY
RECALL
BY
A
SMALL
MARGIN
BY
ADJUSTING
M
IT
RANKS
FIRST
WHEN
USED
FOR
SEGMENTATION
SLIC
SHOWED
THE
BEST
BOOST
IN
PERFORMANCE
ON
THE
MSRC
AND
PASCAL
DATA
SETS
SLIC
IS
SIMPLE
TO
USE
ITS
SOLE
PARAMETER
BEING
THE
NUMBER
OF
DESIRED
SUPERPIXELS
AND
IT
IS
ONE
OF
THE
FEW
METHODS
TO
PRODUCE
SUPERVOXELS
FINALLY
AMONG
EXISTING
METHODS
SLIC
IS
UNIQUE
IN
ITS
ABILITY
TO
CONTROL
THE
TRADEOFF
BETWEEN
SUPERPIXEL
COMPACTNESS
AND
BOUNDARY
ADHERENCE
IF
DESIRED
THROUGH
M
MORE
COMPLEX
DISTANCE
MEASURES
THE
READER
MAY
WONDER
IF
MORE
SOPHISTICATED
DISTANCE
MEASURES
IMPROVE
SLIC
PERFORMANCE
CONSIDERING
THE
SIMPLICITY
OF
THE
APPROACH
DESCRIBED
IN
SECTION
WE
INVESTIGATED
THIS
QUESTION
BY
REPLACING
THE
DISTANCE
IN
WITH
AN
ADAPTIVELY
NORMALIZED
DISTANCE
MEASURE
ASLIC
AND
A
GEODESIC
DISTANCE
MEASURE
GSLIC
PERHAPS
SURPRISINGLY
THE
SIMPLE
DISTANCE
MEASURE
USED
IN
OUTPERFORMS
ASLIC
AND
GSLIC
IN
TERMS
OF
SPEED
MEMORY
AND
BOUNDARY
ADHERENCE
ADAPTIVE
SLIC
OR
ASLIC
ADAPTS
THE
COLOR
AND
SPATIAL
NORMALIZATIONS
WITHIN
EACH
CLUSTER
AS
DESCRIBED
IN
SECTION
AND
M
IN
ARE
THE
ASSUMED
MAXIMUM
SPATIAL
AND
COLOR
DISTANCES
WITHIN
A
CLUSTER
THESE
CONSTANT
VALUES
ARE
USED
TO
NORMALIZE
COLOR
AND
SPATIAL
PROXIMITY
SO
THEY
CAN
BE
COMBINED
INTO
A
SINGLE
DISTANCE
MEASURE
FOR
CLUSTERING
INSTEAD
OF
USING
CONSTANT
VALUES
ASLIC
DYNAMICALLY
NORMALIZES
THE
PROXIMITIES
FOR
EACH
CLUSTER
USING
ITS
MAXIMUM
OBSERVED
SPATIAL
AND
COLOR
DISTANCES
ÐMS
MCÞ
FROM
THE
PREVIOUS
ITERATION
THUS
THE
DISTANCE
MEASURE
BECOMES
D
FFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFIFFI
DC
MC
Þ
DS
MS
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
NOVEMBER
FIG
SLIC
APPLIED
TO
SEGMENT
MITOCHONDRIA
FROM
AND
EM
IMAGES
OF
NEURAL
TISSUE
A
SLIC
SUPERPIXELS
FROM
AN
EM
SLICE
B
THE
SEGMENTATION
RESULT
FROM
THE
METHOD
OF
C
SLIC
SUPERVOXELS
ON
A
VOLUME
D
MITOCHONDRIA
EXTRACTED
USING
THE
METHOD
DESCRIBED
IN
E
SEGMENTATION
PERFORMANCE
COMPARING
SLIC
SUPERVOXELS
VERSUS
CUBES
OF
SIMILAR
SIZE
FOR
THE
VOLUME
IN
C
AS
BEFORE
CONSTANT
NORMALIZATION
FACTORS
ARE
USED
FOR
THE
FIRST
ITERATION
BUT
THE
ALGORITHM
SUBSEQUENTLY
KEEPS
TRACK
OF
THE
MAXIMUM
DISTANCES
FOR
EACH
CLUSTER
THE
ADVANTAGE
OF
THIS
APPROACH
IS
THAT
THE
SUPERPIXEL
COMPACTNESS
IS
MORE
CONSISTENT
AND
IT
IS
NEVER
NECESSARY
TO
SETM
THIS
COMES
AT
THE
PRICE
OF
REDUCED
BOUNDARY
RECALL
PERFORMANCE
AS
SHOWN
IN
FIG
GEODESIC
SLIC
OR
GSLIC
REPLACES
THE
DISTANCE
OF
WITH
A
GEODESIC
DISTANCE
THE
UNSIGNED
GEODESIC
DISTANCE
FROM
ONE
PIXEL
IÐPIÞ
TO
ANOTHER
IÐPJÞ
IS
DEFINED
AS
GÐIÐPIÞ
IÐPJÞÞ
MIN
DÐPÞ
WHERE
IS
THE
SET
OF
ALL
PATHS
BETWEEN
IÐPIÞ
AND
IÐPJÞ
AND
DÐPÞ
IS
THE
COST
ASSOCIATED
TO
PATH
P
GIVEN
BY
DÐPÞ
XN
KIÐPIÞ
IÐPI
WHERE
KIÐPIÞ
IÐPI
IS
THE
EUCLIDEAN
DISTANCE
BETWEEN
THE
CIELAB
COLOR
VECTORS
OF
PIXELS
PI
AND
PI
THIS
APPROACH
HAS
THE
ADVANTAGE
THAT
THE
CONNECTIVITY
IN
THE
XY
PLANE
IS
GUARANTEED
ELIMINATING
THE
NEED
FOR
THE
POSTPROCESSING
STEP
HOWEVER
THE
COMPUTATION
COST
IS
HIGHER
AND
THE
BOUNDARY
ADHERENCE
PERFORMANCE
SUFFERS
AS
SEEN
IN
FIG
BIOMEDICAL
APPLICATIONS
MANY
POPULAR
GRAPH
BASED
SEGMENTATION
APPROACHES
SUCH
AS
GRAPH
CUTS
BECOME
INCREASINGLY
EXPENSIVE
AS
MORE
NODES
ARE
ADDED
TO
THE
GRAPH
LIMITING
IMAGE
SIZE
IN
PRACTICE
FOR
SOME
APPLICATIONS
SUCH
AS
MITOCHONDRIA
SEGMENTATION
FROM
ELECTRON
MICROGRAPHS
EM
THE
IMAGES
ARE
LARGE
BUT
REDUCING
THE
RESOLUTION
IS
NOT
AN
OPTION
IN
SUCH
CASES
SEGMENTATION
ON
A
GRAPH
DEFINED
OVER
THE
PIXEL
GRID
WOULD
BE
INTRACTABLE
IN
SLIC
SUPERPIXELS
SIGNIFICANTLY
REDUCE
THE
COMPLEXITY
OF
THE
GRAPH
MAKING
THE
SEGMENTATION
TRACTABLE
SEGMENTED
MITOCHONDRIA
FROM
ARE
SHOWN
IN
FIGS
AND
IN
THIS
APPROACH
IS
EXTENDED
TO
IMAGE
STACKS
WHICH
CAN
CONTAIN
BILLIONS
OF
VOXELS
ONLY
THE
MOST
FRUGAL
OF
ALGORITHMS
CAN
OPERATE
ON
SUCH
LARGE
VOLUMES
OF
DATA
WITHOUT
REDUCING
THE
SIZE
OF
THE
GRAPH
IN
SOME
MANNER
SLIC
SUPERVOXELS
REDUCE
THE
MEMORY
REQUIREMENTS
AND
COMPLEXITY
BY
OVER
THREE
ORDERS
OF
MAGNITUDE
AND
SIGNIFICANTLY
INCREASES
PERFORMANCE
OVER
REGULAR
CUBES
AS
SHOWN
IN
FIGS
AND
CONCLUSION
SUPERPIXELS
HAVE
BECOME
AN
ESSENTIAL
TOOL
TO
THE
VISION
COMMUNITY
AND
IN
THIS
PAPER
WE
PROVIDE
THE
READER
WITH
AN
IN
DEPTH
PERFORMANCE
ANALYSIS
OF
MODERN
SUPERPIXEL
TECHNIQUES
WE
PERFORMED
AN
EMPIRICAL
COMPARISON
OF
FIVE
STATE
OF
THE
ART
ALGORITHMS
CONCENTRATING
ON
THEIR
BOUNDARY
ADHERENCE
SEGMENTATION
SPEED
AND
PERFORMANCE
WHEN
USED
AS
A
PREPROCESSING
STEP
IN
A
SEGMENTATION
FRAMEWORK
IN
ADDITION
WE
PROPOSED
A
NEW
METHOD
FOR
GENERATING
SUPERPIXELS
BASED
ON
K
MEANS
CLUSTERING
SLIC
WHICH
HAS
BEEN
SHOWN
TO
OUTPERFORM
EXISTING
SUPERPIXEL
METHODS
IN
NEARLY
EVERY
RESPECT
ALTHOUGH
OUR
EXPERIMENTS
ARE
THOROUGH
THEY
COME
WITH
A
CAVEAT
CERTAIN
SUPERPIXEL
METHODS
SPECIFICALLY
AND
DO
NOT
CONSIDER
COLOR
INFORMATION
WHILE
THE
OTHER
METHODS
DO
THIS
MAY
ADVERSELY
IMPACT
THEIR
PERFORMANCE
THE
IMAGENET
LARGE
SCALE
VISUAL
RECOGNITION
CHALLENGE
IS
A
BENCHMARK
IN
OBJECT
CATEGORY
CLASSIFICATION
AND
DETECTION
ON
HUNDREDS
OF
OBJECT
CATEGORIES
AND
MILLIONS
OF
IMAGES
THE
CHALLENGE
HAS
BEEN
RUN
ANNUALLY
FROM
TO
PRESENT
ATTRACTING
PARTICIPATION
FROM
MORE
THAN
FIFTY
INSTITUTIONS
THIS
PAPER
DESCRIBES
THE
CREATION
OF
THIS
BENCHMARK
DATASET
AND
THE
ADVANCES
IN
OBJECT
RECOGNITION
THAT
HAVE
BEEN
POSSIBLE
AS
A
RESULT
WE
DISCUSS
THE
CHALLENGES
OF
COLLECTING
LARGE
SCALE
GROUND
TRUTH
ANNOTATION
HIGHLIGHT
KEY
BREAKTHROUGHS
IN
CATEGORICAL
OBJECT
RECOGNITION
PROVIDE
A
DETAILED
ANALYSIS
OF
THE
CURRENT
STATE
OF
THE
FIELD
OF
LARGE
SCALE
IMAGE
CLASSIFICATION
AND
OBJECT
DETECTION
AND
COMPARE
THE
STATE
OFTHE
ART
COMPUTER
VISION
ACCURACY
WITH
HUMAN
ACCURACY
WE
CONCLUDE
WITH
LESSONS
LEARNED
IN
THE
YEARS
OF
THE
CHALLENGE
AND
PROPOSE
FUTURE
DIRECTIONS
AND
IMPROVEMENTS
KEYWORDS
DATASET
LARGE
SCALE
BENCHMARK
OBJECT
RECOGNITION
OBJECT
DETECTION
INTRODUCTION
OVERVIEW
THE
IMAGENET
LARGE
SCALE
VISUAL
RECOGNITION
CHALLENGE
ILSVRC
HAS
BEEN
RUNNING
ANNUALLY
FOR
YEARS
COMMUNICATED
BY
M
HEBERT
OLGA
RUSSAKOVSKY
AND
JIA
DENG
AUTHORS
CONTRIBUTED
EQUALLY
B
OLGA
RUSSAKOVSKY
OLGA
CS
STANFORD
EDU
STANFORD
UNIVERSITY
STANFORD
CA
USA
UNIVERSITY
OF
MICHIGAN
ANN
ARBOR
MI
USA
MASSACHUSETTS
INSTITUTE
OF
TECHNOLOGY
CAMBRIDGE
MA
USA
UNC
CHAPEL
HILL
CHAPEL
HILL
NC
USA
SINCE
AND
HAS
BECOME
THE
STANDARD
BENCHMARK
FOR
LARGE
SCALE
OBJECT
RECOGNITION
ILSVRC
FOLLOWS
IN
THE
FOOTSTEPS
OF
THE
PASCAL
VOC
CHALLENGE
EVERINGHAM
ET
AL
ESTABLISHED
IN
WHICH
SET
THE
PRECEDENT
FOR
STANDARDIZED
EVALUATION
OF
RECOGNITION
ALGORITHMS
IN
THE
FORM
OF
YEARLY
COMPETITIONS
AS
IN
PASCAL
VOC
ILSVRC
CONSISTS
OF
TWO
COMPONENTS
A
PUBLICALLY
AVAILABLE
DATASET
AND
AN
ANNUAL
COMPETITION
AND
CORRESPONDING
WORKSHOP
THE
DATASET
ALLOWS
FOR
THE
DEVELOPMENT
AND
COMPARISON
OF
CATEGORICAL
OBJECT
RECOGNITION
ALGORITHMS
AND
THE
COMPETITION
ANDWORKSHOP
PROVIDE
AWAY
TO
TRACK
THE
PROGRESS
AND
DISCUSS
THE
LESSONS
LEARNED
FROM
THE
MOST
SUCCESSFUL
AND
INNOVATIVE
ENTRIES
EACH
YEAR
THE
PUBLICALLY
RELEASED
DATASET
CONTAINS
A
SET
OF
MANUALLY
ANNOTATED
TRAINING
IMAGES
A
SET
OF
TEST
IMAGES
IS
ALSO
RELEASED
WITH
THE
MANUAL
ANNOTATIONS
WITHHELD
PARTICIPANTS
TRAIN
THEIR
ALGORITHMS
USING
THE
TRAINING
IMAGES
AND
THEN
AUTOMATICALLY
ANNOTATE
THE
TEST
IMAGES
THESE
PREDICTED
ANNOTATIONS
ARE
SUBMITTED
TO
THE
EVALUATION
SERVER
RESULTS
OF
THE
EVALUATION
ARE
REVEALED
AT
THE
END
OF
THE
COMPETITION
PERIOD
AND
AUTHORS
ARE
INVITED
TO
SHARE
INSIGHTS
AT
THE
WORKSHOP
HELD
AT
THE
INTERNATIONAL
CONFERENCE
ON
COMPUTER
VISION
ICCV
OR
EUROPEAN
CONFERENCE
ON
COMPUTER
VISION
ECCV
IN
ALTERNATE
YEARS
ILSVRC
ANNOTATIONS
FALL
INTO
ONE
OF
TWO
CATEGORIES
IMAGE
LEVEL
ANNOTATION
OF
A
BINARY
LABEL
FOR
THE
PRESENCE
OR
ABSENCE
OF
AN
OBJECT
CLASS
IN
THE
IMAGE
E
G
THERE
ARE
CARS
IN
THIS
IMAGE
BUT
THERE
ARE
NO
TIGERS
AND
OBJECT
LEVEL
IN
THIS
PAPER
WE
WILL
BE
USING
THE
TERM
OBJECT
RECOGNITION
BROADLY
TO
ENCOMPASS
BOTH
IMAGE
CLASSIFICATION
A
TASK
REQUIRING
AN
ALGORITHM
TO
DETERMINE
WHAT
OBJECT
CLASSES
ARE
PRESENT
IN
THE
IMAGE
AS
WELL
AS
OBJECT
DETECTION
A
TASK
REQUIRING
AN
ALGORITHM
TO
LOCALIZE
ALL
OBJECTS
PRESENT
IN
THE
IMAGE
IN
THE
TEST
ANNOTATIONS
WERE
LATER
RELEASED
PUBLICLY
SINCE
THEN
THE
TEST
ANNOTATION
HAVE
BEEN
KEPT
HIDDEN
INT
J
COMPUT
VIS
ANNOTATION
OF
A
TIGHT
BOUNDING
BOX
AND
CLASS
LABEL
AROUND
AN
OBJECT
INSTANCE
IN
THE
IMAGE
E
G
THERE
IS
A
SCREWDRIVER
CENTERED
AT
POSITION
WITH
WIDTH
OF
PIXELS
AND
HEIGHT
OF
PIXELS
LARGE
SCALE
CHALLENGES
AND
INNOVATIONS
IN
CREATING
THE
DATASET
SEVERAL
CHALLENGES
HAD
TO
BE
ADDRESSED
SCALING
UP
FROM
IMAGES
IN
PASCAL
VOC
TO
IN
ILSVRC
AND
FROM
OBJECT
CLASSES
TO
OBJECT
CLASSES
BRINGS
WITH
IT
SEVERAL
CHALLENGES
IT
IS
NO
LONGER
FEASIBLE
FOR
A
SMALL
GROUP
OF
ANNOTATORS
TO
ANNOTATE
THE
DATA
AS
IS
DONE
FOR
OTHER
DATASETS
FEI
FEI
ET
AL
CRIMINISI
EVERINGHAM
ET
AL
XIAO
ET
AL
INSTEAD
WE
TURN
TO
DESIGNING
NOVEL
CROWDSOURCING
APPROACHES
FOR
COLLECTING
LARGE
SCALE
ANNOTATIONS
SU
ET
AL
DENG
ET
AL
SOME
OF
THE
OBJECT
CLASSES
MAY
NOT
BE
AS
EASY
TO
ANNOTATE
AS
THE
CATEGORIES
OF
PASCALVOC
E
G
BANANAS
WHICH
APPEAR
IN
BUNCHES
MAY
NOT
BE
AS
EASY
TO
DELINEATE
AS
THE
BASIC
LEVEL
CATEGORIES
OF
AEROPLANES
OR
CARS
HAVING
MORE
THAN
A
MILLION
IMAGES
MAKES
IT
INFEASIBLE
TO
ANNOTATE
THE
LOCATIONS
OF
ALL
OBJECTS
MUCH
LESS
WITH
OBJECT
SEGMENTATIONS
HUMAN
BODY
PARTS
AND
OTHER
DETAILED
ANNOTATIONS
THAT
SUBSETS
OF
PASCAL
VOC
CONTAIN
NEW
EVALUATION
CRITERIA
HAVE
TO
BE
DEFINED
TO
TAKE
INTO
ACCOUNT
THE
FACTS
THAT
OBTAINING
PERFECT
MANUAL
ANNOTATIONS
IN
THIS
SETTING
MAY
BE
INFEASIBLE
ONCE
THE
CHALLENGE
DATASETWAS
COLLECTED
ITS
SCALE
ALLOWED
FOR
UNPRECEDENTED
OPPORTUNITIES
BOTH
IN
EVALUATION
OF
OBJECT
RECOGNITION
ALGORITHMS
AND
IN
DEVELOPING
NEW
TECHNIQUES
NOVEL
ALGORITHMIC
INNOVATIONS
EMERGE
WITH
THE
AVAILABILITY
OF
LARGE
SCALE
TRAINING
DATA
THE
BROAD
SPECTRUM
OF
OBJECT
CATEGORIESMOTIVATED
THE
NEED
FOR
ALGORITHMS
THAT
ARE
EVEN
ABLE
TO
DISTINGUISH
CLASSES
WHICH
ARE
VISUALLY
VERY
SIMILAR
WE
HIGHLIGHT
THE
MOST
SUCCESSFUL
OF
THESE
ALGORITHMS
IN
THIS
PAPER
AND
COMPARE
THEIR
PERFORMANCE
WITH
HUMAN
LEVEL
ACCURACY
FINALLY
THE
LARGE
VARIETY
OF
OBJECT
CLASSES
IN
ILSVRC
ALLOWS
US
TO
PERFORM
AN
ANALYSIS
OF
STATISTICAL
PROPERTIES
OF
OBJECTS
AND
THEIR
IMPACT
ON
RECOGNITION
ALGORITHMS
THIS
TYPE
OF
ANALYSIS
ALLOWS
FOR
A
DEEPER
UNDERSTANDING
OF
OBJECT
RECOGNITION
AND
FOR
DESIGNING
THE
NEXT
GENERATION
OF
GENERAL
OBJECT
RECOGNITION
ALGORITHMS
GOALS
THIS
PAPER
HAS
THREE
KEY
GOALS
TO
DISCUSS
THE
CHALLENGES
OF
CREATING
THIS
LARGE
SCALE
OBJECT
RECOGNITION
BENCHMARK
DATASET
TO
HIGHLIGHT
THE
DEVELOPMENTS
IN
OBJECT
CLASSIFICATION
AND
DETECTION
THAT
HAVE
RESULTED
FROM
THIS
EFFORT
AND
TO
TAKE
A
CLOSER
LOOK
AT
THE
CURRENT
STATE
OF
THE
FIELD
OF
CATEGORICAL
OBJECT
RECOGNITION
THE
PAPER
MAY
BE
OF
INTEREST
TO
RESEARCHERS
WORKING
ON
CREATING
LARGE
SCALE
DATASETS
AS
WELL
AS
TO
ANYBODY
INTERESTED
IN
BETTER
UNDERSTANDING
THE
HISTORY
AND
THE
CURRENT
STATE
OF
LARGE
SCALE
OBJECT
RECOGNITION
THE
COLLECTED
DATASET
AND
ADDITIONAL
INFORMATION
ABOUT
ILSVRC
CAN
BE
FOUND
AT
HTTP
IMAGE
NET
ORG
CHALLENGES
LSVRC
RELATED
WORK
WE
BRIEFLY
DISCUSS
SOME
PRIOR
WORK
IN
CONSTRUCTING
BENCHMARK
IMAGE
DATASETS
IMAGE
CLASSIFICATION
DATASETS
CALTECH
FEI
FEI
ET
AL
WAS
AMONG
THE
FIRST
STANDARDIZED
DATASETS
FOR
MULTICATEGORY
IMAGE
CLASSIFICATION
WITH
OBJECT
CLASSES
AND
COMMONLY
TRAINING
IMAGES
PER
CLASS
CALTECH
GRIFFIN
ET
AL
INCREASED
THE
NUMBER
OF
OBJECT
CLASSES
TO
AND
ADDED
IMAGES
WITH
GREATER
SCALE
AND
BACKGROUND
VARIABILITY
THE
TINYIMAGES
DATASET
TORRALBA
ET
AL
CONTAINS
MILLION
LOW
RESOLUTION
IMAGES
COLLECTED
FROM
THE
INTERNET
USING
SYNSETS
IN
WORDNET
MILLER
AS
QUERIES
HOWEVER
SINCE
THIS
DATA
HAS
NOT
BEEN
MANUALLY
VERIFIED
THERE
ARE
MANY
ERRORS
MAKING
IT
LESS
SUITABLE
FOR
ALGORITHM
EVALUATION
DATASETS
SUCH
AS
SCENES
OLIVA
AND
TORRALBA
FEI
FEI
AND
PERONA
LAZEBNIK
ET
AL
OR
RECENT
PLACES
ZHOU
ET
AL
PROVIDE
A
SINGLE
SCENE
CATEGORY
LABEL
AS
OPPOSED
TO
AN
OBJECT
CATEGORY
THE
IMAGENET
DATASET
DENG
ET
AL
IS
THE
BACKBONE
OF
ILSVRC
IMAGENET
IS
AN
IMAGE
DATASET
ORGANIZED
ACCORDING
TO
THE
WORDNET
HIERARCHY
MILLER
EACH
CONCEPT
IN
WORDNET
POSSIBLY
DESCRIBED
BY
MULTIPLE
WORDS
OR
WORD
PHRASES
IS
CALLED
A
SYNONYM
SET
OR
SYNSET
IMAGENET
POPULATES
SYNSETS
OFWORDNET
WITH
AN
AVERAGE
OF
MANUALLY
VERIFIED
AND
FULL
RESOLUTION
IMAGES
AS
A
RESULT
IMAGENET
CONTAINS
ANNOTATED
IMAGES
ORGANIZED
BY
THE
SEMANTIC
HIERARCHY
OF
WORDNET
AS
OF
AUGUST
IMAGENET
IS
LARGER
IN
SCALE
AND
DIVERSITY
THAN
THE
OTHER
IMAGE
CLASSIFICATION
DATASETS
ILSVRC
USES
A
SUBSET
OF
IMAGENET
IMAGES
FOR
TRAINING
THE
ALGORITHMS
AND
SOME
OF
IMAGENET
IMAGE
COLLECTION
PROTOCOLS
FOR
ANNOTATING
ADDITIONAL
IMAGES
FOR
TESTING
THE
ALGORITHMS
IMAGE
PARSINGDATASETS
MANY
DATASETS
AIM
TO
PROVIDE
RICHER
IMAGE
ANNOTATIONS
BEYOND
IMAGE
CATEGORY
LABELS
LABELME
RUSSELL
ET
AL
CONTAINS
GENERAL
PHOTOGRAPHS
WITH
MULTIPLE
OBJECTS
PER
IMAGE
IT
HAS
BOUNDING
POLYGON
ANNOTATIONS
AROUND
OBJECTS
BUT
THE
OBJECT
NAMES
ARE
NOT
STANDARDIZED
ANNOTATORS
ARE
FREE
TO
CHOOSE
WHICH
OBJECTS
TO
LABEL
AND
WHAT
TO
NAME
EACH
OBJECT
THE
XIAO
ET
AL
DATASET
CONTAINS
MANUALLY
CLEANED
UP
AND
FULLY
ANNOTATED
IMAGES
MORE
SUITABLE
FOR
STANDARD
OBJECT
DETECTION
TRAINING
AND
EVALUATION
SIFT
FLOW
LIU
ET
AL
CONTAINS
IMAGES
LABELED
USING
THE
LABELME
SYSTEM
THE
LOTUSHILL
DATASET
YAO
ET
AL
CONTAINS
VERY
DETAILED
ANNOTATIONS
INT
J
COMPUT
VIS
OF
OBJECTS
IN
IMAGES
AND
VIDEO
FRAMES
BUT
IT
IS
NOT
AVAILABLE
FOR
FREE
SEVERAL
DATASETS
PROVIDE
PIXEL
LEVEL
SEGMENTATIONS
FOR
EXAMPLE
MSRC
DATASET
CRIMINISI
WITH
IMAGES
AND
OBJECT
CLASSES
STANFORD
BACKGROUND
DATASET
GOULD
ET
AL
WITH
IMAGES
AND
CLASSES
AND
THE
BERKELEY
SEGMENTATION
DATASET
ARBELAEZ
ET
AL
WITH
IMAGES
ANNOTATED
WITH
OBJECT
BOUNDARIES
OPEN
SURFACES
SEGMENTS
SURFACES
FROM
CONSUMER
PHOTOGRAPHS
AND
ANNOTATES
THEM
WITH
SURFACE
PROPERTIES
INCLUDING
MATERIAL
TEXTURE
AND
CONTEXTUAL
INFORMATION
BELL
ET
AL
THE
CLOSEST
TO
ILSVRC
IS
THE
PASCAL
VOC
DATASET
EVERINGHAM
ET
AL
WHICH
PROVIDES
A
STANDARDIZED
TEST
BED
FOR
OBJECT
DETECTION
IMAGE
CLASSIFICATION
OBJECT
SEGMENTATION
PERSON
LAYOUT
AND
ACTION
CLASSIFICATION
MUCH
OF
THE
DESIGN
CHOICES
IN
ILSVRC
HAVE
BEEN
INSPIRED
BY
PASCAL
VOC
AND
THE
SIMILARITIES
AND
DIFFERENCES
BETWEEN
THE
DATASETS
ARE
DISCUSSED
AT
LENGTH
THROUGHOUT
THE
PAPER
ILSVRC
SCALES
UP
PASCAL
VOC
GOAL
OF
STANDARDIZED
TRAINING
AND
EVALUATION
OF
RECOGNITION
ALGORITHMS
BY
MORE
THAN
AN
ORDER
OF
MAGNITUDE
IN
NUMBER
OF
OBJECT
CLASSES
AND
IMAGES
PASCAL
VOC
HAS
OBJECT
CLASSES
AND
IMAGES
COMPARED
TO
WITH
OBJECT
CLASSES
AND
ANNOTATED
IMAGES
THE
RECENTLY
RELEASED
COCO
DATASET
LIN
ET
AL
CONTAINS
MORE
THAN
IMAGES
WITH
MILLION
OBJECT
INSTANCES
MANUALLY
SEGMENTED
IT
HAS
FEWER
OBJECT
CATEGORIES
THAN
ILSVRC
IN
COCO
VERSUS
IN
ILSVRC
OBJECT
DETECTION
BUT
MORE
INSTANCES
PER
CATEGORY
ON
AVERAGE
COMPARED
TO
ABOUT
IN
ILSVRC
OBJECT
DETECTION
FURTHER
IT
CONTAINS
OBJECT
SEGMENTATION
ANNOTATIONS
WHICH
ARE
NOT
CURRENTLY
AVAILABLE
IN
ILSVRC
COCO
IS
LIKELY
TO
BECOME
ANOTHER
IMPORTANT
LARGE
SCALE
BENCHMARK
LARGE
SCALE
ANNOTATION
ILSVRC
MAKES
EXTENSIVE
USE
OF
AMAZON
MECHANICAL
TURK
TO
OBTAIN
ACCURATE
ANNOTATIONS
SOROKIN
AND
FORSYTH
WORKS
SUCH
AS
WELINDER
ET
AL
SHENG
ET
AL
VITTAYAKORN
AND
HAYS
DESCRIBE
QUALITY
CONTROL
MECHANISMS
FOR
THIS
MARKETPLACE
VONDRICK
ET
AL
PROVIDES
A
DETAILED
OVERVIEW
OF
CROWDSOURCING
VIDEO
ANNOTATION
A
RELATED
LINE
OF
WORK
IS
TO
OBTAIN
ANNOTATIONS
THROUGH
WELL
DESIGNED
GAMES
E
G
VON
AHN
AND
DABBISH
OUR
NOVEL
APPROACHES
TO
CROWDSOURCING
ACCURATE
IMAGE
ANNOTATIONS
ARE
IN
SECTS
AND
STANDARDIZED
CHALLENGES
THERE
ARE
SEVERAL
DATASETS
WITH
STANDARDIZED
ONLINE
EVALUATION
SIMILAR
TO
ILSVRC
THE
AFOREMENTIONED
PASCALVOC
EVERINGHAM
ET
AL
LABELED
FACES
IN
THE
WILD
HUANG
ET
AL
FOR
UNCONSTRAINED
FACE
RECOGNITION
RECONSTRUCTION
MEETS
RECOGNITION
URTASUN
ET
AL
FOR
RECONSTRUCTION
AND
KITTI
GEIGER
ET
AL
FOR
COMPUTER
VISION
IN
AUTONOMOUS
DRIVING
THESE
DATASETS
ALONG
WITH
ILSVRC
HELP
BENCHMARK
PROGRESS
IN
DIFFERENT
AREAS
OF
COMPUTER
VISION
WORKS
SUCH
AS
TORRALBA
AND
EFROS
EMPHASIZE
THE
IMPORTANCE
OF
EXAMINING
THE
BIAS
INHERENT
IN
ANY
STANDARDIZED
DATASET
PAPER
LAYOUT
WE
BEGIN
WITH
A
BRIEF
OVERVIEW
OF
ILSVRC
CHALLENGE
TASKS
IN
SECT
DATASET
COLLECTION
AND
ANNOTATION
ARE
DESCRIBED
AT
LENGTH
IN
SECT
SECTION
DISCUSSES
THE
EVALUATION
CRITERIA
OF
ALGORITHMS
IN
THE
LARGE
SCALE
RECOGNITION
SETTING
SECTION
PROVIDES
AN
OVERVIEW
OF
THE
METHODS
DEVELOPED
BY
ILSVRC
PARTICIPANTS
SECTION
CONTAINS
AN
IN
DEPTH
ANALYSIS
OFILSVRCRESULTS
SECT
DOCUMENTS
THE
PROGRESS
OF
LARGE
SCALE
RECOGNITION
OVER
THE
YEARS
SECT
CONCLUDES
THAT
ILSVRC
RESULTS
ARE
STATISTICALLY
SIGNIFICANT
SECT
THOROUGHLY
ANALYZES
THE
CURRENT
STATE
OF
THE
FIELD
OF
OBJECT
RECOGNITION
AND
SECT
COMPARES
STATE
OF
THE
ART
COMPUTER
VISION
ACCURACY
WITH
HUMAN
ACCURACY
WE
CONCLUDE
AND
DISCUSS
LESSONS
LEARNED
FROM
ILSVRC
IN
SECT
CHALLENGE
TASKS
THE
GOAL
OF
ILSVRC
IS
TO
ESTIMATE
THE
CONTENT
OF
PHOTOGRAPHS
FOR
THE
PURPOSE
OF
RETRIEVAL
AND
AUTOMATIC
ANNOTATION
TEST
IMAGES
ARE
PRESENTED
WITH
NO
INITIAL
ANNOTATION
AND
ALGORITHMS
HAVE
TO
PRODUCE
LABELINGS
SPECIFYING
WHAT
OBJECTS
ARE
PRESENT
IN
THE
IMAGES
NEW
TEST
IMAGES
ARE
COLLECTED
AND
LABELED
ESPECIALLY
FOR
THIS
COMPETITION
AND
ARE
NOT
PART
OF
THE
PREVIOUSLY
PUBLISHED
IMAGENET
DATASET
DENG
ET
AL
ILSVRC
OVER
THE
YEARS
HAS
CONSISTED
OF
ONE
OR
MORE
OF
THE
FOLLOWING
TASKS
YEARS
IN
PARENTHESES
IMAGE
CLASSIFICATION
ALGORITHMS
PRODUCE
A
LIST
OF
OBJECT
CATEGORIES
PRESENT
IN
THE
IMAGE
SINGLE
OBJECT
LOCALIZATION
ALGORITHMS
PRODUCE
A
LIST
OF
OBJECT
CATEGORIES
PRESENT
IN
THE
IMAGE
ALONG
WITH
AN
AXIS
ALIGNED
BOUNDING
BOX
INDICATING
THE
POSITION
AND
SCALE
OF
ONE
INSTANCE
OF
EACH
OBJECT
CATEGORY
OBJECT
DETECTION
ALGORITHMS
PRODUCE
A
LIST
OF
OBJECT
CATEGORIES
PRESENT
IN
THE
IMAGE
ALONG
WITH
AN
AXIS
ALIGNED
BOUNDING
BOX
INDICATING
THE
POSITION
AND
SCALE
OF
EVERY
INSTANCE
OF
EACH
OBJECT
CATEGORY
THIS
SECTION
PROVIDES
AN
OVERVIEW
AND
HISTORY
OF
EACH
OF
THE
THREE
TASKS
TABLE
SHOWS
SUMMARY
STATISTICS
IN
ADDITION
ILSVRC
IN
ALSO
INCLUDED
A
TASTER
FINE
GRAINED
CLASSIFICATION
TASK
WHERE
ALGORITHMS
WOULD
CLASSIFY
DOG
PHOTOGRAPHS
INTO
ONE
OF
DOG
BREEDS
KHOSLA
ET
AL
FINE
GRAINED
CLASSIFICATION
HAS
EVOLVED
INTO
ITS
OWN
FINE
GRAINED
CLASSIFICATION
CHALLENGE
IN
BERG
ET
AL
WHICH
IS
OUTSIDE
THE
SCOPE
OF
THIS
PAPER
INT
J
COMPUT
VIS
TABLE
OVERVIEW
OF
THE
PROVIDED
ANNOTATIONS
FOR
EACH
OF
THE
TASKS
IN
ILSVRC
TASK
IMAGE
CLASSIFICATION
SINGLE
OBJECT
LOCALIZATION
OBJECT
DETECTION
MANUAL
LABELING
ON
TRAINING
SET
NUMBER
OF
OBJECT
CLASSES
ANNOTATED
PER
IMAGE
OR
MORE
LOCATIONS
OF
ANNOTATED
CLASSES
ALL
INSTANCES
ON
SOME
IMAGES
ALL
INSTANCES
ON
ALL
IMAGES
MANUAL
LABELING
ON
VALIDATION
AND
TEST
SETS
NUMBER
OF
OBJECT
CLASSES
ANNOTATED
PER
IMAGE
ALL
TARGET
CLASSES
LOCATIONS
OF
ANNOTATED
CLASSES
ALL
INSTANCES
ON
ALL
IMAGES
ALL
INSTANCES
ON
ALL
IMAGES
IMAGE
CLASSIFICATION
TASK
DATA
FOR
THE
IMAGE
CLASSIFICATION
TASK
CONSISTS
OF
PHOTOGRAPHS
COLLECTED
FROM
AND
OTHER
SEARCH
ENGINES
MANUALLY
LABELED
WITH
THE
PRESENCE
OF
ONE
OF
OBJECT
CATEGORIES
EACH
IMAGE
CONTAINS
ONE
GROUND
TRUTH
LABEL
FOR
EACH
IMAGE
ALGORITHMS
PRODUCE
A
LIST
OF
OBJECT
CATEGORIES
PRESENT
IN
THE
IMAGE
THE
QUALITY
OF
A
LABELING
IS
EVALUATED
BASED
ON
THE
LABEL
THAT
BEST
MATCHES
THE
GROUND
TRUTH
LABEL
FOR
THE
IMAGE
SEE
SECT
CONSTRUCTING
IMAGENET
WAS
AN
EFFORT
TO
SCALE
UP
AN
IMAGE
CLASSIFICATION
DATASET
TO
COVER
MOST
NOUNS
IN
ENGLISH
USING
TENS
OF
MILLIONS
OF
MANUALLY
VERIFIED
PHOTOGRAPHS
DENG
ET
AL
THE
IMAGE
CLASSIFICATION
TASK
OF
ILSVRC
CAME
AS
A
DIRECT
EXTENSION
OF
THIS
EFFORT
A
SUBSET
OF
CATEGORIES
AND
IMAGESWAS
CHOSEN
AND
FIXED
TO
PROVIDE
A
STANDARDIZED
BENCHMARK
WHILE
THE
REST
OF
IMAGENET
CONTINUED
TO
GROW
SINGLE
OBJECT
LOCALIZATION
TASK
THE
SINGLE
OBJECT
LOCALIZATION
TASK
INTRODUCED
IN
BUILT
OFF
OF
THE
IMAGE
CLASSIFICATION
TASK
TO
EVALUATE
THE
ABILITY
OF
ALGORITHMS
TO
LEARN
THE
APPEARANCE
OF
THE
TARGET
OBJECT
ITSELF
RATHER
THAN
ITS
IMAGE
CONTEXT
DATA
FOR
THE
SINGLE
OBJECT
LOCALIZATION
TASK
CONSISTS
OF
THE
SAME
PHOTOGRAPHS
COLLECTED
FOR
THE
IMAGE
CLASSIFICATION
TASK
HAND
LABELED
WITH
THE
PRESENCE
OF
ONE
OF
OBJECT
CATEGORIES
EACH
IMAGE
CONTAINS
ONE
GROUND
TRUTH
LABEL
ADDITIONALLY
EVERY
INSTANCE
OF
THIS
CATEGORY
IS
ANNOTATED
WITH
AN
AXIS
ALIGNED
BOUNDING
BOX
FOR
EACH
IMAGE
ALGORITHMS
PRODUCE
A
LIST
OF
OBJECT
CATEGORIES
PRESENT
IN
THE
IMAGE
ALONG
WITH
A
BOUNDING
BOX
INDICATING
THE
POSITION
AND
SCALE
OF
ONE
INSTANCE
OF
EACH
OBJECT
CATEGORY
THE
QUALITY
OF
A
LABELING
IS
EVALUATED
BASED
ON
THE
OBJECT
CATEGORY
LABEL
THAT
BEST
MATCHES
THE
GROUND
TRUTH
LABEL
WITH
THE
ADDITIONAL
REQUIREMENT
THAT
THE
LOCATION
OF
THE
PREDICTED
INSTANCE
IS
ALSO
ACCURATE
SEE
SECT
WWW
FLICKR
COM
OBJECT
DETECTION
TASK
THE
OBJECT
DETECTION
TASK
WENT
A
STEP
BEYOND
SINGLE
OBJECT
LOCALIZATION
AND
TACKLED
THE
PROBLEM
OF
LOCALIZING
MULTIPLE
OBJECT
CATEGORIES
IN
THE
IMAGE
THIS
TASK
HAS
BEEN
A
PART
OF
THE
PASCAL
VOC
FOR
MANY
YEARS
ON
THE
SCALE
OF
OBJECT
CATEGORIES
AND
TENS
OF
THOUSANDS
OF
IMAGES
BUT
SCALING
IT
UP
BY
AN
ORDER
OF
MAGNITUDE
IN
OBJECT
CATEGORIES
AND
IN
IMAGES
PROVED
TO
BE
VERY
CHALLENGING
FROM
A
DATASET
COLLECTION
AND
ANNOTATION
POINT
OF
VIEW
SEE
SECT
DATA
FOR
THE
DETECTION
TASKS
CONSISTS
OF
NEW
PHOTOGRAPHS
COLLECTED
FROM
FLICKR
USING
SCENE
LEVEL
QUERIES
THE
IMAGES
ARE
ANNOTATED
WITH
AXIS
ALIGNED
BOUNDING
BOXES
INDICATING
THE
POSITION
AND
SCALE
OF
EVERY
INSTANCE
OF
EACH
TARGET
OBJECT
CATEGORY
THE
TRAINING
SET
IS
ADDITIONALLY
SUPPLEMENTED
WITH
A
DATA
FROM
THE
SINGLE
OBJECT
LOCALIZATION
TASK
WHICH
CONTAINS
ANNOTATIONS
FOR
ALL
INSTANCES
OF
JUST
ONE
OBJECT
CATEGORY
AND
B
NEGATIVE
IMAGES
KNOWN
NOT
TO
CONTAIN
ANY
INSTANCE
OF
SOME
OBJECT
CATEGORIES
FOR
EACH
IMAGE
ALGORITHMS
PRODUCE
BOUNDING
BOXES
INDICATING
THE
POSITION
AND
SCALE
OF
ALL
INSTANCES
OF
ALL
TARGET
OBJECT
CATEGORIES
THE
QUALITY
OF
LABELING
IS
EVALUATED
BY
RECALL
OR
NUMBER
OF
TARGET
OBJECT
INSTANCES
DETECTED
AND
PRECISION
OR
THE
NUMBER
OF
SPURIOUS
DETECTIONS
PRODUCED
BY
THE
ALGORITHM
SEE
SECT
DATASET
CONSTRUCTION
AT
LARGE
SCALE
OUR
PROCESS
OF
CONSTRUCTING
LARGE
SCALE
OBJECT
RECOGNITION
IMAGE
DATASETS
CONSISTS
OF
THREE
KEY
STEPS
THE
FIRST
STEP
IS
DEFINING
THE
SET
OF
TARGET
OBJECT
CATEGORIES
TO
DO
THIS
WE
SELECT
FROM
AMONG
THE
EXISTING
IMAGENET
DENG
ET
AL
CATEGORIES
BY
USING
WORDNET
AS
A
BACKBONE
MILLER
IMAGENET
ALREADY
TAKES
CARE
OF
DISAMBIGUATING
WORD
MEANINGS
AND
OF
COMBINING
TOGETHER
SYNONYMS
INTO
THE
SAME
OBJECT
CATEGORY
SINCE
THE
SELECTION
OF
OBJECT
CATEGORIES
NEEDS
TO
BE
DONE
ONLY
ONCE
PER
CHALLENGE
TASK
WE
USE
A
COMBINATION
OF
AUTOMATIC
HEURISTICS
AND
MANUAL
POST
PROCESSING
TO
CREATE
THE
LIST
OF
TARGET
CATEGORIES
APPROPRIATE
FOR
EACH
TASK
FOR
EXAMPLE
FOR
IMAGE
CLASSIFICA
INT
J
COMPUT
VIS
TION
WE
MAY
INCLUDE
BROADER
SCENE
CATEGORIES
SUCH
AS
A
TYPE
OF
BEACH
BUT
FOR
SINGLE
OBJECT
LOCALIZATION
AND
OBJECT
DETECTION
WE
WANT
TO
FOCUS
ONLY
ON
OBJECT
CATEGORIES
WHICH
CAN
BE
UNAMBIGUOUSLY
LOCALIZED
IN
IMAGES
SECTS
THE
SECOND
STEP
IS
COLLECTING
A
DIVERSE
SET
OF
CANDIDATE
IMAGES
TO
REPRESENT
THE
SELECTED
CATEGORIES
WE
USE
BOTH
AUTOMATIC
AND
MANUAL
STRATEGIES
ON
MULTIPLE
SEARCH
ENGINES
TO
DO
THE
IMAGE
COLLECTION
THE
PROCESS
IS
MODIFIED
FOR
THE
DIFFERENT
ILSVRC
TASKS
FOR
EXAMPLE
FOR
OBJECT
DETECTION
WE
FOCUS
OUR
EFFORTS
ON
COLLECTING
SCENE
LIKE
IMAGES
USING
GENERIC
QUERIES
SUCH
AS
AFRICAN
SAFARI
TO
FIND
PICTURES
LIKELY
TO
CONTAIN
MULTIPLE
ANIMALS
IN
ONE
SCENE
SECT
THE
THIRD
AND
MOST
CHALLENGING
STEP
IS
ANNOTATING
THE
MILLIONS
OF
COLLECTED
IMAGES
TO
OBTAIN
A
CLEAN
DATASET
WE
CAREFULLY
DESIGN
CROWDSOURCING
STRATEGIES
TARGETED
TO
EACH
INDIVIDUAL
ILSVRC
TASK
FOR
EXAMPLE
THE
BOUNDING
BOX
ANNOTATION
SYSTEM
USED
FOR
LOCALIZATION
AND
DETECTION
TASKS
CONSISTS
OF
THREE
DISTINCT
PARTS
IN
ORDER
TO
INCLUDE
AUTOMATIC
CROWDSOURCED
QUALITY
CONTROL
SECT
ANNOTATING
IMAGES
FULLY
WITH
ALL
TARGET
OBJECT
CATEGORIES
ON
A
REASONABLE
BUDGET
FOR
OBJECT
DETECTION
REQUIRES
AN
ADDITIONAL
HIERARCHICAL
IMAGE
LABELING
SYSTEM
SECT
WE
DESCRIBE
THE
DATA
COLLECTION
AND
ANNOTATION
PROCEDURE
FOR
EACH
OF
THE
ILSVRC
TASKS
IN
ORDER
IMAGE
CLASSIFICATION
SECT
SINGLE
OBJECT
LOCALIZATION
SECT
AND
OBJECT
DETECTION
SECT
FOCUSING
ON
THE
THREE
KEY
STEPS
FOR
EACH
DATASET
IMAGE
CLASSIFICATION
DATASET
CONSTRUCTION
THE
IMAGE
CLASSIFICATION
TASK
TESTS
THE
ABILITY
OF
AN
ALGORITHM
TO
NAME
THE
OBJECTS
PRESENT
IN
THE
IMAGE
WITHOUT
NECESSARILY
LOCALIZING
THEM
WE
DESCRIBE
THE
CHOICES
WE
MADE
IN
CONSTRUCTING
THE
ILSVRC
IMAGE
CLASSIFICATION
DATASET
SELECTING
THE
TARGET
OBJECT
CATEGORIES
FROM
IMAGENET
SECT
COLLECTING
A
DIVERSE
SET
OF
CANDIDATE
IMAGES
BY
USING
MULTIPLE
SEARCH
ENGINES
AND
AN
EXPANDED
SET
OF
QUERIES
INMULTIPLE
LANGUAGES
SECT
AND
FINALLY
FILTERING
THE
MILLIONS
OF
COLLECTED
IMAGES
USING
THE
CAREFULLY
DESIGNED
CROWDSOURCING
STRATEGY
OF
IMAGENET
DENG
ET
AL
SECT
DEFINING
OBJECT
CATEGORIES
FOR
THE
IMAGE
CLASSIFICATION
DATASET
THE
CATEGORIES
USED
FOR
THE
IMAGE
CLASSIFICATION
TASK
WERE
SELECTED
FROM
THE
IMAGENET
DENG
ET
AL
CATEGORIES
THE
SYNSETS
ARE
SELECTED
SUCH
THAT
THERE
IS
NO
OVERLAP
BETWEEN
SYNSETS
FOR
ANY
SYNSETS
I
AND
J
I
IS
NOT
AN
ANCESTOR
OF
J
IN
THE
IMAGENET
HIERARCHY
THESE
SYNSETS
ARE
PART
OF
THE
LARGER
HIERARCHY
AND
MAY
HAVE
CHILDREN
IN
IMAGENET
HOWEVER
FOR
ILSVRC
WE
DO
NOT
CONSIDER
THEIR
CHILD
SUBCATEGORIES
THE
SYNSET
HIERARCHY
OF
ILSVRC
CAN
BE
THOUGHT
OF
AS
A
TRIMMED
VERSION
OF
THE
COMPLETE
IMAGENET
HIERARCHY
FIGURE
VISUALIZES
THE
DIVERSITY
OF
THE
OBJECT
CATEGORIES
THE
EXACT
SYNSETS
USED
FOR
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
HAVE
CHANGED
OVER
THE
YEARS
THERE
ARE
SYNSETS
WHICH
HAVE
BEEN
USED
IN
ALL
FIVE
ILSVRC
CHALLENGES
SO
FAR
IN
THE
FIRST
YEAR
OF
THE
CHALLENGE
SYNSETS
WERE
SELECTED
RANDOMLY
FROM
THE
AVAILABLE
IMAGENET
SYNSETS
AT
THE
TIME
FOLLOWED
BY
MANUAL
FILTERING
TO
MAKE
SURE
THE
OBJECT
CATEGORIES
WERE
NOT
TOO
OBSCURE
WITH
THE
INTRODUCTION
OF
THE
OBJECT
LOCALIZATION
CHALLENGE
IN
THERE
WERE
SYNSETS
THAT
CHANGED
CATEGORIES
SUCH
AS
NEW
ZEALAND
BEACH
WHICH
WERE
INHERENTLY
DIFFICULT
TO
LOCALIZE
WERE
REMOVED
AND
SOME
NEW
CATEGORIES
FROM
IMAGENET
CONTAINING
OBJECT
LOCALIZATION
ANNOTATIONS
WERE
ADDED
IN
SYNSETS
WERE
REPLACED
WITH
CATEGORIES
CORRESPONDING
TO
DOG
BREEDS
TO
ALLOW
FOR
EVALUATION
OF
MORE
FINE
GRAINED
OBJECT
CLASSIFICATION
AS
SHOWN
IN
FIG
THE
SYNSETS
HAVE
REMAINED
CONSISTENT
SINCE
YEAR
APPENDIX
PROVIDES
THE
COMPLETE
LIST
OF
OBJECT
CATEGORIES
USED
IN
COLLECTING
CANDIDATE
IMAGES
FOR
THE
IMAGE
CLASSIFICATION
DATASET
IMAGE
COLLECTION
FOR
ILSVRC
CLASSIFICATION
TASK
IS
THE
SAME
AS
THE
STRATEGY
EMPLOYED
FOR
CONSTRUCTING
IMAGENET
DENG
ET
AL
TRAINING
IMAGES
ARE
TAKEN
DIRECTLY
FROM
IMAGENET
ADDITIONAL
IMAGES
ARE
COLLECTED
FOR
THE
ILSVRC
USING
THIS
STRATEGY
AND
RANDOMLY
PARTITIONED
INTO
THE
VALIDATION
AND
TEST
SETS
WE
BRIEFLY
SUMMARIZE
THE
PROCESS
DENG
ET
AL
CONTAINS
FURTHER
DETAILS
CANDIDATE
IMAGES
ARE
COLLECTED
FROM
THE
INTERNET
BY
QUERYING
SEVERAL
IMAGE
SEARCH
ENGINES
FOR
EACH
SYNSET
THE
QUERIES
ARE
THE
SET
OFWORDNET
SYNONYMS
SEARCH
ENGINES
TYPICALLY
LIMIT
THE
NUMBER
OF
RETRIEVABLE
IMAGES
ON
THE
ORDER
OF
A
FEW
HUNDRED
TO
A
THOUSAND
TO
OBTAIN
AS
MANY
IMAGES
AS
POSSIBLE
WE
EXPAND
THE
QUERY
SET
BY
APPENDING
THE
QUERIES
WITH
THE
WORD
FROM
PARENT
SYNSETS
IF
THE
SAME
WORD
APPEARS
IN
THE
GLOSSARY
OF
THE
TARGET
SYNSET
FOR
EXAMPLE
WHEN
QUERYING
WHIPPET
ACCORDING
TOWORDNET
GLOSSARY
A
SMALL
SLENDER
DOG
OF
GREYHOUND
TYPE
DEVELOPED
IN
ENGLAND
WE
ALSO
USE
WHIPPET
DOG
AND
WHIPPET
GREYHOUND
TO
FURTHER
ENLARGE
AND
DIVERSIFY
THE
CANDIDATE
POOL
WE
TRANSLATE
THE
QUERIES
INTO
OTHER
LANGUAGES
INCLUDING
CHINESE
SPANISH
DUTCH
AND
ITALIAN
WE
OBTAIN
ACCURATE
TRANSLATIONS
USING
WORDNETS
IN
THOSE
LANGUAGES
IMAGE
CLASSIFICATION
DATASET
ANNOTATION
ANNOTATING
IMAGES
WITH
CORRESPONDING
OBJECT
CLASSES
FOLLOWS
THE
STRATEGY
EMPLOYED
BY
IMAGENET
DENG
ET
AL
WE
SUMMARIZE
IT
BRIEFLY
HERE
INT
J
COMPUT
VIS
FIG
THE
DIVERSITY
OF
DATA
IN
THE
ILSVRC
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
FOR
EACH
OF
THE
EIGHT
DIMENSIONS
WE
SHOW
EXAMPLE
OBJECT
CATEGORIES
ALONG
THE
RANGE
OF
THAT
PROPERTY
OBJECT
SCALE
NUMBER
OF
INSTANCES
AND
IMAGE
CLUTTER
FOR
EACH
OBJECT
CATEGORY
ARE
COMPUTED
USING
THE
METRICS
DEFINED
IN
SECT
AND
IN
APPENDIX
THE
OTHER
PROPERTIES
WERE
COMPUTED
BY
ASKING
HUMAN
SUBJECTS
TO
ANNOTATE
EACH
OF
THE
OBJECT
CATEGORIES
RUSSAKOVSKY
ET
AL
TO
COLLECT
A
HIGHLY
ACCURATE
DATASET
WE
RELY
ON
HUMANS
TO
VERIFY
EACH
CANDIDATE
IMAGE
COLLECTED
IN
THE
PREVIOUS
STEP
FOR
A
GIVEN
SYNSET
THIS
IS
ACHIEVED
BY
USING
AMAZON
MECHANICAL
TURK
AMT
AN
ONLINE
PLATFORM
ON
WHICH
ONE
CAN
PUT
UP
TASKS
FOR
USERS
FOR
A
MONETARY
REWARD
WITH
A
GLOBAL
USER
BASE
AMT
IS
PARTICULARLY
SUITABLE
FOR
LARGE
SCALE
LABELING
IN
EACH
OF
OUR
LABELING
TASKS
WE
PRESENT
THE
USERS
WITH
A
SET
OF
CANDIDATE
IMAGES
AND
THE
DEFINITION
OF
THE
TARGET
SYNSET
INCLUDING
A
LINK
TO
WIKIPEDIA
WE
THEN
ASK
THE
USERS
TO
VERIFY
WHETHER
EACH
IMAGE
CONTAINS
OBJECTS
OF
THE
SYNSET
WE
ENCOURAGE
USERS
TO
SELECT
IMAGES
REGARDLESS
OF
OCCLUSIONS
NUMBER
OF
OBJECTS
AND
CLUTTER
IN
THE
SCENE
TO
ENSURE
DIVERSITY
WHILE
USERS
ARE
INSTRUCTED
TO
MAKE
ACCURATE
JUDGMENT
WE
NEED
TO
SET
UP
A
QUALITY
CONTROL
SYSTEM
TO
ENSURE
THIS
ACCURACY
THERE
ARE
TWO
ISSUES
TO
CONSIDER
FIRST
HUMAN
USERS
MAKE
MISTAKES
AND
NOT
ALL
USERS
FOLLOW
THE
INSTRUCTIONS
SECOND
USERS
DO
NOT
ALWAYS
AGREE
WITH
EACH
OTHER
ESPECIALLY
FOR
MORE
SUBTLE
OR
CONFUSING
SYNSETS
TYPICALLY
AT
THE
DEEPER
LEVELS
OF
THE
TREE
THE
SOLUTION
TO
THESE
ISSUES
IS
TO
HAVE
MULTIPLE
USERS
INDEPENDENTLY
LABEL
THE
SAME
IMAGE
AN
IMAGE
IS
CONSIDERED
POSITIVE
ONLY
IF
IT
GETS
A
CONVINCING
MAJORITY
OF
THE
VOTES
WE
OBSERVE
HOWEVER
THAT
DIFFERENT
CATEGORIES
REQUIRE
DIFFERENT
LEVELS
OF
CONSENSUS
AMONG
USERS
FOR
EXAMPLE
WHILE
FIVE
USERS
MIGHT
BE
NECESSARY
FOR
OBTAINING
A
GOOD
CONSENSUS
ON
BURMESE
CAT
IMAGES
A
MUCH
SMALLER
NUMBER
INT
J
COMPUT
VIS
FIG
THE
ILSVRC
DATASET
CONTAINS
MANY
MORE
FINE
GRAINED
CLASSES
COMPARED
TO
THE
STANDARD
PASCAL
VOC
BENCHMARK
FOR
EXAMPLE
INSTEAD
OF
THE
PASCAL
DOG
CATEGORY
THERE
ARE
DIFFERENT
BREEDS
OF
DOGS
IN
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
IS
NEEDED
FOR
CAT
IMAGES
WE
DEVELOP
A
SIMPLE
ALGORITHM
TO
DYNAMICALLY
DETERMINE
THE
NUMBER
OF
AGREEMENTS
NEEDED
FOR
DIFFERENT
CATEGORIES
OF
IMAGES
FOR
EACH
SYNSET
WE
FIRST
RANDOMLY
SAMPLE
AN
INITIAL
SUBSET
OF
IMAGES
AT
LEAST
USERS
ARE
ASKED
TO
VOTE
ON
EACH
OF
THESE
IMAGES
WE
THEN
OBTAIN
A
CONFIDENCE
SCORE
TABLE
INDICATING
THE
PROBABILITY
OF
AN
IMAGE
BEING
A
GOOD
IMAGE
GIVEN
THE
CONSENSUS
AMONG
USER
VOTES
FOR
EACH
OF
THE
REMAINING
CANDIDATE
IMAGES
IN
THIS
SYNSET
WE
PROCEED
WITH
THE
AMT
USER
LABELING
UNTIL
A
PRE
DETERMINED
CONFIDENCE
SCORE
THRESHOLD
IS
REACHED
EMPIRICAL
EVALUATION
EVALUATION
OF
THE
ACCURACY
OF
THE
LARGE
SCALE
CROWDSOURCED
IMAGE
ANNOTATION
SYSTEMWAS
DONE
ON
THE
ENTIRE
IMAGENET
DENG
ET
AL
A
TOTAL
OF
SYNSETS
WERE
RANDOMLY
SAMPLED
AT
EVERY
TREE
DEPTH
OF
THE
MAMMAL
AND
VEHICLE
SUBTREES
AN
INDEPENDENT
GROUP
OF
SUBJECTS
VERIFIED
THE
CORRECTNESS
OF
EACH
OF
THE
IMAGES
AN
AVERAGE
OF
PRECISION
IS
ACHIEVED
ACROSS
THE
SYNSETS
WE
EXPECT
SIMILAR
ACCURACY
ON
ILSVRC
IMAGE
CLASSIFICATION
DATASET
SINCE
THE
IMAGE
ANNOTATION
PIPELINE
HAS
REMAINED
THE
SAME
TO
VERIFY
WE
MANUALLY
CHECKED
IMAGE
CLASSIFICATION
TEST
SET
IMAGES
THE
TEST
SET
HAS
REMAINED
UNCHANGED
IN
THESE
YEARS
WE
FOUND
ANNOTATION
ERRORS
CORRESPONDING
AS
EXPECTED
TO
PRECISION
IMAGE
CLASSIFICATION
DATASET
STATISTICS
USING
THE
IMAGE
COLLECTION
AND
ANNOTATION
PROCEDURE
DESCRIBED
IN
PREVIOUS
SECTIONS
WE
COLLECTED
A
LARGE
SCALE
DATASET
USED
FOR
ILSVRC
CLASSIFICATION
TASK
THERE
ARE
OBJECT
CLASSES
AND
APPROXIMATELY
TRAINING
IMAGES
THOUSAND
VALIDATION
IMAGES
AND
THOUSAND
TEST
IMAGES
TABLE
DOCUMENTS
THE
SIZE
OF
THE
DATASET
OVER
THE
YEARS
OF
THE
CHALLENGE
SINGLE
OBJECT
LOCALIZATION
DATASET
CONSTRUCTION
THE
SINGLE
OBJECT
LOCALIZATION
TASK
EVALUATES
THE
ABILITY
OF
AN
ALGORITHM
TO
LOCALIZE
ONE
INSTANCE
OF
AN
OBJECT
CATEGORY
IT
WAS
INTRODUCED
AS
A
TASTER
TASK
IN
ILSVRC
AND
BECAME
AN
OFFICIAL
PART
OF
ILSVRC
IN
THE
KEY
CHALLENGE
WAS
DEVELOPING
A
SCALABLE
CROWDSOURCING
METHOD
FOR
OBJECT
BOUNDING
BOX
ANNOTATION
OUR
THREE
STEP
SELF
VERIFYING
PIPELINE
IS
DESCRIBED
IN
SECT
HAVING
THE
DATASET
COLLECTED
WE
PERFORM
DETAILED
ANALYSIS
IN
SECT
TO
ENSURE
THAT
THE
DATASET
IS
SUFFICIENTLY
VARIED
TO
BE
SUITABLE
FOR
EVALUATION
OF
OBJECT
LOCALIZATION
ALGORITHMS
OBJECT
CLASSES
AND
CANDIDATE
IMAGES
THE
OBJECT
CLASSES
FOR
SINGLE
OBJECT
LOCALIZATION
TASK
ARE
THE
SAME
AS
THE
OBJECT
CLASSES
FOR
IMAGE
CLASSIFICATION
TASK
DESCRIBED
ABOVE
IN
SECT
THE
TRAINING
IMAGES
FOR
LOCALIZATION
TASK
ARE
A
SUBSET
OF
THE
TRAINING
IMAGES
USED
FOR
IMAGE
CLASSIFICATION
TASK
AND
THE
VALIDATION
AND
TEST
IMAGES
ARE
THE
SAME
BETWEEN
BOTH
TASKS
BOUNDING
BOX
ANNOTATION
RECALL
THAT
FOR
THE
IMAGE
CLASSIFICATION
TASK
EVERY
IMAGE
WAS
ANNOTATED
WITH
ONE
OBJECT
CLASS
LABEL
CORRESPONDING
TO
ONE
OBJECT
THAT
IS
PRESENT
IN
AN
IMAGE
FOR
THE
SINGLE
OBJECT
LOCALIZATION
TASK
EVERY
VALIDATION
AND
INT
J
COMPUT
VIS
TABLE
SCALE
OF
ILSVRC
IMAGE
CLASSIFICATION
TASK
MINIMUM
PER
CLASS
MAXIMUM
PER
CLASS
YEAR
TRAIN
IMAGES
PER
CLASS
VAL
IMAGES
PER
CLASS
TEST
IMAGES
PER
CLASS
IMAGE
CLASSIFICATION
ANNOTATIONS
OBJECT
CLASSES
THE
NUMBERS
IN
PARENTHESES
CORRESPOND
TO
MINIMUM
PER
CLASS
MAXIMUM
PER
CLASS
THE
CLASSES
CHANGE
FROM
YEAR
TO
YEAR
BUT
ARE
CONSISTENT
BETWEEN
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
IN
THE
SAME
YEAR
ALL
IMAGES
FROM
THE
IMAGE
CLASSIFICATION
TASK
MAY
BE
USED
FOR
SINGLE
OBJECT
LOCALIZATION
TABLE
SCALE
OF
ADDITIONAL
ANNOTATIONS
FOR
THE
ILSVRC
SINGLE
OBJECT
LOCALIZATION
TASK
MINIMUM
PER
CLASS
MAXIMUM
PER
CLASS
YEAR
TRAIN
IMAGES
WITH
BBOX
ANNOTATIONS
PER
CLASS
TRAIN
BBOXES
ANNOTATED
PER
CLASS
VAL
IMAGES
WITH
BBOX
ANNOTATIONS
PER
CLASS
VAL
BBOXES
ANNOTATED
PER
CLASS
TEST
IMAGES
WITH
BBOX
ANNOTATIONS
ADDITIONAL
ANNOTATIONS
FOR
SINGLE
OBJECT
LOCALIZATION
OBJECT
CLASSES
THE
NUMBERS
IN
PARENTHESES
CORRESPOND
TO
MINIMUM
PER
CLASS
MAXIMUM
PER
CLASS
THE
CLASSES
CHANGE
FROM
YEAR
TO
YEAR
BUT
ARE
CONSISTENT
BETWEEN
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
IN
THE
SAME
YEAR
ALL
IMAGES
FROM
THE
IMAGE
CLASSIFICATION
TASK
MAY
BE
USED
FOR
SINGLE
OBJECT
LOCALIZATION
TEST
IMAGE
AND
A
SUBSET
OF
THE
TRAINING
IMAGES
ARE
ANNOTATED
WITH
AXIS
ALIGNED
BOUNDING
BOXES
AROUND
EVERY
INSTANCE
OF
THIS
OBJECT
EVERY
BOUNDING
BOX
IS
REQUIRED
TO
BE
AS
SMALL
AS
POSSIBLE
WHILE
INCLUDING
ALL
VISIBLE
PARTS
OF
THE
OBJECT
INSTANCE
AN
ALTERNATE
ANNOTATION
PROCEDURE
COULD
BE
TO
ANNOTATE
THE
FULL
ESTIMATED
EXTENT
OF
THE
OBJECT
E
G
IF
A
PERSON
LEGS
ARE
OCCLUDED
AND
ONLY
THE
TORSO
IS
VISIBLE
THE
BOUNDING
BOX
COULD
BE
DRAWNTO
INCLUDE
THE
LIKELY
LOCATION
OF
THE
LEGS
HOWEVER
THIS
ALTERNATIVE
PROCEDURE
IS
INHERENTLY
AMBIGUOUS
AND
ILL
DEFINED
LEADING
TO
DISAGREEMENT
AMONG
ANNOTATORS
AND
AMONG
RESEARCHERS
WHAT
IS
THE
TRUE
MOST
LIKELY
EXTENT
OF
THIS
OBJECT
WE
FOLLOW
THE
STANDARD
PROTOCOL
OF
ONLY
ANNOTATING
VISIBLE
OBJECT
PARTS
RUSSELL
ET
AL
EVERINGHAM
ET
AL
BOUNDING
BOX
OBJECT
ANNOTATION
SYSTEM
WE
SUMMARIZE
THE
CROWDSOURCED
BOUNDING
BOX
ANNOTATION
SYSTEM
DESCRIBED
IN
DETAIL
IN
SU
ET
AL
THE
GOAL
IS
TO
BUILD
A
SYSTEM
THAT
IS
FULLY
AUTOMATED
HIGHLY
ACCURATE
AND
COST
EFFECTIVE
GIVEN
A
COLLECTION
OF
IMAGES
WHERE
THE
SOME
DATASETS
SUCH
AS
PASCAL
VOC
EVERINGHAM
ET
AL
AND
LABELME
RUSSELL
ET
AL
ARE
ABLE
TO
PROVIDE
MORE
DETAILED
ANNOTATIONS
FOR
EXAMPLE
MARKING
INDIVIDUAL
OBJECT
INSTANCES
AS
BEING
TRUNCATED
WE
CHOSE
NOT
TO
PROVIDE
THIS
LEVEL
OF
DETAIL
IN
FAVOR
OF
ANNOTATING
MORE
IMAGES
AND
MORE
OBJECT
INSTANCES
OBJECT
OF
INTEREST
HAS
BEEN
VERIFIED
TO
EXIST
FOR
EACH
IMAGE
THE
SYSTEM
COLLECTS
A
TIGHT
BOUNDING
BOX
FOR
EVERY
INSTANCE
OF
THE
OBJECT
THERE
ARE
TWO
REQUIREMENTS
QUALITY
EACH
BOUNDING
BOX
NEEDS
TO
BE
TIGHT
I
E
THE
SMALLEST
AMONG
ALL
BOUNDING
BOXES
THAT
CONTAINS
ALL
VISIBLE
PARTS
OF
THE
OBJECT
THIS
FACILITATES
THE
OBJECT
DETECTION
LEARNING
ALGORITHMS
BY
PROVIDING
THE
PRECISE
LOCATION
OF
EACH
OBJECT
INSTANCE
COVERAGE
EVERY
OBJECT
INSTANCE
NEEDS
TO
HAVE
A
BOUNDING
BOX
THIS
IS
IMPORTANT
FOR
TRAINING
LOCALIZATION
ALGORITHMS
BECAUSE
IT
TELLS
THE
LEARNING
ALGORITHMS
WITH
CERTAINTY
WHAT
IS
NOT
THE
OBJECT
THE
CORE
CHALLENGE
OF
BUILDING
SUCH
A
SYSTEM
IS
EFFECTIVELY
CONTROLLING
THE
DATA
QUALITY
WITH
MINIMAL
COST
OUR
KEY
OBSERVATION
IS
THAT
DRAWING
A
BOUNDING
BOX
IS
SIGNIFICANTLY
MORE
DIFFICULT
AND
TIME
CONSUMING
THAN
GIVING
ANSWERS
TO
MULTIPLE
CHOICE
QUESTIONS
THUS
QUALITY
CONTROL
THROUGH
ADDITIONAL
VERIFICATION
TASKS
IS
MORE
COST
EFFECTIVE
THAN
CONSENSUS
BASED
ALGORITHMS
THIS
LEADS
TO
THE
FOLLOWINGWORKFLOW
WITH
SIMPLE
BASIC
SUBTASKS
DRAWING
A
WORKER
DRAWS
ONE
BOUNDING
BOX
AROUND
ONE
INSTANCE
OF
AN
OBJECT
ON
THE
GIVEN
IMAGE
INT
J
COMPUT
VIS
QUALITY
VERIFICATIONASECONDWORKER
CHECKS
IF
THE
BOUNDING
BOX
IS
CORRECTLY
DRAWN
COVERAGE
VERIFICATION
A
THIRD
WORKER
CHECKS
IF
ALL
OBJECT
INSTANCES
HAVE
BOUNDING
BOXES
THE
SUB
TASKS
ARE
DESIGNED
FOLLOWING
TWO
PRINCIPLES
FIRST
THE
TASKS
AREMADE
AS
SIMPLE
AS
POSSIBLE
FOR
EXAMPLE
INSTEAD
OF
ASKING
THE
WORKER
TO
DRAW
ALL
BOUNDING
BOXES
ON
THE
SAME
IMAGE
WE
ASK
THE
WORKER
TO
DRAW
ONLY
ONE
THIS
REDUCES
THE
COMPLEXITY
OF
THE
TASK
SECOND
EACH
TASK
HAS
A
FIXED
AND
PREDICTABLE
AMOUNT
OF
WORK
FOR
EXAMPLE
ASSUMING
THAT
THE
INPUT
IMAGES
ARE
CLEAN
OBJECT
PRESENCE
IS
CORRECTLY
VERIFIED
AND
THE
COVERAGE
VERIFICATION
TASKS
GIVE
CORRECT
RESULTS
THE
AMOUNT
OF
WORK
OF
THE
DRAWING
TASK
IS
ALWAYS
THAT
OF
PROVIDING
EXACTLY
ONE
BOUNDING
BOX
QUALITY
CONTROL
ON
TASKS
AND
IS
IMPLEMENTED
BY
EMBEDDING
GOLD
STANDARD
IMAGES
WHERE
THE
CORRECT
ANSWER
IS
KNOWN
WORKER
TRAINING
FOR
EACH
OF
THESE
SUBTASKS
IS
DESCRIBED
IN
DETAIL
IN
SU
ET
AL
EMPIRICAL
EVALUATION
THE
SYSTEM
IS
EVALUATED
ON
CATEGORIES
WITH
IMAGENET
DENG
ET
AL
BALLOON
BEAR
BED
BENCH
BEACH
BIRD
BOOKSHELF
BASKETBALL
HOOP
BOTTLE
AND
PEOPLE
A
SUBSET
OF
IMAGES
ARE
RANDOMLY
SAMPLED
FROM
EACH
CATEGORY
ON
THE
IMAGE
LEVEL
OUR
EVALUATION
SHOWS
THAT
IMAGES
ARE
COMPLETELY
COVERED
WITH
BOUNDING
BOXES
FOR
THE
REMAINING
SOME
BOUNDING
BOXES
ARE
MISSING
HOWEVER
THESE
ARE
ALL
DIFFICULT
CASES
THE
SIZE
IS
TOO
SMALL
THE
BOUNDARY
IS
BLURRY
OR
THERE
IS
STRONG
SHADOW
ON
THE
BOUNDING
BOX
LEVEL
OF
ALL
BOUNDING
BOXES
ARE
ACCURATE
THE
BOUNDING
BOXES
ARE
VISIBLY
TIGHT
THE
REMAINING
ARE
SOMEWHAT
OFF
NO
BOUNDING
BOXES
ARE
FOUND
TO
HAVE
LESS
THAN
INTERSECTION
OVER
UNION
OVERLAP
WITH
GROUND
TRUTH
ADDITIONAL
EVALUATION
OF
THE
OVERALL
COST
AND
AN
ANALYSIS
OF
QUALITY
CONTROL
CAN
BE
FOUND
IN
SU
ET
AL
SINGLE
OBJECT
LOCALIZATION
DATASET
STATISTICS
USING
THE
ANNOTATION
PROCEDURE
DESCRIBED
ABOVE
WE
COLLECT
A
LARGE
SET
OF
BOUNDING
BOX
ANNOTATIONS
FOR
THE
ILSVRC
SINGLE
OBJECT
CLASSIFICATION
TASK
ALL
THOUSAND
IMAGES
IN
THE
VALIDATION
SET
AND
THOUSAND
IMAGES
IN
THE
TEST
SET
ARE
ANNOTATED
WITH
BOUNDING
BOXES
AROUND
ALL
INSTANCES
OF
THE
GROUND
TRUTH
OBJECT
CLASS
ONE
OBJECT
CLASS
PER
IMAGE
IN
ADDITION
IN
OF
TRAINING
IMAGES
ARE
ANNOTATED
WITH
BOUNDING
BOXES
THE
SAME
WAY
YIELDING
MORE
THAN
THOUSAND
ANNOTATED
IMAGES
WITH
MORE
THAN
THOUSAND
ANNOTATED
OBJECT
INSTANCES
IN
OF
TRAINING
IMAGES
ARE
ANNOTATED
YIELDING
MORE
THAN
THOUSAND
ANNOTATED
IMAGES
WITH
MORE
THAN
THOUSAND
ANNOTATED
OBJECT
INSTANCES
TABLE
DOCUMENTS
THE
SIZE
OF
THIS
DATASET
IN
ADDITION
TO
THE
SIZE
OF
THE
DATASET
WE
ALSO
ANALYZE
THE
LEVEL
OF
DIFFICULTY
OF
OBJECT
LOCALIZATION
IN
THESE
IMAGES
COMPARED
TO
THE
PASCALVOCBENCHMARK
WE
COMPUTE
STATISTICS
ON
THE
SINGLE
OBJECT
LOCALIZATION
VALIDATION
SET
IMAGES
COMPARED
TO
PASCAL
VOC
VALIDATION
IMAGES
REAL
WORLD
SCENES
ARE
LIKELY
TO
CONTAIN
MULTIPLE
INSTANCES
OF
SOME
OBJECTS
AND
NEARBY
OBJECT
INSTANCES
ARE
PARTICULARLY
DIFFICULT
TO
DELINEATE
THE
AVERAGE
OBJECT
CATEGORY
IN
ILSVRC
HAS
TARGET
OBJECT
INSTANCES
ON
AVERAGE
PER
POSITIVE
IMAGE
WITH
EACH
INSTANCE
HAVING
ON
AVERAGE
NEIGHBORS
ADJACENT
INSTANCES
OF
THE
SAME
OBJECT
CATEGORY
THIS
IS
COMPARABLE
TO
INSTANCES
PER
POSITIVE
IMAGE
AND
NEIGHBORS
PER
INSTANCE
FOR
AN
AVERAGE
OBJECT
CLASS
IN
PASCAL
AS
DESCRIBED
IN
HOIEM
ET
AL
SMALLER
OBJECTS
TEND
TO
BE
SIGNIFICANTLY
MORE
DIFFICULT
TO
LOCALIZE
IN
THE
AVERAGE
OBJECT
CATEGORY
IN
PASCAL
THE
OBJECT
OCCUPIES
OF
THE
IMAGE
AREA
AND
IN
ILSVRC
HOWEVER
PASCAL
HAS
ONLY
OBJECT
CATEGORIES
WHILE
ILSVRC
HAS
THE
OBJECT
CATEGORIES
OF
ILSVRC
WITH
THE
SMALLEST
OBJECTS
ON
AVERAGE
OCCUPY
THE
SAME
FRACTION
OF
THE
IMAGE
AS
PASCALOBJECTS
THUS
EVEN
THOUGH
ON
AVERAGE
THE
OBJECT
INSTANCES
TEND
TO
BE
BIGGER
IN
ILSVRC
IMAGES
THERE
ARE
MORE
THAN
TIMES
MORE
OBJECT
CATEGORIES
THAN
IN
PASCAL
VOC
WITH
THE
SAME
AVERAGE
OBJECT
SCALE
APPENDIX
AND
RUSSAKOVSKY
ET
AL
HAVE
ADDITIONAL
COMPARISONS
OBJECT
DETECTION
DATASET
CONSTRUCTION
THE
ILSVRC
TASK
OF
OBJECT
DETECTION
EVALUATES
THE
ABILITY
OF
AN
ALGORITHM
TO
NAME
AND
LOCALIZE
ALL
INSTANCES
OF
ALL
TARGET
OBJECTS
PRESENT
IN
AN
IMAGE
IT
IS
MUCH
MORE
CHALLENGING
THAN
OBJECT
LOCALIZATION
BECAUSE
SOME
OBJECT
INSTANCES
MAY
BE
SMALL
OCCLUDED
DIFFICULT
TO
ACCURATELY
LOCALIZE
AND
THE
ALGORITHM
IS
EXPECTED
TO
LOCATE
THEM
ALL
NOT
JUST
THE
ONE
IT
FINDS
EASIEST
THERE
ARE
THREE
KEY
CHALLENGES
IN
COLLECTING
THE
OBJECT
DETECTION
DATASET
THE
FIRST
CHALLENGE
IS
SELECTING
THE
SET
OF
COMMON
OBJECTS
WHICH
TEND
TO
APPEAR
IN
CLUTTERED
PHOTOGRAPHS
AND
ARE
WELL
SUITED
FOR
BENCHMARKING
OBJECT
DETECTION
PERFORMANCE
OUR
APPROACH
RELIES
ON
STATISTICS
OF
THE
OBJECT
LOCALIZATION
DATASET
AND
THE
TRADITION
OF
THE
PASCAL
VOC
CHALLENGE
SECT
THE
SECOND
CHALLENGE
IS
OBTAINING
A
MUCH
MORE
VARIED
SET
OF
SCENE
IMAGES
THAN
THOSE
USED
FOR
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
DATASETS
SECTION
DESCRIBES
THE
PROCEDURE
FOR
UTILIZING
AS
MUCH
DATA
FROM
THE
SINGLE
OBJECT
LOCALIZATION
DATASET
AS
POSSIBLE
AND
SUPPLEMENTING
IT
WITH
FLICKR
IMAGES
QUERIED
USING
HUNDREDS
OF
MANUALLY
DESIGNED
HIGH
LEVEL
QUERIES
INT
J
COMPUT
VIS
THE
THIRD
AND
BIGGEST
CHALLENGE
IS
COMPLETELY
ANNOTATING
THIS
DATASET
WITH
ALL
THE
OBJECTS
THIS
IS
DONE
IN
TWO
PARTS
SECTION
DESCRIBES
THE
FIRST
PART
OUR
HIERARCHICAL
STRATEGY
FOR
OBTAINING
THE
LIST
OF
ALL
TARGET
OBJECTS
WHICH
OCCUR
WITHIN
EVERY
IMAGE
THIS
IS
NECESSARY
SINCE
ANNOTATING
IN
A
STRAIGHTFORWARDWAY
BY
CREATING
A
TASK
FOR
EVERY
IMAGE
OBJECT
CLASS
PAIR
IS
NO
LONGER
FEASIBLE
AT
THIS
SCALE
APPENDIX
DESCRIBES
THE
SECOND
PART
ANNOTATING
THE
BOUNDING
BOXES
AROUND
THESE
OBJECTS
USING
THE
SINGLE
OBJECT
LOCALIZATION
BOUNDING
BOX
ANNOTATION
PIPELINE
OF
SECT
ALONG
WITH
EXTRA
VERIFICATION
TO
ENSURE
THAT
EVERY
INSTANCE
OF
THE
OBJECT
IS
ANNOTATED
WITH
EXACTLY
ONE
BOUNDING
BOX
DEFINING
OBJECT
CATEGORIES
FOR
THE
OBJECT
DETECTION
DATASET
THERE
ARE
OBJECT
CLASSES
HAND
SELECTED
FOR
THE
DETECTION
TASK
EACG
CORRESPONDING
TO
A
SYNSET
WITHIN
IMAGENET
THESE
WERE
CHOSEN
TO
BE
MOSTLY
BASIC
LEVEL
OBJECT
CATEGORIES
THAT
WOULD
BE
EASY
FOR
PEOPLE
TO
IDENTIFY
AND
LABEL
THE
RATIONALE
IS
THAT
THE
OBJECT
DETECTION
SYSTEM
DEVELOPED
FOR
THIS
TASK
CAN
LATER
BE
COMBINED
WITH
A
FINE
GRAINED
CLASSIFICATION
MODEL
TO
FURTHER
CLASSIFY
THE
OBJECTS
IF
A
FINER
SUBDIVISION
IS
DESIRED
AS
WITH
THE
CLASSIFICATION
CLASSES
THE
SYNSETS
ARE
SELECTED
SUCH
THAT
THERE
IS
NO
OVERLAP
FOR
ANY
SYNSETS
I
AND
J
I
IS
NOT
AN
ANCESTOR
OF
J
IN
THE
IMAGENET
HIERARCHY
THE
SELECTION
OF
THE
OBJECT
DETECTION
CLASSES
IN
WAS
GUIDED
BY
THE
ILSVRC
CLASSIFICATION
AND
LOCALIZATION
DATASET
STARTING
WITH
OBJECT
CLASSES
AND
THEIR
BOUNDING
BOX
ANNOTATIONS
WE
FIRST
ELIMINATED
ALL
OBJECT
CLASSES
WHICH
TENDED
TO
BE
TOO
BIG
IN
THE
IMAGE
ON
AVERAGE
THE
OBJECT
AREA
WAS
GREATER
THAN
OF
THE
IMAGE
AREA
THESE
WERE
CLASSES
SUCH
AS
T
SHIRT
SPIDERWEB
OR
MANHOLE
COVER
WE
THEN
MANUALLY
ELIMINATED
ALL
CLASSES
WHICH
WE
DID
NOT
FEEL
WERE
WELL
SUITED
FOR
DETECTION
SUCH
AS
HAY
BARBERSHOP
OR
PONCHO
THIS
LEFT
OBJECT
CLASSES
WHICH
WERE
MERGED
INTO
BASIC
LEVEL
CATEGORIES
FOR
EXAMPLE
DIFFERENT
SPECIES
OF
BIRDS
WERE
MERGED
INTO
JUST
THE
BIRD
CLASS
THE
CLASSES
REMAINED
THE
SAME
IN
APPENDIX
CONTAINS
THE
COMPLETE
LIST
OF
OBJECT
CATEGORIES
USED
IN
IN
THE
CONTEXT
OF
THE
HIERARCHY
DESCRIBED
IN
SECT
STAYING
MINDFUL
OF
THE
TRADITION
OF
THE
PASCAL
VOC
DATASET
WE
ALSO
TRIED
TO
ENSURE
THAT
THE
SET
OF
CLASSES
CONTAINS
AS
MANY
OF
THE
PASCAL
VOC
CLASSES
AS
POSSIBLE
TABLE
SHOWS
THE
CORRESPONDENCES
THE
CHANGES
THAT
WERE
DONE
WERE
TO
ENSURE
MORE
ACCURATE
AND
CONSISTENT
CROWDSOURCED
ANNOTATIONS
THE
OBJECT
CLASS
WITH
THE
WEAKEST
CORRESPONDENCE
IS
POTTED
PLANT
IN
PASCAL
VOC
CORRE
SOME
OF
THE
TRAINING
OBJECTS
ARE
ACTUALLY
ANNOTATED
WITH
MORE
DETAILED
CLASSES
FOR
EXAMPLE
ONE
OF
THE
OBJECT
CLASSES
IS
THE
CATEGORY
DOG
AND
SOME
TRAINING
INSTANCES
ARE
ANNOTATED
WITH
THE
SPECIFIC
DOG
BREED
TABLE
CORRESPONDENCES
BETWEEN
THE
OBJECT
CLASSES
IN
THE
PASCAL
VOC
EVERINGHAM
ET
AL
AND
THE
ILSVRC
DETECTION
TASK
CLASS
NAME
IN
PASCAL
VOC
CLASSES
CLOSEST
CLASS
IN
ILSVRC
DET
CLASSES
AVERAGE
OBJECT
SCALE
PASCAL
VOC
ILSVRC
DET
AEROPLANE
AIRPLANE
BICYCLE
BICYCLE
BIRD
BIRD
BOAT
WATERCRAFT
BOTTLE
WINE
BOTTLE
BUS
BUS
CAR
CAR
CAT
DOMESTIC
CAT
CHAIR
CHAIR
COW
CATTLE
DINING
TABLE
TABLE
DOG
DOG
HORSE
HORSE
MOTORBIKE
MOTORCYLE
PERSON
PERSON
POTTED
PLANT
FLOWER
POT
SHEEP
SHEEP
SOFA
SOFA
TRAIN
TRAIN
TV
MONITOR
TV
OR
MONITOR
OBJECT
SCALE
IS
THE
FRACTION
OF
IMAGE
AREA
REPORTED
IN
PERCENT
OCCUPIED
BY
AN
OBJECT
INSTANCE
IT
IS
COMPUTED
ON
THE
VALIDATION
SETS
OF
PASCAL
VOC
AND
OF
ILSVRC
DET
THE
AVERAGE
OBJECT
SCALE
IS
ACROSS
THE
PASCALVOC
CATEGORIES
AND
ACROSS
THE
CORRESPONDING
ILSVRC
DET
CATEGORIES
SECT
REPORTS
ADDITIONAL
DATASET
STATISTICS
SPONDING
TO
FLOWER
POT
IN
ILSVRC
POTTED
PLANT
WAS
ONE
OF
THE
MOST
CHALLENGING
OBJECT
CLASSES
TO
ANNOTATE
CONSISTENTLY
AMONG
THE
PASCAL
VOC
CLASSES
AND
IN
ORDER
TO
OBTAIN
ACCURATE
ANNOTATIONS
USING
CROWDSOURCING
WE
HAD
TO
RESTRICT
THE
DEFINITION
TO
A
MORE
CONCRETE
OBJECT
COLLECTING
IMAGES
FOR
THE
OBJECT
DETECTION
DATASET
MANY
IMAGES
FOR
THE
DETECTION
TASK
WERE
COLLECTED
DIFFERENTLY
THAN
THE
IMAGES
IN
IMAGENET
AND
THE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
FIGURE
SUMMARIZES
THE
TYPES
OF
IMAGES
THAT
WERE
COLLECTED
IDEALLY
ALL
OF
THESE
IMAGES
WOULD
BE
SCENE
IMAGES
FULLY
ANNOTATED
WITH
ALL
TARGET
CATEGORIES
HOWEVER
GIVEN
BUDGET
CONSTRAINTS
OUR
GOAL
WAS
TO
PROVIDE
AS
MUCH
SUITABLE
DETECTION
DATA
AS
POSSIBLE
EVEN
IF
THE
IMAGES
WERE
DRAWN
FROM
A
FEW
DIFFERENT
SOURCES
AND
DISTRIBUTIONS
THE
VALIDATION
AND
TEST
DETECTION
SET
IMAGES
COME
FROM
TWO
SOURCES
PERCENT
OF
IMAGES
FROM
EACH
SOURCE
IN
PARENTHESES
THE
FIRST
SOURCE
IS
IMAGES
FROM
INT
J
COMPUT
VIS
FIG
SUMMARY
OF
IMAGES
COLLECTED
FOR
THE
DETECTION
TASK
IMAGES
IN
GREEN
BOLD
BOXES
HAVE
ALL
INSTANCES
OF
ALL
DETECTION
OBJECT
CLASSES
FULLY
ANNOTATED
TABLE
LISTS
THE
COMPLETE
STATISTICS
SINGLE
OBJECT
LOCALIZATION
VALIDATION
AND
TEST
SETS
CORRESPONDING
TO
THE
DETECTION
CLASSES
OR
THEIR
CHILDREN
IN
THE
IMAGENET
HIERARCHY
IMAGES
WHERE
THE
TARGET
OBJECT
OCCUPIED
MORE
THAN
OF
THE
IMAGE
AREA
WERE
DISCARDED
SINCE
THEY
WERE
UNLIKELY
TO
CONTAIN
OTHER
OBJECTS
OF
INTEREST
THE
SECOND
SOURCE
IS
IMAGES
FROM
FLICKR
COLLECTED
SPECIFICALLY
FOR
DETECTION
TASK
WE
QUERIED
FLICKR
USING
A
LARGE
SET
OF
MANUALLY
DEFINED
QUERIES
SUCH
AS
KITCHENETTE
OR
AUSTRALIAN
ZOO
TO
RETRIEVE
IMAGES
OF
SCENES
LIKELY
TO
CONTAIN
SEVERAL
OBJECTS
OF
INTEREST
APPENDIX
CONTAINS
THE
FULL
LIST
WE
ALSO
ADDED
PAIRWISE
QUERIES
OR
QUERIES
WITH
TWO
TARGET
OBJECT
NAMES
SUCH
AS
TIGER
LION
WHICH
ALSO
OFTEN
RETURNED
CLUTTERED
SCENES
FIGURE
SHOWS
A
RANDOM
SET
OF
BOTH
TYPES
OF
VALIDATION
IMAGES
IMAGES
WERE
RANDOMLY
SPLIT
WITH
GOING
INTO
THE
VALIDATION
SET
AND
INTO
THE
TEST
SET
THE
TRAINING
SET
FOR
THE
DETECTION
TASK
COMES
FROM
THREE
SOURCES
OF
IMAGES
PERCENT
OF
IMAGES
FROM
EACH
SOURCE
IN
PARENTHESES
THE
FIRST
SOURCE
IS
ALL
TRAINING
IMAGES
FROM
SINGLE
OBJECT
LOCALIZATION
TASK
CORRESPONDING
TO
THE
DETECTION
CLASSES
OR
THEIR
CHILDREN
IN
THE
IMAGENET
HIERARCHY
WE
DID
NOT
FILTER
BY
OBJECT
SIZE
ALLOWING
TEAMS
TO
TAKE
ADVANTAGE
OF
ALL
THE
POSITIVE
EXAMPLES
AVAILABLE
THE
SECOND
SOURCE
IS
NEGATIVE
IMAGES
WHICH
WERE
PART
OF
THE
ORIGINAL
IMAGENET
COLLECTION
PROCESS
BUT
VOTED
AS
NEGATIVE
FOR
EXAMPLE
SOME
OF
THE
IMAGES
WERE
COLLECTED
FROM
FLICKR
AND
SEARCH
ENGINES
FOR
THE
IMAGENET
SYNSET
ANIMALS
BUT
DURING
THE
MANUAL
VERIFICATION
STEP
DID
THE
VALIDATION
TEST
SPLIT
IS
CONSISTENT
WITH
VALIDATION
IMAGES
OF
REMAINED
IN
THE
VALIDATION
SET
OF
AND
TEST
IMAGES
REMAINED
IN
TEST
SET
NOT
COLLECT
ENOUGH
VOTES
TO
BE
CONSIDERED
AS
CONTAINING
AN
ANIMAL
THESE
IMAGES
WERE
MANUALLY
RE
VERIFIED
FOR
THE
DETECTION
TASK
TO
ENSURE
THAT
THEY
DID
NOT
IN
FACT
CONTAIN
THE
TARGET
OBJECTS
THE
THIRD
SOURCE
IS
IMAGES
COLLECTED
FROM
FLICKR
SPECIFICALLY
FOR
THE
DETECTION
TASK
THESE
IMAGES
WERE
ADDED
FOR
FOLLOWING
THE
SAME
PROTOCOL
AS
THE
SECOND
TYPE
OF
IMAGES
IN
THE
VALIDATION
AND
TEST
SET
THIS
WAS
DONE
TO
BRING
THE
TRAINING
AND
TESTING
DISTRIBUTIONS
CLOSER
TOGETHER
COMPLETE
IMAGE
OBJECT
ANNOTATION
FOR
THE
OBJECT
DETECTION
DATASET
THE
KEY
CHALLENGE
IN
ANNOTATING
IMAGES
FOR
THE
OBJECT
DETECTION
TASK
IS
THAT
ALL
OBJECTS
IN
ALL
IMAGES
NEED
TO
BE
LABELED
SUPPOSE
THERE
ARE
N
INPUTS
IMAGES
WHICH
NEED
TO
BE
ANNOTATED
WITH
THE
PRESENCE
OR
ABSENCE
OF
K
LABELS
OBJECTS
A
NAÏVE
APPROACHWOULD
QUERY
HUMANS
FOR
EACH
COMBINATION
OF
INPUT
AND
LABEL
REQUIRING
NK
QUERIES
HOWEVER
NANDKCAN
BE
VERY
LARGE
AND
THE
COST
OF
THIS
EXHAUSTIVE
APPROACH
QUICKLY
BECOMES
PROHIBITIVE
FOR
EXAMPLE
ANNOTATING
VALIDATION
AND
TEST
IMAGES
WITH
THE
PRESENCE
OR
ABSENCE
OF
OBJECT
CLASSES
FOR
THE
DETECTION
TASK
NAÏVELY
WOULD
TAKE
TIMES
MORE
EFFORT
THAN
ANNOTATING
VALIDATION
AND
TEST
IMAGES
WITH
OBJECT
EACH
FOR
THE
CLASSIFICATION
TASK
AND
THIS
IS
NOT
EVEN
COUNTING
THE
ADDITIONAL
COST
OF
COLLECTING
BOUNDING
BOX
ANNOTATIONS
AROUND
EACH
OBJECT
INSTANCE
THIS
QUICKLY
BECOMES
INFEASIBLE
IN
DENG
ET
AL
WE
STUDY
STRATEGIES
FOR
SCALABLE
MULTILABEL
ANNOTATION
OR
FOR
EFFICIENTLY
ACQUIRING
MULTIPLE
LABELS
FROM
HUMANS
FOR
A
COLLECTION
OF
ITEMS
WE
EXPLOIT
THREE
KEY
INT
J
COMPUT
VIS
FIG
RANDOM
SELECTION
OF
IMAGES
IN
ILSVRCDETECTION
VALIDATION
SET
THE
IMAGES
IN
THE
TOP
FOUR
ROWS
WERE
TAKEN
FROM
SINGLE
OBJECT
LOCALIZATION
VALIDATION
SET
AND
THE
IMAGES
IN
THE
BOTTOM
FOUR
ROWS
WERE
COLLECTED
FROM
FLICKR
USING
SCENE
LEVEL
QUERIES
OBSERVATIONS
FOR
LABELS
IN
REAL
WORLD
APPLICATIONS
ILLUSTRATED
IN
FIG
CORRELATION
SUBSETS
OF
LABELS
ARE
OFTEN
HIGHLY
CORRELATED
OBJECTS
SUCH
AS
A
COMPUTER
KEYBOARD
MOUSE
AND
MONITOR
FREQUENTLY
CO
OCCUR
IN
IMAGES
SIMILARLY
SOME
LABELS
TEND
TO
ALL
BE
ABSENT
AT
THE
SAME
TIME
FOR
EXAMPLE
ALL
OBJECTS
THAT
REQUIRE
ELECTRICITY
ARE
USUALLY
ABSENT
IN
PICTURES
TAKEN
OUTDOORS
THIS
SUGGESTS
THAT
WE
COULD
POTENTIALLY
FILL
IN
THE
VALUES
OF
MULTIPLE
LABELS
BY
GROUPING
THEM
INTO
ONLY
ONE
QUERY
FOR
HUMANS
INSTEAD
OF
CHECKING
IF
DOG
CAT
RABBIT
ETC
ARE
PRESENT
IN
THE
PHOTO
WE
JUST
CHECK
ABOUT
THE
ANIMAL
GROUP
IF
THE
ANSWER
IS
NO
THEN
THIS
IMPLIES
A
NO
FOR
ALL
CATEGORIES
IN
THE
GROUP
HIERARCHY
THE
ABOVE
EXAMPLE
OF
GROUPING
DOG
CAT
RABBIT
ETC
INTO
ANIMAL
HAS
IMPLICITLY
ASSUMED
THAT
LABELS
CAN
BE
GROUPED
TOGETHER
AND
HUMANS
CAN
EFFICIENTLY
ANSWER
QUERIES
ABOUT
THE
GROUP
AS
A
WHOLE
THIS
BRINGS
UP
OUR
SECOND
KEY
OBSERVATION
HUMANS
ORGANIZE
SEMANTIC
CONCEPTS
INTO
HIERARCHIES
AND
ARE
ABLE
TO
EFFICIENTLY
INT
J
COMPUT
VIS
FIG
CONSIDER
THE
PROBLEM
OF
BINARY
MULTI
LABEL
ANNOTATION
FOR
EACH
INPUT
E
G
IMAGE
AND
EACH
LABEL
E
G
OBJECT
THE
GOAL
IS
TO
DETERMINE
THE
PRESENCE
OR
ABSENSE
PLUS
OR
MINUS
OF
THE
LABEL
E
G
DECIDE
IF
THE
OBJECT
IS
PRESENT
IN
THE
IMAGE
MULTI
LABEL
ANNOTATION
BECOMES
MUCH
MORE
EFFICIENT
WHEN
CONSIDERING
REAL
WORLD
STRUCTURE
OF
DATA
CORRELATION
BETWEEN
LABELS
HIERARCHICAL
ORGANIZATION
OF
CONCEPTS
AND
SPARSITY
OF
LABELS
FIG
OUR
ALGORITHM
DYNAMICALLY
SELECTS
THE
NEXT
QUERY
TO
EFFICIENTLY
DETERMINE
THE
PRESENCE
OR
ABSENCE
OF
EVERY
OBJECT
IN
EVERY
IMAGE
GREEN
DENOTES
A
POSITIVE
ANNOTATION
AND
RED
DENOTES
A
NEGATIVE
ANNOTATION
THIS
TOY
EXAMPLE
ILLUSTRATES
A
SAMPLE
PROGRESSION
OF
THE
ALGORITHM
FOR
ONE
LABEL
CAT
ON
A
SET
OF
IMAGES
CATEGORIZE
AT
HIGHER
SEMANTIC
LEVELS
THORPE
ET
AL
E
G
HUMANS
CAN
DETERMINE
THE
PRESENCE
OF
AN
ANIMAL
IN
AN
IMAGE
AS
FAST
AS
EVERY
TYPE
OF
ANIMAL
INDIVIDUALLY
THIS
LEADS
TO
SUBSTANTIAL
COST
SAVINGS
SPARSITY
THE
VALUES
OF
LABELS
FOR
EACH
IMAGE
TEND
TO
BE
SPARSE
I
E
AN
IMAGE
IS
UNLIKELY
TO
CONTAIN
MORE
THAN
A
DOZEN
TYPES
OF
OBJECTS
A
SMALL
FRACTION
OF
THE
HUNDREDS
OF
OBJECT
CATEGORIES
THIS
ENABLES
RAPID
ELIMINATION
OF
MANY
OBJECTS
BY
QUICKLY
FILLING
IN
NO
WITH
A
HIGH
DEGREE
OF
SPARSITY
AN
EFFICIENT
ALGORITHM
CAN
HAVE
A
COST
WHICH
GROWS
LOGARITHMICALLY
WITH
THE
NUMBER
OF
OBJECTS
INSTEAD
OF
LINEARLY
WE
PROPOSE
ALGORITHMIC
STRATEGIES
THAT
EXPLOIT
THE
ABOVE
INTUITIONS
THE
KEY
IS
TO
SELECT
A
SEQUENCE
OF
QUERIES
FOR
HUMANS
SUCH
THAT
WE
ACHIEVE
THE
SAME
LABELING
RESULTS
WITH
ONLY
A
FRACTION
OF
THE
COST
OF
THE
NAÏVE
APPROACH
THE
MAIN
CHALLENGES
INCLUDE
HOWTOMEASURE
COST
AND
UTILITY
OF
QUERIES
HOW
TO
CONSTRUCT
GOOD
QUERIES
AND
HOW
TO
DYNAMICALLY
ORDER
THEM
A
DETAILED
DESCRIPTION
OF
THE
GENERIC
ALGORITHM
ALONG
WITH
THEORETICAL
ANALYSIS
AND
EMPIRICAL
EVALUATION
IS
PRESENTED
IN
DENG
ET
AL
APPLICATION
OF
THE
GENERIC
MULTI
CLASS
LABELING
ALGORITHM
TO
OUR
SETTING
THE
GENERIC
ALGORITHM
AUTOMATICALLY
SELECTS
THE
MOST
INFORMATIVE
QUERIES
TO
ASK
BASED
ON
OBJECT
LABEL
STATISTICS
LEARNED
FROM
THE
TRAINING
SET
IN
OUR
CASE
OF
OBJECT
CLASSES
SINCE
OBTAINING
THE
TRAINING
SET
WAS
BY
ITSELF
CHALLENGING
WE
CHOSE
TO
DESIGN
THE
QUERIES
BY
HAND
WE
CREATED
A
HIERARCHY
OF
QUERIES
OF
THE
TYPE
IS
THERE
A
IN
THE
IMAGE
FOR
EXAMPLE
ONE
OF
THE
HIGH
LEVEL
QUESTIONS
WAS
IS
THERE
AN
ANIMAL
IN
THE
IMAGE
WE
ASK
THE
CROWD
WORKERS
THIS
QUESTION
ABOUT
EVERY
IMAGE
WE
WANT
TO
LABEL
THE
CHILDREN
OF
THE
ANIMAL
QUESTION
WOULD
CORRESPOND
TO
SPECIFIC
EXAMPLES
OF
ANIMALS
FOR
EXAMPLE
IS
THERE
A
MAMMAL
IN
THE
IMAGE
OR
IS
THERE
AN
ANIMAL
WITH
NO
LEGS
TO
ANNOTATE
IMAGES
EFFICIENTLY
THESE
QUESTIONS
ARE
ASKED
ONLY
ON
IMAGES
DETERMINED
TO
CONTAIN
AN
ANIMAL
THE
LEAF
NODE
QUESTIONS
CORRESPOND
TO
THE
TARGET
OBJECTS
E
G
IS
THERE
A
CAT
IN
THE
IMAGE
A
FEW
SAMPLE
ITERATIONS
OF
THE
ALGORITHM
ARE
SHOWN
IN
FIG
ALGORITHM
IS
THE
FORMAL
ALGORITHM
FOR
LABELING
AN
IMAGE
WITH
THE
PRESENCE
OR
ABSENCE
OF
EACH
TARGET
OBJECT
CATEGORY
WITH
THIS
ALGORITHM
IN
MIND
THE
HIERARCHY
OF
QUESTIONS
WAS
CONSTRUCTED
FOLLOWING
THE
PRINCIPLE
THAT
FALSE
POSITIVES
ONLY
ADD
EXTRA
COSTWHEREAS
FALSE
NEGATIVES
CAN
SIGNIFICANTLY
AFFECT
THE
QUALITY
OF
THE
LABELING
THUS
IT
IS
ALWAYS
BETTER
TO
STICK
WITH
MORE
GENERAL
BUT
LESS
AMBIGUOUS
QUESTIONS
SUCH
AS
IS
THERE
A
MAMMAL
IN
THE
IMAGE
AS
OPPOSED
TO
ASKING
OVERLY
SPECIFIC
BUT
POTENTIALLY
AMBIGUOUS
QUESTIONS
SUCH
AS
IS
THERE
AN
ANIMAL
THAT
CAN
CLIMB
TREES
CONSTRUCTING
THIS
HIERARCHY
WAS
A
SURPRISINGLY
TIME
CONSUMING
PROCESS
INVOLVING
MULTIPLE
ITERATIONS
TO
ENSURE
HIGH
ACCURACY
OF
LABELING
AND
AVOID
QUESTION
AMBIGUITY
APPENDIX
SHOWS
THE
CONSTRUCTED
HIERARCHY
INT
J
COMPUT
VIS
INPUT
IMAGE
I
QUERIES
Q
DIRECTED
GRAPH
G
OVER
Q
OUTPUT
LABELS
L
Q
YES
NO
INITIALIZE
LABELS
L
Q
Q
Q
INITIALIZE
CANDIDATES
C
Q
Q
ROOT
G
WHILE
C
NOT
EMPTY
DO
OBTAIN
ANSWER
A
TO
QUERY
Q
C
L
Q
A
C
C
Q
IF
A
IS
YES
THEN
CHLDR
Q
CHILDREN
Q
G
L
Q
C
C
CHLDR
ELSE
DES
Q
DESCENDANTS
Q
G
L
Q
L
Q
NO
Q
DES
C
C
DES
END
END
ALGORITHM
THE
ALGORITHM
FOR
COMPLETEMULTI
CLASS
ANNOTATION
THIS
IS
A
SPECIAL
CASE
OF
THE
ALGORITHM
DESCRIBED
IN
DENG
ET
AL
A
HIERARCHY
OF
QUESTIONS
G
IS
MANUALLY
CONSTRUCTED
ALL
ROOT
QUESTIONS
ARE
ASKED
ON
EVERY
IMAGE
IF
THE
ANSWER
TO
QUERY
Q
ON
IMAGE
I
IS
NO
THEN
THE
ANSWER
IS
ASSUMED
TO
BE
NO
FOR
ALL
QUERIES
Q
SUCH
THAT
Q
IS
A
DESCENDANT
OF
Q
IN
THE
HIERARCHY
WE
CONTINUE
ASKING
THE
QUERIES
UNTIL
ALL
QUERIES
ARE
ANSWERED
FOR
IMAGES
TAKEN
FROM
THE
SINGLE
OBJECT
LOCALIZATION
TASK
WE
USED
THE
KNOWN
OBJECT
LABEL
TO
INITIALIZE
L
BOUNDING
BOX
ANNOTATION
ONCE
ALL
IMAGES
ARE
LABELED
WITH
THE
PRESENCE
OR
ABSENCE
OF
ALL
OBJECT
CATEGORIES
WE
USE
THE
BOUNDING
BOX
SYSTEM
DESCRIBED
IN
SECT
ALONG
WITH
SOME
ADDITIONAL
MODIFICATIONS
OF
APPENDIX
TO
ANNOTATE
THE
LOCATION
OF
EVERY
INSTANCE
OF
EVERY
PRESENT
OBJECT
CATEGORY
OBJECT
DETECTION
DATASET
STATISTICS
USING
THE
PROCEDURE
DESCRIBED
ABOVE
WE
COLLECT
A
LARGESCALE
DATASET
FOR
ILSVRCOBJECT
DETECTION
TASK
THERE
ARE
OBJECT
CLASSES
AND
APPROXIMATELY
TRAINING
IMAGES
VALIDATION
IMAGES
AND
TEST
IMAGES
TABLE
DOCUMENTS
THE
SIZE
OF
THE
DATASET
OVER
THE
YEARS
OF
THE
CHALLENGE
THE
MAJOR
CHANGE
BETWEEN
AND
WAS
THE
ADDITION
OF
FULLY
ANNOTATED
TRAINING
IMAGES
PRIOR
TO
ILSVRC
THE
OBJECT
DETECTION
BENCHMARK
WAS
THE
PASCALVOC
CHALLENGE
EVERINGHAM
ET
AL
ILSVRC
HAS
TIMES
MORE
OBJECT
CLASSES
THAN
PASCAL
VOC
VS
TIMES
MORE
FULLY
ANNOTATED
TRAINING
IMAGES
VS
TIMES
MORE
TRAINING
OBJECTS
VS
TIMES
MORE
VALIDATION
IMAGES
VS
AND
TIMES
MORE
VALIDATION
OBJECTS
VS
ILSVRC
HAS
ANNOTATED
OBJECTS
PER
IMAGE
ON
THE
VALIDATION
SET
COMPARED
TO
IN
PASCAL
VOC
THE
AVERAGE
OBJECT
IN
ILSVRC
TAKES
UP
OF
THE
IMAGE
AREA
AND
IN
PASCAL
VOC
TAKES
UP
TABLE
CONTAINS
PER
CLASS
COMPARISONS
ADDITIONALLY
ILSVRC
CONTAINS
A
WIDE
VARIETY
OF
OBJECTS
INCLUDING
TINY
OBJECTS
SUCH
AS
SUNGLASSES
OF
IMAGE
AREA
ON
AVERAGE
PING
PONG
BALLS
OF
IMAGE
AREA
ON
AVERAGE
AND
BASKETBALLS
OF
IMAGE
AREA
ON
AVERAGE
EVALUATION
AT
LARGE
SCALE
ONCE
THE
DATASET
HAS
BEEN
COLLECTED
WE
NEED
TO
DEFINE
A
STANDARDIZED
EVALUATION
PROCEDURE
FOR
ALGORITHMS
SOME
MEASURES
HAVE
ALREADY
BEEN
ESTABLISHED
BY
DATASETS
SUCH
AS
THE
CALTECH
FEI
FEI
ET
AL
FOR
IMAGE
CLASSIFICATION
AND
PASCAL
VOC
EVERINGHAM
ET
AL
FOR
BOTH
IMAGE
CLASSIFICATION
AND
OBJECT
DETECTION
TO
ADAPT
THESE
PROCEDURES
TO
THE
LARGE
SCALE
SETTING
WE
HAD
TO
ADDRESS
THREE
KEY
CHALLENGES
FIRST
FOR
THE
IMAGE
CLASSIFICATION
AND
SINGLEOBJECT
LOCALIZATION
TASKS
ONLY
ONE
OBJECT
CATEGORY
COULD
BE
LABELED
IN
EACH
IMAGE
DUE
TO
THE
SCALE
OF
THE
DATASET
THIS
CREATED
POTENTIAL
AMBIGUITY
DURING
EVALUATION
ADDRESSED
IN
SECT
SECOND
EVALUATING
LOCALIZATION
OF
OBJECT
INSTANCES
IS
INHERENTLY
DIFFICULT
IN
SOME
IMAGES
WHICH
CONTAIN
A
CLUSTER
OF
OBJECTS
ADDRESSED
IN
SECT
THIRD
EVALUATING
LOCALIZATION
OF
OBJECT
INSTANCES
WHICH
OCCUPY
FEW
PIXELS
IN
THE
IMAGE
IS
CHALLENGING
ADDRESSED
IN
SECT
IN
THIS
SECTIONWE
DESCRIBE
THE
STANDARDIZED
EVALUATION
CRITERIA
FOR
EACH
OF
THE
THREE
ILSVRC
TASKS
WE
ELABORATE
FURTHER
ON
THESE
AND
OTHER
MORE
MINOR
CHALLENGES
WITH
LARGE
SCALE
EVALUATION
APPENDIX
DESCRIBES
THE
SUBMISSION
PROTOCOL
AND
OTHER
DETAILS
OF
RUNNING
THE
COMPETITION
ITSELF
TABLE
SCALE
OF
ILSVRC
OBJECT
DETECTION
TASK
YEAR
TRAIN
IMAGES
PER
CLASS
TRAIN
BBOXES
ANNOTATED
PER
CLASS
VAL
IMAGES
PER
CLASS
VAL
BBOXES
ANNOTATED
PER
CLASS
TEST
IMAGES
OBJECT
DETECTION
ANNOTATIONS
OBJECT
CLASSES
POS
NEG
POS
REST
NEG
POS
NEG
POS
REST
NEG
NUMBERS
IN
PARENTHESES
CORRESPOND
TO
MINIMUM
PER
CLASS
MEDIAN
PER
CLASS
MAXIMUM
PER
CLASS
INT
J
COMPUT
VIS
FIG
TASKS
IN
ILSVRC
THE
FIRST
COLUMN
SHOWS
THE
GROUND
TRUTH
LABELING
ON
AN
EXAMPLE
IMAGE
AND
THE
NEXT
THREE
SHOW
THREE
SAMPLE
OUTPUTS
WITH
THE
CORRESPONDING
EVALUATION
SCORE
IMAGE
CLASSIFICATION
THE
SCALE
OF
ILSVRC
CLASSIFICATION
TASK
CATEGORIES
AND
MORE
THAN
A
MILLION
OF
IMAGES
MAKES
IT
VERY
EXPENSIVE
TO
LABEL
EVERY
INSTANCE
OF
EVERY
OBJECT
IN
EVERY
IMAGE
THEREFORE
ON
THIS
DATASET
ONLY
ONE
OBJECT
CATEGORY
IS
LABELED
IN
EACH
IMAGE
THIS
CREATES
AMBIGUITY
IN
EVALUATION
FOR
EXAMPLE
AN
IMAGE
MIGHT
BE
LABELED
AS
A
STRAWBERRY
BUT
CONTAIN
BOTH
A
STRAWBERRY
AND
AN
APPLE
THEN
AN
ALGORITHM
WOULD
NOT
KNOW
WHICH
ONE
OF
THE
TWO
OBJECTS
TO
NAME
FOR
THE
IMAGE
CLASSIFICATION
TASK
WE
ALLOWED
AN
ALGORITHM
TO
IDENTIFY
MULTIPLE
UP
TO
OBJECTS
IN
AN
IMAGE
AND
NOT
BE
PENALIZED
AS
LONG
AS
ONE
OF
THE
OBJECTS
INDEED
CORRESPONDED
TO
THE
GROUND
TRUTH
LABEL
FIGURE
TOP
ROW
SHOWS
SOME
EXAMPLES
CONCRETELY
EACH
IMAGE
I
HAS
A
SINGLE
CLASS
LABEL
CI
AN
ALGORITHM
IS
ALLOWED
TO
RETURN
LABELS
AND
IS
CONSIDERED
CORRECT
IF
CI
J
CI
FOR
SOME
J
LET
THE
ERROR
OF
A
PREDICTION
DI
J
D
CI
J
CI
BE
IF
CI
J
CI
AND
OTHERWISE
THE
ERROR
OF
AN
ALGORITHM
IS
THE
FRACTION
OF
TEST
IMAGES
ON
WHICH
THE
ALGORITHM
MAKES
A
MISTAKE
ERROR
N
N
I
MIN
J
DI
J
WE
USED
TWO
ADDITIONAL
MEASURES
OF
ERROR
FIRST
WE
EVALUATED
TOP
ERROR
IN
THIS
CASE
ALGORITHMS
WERE
PENALIZED
IF
THEIR
HIGHEST
CONFIDENCE
OUTPUT
LABEL
DID
NOT
MATCH
GROUND
TRUTH
CLASS
CI
SECOND
WE
EVALUATED
HIERARCHICAL
ERROR
THE
INTUITION
IS
THAT
CONFUSING
TWO
NEARBY
CLASSES
SUCH
AS
TWO
DIFFERENT
BREEDS
OF
DOGS
IS
NOT
AS
HARMFUL
AS
CONFUSING
A
DOG
FOR
A
CONTAINER
SHIP
FOR
THE
HIERARCHICAL
CRITERIA
THE
COST
OF
ONE
MISCLASSIFICATION
D
CI
J
CI
IS
DEFINED
AS
THE
HEIGHT
OF
THE
LOWEST
COMMON
ANCESTOR
OF
CI
J
AND
CI
IN
THE
IMAGENET
HIERARCHY
THE
HEIGHT
OF
A
NODE
IS
THE
LENGTH
OF
THE
LONGEST
PATH
TO
A
LEAF
NODE
LEAF
NODES
HAVE
HEIGHT
ZERO
HOWEVER
IN
PRACTICE
WE
FOUND
THAT
ALL
THREE
MEASURES
OF
ERROR
TOP
TOP
AND
HIERARCHICAL
PRODUCED
THE
SAME
ORDERING
OF
RESULTS
THUS
SINCE
WE
HAVE
BEEN
EXCLUSIVELY
USING
THE
TOP
METRIC
WHICH
IS
THE
SIMPLEST
AND
MOST
SUITABLE
TO
THE
DATASET
INT
J
COMPUT
VIS
FIG
IMAGES
MARKED
AS
DIFFICULT
IN
THE
SINGLE
OBJECT
LOCALIZATION
VALIDATION
SET
PLEASE
REFER
TO
SECT
FOR
DETAILS
SINGLE
OBJECT
LOCALIZATION
THE
EVALUATION
FOR
SINGLE
OBJECT
LOCALIZATION
IS
SIMILAR
TO
OBJECT
CLASSIFICATION
AGAIN
USING
A
TOP
CRITERIA
TO
ALLOW
THE
ALGORITHM
TO
RETURN
UNANNOTATED
OBJECT
CLASSES
WITHOUT
PENALTY
HOWEVER
NOW
THE
ALGORITHM
IS
CONSIDERED
CORRECT
ONLY
IF
IT
BOTH
CORRECTLY
IDENTIFIES
THE
TARGET
CLASS
CI
AND
ACCURATELY
LOCALIZES
ONE
OF
ITS
INSTANCES
FIGURE
MIDDLE
ROW
SHOWS
SOME
EXAMPLES
CONCRETELY
AN
IMAGE
IS
ASSOCIATED
WITH
OBJECT
CLASS
CI
WITH
ALL
INSTANCES
OF
THIS
OBJECT
CLASS
ANNOTATED
WITH
BOUNDING
BOXES
BIK
AN
ALGORITHM
RETURNS
CI
J
BI
J
OF
CLASS
LABELS
CI
J
AND
ASSOCIATED
LOCATIONS
BI
J
THE
ERROR
OF
A
PREDICTION
J
IS
DI
J
MAX
D
CI
J
CI
MIN
K
D
BI
J
BIK
HERE
D
BI
J
BIK
IS
THE
ERROR
OF
LOCALIZATION
DEFINED
AS
IF
THE
AREA
OF
INTERSECTION
OF
BOXES
BI
J
AND
BIK
DIVIDED
BY
THE
AREAS
OF
THEIR
UNION
IS
GREATER
THAN
AND
OTHERWISE
EVERINGHAM
ET
AL
THE
ERROR
OF
AN
ALGORITHM
IS
COMPUTED
AS
IN
EQ
EVALUATING
LOCALIZATION
IS
INHERENTLY
DIFFICULT
IN
SOME
IMAGES
CONSIDER
A
PICTURE
OF
A
BUNCH
OF
BANANAS
OR
A
CARTON
OF
APPLES
IT
IS
EASY
TO
CLASSIFY
THESE
IMAGES
AS
CONTAINING
BANANAS
OR
APPLES
AND
EVEN
POSSIBLE
TO
LOCALIZE
A
FEW
INSTANCES
OF
EACH
FRUIT
HOWEVER
IN
ORDER
FOR
EVALUATION
TO
BE
ACCURATE
EVERY
INSTANCE
OF
BANANA
OR
APPLE
NEEDS
TO
BE
ANNOTATED
AND
THAT
MAY
BE
IMPOSSIBLE
TO
HANDLE
THE
IMAGES
WHERE
LOCALIZING
INDIVIDUAL
OBJECT
INSTANCES
IS
INHERENTLY
AMBIGUOUS
WE
MANUALLY
DISCARDED
OF
IMAGES
SINCE
SOME
EXAMPLES
OF
DISCARDED
IMAGES
ARE
SHOWN
IN
FIG
OBJECT
DETECTION
THE
CRITERIA
FOR
OBJECT
DETECTION
WAS
ADOPTED
FROM
PASCAL
VOC
EVERINGHAM
ET
AL
IT
IS
DESIGNED
TO
PENALIZE
THE
ALGORITHM
FOR
MISSING
OBJECT
INSTANCES
FOR
DUPLICATE
DETECTIONS
OF
ONE
INSTANCE
AND
FOR
FALSE
POSITIVE
DETECTIONS
FIGURE
BOTTOM
ROW
SHOWS
EXAMPLES
FOR
EACH
OBJECT
CLASS
AND
EACH
IMAGE
II
AN
ALGORITHM
RETURNS
PREDICTED
DETECTIONS
BI
J
SI
J
OF
PREDICTED
LOCATIONS
INPUT
BOUNDING
BOX
PREDICTIONS
WITH
CONFIDENCE
SCORES
BJ
J
M
J
AND
GROUND
TRUTH
BOXES
B
ON
IMAGE
I
FOR
A
GIVEN
OBJECT
CLASS
OUTPUT
BINARY
RESULTS
Z
J
M
J
OF
WHETHER
OR
NOT
PREDICTION
J
IS
A
TRUE
POSITIVE
DETECTION
LET
U
B
BE
THE
SET
OF
UNMATCHED
OBJECTS
ORDER
BJ
J
M
J
IN
DESCENDING
ORDER
OF
J
FOR
J
M
DO
LET
C
BK
U
IOU
BK
BJ
THR
BK
IF
C
THEN
LET
K
ARGMAX
K
BK
C
IOU
BK
BJ
SET
U
U
BK
SET
Z
J
SINCE
TRUE
POSITIVE
DETECTION
ELSE
SET
Z
J
SINCE
FALSE
POSITIVE
DETECTION
END
END
ALGORITHM
THE
ALGORITHM
FOR
GREEDILY
MATCHING
OBJECT
DETECTION
OUTPUTS
TO
GROUND
TRUTH
LABELS
THE
STANDARD
THR
BK
EVERINGHAM
ET
AL
ILSVRC
COMPUTES
THR
BK
USING
EQ
TO
BETTER
HANDLE
LOW
RESOLUTION
OBJECTS
BI
J
WITH
CONFIDENCE
SCORES
SI
J
THESE
DETECTIONS
ARE
GREEDILY
MATCHED
TO
THE
GROUND
TRUTH
BOXES
BIK
USING
ALGORITHM
FOR
EVERY
DETECTION
J
ON
IMAGE
I
THE
ALGORITHM
RETURNS
ZI
J
IF
THE
DETECTION
IS
MATCHED
TO
A
GROUND
TRUTH
BOX
ACCORDING
TO
THE
THRESHOLD
CRITERIA
AND
OTHERWISE
FOR
A
GIVEN
OBJECT
CLASS
LET
N
BE
THE
TOTAL
NUMBER
OF
GROUND
TRUTH
INSTANCES
ACROSS
ALL
IMAGES
GIVEN
A
THRESHOLD
T
DEFINE
RECALL
AS
THE
FRACTION
OF
THE
N
OBJECTS
DETECTED
BY
THE
ALGORITHM
AND
PRECISION
AS
THE
FRACTION
OF
CORRECT
DETECTIONS
OUT
OF
THE
TOTAL
DETECTIONS
RETURNED
BY
THE
ALGORITHM
CONCRETELY
RECALL
T
I
J
SI
J
T
ZI
J
N
PRECISION
T
I
J
SI
J
T
ZI
J
I
J
SI
J
T
THE
FINAL
METRIC
FOR
EVALUATING
AN
ALGORITHM
ON
A
GIVEN
OBJECT
CLASS
IS
AVERAGE
PRECISION
OVER
THE
DIFFERENT
LEVELS
OF
RECALL
ACHIEVED
BY
VARYING
THE
THRESHOLD
T
THE
WINNER
OF
EACH
OBJECT
CLASS
IS
THEN
THE
TEAM
WITH
THE
HIGHEST
AVERAGE
INT
J
COMPUT
VIS
PRECISION
AND
THEN
WINNER
OF
THE
CHALLENGE
IS
THE
TEAM
THAT
WINS
ON
THE
MOST
OBJECT
CLASSES
DIFFERENCE
WITH
PASCAL
VOC
EVALUATING
LOCALIZATION
OF
OBJECT
INSTANCES
WHICH
OCCUPY
VERY
FEW
PIXELS
IN
THE
IMAGE
IS
CHALLENGING
THE
PASCAL
VOC
APPROACH
WAS
TO
LABEL
SUCH
INSTANCES
AS
DIFFICULT
AND
IGNORE
THEM
DURING
EVALUATION
HOWEVER
SINCE
ILSVRC
CONTAINS
A
MORE
DIVERSE
SET
OF
OBJECT
CLASSES
INCLUDING
FOR
EXAMPLE
NAIL
AND
PING
PONG
BALL
WHICH
HAVE
MANY
VERY
SMALL
INSTANCES
IT
IS
IMPORTANT
TO
INCLUDE
EVEN
VERY
SMALL
OBJECT
INSTANCES
IN
EVALUATION
IN
ALGORITHM
A
PREDICTED
BOUNDING
BOX
B
IS
CONSIDERED
TO
HAVE
PROPERLY
LOCALIZED
BY
A
GROUND
TRUTH
BOUNDING
BOX
B
IF
I
OU
B
B
THR
B
THE
PASCAL
VOC
METRIC
USES
THE
THRESHOLD
THR
B
HOWEVER
FOR
SMALL
OBJECTS
EVEN
DEVIATIONS
OF
A
FEW
PIXELS
WOULD
BE
UNACCEPTABLE
ACCORDING
TO
THIS
THRESHOLD
FOR
EXAMPLE
CONSIDER
AN
OBJECT
B
OF
SIZE
PIXELS
WITH
A
DETECTION
WINDOW
OF
PIXELS
WHICH
FULLY
CONTAINS
THAT
OBJECT
THIS
WOULD
BE
AN
ERROR
OF
APPROXIMATELY
PIXELS
ON
EACH
DIMENSION
WHICH
IS
AVERAGE
HUMAN
ANNOTATION
ERROR
HOWEVER
THE
IOUIN
THIS
CASEWOULD
BE
FAR
BELOW
THE
THRESHOLD
OF
THUS
FOR
SMALLER
OBJECTS
WE
LOOSEN
THE
THRESHOLD
IN
ILSVRC
TO
ALLOW
FOR
THE
ANNOTATION
TO
EXTEND
UP
TO
PIXELS
ON
AVERAGE
IN
EACH
DIRECTION
AROUND
THE
OBJECT
CONCRETELY
IF
THE
GROUND
TRUTH
BOX
B
IS
OF
DIMENSIONS
W
H
THEN
THR
B
MIN
WH
W
H
IN
PRACTICE
THIS
CHANGES
THE
THRESHOLD
ONLY
ON
OBJECTS
WHICH
ARE
SMALLER
THAN
APPROXIMATELY
PIXELS
AND
AFFECTS
OF
OBJECTS
IN
THE
DETECTION
VALIDATION
SET
PRACTICAL
CONSIDERATION
ONE
ADDITIONAL
PRACTICAL
CONSIDERATION
FOR
ILSVRC
DETECTION
EVALUATION
IS
SUBTLE
AND
COMES
DIRECTLY
AS
A
RESULT
OF
THE
SCALE
OF
ILSVRC
IN
PASCAL
ALGORITHMS
WOULD
OFTEN
RETURN
MANY
DETECTIONS
PER
CLASS
ON
THE
TEST
SET
INCLUDING
ONES
WITH
LOW
CONFIDENCE
SCORES
THIS
ALLOWED
THE
ALGORITHMS
TO
REACH
THE
LEVEL
OF
HIGH
RECALL
AT
LEAST
IN
THE
REALM
OF
VERY
LOW
PRECISION
ON
ILSVRC
DETECTION
TEST
SET
IF
AN
ALGORITHM
RETURNS
BOUNDING
BOXES
PER
OBJECT
PER
IMAGE
THIS
WOULD
RESULT
IN
DETECTIONS
EACH
DETECTION
CONTAINS
AN
IMAGE
INDEX
A
CLASS
INDEX
BOUNDING
BOX
COORDINATES
AND
THE
CONFIDENCE
SCORE
SO
IT
TAKES
ON
THE
ORDER
OF
BYTES
THE
FULL
SET
OF
DETECTIONS
WOULD
THEN
REQUIRE
TO
STORE
AND
SUBMIT
TO
THE
EVALUATION
SERVER
WHICH
IS
IMPRACTICAL
THIS
MEANS
THAT
ALGORITHMS
IN
THIS
PAPER
WE
FOCUS
ON
THE
MEAN
AVERAGE
PRECISION
ACROSS
ALL
CATEGORIES
AS
THE
MEASURE
OF
A
TEAM
PERFORMANCE
THIS
IS
DONE
FOR
SIMPLICITY
AND
IS
JUSTIFIED
SINCE
THE
ORDERING
OF
TEAMS
BY
MEAN
AVERAGE
PRECISIONWAS
ALWAYS
THE
SAME
AS
THE
ORDERING
BY
OBJECT
CATEGORIESWON
ARE
IMPLICITLY
REQUIRED
TO
LIMIT
THEIR
PREDICTIONS
TO
ONLY
THE
MOST
CONFIDENT
LOCATIONS
METHODS
THE
ILSVRC
DATASET
AND
THE
COMPETITION
HAS
ALLOWED
SIGNIFICANT
ALGORITHMIC
ADVANCES
IN
LARGE
SCALE
IMAGE
RECOGNITION
AND
RETRIEVAL
CHALLENGE
ENTRIES
THIS
SECTION
IS
ORGANIZED
CHRONOLOGICALLY
HIGHLIGHTING
THE
PARTICULARLY
INNOVATIVE
AND
SUCCESSFULMETHODS
WHICH
PARTICIPATED
IN
THE
ILSVRC
EACH
YEAR
TABLES
AND
LIST
ALL
THE
PARTICIPATING
TEAMS
WE
SEE
A
TURNING
POINT
IN
WITH
THE
DEVELOPMENT
OF
LARGE
SCALE
CONVOLUTIONAL
NEURAL
NETWORKS
THE
FIRST
YEAR
THE
CHALLENGE
CONSISTED
OF
JUST
THE
CLASSIFICATION
TASK
THE
WINNING
ENTRY
FROM
NEC
TEAM
LIN
ET
AL
USED
SIFT
LOWE
AND
LBP
AHONEN
ET
AL
FEATURES
WITH
TWO
NON
LINEAR
CODING
REPRESENTATIONS
ZHOU
ET
AL
WANG
ET
AL
AND
A
STOCHASTIC
SVM
THE
HONORABLE
MENTION
XRCE
TEAM
PERRONNIN
ET
AL
USED
AN
IMPROVED
FISHER
VECTOR
REPRESENTATION
PERRONNIN
AND
DANCE
ALONG
WITH
PCA
DIMENSIONALITY
REDUCTION
AND
DATA
COMPRESSION
FOLLOWED
BY
A
LINEAR
SVM
FISHER
VECTOR
BASED
METHODS
HAVE
EVOLVED
OVER
YEARS
OF
THE
CHALLENGE
AND
CONTINUED
PERFORMING
STRONGLY
IN
EVERY
ILSVRC
FROM
TO
THE
WINNING
CLASSIFICATION
ENTRY
IN
WAS
THE
RUNNER
UP
TEAM
XRCE
APPLYING
HIGH
DIMENSIONAL
IMAGE
SIGNATURES
PERRONNIN
ET
AL
WITH
COMPRESSION
USING
PRODUCT
QUANTIZATION
SANCHEZ
AND
PERRONNIN
AND
ONE
VS
ALL
LINEAR
SVMS
THE
SINGLE
OBJECT
LOCALIZATION
COMPETITIONWAS
HELD
FOR
THE
FIRST
TIME
WITH
TWO
BRAVE
ENTRIES
THE
WINNER
WAS
THE
UVA
TEAM
USING
A
SELECTIVE
SEARCH
APPROACH
TO
GENERATE
CLASS
INDEPENDENT
OBJECT
HYPOTHESIS
REGIONS
VAN
DE
SANDE
ET
AL
FOLLOWED
BY
DENSE
SAMPLING
AND
VECTOR
QUANTIZATION
OF
SEVERAL
COLOR
SIFT
FEATURES
VAN
DE
SANDE
ET
AL
POOLING
WITH
SPATIAL
PYRAMID
MATCHING
LAZEBNIK
ET
AL
AND
CLASSIFYING
WITH
A
HISTOGRAM
INTERSECTION
KERNEL
SVM
MAJI
AND
MALIK
TRAINED
ON
A
GPU
VAN
DE
SANDE
ET
AL
THIS
WAS
A
TURNING
POINT
FOR
LARGE
SCALE
OBJECT
RECOGNITION
WHEN
LARGE
SCALE
DEEP
NEURAL
NETWORKS
ENTERED
THE
SCENE
THE
UNDISPUTED
WINNER
OF
BOTH
THE
CLASSIFICATION
AND
LOCALIZATION
TASKS
IN
WAS
THE
SUPERVISION
TEAM
THEY
TRAINED
A
LARGE
DEEP
CONVOLUTIONAL
NEURAL
NETWORK
ON
RGB
VALUES
WITH
MILLION
PARAMETERS
USING
AN
EFFICIENT
GPU
IMPLEMENTATION
AND
A
NOVEL
HIDDEN
UNIT
DROPOUT
TRICK
INT
J
COMPUT
VIS
TABLE
TEAMS
PARTICIPATING
IN
ORDERED
ALPHABETICALLY
CODENAME
CLS
LOC
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
ILSVRC
HMINMAX
MASSACHUSETTS
INSTITUTE
OF
TECHNOLOGY
JIM
MUTCH
SHARAT
CHIKKERUR
HRISTO
PASKOV
RUSLAN
SALAKHUTDINOV
STAN
BILESCHI
HUEIHAN
JHUANG
IBM
IBM
RESEARCH
GEORGIA
TECH
LEXING
XIE
HUA
OUYANG
APOSTOL
NATSEV
ISIL
INTELLIGENT
SYSTEMS
AND
INFORMATICS
LAB
THE
UNIVERSITY
OF
TOKYO
TATSUYA
HARADA
HIDEKI
NAKAYAMA
YOSHITAKA
USHIKU
YUYA
YAMASHITA
JUN
IMURA
YASUO
KUNIYOSHI
ITNLP
HARBIN
INSTITUTE
OF
TECHNOLOGY
DEYUAN
ZHANG
WENFENG
XUAN
XIAOLONG
WANG
BINGQUAN
LIU
CHENGJIE
SUN
LIG
LABORATOIRE
D
INFORMATIQUE
DE
GRENOBLE
GEORGES
QUÉNOT
NEC
NEC
LABS
AMERICA
UNIVERSITY
OF
ILLINOIS
AT
URBANA
CHAMPAIGN
RUTGERS
YUANQING
LIN
FENGJUN
LV
SHENGHUO
ZHU
MING
YANG
TIMOTHEE
COUR
KAI
YU
LIANGLIANG
CAO
ZHEN
LI
MIN
HSUAN
TSAI
XI
ZHOU
THOMAS
HUANG
TONG
ZHANG
LIN
ET
AL
NII
NATIONAL
INSTITUTE
OF
INFORMATICS
TOKYO
JAPAN
HEFEI
NORMAL
UNIV
HEIFEI
CHINA
CAI
ZHI
ZHU
XIAO
ZHOU
SHINÍCHI
SATOH
NTU
CEMNET
SCE
NTU
SINGAPORE
ZHENGXIANG
WANG
LIANG
TIEN
CHIA
UCI
UNIVERSITY
OF
CALIFORNIA
IRVINE
HAMED
PIRSIAVASH
DEVA
RAMANAN
CHARLESS
FOWLKES
XRCE
XEROX
RESEARCH
CENTRE
EUROPE
JORGE
SANCHEZ
FLORENT
PERRONNIN
THOMAS
MENSINK
PERRONNIN
ET
AL
ILSVRC
ISI
INTELLIGENT
SYSTEMS
AND
INFORMATICS
LAB
UNIVERSITY
OF
TOKYO
TATSUYA
HARADA
ASAKO
KANEZAKI
YOSHITAKA
USHIKU
YUYA
YAMASHITA
SHO
INABA
HIROSHI
MURAOKA
YASUO
KUNIYOSHI
NII
NATIONAL
INSTITUTE
OF
INFORMATICS
JAPAN
DUY
DINH
LE
SHINÍCHI
SATOH
UVA
UNIVERSITY
OF
AMSTERDAM
UNIVERSITY
OF
TRENTO
KOEN
E
A
VAN
DE
SANDE
JASPER
R
R
UIJLINGS
ARNOLD
W
M
SMEULDERS
THEO
GEVERS
NICU
SEBE
CEES
SNOEK
VAN
DE
SANDE
ET
AL
XRCE
XEROX
RESEARCH
CENTRE
EUROPE
CIII
FLORENT
PERRONNIN
JORGE
SANCHEZ
SANCHEZ
AND
PERRONNIN
ILSVRC
ISI
UNIVERSITY
OF
TOKYO
JST
PRESTO
NAOYUKI
GUNJI
TAKAYUKI
HIGUCHI
KOKI
YASUMOTO
HIROSHI
MURAOKA
YOSHITAKA
USHIKU
TATSUYA
HARADA
YASUO
KUNIYOSHI
HARADA
AND
KUNIYOSHI
LEAR
LEAR
INRIA
GRENOBLE
TVPA
XEROX
RESEARCH
CENTRE
EUROPE
THOMAS
MENSINK
JAKOB
VERBEEK
FLORENT
PERRONNIN
GABRIELA
CSURKA
MENSINK
ET
AL
VGG
UNIVERSITY
OF
OXFORD
KAREN
SIMONYAN
YUSUF
AYTAR
ANDREA
VEDALDI
ANDREW
ZISSERMAN
ARANDJELOVIC
AND
ZISSERMAN
SANCHEZ
ET
AL
SUPERVISION
UNIVERSITY
OF
TORONTO
ALEX
KRIZHEVSKY
ILYA
SUTSKEVER
GEOFFREY
HINTON
KRIZHEVSKY
ET
AL
UVA
UNIVERSITY
OF
AMSTERDAM
KOEN
E
A
VAN
DE
SANDE
AMIR
HABIBIAN
CEES
G
M
SNOEK
SANCHEZ
AND
PERRONNIN
SCHEIRER
ET
AL
XRCE
XEROX
RESEARCH
CENTRE
EUROPE
LEAR
INRIA
FLORENT
PERRONNIN
ZEYNEP
AKATA
ZAID
HARCHAOUI
CORDELIA
SCHMID
PERRONNIN
ET
AL
EACH
METHOD
IS
IDENTIFIED
WITH
A
CODENAME
USED
IN
THE
TEXT
WE
REPORT
FLAT
TOP
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
ERROR
IN
PERCENTS
LOWER
IS
BETTER
FOR
TEAMS
WHICH
SUBMITTED
MULTIPLE
ENTRIES
WE
REPORT
THE
BEST
SCORE
IN
SUPERVISION
ALSO
SUBMITTED
ENTRIES
TRAINED
WITH
THE
EXTRA
DATA
FROM
THE
IMAGENET
FALL
RELEASE
AND
OBTAINED
CLASSIFICATION
ERROR
AND
LOCALIZATION
ERROR
KEY
REFERENCES
ARE
PROVIDED
WHERE
AVAILABLE
MORE
DETAILS
ABOUT
THE
WINNING
ENTRIES
CAN
BE
FOUND
IN
SECT
INT
J
COMPUT
VIS
TABLE
TEAMS
PARTICIPATING
IN
ORDERED
ALPHABETICALLY
CODENAME
CLS
LOC
DET
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
ILSVRC
ADOBE
ADOBE
UNIVERSITY
OF
ILLINOIS
AT
URBANA
CHAMPAIGN
HAILIN
JIN
ZHE
LIN
JIANCHAO
YANG
TOM
PAINE
KRIZHEVSKY
ET
AL
AHOWARD
ANDREW
HOWARD
CONSULTING
ANDREW
HOWARD
BUPT
BEIJING
UNIVERSITY
OF
POSTS
AND
TELECOMMUNICATIONS
ORANGE
LABS
INTERNATIONAL
CENTER
BEIJING
CHONG
HUANG
YUNLONG
BIAN
HONGLIANG
BAI
BO
LIU
YANCHAO
FENG
YUAN
DONG
CLARIFAI
CLARIFAI
MATTHEW
ZEILER
ZEILER
AND
FERGUS
ZEILER
ET
AL
COGVISION
MICROSOFT
RESEARCH
HARBIN
INSTITUTE
OF
TECHNOLOGY
KUIYUAN
YANG
YALONG
BAI
YONG
RUI
DECAF
UNIVERSITY
OF
CALIFORNIA
BERKELEY
YANGQING
JIA
JEFF
DONAHUE
TREVOR
DARRELL
DONAHUE
ET
AL
DEEP
PUNX
SAINT
PETERSBURG
STATE
UNIVERSITY
EVGENY
SMIRNOV
DENIS
TIMOSHENKO
ALEXEY
KOROLEV
KRIZHEVSKY
ET
AL
WAN
ET
AL
TANG
DELTA
NATIONAL
TSING
HUA
UNIVERSITY
CHE
RUNG
LEE
HWANN
TZONG
CHEN
HAO
PING
KANG
TZU
WEI
HUANG
CI
HONG
DENG
HAO
CHE
KAO
IBM
UNIVERSITY
OF
ILLINOIS
AT
URBANA
CHAMPAIGN
IBM
WATSON
RESEARCH
CENTER
IBMHAIFA
RESEARCH
CENTER
ZHICHENG
YAN
LIANGLIANG
CAO
JOHN
R
SMITH
NOEL
CODELLA
MICHELE
MERLER
SHARATH
PANKANTI
SHARON
ALPERT
YOCHAY
TZUR
MIL
UNIVERSITY
OF
TOKYO
MASATOSHI
HIDAKA
CHIE
KAMADA
YUSUKE
MUKUTA
NAOYUKI
GUNJI
YOSHITAKA
USHIKU
TATSUYA
HARADA
MINERVA
PEKING
UNIVERSITY
MICROSOFT
RESEARCH
SHANGHAI
JIAO
TONG
UNIVERSITY
XIDIAN
UNIVERSITY
HARBIN
INSTITUTE
OF
TECHNOLOGYΣ
TIANJUN
XIAO
MINJIE
WANG
JIANPENG
LI
YALONG
BAIΣ
JIAXING
ZHANG
KUIYUAN
YANG
CHUNTAO
HONG
ZHENG
ZHANG
WANG
ET
AL
NEC
NEC
LABS
AMERICA
UNIVERSITY
OF
MISSOURI
XIAOYU
WANG
MIAO
SUN
TIANBAO
YANG
YUANQING
LIN
TONY
X
HAN
SHENGHUO
ZHU
WANG
ET
AL
NUS
NATIONAL
UNIVERSITY
OF
SINGAPORE
MIN
LIN
QIANG
CHEN
JIAN
DONG
JUNSHI
HUANG
WEI
XIA
SHUICHENG
YAN
EQUAL
CONTRIBUTION
KRIZHEVSKY
ET
AL
ORANGE
ORANGE
LABS
INTERNATIONAL
CENTER
BEIJING
BEIJING
UNIVERSITY
OF
POSTS
AND
TELECOMMUNICATIONS
HONGLIANG
BAI
LEZI
WANG
SHUSHENG
CEN
YINAN
LIU
KUN
TAO
WEI
LIU
PENG
LI
YUAN
DONG
OVERFEAT
NEW
YORK
UNIVERSITY
PIERRE
SERMANET
DAVID
EIGEN
MICHAEL
MATHIEU
XIANG
ZHANG
ROB
FERGUS
YANN
LECUN
SERMANET
ET
AL
QUANTUM
SELF
EMPLOYED
STUDENT
IN
TROY
HIGH
SCHOOL
FULLERTON
CA
HENRY
SHU
JERRY
SHU
BATRA
ET
AL
SYSU
SUN
YAT
SEN
UNIVERSITY
CHINA
XIAOLONG
WANG
FELZENSZWALB
ET
AL
TORONTO
UNIVERSITY
OF
TORONTO
YICHUAN
TANG
NITISH
SRIVASTAVA
RUSLAN
SALAKHUTDINOV
EQUAL
CONTRIBUTION
TRIMPS
THE
THIRD
RESEARCH
INSTITUTE
OF
THE
MINISTRY
OF
PUBLIC
SECURITY
P
R
CHINA
JIE
SHAO
XIAOTENG
ZHANG
YANFENG
SHANG
WENFEI
WANG
LIN
MEI
CHUANPING
HU
UCLA
UNIVERSITY
OF
CALIFORNIA
LOS
ANGELES
YUKUN
ZHU
JUN
ZHU
ALAN
YUILLE
UIUC
UNIVERSITY
OF
ILLINOIS
AT
URBANA
CHAMPAIGN
THOMAS
PAINE
KEVIN
SHIH
THOMAS
HUANG
KRIZHEVSKY
ET
AL
INT
J
COMPUT
VIS
TABLE
CONTINUED
CODENAME
CLS
LOC
DET
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
UVA
UNIVERSITY
OF
AMSTERDAM
EUVISION
TECHNOLOGIES
KOEN
E
A
VAN
DE
SANDE
DANIEL
H
F
FONTIJNE
CEES
G
M
SNOEK
HARRO
M
G
STOKMAN
ARNOLD
W
M
SMEULDERS
VAN
DE
SANDE
ET
AL
VGG
VISUAL
GEOMETRY
GROUP
UNIVERSITY
OF
OXFORD
KAREN
SIMONYAN
ANDREA
VEDALDI
ANDREW
ZISSERMAN
SIMONYAN
ET
AL
ZF
NEW
YORK
UNIVERSITY
MATTHEW
D
ZEILER
ROB
FERGUS
ZEILER
AND
FERGUS
ZEILER
ET
AL
EACH
METHOD
IS
IDENTIFIED
WITH
A
CODENAME
USED
IN
THE
TEXT
FOR
CLASSIFICATON
AND
SINGLE
OBJECT
LOCALIZATION
WE
REPORT
FLAT
TOP
ERROR
IN
PERCENTS
LOWER
IS
BETTER
FOR
DETECTION
WE
REPORT
MEAN
AVERAGE
PRECISION
IN
PERCENTS
HIGHER
IS
BETTER
EVEN
THOUGH
THE
WINNER
OF
THE
CHALLENGE
WAS
DETERMINED
BY
THE
NUMBER
OF
OBJECT
CATEGORIES
WON
THIS
CORRELATED
STRONGLY
WITH
MAP
PARENTHESES
INDICATE
THE
TEAM
USED
OUTSIDE
TRAINING
DATA
AND
WAS
NOT
PART
OF
THE
OFFICIAL
COMPETITION
SOME
COMPETING
TEAMS
ALSO
SUBMITTED
ENTRIES
TRAINED
WITH
OUTSIDE
DATA
CLARIFAI
WITH
CLASSIFICATION
ERROR
NEC
WITH
DETECTIONMAP
KEY
REFERENCES
ARE
PROVIDED
WHERE
AVAILABLE
MORE
DETAILS
ABOUT
THE
WINNING
ENTRIES
CAN
BE
FOUND
IN
SECT
TABLE
TEAMS
PARTICIPATING
IN
ORDERED
ALPHABETICALLY
CODENAME
CLS
CLSO
LOC
LOCO
DET
DETO
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
ILSVRC
ADOBE
ADOBE
UIUC
HAILIN
JIN
ZHAOWEN
WANG
JIANCHAO
YANG
ZHE
LIN
AHOWARD
HOWARD
VISION
TECHNOLOGIES
ANDREW
HOWARD
HOWARD
BDC
INSTITUTE
FOR
INFOCOMM
RESEARCH
UNIVERSIT
PIERRE
ET
MARIE
CURIE
OLIVIER
MORRE
HANLIN
GOH
ANTOINE
VEILLARD
VIJAY
CHANDRASEKHAR
KRIZHEVSKY
ET
AL
BERKELEY
UC
BERKELEY
ROSS
GIRSHICK
JEFF
DONAHUE
SERGIO
GUADARRAMA
TREVOR
DARRELL
JITENDRA
MALIK
GIRSHICK
ET
AL
BREIL
KAIST
DEPARTMENT
OF
EE
JUN
CHEOL
PARK
YUNHUN
JANG
HYUNGWON
CHOI
JAEYOUNG
JUN
CHATFIELD
ET
AL
JIA
BRNO
BRNO
UNIVERSITY
OF
TECHNOLOGY
MARTIN
KOLÁˇR
MICHAL
HRADIŠ
PAVEL
SVOBODA
KRIZHEVSKY
ET
AL
MIKOLOV
ET
AL
JIA
CASIA
CHINESE
ACADEMY
OF
SCIENCE
SOUTHEAST
UNIVERSITY
PEIHAO
HUANG
YONGZHEN
HUANG
FENG
LIU
ZIFENG
WU
FANG
ZHAO
LIANG
WANG
TIENIU
TAN
GIRSHICK
ET
AL
CASIAWS
CRIPAC
CASIA
WEIQIANG
REN
CHONG
WANG
YANHUA
CHEN
KAIQI
HUANG
TIENIU
TAN
ARBELÁEZ
ET
AL
CLDI
KAIST
CLDI
INC
KYUNGHYUN
PAENG
DONGGEUN
YOO
SUNGGYUN
PARK
JUNGIN
LEE
ANTHONY
PAEK
IN
SO
KWEON
SEONG
DAE
KIM
KRIZHEVSKY
ET
AL
PERRONNIN
ET
AL
CUHK
THE
CHINESE
UNIVERSITY
OF
HONG
KONG
WANLI
OUYANG
PING
LUO
XINGYU
ZENG
SHI
QIU
YONGLONG
TIAN
HONGSHENG
LI
SHUO
YANG
ZHE
WANG
YUANJUN
XIONG
CHEN
QIAN
ZHENYAO
ZHU
RUOHUI
WANG
CHEN
CHANGE
LOY
XIAOGANG
WANG
XIAOOU
TANG
OUYANG
ET
AL
OUYANG
AND
WANG
DEEPCNET
UNIVERSITY
OF
WARWICK
BEN
GRAHAM
GRAHAM
SCHMIDHUBER
INT
J
COMPUT
VIS
TABLE
CONTINUED
CODENAME
CLS
CLSO
LOC
LOCO
DET
DETO
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
DEEPINSIGHT
NLPR
HKUST
JUNJIE
YAN
NAIYAN
WANG
STAN
Z
LI
DIT
YAN
YEUNG
GIRSHICK
ET
AL
FENGJUNLV
FENGJUN
LV
CONSULTING
FENGJUN
LV
KRIZHEVSKY
ET
AL
HAREL
ET
AL
GOOGLENET
GOOGLE
CHRISTIAN
SZEGEDY
WEI
LIU
YANGQING
JIA
PIERRE
SERMANET
SCOTT
REED
DRAGO
ANGUELOV
DUMITRU
ERHAN
ANDREW
RABINOVICH
SZEGEDY
ET
AL
HKUST
HONG
KONG
U
OF
SCIENCE
AND
TECH
CHINESE
U
OF
H
K
STANFORD
U
CEWU
LU
HEI
LAW
HAO
CHEN
QIFENG
CHEN
YAO
XIAO
CHI
KEUNG
TANG
UIJLINGS
ET
AL
GIRSHICK
ET
AL
PERRONNIN
ET
AL
FELZENSZWALB
ET
AL
LIBCCV
LIBCCV
ORG
LIU
LIU
ZEILER
AND
FERGUS
MIL
THE
UNIVERSITY
OF
TOKYO
IIT
GUWAHATI
SENTHIL
PURUSHWALKAM
YUICHIRO
TSUCHIYA
ATSUSHI
KANEHIRA
ASAKO
KANEZAKI
TATSUYA
HARADA
KANEZAKI
ET
AL
GIRSHICK
ET
AL
THE
UNIVERSITY
OF
TOKYO
RIKU
TOGASHI
KEITA
IWAMOTO
TOMOAKI
IWASE
HIDEKI
NAKAYAMA
GIRSHICK
ET
AL
MSRA
MICROSOFT
RESEARCH
XI
AN
JIAOTONG
U
U
OF
SCIENCE
AND
TECH
OF
CHINA
KAIMING
HE
XIANGYU
ZHANG
SHAOQING
REN
JIAN
SUN
HE
ET
AL
NUS
NATIONAL
UNIVERSITY
OF
SINGAPORE
IBM
RESEARCH
AUSTRALIA
JIAN
DONG
YUNCHAO
WEI
MIN
LIN
QIANG
CHEN
WEI
XIA
SHUICHENG
YAN
LIN
ET
AL
CHEN
ET
AL
NUS
BST
NATIONAL
UNIV
OF
SINGAPORE
BEIJING
SAMSUNG
TELECOM
R
D
CENTER
MIN
LIN
JIAN
DONG
HANJIANG
LAI
JUNJUN
XIONG
SHUICHENG
YAN
LIN
ET
AL
HOWARD
KRIZHEVSKY
ET
AL
ORANGE
ORANGE
LABS
BEIJING
BUPT
CHINA
HONGLIANG
BAI
YINAN
LIU
BO
LIU
YANCHAO
FENG
KUN
TAO
YUAN
DONG
GIRSHICK
ET
AL
PASSBY
LENOVO
HKUST
U
OF
MACAO
LIN
SUN
ZHANGHUI
KUANG
CONG
ZHAO
KUI
JIA
OSCAR
C
AU
JIA
KRIZHEVSKY
ET
AL
SCUT
SOUTH
CHINA
UNIV
OF
TECHNOLOGY
GUO
LIHUA
LIAO
QIJUN
MA
QIANLI
LIN
JUNBIN
SOUTHEAST
SOUTHEAST
U
CHINESE
A
OF
SCIENCES
FENG
LIU
ZIFENG
WU
YONGZHEN
HUANG
SYSU
SUN
YAT
SEN
UNIVERSITY
LILIANG
ZHANG
TIANSHUI
CHEN
SHUYE
ZHANG
WANGLAN
HE
LIANG
LIN
DENGGUANG
PANG
LINGBO
LIU
TRIMPS
THE
THIRD
RESEARCH
INSTITUTE
OF
THE
MINISTRY
OF
PUBLIC
SECURITY
JIE
SHAO
XIAOTENG
ZHANG
JIANYING
ZHOU
JIAN
WANG
JIAN
CHEN
YANFENG
SHANG
WENFEI
WANG
LIN
MEI
CHUANPING
HU
GIRSHICK
ET
AL
MANEN
ET
AL
HOWARD
TTIC
TOYOTA
TECHNOLOGICAL
INSTITUTE
AT
CHICAGO
ECOLE
CENTRALE
PARIS
GEORGE
PAPANDREOU
IASONAS
KOKKINOS
PAPANDREOU
PAPANDREOU
ET
AL
JOJIC
ET
AL
KRIZHEVSKY
ET
AL
SERMANET
ET
AL
DUBOUT
AND
FLEURET
IANDOLA
ET
AL
INT
J
COMPUT
VIS
TABLE
CONTINUED
CODENAME
CLS
CLSO
LOC
LOCO
DET
DETO
INSITUTIONS
CONTRIBUTORS
AND
REFERENCES
UI
UNIVERSITY
OF
ISFAHAN
FATEMEH
SHAFIZADEGAN
ELHAM
SHABANINIA
YANG
ET
AL
UVA
U
OF
AMSTERDAM
AND
EUVISION
TECH
KOEN
VAN
DE
SANDE
DANIEL
FONTIJNE
CEES
SNOEK
HARRO
STOKMAN
ARNOLD
SMEULDERS
VAN
DE
SANDE
ET
AL
VGG
UNIVERSITY
OF
OXFORD
KAREN
SIMONYAN
ANDREW
ZISSERMAN
SIMONYAN
AND
ZISSERMAN
XYZ
THE
UNIVERSITY
OF
QUEENSLAND
ZHONGWEN
XU
AND
YI
YANG
KRIZHEVSKY
ET
AL
JIA
ZEILER
AND
FERGUS
LIN
ET
AL
EACH
METHOD
IS
IDENTIFIED
WITH
A
CODENAME
USED
IN
THE
TEXT
FOR
CLASSIFICATON
AND
SINGLE
OBJECT
LOCALIZATION
WE
REPORT
FLAT
TOP
ERROR
IN
PERCENTS
LOWER
IS
BETTER
FOR
DETECTION
WE
REPORT
MEAN
AVERAGE
PRECISION
IN
PERCENTS
HIGHER
IS
BETTER
CLSO
LOCO
DETO
CORRESPONDS
TO
ENTRIES
USING
OUTSIDE
TRAINING
DATA
OFFICIALLY
ALLOWED
IN
MEANS
LOCALIZATION
ERROR
GREATER
THAN
LOCALIZATION
SUBMISSION
WAS
REQUIRED
WITH
EVERY
CLASSIFICATION
SUBMISSION
KEY
REFERENCES
ARE
PROVIDED
WHERE
AVAILABLE
MORE
DETAILS
ABOUT
THE
WINNING
ENTRIES
CAN
BE
FOUND
IN
SECT
KRIZHEVSKY
ET
AL
HINTON
ET
AL
THE
SECOND
PLACE
IN
IMAGE
CLASSIFICATION
WENT
TO
THE
ISI
TEAM
WHICH
USED
FISHER
VECTORS
SANCHEZ
AND
PERRONNIN
AND
A
STREAMLINED
VERSION
OF
GRAPHICAL
GAUSSIAN
VECTORS
HARADA
AND
KUNIYOSHI
ALONG
WITH
LINEAR
CLASSIFIERS
USING
PASSIVE
AGGRESSIVE
PA
ALGORITHM
CRAMMER
ET
AL
THE
SECOND
PLACE
IN
SINGLE
OBJECT
LOCALIZATION
WENT
TO
THE
VGG
WITH
AN
IMAGE
CLASSIFICATION
SYSTEM
INCLUDING
DENSE
SIFT
FEATURES
AND
COLOR
STATISTICS
LOWE
A
FISHER
VECTOR
REPRESENTATION
SANCHEZ
AND
PERRONNIN
AND
A
LINEAR
SVM
CLASSIFIER
PLUS
ADDITIONAL
INSIGHTS
FROM
ARANDJELOVIC
AND
ZISSERMAN
SANCHEZ
ET
AL
BOTH
ISI
AND
VGG
USED
FELZENSZWALB
ET
AL
FOR
OBJECT
LOCALIZATION
SUPERVISION
USED
A
REGRESSION
MODEL
TRAINED
TO
PREDICT
BOUNDING
BOX
LOCATIONS
DESPITE
THE
WEAKER
DETECTION
MODEL
SUPERVISION
HANDILY
WON
THE
OBJECT
LOCALIZATION
TASK
A
DETAILED
ANALYSIS
AND
COMPARISON
OF
THE
SUPERVISION
AND
VGG
SUBMISSIONS
ON
THE
SINGLE
OBJECT
LOCALIZATION
TASK
CAN
BE
FOUND
IN
RUSSAKOVSKY
ET
AL
THE
INFLUENCE
OF
THE
SUCCESS
OF
THE
SUPERVISION
MODEL
CAN
BE
CLEARLY
SEEN
IN
AND
THERE
WERE
TEAMS
PARTICIPATING
IN
THE
COMPETITION
COMPARED
TO
IN
THE
PREVIOUS
YEARS
COMBINED
FOLLOWING
THE
SUCCESS
OF
THE
DEEP
LEARNINGBASED
METHOD
IN
THE
VAST
MAJORITY
OF
ENTRIES
IN
USED
DEEP
CONVOLUTIONAL
NEURAL
NETWORKS
IN
THEIR
SUBMISSION
THE
WINNER
OF
THE
CLASSIFICATION
TASK
WAS
CLARIFAI
WITH
SEVERAL
LARGE
DEEP
CONVOLUTIONAL
NETWORKS
AVERAGED
TOGETHER
THE
NETWORK
ARCHITECTURES
WERE
CHOSEN
USING
THE
VISUALIZATION
TECHNIQUE
OF
ZEILER
AND
FERGUS
AND
THEY
WERE
TRAINED
ON
THE
GPU
FOLLOWING
ZEILER
ET
AL
USING
THE
DROPOUT
TECHNIQUE
KRIZHEVSKY
ET
AL
THE
WINNING
SINGLE
OBJECT
LOCALIZATION
OVERFEAT
SUBMISSIONWAS
BASED
ON
AN
INTEGRATED
FRAMEWORK
FOR
USING
CONVOLUTIONAL
NETWORKS
FOR
CLASSIFICATION
LOCALIZATION
AND
DETECTION
WITH
A
MULTISCALE
SLIDING
WINDOW
APPROACH
SERMANET
ET
AL
THEY
WERE
THE
ONLY
TEAM
TACKLING
ALL
THREE
TASKS
THE
WINNER
OF
OBJECT
DETECTION
TASK
WAS
UVA
TEAM
WHICH
UTILIZED
A
NEW
WAY
OF
EFFICIENT
ENCODING
VAN
DE
SANDE
ET
AL
DENSELY
SAMPLED
COLOR
DESCRIPTORS
VAN
DE
SANDE
ET
AL
POOLED
USING
A
MULTI
LEVEL
SPATIAL
PYRAMID
IN
A
SELECTIVE
SEARCH
FRAMEWORK
UIJLINGS
ET
AL
THE
DETECTION
RESULTS
WERE
RESCORED
USING
A
FULL
IMAGE
CONVOLUTIONAL
NETWORK
CLASSIFIER
ATTRACTED
THE
MOST
SUBMISSIONS
WITH
TEAMS
SUBMITTING
ENTRIES
COMPARED
TO
JUST
TEAMS
IN
A
INCREASE
IN
PARTICIPATION
AS
IN
ALMOST
ALL
TEAMS
USED
CONVOLUTIONAL
NEURAL
NETWORKS
AS
THE
BASIS
FOR
THEIR
SUBMISSION
SIGNIFICANT
PROGRESS
HAS
BEEN
MADE
IN
JUST
YEAR
IMAGE
CLASSIFICATION
ERROR
WAS
ALMOST
HALVED
SINCE
AND
OBJECT
DETECTION
MEAN
AVERAGE
PRECISION
ALMOST
DOUBLED
COMPARED
TO
PLEASE
REFER
TO
SECT
FOR
DETAILS
IN
TEAMSWERE
ALLOWED
TO
USE
OUTSIDE
DATA
FOR
TRAINING
THEIRMODELS
IN
THE
COMPETITION
SO
THERE
WERE
SIX
TRACKS
PROVIDED
AND
OUTSIDE
DATA
TRACKS
IN
EACH
OF
IMAGE
CLASSIFICATION
SINGLE
OBJECT
LOCALIZATION
AND
OBJECT
DETECTION
TASKS
THE
WINNING
IMAGE
CLASSIFICATION
WITH
PROVIDED
DATA
TEAM
WAS
GOOGLENET
WHICH
EXPLORED
AN
IMPROVED
CONVOLUTIONAL
NEURAL
NETWORK
ARCHITECTURE
COMBINING
THE
MULTI
SCALE
IDEA
WITH
INTUITIONS
GAINED
FROM
THE
HEBBIAN
PRINCIPLE
ADDITIONAL
DIMENSION
REDUCTION
LAYERS
ALLOWED
THEM
TO
INCREASE
BOTH
THE
DEPTH
AND
THE
WIDTH
OF
THE
NETWORK
SIGNIFICANTLY
WITHOUT
INCURRING
SIGNIFICANT
COMPUTATIONAL
OVERHEAD
IN
THE
IMAGE
CLASSIFICATIONWITH
EXTERNAL
DATA
TRACK
CASIAWSWON
BY
USING
WEAKLY
SUPERVISED
OBJECT
LOCALIZATION
FROM
ONLY
CLASSIFICATION
LABELS
TO
IMPROVE
IMAGE
CLASSIFICATION
MCG
TABLE
OMITS
TEAMS
WHICH
SUBMITTED
RESULTS
BUT
CHOSE
NOT
TO
OFFICIALLY
PARTICIPATE
IN
THE
CHALLENGE
INT
J
COMPUT
VIS
FIG
PERFORMANCE
OF
WINNING
ENTRIES
IN
THE
COMPETITIONS
IN
EACH
OF
THE
THREE
TASKS
DETAILS
ABOUT
THE
ENTRIES
AND
NUMERICAL
RESULTS
ARE
IN
SECT
THERE
IS
A
STEADY
REDUCTION
OF
ERROR
EVERY
YEAR
IN
OBJECT
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
AND
A
IMPROVEMENT
IN
MEAN
AVERAGE
PRECISION
IN
OBJECT
DETECTION
THERE
ARE
TWO
CONSIDERATIONS
IN
MAKING
THESE
COMPARISONS
THE
OBJECT
CATEGORIES
USED
IN
ISLVRC
CHANGED
BETWEEN
YEARS
AND
AND
BETWEEN
AND
HOWEVER
THE
LARGE
SCALE
OF
THE
DATA
OBJECT
CATEGORIES
MILLION
TRAINING
IMAGES
HAS
REMAINED
THE
SAME
MAKING
IT
POSSIBLE
TO
COMPARE
RESULTS
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
ENTRIES
SHOWN
HERE
USE
ONLY
PROVIDED
TRAINING
DATA
THE
SIZE
OF
THE
OBJECT
DETECTION
TRAINING
DATA
HAS
INCREASED
SIGNIFICANTLY
BETWEEN
YEARS
AND
SECT
SECTION
DISCUSSES
THE
RELATIVE
EFFECTS
OF
TRAINING
DATA
INCREASE
VERSUS
ALGORITHMIC
IMPROVEMENTS
REGION
PROPOSALS
ARBELÁEZ
ET
AL
PRETRAINED
ON
PASCAL
VOC
DATA
ARE
USED
TO
EXTRACT
REGION
PROPOSALS
REGIONS
ARE
REPRESENTED
USING
CONVOLUTIONAL
NETWORKS
AND
A
MULTIPLE
INSTANCE
LEARNING
STRATEGY
IS
USED
TO
LEARN
WEAKLY
SUPERVISED
OBJECT
DETECTORS
TO
REPRESENT
THE
IMAGE
IN
THE
SINGLE
OBJECT
LOCALIZATION
WITH
PROVIDED
DATA
TRACK
THE
WINNING
TEAM
WAS
VGG
WHICH
EXPLORED
THE
EFFECT
OF
CONVOLUTIONAL
NEURAL
NETWORK
DEPTH
ON
ITS
ACCURACY
BY
USING
THREE
DIFFERENT
ARCHITECTURES
WITH
UP
TO
WEIGHT
LAYERS
WITH
RECTIFIED
LINEAR
UNIT
NON
LINEARITY
BUILDING
OFF
OF
THE
IMPLEMENTATION
OF
CAFFE
JIA
FOR
LOCALIZATION
THEY
USED
PER
CLASS
BOUNDING
BOX
REGRESSION
SIMILAR
TO
OVERFEAT
SERMANET
ET
AL
IN
THE
SINGLE
OBJECT
LOCALIZATION
WITH
EXTERNAL
DATA
TRACK
ADOBE
USED
ADDITIONAL
IMAGENET
CLASSES
TO
TRAIN
THE
CLASSIFIERS
IN
AN
INTEGRATED
CONVOLUTIONAL
NEURAL
NETWORK
FRAMEWORK
FOR
BOTH
CLASSIFICATION
AND
LOCALIZATION
WITH
BOUNDING
BOX
REGRESSION
AT
TEST
TIME
THEY
USED
K
MEANS
TO
FIND
BOUNDING
BOX
CLUSTERS
AND
RANK
THE
CLUSTERS
ACCORDING
TO
THE
CLASSIFICATION
SCORES
IN
THE
OBJECT
DETECTION
WITH
PROVIDED
DATA
TRACK
THE
WINNING
TEAM
NUS
USED
THE
RCNN
FRAMEWORK
GIRSHICK
ET
AL
WITH
THE
NETWORK
IN
NETWORK
METHOD
LIN
ET
AL
AND
IMPROVEMENTS
OF
HOWARD
GLOBAL
CONTEXT
INFORMATION
WAS
INCORPORATED
FOLLOWING
CHEN
ET
AL
IN
THE
OBJECT
DETECTION
WITH
EXTERNAL
DATA
TRACK
THE
WINNING
TEAM
WAS
GOOGLENET
WHICH
ALSO
WON
IMAGE
CLASSIFICATION
WITH
PROVIDED
DATA
IT
IS
TRULY
REMARKABLE
THAT
THE
SAME
TEAM
WAS
ABLE
TO
WIN
AT
BOTH
IMAGE
CLASSIFICATION
AND
OBJECT
DETECTION
INDICATING
THAT
THEIR
METHODS
ARE
ABLE
TO
NOT
ONLY
CLASSIFY
THE
IMAGE
BASED
ON
SCENE
INFORMATION
BUT
ALSO
ACCURATELY
LOCALIZE
MULTIPLE
OBJECT
INSTANCES
JUST
LIKE
MOST
TEAMS
PARTICIPATING
IN
THIS
TRACK
GOOGLENET
USED
THE
IMAGE
CLASSIFICATION
DATASET
AS
EXTRA
TRAINING
DATA
LARGE
SCALE
ALGORITHMIC
INNOVATIONS
ILSVRC
OVER
THE
PAST
YEARS
HAS
PAVED
THE
WAY
FOR
SEVERAL
BREAKTHROUGHS
IN
COMPUTER
VISION
THE
FIELD
OF
CATEGORICAL
OBJECT
RECOGNITION
HAS
DRAMATICALLY
EVOLVED
IN
THE
LARGE
SCALE
SETTING
SECTION
DOCUMENTS
THE
PROGRESS
STARTING
FROM
CODED
SIFT
FEATURES
AND
EVOLVING
TO
LARGE
SCALE
CONVOLUTIONAL
NEURAL
NETWORKS
DOMINATING
AT
ALL
THREE
TASKS
OF
IMAGE
CLASSIFICATION
SINGLE
OBJECT
LOCALIZATION
AND
OBJECT
DETECTION
WITH
THE
AVAILABILITY
OF
SO
MUCH
TRAINING
DATA
ALONG
WITH
AN
EFFICIENT
ALGORITHMIC
IMPLEMENTATION
AND
GPU
COMPUTING
RESOURCES
IT
BECAME
POSSIBLE
TO
LEARN
NEURAL
NETWORKS
DIRECTLY
FROM
THE
IMAGE
DATA
WITHOUT
NEEDING
TO
CREATE
MULTI
STAGE
HAND
TUNED
PIPELINES
OF
EXTRACTED
FEATURES
AND
DISCRIMINATIVE
CLASSIFIERS
THE
MAJOR
BREAKTHROUGH
CAME
IN
WITH
THE
WIN
OF
THE
SUPERVISION
TEAM
ON
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
KRIZHEVSKY
ET
AL
AND
BY
ALL
OF
THE
TOP
CONTESTANTS
WERE
RELYING
HEAVILY
ON
CONVOLUTIONAL
NEURAL
NETWORKS
FURTHER
OVER
THE
PAST
FEW
YEARS
THERE
HAS
BEEN
A
LOT
OF
FOCUS
ON
LARGE
SCALE
RECOGNITION
IN
THE
COMPUTER
VISION
COMMUNITY
BEST
PAPER
AWARDS
AT
TOP
VISION
CONFERENCES
IN
WERE
AWARDED
TO
LARGE
SCALE
RECOGNITION
METHODS
AT
CVPR
TO
FAST
ACCURATE
DETECTION
OF
OBJECT
CLASSES
ON
A
SINGLE
MACHINE
DEAN
ET
AL
AND
AT
ICCV
TO
FROM
LARGE
SCALE
IMAGE
CATEGORIZATION
TO
ENTRY
LEVEL
CATEGORIES
ORDONEZ
ET
AL
ADDITIONALLY
SEVERAL
INFLUENTIAL
LINES
OF
RESEARCH
HAVE
EMERGED
SUCH
AS
LARGE
SCALE
WEAKLY
SUPERVISED
LOCALIZATION
WORK
OF
KUETTEL
ET
AL
WHICH
WAS
AWARDED
THE
BEST
PAPER
AWARD
IN
ECCV
AND
LARGE
SCALE
ZERO
SHOT
LEARNING
E
G
FROME
ET
AL
INT
J
COMPUT
VIS
RESULTS
AND
ANALYSIS
IMPROVEMENTS
OVER
THE
YEARS
STATE
OF
THE
ART
ACCURACY
HAS
IMPROVED
SIGNIFICANTLY
FROM
TO
SHOWCASING
THE
MASSIVE
PROGRESS
THAT
HAS
BEEN
MADE
IN
LARGE
SCALE
OBJECT
RECOGNITION
OVER
THE
PAST
YEARS
THE
PERFORMANCE
OF
THE
WINNING
ILSVRC
ENTRIES
FOR
EACH
TASK
AND
EACH
YEAR
ARE
SHOWN
IN
FIG
THE
IMPROVEMENT
OVER
THE
YEARS
IS
CLEARLY
VISIBLE
IN
THIS
SECTION
WE
QUANTIFY
AND
ANALYZE
THIS
IMPROVEMENT
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
IMPROVEMENT
OVER
THE
YEARS
THERE
HAS
BEEN
A
REDUCTION
IN
IMAGE
CLASSIFICATION
ERROR
FROM
TO
AND
A
REDUCTION
IN
SINGLE
OBJECT
LOCALIZATION
ERROR
FROM
TO
SINCE
THE
BEGINNING
OF
THE
CHALLENGE
FOR
CONSISTENCY
HERE
WE
CONSIDER
ONLY
TEAMS
THAT
USE
THE
PROVIDED
TRAINING
DATA
EVEN
THOUGH
THE
EXACT
OBJECT
CATEGORIES
HAVE
CHANGED
SECT
THE
LARGE
SCALE
OF
THE
DATASET
HAS
REMAINED
THE
SAME
TABLE
MAKING
THE
RESULTS
COMPARABLE
ACROSS
THE
YEARS
THE
DATASET
HAS
NOT
CHANGED
SINCE
AND
THERE
HAS
BEEN
A
REDUCTION
IN
IMAGE
CLASSIFICATION
ERROR
FROM
TO
AND
A
IN
SINGLE
OBJECT
LOCALIZATION
ERROR
FROM
TO
IN
THE
PAST
YEARS
OBJECT
DETECTION
IMPROVEMENT
OVER
THE
YEARS
OBJECT
DETECTION
ACCURACY
AS
MEASURED
BY
THE
MEAN
AVERAGE
PRECISION
MAP
HAS
INCREASED
SINCE
THE
INTRODUCTION
OF
THIS
TASK
FROM
MAP
IN
TO
MAP
IN
HOWEVER
THESE
RESULTS
ARE
NOT
DIRECTLY
COMPARABLE
FOR
TWO
REASONS
FIRST
THE
SIZE
OF
THE
OBJECT
DETECTION
TRAINING
DATA
HAS
INCREASED
SIGNIFICANTLY
FROM
TO
SECT
SECOND
THE
MAP
RESULT
WAS
OBTAINED
WITH
THE
ADDITION
OF
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TRAINING
DATA
HERE
WE
ATTEMPT
TO
UNDERSTAND
THE
RELATIVE
EFFECTS
OF
THE
TRAINING
SET
SIZE
INCREASE
VERSUS
ALGORITHMIC
IMPROVEMENTS
ALL
MODELS
ARE
EVALUATED
ON
THE
SAME
OBJECT
DETECTION
TEST
SET
FIRST
WE
QUANTIFY
THE
EFFECTS
OF
INCREASING
DETECTION
TRAINING
DATA
BETWEEN
THE
TWO
CHALLENGES
BY
COMPARING
THE
SAME
MODEL
TRAINED
ON
DETECTION
DATA
VERSUS
DETECTION
DATA
THE
UVA
TEAM
FRAMEWORK
FROM
ACHIEVED
WITH
DATA
TABLE
AND
WITH
DATA
AND
NO
OTHER
MODIFICATIONS
THE
ABSOLUTE
INCREASE
IN
MAPWAS
THE
RCNN
MODEL
ACHIEVED
MAP
WITH
DETECTION
PLUS
IMAGE
CLASSIFICATION
DATA
GIRSHICK
ET
AL
AND
PERSONAL
COMMUNICATION
WITH
MEMBERS
OF
THE
UVA
TEAM
MAP
WITH
DETECTION
PLUS
IMAGE
CLASSIFICATION
DATA
BERKELEY
TEAM
IN
TABLE
THE
ABSOLUTE
INCREASE
IN
MAP
BY
EXPANDING
DETECTION
DATA
TO
WAS
SECOND
WE
QUANTIFY
THE
EFFECTS
OF
ADDING
IN
THE
EXTERNAL
DATA
FOR
TRAINING
OBJECT
DETECTION
MODELS
THE
NEC
MODEL
IN
ACHIEVED
MAP
TRAINED
ON
DETECTION
DATA
ALONE
AND
MAP
TRAINED
ON
DETECTION
PLUS
CLASSIFICATION
DATA
TABLE
THE
ABSOLUTE
INCREASE
IN
MAP
WAS
THE
UVA
TEAM
BEST
ENTRY
IN
ACHIEVED
MAP
TRAINED
ON
DETECTION
DATA
AND
MAP
TRAINED
ON
DETECTION
PLUS
CLASSIFICATION
DATA
THE
ABSOLUTE
INCREASE
IN
MAP
WAS
THUS
WE
CONCLUDE
BASED
ON
THE
EVIDENCE
SO
FAR
THAT
EXPANDING
THE
SET
TO
THE
SET
AS
WELL
AS
ADDING
IN
ADDITIONAL
TRAINING
DATA
FROM
THE
CLASSIFICATION
TASK
ALL
ACCOUNT
FOR
APPROXIMATELY
IN
ABSOLUTE
MAP
IMPROVEMENT
FOR
THE
MODELS
FOR
COMPARISON
WE
CAN
ALSO
ATTEMPT
TO
QUANTIFY
THE
EFFECT
OF
ALGORITHMIC
INNOVATION
THE
UVA
TEAM
FRAMEWORK
ACHIEVED
MAP
ON
DATA
AS
MENTIONED
ABOVE
AND
THEIR
IMPROVED
METHOD
IN
OBTAINED
MAP
TABLE
THIS
IS
ABSOLUTE
INCREASE
IN
MAP
OVER
JUST
YEAR
FROM
ALGORITHMIC
INNOVATION
ALONE
IN
SUMMARY
WE
CONCLUDE
THAT
THE
ABSOLUTE
INCREASE
IN
MAP
BETWEEN
WINNING
ENTRIES
OF
MAP
AND
OF
MAP
IS
THE
RESULT
OF
IMPRESSIVE
ALGORITHMIC
INNOVATION
AND
NOT
JUST
A
CONSEQUENCE
OF
INCREASED
TRAINING
DATA
HOWEVER
INCREASING
THE
OBJECT
DETECTION
TRAINING
DATASET
FURTHER
IS
LIKELY
TO
PRODUCE
ADDITIONAL
IMPROVEMENTS
IN
DETECTION
ACCURACY
FOR
CURRENT
ALGORITHMS
STATISTICAL
SIGNIFICANCE
ONE
IMPORTANT
QUESTION
TO
ASK
IS
WHETHER
RESULTS
OF
DIFFERENT
SUBMISSIONS
TO
ILSVRC
ARE
STATISTICALLY
SIGNIFICANTLY
DIFFERENT
FROM
EACH
OTHER
GIVEN
THE
LARGE
SCALE
IT
IS
NO
SURPRISE
THAT
EVEN
MINOR
DIFFERENCES
IN
ACCURACY
ARE
STATISTICALLY
SIGNIFICANT
WE
SEEK
TO
QUANTIFY
EXACTLY
HOWMUCH
OF
A
DIFFERENCE
IS
ENOUGH
FOLLOWING
THE
STRATEGY
EMPLOYED
BY
PASCALVOC
EVERINGHAM
ET
AL
FOR
EACH
METHOD
WE
OBTAIN
A
CONFIDENCE
INTERVAL
OF
ITS
SCORE
USING
BOOTSTRAP
SAMPLING
DURING
EACH
BOOTSTRAP
ROUND
WE
SAMPLE
N
IMAGES
WITH
REPLACEMENT
FROM
ALL
THE
AVAILABLE
N
TEST
IMAGES
AND
EVALUATE
THE
PERFORMANCE
OF
THE
ALGORITHM
ON
THOSE
SAMPLED
IMAGES
THIS
CAN
BE
DONE
VERY
EFFICIENTLY
BY
PRECOMPUTING
THE
ACCURACY
ON
EACH
IMAGE
GIVEN
THE
RESULTS
OF
ALL
THE
BOOTSTRAPPING
ROUNDS
WE
DISCARD
THE
LOWER
AND
THE
UPPER
Α
FRACTION
THE
RANGE
OF
THE
REMAINING
RESULTS
REPRESENTS
THE
CONFIDENCE
INTERVAL
WE
RUN
A
LARGE
NUMBER
OF
BOOTSTRAPPING
ROUNDS
FROM
UNTIL
INT
J
COMPUT
VIS
TABLE
WE
USE
BOOTSTRAPPING
TO
CONSTRUCT
EACH
ILSVRC
TASK
IN
YEAR
CODENAME
ERROR
CONF
INT
IMAGE
CLASSIFICATION
GOOGLENET
VGG
MSRA
AHOWARD
DEEPERVISION
CLARIFAI
CASIAWS
TRIMPS
ADOBE
CLARIFAI
NUS
ZF
AHOWARD
OVERFEAT
ORANGE
SUPERVISION
SUPERVISION
ISI
VGG
XRCE
UVA
SINGLE
OBJECT
LOCALIZATION
VGG
GOOGLENET
OVERFEAT
ADOBE
SYSU
SUPERVISION
MIL
SUPERVISION
MSRA
TRIMPS
ORANGE
VGG
VGG
ISI
CASIAWS
OBJECT
DETECTION
GOOGLENET
CUHK
DEEPINSIGHT
NUS
UVA
MSRA
TABLE
CONTINUED
YEAR
CODENAME
AP
CONF
INT
BERKELEY
UVA
SOUTHEAST
HKUST
UVA
NEC
NEC
OVERFEAT
TORONTO
SYSU
UCLA
MEANS
THE
ENTRY
USED
EXTERNAL
TRAINING
DATA
THE
WINNERS
USING
THE
PROVIDED
DATA
FOR
EACH
TRACK
AND
EACH
YEAR
ARE
BOLDED
THE
DIFFERENCE
BETWEEN
THE
WINNING
METHOD
AND
THE
RUNNER
UP
EACH
YEAR
IS
SIGNIFICANT
EVEN
AT
THE
LEVEL
CONVERGENCE
TABLE
SHOWS
THE
RESULTS
OF
THE
TOP
ENTRIES
TO
EACH
TASK
OF
THE
WINNING
METHODS
ARE
STATISTICALLY
SIGNIFICANTLY
DIFFERENT
FROM
THE
OTHER
METHODS
EVEN
AT
THE
LEVEL
CURRENT
STATE
OF
CATEGORICAL
OBJECT
RECOGNITION
BESIDES
LOOKING
AT
JUST
THE
AVERAGE
ACCURACY
ACROSS
HUNDREDS
OF
OBJECT
CATEGORIES
AND
TENS
OF
THOUSANDS
OF
IMAGES
WE
CAN
ALSO
DELVE
DEEPER
TO
UNDERSTAND
WHERE
MISTAKES
ARE
BEING
MADE
AND
WHERE
RESEARCHERS
EFFORTS
SHOULD
BE
FOCUSED
TO
EXPEDITE
PROGRESS
TO
DO
SO
IN
THIS
SECTION
WE
WILL
BE
ANALYZING
AN
OPTIMISTIC
MEASUREMENT
OF
STATE
OF
THE
ART
RECOGNITION
PERFORMANCE
INSTEAD
OF
FOCUSING
ON
THE
DIFFERENCES
IN
INDIVIDUAL
ALGORITHMS
FOR
EACH
TASK
AND
EACH
OBJECT
CLASS
WE
COMPUTE
THE
BEST
PERFORMANCE
OF
ANY
ENTRY
SUBMITTED
TO
ANY
INCLUDING
METHODS
USING
ADDITIONAL
TRAINING
DATA
SINCE
THE
TEST
SETS
HAVE
REMAINED
THE
SAME
WE
CAN
DIRECTLY
COMPARE
ALL
THE
ENTRIES
IN
THE
PAST
YEARS
TO
OBTAIN
THE
MOST
OPTIMISTIC
MEASUREMENT
OF
STATE
OF
THE
ART
ACCURACY
ON
EACH
CATEGORY
FOR
CONSISTENCY
WITH
THE
OBJECT
DETECTION
METRIC
HIGHER
IS
BETTER
IN
THIS
SECTION
WE
WILL
BE
USING
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
ACCURACY
INSTEAD
OF
ERROR
WHERE
ACCURACY
ERROR
RANGE
OF
ACCURACY
ACROSS
OBJECT
CLASSES
FIGURE
SHOWS
THE
DISTRIBUTION
OF
ACCURACY
ACHIEVED
BY
THE
OPTIMISTIC
MODELS
ACROSS
THE
OBJECT
CATEGORIES
THE
IMAGE
CLASSIFICATION
MODEL
ACHIEVES
ACCURACY
ON
AVERAGE
INT
J
COMPUT
VIS
FIG
FOR
EACH
OBJECT
CLASS
WE
CONSIDER
THE
BEST
PERFORMANCE
OF
ANY
ENTRY
SUBMITTED
TO
INCLUDING
ENTRIES
USING
ADDITIONAL
TRAINING
DATA
THE
PLOTS
SHOWTHE
DISTRIBUTION
OF
THESE
OPTIMISTIC
PER
CLASS
RESULTS
PERFORMANCE
IS
MEASURED
AS
ACCURACY
FOR
IMAGE
CLASSIFICATION
LEFT
AND
FOR
SINGLE
OBJECT
LOCALIZATION
MIDDLE
AND
AS
AVERAGE
PRECISION
FOR
OBJECT
DETECTION
RIGHT
WHILE
THE
RESULTS
ARE
VERY
PROMISING
IN
IMAGE
CLASSIFICATION
THE
ILSVRC
DATASETS
ARE
FAR
FROM
SATURATED
MANY
OBJECT
CLASSES
CONTINUE
TO
BE
CHALLENGING
FOR
CURRENT
ALGORITHMS
OR
ERROR
BUT
THERE
REMAINS
A
ABSOLUTE
DIFFERENCE
INACCURACY
BETWEEN
THE
MOST
AND
LEAST
ACCURATE
OBJECT
CLASS
THE
SINGLE
OBJECT
LOCALIZATION
MODEL
ACHIEVES
ACCURACY
ON
AVERAGE
OR
ERROR
WITH
A
RANGE
IN
ACCURACY
ACROSS
THE
OBJECT
CLASSES
THE
OBJECT
DETECTION
MODEL
ACHIEVES
AVERAGE
PRECISION
WITH
AN
RANGE
ACROSS
THE
OBJECT
CLASSES
IT
IS
CLEAR
THAT
THE
ILSVRC
DATASET
IS
FAR
FROM
SATURATED
PERFORMANCE
ON
MANY
CATEGORIES
HAS
REMAINED
POOR
DESPITE
THE
STRONG
OVERALL
PERFORMANCE
OF
THE
MODELS
QUALITATIVE
EXAMPLES
OF
EASY
AND
HARD
CLASSES
FIGURES
AND
SHOW
THE
EASIEST
AND
HARDEST
CLASSES
FOR
EACH
TASK
I
E
CLASSESWITH
THE
BEST
ANDWORST
RESULTS
OBTAINED
WITH
THE
OPTIMISTIC
MODELS
FOR
IMAGE
CLASSIFICATION
OUT
OF
OBJECT
CLASSES
HAVE
IMAGE
CLASSIFICATION
ACCURACY
ACCORDING
TO
THE
OPTIMISTIC
ESTIMATE
FIGURE
TOP
SHOWS
A
RANDOM
SET
OF
OF
THEM
THEY
CONTAIN
A
VARIETY
OF
CLASSES
SUCH
AS
MAMMALS
LIKE
RED
FOX
AND
ANIMALS
WITH
DISTINCTIVE
STRUCTURES
LIKE
STINGRAY
THE
HARDEST
CLASSES
IN
THE
IMAGE
CLASSIFICATION
TASK
WITH
ACCURACY
AS
LOW
AS
INCLUDE
METALLIC
AND
SEE
THROUGH
MAN
MADE
OBJECTS
SUCH
AS
HOOK
AND
WATER
BOTTLE
THEMATERIAL
VELVET
AND
THE
HIGHLY
VARIED
SCENE
CLASS
RESTAURANT
FOR
SINGLE
OBJECT
LOCALIZATION
THE
EASIEST
CLASSES
WITH
ACCURACY
ARE
ALL
MAMMALS
AND
BIRDS
THE
HARDEST
CLASSES
INCLUDE
METALLIC
MAN
MADE
OBJECTS
SUCH
AS
LETTER
OPENER
AND
LADLE
PLUS
THIN
STRUCTURES
SUCH
AS
POLE
AND
SPACEBAR
AND
HIGHLY
VARIED
CLASSES
SUCH
AS
WING
THE
MOST
CHALLENGING
CLASS
SPACEBAR
HAS
A
ONLY
LOCALIZATION
ACCURACY
OBJECT
DETECTION
RESULTS
ARE
SHOWN
IN
FIG
THE
EASIEST
CLASSES
ARE
LIVING
ORGANISMS
SUCH
AS
DOG
AND
TIGER
PLUS
BASKETBALL
AND
VOLLEYBALL
WITH
DISTINCTIVE
SHAPE
AND
COLOR
AND
A
SOMEWHAT
SURPRISING
SNOWPLOW
THE
EASIEST
CLASS
BUTTERFLY
IS
NOT
YET
PERFECTLY
DETECTED
BUT
IS
VERY
CLOSE
WITH
AP
THE
HARDEST
CLASSES
ARE
AS
EXPECTED
SMALL
THIN
OBJECTS
SUCH
AS
FLUTE
AND
NAIL
AND
THE
HIGHLY
VARIED
LAMP
AND
BACKPACK
CLASSES
WITH
AS
LOW
AS
AP
PER
CLASS
ACCURACY
AS
A
FUNCTION
OF
IMAGE
PROPERTIES
WE
NOW
TAKE
A
CLOSER
LOOK
AT
THE
IMAGE
PROPERTIES
TO
TRY
TO
UNDERSTAND
WHY
CURRENT
ALGORITHMS
PERFORM
WELL
ON
SOME
OBJECT
CLASSES
BUT
NOT
OTHERS
ONE
HYPOTHESIS
IS
THAT
VARIATION
IN
ACCURACY
COMES
FROM
THE
FACT
THAT
INSTANCES
OF
SOME
CLASSES
TEND
TO
BE
MUCH
SMALLER
IN
IMAGES
THAN
INSTANCES
OF
OTHER
CLASSES
AND
SMALLER
OBJECTS
MAY
BE
HARDER
FOR
COMPUTERS
TO
RECOGNIZE
IN
THIS
SECTION
WE
ARGUE
THAT
WHILE
ACCURACY
IS
CORRELATED
WITH
OBJECT
SCALE
IN
THE
IMAGE
NOT
ALL
VARIATION
IN
ACCURACY
CAN
BE
ACCOUNTED
FOR
BY
SCALE
ALONE
FOR
EVERY
OBJECT
CLASS
WE
COMPUTE
ITS
AVERAGE
SCALE
OR
THE
AVERAGE
FRACTION
OF
IMAGE
AREA
OCCUPIED
BY
AN
INSTANCE
OF
THE
OBJECT
CLASS
ON
THE
VALIDATION
SET
SINCE
THE
IMAGES
AND
OBJECT
CLASSES
IN
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
ARE
THE
SAME
WE
USE
THE
BOUNDING
BOX
ANNOTATIONS
OF
THE
SINGLE
OBJECT
LOCALIZATION
DATASET
FOR
BOTH
TASKS
IN
THAT
DATASET
THE
OBJECT
CLASSES
RANGE
FROM
SWIMMING
TRUNKS
WITH
SCALE
OF
TO
SPIDER
WEB
WITH
SCALE
OF
IN
THE
OBJECT
DETECTION
VALIDATION
DATASET
THE
OBJECT
CLASSES
RANGE
FROM
SUNGLASSES
WITH
SCALE
OF
TO
SOFA
WITH
SCALE
OF
FIGURE
SHOWS
THE
PERFORMANCE
OF
THE
OPTIMISTIC
METHOD
AS
A
FUNCTION
OF
THE
AVERAGE
SCALE
OF
THE
OBJECT
IN
THE
IMAGE
EACH
DOT
CORRESPONDS
TO
ONE
OBJECT
CLASS
WE
OBSERVE
A
VERY
WEAK
POSITIVE
CORRELATION
BETWEEN
OBJECT
SCALE
AND
IMAGE
CLASSIFICATION
ACCURACY
Ρ
FOR
SINGLE
OBJECT
LOCALIZATION
AND
OBJECT
DETECTION
THE
CORRELATION
IS
STRONGER
INT
J
COMPUT
VIS
FIG
FOR
EACH
OBJECT
CATEGORY
WE
TAKE
THE
BEST
PERFORMANCE
OF
ANY
ENTRY
SUBMITTED
TO
INCLUDING
ENTRIES
USING
ADDITIONAL
TRAINING
DATA
GIVEN
THESE
OPTIMISTIC
RESULTS
WE
SHOW
THE
EASIEST
AND
HARDER
CLASSES
FOR
EACH
TASK
THE
NUMBERS
IN
PARENTHESES
INDICATE
CLASSIFICATION
AND
LOCALIZATION
ACCURACY
FOR
IMAGE
CLASSIFICATION
THE
EASIEST
CLASSES
ARE
RANDOMLY
SELECTED
FROM
AMONG
OBJECT
CLASSES
WITH
ACCURACY
OBJECT
DETECTION
RESULTS
ARE
SHOWN
IN
FIG
AT
Ρ
AND
Ρ
RESPECTIVELY
IT
IS
CLEAR
THAT
NOT
ALL
VARIATION
IN
ACCURACY
CAN
BE
ACCOUNTED
FOR
BY
SCALE
ALONE
NEVERTHELESS
IN
THE
NEXT
SECTION
WE
WILL
NORMALIZE
FOR
OBJECT
SCALE
TO
ENSURE
THAT
THIS
FACTOR
IS
NOT
AFFECTING
OUR
CONCLUSIONS
PER
CLASS
ACCURACY
AS
A
FUNCTION
OF
OBJECT
PROPERTIES
BESIDES
CONSIDERING
IMAGE
LEVEL
PROPERTIES
WE
CAN
ALSO
OBSERVE
HOW
ACCURACY
CHANGES
AS
A
FUNCTION
OF
INTRINSIC
INT
J
COMPUT
VIS
FIG
FOR
EACH
OBJECT
CATEGORY
WE
TAKE
THE
BEST
PERFORMANCE
OF
ANY
ENTRY
SUBMITTED
TO
INCLUDING
ENTRIES
USING
ADDITIONAL
TRAINING
DATA
GIVEN
THESE
OPTIMISTIC
RESULTS
WE
SHOW
THE
EASIEST
AND
HARDER
CLASSES
FOR
THE
OBJECT
DETECTION
TASK
I
E
CLASSES
WITH
BEST
AND
WORST
RESULTS
THE
NUMBERS
IN
PARENTHESES
INDICATE
AVERAGE
PRECISION
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
RESULTS
ARE
SHOWN
IN
FIG
FIG
PERFORMANCE
OF
THE
OPTIMISTIC
METHOD
AS
A
FUNCTION
OF
OBJECT
SCALE
IN
THE
IMAGE
ON
EACH
TASK
EACH
DOT
CORRESPONDS
TO
ONE
OBJECT
CLASS
AVERAGE
SCALE
X
AXIS
IS
COMPUTED
AS
THE
AVERAGE
FRACTION
OF
THE
IMAGE
AREA
OCCUPIED
BY
AN
INSTANCE
OF
THAT
OBJECT
CLASS
ON
THE
VALIDATION
SET
OPTIMISTIC
PERFORMANCE
Y
AXIS
CORRESPONDS
TO
THE
BEST
PERFORMANCE
ON
THE
TEST
SET
OF
ANY
ENTRY
SUBMITTED
TO
INCLUDING
ENTRIES
WITH
ADDITIONAL
TRAINING
DATA
THE
TEST
SET
HAS
REMAINED
THE
SAME
OVER
THESE
YEARS
WE
SEE
THAT
ACCURACY
TENDS
TO
INCREASE
AS
THE
OBJECTS
GET
BIGGER
IN
THE
IMAGE
HOWEVER
IT
IS
CLEAR
THAT
FAR
FROM
ALL
THE
VARIATION
IN
ACCURACY
ON
THESE
CLASSES
CAN
BE
ACCOUNTED
FOR
BY
SCALE
ALONE
OBJECT
PROPERTIES
WE
DEFINE
THREE
PROPERTIES
INSPIRED
BY
HUMAN
VISION
THE
REAL
WORLD
SIZE
OF
THE
OBJECT
WHETHER
IT
DEFORMABLE
WITHIN
INSTANCE
AND
HOW
TEXTURED
IT
IS
FOR
EACH
PROPERTY
THE
OBJECT
CLASSES
ARE
ASSIGNED
TO
ONE
OF
A
FEW
BINS
LISTED
BELOW
THESE
PROPERTIES
ARE
ILLUSTRATED
IN
FIG
HUMAN
SUBJECTS
ANNOTATED
EACH
OF
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
OBJECT
CLASSES
FROM
WITH
THESE
PROPERTIES
RUSSAKOVSKY
ET
AL
BY
CONSTRUCTION
SEE
SECT
EACH
OF
THE
OBJECT
DETECTION
CLASSES
IS
EITHER
ALSO
ONE
OF
OBJECT
CLASSES
OR
IS
AN
ANCESTOR
OF
ONE
OR
MORE
OF
THE
CLASSES
IN
THE
IMAGENET
HIERARCHY
TO
COMPUTE
THE
VALUES
OF
THE
PROPERTIES
FOR
EACH
OBJECT
DETECTION
CLASS
WE
SIMPLY
AVERAGE
THE
ANNOTATED
VALUES
OF
THE
DESCENDANT
CLASSES
INT
J
COMPUT
VIS
IN
THIS
SECTION
WE
DRAW
THE
FOLLOWING
CONCLUSIONS
ABOUT
STATE
OF
THE
ART
RECOGNITION
ACCURACY
AS
A
FUNCTION
OF
THESE
OBJECT
PROPERTIES
REAL
WORLD
SIZE
XS
FOR
EXTRA
SMALL
E
G
NAIL
SMALL
E
G
FOX
MEDIUM
E
G
BOOKCASE
LARGE
E
G
CAR
OR
XL
FOR
EXTRA
LARGE
E
G
CHURCH
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
OPTIMISTIC
MODELS
PERFORMS
BETTER
ON
LARGE
AND
EXTRA
LARGE
REAL
WORLD
OBJECTS
THAN
ON
SMALLER
ONES
THE
OPTIMISTIC
OBJECT
DETECTIONMODEL
SURPRISINGLY
PERFORMS
BETTER
ON
EXTRA
SMALL
OBJECTS
THAN
ON
SMALL
OR
MEDIUM
ONES
DEFORMABILITY
WITHIN
INSTANCE
RIGID
E
G
MUG
OR
DEFORMABLE
E
G
WATER
SNAKE
THE
OPTIMISTIC
MODEL
ON
EACH
OF
THE
THREE
TASKS
PERFORMS
STATISTICALLY
SIGNIFICANTLY
BETTER
ON
DEFORMABLE
OBJECTS
COMPARED
TO
RIGID
ONES
HOWEVER
THIS
EFFECT
DISAPPEARS
WHEN
ANALYZING
NATURAL
OBJECTS
SEPARATELY
FROM
MAN
MADE
OBJECTS
AMOUNT
OF
TEXTURE
NONE
E
G
PUNCHING
BAG
LOW
E
G
HORSE
MEDIUM
E
G
SHEEP
OR
HIGH
E
G
HONEYCOMB
THE
OPTIMISTIC
MODEL
ON
EACH
OF
THE
THREE
TASKS
IS
SIGNIFICANTLY
BETTER
ON
OBJECTS
WITH
AT
LEAST
LOW
LEVEL
OF
TEXTURE
COMPARED
TO
UNTEXTURED
OBJECTS
THESE
AND
OTHER
FINDINGS
ARE
JUSTIFIED
AND
DISCUSSED
IN
DETAIL
BELOW
EXPERIMENTAL
SETUP
WE
OBSERVED
IN
SECT
THAT
OBJECTS
THAT
OCCUPY
A
LARGER
AREA
IN
THE
IMAGE
TEND
TO
BE
SOMEWHAT
EASIER
TO
RECOGNIZE
TO
MAKE
SURE
THAT
DIFFERENCES
IN
OBJECT
SCALE
ARE
NOT
INFLUENCING
RESULTS
IN
THIS
SECTION
WE
NORMALIZE
EACH
BIN
BY
OBJECT
SCALE
WE
DISCARD
OBJECT
CLASSES
WITH
THE
LARGEST
SCALES
FROM
EACH
BIN
AS
NEEDED
UNTIL
THE
AVERAGE
OBJECT
SCALE
OF
OBJECT
CLASSES
IN
EACH
BIN
ACROSS
ONE
PROPERTY
IS
THE
SAME
OR
AS
CLOSE
AS
POSSIBLE
FOR
REAL
WORLD
SIZE
PROPERTY
FOR
EXAMPLE
THE
RESULTING
AVERAGE
OBJECT
SCALE
IN
EACH
OF
THE
FIVE
BINS
IS
IN
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
TASKS
AND
IN
THE
OBJECT
DETECTION
TASK
FIGURE
SHOWS
THE
AVERAGE
PERFORMANCE
OF
THE
OPTIMISTIC
MODEL
ON
THE
OBJECT
CLASSES
THAT
FALL
INTO
EACH
BIN
FOR
EACH
PROPERTY
WE
ANALYZE
THE
RESULTS
IN
DETAIL
BELOW
UNLESS
OTHERWISE
SPECIFIED
THE
REPORTED
ACCURACIES
BELOW
ARE
AFTER
THE
SCALE
NORMALIZATION
STEP
TO
EVALUATE
STATISTICAL
SIGNIFICANCE
WE
COMPUTE
THE
CONFIDENCE
INTERVAL
FOR
ACCURACY
USING
BOOTSTRAPPING
WE
REPEATEDLY
SAMPLE
THE
OBJECT
CLASSES
WITHIN
THE
BIN
WITH
FOR
RIGID
VERSUS
DEFORMABLE
OBJECTS
THE
AVERAGE
SCALE
IN
EACH
BIN
IS
FOR
CLASSIFICATION
AND
LOCALIZATION
AND
FOR
DETECTION
FOR
TEXTURE
THE
AVERAGE
SCALE
IN
EACH
OF
THE
FOUR
BINS
IS
FOR
CLASSIFICATION
AND
LOCALIZATION
AND
FOR
DETECTION
REPLACEMENT
DISCARD
SOME
AS
NEEDED
TO
NORMALIZE
BY
SCALE
AND
COMPUTE
THE
AVERAGE
ACCURACY
OF
THE
OPTIMISTIC
MODEL
ON
THE
REMAINING
CLASSES
WE
REPORT
THE
CONFIDENCE
INTERVALS
CI
IN
PARENTHESES
REAL
WORLD
SIZE
IN
FIG
TOP
LEFT
WE
OBSERVE
THAT
IN
THE
IMAGE
CLASSIFICATION
TASK
THE
OPTIMISTIC
MODEL
TENDS
TO
PERFORM
SIGNIFICANTLY
BETTER
ON
OBJECTS
WHICH
ARE
LARGER
IN
THE
REAL
WORLD
THE
CLASSIFICATION
ACCURACY
IS
ON
XS
ANDMOBJECTS
COMPARED
TO
ON
L
AND
ONXL
OBJECTS
SINCE
THIS
IS
AFTER
NORMALIZING
FOR
SCALE
AND
THUS
CAN
T
BE
EXPLAINED
BY
THE
OBJECTS
SIZE
IN
THE
IMAGE
WE
CONCLUDE
THAT
EITHER
LARGER
REAL
WORLD
OBJECTS
ARE
EASIER
FOR
THE
MODEL
TO
RECOGNIZE
OR
LARGER
REAL
WORLD
OBJECTS
USUALLY
OCCUR
IN
IMAGES
WITH
VERY
DISTINCTIVE
BACKGROUNDS
TO
DISTINGUISH
BETWEEN
THE
TWO
CASES
WE
LOOK
FIG
TOP
MIDDLE
WE
SEE
THAT
IN
THE
SINGLE
OBJECT
LOCALIZATION
TASK
THE
L
OBJECTS
ARE
EASY
TO
LOCALIZE
AT
LOCALIZATION
ACCURACY
XL
OBJECTS
HOWEVER
TEND
TO
BE
THE
HARDEST
TO
LOCALIZE
WITH
ONLY
LOCALIZATION
ACCURACY
WE
CONCLUDE
THAT
THE
APPEARANCE
OF
L
OBJECTSMUST
BE
EASIER
FOR
THEMODEL
TO
LEARN
WHILE
XL
OBJECTS
TEND
TO
APPEAR
IN
DISTINCTIVE
BACKGROUNDS
THE
IMAGE
BACKGROUND
MAKE
THESE
XL
CLASSES
EASIER
FOR
THE
IMAGE
LEVEL
CLASSIFIER
BUT
THE
INDIVIDUAL
INSTANCES
ARE
DIFFICULT
TO
ACCURATELY
LOCALIZE
SOME
EXAMPLES
OF
L
OBJECTS
ARE
KILLER
WHALE
SCHOONER
AND
LION
AND
SOME
EXAMPLES
OF
XL
OBJECTS
ARE
BOATHOUSE
MOSQUE
TOYSHOP
AND
STEEL
ARCH
BRIDGE
IN
FIG
TOP
RIGHT
CORRESPONDING
TO
THE
OBJECT
DETECTION
TASK
THE
INFLUENCE
OF
REAL
WORLD
OBJECT
SIZE
IS
NOT
AS
APPARENT
ONE
OF
THE
KEY
REASONS
IS
THAT
MANY
OF
THE
XL
AND
L
OBJECT
CLASSES
OF
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
DATASETS
WERE
REMOVED
IN
CONSTRUCTING
THE
DETECTION
DATASET
SECT
SINCE
THEY
WERE
NOT
BASIC
CATEGORIES
WELL
SUITED
FOR
DETECTION
THEREWERE
ONLY
CLASSES
REMAINING
IN
THE
DATASET
TRAIN
AIRPLANE
AND
BUS
AND
NONE
AFTER
SCALE
NORMALIZATION
WE
OMIT
THEM
FROM
THE
ANALYSIS
THE
AVERAGE
PRECISION
OF
XS
M
OBJECTS
AND
MAP
RESPECTIVELY
IS
STATISTICALLY
INSIGNIFICANT
FROM
AVERAGE
PRECISION
ON
L
OBJECTS
CONFIDENCE
INTERVAL
OF
L
OBJECTS
IS
THIS
MAY
BE
DUE
TO
THE
FACT
THAT
THERE
ARE
ONLY
L
OBJECT
CLASSES
REMAINING
AFTER
SCALE
NORMALIZATION
ALL
OTHER
REAL
WORLD
SIZE
BINS
HAVE
AT
LEAST
OBJECT
CLASSES
FINALLY
IT
IS
INTERESTING
THAT
PERFORMANCE
ON
XS
OBJECTS
OF
MAP
CI
IS
STATISTICALLY
SIGNIFICANTLY
BETTER
THAN
PERFORMANCE
ON
OR
M
OBJECTS
WITH
AND
MAP
RESPECTIVELY
SOME
EXAMPLES
OF
XS
OBJECTS
ARE
STRAWBERRY
BOW
TIE
AND
RUGBY
BALL
DEFORMABILITY
WITHIN
INSTANCE
IN
FIG
SECOND
ROW
IT
IS
CLEAR
THAT
THE
OPTIMISTIC
MODEL
PERFORMS
STATISTICALLY
SIGNIFICANTLY
WORSE
ON
RIGID
OBJECTS
THAN
ON
DEFORMABLE
OBJECTS
INT
J
COMPUT
VIS
FIG
PERFORMANCE
OF
THE
OPTIMISTIC
COMPUTER
VISION
MODEL
AS
A
FUNCTION
OF
OBJECT
PROPERTIES
THE
X
AXIS
CORRESPONDS
TO
OBJECT
PROPERTIES
ANNOTATED
BY
HUMAN
LABELERS
FOR
EACH
OBJECT
CLASS
RUSSAKOVSKY
ET
AL
AND
ILLUSTRATED
IN
FIG
THE
Y
AXIS
IS
THE
AVERAGE
ACCURACY
OF
THE
OPTIMISTIC
MODEL
NOTE
THAT
THE
RANGE
OF
THE
Y
AXIS
IS
DIFFERENT
FOR
EACH
TASK
TO
MAKE
THE
TRENDS
MORE
VISIBLE
THE
BLACK
CIRCLE
IS
THE
AVERAGE
ACCURACY
OF
THE
MODEL
ON
ALL
OBJECT
CLASSES
THAT
FALL
INTO
EACH
BIN
WE
CONTROL
FOR
THE
EFFECTS
OF
OBJECT
SCALE
BY
NORMALIZING
THE
OBJECT
SCALE
WITHIN
EACH
BIN
DETAILS
IN
SECT
THE
COLOR
BARS
SHOW
THE
MODEL
ACCURACY
AVERAGED
ACROSS
THE
REMAINING
CLASSES
ERROR
BARS
SHOW
THE
CONFIDENCE
INTERVAL
OBTAINED
WITH
BOOTSTRAPPING
SOME
BINS
ARE
MISSING
COLOR
BARS
BECAUSE
LESS
THAN
OBJECT
CLASSES
REMAINED
IN
THE
BIN
AFTER
SCALE
NORMALIZATION
FOR
EXAMPLE
THE
BAR
FOR
XL
REAL
WORLD
OBJECT
DETECTION
CLASSES
IS
MISSING
BECAUSE
THAT
BIN
HAS
ONLY
OBJECT
CLASSES
AIRPLANE
BUS
TRAIN
AND
AFTER
NORMALIZING
BY
SCALE
NO
CLASSES
REMAIN
INT
J
COMPUT
VIS
IMAGE
CLASSIFICATION
ACCURACY
IS
ON
RIGID
OBJECTS
CI
MUCH
SMALLER
THAN
ON
DEFORMABLE
ONES
SINGLE
OBJECT
LOCALIZATION
ACCURACY
IS
ON
RIGID
OBJECTS
CI
MUCH
SMALLER
THAN
ON
DEFORMABLE
ONES
OBJECT
DETECTION
MAP
IS
ON
RIGID
OBJECTS
CI
MUCH
SMALLER
THAN
ON
DEFORMABLE
ONES
WE
CAN
FURTHER
ANALYZE
THE
EFFECTS
OF
DEFORMABILITY
AFTER
SEPARATING
OBJECT
CLASSES
INTO
NATURAL
AND
MAN
MADE
BINS
BASED
ON
THE
IMAGENET
HIERARCHY
DEFORMABILITY
IS
HIGHLY
CORRELATED
WITH
WHETHER
THE
OBJECT
IS
NATURAL
OR
MAN
MADE
CORRELATION
FOR
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
CLASSES
AND
FOR
OBJECT
DETECTION
CLASSES
FIGURE
THIRD
ROW
SHOWS
THE
EFFECT
OF
DEFORMABILITY
ON
PERFORMANCE
OF
THE
MODEL
FOR
MAN
MADE
AND
NATURAL
OBJECTS
SEPARATELY
MAN
MADE
CLASSES
ARE
SIGNIFICANTLY
HARDER
THAN
NATURAL
CLASSES
CLASSIFICATION
ACCURACY
CI
FOR
MAN
MADE
VERSUS
FOR
NATURAL
LOCALIZATION
ACCURACY
CI
FOR
MAN
MADE
VERSUS
FOR
NATURAL
AND
DETECTION
MAP
CI
FOR
MAN
MADE
VERSUS
FOR
NATURAL
HOWEVER
WHETHER
THE
CLASSES
ARE
RIGID
OR
DEFORMABLE
WITHIN
THIS
SUBDIVISION
IS
NO
LONGER
SIGNIFICANT
IN
MOST
CASES
FOR
EXAMPLE
THE
IMAGE
CLASSIFICATION
ACCURACY
IS
CI
ON
MAN
MADE
RIGID
OBJECTS
AND
ON
MAN
MADE
DEFORMABLE
OBJECTS
NOT
STATISTICALLY
SIGNIFICANTLY
DIFFERENT
THERE
ARE
TWO
CASES
WHERE
THE
DIFFERENCES
IN
PERFORMANCE
ARE
STATISTICALLY
SIGNIFICANT
FIRST
FOR
SINGLE
OBJECT
LOCALIZATION
NATURAL
DEFORMABLE
OBJECTS
ARE
EASIER
THAN
NATURAL
RIGID
OBJECTS
LOCALIZATION
ACCURACY
OF
CI
ON
NATURAL
DEFORMABLE
OBJECTS
IS
HIGHER
THAN
ON
NATURAL
RIGID
OBJECTS
FALLING
SLIGHTLY
OUTSIDE
THE
CONFIDENCE
INTERVAL
THIS
DIFFERENCE
IN
PERFORMANCE
IS
LIKELY
BECAUSE
DEFORMABLE
NATURAL
ANIMALS
TEND
TO
BE
EASIER
TO
LOCALIZE
THAN
RIGID
NATURAL
FRUIT
SECOND
FOR
OBJECT
DETECTION
MAN
MADE
RIGID
OBJECTS
ARE
EASIER
THAN
MAN
MADE
DEFORMABLE
OBJECTS
MAP
CI
ON
MAN
MADE
RIGID
OBJECTS
IS
HIGHER
THAN
MAP
ON
MAN
MADE
DEFORMABLE
OBJECTS
THIS
IS
BECAUSE
MAN
MADE
RIGID
OBJECTS
INCLUDE
CLASSES
LIKE
TRAFFIC
LIGHT
OR
CAR
WHEREAS
THE
MAN
MADE
DEFORMABLE
OBJECTS
CONTAIN
CHALLENGING
CLASSES
LIKE
PLASTIC
BAG
SWIMMING
TRUNKS
OR
STETHOSCOPE
AMOUNT
OF
TEXTURE
FINALLY
WE
ANALYZE
THE
EFFECT
THAT
OBJECT
TEXTURE
HAS
ON
THE
ACCURACY
OF
THE
OPTIMISTIC
MODEL
FIGURE
FOURTH
ROW
DEMONSTRATES
THAT
THE
MODEL
PERFORMS
BETTER
AS
THE
AMOUNT
OF
TEXTURE
ON
THE
OBJECT
INCREASES
THE
MOST
SIGNIFICANT
DIFFERENCE
IS
BETWEEN
THE
PERFORMANCE
ON
UNTEXTURED
OBJECTS
AND
THE
PERFORMANCE
ON
OBJECTS
WITH
LOW
TEXTURE
IMAGE
CLASSIFICATION
ACCURACY
IS
ON
UNTEXTURED
OBJECTS
CI
LOWER
THAN
ON
LOW
TEXTURED
OBJECTS
SINGLE
OBJECT
LOCALIZATION
ACCURACY
IS
ON
UNTEXTURED
OBJECTS
CI
LOWER
THAN
ON
LOW
TEXTURED
OBJECTS
OBJECT
DETECTION
MAP
IS
ON
UNTEXTURED
OBJECTS
CI
LOWER
THAN
ON
LOW
TEXTURED
OBJECTS
TEXTURE
IS
CORRELATED
WITH
WHETHER
THE
OBJECT
IS
NATURAL
OR
MAN
MADE
AT
CORRELATION
FOR
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
AND
CORRELATION
FOR
OBJECT
DETECTION
TO
DETERMINE
IF
THIS
IS
A
CONTRIBUTING
FACTOR
IN
FIG
BOTTOM
ROW
WE
BREAK
UP
THE
OBJECT
CLASSES
INTO
NATURAL
AND
MAN
MADE
AND
SHOWTHE
ACCURACY
ON
OBJECTSWITH
NO
TEXTURE
VERSUS
OBJECTS
WITH
LOW
TEXTURE
WE
OBSERVE
THAT
THE
MODEL
IS
STILL
STATISTICALLY
SIGNIFICANTLY
BETTER
ON
LOW
TEXTURED
OBJECT
CLASSES
THAN
ON
UNTEXTURED
ONES
BOTH
ON
MAN
MADE
AND
NATURAL
OBJECT
CLASSES
INDEPENDENTLY
HUMAN
ACCURACY
ON
LARGE
SCALE
IMAGE
CLASSIFICATION
RECENT
IMPROVEMENTS
IN
STATE
OF
THE
ART
ACCURACY
ON
THE
ILSVRC
DATASET
ARE
EASIER
TO
PUT
IN
PERSPECTIVE
WHEN
COMPARED
TO
HUMAN
LEVEL
ACCURACY
IN
THIS
SECTION
WE
COMPARE
THE
PERFORMANCE
OF
THE
LEADING
LARGE
SCALE
IMAGE
CLASSIFICATION
METHOD
WITH
THE
PERFORMANCE
OF
HUMANS
ON
THIS
TASK
TO
SUPPORT
THIS
COMPARISON
WE
DEVELOPED
AN
INTERFACE
THAT
ALLOWED
A
HUMAN
LABELER
TO
ANNOTATE
IMAGES
WITH
UP
TO
FIVE
ILSVRC
TARGET
CLASSES
WE
COMPARE
HUMAN
ERRORS
TO
THOSE
OF
THE
WINNING
IMAGE
CLASSIFICATIONMODEL
GOOGLENET
SECT
FOR
THIS
ANALYSIS
WE
USE
A
RANDOM
SAMPLE
OF
IMAGE
CLASSIFICATION
TEST
SET
IMAGES
ANNOTATION
INTERFACE
OUR
WEB
BASED
ANNOTATION
INTERFACE
CONSISTS
OF
ONE
TEST
SET
IMAGE
AND
A
LIST
OF
ILSVRC
CATEGORIES
ON
THE
SIDE
EACH
CATEGORY
IS
DESCRIBED
BY
ITS
TITLE
SUCH
AS
COWBOY
BOOT
THE
CATEGORIES
ARE
SORTED
IN
THE
TOPOLOGICAL
ORDER
OF
THE
IMAGENET
HIERARCHY
WHICH
PLACES
SEMANTICALLY
SIMILAR
CONCEPTS
NEARBY
IN
THE
LIST
FOR
EXAMPLE
ALL
MOTOR
VEHICLE
RELATED
CLASSES
ARE
ARRANGED
CONTIGUOUSLY
IN
THE
LIST
EVERY
CLASS
CATEGORY
IS
ADDITIONALLY
ACCOMPANIED
BY
A
ROW
OF
EXAMPLES
IMAGES
FROM
THE
TRAINING
SET
TO
ALLOW
FOR
FASTER
VISUAL
SCANNING
THE
USER
OF
THE
INTERFACE
SELECTS
CATEGORIES
FROM
THE
LIST
BY
CLICKING
ON
THE
DESIRED
ITEMS
SINCE
OUR
INTERFACE
IS
WEB
BASED
IT
ALLOWS
FOR
NATURAL
SCROLLING
THROUGH
THE
LIST
AND
ALSO
SEARCH
BY
TEXT
ANNOTATION
PROTOCOL
WE
FOUND
THE
TASK
OF
ANNOTATING
IMAGES
WITH
ONE
OF
CATEGORIES
TO
BE
AN
EXTREMELY
CHALLENGING
NATURAL
OBJECT
DETECTION
CLASSES
ARE
REMOVED
FROM
THIS
ANALYSIS
BECAUSE
THERE
ARE
ONLY
AND
NATURAL
UNTEXTURED
AND
LOW
TEXTURED
CLASSES
RESPECTIVELY
AND
NONE
REMAIN
AFTER
SCALE
NORMALIZATION
ALL
OTHER
BINS
CONTAIN
AT
LEAST
OBJECT
CLASSES
AFTER
SCALE
NORMALIZATION
INT
J
COMPUT
VIS
TABLE
HUMAN
CLASSIFICATION
RESULTS
ON
THE
CLASSIFICATION
TEST
SET
FOR
TWO
EXPERT
ANNOTATORS
AND
RELATIVE
CONFUSION
HUMAN
SUCCEEDS
GOOGLENET
SUCCEEDS
HUMAN
SUCCEEDS
GOOGLENET
FAILS
HUMAN
FAILS
GOOGLENET
SUCCEEDS
HUMAN
FAILS
GOOGLENET
FAILS
TOTAL
NUMBER
OF
IMAGES
ESTIMATED
GOOGLENET
CLASSIFICATION
ERROR
ESTIMATED
HUMAN
CLASSIFICATION
ERROR
WE
REPORT
TOP
CLASSIFICATION
ERROR
TASK
FOR
AN
UNTRAINED
ANNOTATOR
THE
MOST
COMMON
ERROR
THAT
AN
UNTRAINED
ANNOTATOR
IS
SUSCEPTIBLE
TO
IS
A
FAILURE
TO
CONSIDER
A
RELEVANT
CLASS
AS
A
POSSIBLE
LABEL
BECAUSE
THEY
ARE
UNAWARE
OF
ITS
EXISTENCE
THEREFORE
IN
EVALUATING
THE
HUMAN
ACCURACY
WE
RELIED
PRIMARILY
ON
EXPERT
ANNOTATORS
WHO
LEARNED
TO
RECOGNIZE
A
LARGE
PORTION
OF
THE
ILSVRC
CLASSES
DURING
TRAINING
THE
ANNOTATORS
LABELED
A
FEW
HUNDRED
VALIDATION
IMAGES
FOR
PRACTICE
AND
LATER
SWITCHED
TO
THE
TEST
SET
IMAGES
QUANTITATIVE
COMPARISON
OF
HUMAN
AND
COMPUTER
ACCURACY
ON
LARGE
SCALE
IMAGE
CLASSIFICATION
WE
REPORT
RESULTS
BASED
ON
EXPERIMENTS
WITH
TWO
EXPERT
ANNOTATORS
THE
FIRST
ANNOTATOR
TRAINED
ON
IMAGES
AND
ANNOTATED
TEST
IMAGES
THE
SECOND
ANNOTATOR
TRAINED
ON
IMAGES
AND
THEN
ANNOTATED
TEST
IMAGES
THE
AVERAGE
PACE
OF
LABELING
WAS
APPROXIMATELY
IMAGE
PER
MINUTE
BUT
THE
DISTRIBUTION
IS
STRONGLY
BIMODAL
SOME
IMAGES
ARE
QUICKLY
RECOGNIZED
WHILE
SOME
IMAGES
SUCH
AS
THOSE
OF
FINE
GRAINED
BREEDS
OF
DOGS
BIRDS
OR
MONKEYS
MAY
REQUIRE
MULTIPLE
MINUTES
OF
CONCENTRATED
EFFORT
THE
RESULTS
ARE
REPORTED
IN
TABLE
ANNOTATOR
ANNOTATOR
EVALUATED
A
TOTAL
OF
TEST
SET
IMAGES
THE
GOOGLENET
CLASSIFICATION
ERROR
ON
THIS
SAMPLE
WAS
ESTIMATED
TO
BE
RECALL
THAT
THE
ERROR
ON
FULL
TEST
SET
OF
IMAGES
IS
AS
SHOWN
IN
TABLE
THE
HUMAN
ERROR
WAS
ESTIMATED
TO
BE
THUS
ANNOTATOR
ACHIEVES
A
PERFORMANCE
SUPERIOR
TO
GOOGLENET
BY
APPROXIMATELY
WE
CAN
ANALYZE
THE
STATISTICAL
SIGNIFICANCE
OF
THIS
RESULT
UNDER
THE
NULL
HYPOTHESIS
THAT
THEY
ARE
FROM
THE
SAME
DISTRIBUTION
IN
PARTICULAR
COMPARING
THE
TWO
PROPORTIONS
WITH
A
Z
TEST
YIELDS
A
ONE
SIDED
P
VALUE
OF
P
THUS
WE
CAN
CONCLUDE
THAT
THIS
RESULT
IS
STATISTICALLY
SIGNIFICANT
AT
THE
CONFIDENCE
LEVEL
ANNOTATOR
OUR
SECOND
ANNOTATOR
TRAINED
ON
A
SMALLER
SAMPLE
OF
ONLY
IMAGES
AND
THEN
LABELED
TEST
SET
IMAGES
AS
SEEN
IN
TABLE
THE
FINAL
CLASSIFICATION
ERROR
IS
SIGNIFICANTLY
WORSE
AT
APPROXIMATELY
TOP
ERROR
THE
MAJORITY
OF
THESE
ERRORS
CAN
BE
ATTRIBUTED
TO
THE
ANNOTATOR
FAILING
TO
SPOT
AND
CONSIDER
THE
GROUND
TRUTH
LABEL
AS
AN
OPTION
THUS
WE
CONCLUDE
THAT
A
SIGNIFICANT
AMOUNT
OF
TRAINING
TIME
IS
NECESSARY
FOR
A
HUMAN
TO
ACHIEVE
COMPETITIVE
PERFORMANCE
ON
ILSVRC
HOWEVER
WITH
A
SUFFICIENT
AMOUNT
OF
TRAINING
A
HUMAN
ANNOTATOR
IS
STILL
ABLE
TO
OUTPERFORM
THE
GOOGLENET
RESULT
P
BY
APPROXIMATELY
ANNOTATOR
COMPARISON
WE
ALSO
COMPARE
THE
PREDICTION
ACCURACY
OF
THE
TWO
ANNOTATORS
OF
A
TOTAL
OF
IMAGES
THAT
BOTH
AND
LABELED
WERE
CORRECTLY
LABELED
BY
BOTH
AND
WERE
CORRECTLY
LABELED
BY
BUT
NOT
WERE
CORRECTLY
LABELED
BY
BUT
NOT
AND
WERE
INCORRECTLY
LABELED
BY
BOTH
THESE
INCLUDE
IMAGES
THAT
WE
CONSIDER
TO
BE
INCORRECTLY
LABELED
IN
THE
GROUND
TRUTH
IN
PARTICULAR
OUR
RESULTS
SUGGEST
THAT
THE
HUMAN
ANNOTATORS
DO
NOT
EXHIBIT
STRONG
OVERLAP
IN
THEIR
PREDICTIONS
WE
CAN
APPROXIMATE
THE
PERFORMANCE
OF
AN
OPTIMISTIC
HUMAN
CLASSIFIER
BY
ASSUMING
AN
IMAGE
TO
BE
CORRECT
IF
AT
LEAST
ONE
OF
OR
CORRECTLY
LABELED
THE
IMAGE
ON
THIS
SAMPLE
OF
IMAGES
WE
APPROXIMATE
THE
ERROR
RATE
OF
AN
OPTIMISTIC
HUMAN
ANNOTATOR
AT
COMPARED
TO
THE
GOOGLENET
ERROR
RATE
OF
ANALYSIS
OF
HUMAN
AND
COMPUTER
ERRORS
ON
LARGE
SCALE
IMAGE
CLASSIFICATION
WE
MANUALLY
INSPECTED
BOTH
HUMAN
AND
GOOGLENET
ERRORS
TO
GAIN
AN
UNDERSTANDING
OF
COMMON
ERROR
TYPES
AND
HOW
THEY
COMPARE
FOR
PURPOSES
OF
THIS
SECTION
WE
ONLY
DISCUSS
RESULTS
BASED
ON
THE
LARGER
SAMPLE
OF
IMAGES
THAT
WERE
LABELED
BY
ANNOTATOR
EXAMPLES
OF
REPRESENTATIVE
MISTAKES
ARE
IN
FIG
THE
ANALYSIS
AND
INSIGHTS
BELOW
WERE
DERIVED
SPECIFICALLY
FROM
GOOGLENET
PREDICTIONS
BUT
WE
SUSPECT
THAT
MANY
OF
THE
SAME
ERRORS
MAY
BE
PRESENT
IN
OTHER
METHODS
TYPES
OF
ERRORS
IN
BOTH
COMPUTER
AND
HUMAN
ANNOTATIONS
MULTIPLE
OBJECTS
BOTH
GOOGLENET
AND
HUMANS
STRUGGLE
WITH
IMAGES
THAT
CONTAIN
MULTIPLE
ILSVRC
CLASSES
USUALLY
MANY
MORE
THAN
FIVE
WITH
LITTLE
INDICATION
OF
WHICH
OBJECT
IS
THE
FOCUS
OF
THE
IMAGE
THIS
ERROR
IS
ONLY
PRESENT
IN
THE
CLASSIFICATION
SETTING
SINCE
EVERY
IMAGE
IS
CONSTRAINED
TO
HAVE
EXACTLY
ONE
CORRECT
LABEL
IN
TOTAL
WE
ATTRIBUTE
OF
GOOGLENET
ERRORS
AND
OF
HUMAN
ERRORS
TO
THIS
CATEGORY
IT
IS
WORTH
NOTING
THAT
HUMANS
CAN
HAVE
A
SLIGHT
ADVANTAGE
IN
THIS
ERROR
TYPE
SINCE
IT
CAN
SOMETIMES
BE
EASY
TO
IDENTIFY
THE
MOST
SALIENT
OBJECT
IN
THE
IMAGE
INT
J
COMPUT
VIS
FIG
REPRESENTATIVE
VALIDATION
IMAGES
THAT
HIGHLIGHT
COMMON
SOURCES
OF
ERROR
FOR
EACH
IMAGE
WE
DISPLAY
THE
GROUND
TRUTH
IN
BLUE
AND
TOP
PREDICTIONS
FROM
GOOGLENET
FOLLOW
RED
WRONG
GREEN
RIGHT
GOOGLENET
PREDICTIONS
ON
THE
VALIDATION
SET
IMAGES
WERE
GRACIOUSLY
PROVIDED
BY
MEMBERS
OF
THE
GOOGLENET
TEAM
FROM
LEFT
TO
RIGHT
IMAGES
THAT
CONTAIN
MULTIPLE
OBJECTS
IMAGES
OF
EXTREME
CLOSEUPS
AND
UNCHARACTERISTIC
VIEWS
IMAGES
WITH
FILTERS
IMAGES
THAT
SIGNIFICANTLY
BENEFIT
FROM
THE
ABILITY
TO
READ
TEXT
IMAGES
THAT
CONTAIN
VERY
SMALL
AND
THIN
OBJECTS
IMAGES
WITH
ABSTRACT
REPRESENTATIONS
AND
EXAMPLE
OF
A
FINE
GRAINED
IMAGE
THAT
GOOGLENET
CORRECTLY
IDENTIFIES
BUT
A
HUMAN
WOULD
HAVE
SIGNIFICANT
DIFFICULTY
WITH
INCORRECT
ANNOTATIONS
WE
FOUND
THAT
APPROXIMATELY
OUT
OF
IMAGES
WERE
INCORRECTLY
ANNOTATED
IN
THE
GROUND
TRUTH
THIS
INTRODUCES
AN
APPROXIMATELY
EQUAL
NUMBER
OF
ERRORS
FOR
BOTH
HUMANS
AND
GOOGLENET
TYPES
OF
ERRORS
THAT
THE
COMPUTER
IS
MORE
SUSCEPTIBLE
TO
THAN
THE
HUMAN
OBJECT
SMALL
OR
THIN
GOOGLENET
STRUGGLES
WITH
RECOGNIZING
OBJECTS
THAT
ARE
VERY
SMALL
OR
THIN
IN
THE
IMAGE
EVEN
IF
THAT
OBJECT
IS
THE
ONLY
OBJECT
PRESENT
EXAMPLES
OF
THIS
INCLUDE
AN
IMAGE
OF
A
STANDING
PERSON
WEARING
SUNGLASSES
A
PERSON
HOLDING
A
QUILL
IN
THEIR
HAND
OR
A
SMALL
ANT
ON
A
STEM
OF
A
FLOWER
WE
ESTIMATE
THAT
APPROXIMATELY
OF
GOOGLENET
ERRORS
FALL
INTO
THIS
CATEGORY
WHILE
NONE
OF
THE
HUMAN
ERRORS
DO
IN
OTHERWORDS
IN
OUR
SAMPLE
OF
IMAGES
NO
IMAGE
WAS
MISLABELED
BY
A
HUMAN
BECAUSE
THEY
WERE
UNABLE
TO
IDENTIFY
A
VERY
SMALL
OR
THIN
OBJECT
THIS
DISCREPANCY
CAN
BE
ATTRIBUTED
TO
THE
FACT
THAT
A
HUMAN
CAN
VERY
EFFECTIVELY
LEVERAGE
CONTEXT
AND
AFFORDANCES
TO
ACCURATELY
INFER
THE
IDENTITY
OF
SMALL
OBJECTS
FOR
EXAMPLE
A
FEW
BARELY
VISIBLE
FEATHERS
NEAR
PERSON
HAND
AS
VERY
LIKELY
BELONGING
TO
AMOSTLY
OCCLUDED
QUILL
IMAGE
FILTERS
MANY
PEOPLE
ENHANCE
THEIR
PHOTOS
WITH
FILTERS
THAT
DISTORT
THE
CONTRAST
AND
COLOR
DISTRIBUTIONS
OF
THE
IMAGE
WE
FOUND
THAT
OF
THE
IMAGES
THAT
GOOGLENET
INCORRECTLY
CLASSIFIED
CONTAINED
A
FILTER
THUS
WE
POSIT
THAT
GOOGLENET
IS
NOT
VERY
ROBUST
TO
THESE
DISTORTIONS
IN
COMPARISON
ONLY
ONE
IMAGE
AMONG
THE
HUMAN
ERRORS
CONTAINED
A
FILTER
BUT
WE
DO
NOT
ATTRIBUTE
THE
SOURCE
OF
THE
ERROR
TO
THE
FILTER
ABSTRACT
REPRESENTATIONS
GOOGLENET
STRUGGLES
WITH
IMAGES
THAT
DEPICT
OBJECTS
OF
INTEREST
IN
AN
ABSTRACT
FORM
SUCH
AS
RENDERED
IMAGES
PAINTINGS
SKETCHES
PLUSH
TOYS
OR
STATUES
AN
EXAMPLE
IS
THE
ABSTRACT
SHAPE
OF
A
BOW
DRAWN
WITH
A
LIGHT
SOURCE
IN
NIGHT
PHOTOGRAPHY
A
ROBOTIC
SCORPION
OR
A
SHADOW
ON
THE
GROUND
OF
A
CHILD
ON
A
SWING
WE
ATTRIBUTE
APPROXIMATELY
OF
GOOGLENET
ERRORS
TO
THIS
TYPE
OF
ERROR
AND
BELIEVE
THAT
HUMANS
ARE
SIGNIFICANTLY
MORE
ROBUST
WITH
NO
SUCH
ERRORS
SEEN
IN
OUR
SAMPLE
MISCELLANEOUS
SOURCES
ADDITIONAL
SOURCES
OF
ERROR
THAT
OCCUR
RELATIVELY
INFREQUENTLY
INCLUDE
EXTREME
CLOSEUPS
OF
PARTS
OF
AN
OBJECT
UNCONVENTIONAL
VIEWPOINTS
SUCH
AS
A
ROTATED
IMAGE
IMAGES
THAT
CAN
SIGNIFICANTLY
BENEFIT
FROM
THE
ABILITY
TO
READ
TEXT
E
G
A
FEATURELESS
CONTAINER
IDENTIFYING
ITSELF
AS
FACE
POWDER
OBJECTS
WITH
HEAVY
OCCLUSIONS
AND
IMAGES
THAT
DEPICT
A
COLLAGE
OF
MULTIPLE
IMAGES
IN
GENERAL
WE
FOUND
THAT
HUMANS
ARE
MORE
ROBUST
TO
ALL
OF
THESE
TYPES
OF
ERROR
TYPES
OF
ERRORS
THAT
THE
HUMAN
IS
MORE
SUSCEPTIBLE
TO
THAN
THE
COMPUTER
FINE
GRAINED
RECOGNITION
WE
FOUND
THAT
HUMANS
ARE
NOTICEABLY
WORSE
AT
FINE
GRAINED
RECOGNITION
E
G
DOGS
MONKEYS
SNAKES
BIRDS
EVEN
WHEN
THEY
ARE
IN
CLEAR
VIEW
TO
UNDERSTAND
THE
DIFFICULTY
CONSIDER
THAT
THERE
ARE
MORE
THAN
SPECIES
OF
DOGS
IN
THE
DATASET
WE
ESTIMATE
THAT
OF
THE
HUMAN
ERRORS
FALL
INTO
THIS
CATEGORY
WHILE
ONLY
OF
GOOGLENET
ERRORS
DO
CLASS
UNAWARENESS
THE
ANNOTATOR
MAY
SOMETIMES
BE
UNAWARE
OF
THE
GROUND
TRUTH
CLASS
PRESENT
AS
A
LABEL
OPTION
WHEN
POINTED
OUT
AS
AN
ILSVRC
CLASS
IT
IS
USUALLY
CLEAR
THAT
THE
LABEL
APPLIES
TO
THE
IMAGE
THESE
ERRORS
GET
PROGRESSIVELY
LESS
FREQUENT
AS
THE
ANNOTATOR
BECOMES
MORE
FAMILIAR
WITH
ILSVRC
CLASSES
APPROXIMATELY
OF
THE
HUMAN
ERRORS
FALL
INTO
THIS
CATEGORY
INSUFFICIENT
TRAINING
DATA
RECALL
THAT
THE
ANNOTATOR
IS
ONLY
PRESENTED
WITH
EXAMPLES
OF
A
CLASS
UNDER
EVERY
INT
J
COMPUT
VIS
CATEGORY
NAME
HOWEVER
IMAGES
ARE
NOT
ALWAYS
ENOUGH
TO
ADEQUATELY
CONVEY
THE
ALLOWED
CLASS
VARIATIONS
FOR
EXAMPLE
A
BROWN
DOG
CAN
BE
INCORRECTLY
DISMISSED
AS
A
KELPIE
IF
ALL
EXAMPLES
OF
A
KELPIE
FEATURE
A
DOG
WITH
BLACK
COAT
HOWEVER
IF
MORE
THAN
IMAGES
WERE
LISTED
IT
WOULD
HAVE
BECOME
CLEAR
THAT
A
KELPIE
MAY
HAVE
BROWN
COAT
APPROXIMATELY
OF
HUMAN
ERRORS
FALL
INTO
THIS
CATEGORY
CONCLUSIONS
FROM
HUMAN
IMAGE
CLASSIFICATION
EXPERIMENTS
WE
INVESTIGATED
THE
PERFORMANCE
OF
TRAINED
HUMAN
ANNOTATORS
ON
A
SAMPLE
OF
ILSVRC
TEST
SET
IMAGES
OUR
RESULTS
INDICATE
THAT
A
TRAINED
HUMAN
ANNOTATOR
IS
CAPABLE
OF
OUTPERFORMING
THE
BEST
MODEL
GOOGLENET
BY
APPROXIMATELY
P
WE
EXPECT
THAT
SOME
SOURCES
OF
ERRORMAY
BE
RELATIVELY
EASILY
ELIMINATED
E
G
ROBUSTNESS
TO
FILTERS
ROTATIONS
COLLAGES
EFFECTIVELY
REASONING
OVER
MULTIPLE
SCALES
WHILE
OTHERS
MAY
PROVE
MORE
ELUSIVE
E
G
IDENTIFYING
ABSTRACT
REPRESENTATIONS
OF
OBJECTS
ON
THE
OTHER
HAND
A
LARGE
MAJORITY
OF
HUMAN
ERRORS
COME
FROM
FINE
GRAINED
CATEGORIES
AND
CLASS
UNAWARENESS
WE
EXPECT
THAT
THE
FORMER
CAN
BE
SIGNIFICANTLY
REDUCED
WITH
FINE
GRAINED
EXPERT
ANNOTATORS
WHILE
THE
LATTER
COULD
BE
REDUCED
WITH
MORE
PRACTICE
AND
GREATER
FAMILIARITY
WITH
ILSVRC
CLASSES
OUR
RESULTS
ALSO
HINT
THAT
HUMAN
ERRORS
ARE
NOT
STRONGLY
CORRELATED
AND
THAT
HUMAN
ENSEMBLES
MAY
FURTHER
REDUCE
HUMAN
ERROR
RATE
IT
IS
CLEAR
THAT
HUMANS
WILL
SOON
OUTPERFORM
STATE
OFTHE
ART
ILSVRC
IMAGE
CLASSIFICATION
MODELS
ONLY
BY
USE
OF
SIGNIFICANT
EFFORT
EXPERTISE
AND
TIME
ONE
INTERESTING
FOLLOWUP
QUESTION
FOR
FUTURE
INVESTIGATION
IS
HOW
COMPUTER
LEVEL
ACCURACY
COMPARES
WITH
HUMAN
LEVEL
ACCURACY
ONMORE
COMPLEX
IMAGE
UNDERSTANDING
TASKS
CONCLUSIONS
IN
THIS
PAPER
WE
DESCRIBED
THE
LARGE
SCALE
DATA
COLLECTION
PROCESS
OF
ILSVRC
PROVIDED
A
SUMMARY
OF
THE
MOST
SUCCESSFUL
ALGORITHMS
ON
THIS
DATA
AND
ANALYZED
THE
SUCCESS
AND
FAILURE
MODES
OF
THESE
ALGORITHMS
IN
THIS
SECTION
WE
DISCUSS
SOME
OF
THE
KEY
LESSONS
WE
LEARNED
OVER
THE
YEARS
OF
ILSVRC
STRIVE
TO
ADDRESS
THE
KEY
CRITICISMS
OF
THE
DATASETS
AND
THE
CHALLENGES
WE
ENCOUNTERED
OVER
THE
YEARS
AND
CONCLUDE
BY
LOOKING
FORWARD
INTO
THE
FUTURE
LESSONS
LEARNED
THE
KEY
LESSON
OF
COLLECTING
THE
DATASETS
AND
RUNNING
THE
CHALLENGES
FOR
YEARS
IS
THIS
ALL
HUMAN
INTELLIGENCE
TASKS
NEED
TO
BE
EXCEPTIONALLY
WELL
DESIGNED
WE
LEARNED
THIS
LESSON
BOTH
WHEN
ANNOTATING
THE
DATASET
USING
AMAZON
MECHANICAL
TURK
WORKERS
SECT
AND
EVEN
WHEN
TRYING
TO
EVALUATE
HUMAN
LEVEL
IMAGE
CLASSIFICATION
ACCURACY
USING
EXPERT
LABELERS
SECT
THE
FIRST
ITERATION
OF
THE
LABELING
INTERFACE
WAS
ALWAYS
BAD
GENERALLY
MEANING
COMPLETELY
UNUSABLE
IF
THERE
WAS
ANY
INHERENT
AMBIGUITY
IN
THE
QUESTIONS
POSED
AND
THERE
ALMOST
ALWAYS
WAS
WORKERS
FOUND
IT
AND
ACCURACY
SUFFERED
IF
THERE
IS
ONE
PIECE
OF
ADVICE
WE
CAN
OFFER
TO
FUTURE
RESEARCH
IT
IS
TO
VERY
CAREFULLY
DESIGN
CONTINUOUSLY
MONITOR
AND
EXTENSIVELY
SANITY
CHECK
ALL
CROWDSOURCING
TASKS
THE
OTHER
LESSON
ALREADY
WELL
KNOWN
TO
LARGE
SCALE
RESEARCHERS
IS
THIS
SCALING
UP
THE
DATASET
ALWAYS
REVEALS
UNEXPECTED
CHALLENGES
FROM
DESIGNING
COMPLICATED
MULTISTEP
ANNOTATION
STRATEGIES
SECT
TOHAVING
TOMODIFYTHE
EVALUATION
PROCEDURE
SECT
WE
HAD
TO
CONTINUOUSLY
ADJUST
TO
THE
LARGE
SCALE
SETTING
ON
THE
PLUS
SIDE
OF
COURSE
THE
MAJOR
BREAKTHROUGHS
IN
OBJECT
RECOGNITION
ACCURACY
SECT
AND
THE
ANALYSIS
OF
THE
STRENGTH
AND
WEAKNESSES
OF
CURRENT
ALGORITHMS
AS
A
FUNCTION
OF
OBJECT
CLASS
PROPERTIES
SECT
WOULD
NEVER
HAVE
BEEN
POSSIBLE
ON
A
SMALLER
SCALE
CRITICISM
IN
THE
PAST
YEARS
WE
ENCOUNTERED
THREE
MAJOR
CRITICISMS
OF
THE
ILSVRC
DATASET
AND
THE
CORRESPONDING
CHALLENGE
THE
ILSVRC
DATASET
IS
INSUFFICIENTLY
CHALLENGING
THE
ILSVRC
DATASET
CONTAINS
ANNOTATION
ERRORS
AND
THE
RULES
OF
ILSVRC
COMPETITION
ARE
TOO
RESTRICTIVE
WE
DISCUSS
THESE
IN
ORDER
THE
FIRST
CRITICISM
IS
THAT
THE
OBJECTS
IN
THE
DATASET
TEND
TO
BE
LARGE
AND
CENTERED
IN
THE
IMAGES
MAKING
THE
DATASET
INSUFFICIENTLY
CHALLENGING
IN
SECT
AND
WE
TRIED
TO
PUT
THOSE
CONCERNS
TO
REST
BY
ANALYZING
THE
STATISTICS
OF
THE
ILSVRC
DATASET
AND
CONCLUDING
THAT
IT
IS
COMPARABLE
WITH
AND
IN
MANY
CASES
MUCH
MORE
CHALLENGING
THAN
THE
LONG
STANDING
PASCAL
VOC
BENCHMARK
EVERINGHAM
ET
AL
THE
SECOND
IS
REGARDING
THE
ERRORS
IN
GROUND
TRUTH
LABELING
WE
WENT
THROUGH
SEVERAL
ROUNDS
OF
IN
HOUSE
POST
PROCESSING
OF
THE
ANNOTATIONS
OBTAINED
USING
CROWDSOURCING
AND
CORRECTED
MANY
COMMON
SOURCES
OF
ERRORS
E
G
APPENDIX
THE
MAJOR
REMAINING
SOURCE
OF
ANNOTATION
ERRORS
STEM
FROM
FINE
GRAINED
OBJECT
CLASSES
E
G
LABELERS
FAILING
TO
DISTINGUISH
DIFFERENT
SPECIES
OF
BIRDS
THIS
IS
A
TRADEOFF
THAT
HAD
TO
BE
MADE
IN
ORDER
TO
ANNOTATE
DATA
AT
THIS
SCALE
ON
A
REASONABLE
BUDGET
WE
HAD
TO
RELY
ON
NON
EXPERT
CROWD
LABELERS
HOWEVER
OVERALL
THE
DATASET
IS
ENCOURAGINGLY
CLEAN
BY
OUR
ESTIMATES
PRECISION
IS
ACHIEVED
IN
THE
IMAGE
CLASSIFICATION
DATASET
SECTS
AND
OF
IMAGES
THAT
WENT
THROUGH
THE
BOUNDING
BOX
ANNOTATION
SYSTEM
HAVE
ALL
INSTANCES
OF
THE
TARGET
OBJECT
CLASS
LABELED
WITH
BOUNDING
BOXES
SECT
INT
J
COMPUT
VIS
THE
THIRD
CRITICISM
WE
ENCOUNTERED
IS
OVER
THE
RULES
OF
THE
COMPETITION
REGARDING
USING
EXTERNAL
TRAINING
DATA
IN
ALGORITHMS
HAD
TO
ONLY
USE
THE
PROVIDED
TRAINING
AND
VALIDATION
SET
IMAGES
AND
ANNOTATIONS
FOR
TRAINING
THEIR
MODELS
WITH
THE
GROWTH
OF
THE
FIELD
OF
LARGE
SCALE
UNSUPERVISED
FEATURE
LEARNING
HOWEVER
QUESTIONS
BEGAN
TO
ARISE
ABOUT
WHAT
EXACTLY
CONSTITUTES
OUTSIDE
DATA
FOR
EXAMPLE
ARE
IMAGE
FEATURES
TRAINED
ON
A
LARGE
POOL
OF
OUTSIDE
IMAGES
IN
AN
UNSUPERVISED
FASHION
ALLOWED
IN
THE
COMPETITION
AFTER
MUCH
DISCUSSION
IN
WE
TOOK
THE
FIRST
STEP
TOWARDS
ADDRESSING
THIS
PROBLEM
WE
FOLLOWED
THE
PASCAL
VOC
STRATEGY
AND
CREATED
TWO
TRACKS
IN
THE
COMPETITION
ENTRIES
USING
ONLY
PROVIDED
DATA
AND
ENTRIES
USING
OUTSIDE
DATA
MEANING
ANY
IMAGES
OR
ANNOTATIONS
NOT
PROVIDED
AS
PART
OF
ILSVRCTRAINING
OR
VALIDATION
SETS
HOWEVER
IN
THE
FUTURE
THIS
STRATEGYWILL
LIKELY
NEED
TO
BE
FURTHER
REVISED
AS
THE
COMPUTER
VISION
FIELD
EVOLVES
FOR
EXAMPLE
COMPETITIONS
CAN
CONSIDER
ALLOWING
THE
USE
OF
ANY
IMAGE
FEATURES
WHICH
ARE
PUBLICALLY
AVAILABLE
EVEN
IF
THESE
FEATURES
WERE
LEARNED
ON
AN
EXTERNAL
SOURCE
OF
DATA
THE
FUTURE
GIVEN
THE
MASSIVE
ALGORITHMIC
BREAKTHROUGHS
OVER
THE
PAST
YEARS
WE
ARE
VERY
EAGER
TO
SEE
WHAT
WILL
HAPPEN
IN
THE
NEXT
YEARS
THERE
ARE
MANY
POTENTIAL
DIRECTIONS
OF
IMPROVEMENT
AND
GROWTH
FOR
ILSVRCAND
OTHER
LARGE
SCALE
IMAGE
DATASETS
FIRST
CONTINUING
THE
TREND
OF
MOVING
TOWARDS
RICHER
IMAGE
UNDERSTANDING
FROM
IMAGE
CLASSIFICATION
TO
SINGLE
OBJECT
LOCALIZATION
TO
OBJECT
DETECTION
THE
NEXT
CHALLENGE
WOULD
BE
TO
TACKLE
PIXEL
LEVEL
OBJECT
SEGMENTATION
THE
RECENTLY
RELEASED
LARGE
SCALE
COCO
DATASET
LIN
ET
AL
IS
ALREADY
TAKING
A
STEP
IN
THAT
DIRECTION
SECOND
AS
DATASETS
GROW
EVEN
LARGER
IN
SCALE
IT
MAY
BECOME
IMPOSSIBLE
TO
FULLY
ANNOTATE
THEM
MANUALLY
THE
SCALE
OF
ILSVRC
IS
ALREADY
IMPOSING
LIMITS
ON
THE
MANUAL
ANNOTATIONS
THAT
ARE
FEASIBLE
TO
OBTAIN
FOR
EXAMPLE
WE
HAD
TO
RESTRICT
THE
NUMBER
OF
OBJECTS
LABELED
PER
IMAGE
IN
THE
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
DATASETS
IN
THE
FUTURE
WITH
BILLIONS
OF
IMAGES
IT
WILL
BECOME
IMPOSSIBLE
TO
OBTAIN
EVEN
ONE
CLEAN
LABEL
FOR
EVERY
IMAGE
DATASETS
SUCH
AS
YAHOO
FLICKR
CREATIVE
COMMONS
RELEASED
WITH
WEAK
HUMAN
TAGS
BUT
NO
CENTRALIZED
ANNOTATION
WILL
BECOME
MORE
COMMON
THE
GROWTH
OF
UNLABELED
OR
ONLY
PARTIALLY
LABELED
LARGESCALE
DATASETS
IMPLIES
TWO
THINGS
FIRST
ALGORITHMS
WILL
HAVE
TO
RELY
MORE
ON
WEAKLY
SUPERVISED
TRAINING
DATA
SECOND
EVEN
EVALUATION
MIGHT
HAVE
TO
BE
DONE
AFTER
THE
ALGORITHMS
MAKE
PREDICTIONS
NOT
BEFORE
THIS
MEANS
THAT
RATHER
THAN
EVALUATING
ACCURACY
HOW
MANY
OF
THE
TEST
IMAGES
OR
OBJECTS
HTTP
WEBSCOPE
SANDBOX
YAHOO
COM
CATALOG
PHP
DATATYPE
I
DID
DID
THE
ALGORITHM
GET
RIGHT
OR
RECALL
HOWMANY
OF
THE
DESIRED
IMAGES
OR
OBJECTS
DID
THE
ALGORITHM
MANAGE
TO
FIND
BOTH
OF
WHICH
REQUIRE
A
FULLY
ANNOTATED
TEST
SET
WE
WILL
BE
FOCUSING
MORE
ON
PRECISION
OF
THE
PREDICTIONS
THAT
THE
ALGORITHMMADE
HOW
MANY
WERE
DEEMED
CORRECT
BY
HUMANS
WE
ARE
EAGERLY
AWAITING
THE
FUTURE
DEVELOPMENT
OF
OBJECT
RECOGNITION
DATASETS
AND
ALGORITHMS
AND
ARE
GRATEFUL
THAT
ILSVRC
SERVED
AS
A
STEPPING
STONE
ALONG
THIS
PATH
ACKNOWLEDGMENTS
WE
THANK
STANFORD
UNIVERSITY
UNC
CHAPEL
HILL
GOOGLE
AND
FACEBOOK
FOR
SPONSORING
THE
CHALLENGES
AND
NVIDIA
FOR
PROVIDING
COMPUTATIONAL
RESOURCES
TO
PARTICIPANTS
OF
WE
THANK
OUR
ADVISORS
OVER
THE
YEARS
LUBOMIR
BOURDEV
ALEXEI
EFROS
DEREK
HOIEM
JITENDRA
MALIK
CHUCK
ROSENBERG
AND
ANDREW
ZISSERMAN
WE
THANK
THE
PASCAL
VOC
ORGANIZERS
FOR
PARTNERING
WITH
US
IN
RUNNING
WE
THANK
ALL
MEMBERS
OF
THE
STANFORD
VISION
LAB
FOR
SUPPORTING
THE
CHALLENGES
AND
PUTTING
UP
WITH
US
ALONG
THE
WAY
FINALLY
AND
MOST
IMPORTANTLY
WE
THANK
ALL
RESEARCHERS
THAT
HAVE
MADE
THE
ILSVRC
EFFORT
A
SUCCESS
BY
COMPETING
IN
THE
CHALLENGES
AND
BY
USING
THE
DATASETS
TO
ADVANCE
COMPUTER
VISION
APPENDIX
IMAGE
CLASSIFICATION
AND
SINGLE
OBJECT
LOCALIZATION
OBJECT
CATEGORIES
ABACUS
ABAYA
ACADEMIC
GOWN
ACCORDION
ACORN
ACORN
SQUASH
ACOUSTIC
GUITAR
ADMIRAL
AFFENPINSCHER
AFGHAN
HOUND
AFRICAN
CHAMELEON
AFRICAN
CROCODILE
AFRICAN
ELEPHANT
AFRICAN
GREY
AFRICAN
HUNTING
DOG
AGAMA
AGARIC
AIRCRAFT
CARRIER
AIREDALE
AIRLINER
AIRSHIP
ALBATROSS
ALLIGATOR
LIZARD
ALP
ALTAR
AMBULANCE
AMERICAN
ALLIGATOR
AMERICAN
BLACK
BEAR
AMERICAN
CHAMELEON
AMERICAN
COOT
AMERICAN
EGRET
AMERICAN
LOBSTER
AMERICAN
STAFFORDSHIRE
TERRIER
AMPHIBIAN
ANALOG
CLOCK
ANEMONE
FISH
ANGORA
ANT
APIARY
APPENZELLER
APRON
ARABIAN
CAMEL
ARCTIC
FOX
ARMADILLO
ARTICHOKE
ASHCAN
ASSAULT
RIFLE
AUSTRALIAN
TERRIER
AXOLOTL
BABOON
BACKPACK
BADGER
BAGEL
BAKERY
BALANCE
BEAM
BALD
EAGLE
BALLOON
BALLPLAYER
BALLPOINT
BANANA
BAND
AID
BANDED
GECKO
BANJO
BANNISTER
BARBELL
BARBER
CHAIR
BARBERSHOP
BARN
BARN
SPIDER
BAROMETER
BARRACOUTA
BARREL
BARROW
BASEBALL
BASENJI
BASKETBALL
BASSET
BASSINET
BASSOON
BATH
TOWEL
BATHING
CAP
BATHTUB
BEACH
WAGON
BEACON
BEAGLE
BEAKER
BEARSKIN
BEAVER
BEDLINGTON
TERRIER
BEE
BEE
EATER
BEER
BOTTLE
BEER
GLASS
BELL
COTE
BELL
PEPPER
BERNESE
MOUNTAIN
DOG
BIB
BICYCLE
BUILT
FOR
TWO
BIGHORN
BIKINI
BINDER
BINOCULARS
BIRDHOUSE
BISON
BITTERN
BLACK
AND
GOLD
GARDEN
SPIDER
BLACK
GROUSE
BLACK
STORK
BLACK
SWAN
BLACK
WIDOW
BLACK
AND
TAN
COONHOUND
BLACK
FOOTED
FERRET
BLENHEIM
SPANIEL
BLOODHOUND
BLUETICK
BOA
CONSTRICTOR
BOATHOUSE
BOBSLED
BOLETE
BOLO
TIE
BONNET
BOOK
JACKET
BOOKCASE
BOOKSHOP
BORDER
COLLIE
BORDER
TERRIER
BORZOI
BOSTON
BULL
BOTTLECAP
BOUVIER
DES
FLANDRES
BOW
BOWTIE
BOX
TURTLE
BOXER
BRABANCON
GRIFFON
BRAIN
CORAL
BRAMBLING
BRASS
BRASSIERE
BREAKWATER
BREASTPLATE
BRIARD
BRITTANY
SPANIEL
BROCCOLI
BROOM
BROWN
BEAR
BUBBLE
BUCKET
BUCKEYE
BUCKLE
BULBUL
BULL
MASTIFF
BULLET
TRAIN
BULLETPROOF
VEST
BULLFROG
BURRITO
BUSTARD
BUTCHER
SHOP
BUTTERNUT
SQUASH
CAB
CABBAGE
BUTTERFLY
CAIRN
CALDRON
CAN
OPENER
CANDLE
CANNON
CANOE
CAPUCHIN
CAR
MIRROR
CAR
WHEEL
CARBONARA
CARDIGAN
CARDIGAN
CARDOON
CAROUSEL
CARPENTER
KIT
CARTON
CASH
MACHINE
CASSETTE
CASSETTE
PLAYER
CASTLE
CATAMARAN
CAULIFLOWER
CD
PLAYER
CELLO
CELLULAR
TELEPHONE
CENTIPEDE
CHAIN
CHAINMAIL
CHAIN
SAW
CHAINLINK
FENCE
CHAMBERED
NAUTILUS
CHEESEBURGER
CHEETAH
CHESAPEAKE
BAY
RETRIEVER
CHEST
CHICKADEE
CHIFFONIER
CHIHUAHUA
CHIME
CHIMPANZEE
CHINA
CABINET
CHITON
CHOCOLATE
SAUCE
CHOW
CHRISTMAS
STOCKING
CHURCH
CICADA
CINEMA
CLEAVER
CLIFF
CLIFF
DWELLING
CLOAK
CLOG
CLUMBER
COCK
COCKER
SPANIEL
COCKROACH
COCKTAIL
SHAKER
COFFEE
MUG
COFFEEPOT
COHO
COIL
COLLIE
COLOBUS
COMBINATION
LOCK
COMIC
BOOK
COMMON
IGUANA
COMMON
NEWT
COMPUTER
KEYBOARD
CONCH
CONFECTIONERY
CONSOMME
CONTAINER
SHIP
CONVERTIBLE
CORAL
FUNGUS
CORAL
REEF
CORKSCREW
CORN
CORNET
COUCAL
COUGAR
COWBOY
BOOT
COWBOY
HAT
COYOTE
CRADLE
CRANE
CRANE
CRASH
HELMET
CRATE
CRAYFISH
CRIB
CRICKET
CROCK
POT
CROQUET
BALL
CROSSWORD
PUZZLE
CRUTCH
CUCUMBER
CUIRASS
CUP
CURLY
COATED
RETRIEVER
CUSTARD
APPLE
DAISY
DALMATIAN
DAM
DAMSELFLY
DANDIE
DINMONT
DESK
DESKTOP
COMPUTER
DHOLE
DIAL
TELEPHONE
DIAMONDBACK
DIAPER
DIGITAL
CLOCK
DIGITAL
WATCH
DINGO
DINING
TABLE
DISHRAG
DISHWASHER
DISK
BRAKE
DOBERMAN
DOCK
DOGSLED
DOME
DOORMAT
DOUGH
DOWITCHER
DRAGONFLY
DRAKE
DRILLING
PLATFORM
DRUM
DRUMSTICK
DUGONG
DUMBBELL
DUNG
BEETLE
DUNGENESS
CRAB
DUTCH
OVEN
EAR
EARTHSTAR
ECHIDNA
EEL
EFT
EGGNOG
EGYPTIAN
CAT
ELECTRIC
FAN
ELECTRIC
GUITAR
ELECTRIC
LOCOMOTIVE
ELECTRIC
RAY
ENGLISH
FOXHOUND
ENGLISH
SETTER
ENGLISH
SPRINGER
ENTERTAINMENT
CENTER
ENTLEBUCHER
ENVELOPE
ESKIMO
DOG
ESPRESSO
ESPRESSO
MAKER
EUROPEAN
FIRE
SALAMANDER
EUROPEAN
GALLINULE
FACE
POWDER
FEATHER
BOA
FIDDLER
CRAB
FIG
FILE
FIRE
ENGINE
FIRE
SCREEN
FIREBOAT
FLAGPOLE
FLAMINGO
FLAT
COATED
RETRIEVER
FLATWORM
FLUTE
FLY
FOLDING
CHAIR
FOOTBALL
HELMET
FORKLIFT
FOUNTAIN
FOUNTAIN
PEN
FOUR
POSTER
FOX
SQUIRREL
FREIGHT
CAR
FRENCH
BULLDOG
FRENCH
HORN
FRENCH
LOAF
FRILLED
LIZARD
FRYING
PAN
FUR
COAT
GAR
GARBAGE
TRUCK
GARDEN
SPIDER
GARTER
SNAKE
GAS
PUMP
GASMASK
GAZELLE
GERMAN
SHEPHERD
GERMAN
SHORT
HAIRED
POINTER
GEYSER
GIANT
PANDA
GIANT
SCHNAUZER
GIBBON
GILA
MONSTER
GO
KART
GOBLET
GOLDEN
RETRIEVER
GOLDFINCH
GOLDFISH
GOLF
BALL
GOLFCART
GONDOLA
GONG
GOOSE
GORDON
SETTER
GORILLA
GOWN
GRAND
PIANO
GRANNY
SMITH
GRASSHOPPER
GREAT
DANE
GREAT
GREY
OWL
GREAT
PYRENEES
GREAT
WHITE
SHARK
GREATER
SWISS
MOUNTAIN
DOG
GREEN
LIZARD
GREEN
MAMBA
GREEN
SNAKE
GREENHOUSE
GREY
FOX
GREY
WHALE
GRILLE
GROCERY
STORE
GROENENDAEL
GROOM
GROUND
BEETLE
GUACAMOLE
GUENON
GUILLOTINE
GUINEA
PIG
GYROMITRA
HAIR
SLIDE
HAIR
SPRAY
HALF
TRACK
HAMMER
HAMMERHEAD
HAMPER
HAMSTER
HAND
BLOWER
HAND
HELD
COMPUTER
HANDKERCHIEF
HARD
DISC
HARE
HARMONICA
HARP
HARTEBEEST
HARVESTER
HARVESTMAN
HATCHET
HAY
HEAD
CABBAGE
HEN
HEN
OF
THE
WOODS
HERMIT
CRAB
HIP
HIPPOPOTAMUS
HOG
HOGNOSE
SNAKE
HOLSTER
HOME
THEATER
HONEYCOMB
HOOK
HOOPSKIRT
HORIZONTAL
BAR
HORNBILL
HORNED
VIPER
HORSE
CART
HOT
POT
HOTDOG
HOURGLASS
HOUSE
FINCH
HOWLER
MONKEY
HUMMINGBIRD
HYENA
IBEX
IBIZAN
HOUND
ICE
BEAR
ICE
CREAM
ICE
LOLLY
IMPALA
INDIAN
COBRA
INDIAN
ELEPHANT
INDIGO
BUNTING
INDRI
IPOD
IRISH
SETTER
IRISH
TERRIER
IRISH
WATER
SPANIEL
IRISH
WOLFHOUND
IRON
ISOPOD
ITALIAN
GREYHOUND
JACAMAR
JACK
O
LANTERN
JACKFRUIT
JAGUAR
JAPANESE
SPANIEL
JAY
JEAN
JEEP
JELLYFISH
JERSEY
JIGSAW
PUZZLE
JINRIKISHA
JOYSTICK
JUNCO
KEESHOND
KELPIE
KERRY
BLUE
TERRIER
KILLER
WHALE
KIMONO
KING
CRAB
KING
PENGUIN
KING
SNAKE
KIT
FOX
KITE
KNEE
PAD
KNOT
KOALA
KOMODO
DRAGON
KOMONDOR
KUVASZ
LAB
COAT
LABRADOR
RETRIEVER
LACEWING
LADLE
LADYBUG
LAKELAND
TERRIER
LAKESIDE
LAMPSHADE
LANGUR
LAPTOP
LAWN
MOWER
LEAF
BEETLE
LEAFHOPPER
LEATHERBACK
TURTLE
LEMON
LENS
CAP
LEONBERG
LEOPARD
LESSER
PANDA
LETTER
OPENER
LHASA
LIBRARY
LIFEBOAT
LIGHTER
LIMOUSINE
LIMPKIN
LINER
LION
LIONFISH
LIPSTICK
LITTLE
BLUE
HERON
LLAMA
LOAFER
LOGGERHEAD
LONG
HORNED
BEETLE
LORIKEET
LOTION
LOUDSPEAKER
LOUPE
LUMBERMILL
LYCAENID
LYNX
MACAQUE
MACAW
MADAGASCAR
CAT
MAGNETIC
COMPASS
MAGPIE
MAILBAG
MAILBOX
MAILLOT
MAILLOT
MALAMUTE
MALINOIS
MALTESE
DOG
MANHOLE
COVER
MANTIS
MARACA
MARIMBA
MARMOSET
MARMOT
MASHED
POTATO
MASK
MATCHSTICK
MAYPOLE
MAZE
MEASURING
CUP
MEAT
LOAF
MEDICINE
CHEST
MEERKAT
MEGALITH
MENU
MEXICAN
HAIRLESS
MICROPHONE
MICROWAVE
MILITARY
UNIFORM
MILK
CAN
MINIATURE
PINSCHER
MINIATURE
POODLE
MINIATURE
SCHNAUZER
MINIBUS
MINISKIRT
MINIVAN
MINK
MISSILE
MITTEN
MIXING
BOWL
MOBILE
HOME
MODEL
T
MODEM
MONARCH
MONASTERY
MONGOOSE
MONITOR
MOPED
MORTAR
MORTARBOARD
MOSQUE
MOSQUITO
NET
MOTOR
SCOOTER
MOUNTAIN
BIKE
MOUNTAIN
TENT
INT
J
COMPUT
VIS
MOUSE
MOUSETRAP
MOVING
VAN
MUD
TURTLE
MUSHROOM
MUZZLE
NAIL
NECK
BRACE
NECKLACE
NEMATODE
NEWFOUNDLAND
NIGHT
SNAKE
NIPPLE
NORFOLK
TERRIER
NORWEGIAN
ELKHOUND
NORWICH
TERRIER
NOTEBOOK
OBELISK
OBOE
OCARINA
ODOMETER
OIL
FILTER
OLD
ENGLISH
SHEEPDOG
ORANGE
ORANGUTAN
ORGAN
OSCILLOSCOPE
OSTRICH
OTTER
OTTERHOUND
OVERSKIRT
OX
OXCART
OXYGEN
MASK
OYSTERCATCHER
PACKET
PADDLE
PADDLEWHEEL
PADLOCK
PAINTBRUSH
PAJAMA
PALACE
PANPIPE
PAPER
TOWEL
PAPILLON
PARACHUTE
PARALLEL
BARS
PARK
BENCH
PARKING
METER
PARTRIDGE
PASSENGER
CAR
PATAS
PATIO
PAY
PHONE
PEACOCK
PEDESTAL
PEKINESE
PELICAN
PEMBROKE
PENCIL
BOX
PENCIL
SHARPENER
PERFUME
PERSIAN
CAT
PETRI
DISH
PHOTOCOPIER
PICK
PICKELHAUBE
PICKET
FENCE
PICKUP
PIER
PIGGY
BANK
PILL
BOTTLE
PILLOW
PINEAPPLE
PING
PONG
BALL
PINWHEEL
PIRATE
PITCHER
PIZZA
PLANE
PLANETARIUM
PLASTIC
BAG
PLATE
PLATE
RACK
PLATYPUS
PLOW
PLUNGER
POLAROID
CAMERA
POLE
POLECAT
POLICE
VAN
POMEGRANATE
POMERANIAN
PONCHO
POOL
TABLE
POP
BOTTLE
PORCUPINE
POT
POTPIE
POTTER
WHEEL
POWER
DRILL
PRAIRIE
CHICKEN
PRAYER
RUG
PRETZEL
PRINTER
PRISON
PROBOSCIS
MONKEY
PROJECTILE
PROJECTOR
PROMONTORY
PTARMIGAN
PUCK
PUFFER
PUG
PUNCHING
BAG
PURSE
QUAIL
QUILL
QUILT
RACER
RACKET
RADIATOR
RADIO
RADIO
TELESCOPE
RAIN
BARREL
RAM
RAPESEED
RECREATIONAL
VEHICLE
RED
FOX
RED
WINE
RED
WOLF
RED
BACKED
SANDPIPER
RED
BREASTED
MERGANSER
REDBONE
REDSHANK
REEL
REFLEX
CAMERA
REFRIGERATOR
REMOTE
CONTROL
RESTAURANT
REVOLVER
RHINOCEROS
BEETLE
RHODESIAN
RIDGEBACK
RIFLE
RINGLET
RINGNECK
SNAKE
ROBIN
ROCK
BEAUTY
ROCK
CRAB
ROCK
PYTHON
ROCKING
CHAIR
ROTISSERIE
ROTTWEILER
RUBBER
ERASER
RUDDY
TURNSTONE
RUFFED
GROUSE
RUGBY
BALL
RULE
RUNNING
SHOE
SAFE
SAFETY
PIN
SAINT
BERNARD
SALTSHAKER
SALUKI
SAMOYED
SANDAL
SANDBAR
SARONG
SAX
SCABBARD
SCALE
SCHIPPERKE
SCHOOL
BUS
SCHOONER
SCOREBOARD
SCORPION
SCOTCH
TERRIER
SCOTTISH
DEERHOUND
SCREEN
SCREW
SCREWDRIVER
SCUBA
DIVER
SEA
ANEMONE
SEA
CUCUMBER
SEA
LION
SEA
SLUG
SEA
SNAKE
SEA
URCHIN
SEALYHAM
TERRIER
SEASHORE
SEAT
BELT
SEWING
MACHINE
SHETLAND
SHEEPDOG
SHIELD
SHIH
TZU
SHOE
SHOP
SHOJI
SHOPPING
BASKET
SHOPPING
CART
SHOVEL
SHOWER
CAP
SHOWER
CURTAIN
SIAMANG
SIAMESE
CAT
SIBERIAN
HUSKY
SIDEWINDER
SILKY
TERRIER
SKI
SKI
MASK
SKUNK
SLEEPING
BAG
SLIDE
RULE
SLIDING
DOOR
SLOT
SLOTH
BEAR
SLUG
SNAIL
SNORKEL
SNOW
LEOPARD
SNOWMOBILE
SNOWPLOW
SOAP
DISPENSER
SOCCER
BALL
SOCK
SOFT
COATED
WHEATEN
TERRIER
SOLAR
DISH
SOMBRERO
SORREL
SOUP
BOWL
SPACE
BAR
SPACE
HEATER
SPACE
SHUTTLE
SPAGHETTI
SQUASH
SPATULA
SPEEDBOAT
SPIDER
MONKEY
SPIDER
WEB
SPINDLE
SPINY
LOBSTER
SPOONBILL
SPORTS
CAR
SPOTLIGHT
SPOTTED
SALAMANDER
SQUIRREL
MONKEY
STAFFORDSHIRE
BULLTERRIER
STAGE
STANDARD
POODLE
STANDARD
SCHNAUZER
STARFISH
STEAM
LOCOMOTIVE
STEEL
ARCH
BRIDGE
STEEL
DRUM
STETHOSCOPE
STINGRAY
STINKHORN
STOLE
STONE
WALL
STOPWATCH
STOVE
STRAINER
STRAWBERRY
STREET
SIGN
STREETCAR
STRETCHER
STUDIO
COUCH
STUPA
STURGEON
SUBMARINE
SUIT
SULPHUR
BUTTERFLY
SULPHUR
CRESTED
COCKATOO
SUNDIAL
SUNGLASS
SUNGLASSES
SUNSCREEN
SUSPENSION
BRIDGE
SUSSEX
SPANIEL
SWAB
SWEATSHIRT
SWIMMING
TRUNKS
SWING
SWITCH
SYRINGE
TABBY
TABLE
LAMP
TAILED
FROG
TANK
TAPE
PLAYER
TARANTULA
TEAPOT
TEDDY
TELEVISION
TENCH
TENNIS
BALL
TERRAPIN
THATCH
THEATER
CURTAIN
THIMBLE
THREE
TOED
SLOTH
THRESHER
THRONE
THUNDER
SNAKE
TIBETAN
MASTIFF
TIBETAN
TERRIER
TICK
TIGER
TIGER
BEETLE
TIGER
CAT
TIGER
SHARK
TILE
ROOF
TIMBER
WOLF
TITI
TOASTER
TOBACCO
SHOP
TOILET
SEAT
TOILET
TISSUE
TORCH
TOTEM
POLE
TOUCAN
TOW
TRUCK
TOY
POODLE
TOY
TERRIER
TOYSHOP
TRACTOR
TRAFFIC
LIGHT
TRAILER
TRUCK
TRAY
TREE
FROG
TRENCH
COAT
TRICERATOPS
TRICYCLE
TRIFLE
TRILOBITE
TRIMARAN
TRIPOD
TRIUMPHAL
ARCH
TROLLEYBUS
TROMBONE
TUB
TURNSTILE
TUSKER
TYPEWRITER
KEYBOARD
UMBRELLA
UNICYCLE
UPRIGHT
VACUUM
VALLEY
VASE
VAULT
VELVET
VENDING
MACHINE
VESTMENT
VIADUCT
VINE
SNAKE
VIOLIN
VIZSLA
VOLCANO
VOLLEYBALL
VULTURE
WAFFLE
IRON
WALKER
HOUND
WALKING
STICK
WALL
CLOCK
WALLABY
WALLET
WARDROBE
WARPLANE
WARTHOG
WASHBASIN
WASHER
WATER
BOTTLE
WATER
BUFFALO
WATER
JUG
WATER
OUZEL
WATER
SNAKE
WATER
TOWER
WEASEL
WEB
SITE
WEEVIL
WEIMARANER
WELSH
SPRINGER
SPANIEL
WEST
HIGHLAND
WHITE
TERRIER
WHIPPET
WHIPTAIL
WHISKEY
JUG
WHISTLE
WHITE
STORK
WHITE
WOLF
WIG
WILD
BOAR
WINDOW
SCREEN
WINDOW
SHADE
WINDSOR
TIE
WINE
BOTTLE
WING
WIRE
HAIRED
FOX
TERRIER
WOK
WOLF
SPIDER
WOMBAT
WOOD
RABBIT
WOODEN
SPOON
WOOL
WORM
FENCE
WRECK
YAWL
YELLOW
LADY
SLIPPER
YORKSHIRE
TERRIER
YURT
ZEBRA
ZUCCHINI
APPENDIX
ADDITIONAL
SINGLE
OBJECT
LOCALIZATION
DATASET
STATISTICS
WE
CONSIDER
TWO
ADDITIONAL
METRICS
OF
OBJECT
LOCALIZATION
DIFFICULTY
CHANCE
PERFORMANCE
OF
LOCALIZATION
AND
THE
LEVEL
OF
CLUTTER
WE
USE
THESE
METRICS
TO
COMPARE
SINGLE
OBJECT
LOCALIZATION
DATASET
TO
THE
PASCAL
VOC
OBJECT
DETECTION
BENCHMARK
THE
MEASURES
OF
LOCALIZATION
DIFFICULTY
ARE
COMPUTED
ON
THE
VALIDATION
SET
OF
BOTH
DATASETS
ACCORDING
TO
BOTH
OF
THESE
MEASURES
OF
DIFFICULTY
THERE
IS
A
SUBSET
OF
ILSVRC
WHICH
IS
AS
CHALLENGING
AS
PASCAL
BUT
MORE
THAN
AN
ORDER
OF
MAGNITUDE
GREATER
IN
SIZE
FIGURE
SHOWS
THE
DISTRIBUTIONS
OF
DIFFERENT
PROPERTIES
OBJECT
SCALE
CHANCE
PERFORMANCE
OF
LOCALIZATION
AND
LEVEL
OF
CLUTTER
ACROSS
THE
DIFFERENT
CLASSES
IN
THE
TWO
DATASETS
CHANCE
PERFORMANCE
OF
LOCALIZATION
CPL
CHANCE
PERFORMANCE
ON
A
DATASET
IS
A
COMMONMETRIC
TO
CONSIDER
WE
DEFINE
THECPLMEASURE
AS
THE
EXPECTED
ACCURACY
OF
A
DETECTOR
WHICH
FIRST
RANDOMLY
SAMPLES
AN
OBJECT
INSTANCE
OF
THAT
CLASS
AND
THEN
USES
ITS
BOUNDING
BOX
DIRECTLY
AS
THE
PROPOSED
LOCALIZATION
WINDOW
ON
ALL
OTHER
IMAGES
AFTER
RESCALING
THE
IMAGES
TO
THE
SAME
SIZE
CONCRETELY
LET
BN
BE
ALL
THE
BOUNDING
BOXES
OF
THE
OBJECT
INSTANCES
WITHIN
A
CLASS
THEN
CPL
I
J
I
I
OU
BI
BJ
N
N
SOME
OF
THE
MOST
DIFFICULT
ILSVRC
CATEGORIES
TO
LOCALIZE
ACCORDING
TO
THIS
METRIC
ARE
BASKETBALL
SWIMMING
TRUNKS
PING
PONG
BALL
AND
RUBBER
ERASER
ALL
WITH
LESS
THAN
CPL
THIS
MEASURE
CORRELATES
STRONGLY
Ρ
WITH
THE
AVERAGE
SCALE
OF
THE
OBJECT
FRACTION
OF
IMAGE
OCCUPIED
BY
OBJECT
THE
AVERAGE
CPL
ACROSS
THE
ILSVRC
CATEGORIES
IS
THE
PASCAL
CATEGORIES
HAVE
AN
AVERAGE
CPL
OF
WHICH
IS
THE
SAME
AS
THE
CPL
OF
THE
MOST
DIFFICULT
CATEGORIES
OF
ILSVRC
CLUTTER
INTUITIVELY
EVEN
SMALL
OBJECTS
ARE
EASY
TO
LOCALIZE
ON
A
PLAIN
BACKGROUND
TO
QUANTIFY
CLUTTER
WE
EMPLOY
THE
OBJECTNESS
MEASURE
OF
ALEXE
ET
AL
WHICH
IS
A
CLASSGENERIC
OBJECT
DETECTOR
EVALUATING
HOWLIKELY
A
WINDOWIN
THE
IMAGE
CONTAINS
A
COHERENT
OBJECT
OF
ANY
CLASS
AS
OPPOSED
TO
BACKGROUND
SKY
WATER
GRASS
FOR
EVERY
IMAGE
M
CONTAINING
TARGET
OBJECT
INSTANCES
AT
POSITIONS
BM
BM
WE
USE
THE
PUBLICLY
AVAILABLE
OBJECTNESS
SOFTWARE
TO
SAMPLE
WINDOWS
WM
WM
WM
IN
ORDER
OF
DECREASING
PROBABILITY
OF
THE
WINDOW
CONTAINING
ANY
GENERIC
OBJECT
LET
OBJ
M
BE
THE
NUMBER
OF
GENERIC
OBJECT
LOOKING
WINDOWS
SAMPLED
BEFORE
LOCALIZING
AN
INSTANCE
OF
THE
TARGET
CATEGORY
I
E
OBJ
M
MIN
K
MAXI
IOU
WM
K
BM
I
FOR
A
CATEGORY
CONTAINING
M
IMAGES
WE
COMPUTE
THE
AVERAGE
NUMBER
OF
SUCH
WINDOWS
PER
IMAGE
AND
DEFINE
CLUTTER
M
M
OBJ
M
THE
HIGHER
THE
CLUTTER
OF
A
CATEGORY
THE
HARDER
THE
OBJECTS
ARE
TO
LOCALIZE
ACCORDING
TO
GENERIC
CUES
IF
AN
OBJECT
CAN
T
BE
LOCALIZED
WITH
THE
FIRST
WINDOWS
AS
IS
THE
CASE
FOR
OF
IMAGES
ON
AVERAGE
PER
CATEGORY
IN
ILSVRC
AND
IN
PASCAL
WE
SET
OBJ
M
THE
FACT
THAT
MORE
THAN
OF
OBJECTS
CAN
BE
LOCALIZED
WITH
THESE
WINDOWS
IMPLY
THAT
THE
OBJECTNESS
CUE
IS
ALREADY
QUITE
STRONG
SO
OBJECTS
THAT
REQUIRE
MANY
WINDOWS
ON
AVERAGE
WILL
BE
EXTREMELY
DIFFICULT
TO
DETECT
E
G
PING
PONG
BALL
CLUTTER
OF
OR
WINDOWS
ON
AVERAGE
BASKETBALL
CLUTTER
OF
PUCK
CLUTTER
OF
IN
ILSVRC
THE
MOST
DIFFICULT
OBJECT
IN
PASCAL
IS
BOTTLE
WITH
CLUTTER
SCORE
OF
ON
AVERAGE
ILSVRC
HAS
CLUTTER
SCORE
OF
THE
MOST
DIFFICULT
SUBSET
OF
ILSVRC
WITH
OBJECT
CATEGORIES
HAS
AN
ORDER
OF
MAGNITUDE
MORE
CATEGORIES
AND
THE
SAME
AVERAGE
AMOUNT
OF
CLUTTER
OF
AS
THE
PASCAL
DATASET
APPENDIX
MANUALLY
CURATED
QUERIES
FOR
OBTAINING
OBJECT
DETECTION
SCENE
IMAGES
IN
SECT
WE
DISCUSSED
THREE
TYPES
OF
QUERIES
WE
USED
FOR
COLLECTING
THE
OBJECT
DETECTION
IMAGES
SINGLE
OBJECT
CATEGORY
NAME
OR
A
SYNONYM
A
PAIR
OF
OBJECT
CATEGORY
NAMES
A
MANUAL
QUERY
TYPICALLY
TARGETTING
ONE
OR
MORE
INT
J
COMPUT
VIS
FIG
DISTRIBUTION
OF
VARIOUS
MEASURES
OF
LOCALIZATION
DIFFICULTY
ON
THE
SINGLE
OBJECT
LOCALIZATION
DARK
GREEN
AND
PASCAL
VOC
LIGHT
BLUE
VALIDATION
SETS
OBJECT
SCALE
IS
FRACTION
OF
IMAGE
AREA
OCCUPIED
BY
AN
AVERAGE
OBJECT
INSTANCE
CHANCE
PERFORMANCE
OF
LOCALIZATION
AND
LEVEL
OF
CLUTTER
ARE
DEFINED
INAPPENDIX
THE
PLOTS
ON
TOP
CONTAIN
THE
FULL
ILSVRC
VALIDATION
SET
WITH
CLASSES
THE
PLOTS
ON
THE
BOTTOM
CONTAIN
ILSVRC
CLASSES
WITH
THE
LOWEST
CHANCE
PERFORMANCE
OF
LOCALIZATION
ALL
PLOTS
CONTAIN
ALL
CLASSES
OF
PASCAL
VOC
OBJECT
CATEGORIES
WITH
INSUFFICIENT
DATA
HERE
WE
PROVIDE
A
LIST
OF
THE
MANUALLY
CURATED
QUERIES
AFTERNOON
TEA
ANT
BRIDGE
BUILDING
ARMADILLO
RACE
ARMADILLO
YARD
ARTIST
STUDIO
AUSCULTATION
BABY
ROOM
BANJO
ORCHESTRA
BANJO
REHERSAL
BANJO
SHOW
CALIFONE
HEADPHONES
MEDIA
PLAYER
SETS
CAMEL
DESSERT
CAMEL
TOURIST
CARPENTER
DRILLING
CARPENTRY
CENTIPEDE
WILD
COFFEE
SHOP
CONTINENTAL
BREAKFAST
TOASTER
CONTINENTAL
BREAKFAST
WAFFLES
CRUTCH
WALKING
DESERT
SCORPION
DINER
DINING
ROOM
DINING
TABLE
DINNER
DRAGONFLY
FRIENDLY
DRAGONFLY
KID
DRAGONFLY
POND
DRAGONFLY
WILD
DRYING
HAIR
DUMBBELL
CURL
FAN
BLOW
WIND
FAST
FOOD
FAST
FOOD
RESTAURANT
FIREWOOD
CHOPPING
FLU
SHOT
GOLDFISH
AQUARIUM
GOLDFISH
TANK
GOLF
CART
ON
GOLF
COURSE
GYM
DUMBBELL
HAMSTER
DRINKING
WATER
HARMONICA
ORCHESTRA
HARMONICA
REHERSAL
HARMONICA
SHOW
HARP
ENSEMBLE
HARP
ORCHESTRA
HARP
REHERSAL
HARP
SHOW
HEDGEHOG
CUTE
HEDGEHOG
FLOOR
HEDGEHOG
HIDDEN
HIPPO
BIRD
HIPPO
FRIENDLY
HOME
IMPROVEMENT
DIY
DRILL
HORSEBACK
RIDING
HOTEL
COFFEE
MACHINE
HOTEL
COFFEE
MAKER
HOTEL
WAFFLE
MAKER
JELLYFISH
SCUBA
JELLYFISH
SNORKLING
KITCHEN
KITCHEN
COUNTER
COFFEE
MAKER
KITCHEN
COUNTER
TOASTER
KITCHENETTE
KOALA
FEED
KOALA
TREE
LADYBUG
FLOWER
LADYBUG
YARD
LAUNDROMAT
LION
ZEBRA
FRIENDLY
LUNCH
MAILMAN
MAKING
BREAKFAST
MAKING
WAFFLES
MEXICAN
FOOD
MOTORCYCLE
RACING
OFFICE
OFFICE
FAN
OPOSSUM
ON
TREE
BRANCH
ORCHESTRA
PANDA
PLAY
PANDA
TREE
PIZZERIA
POMEGRANATE
TREE
PORCUPINE
CLIMBING
TREES
POWER
DRILL
CARPENTER
PURSE
SHOP
RED
PANDA
TREE
RIDING
COMPETITION
RIDING
MOTOR
SCOOTERS
SCHOOL
SUPPLIES
SCUBA
STARFISH
SEA
LION
BEACH
SEA
OTTER
SEA
URCHIN
HABITAT
SHOPPING
FOR
SCHOOL
SUPPLIES
SITTING
IN
FRONT
OF
A
FAN
SKUNK
AND
CAT
SKUNK
PARK
SKUNK
WILD
SKUNK
YARD
SNAIL
FLOWER
SNORKLING
STARFISH
SNOWPLOW
CLEANUP
SNOWPLOW
PILE
SNOWPLOW
WINTER
SOCCER
GAME
SOUTH
AMERICAN
ZOO
STARFISH
SEA
WORLD
STARTS
SHOPPING
STEAMED
ARTICHOKE
STETHOSCOPE
DOCTOR
STRAINER
PASTA
STRAINER
TEA
SYRINGE
DOCTOR
TABLE
WITH
FOOD
TAPE
PLAYER
TIGER
CIRCUS
TIGER
PET
USING
A
CAN
OPENER
USING
POWER
DRILL
WAFFLE
IRON
BREAKFAST
WILD
LION
SAVANA
WILDLIFE
PRESERVE
ANIMALS
WIPING
DISHES
WOMBAT
PETTING
ZOO
ZEBRA
SAVANA
ZOO
FEEDING
ZOO
IN
AUSTRALIA
APPENDIX
HIERARCHY
OF
QUESTIONS
FOR
FULL
IMAGE
ANNOTATION
THE
FOLLOWING
IS
A
HIERARCHY
OF
QUESTIONS
MANUALLY
CONSTRUCTED
FOR
CROWDSOURCING
FULL
ANNOTATION
OF
IMAGES
WITH
THE
PRESENCE
OR
ABSENCE
OF
OBJECT
DETECTION
CATEGORIES
IN
AND
ALL
QUESTIONS
ARE
OF
THE
FORM
IS
THERE
A
IN
THE
IMAGE
QUESTIONS
MARKED
WITH
ARE
ASKED
ON
EVERY
IMAGE
IF
THE
ANSWER
TO
A
QUESTION
IS
DETERMINED
TO
BE
NO
THEN
THE
ANSWER
TO
ALL
DESCENDANT
QUESTIONS
IS
ASSUMED
TO
BE
NO
THE
NUMBERED
LEAF
NODES
CORRESPOND
TO
THE
OBJECT
DETECTION
CATEGORIES
THE
GOAL
IN
THE
HIERARCHY
CONSTRUCTION
IS
TO
SAVE
COST
BY
ASKING
AS
FEW
QUESTIONS
AS
POSSIBLE
ON
EVERY
IMAGE
WHILE
AVOIDING
ANY
AMBIGUITY
IN
QUESTIONS
WHICH
WOULD
LEAD
TO
FALSE
NEGATIVES
DURING
ANNOTATION
THIS
HIERARCHY
IS
NOT
TREESTRUCTURED
SOME
QUESTIONS
HAVE
MULTIPLE
PARENTS
HIERARCHY
OF
QUESTIONS
FIRST
AID
MEDICAL
ITEMS
STETHOSCOPE
SYRINGE
NECK
BRACE
CRUTCH
STRETCHER
BAND
AID
AN
ADHESIVE
BANDAGE
TO
COVER
SMALL
CUTS
OR
BLISTERS
MUSICAL
INSTRUMENTS
ACCORDION
A
PORTABLE
BOX
SHAPED
FREE
REED
INSTRUMENT
THE
REEDS
ARE
MADE
TO
VIBRATE
BY
AIR
FROM
THE
BELLOWS
CONTROLLED
BY
THE
PLAYER
PIANO
PIANOFORTE
FORTE
PIANO
PERCUSSION
INSTRUMENTS
CHIMES
MARACCAS
DRUMS
ETC
CHIME
A
PERCUSSION
INSTRUMENT
CONSISTING
OF
A
SET
OF
TUNED
BELLS
THAT
ARE
STRUCK
WITH
A
HAMMER
USED
AS
AN
ORCHESTRAL
INSTRUMENT
MARACA
DRUM
STRINGED
INSTRUMENT
BANJO
THE
BODY
OF
A
BANJO
IS
ROUND
PLEASE
DO
NOT
CONFUSE
WITH
GUITAR
CELLO
A
LARGE
STRINGED
INSTRUMENT
SEATED
PLAYER
HOLDS
IT
UPRIGHT
WHILE
PLAYING
VIOLIN
BOWED
STRINGED
INSTRUMENT
THAT
HAS
FOUR
STRINGS
A
HOLLOW
BODY
AN
UNFRETTED
FINGERBOARD
AND
IS
PLAYED
WITH
A
BOW
PLEASE
DO
NOT
CONFUSE
WITH
CELLO
WHICH
IS
HELD
UPRIGHT
WHILE
PLAYING
HARP
GUITAR
PLEASE
DO
NOT
CONFUSE
WITH
BANJO
THE
BODY
OF
A
BANJO
IS
ROUND
INT
J
COMPUT
VIS
WIND
INSTRUMENT
A
MUSICAL
INSTRUMENT
IN
WHICH
THE
SOUND
IS
PRODUCED
BY
AN
ENCLOSED
COLUMN
OF
AIR
THAT
IS
MOVED
BY
THE
BREATH
SUCH
AS
TRUMPET
FRENCH
HORN
HARMONICA
FLUTE
ETC
TRUMPET
A
BRASS
MUSICAL
INSTRUMENT
WITH
A
NARROW
TUBE
AND
A
FLARED
BELL
WHICH
IS
PLAYED
BY
MEANS
OF
VALVES
OFTEN
HAS
KEYS
ON
TOP
FRENCH
HORN
A
BRASS
MUSICAL
INSTRUMENT
CONSISTING
OF
A
CONICAL
TUBE
THAT
IS
COILED
INTO
A
SPIRAL
WITH
A
FLARED
BELL
AT
THE
END
TROMBONE
A
BRASS
INSTRUMENT
CONSISTING
OF
A
LONG
TUBE
WHOSE
LENGTH
CAN
BE
VARIED
BY
A
U
SHAPED
SLIDE
HARMONICA
FLUTE
A
HIGH
PITCHED
MUSICAL
INSTRUMENT
THAT
LOOKS
LIKE
A
STRAIGHT
TUBE
AND
IS
USUALLY
PLAYED
SIDEWAYS
PLEASE
DO
NOT
CONFUSE
WITH
OBOES
WHICH
HAVE
A
DISTINCTIVE
STRAW
LIKE
MOUTH
PIECE
AND
A
SLIGHTLY
FLARED
END
OBOE
A
SLENDER
MUSICAL
INSTRUMENT
ROUGHLY
LONG
WITH
METAL
KEYS
A
DISTINCTIVE
STRAW
LIKE
MOUTHPIECE
AND
OFTEN
A
SLIGHTLY
FLARED
END
PLEASE
DO
NOT
CONFUSE
WITH
FLUTES
SAXOPHONE
A
MUSICAL
INSTRUMENT
CONSISTING
OF
A
BRASS
CONICAL
TUBE
OFTEN
WITH
A
U
BEND
AT
THE
END
FOOD
SOMETHING
YOU
CAN
EAT
OR
DRINK
INCLUDES
GROWING
FRUIT
VEGETABLES
AND
MUSHROOMS
BUT
DOES
NOT
INCLUDE
LIVING
ANIMALS
FOOD
WITH
BREAD
OR
CRUST
PRETZEL
BAGEL
PIZZA
HOTDOG
HAMBURGERS
ETC
PRETZEL
BAGEL
BEIGEL
PIZZA
PIZZA
PIE
HOTDOG
HOT
DOG
RED
HOT
HAMBURGER
BEEFBURGER
BURGER
GUACAMOLE
BURRITO
POPSICLE
ICE
CREAM
OR
WATER
ICE
ON
A
SMALL
WOODEN
STICK
FRUIT
FIG
PINEAPPLE
ANANAS
BANANA
POMEGRANATE
APPLE
STRAWBERRY
ORANGE
LEMON
VEGETABLES
CUCUMBER
CUKE
ARTICHOKE
GLOBE
ARTICHOKE
BELL
PEPPER
HEAD
CABBAGE
MUSHROOM
ITEMS
THAT
RUN
ON
ELECTRICITY
PLUGGED
IN
OR
USING
BATTERIES
INCLUDING
CLOCKS
MICROPHONES
TRAFFIC
LIGHTS
COMPUTERS
ETC
REMOTE
CONTROL
REMOTE
ELECTRONICS
THAT
BLOW
AIR
HAIR
DRYER
BLOW
DRYER
ELECTRIC
FAN
A
DEVICE
FOR
CREATING
A
CURRENT
OF
AIR
BY
MOVEMENT
OF
A
SURFACE
OR
SURFACES
PLEASE
DO
NOT
CONSIDER
HAIR
DRYERS
ELECTRONICS
THAT
CAN
PLAY
MUSIC
OR
AMPLIFY
SOUND
TAPE
PLAYER
IPOD
MICROPHONE
MIKE
COMPUTER
AND
COMPUTER
PERIPHERALS
MOUSE
LAPTOP
PRINTER
KEYBOARD
ETC
COMPUTER
MOUSE
LAPTOP
LAPTOP
COMPUTER
PRINTER
PLEASE
DO
NOT
CONSIDER
TYPEWRITERS
TO
BE
PRINTERS
COMPUTER
KEYBOARD
LAMP
ELECTRIC
COOKING
APPLIANCE
AN
APPLIANCE
WHICH
GENERATES
HEAT
TO
COOK
FOOD
OR
BOIL
WATER
MICROWAVE
MICROWAVE
OVEN
TOASTER
WAFFLE
IRON
COFFEE
MAKER
A
KITCHEN
APPLIANCE
USED
FOR
BREWING
COFFEE
AUTOMATICALLY
VACUUM
VACUUM
CLEANER
DISHWASHER
DISH
WASHER
DISHWASHING
MACHINE
WASHER
WASHING
MACHINE
AN
ELECTRIC
APPLIANCE
FOR
WASHING
CLOTHES
TRAFFIC
LIGHT
TRAFFIC
SIGNAL
STOPLIGHT
TV
OR
MONITOR
AN
ELECTRONIC
DEVICE
THAT
REPRESENTS
INFORMATION
IN
VISUAL
FORM
DIGITAL
CLOCK
A
CLOCK
THAT
DISPLAYS
THE
TIME
OF
DAY
DIGITALLY
KITCHEN
ITEMS
TOOLS
UTENSILS
AND
APPLIANCES
USUALLY
FOUND
IN
THE
KITCHEN
ELECTRIC
COOKING
APPLIANCE
AN
APPLIANCE
WHICH
GENERATES
HEAT
TO
COOK
FOOD
OR
BOIL
WATER
MICROWAVE
MICROWAVE
OVEN
TOASTER
WAFFLE
IRON
COFFEE
MAKER
A
KITCHEN
APPLIANCE
USED
FOR
BREWING
COFFEE
AUTOMATICALLY
DISHWASHER
DISH
WASHER
DISHWASHING
MACHINE
STOVE
THINGS
USED
TO
OPEN
CANS
BOTTLES
CAN
OPENER
OR
CORKSCREW
CAN
OPENER
TIN
OPENER
CORKSCREW
COCKTAIL
SHAKER
NON
ELECTRIC
ITEM
COMMONLY
FOUND
IN
THE
KITCHEN
POT
PAN
UTENSIL
BOWL
ETC
STRAINER
FRYING
PAN
SKILLET
BOWL
A
DISH
FOR
SERVING
FOOD
THAT
IS
ROUND
OPEN
AT
THE
TOP
AND
HAS
NO
HANDLES
PLEASE
DO
NOT
CONFUSE
WITH
A
CUP
WHICH
USUALLY
HAS
A
HANDLE
AND
IS
USED
FOR
SERVING
DRINKS
SALT
OR
PEPPER
SHAKER
A
SHAKER
WITH
A
PERFORATED
TOP
FOR
SPRINKLING
SALT
OR
PEPPER
PLATE
RACK
SPATULA
A
TURNER
WITH
A
NARROW
FLEXIBLE
BLADE
LADLE
A
SPOON
SHAPED
VESSEL
WITH
A
LONG
HANDLE
FREQUENTLY
USED
TO
TRANSFER
LIQUIDS
FROM
ONE
CONTAINER
TO
ANOTHER
REFRIGERATOR
ICEBOX
FURNITURE
INCLUDING
BENCHES
BOOKSHELF
A
SHELF
ON
WHICH
TO
KEEP
BOOKS
BABY
BED
SMALL
BED
FOR
BABIES
ENCLOSED
BY
SIDES
TO
PREVENT
BABY
FROM
FALLING
FILING
CABINET
OFFICE
FURNITURE
CONSISTING
OF
A
CONTAINER
FOR
KEEPING
PAPERS
IN
ORDER
BENCH
A
LONG
SEAT
FOR
SEVERAL
PEOPLE
TYPICALLY
MADE
OF
WOOD
OR
STONE
CHAIR
A
RAISED
PIECE
OF
FURNITURE
FOR
ONE
PERSON
TO
SIT
ON
PLEASE
DO
NOT
CONFUSE
WITH
BENCHES
OR
SOFAS
WHICH
ARE
MADE
FOR
MORE
PEOPLE
SOFA
COUCH
UPHOLSTERED
SEAT
FOR
MORE
THAN
ONE
PERSON
PLEASE
DO
NOT
CONFUSE
WITH
BENCHES
WHICH
ARE
MADE
OF
WOOD
OR
STONE
OR
WITH
CHAIRS
WHICH
ARE
FOR
JUST
ONE
PERSON
TABLE
CLOTHING
ARTICLE
OF
CLOTHING
A
COVERING
DESIGNED
TO
BE
WORN
ON
A
PERSON
BODY
DIAPER
GARMENT
CONSISTING
OF
A
FOLDED
CLOTH
DRAWN
UP
BETWEEN
THE
LEGS
AND
FASTENED
AT
THE
WAIST
WORN
BY
INFANTS
TO
CATCH
EXCREMENT
SWIMMING
ATTIRE
CLOTHES
USED
FOR
SWIMMING
OR
BATHING
SWIM
SUITS
SWIM
TRUNKS
BATHING
CAPS
SWIMMING
TRUNKS
SWIMSUIT
WORN
BY
MEN
WHILE
SWIMMING
BATHING
CAP
SWIMMING
CAP
A
CAP
WORN
TO
KEEP
HAIR
DRY
WHILE
SWIMMING
OR
SHOWERING
MAILLOT
A
WOMAN
ONE
PIECE
BATHING
SUIT
NECKTIE
A
MAN
FORMAL
ARTICLE
OF
CLOTHING
WORN
AROUND
THE
NECK
INCLUDING
BOW
TIES
BOW
TIE
A
MAN
TIE
THAT
TIES
IN
A
BOW
TIE
A
LONG
PIECE
OF
CLOTH
WORN
FOR
DECORATIVE
PURPOSES
AROUND
THE
NECK
OR
SHOULDERS
RESTING
UNDER
THE
SHIRT
COLLAR
AND
KNOTTED
AT
THE
THROAT
NOT
A
BOW
TIE
HEADDRESS
HEADGEAR
CLOTHING
FOR
THE
HEAD
HATS
HELMETS
BATHING
CAPS
ETC
BATHING
CAP
SWIMMING
CAP
A
CAP
WORN
TO
KEEP
HAIR
DRY
WHILE
SWIMMING
OR
SHOWERING
HAT
WITH
A
WIDE
BRIM
HELMET
PROTECTIVE
HEADGEAR
MADE
OF
HARD
MATERIAL
TO
RESIST
BLOWS
MINISKIRT
MINI
A
VERY
SHORT
SKIRT
BRASSIERE
BRA
AN
UNDERGARMENT
WORN
BY
WOMEN
TO
SUPPORT
THEIR
BREASTS
SUNGLASSES
LIVING
ORGANISM
OTHER
THAN
PEOPLE
DOGS
SNAKES
FISH
INSECTS
SEA
URCHINS
STARFISH
ETC
LIVING
ORGANISM
WHICH
CAN
FLY
BEE
DRAGONFLY
LADYBUG
BUTTERFLY
BIRD
LIVING
ORGANISM
WHICH
CANNOT
FLY
PLEASE
DON
T
INCLUDE
HUMANS
LIVING
ORGANISM
WITH
OR
LEGS
PLEASE
DON
T
INCLUDE
HUMANS
MAMMALS
BUT
PLEASE
DO
NOT
INCLUDE
HUMANS
FELINE
CAT
LIKE
ANIMAL
CAT
TIGER
OR
LION
DOMESTIC
CAT
TIGER
LION
CANINE
DOG
LIKE
ANIMAL
DOG
HYENA
FOX
OR
WOLF
DOG
DOMESTIC
DOG
CANIS
FAMILIARIS
FOX
WILD
CARNIVOROUS
MAMMAL
WITH
POINTED
MUZZLE
AND
EARS
AND
A
BUSHY
TAIL
PLEASE
DO
NOT
CONFUSE
WITH
DOGS
ANIMALS
WITH
HOOVES
CAMELS
ELEPHANTS
HIPPOS
PIGS
SHEEP
ETC
ELEPHANT
HIPPOPOTAMUS
HIPPO
CAMEL
SWINE
PIG
OR
BOAR
SHEEP
WOOLLY
ANIMAL
MALES
HAVE
LARGE
SPIRALING
HORNS
PLEASE
DO
NOT
CONFUSE
WITH
ANTELOPE
WHICH
HAVE
LONG
LEGS
CATTLE
COWS
OR
OXEN
DOMESTIC
BOVINE
ANIMALS
ZEBRA
HORSE
ANTELOPE
A
GRACEFUL
ANIMAL
WITH
LONG
LEGS
AND
HORNS
DIRECTED
UPWARD
AND
BACKWARD
SQUIRREL
HAMSTER
SHORT
TAILED
BURROWING
RODENT
WITH
LARGE
CHEEK
POUCHES
OTTER
MONKEY
KOALA
BEAR
BEAR
OTHER
THAN
PANDAS
SKUNK
MAMMAL
KNOWN
FOR
ITS
ABILITY
FO
SPRAY
A
LIQUID
WITH
A
STRONG
ODOR
THEY
MAY
HAVE
A
SINGLE
THICK
STRIPE
ACROSS
BACK
AND
TAIL
TWO
THINNER
STRIPES
OR
A
SERIES
OF
WHITE
SPOTS
AND
BROKEN
STRIPES
RABBIT
GIANT
PANDA
AN
ANIMAL
CHARACTERIZED
BY
ITS
DISTINCT
BLACK
AND
WHITE
MARKINGS
RED
PANDA
REDDISH
BROWN
OLD
WORLD
RACCOON
LIKE
CARNIVORE
FROG
TOAD
LIZARD
PLEASE
DO
NOT
CONFUSE
WITH
SNAKE
LIZARDS
HAVE
LEGS
TURTLE
ARMADILLO
PORCUPINE
HEDGEHOG
LIVING
ORGANISM
WITH
OR
MORE
LEGS
LOBSTER
SCORPION
INSECTS
ETC
LOBSTER
LARGE
MARINE
CRUSTACEANS
WITH
LONG
BODIES
AND
MUSCULAR
TAILS
THREE
OF
THEIR
FIVE
PAIRS
OF
LEGS
HAVE
CLAWS
SCORPION
CENTIPEDE
AN
ARTHROPOD
HAVING
A
FLATTENED
BODY
OF
TO
SEGMENTS
EACH
WITH
A
PAIR
OF
LEGS
THE
FOREMOST
PAIR
BEING
MODIFIED
AS
PREHENSORS
TICK
A
SMALL
CREATURE
WITH
PAIRS
OF
LEGS
WHICH
LIVES
ON
THE
BLOOD
OF
MAMMALS
AND
BIRDS
ISOPOD
A
SMALL
CRUSTACEAN
WITH
SEVEN
PAIRS
OF
LEGS
ADAPTED
FOR
CRAWLING
ANT
LIVING
ORGANISM
WITHOUT
LEGS
FISH
SNAKE
SEAL
ETC
PLEASE
DON
T
INCLUDE
PLANTS
LIVING
ORGANISM
THAT
LIVES
IN
WATER
SEAL
WHALE
FISH
SEA
CUCUMBER
ETC
JELLYFISH
STARFISH
SEA
STAR
SEAL
WHALE
RAY
A
MARINE
ANIMAL
WITH
A
HORIZONTALLY
FLATTENED
BODY
AND
ENLARGED
WINGLIKE
PECTORAL
FINS
WITH
GILLS
ON
THE
UNDERSIDE
GOLDFISH
SMALL
GOLDEN
OR
ORANGE
RED
FISHES
LIVING
ORGANISM
THAT
SLIDES
ON
LAND
WORM
SNAIL
SNAKE
SNAIL
SNAKE
PLEASE
DO
NOT
CONFUSE
WITH
LIZARD
SNAKES
DO
NOT
HAVE
LEGS
VEHICLE
ANY
OBJECT
USED
TO
MOVE
PEOPLE
OR
OBJECTS
FROM
PLACE
TO
PLACE
A
VEHICLE
WITH
WHEELS
GOLFCART
GOLF
CART
SNOWPLOW
A
VEHICLE
USED
TO
PUSH
SNOW
FROM
ROADS
MOTORCYCLE
OR
MOPED
CAR
AUTOMOBILE
NOT
A
GOLF
CART
OR
A
BUS
BUS
A
VEHICLE
CARRYING
MANY
PASSENGERS
USED
FOR
PUBLIC
TRANSPORT
TRAIN
CART
A
HEAVY
OPEN
WAGON
USUALLY
HAVING
TWO
WHEELS
AND
DRAWN
BY
AN
ANIMAL
BICYCLE
BIKE
A
TWO
WHEELED
VEHICLE
MOVED
BY
FOOT
PEDALS
UNICYCLE
MONOCYCLE
A
VEHICLE
WITHOUT
WHEELS
SNOWMOBILE
SLEIGHS
SNOWMOBILE
TRACKED
VEHICLE
FOR
TRAVEL
ON
SNOW
WATERCRAFT
SUCH
AS
SHIP
OR
BOAT
A
CRAFT
DESIGNED
FOR
WATER
TRANSPORTATION
AIRPLANE
AN
AIRCRAFT
POWERED
BY
PROPELLERS
OR
JETS
COSMETICS
TOILETRY
DESIGNED
TO
BEAUTIFY
THE
BODY
FACE
POWDER
PERFUME
ESSENCE
USUALLY
COMES
IN
A
SMALLER
BOTTLE
THAN
HAIR
SPRAY
HAIR
SPRAY
CREAM
OINTMENT
LOTION
LIPSTICK
LIP
ROUGE
CARPENTRY
ITEMS
ITEMS
USED
IN
CARPENTRY
INCLUDING
NAILS
HAMMERS
AXES
SCREWDRIVERS
DRILLS
CHAIN
SAWS
ETC
CHAIN
SAW
CHAINSAW
NAIL
PIN
SHAPED
WITH
A
HEAD
ON
ONE
END
AND
A
POINT
ON
THE
OTHER
AXE
A
SHARP
TOOL
OFTEN
USED
TO
CUT
TREES
LOGS
HAMMER
A
BLUNT
HAND
TOOL
USED
TO
DRIVE
NAILS
IN
OR
BREAK
THINGS
APART
PLEASE
DO
NOT
CONFUSE
WITH
AXE
WHICH
IS
SHARP
SCREWDRIVER
POWER
DRILL
A
POWER
TOOL
FOR
DRILLING
HOLES
INTO
HARD
MATERIALS
SCHOOL
SUPPLIES
RULERS
ERASERS
PENCIL
SHARPENERS
PENCIL
BOXES
BINDERS
RULER
RULE
MEASURING
STICK
CONSISTING
OF
A
STRIP
OF
WOOD
OR
METAL
OR
PLASTIC
WITH
A
STRAIGHT
EDGE
THAT
IS
USED
FOR
DRAWING
STRAIGHT
LINES
AND
MEASURING
LENGTHS
RUBBER
ERASER
RUBBER
PENCIL
ERASER
INT
J
COMPUT
VIS
PENCIL
SHARPENER
PENCIL
BOX
PENCIL
CASE
BINDER
RING
BINDER
SPORTS
ITEMS
ITEMS
USED
TO
PLAY
SPORTS
OR
IN
THE
GYM
SUCH
AS
SKIS
RAQUETS
GYMNASTICS
BARS
BOWS
PUNCHING
BAGS
BALLS
BOW
WEAPON
FOR
SHOOTING
ARROWS
COMPOSED
OF
A
CURVED
PIECE
OF
RESILIENT
WOOD
WITH
A
TAUT
CORD
TO
PROPEL
THE
ARROW
PUCK
HOCKEY
PUCK
VULCANIZED
RUBBER
DISK
INCHES
IN
DIAMETER
THAT
IS
USED
INSTEAD
OF
A
BALL
IN
ICE
HOCKEY
SKI
RACKET
RACQUET
GYMNASTIC
EQUIPMENT
PARALLEL
BARS
HIGH
BEAM
ETC
BALANCE
BEAM
A
HORIZONTAL
BAR
USED
FOR
GYMNASTICS
WHICH
IS
RAISED
FROM
THE
FLOOR
AND
WIDE
ENOUGH
TO
WALK
ON
HORIZONTAL
BAR
HIGH
BAR
USED
FOR
GYMNASTICS
GYMNASTS
GRIP
IT
WITH
THEIR
HANDS
PLEASE
DO
NOT
CONFUSE
WITH
BALANCE
BEAM
WHICH
IS
WIDE
ENOUGH
TO
WALK
ON
BALL
GOLF
BALL
BASEBALL
BASKETBALL
CROQUET
BALL
SOCCER
BALL
PING
PONG
BALL
RUGBY
BALL
VOLLEYBALL
TENNIS
BALL
PUNCHING
BAG
PUNCH
BAG
PUNCHING
BALL
PUNCHBALL
DUMBBELL
AN
EXERCISING
WEIGHT
TWO
SPHERES
CONNECTED
BY
A
SHORT
BAR
THAT
SERVES
AS
A
HANDLE
LIQUID
CONTAINER
VESSELS
WHICH
COMMONLY
CONTAIN
LIQUIDS
SUCH
AS
BOTTLES
CANS
ETC
PITCHER
A
VESSEL
WITH
A
HANDLE
AND
A
SPOUT
FOR
POURING
BEAKER
A
FLATBOTTOMED
JAR
MADE
OF
GLASS
OR
PLASTIC
USED
FOR
CHEMISTRY
MILK
CAN
SOAP
DISPENSER
WINE
BOTTLE
WATER
BOTTLE
CUP
OR
MUG
USUALLY
WITH
A
HANDLE
AND
USUALLY
CYLINDRICAL
BAG
BACKPACK
A
BAG
CARRIED
BY
A
STRAP
ON
YOUR
BACK
OR
SHOULDER
PURSE
A
SMALL
BAG
FOR
CARRYING
MONEY
PLASTIC
BAG
PERSON
FLOWER
POT
A
CONTAINER
IN
WHICH
PLANTS
ARE
CULTIVATED
APPENDIX
MODIFICATION
TO
BOUNDING
BOX
SYSTEM
FOR
OBJECT
DETECTION
THE
BOUNDING
BOX
ANNOTATION
SYSTEM
DESCRIBED
IN
SECT
IS
USED
FOR
ANNOTATING
IMAGES
FOR
BOTH
THE
SINGLE
OBJECT
LOCALIZATION
DATASET
AND
THE
OBJECT
DETECTION
DATASET
HOWEVER
TWO
ADDITIONAL
MANUAL
POST
PROCESSING
ARE
NEEDED
TO
ENSURE
ACCURACY
IN
THE
OBJECT
DETECTION
SCENARIO
AMBIGUOUS
OBJECTS
THE
FIRST
COMMON
SOURCE
OF
ERROR
WAS
THAT
WORKERS
WERE
NOT
ABLE
TO
ACCURATELY
DIFFERENTIATE
SOME
OBJECT
CLASSES
DURING
ANNOTATION
SOME
COMMONLY
CONFUSED
LABELS
WERE
SEAL
AND
SEA
OTTER
BACKPACK
AND
PURSE
BANJO
AND
GUITAR
VIOLIN
AND
CELLO
BRASS
INSTRUMENTS
TRUMPET
TROMBONE
FRENCH
HORN
AND
BRASS
FLUTE
AND
OBOE
LADLE
AND
SPATULA
DESPITE
OUR
BEST
EFFORTS
PROVIDING
POSITIVE
AND
NEGATIVE
EXAMPLE
IMAGES
IN
THE
ANNOTATION
TASK
ADDING
TEXT
EXPLANATIONS
TO
ALERT
THE
USER
TO
THE
DISTINCTION
BETWEEN
THESE
CATEGORIES
THESE
ERRORS
PERSISTED
IN
THE
SINGLE
OBJECT
LOCALIZATION
SETTING
THIS
PROBLEM
WAS
NOT
AS
PROMINENT
FOR
TWO
REASONS
FIRST
THE
WAY
THE
DATA
WAS
COLLECTED
IMPOSED
A
STRONG
PRIOR
ON
THE
OBJECT
CLASS
WHICH
WAS
PRESENT
SECOND
SINCE
ONLY
ONE
OBJECT
CATEGORY
NEEDED
TO
BE
ANNOTATED
PER
IMAGE
AMBIGUOUS
IMAGES
COULD
BE
DISCARDED
FOR
EXAMPLE
IF
WORKERS
COULDN
T
AGREE
ON
WHETHER
OR
NOT
A
TRUMPET
WAS
IN
FACT
PRESENT
THIS
IMAGE
COULD
SIMPLY
BE
REMOVED
IN
CONTRAST
FOR
THE
OBJECT
DETECTION
SETTING
CONSENSUS
HAD
TO
BE
REACHED
FOR
ALL
TARGET
CATEGORIES
ON
ALL
IMAGES
TO
FIX
THIS
PROBLEM
ONCE
BOUNDING
BOX
ANNOTATIONS
WERE
COLLECTED
WE
MANUALLY
LOOKED
THROUGH
ALL
CASES
WHERE
THE
BOUNDING
BOXES
FOR
TWO
DIFFERENT
OBJECT
CLASSES
HAD
SIGNIFICANT
OVERLAP
WITH
EACH
OTHER
ABOUT
OF
THE
COLLECTED
BOXES
ABOUT
A
QUARTER
OF
THESE
BOXES
WERE
FOUND
TO
CORRESPOND
TO
INCORRECT
OBJECTS
AND
WERE
REMOVED
CROWDSOURCING
THIS
POST
PROCESSING
STEP
WITH
VERY
STRINGENT
ACCURACY
CONSTRAINTS
WOULD
BE
POSSIBLE
BUT
IT
OCCURRED
IN
FEW
ENOUGH
CASES
THAT
ITWAS
FASTER
AND
MORE
ACCURATE
TO
DO
THIS
IN
HOUSE
DUPLICATE
ANNOTATIONS
THE
SECOND
COMMON
SOURCE
OF
ERROR
WERE
DUPLICATE
BOUNDING
BOXES
DRAWN
ON
THE
SAME
OBJECT
INSTANCE
DESPITE
INSTRUCTIONS
NOT
TO
DRAW
MORE
THAN
ONE
BOUNDING
BOX
AROUND
THE
SAME
OBJECT
INSTANCE
AND
CONSTRAINTS
IN
THE
ANNOTATION
UI
ENFORCING
AT
LEAST
A
PIXEL
DIFFERENCE
BETWEEN
DIFFERENT
BOUNDING
BOXES
THESE
ERRORS
PERSISTED
ONE
REASONWAS
THAT
SOMETIMES
THE
INITIAL
BOUNDING
BOX
WAS
NOT
PERFECT
AND
SUBSEQUENT
LABELERS
DREW
A
SLIGHTLY
IMPROVED
ALTERNATIVE
THIS
TYPE
OF
ERROR
WAS
ALSO
PRESENT
IN
THE
SINGLE
OBJECT
LOCALIZATION
SCENARIO
BUT
WAS
NOT
A
MAJOR
CAUSE
FOR
CONCERN
A
DUPLICATE
BOUNDING
BOX
IS
A
SLIGHTLY
PERTURBED
BUT
STILL
CORRECT
POSITIVE
EXAMPLE
AND
SINGLE
OBJECT
LOCALIZATION
IS
ONLY
CONCERNED
WITH
CORRECTLY
LOCALIZING
ONE
OBJECT
INSTANCE
FOR
THE
DETECTION
TASK
ALGORITHMS
ARE
EVALUATED
ON
THE
ABILITY
TO
LOCALIZE
EVERY
OBJECT
INSTANCE
AND
PENALIZED
FOR
DUPLICATE
DETECTIONS
SO
IT
IS
IMPERATIVE
THAT
THESE
LABELING
ERRORS
ARE
CORRECTED
EVEN
IF
THEY
ONLY
APPEAR
IN
ABOUT
OF
CASES
APPROXIMATELY
OF
BOUNDING
BOXES
WERE
FOUND
TO
HAVE
SIGNIFICANT
OVERLAP
OF
MORE
THAN
WITH
ANOTHER
BOUNDING
BOX
OF
THE
SAME
OBJECT
CLASS
WE
AGAIN
MANUALLY
VERIFIED
ALL
OF
THESE
CASES
IN
HOUSE
IN
APPROXIMATELY
OF
THE
CASES
THE
TWO
BOUNDING
BOXES
CORRECTLY
CORRESPONDED
TO
DIFFERENT
PEOPLE
IN
A
CROWD
TO
STACKED
PLATES
OR
TOMUSICAL
INSTRUMENTS
NEARBY
IN
AN
ORCHESTRA
IN
THE
OTHER
OF
CASES
ONE
OF
THE
BOXES
WAS
RANDOMLY
REMOVED
THESE
VERIFICATION
STEPS
COMPLETE
THE
ANNOTATION
PROCEDURE
OF
BOUNDING
BOXES
AROUND
EVERY
INSTANCE
OF
EVERY
OBJECT
CLASS
IN
VALIDATION
TEST
AND
A
SUBSET
OF
TRAINING
IMAGES
FOR
THE
DETECTION
TASK
TRAINING
SET
ANNOTATION
WITH
THE
OPTIMIZED
ALGORITHM
OF
SECT
WE
FULLY
ANNOTATED
THE
VALIDATION
AND
TEST
SETS
HOWEVER
ANNOTATING
ALL
TRAINING
IMAGES
WITH
ALL
TARGET
OBJECT
CLASSES
WAS
STILL
A
BUDGET
CHALLENGE
POSITIVE
TRAINING
IMAGES
TAKEN
FROM
THE
SINGLE
OBJECT
LOCALIZATION
DATASET
ALREADY
HAD
BOUNDING
BOX
ANNOTATIONS
OF
ALL
INSTANCES
OF
ONE
OBJECT
CLASS
ON
EACH
IMAGE
WE
EXTENDED
THE
EXISTING
ANNOTATIONS
TO
THE
DETECTION
DATASET
BY
MAKING
TWO
MODIFICATION
FIRST
WE
CORRECTED
ANY
BOUNDING
BOX
OMISSIONS
RESULTING
FROM
MERGING
FINE
GRAINED
CATEGORIES
I
E
IF
AN
IMAGE
BELONGED
TO
THE
DALMATIAN
CATEGORY
AND
ALL
INSTANCES
OF
DALMATIAN
WERE
ANNOTATED
WITH
BOUNDING
BOXES
FOR
SINGLE
OBJECT
LOCALIZATION
WE
ENSURED
THAT
ALL
REMAINING
DOG
INSTANCES
ARE
ALSO
ANNOTATED
FOR
THE
OBJECT
DETECTION
TASK
SECOND
WE
COLLECTED
SIGNIFICANTLY
MORE
TRAINING
DATA
FOR
THE
PERSON
CLASS
BECAUSE
INT
J
COMPUT
VIS
THE
EXISTING
ANNOTATION
SET
WAS
NOT
DIVERSE
ENOUGH
TO
BE
REPRESENTATIVE
THE
ONLY
PEOPLE
CATEGORIES
IN
THE
SINGLE
OBJECT
LOCALIZATION
TASK
ARE
SCUBA
DIVER
GROOM
AND
BALLPLAYER
TO
COMPENSATE
WE
ADDITIONALLY
ANNOTATED
PEOPLE
IN
A
LARGE
FRACTION
OF
THE
EXISTING
TRAINING
SET
IMAGES
APPENDIX
COMPETITION
PROTOCOL
COMPETITION
FORMAT
AT
THE
BEGINNING
OF
THE
COMPETITION
PERIOD
EACH
YEAR
WE
RELEASE
THE
NEW
TRAINING
VALIDATION
TEST
IMAGES
TRAINING
VALIDATION
ANNOTATIONS
AND
COMPETITION
SPECIFICATION
FOR
THE
YEAR
WE
THEN
SPECIFY
A
DEADLINE
FOR
SUBMISSION
USUALLY
APPROXIMATELY
MONTHS
AFTER
THE
RELEASE
OF
DATA
TEAMS
ARE
ASKED
TO
UPLOAD
A
TEXT
FILE
OF
THEIR
PREDICTED
ANNOTATIONS
ON
TEST
IMAGES
BY
THIS
DEADLINE
TO
A
PROVIDED
SERVER
WE
THEN
EVALUATE
ALL
SUBMISSIONS
AND
RELEASE
THE
RESULTS
FOR
EVERY
TASK
WE
RELEASED
CODE
THAT
TAKES
A
TEXT
FILE
OF
AUTOMATICALLY
GENERATED
IMAGE
ANNOTATIONS
AND
COMPARES
IT
WITH
THE
GROUND
TRUTH
ANNOTATIONS
TO
RETURN
A
QUANTITATIVE
MEASURE
OF
ALGORITHM
ACCURACY
TEAMS
CAN
USE
THIS
CODE
TO
EVALUATE
THEIR
PERFORMANCE
ON
THE
VALIDATION
DATA
AS
DESCRIBED
IN
EVERINGHAM
ET
AL
THERE
ARE
THREE
OPTIONS
FOR
MEASURING
PERFORMANCE
ON
TEST
DATA
I
RELEASE
TEST
IMAGES
AND
ANNOTATIONS
AND
ALLOW
PARTICIPANTS
TO
ASSESS
PERFORMANCE
THEMSELVES
II
RELEASE
TEST
IMAGES
BUT
NOT
TEST
ANNOTATIONS
PARTICIPANTS
SUBMIT
RESULTS
AND
ORGANIZERS
ASSESS
PERFORMANCE
III
NEITHER
TEST
IMAGES
NOR
ANNOTATIONS
ARE
RELEASED
PARTICIPANTS
SUBMIT
SOFTWARE
AND
ORGANIZERS
RUN
IT
ON
NEW
DATA
AND
ASSESS
PERFORMANCE
IN
LINE
WITH
THE
PASCAL
VOC
CHOICE
WE
OPTED
FOR
OPTION
II
OPTION
I
ALLOWS
TOO
MUCH
LEEWAY
IN
OVERFITTING
TO
THE
TEST
DATA
OPTION
III
IS
INFEASIBLE
ESPECIALLY
GIVEN
THE
SCALE
OF
OUR
TEST
SET
IMAGES
WE
RELEASED
TEST
ANNOTATIONS
FOR
THE
IMAGE
CLASSIFICATION
TASK
BUT
ALL
OTHER
TEST
ANNOTATIONS
HAVE
REMAINED
HIDDEN
TO
DISCOURAGE
FINE
TUNING
RESULTS
ON
THE
TEST
DATA
EVALUATION
PROTOCOL
AFTER
THE
CHALLENGE
AFTER
THE
CHALLENGE
PERIOD
WE
SET
UP
AN
AUTOMATIC
EVALUATION
SERVER
THAT
RESEARCHERS
CAN
USE
THROUGHOUT
THE
YEAR
TO
CONTINUE
EVALUATING
THEIR
ALGORITHMS
AGAINST
THE
GROUND
TRUTH
TEST
ANNOTATIONS
WE
LIMIT
TEAMS
TO
SUBMISSIONS
PER
WEEK
TO
DISCOURAGE
PARAMETER
TUNING
ON
THE
TEST
DATA
AND
IN
PRACTICE
WE
HAVE
NEVER
HAD
A
PROBLEM
WITH
RESEARCHERS
ABUSING
THE
SYSTEM
IN
THIS
WORK
WE
INVESTIGATE
THE
EFFECT
OF
THE
CONVOLUTIONAL
NETWORK
DEPTH
ON
ITS
ACCURACY
IN
THE
LARGE
SCALE
IMAGE
RECOGNITION
SETTING
OUR
MAIN
CONTRIBUTION
IS
A
THOROUGH
EVALUATION
OF
NETWORKS
OF
INCREASING
DEPTH
USING
AN
ARCHITECTURE
WITH
VERY
SMALL
CONVOLUTION
FILTERS
WHICH
SHOWS
THAT
A
SIGNIFICANT
IMPROVEMENT
ON
THE
PRIOR
ART
CONFIGURATIONS
CAN
BE
ACHIEVED
BY
PUSHING
THE
DEPTH
TO
WEIGHT
LAYERS
THESE
FINDINGS
WERE
THE
BASIS
OF
OUR
IMAGENET
CHALLENGE
SUBMISSION
WHERE
OUR
TEAM
SECURED
THE
FIRST
AND
THE
SECOND
PLACES
IN
THE
LOCALISA
TION
AND
CLASSIFICATION
TRACKS
RESPECTIVELY
WE
ALSO
SHOW
THAT
OUR
REPRESENTATIONS
GENERALISE
WELL
TO
OTHER
DATASETS
WHERE
THEY
ACHIEVE
STATE
OF
THE
ART
RESULTS
WE
HAVE
MADE
OUR
TWO
BEST
PERFORMING
CONVNET
MODELS
PUBLICLY
AVAILABLE
TO
FACILI
TATE
FURTHER
RESEARCH
ON
THE
USE
OF
DEEP
VISUAL
REPRESENTATIONS
IN
COMPUTER
VISION
I
NTRODUCTION
CONVOLUTIONAL
NETWORKS
CONVNETS
HAVE
RECENTLY
ENJOYED
A
GREAT
SUCCESS
IN
LARGE
SCALE
IM
AGE
AND
VIDEO
RECOGNITION
KRIZHEVSKY
ET
AL
ZEILER
FERGUS
SERMANET
ET
AL
SIMONYAN
ZISSERMAN
WHICH
HAS
BECOME
POSSIBLE
DUE
TO
THE
LARGE
PUBLIC
IMAGE
REPOSITO
RIES
SUCH
AS
IMAGENET
DENG
ET
AL
AND
HIGH
PERFORMANCE
COMPUTING
SYSTEMS
SUCH
AS
GPUS
OR
LARGE
SCALE
DISTRIBUTED
CLUSTERS
DEAN
ET
AL
IN
PARTICULAR
AN
IMPORTANT
ROLE
IN
THE
ADVANCE
OF
DEEP
VISUAL
RECOGNITION
ARCHITECTURES
HAS
BEEN
PLAYED
BY
THE
IMAGENET
LARGE
SCALE
VISUAL
RECOG
NITION
CHALLENGE
ILSVRC
RUSSAKOVSKY
ET
AL
WHICH
HAS
SERVED
AS
A
TESTBED
FOR
A
FEW
GENERATIONS
OF
LARGE
SCALE
IMAGE
CLASSIFICATION
SYSTEMS
FROM
HIGH
DIMENSIONAL
SHALLOW
FEATURE
EN
CODINGS
PERRONNIN
ET
AL
THE
WINNER
OF
ILSVRC
TO
DEEP
CONVNETS
KRIZHEVSKY
ET
AL
THE
WINNER
OF
ILSVRC
WITH
CONVNETS
BECOMING
MORE
OF
A
COMMODITY
IN
THE
COMPUTER
VISION
FIELD
A
NUMBER
OF
AT
TEMPTS
HAVE
BEEN
MADE
TO
IMPROVE
THE
ORIGINAL
ARCHITECTURE
OF
KRIZHEVSKY
ET
AL
IN
A
BID
TO
ACHIEVE
BETTER
ACCURACY
FOR
INSTANCE
THE
BEST
PERFORMING
SUBMISSIONS
TO
THE
ILSVRC
ZEILER
FERGUS
SERMANET
ET
AL
UTILISED
SMALLER
RECEPTIVE
WINDOW
SIZE
AND
SMALLER
STRIDE
OF
THE
FIRST
CONVOLUTIONAL
LAYER
ANOTHER
LINE
OF
IMPROVEMENTS
DEALT
WITH
TRAINING
AND
TESTING
THE
NETWORKS
DENSELY
OVER
THE
WHOLE
IMAGE
AND
OVER
MULTIPLE
SCALES
SERMANET
ET
AL
HOWARD
IN
THIS
PAPER
WE
ADDRESS
ANOTHER
IMPORTANT
ASPECT
OF
CONVNET
ARCHITECTURE
DESIGN
ITS
DEPTH
TO
THIS
END
WE
FIX
OTHER
PARAMETERS
OF
THE
ARCHITECTURE
AND
STEADILY
INCREASE
THE
DEPTH
OF
THE
NETWORK
BY
ADDING
MORE
CONVOLUTIONAL
LAYERS
WHICH
IS
FEASIBLE
DUE
TO
THE
USE
OF
VERY
SMALL
CONVOLUTION
FILTERS
IN
ALL
LAYERS
AS
A
RESULT
WE
COME
UP
WITH
SIGNIFICANTLY
MORE
ACCURATE
CONVNET
ARCHITECTURES
WHICH
NOT
ONLY
ACHIEVE
THE
STATE
OF
THE
ART
ACCURACY
ON
ILSVRC
CLASSIFICATION
AND
LOCALISATION
TASKS
BUT
ARE
ALSO
APPLICABLE
TO
OTHER
IMAGE
RECOGNITION
DATASETS
WHERE
THEY
ACHIEVE
EXCELLENT
PERFORMANCE
EVEN
WHEN
USED
AS
A
PART
OF
A
RELATIVELY
SIMPLE
PIPELINES
E
G
DEEP
FEATURES
CLASSIFIED
BY
A
LINEAR
SVM
WITHOUT
FINE
TUNING
WE
HAVE
RELEASED
OUR
TWO
BEST
PERFORMING
TO
FACILITATE
FURTHER
RESEARCH
THE
REST
OF
THE
PAPER
IS
ORGANISED
AS
FOLLOWS
IN
SECT
WE
DESCRIBE
OUR
CONVNET
CONFIGURATIONS
THE
DETAILS
OF
THE
IMAGE
CLASSIFICATION
TRAINING
AND
EVALUATION
ARE
THEN
PRESENTED
IN
SECT
AND
THE
CURRENT
AFFILIATION
GOOGLE
DEEPMIND
CURRENT
AFFILIATION
UNIVERSITY
OF
OXFORD
AND
GOOGLE
DEEPMIND
HTTP
WWW
ROBOTS
OX
AC
UK
VGG
RESEARCH
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
CONFIGURATIONS
ARE
COMPARED
ON
THE
ILSVRC
CLASSIFICATION
TASK
IN
SECT
SECT
CONCLUDES
THE
PAPER
FOR
COMPLETENESS
WE
ALSO
DESCRIBE
AND
ASSESS
OUR
ILSVRC
OBJECT
LOCALISATION
SYSTEM
IN
APPENDIX
A
AND
DISCUSS
THE
GENERALISATION
OF
VERY
DEEP
FEATURES
TO
OTHER
DATASETS
IN
APPENDIX
B
FINALLY
APPENDIX
C
CONTAINS
THE
LIST
OF
MAJOR
PAPER
REVISIONS
C
ONV
N
ET
C
ONFIGURATIONS
TO
MEASURE
THE
IMPROVEMENT
BROUGHT
BY
THE
INCREASED
CONVNET
DEPTH
IN
A
FAIR
SETTING
ALL
OUR
CONVNET
LAYER
CONFIGURATIONS
ARE
DESIGNED
USING
THE
SAME
PRINCIPLES
INSPIRED
BY
CIRESAN
ET
AL
KRIZHEVSKY
ET
AL
IN
THIS
SECTION
WE
FIRST
DESCRIBE
A
GENERIC
LAYOUT
OF
OUR
CONVNET
CONFIGURATIONS
SECT
AND
THEN
DETAIL
THE
SPECIFIC
CONFIGURATIONS
USED
IN
THE
EVALUATION
SECT
OUR
DESIGN
CHOICES
ARE
THEN
DISCUSSED
AND
COMPARED
TO
THE
PRIOR
ART
IN
SECT
A
RCHITECTURE
DURING
TRAINING
THE
INPUT
TO
OUR
CONVNETS
IS
A
FIXED
SIZE
RGB
IMAGE
THE
ONLY
PRE
PROCESSING
WE
DO
IS
SUBTRACTING
THE
MEAN
RGB
VALUE
COMPUTED
ON
THE
TRAINING
SET
FROM
EACH
PIXEL
THE
IMAGE
IS
PASSED
THROUGH
A
STACK
OF
CONVOLUTIONAL
CONV
LAYERS
WHERE
WE
USE
FILTERS
WITH
A
VERY
SMALL
RECEPTIVE
FIELD
WHICH
IS
THE
SMALLEST
SIZE
TO
CAPTURE
THE
NOTION
OF
LEFT
RIGHT
UP
DOWN
CENTER
IN
ONE
OF
THE
CONFIGURATIONS
WE
ALSO
UTILISE
CONVOLUTION
FILTERS
WHICH
CAN
BE
SEEN
AS
A
LINEAR
TRANSFORMATION
OF
THE
INPUT
CHANNELS
FOLLOWED
BY
NON
LINEARITY
THE
CONVOLUTION
STRIDE
IS
FIXED
TO
PIXEL
THE
SPATIAL
PADDING
OF
CONV
LAYER
INPUT
IS
SUCH
THAT
THE
SPATIAL
RESOLUTION
IS
PRESERVED
AFTER
CONVOLUTION
I
E
THE
PADDING
IS
PIXEL
FOR
CONV
LAYERS
SPATIAL
POOLING
IS
CARRIED
OUT
BY
FIVE
MAX
POOLING
LAYERS
WHICH
FOLLOW
SOME
OF
THE
CONV
LAYERS
NOT
ALL
THE
CONV
LAYERS
ARE
FOLLOWED
BY
MAX
POOLING
MAX
POOLING
IS
PERFORMED
OVER
A
PIXEL
WINDOW
WITH
STRIDE
A
STACK
OF
CONVOLUTIONAL
LAYERS
WHICH
HAS
A
DIFFERENT
DEPTH
IN
DIFFERENT
ARCHITECTURES
IS
FOLLOWED
BY
THREE
FULLY
CONNECTED
FC
LAYERS
THE
FIRST
TWO
HAVE
CHANNELS
EACH
THE
THIRD
PERFORMS
WAY
ILSVRC
CLASSIFICATION
AND
THUS
CONTAINS
CHANNELS
ONE
FOR
EACH
CLASS
THE
FINAL
LAYER
IS
THE
SOFT
MAX
LAYER
THE
CONFIGURATION
OF
THE
FULLY
CONNECTED
LAYERS
IS
THE
SAME
IN
ALL
NETWORKS
ALL
HIDDEN
LAYERS
ARE
EQUIPPED
WITH
THE
RECTIFICATION
RELU
KRIZHEVSKY
ET
AL
NON
LINEARITY
WE
NOTE
THAT
NONE
OF
OUR
NETWORKS
EXCEPT
FOR
ONE
CONTAIN
LOCAL
RESPONSE
NORMALISATION
LRN
NORMALISATION
KRIZHEVSKY
ET
AL
AS
WILL
BE
SHOWN
IN
SECT
SUCH
NORMALISATION
DOES
NOT
IMPROVE
THE
PERFORMANCE
ON
THE
ILSVRC
DATASET
BUT
LEADS
TO
INCREASED
MEMORY
CON
SUMPTION
AND
COMPUTATION
TIME
WHERE
APPLICABLE
THE
PARAMETERS
FOR
THE
LRN
LAYER
ARE
THOSE
OF
KRIZHEVSKY
ET
AL
C
ONFIGURATIONS
THE
CONVNET
CONFIGURATIONS
EVALUATED
IN
THIS
PAPER
ARE
OUTLINED
IN
TABLE
ONE
PER
COLUMN
IN
THE
FOLLOWING
WE
WILL
REFER
TO
THE
NETS
BY
THEIR
NAMES
A
E
ALL
CONFIGURATIONS
FOLLOW
THE
GENERIC
DESIGN
PRESENTED
IN
SECT
AND
DIFFER
ONLY
IN
THE
DEPTH
FROM
WEIGHT
LAYERS
IN
THE
NETWORK
A
CONV
AND
FC
LAYERS
TO
WEIGHT
LAYERS
IN
THE
NETWORK
E
CONV
AND
FC
LAYERS
THE
WIDTH
OF
CONV
LAYERS
THE
NUMBER
OF
CHANNELS
IS
RATHER
SMALL
STARTING
FROM
IN
THE
FIRST
LAYER
AND
THEN
INCREASING
BY
A
FACTOR
OF
AFTER
EACH
MAX
POOLING
LAYER
UNTIL
IT
REACHES
IN
TABLE
WE
REPORT
THE
NUMBER
OF
PARAMETERS
FOR
EACH
CONFIGURATION
IN
SPITE
OF
A
LARGE
DEPTH
THE
NUMBER
OF
WEIGHTS
IN
OUR
NETS
IS
NOT
GREATER
THAN
THE
NUMBER
OF
WEIGHTS
IN
A
MORE
SHALLOW
NET
WITH
LARGER
CONV
LAYER
WIDTHS
AND
RECEPTIVE
FIELDS
WEIGHTS
IN
SERMANET
ET
AL
D
ISCUSSION
OUR
CONVNET
CONFIGURATIONS
ARE
QUITE
DIFFERENT
FROM
THE
ONES
USED
IN
THE
TOP
PERFORMING
ENTRIES
OF
THE
ILSVRC
KRIZHEVSKY
ET
AL
AND
ILSVRC
COMPETITIONS
ZEILER
FERGUS
SERMANET
ET
AL
RATHER
THAN
USING
RELATIVELY
LARGE
RECEPTIVE
FIELDS
IN
THE
FIRST
CONV
LAY
ERS
E
G
WITH
STRIDE
IN
KRIZHEVSKY
ET
AL
OR
WITH
STRIDE
IN
ZEILER
FERGUS
SERMANET
ET
AL
WE
USE
VERY
SMALL
RECEPTIVE
FIELDS
THROUGHOUT
THE
WHOLE
NET
WHICH
ARE
CONVOLVED
WITH
THE
INPUT
AT
EVERY
PIXEL
WITH
STRIDE
IT
IS
EASY
TO
SEE
THAT
A
STACK
OF
TWO
CONV
LAYERS
WITHOUT
SPATIAL
POOLING
IN
BETWEEN
HAS
AN
EFFECTIVE
RECEPTIVE
FIELD
OF
THREE
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
TABLE
CONVNET
CONFIGURATIONS
SHOWN
IN
COLUMNS
THE
DEPTH
OF
THE
CONFIGURATIONS
INCREASES
FROM
THE
LEFT
A
TO
THE
RIGHT
E
AS
MORE
LAYERS
ARE
ADDED
THE
ADDED
LAYERS
ARE
SHOWN
IN
BOLD
THE
CONVOLUTIONAL
LAYER
PARAMETERS
ARE
DENOTED
AS
CONVHRECEPTIVE
FIELD
SIZEI
HNUMBER
OF
CHANNELSI
THE
RELU
ACTIVATION
FUNCTION
IS
NOT
SHOWN
FOR
BREVITY
CONVNET
CONFIGURATION
A
A
LRN
B
C
D
E
WEIGHT
WEIGHT
WEIGHT
WEIGHT
WEIGHT
WEIGHT
LAYERS
LAYERS
LAYERS
LAYERS
LAYERS
LAYERS
INPUT
RGB
IMAGE
LRN
MAXPOOL
MAXPOOL
MAXPOOL
MAXPOOL
MAXPOOL
FC
FC
FC
SOFT
MAX
TABLE
NUMBER
OF
PARAMETERS
IN
MILLIONS
NETWORK
A
A
LRN
B
C
D
E
NUMBER
OF
PARAMETERS
SUCH
LAYERS
HAVE
A
EFFECTIVE
RECEPTIVE
FIELD
SO
WHAT
HAVE
WE
GAINED
BY
USING
FOR
INSTANCE
A
STACK
OF
THREE
CONV
LAYERS
INSTEAD
OF
A
SINGLE
LAYER
FIRST
WE
INCORPORATE
THREE
NON
LINEAR
RECTIFICATION
LAYERS
INSTEAD
OF
A
SINGLE
ONE
WHICH
MAKES
THE
DECISION
FUNCTION
MORE
DISCRIMINATIVE
SECOND
WE
DECREASE
THE
NUMBER
OF
PARAMETERS
ASSUMING
THAT
BOTH
THE
INPUT
AND
THE
OUTPUT
OF
A
THREE
LAYER
CONVOLUTION
STACK
HAS
C
CHANNELS
THE
STACK
IS
PARAMETRISED
BY
C
WEIGHTS
AT
THE
SAME
TIME
A
SINGLE
CONV
LAYER
WOULD
REQUIRE
C
PARAMETERS
I
E
MORE
THIS
CAN
BE
SEEN
AS
IMPOSING
A
REGULARISATION
ON
THE
CONV
FILTERS
FORCING
THEM
TO
HAVE
A
DECOMPOSITION
THROUGH
THE
FILTERS
WITH
NON
LINEARITY
INJECTED
IN
BETWEEN
THE
INCORPORATION
OF
CONV
LAYERS
CONFIGURATION
C
TABLE
IS
A
WAY
TO
INCREASE
THE
NON
LINEARITY
OF
THE
DECISION
FUNCTION
WITHOUT
AFFECTING
THE
RECEPTIVE
FIELDS
OF
THE
CONV
LAYERS
EVEN
THOUGH
IN
OUR
CASE
THE
CONVOLUTION
IS
ESSENTIALLY
A
LINEAR
PROJECTION
ONTO
THE
SPACE
OF
THE
SAME
DIMENSIONALITY
THE
NUMBER
OF
INPUT
AND
OUTPUT
CHANNELS
IS
THE
SAME
AN
ADDITIONAL
NON
LINEARITY
IS
INTRODUCED
BY
THE
RECTIFICATION
FUNCTION
IT
SHOULD
BE
NOTED
THAT
CONV
LAYERS
HAVE
RECENTLY
BEEN
UTILISED
IN
THE
NETWORK
IN
NETWORK
ARCHITECTURE
OF
LIN
ET
AL
SMALL
SIZE
CONVOLUTION
FILTERS
HAVE
BEEN
PREVIOUSLY
USED
BY
CIRESAN
ET
AL
BUT
THEIR
NETS
ARE
SIGNIFICANTLY
LESS
DEEP
THAN
OURS
AND
THEY
DID
NOT
EVALUATE
ON
THE
LARGE
SCALE
ILSVRC
DATASET
GOODFELLOW
ET
AL
APPLIED
DEEP
CONVNETS
WEIGHT
LAYERS
TO
THE
TASK
OF
STREET
NUMBER
RECOGNITION
AND
SHOWED
THAT
THE
INCREASED
DEPTH
LED
TO
BETTER
PERFORMANCE
GOOGLENET
SZEGEDY
ET
AL
A
TOP
PERFORMING
ENTRY
OF
THE
ILSVRC
CLASSIFICATION
TASK
WAS
DEVELOPED
INDEPENDENTLY
OF
OUR
WORK
BUT
IS
SIMILAR
IN
THAT
IT
IS
BASED
ON
VERY
DEEP
CONVNETS
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
WEIGHT
LAYERS
AND
SMALL
CONVOLUTION
FILTERS
APART
FROM
THEY
ALSO
USE
AND
CONVOLUTIONS
THEIR
NETWORK
TOPOLOGY
IS
HOWEVER
MORE
COMPLEX
THAN
OURS
AND
THE
SPATIAL
RESO
LUTION
OF
THE
FEATURE
MAPS
IS
REDUCED
MORE
AGGRESSIVELY
IN
THE
FIRST
LAYERS
TO
DECREASE
THE
AMOUNT
OF
COMPUTATION
AS
WILL
BE
SHOWN
IN
SECT
OUR
MODEL
IS
OUTPERFORMING
THAT
OF
SZEGEDY
ET
AL
IN
TERMS
OF
THE
SINGLE
NETWORK
CLASSIFICATION
ACCURACY
C
LASSIFICATION
F
RAMEWORK
IN
THE
PREVIOUS
SECTION
WE
PRESENTED
THE
DETAILS
OF
OUR
NETWORK
CONFIGURATIONS
IN
THIS
SECTION
WE
DESCRIBE
THE
DETAILS
OF
CLASSIFICATION
CONVNET
TRAINING
AND
EVALUATION
T
RAINING
THE
CONVNET
TRAINING
PROCEDURE
GENERALLY
FOLLOWS
KRIZHEVSKY
ET
AL
EXCEPT
FOR
SAMPLING
THE
INPUT
CROPS
FROM
MULTI
SCALE
TRAINING
IMAGES
AS
EXPLAINED
LATER
NAMELY
THE
TRAINING
IS
CARRIED
OUT
BY
OPTIMISING
THE
MULTINOMIAL
LOGISTIC
REGRESSION
OBJECTIVE
USING
MINI
BATCH
GRADIENT
DESCENT
BASED
ON
BACK
PROPAGATION
LECUN
ET
AL
WITH
MOMENTUM
THE
BATCH
SIZE
WAS
SET
TO
MOMENTUM
TO
THE
TRAINING
WAS
REGULARISED
BY
WEIGHT
DECAY
THE
PENALTY
MULTIPLIER
SET
TO
AND
DROPOUT
REGULARISATION
FOR
THE
FIRST
TWO
FULLY
CONNECTED
LAYERS
DROPOUT
RATIO
SET
TO
THE
LEARNING
RATE
WAS
INITIALLY
SET
TO
AND
THEN
DECREASED
BY
A
FACTOR
OF
WHEN
THE
VALIDATION
SET
ACCURACY
STOPPED
IMPROVING
IN
TOTAL
THE
LEARNING
RATE
WAS
DECREASED
TIMES
AND
THE
LEARNING
WAS
STOPPED
AFTER
ITERATIONS
EPOCHS
WE
CONJECTURE
THAT
IN
SPITE
OF
THE
LARGER
NUMBER
OF
PARAMETERS
AND
THE
GREATER
DEPTH
OF
OUR
NETS
COMPARED
TO
KRIZHEVSKY
ET
AL
THE
NETS
REQUIRED
LESS
EPOCHS
TO
CONVERGE
DUE
TO
A
IMPLICIT
REGULARISATION
IMPOSED
BY
GREATER
DEPTH
AND
SMALLER
CONV
FILTER
SIZES
B
PRE
INITIALISATION
OF
CERTAIN
LAYERS
THE
INITIALISATION
OF
THE
NETWORK
WEIGHTS
IS
IMPORTANT
SINCE
BAD
INITIALISATION
CAN
STALL
LEARNING
DUE
TO
THE
INSTABILITY
OF
GRADIENT
IN
DEEP
NETS
TO
CIRCUMVENT
THIS
PROBLEM
WE
BEGAN
WITH
TRAINING
THE
CONFIGURATION
A
TABLE
SHALLOW
ENOUGH
TO
BE
TRAINED
WITH
RANDOM
INITIALISATION
THEN
WHEN
TRAINING
DEEPER
ARCHITECTURES
WE
INITIALISED
THE
FIRST
FOUR
CONVOLUTIONAL
LAYERS
AND
THE
LAST
THREE
FULLY
CONNECTED
LAYERS
WITH
THE
LAYERS
OF
NET
A
THE
INTERMEDIATE
LAYERS
WERE
INITIALISED
RANDOMLY
WE
DID
NOT
DECREASE
THE
LEARNING
RATE
FOR
THE
PRE
INITIALISED
LAYERS
ALLOWING
THEM
TO
CHANGE
DURING
LEARNING
FOR
RANDOM
INITIALISATION
WHERE
APPLICABLE
WE
SAMPLED
THE
WEIGHTS
FROM
A
NORMAL
DISTRIBUTION
WITH
THE
ZERO
MEAN
AND
VARIANCE
THE
BIASES
WERE
INITIALISED
WITH
ZERO
IT
IS
WORTH
NOTING
THAT
AFTER
THE
PAPER
SUBMISSION
WE
FOUND
THAT
IT
IS
POSSIBLE
TO
INITIALISE
THE
WEIGHTS
WITHOUT
PRE
TRAINING
BY
USING
THE
RANDOM
INITIALISATION
PROCEDURE
OF
GLOROT
BENGIO
TO
OBTAIN
THE
FIXED
SIZE
CONVNET
INPUT
IMAGES
THEY
WERE
RANDOMLY
CROPPED
FROM
RESCALED
TRAINING
IMAGES
ONE
CROP
PER
IMAGE
PER
SGD
ITERATION
TO
FURTHER
AUGMENT
THE
TRAINING
SET
THE
CROPS
UNDERWENT
RANDOM
HORIZONTAL
FLIPPING
AND
RANDOM
RGB
COLOUR
SHIFT
KRIZHEVSKY
ET
AL
TRAINING
IMAGE
RESCALING
IS
EXPLAINED
BELOW
TRAINING
IMAGE
SIZE
LET
BE
THE
SMALLEST
SIDE
OF
AN
ISOTROPICALLY
RESCALED
TRAINING
IMAGE
FROM
WHICH
THE
CONVNET
INPUT
IS
CROPPED
WE
ALSO
REFER
TO
AS
THE
TRAINING
SCALE
WHILE
THE
CROP
SIZE
IS
FIXED
TO
IN
PRINCIPLE
CAN
TAKE
ON
ANY
VALUE
NOT
LESS
THAN
FOR
THE
CROP
WILL
CAPTURE
WHOLE
IMAGE
STATISTICS
COMPLETELY
SPANNING
THE
SMALLEST
SIDE
OF
A
TRAINING
IMAGE
FOR
THE
CROP
WILL
CORRESPOND
TO
A
SMALL
PART
OF
THE
IMAGE
CONTAINING
A
SMALL
OBJECT
OR
AN
OBJECT
PART
WE
CONSIDER
TWO
APPROACHES
FOR
SETTING
THE
TRAINING
SCALE
THE
FIRST
IS
TO
FIX
WHICH
CORRESPONDS
TO
SINGLE
SCALE
TRAINING
NOTE
THAT
IMAGE
CONTENT
WITHIN
THE
SAMPLED
CROPS
CAN
STILL
REPRESENT
MULTI
SCALE
IMAGE
STATISTICS
IN
OUR
EXPERIMENTS
WE
EVALUATED
MODELS
TRAINED
AT
TWO
FIXED
SCALES
WHICH
HAS
BEEN
WIDELY
USED
IN
THE
PRIOR
ART
KRIZHEVSKY
ET
AL
ZEILER
FERGUS
SERMANET
ET
AL
AND
GIVEN
A
CONVNET
CONFIGURATION
WE
FIRST
TRAINED
THE
NETWORK
USING
TO
SPEED
UP
TRAINING
OF
THE
NETWORK
IT
WAS
INITIALISED
WITH
THE
WEIGHTS
PRE
TRAINED
WITH
AND
WE
USED
A
SMALLER
INITIAL
LEARNING
RATE
OF
THE
SECOND
APPROACH
TO
SETTING
IS
MULTI
SCALE
TRAINING
WHERE
EACH
TRAINING
IMAGE
IS
INDIVIDUALLY
RESCALED
BY
RANDOMLY
SAMPLING
FROM
A
CERTAIN
RANGE
SMIN
SMAX
WE
USED
SMIN
AND
SMAX
SINCE
OBJECTS
IN
IMAGES
CAN
BE
OF
DIFFERENT
SIZE
IT
IS
BENEFICIAL
TO
TAKE
THIS
INTO
ACCOUNT
DURING
TRAINING
THIS
CAN
ALSO
BE
SEEN
AS
TRAINING
SET
AUGMENTATION
BY
SCALE
JITTERING
WHERE
A
SINGLE
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
MODEL
IS
TRAINED
TO
RECOGNISE
OBJECTS
OVER
A
WIDE
RANGE
OF
SCALES
FOR
SPEED
REASONS
WE
TRAINED
MULTI
SCALE
MODELS
BY
FINE
TUNING
ALL
LAYERS
OF
A
SINGLE
SCALE
MODEL
WITH
THE
SAME
CONFIGURATION
PRE
TRAINED
WITH
FIXED
T
ESTING
AT
TEST
TIME
GIVEN
A
TRAINED
CONVNET
AND
AN
INPUT
IMAGE
IT
IS
CLASSIFIED
IN
THE
FOLLOWING
WAY
FIRST
IT
IS
ISOTROPICALLY
RESCALED
TO
A
PRE
DEFINED
SMALLEST
IMAGE
SIDE
DENOTED
AS
Q
WE
ALSO
REFER
TO
IT
AS
THE
TEST
SCALE
WE
NOTE
THAT
Q
IS
NOT
NECESSARILY
EQUAL
TO
THE
TRAINING
SCALE
AS
WE
WILL
SHOW
IN
SECT
USING
SEVERAL
VALUES
OF
Q
FOR
EACH
LEADS
TO
IMPROVED
PERFORMANCE
THEN
THE
NETWORK
IS
APPLIED
DENSELY
OVER
THE
RESCALED
TEST
IMAGE
IN
A
WAY
SIMILAR
TO
SERMANET
ET
AL
NAMELY
THE
FULLY
CONNECTED
LAYERS
ARE
FIRST
CONVERTED
TO
CONVOLUTIONAL
LAYERS
THE
FIRST
FC
LAYER
TO
A
CONV
LAYER
THE
LAST
TWO
FC
LAYERS
TO
CONV
LAYERS
THE
RESULTING
FULLY
CONVOLUTIONAL
NET
IS
THEN
APPLIED
TO
THE
WHOLE
UNCROPPED
IMAGE
THE
RESULT
IS
A
CLASS
SCORE
MAP
WITH
THE
NUMBER
OF
CHANNELS
EQUAL
TO
THE
NUMBER
OF
CLASSES
AND
A
VARIABLE
SPATIAL
RESOLUTION
DEPENDENT
ON
THE
INPUT
IMAGE
SIZE
FINALLY
TO
OBTAIN
A
FIXED
SIZE
VECTOR
OF
CLASS
SCORES
FOR
THE
IMAGE
THE
CLASS
SCORE
MAP
IS
SPATIALLY
AVERAGED
SUM
POOLED
WE
ALSO
AUGMENT
THE
TEST
SET
BY
HORIZONTAL
FLIPPING
OF
THE
IMAGES
THE
SOFT
MAX
CLASS
POSTERIORS
OF
THE
ORIGINAL
AND
FLIPPED
IMAGES
ARE
AVERAGED
TO
OBTAIN
THE
FINAL
SCORES
FOR
THE
IMAGE
SINCE
THE
FULLY
CONVOLUTIONAL
NETWORK
IS
APPLIED
OVER
THE
WHOLE
IMAGE
THERE
IS
NO
NEED
TO
SAMPLE
MULTIPLE
CROPS
AT
TEST
TIME
KRIZHEVSKY
ET
AL
WHICH
IS
LESS
EFFICIENT
AS
IT
REQUIRES
NETWORK
RE
COMPUTATION
FOR
EACH
CROP
AT
THE
SAME
TIME
USING
A
LARGE
SET
OF
CROPS
AS
DONE
BY
SZEGEDY
ET
AL
CAN
LEAD
TO
IMPROVED
ACCURACY
AS
IT
RESULTS
IN
A
FINER
SAMPLING
OF
THE
INPUT
IMAGE
COMPARED
TO
THE
FULLY
CONVOLUTIONAL
NET
ALSO
MULTI
CROP
EVALUATION
IS
COMPLEMENTARY
TO
DENSE
EVALUATION
DUE
TO
DIFFERENT
CONVOLUTION
BOUNDARY
CONDITIONS
WHEN
APPLYING
A
CONVNET
TO
A
CROP
THE
CONVOLVED
FEATURE
MAPS
ARE
PADDED
WITH
ZEROS
WHILE
IN
THE
CASE
OF
DENSE
EVALUATION
THE
PADDING
FOR
THE
SAME
CROP
NATURALLY
COMES
FROM
THE
NEIGHBOURING
PARTS
OF
AN
IMAGE
DUE
TO
BOTH
THE
CONVOLUTIONS
AND
SPATIAL
POOLING
WHICH
SUBSTANTIALLY
INCREASES
THE
OVERALL
NETWORK
RECEPTIVE
FIELD
SO
MORE
CONTEXT
IS
CAPTURED
WHILE
WE
BELIEVE
THAT
IN
PRACTICE
THE
INCREASED
COMPUTATION
TIME
OF
MULTIPLE
CROPS
DOES
NOT
JUSTIFY
THE
POTENTIAL
GAINS
IN
ACCURACY
FOR
REFERENCE
WE
ALSO
EVALUATE
OUR
NETWORKS
USING
CROPS
PER
SCALE
REGULAR
GRID
WITH
FLIPS
FOR
A
TOTAL
OF
CROPS
OVER
SCALES
WHICH
IS
COMPARABLE
TO
CROPS
OVER
SCALES
USED
BY
SZEGEDY
ET
AL
I
MPLEMENTATION
D
ETAILS
OUR
IMPLEMENTATION
IS
DERIVED
FROM
THE
PUBLICLY
AVAILABLE
C
CAFFE
TOOLBOX
JIA
BRANCHED
OUT
IN
DECEMBER
BUT
CONTAINS
A
NUMBER
OF
SIGNIFICANT
MODIFICATIONS
ALLOWING
US
TO
PERFORM
TRAINING
AND
EVALUATION
ON
MULTIPLE
GPUS
INSTALLED
IN
A
SINGLE
SYSTEM
AS
WELL
AS
TRAIN
AND
EVALUATE
ON
FULL
SIZE
UNCROPPED
IMAGES
AT
MULTIPLE
SCALES
AS
DESCRIBED
ABOVE
MULTI
GPU
TRAINING
EXPLOITS
DATA
PARALLELISM
AND
IS
CARRIED
OUT
BY
SPLITTING
EACH
BATCH
OF
TRAINING
IMAGES
INTO
SEVERAL
GPU
BATCHES
PROCESSED
IN
PARALLEL
ON
EACH
GPU
AFTER
THE
GPU
BATCH
GRADIENTS
ARE
COMPUTED
THEY
ARE
AVERAGED
TO
OBTAIN
THE
GRADIENT
OF
THE
FULL
BATCH
GRADIENT
COMPUTATION
IS
SYNCHRONOUS
ACROSS
THE
GPUS
SO
THE
RESULT
IS
EXACTLY
THE
SAME
AS
WHEN
TRAINING
ON
A
SINGLE
GPU
WHILE
MORE
SOPHISTICATED
METHODS
OF
SPEEDING
UP
CONVNET
TRAINING
HAVE
BEEN
RECENTLY
PRO
POSED
KRIZHEVSKY
WHICH
EMPLOY
MODEL
AND
DATA
PARALLELISM
FOR
DIFFERENT
LAYERS
OF
THE
NET
WE
HAVE
FOUND
THAT
OUR
CONCEPTUALLY
MUCH
SIMPLER
SCHEME
ALREADY
PROVIDES
A
SPEEDUP
OF
TIMES
ON
AN
OFF
THE
SHELF
GPU
SYSTEM
AS
COMPARED
TO
USING
A
SINGLE
GPU
ON
A
SYSTEM
EQUIPPED
WITH
FOUR
NVIDIA
TITAN
BLACK
GPUS
TRAINING
A
SINGLE
NET
TOOK
WEEKS
DEPENDING
ON
THE
ARCHITECTURE
C
LASSIFICATION
E
XPERIMENTS
DATASET
IN
THIS
SECTION
WE
PRESENT
THE
IMAGE
CLASSIFICATION
RESULTS
ACHIEVED
BY
THE
DESCRIBED
CONVNET
ARCHITECTURES
ON
THE
ILSVRC
DATASET
WHICH
WAS
USED
FOR
ILSVRC
CHAL
LENGES
THE
DATASET
INCLUDES
IMAGES
OF
CLASSES
AND
IS
SPLIT
INTO
THREE
SETS
TRAINING
IMAGES
VALIDATION
IMAGES
AND
TESTING
IMAGES
WITH
HELD
OUT
CLASS
LABELS
THE
CLAS
SIFICATION
PERFORMANCE
IS
EVALUATED
USING
TWO
MEASURES
THE
TOP
AND
TOP
ERROR
THE
FORMER
IS
A
MULTI
CLASS
CLASSIFICATION
ERROR
I
E
THE
PROPORTION
OF
INCORRECTLY
CLASSIFIED
IMAGES
THE
LATTER
IS
THE
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
MAIN
EVALUATION
CRITERION
USED
IN
ILSVRC
AND
IS
COMPUTED
AS
THE
PROPORTION
OF
IMAGES
SUCH
THAT
THE
GROUND
TRUTH
CATEGORY
IS
OUTSIDE
THE
TOP
PREDICTED
CATEGORIES
FOR
THE
MAJORITY
OF
EXPERIMENTS
WE
USED
THE
VALIDATION
SET
AS
THE
TEST
SET
CERTAIN
EXPERIMENTS
WERE
ALSO
CARRIED
OUT
ON
THE
TEST
SET
AND
SUBMITTED
TO
THE
OFFICIAL
ILSVRC
SERVER
AS
A
VGG
TEAM
ENTRY
TO
THE
ILSVRC
COMPETITION
RUSSAKOVSKY
ET
AL
INGLE
CALE
E
VALUATION
WE
BEGIN
WITH
EVALUATING
THE
PERFORMANCE
OF
INDIVIDUAL
CONVNET
MODELS
AT
A
SINGLE
SCALE
WITH
THE
LAYER
CONFIGURATIONS
DESCRIBED
IN
SECT
THE
TEST
IMAGE
SIZE
WAS
SET
AS
FOLLOWS
Q
FOR
FIXED
AND
Q
SMIN
SMAX
FOR
JITTERED
SMIN
SMAX
THE
RESULTS
OF
ARE
SHOWN
IN
TABLE
FIRST
WE
NOTE
THAT
USING
LOCAL
RESPONSE
NORMALISATION
A
LRN
NETWORK
DOES
NOT
IMPROVE
ON
THE
MODEL
A
WITHOUT
ANY
NORMALISATION
LAYERS
WE
THUS
DO
NOT
EMPLOY
NORMALISATION
IN
THE
DEEPER
ARCHITECTURES
B
E
SECOND
WE
OBSERVE
THAT
THE
CLASSIFICATION
ERROR
DECREASES
WITH
THE
INCREASED
CONVNET
DEPTH
FROM
LAYERS
IN
A
TO
LAYERS
IN
E
NOTABLY
IN
SPITE
OF
THE
SAME
DEPTH
THE
CONFIGURATION
C
WHICH
CONTAINS
THREE
CONV
LAYERS
PERFORMS
WORSE
THAN
THE
CONFIGURATION
D
WHICH
USES
CONV
LAYERS
THROUGHOUT
THE
NETWORK
THIS
INDICATES
THAT
WHILE
THE
ADDITIONAL
NON
LINEARITY
DOES
HELP
C
IS
BETTER
THAN
B
IT
IS
ALSO
IMPORTANT
TO
CAPTURE
SPATIAL
CONTEXT
BY
USING
CONV
FILTERS
WITH
NON
TRIVIAL
RECEPTIVE
FIELDS
D
IS
BETTER
THAN
C
THE
ERROR
RATE
OF
OUR
ARCHITECTURE
SATURATES
WHEN
THE
DEPTH
REACHES
LAYERS
BUT
EVEN
DEEPER
MODELS
MIGHT
BE
BENEFICIAL
FOR
LARGER
DATASETS
WE
ALSO
COMPARED
THE
NET
B
WITH
A
SHALLOW
NET
WITH
FIVE
CONV
LAYERS
WHICH
WAS
DERIVED
FROM
B
BY
REPLACING
EACH
PAIR
OF
CONV
LAYERS
WITH
A
SINGLE
CONV
LAYER
WHICH
HAS
THE
SAME
RECEPTIVE
FIELD
AS
EXPLAINED
IN
SECT
THE
TOP
ERROR
OF
THE
SHALLOW
NET
WAS
MEASURED
TO
BE
HIGHER
THAN
THAT
OF
B
ON
A
CENTER
CROP
WHICH
CONFIRMS
THAT
A
DEEP
NET
WITH
SMALL
FILTERS
OUTPERFORMS
A
SHALLOW
NET
WITH
LARGER
FILTERS
FINALLY
SCALE
JITTERING
AT
TRAINING
TIME
LEADS
TO
SIGNIFICANTLY
BETTER
RESULTS
THAN
TRAINING
ON
IMAGES
WITH
FIXED
SMALLEST
SIDE
OR
EVEN
THOUGH
A
SINGLE
SCALE
IS
USED
AT
TEST
TIME
THIS
CONFIRMS
THAT
TRAINING
SET
AUGMENTATION
BY
SCALE
JITTERING
IS
INDEED
HELPFUL
FOR
CAPTURING
MULTI
SCALE
IMAGE
STATISTICS
TABLE
CONVNET
PERFORMANCE
AT
A
SINGLE
TEST
SCALE
CONVNET
CONFIG
TABLE
SMALLEST
IMAGE
SIDE
TOP
VAL
ERROR
TOP
VAL
ERROR
TRAIN
TEST
Q
A
A
LRN
B
C
D
E
M
ULTI
CALE
E
VALUATION
HAVING
EVALUATED
THE
CONVNET
MODELS
AT
A
SINGLE
SCALE
WE
NOW
ASSESS
THE
EFFECT
OF
SCALE
JITTERING
AT
TEST
TIME
IT
CONSISTS
OF
RUNNING
A
MODEL
OVER
SEVERAL
RESCALED
VERSIONS
OF
A
TEST
IMAGE
CORRESPONDING
TO
DIFFERENT
VALUES
OF
Q
FOLLOWED
BY
AVERAGING
THE
RESULTING
CLASS
POSTERIORS
CONSIDERING
THAT
A
LARGE
DISCREPANCY
BETWEEN
TRAINING
AND
TESTING
SCALES
LEADS
TO
A
DROP
IN
PERFORMANCE
THE
MODELS
TRAINED
WITH
FIXED
WERE
EVALUATED
OVER
THREE
TEST
IMAGE
SIZES
CLOSE
TO
THE
TRAINING
ONE
Q
AT
THE
SAME
TIME
SCALE
JITTERING
AT
TRAINING
TIME
ALLOWS
THE
NETWORK
TO
BE
APPLIED
TO
A
WIDER
RANGE
OF
SCALES
AT
TEST
TIME
SO
THE
MODEL
TRAINED
WITH
VARIABLE
SMIN
SMAX
WAS
EVALUATED
OVER
A
LARGER
RANGE
OF
SIZES
Q
SMIN
SMIN
SMAX
SMAX
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
THE
RESULTS
PRESENTED
IN
TABLE
INDICATE
THAT
SCALE
JITTERING
AT
TEST
TIME
LEADS
TO
BETTER
PERFORMANCE
AS
COMPARED
TO
EVALUATING
THE
SAME
MODEL
AT
A
SINGLE
SCALE
SHOWN
IN
TABLE
AS
BEFORE
THE
DEEPEST
CONFIGURATIONS
D
AND
E
PERFORM
THE
BEST
AND
SCALE
JITTERING
IS
BETTER
THAN
TRAINING
WITH
A
FIXED
SMALLEST
SIDE
OUR
BEST
SINGLE
NETWORK
PERFORMANCE
ON
THE
VALIDATION
SET
IS
TOP
TOP
ERROR
HIGHLIGHTED
IN
BOLD
IN
TABLE
ON
THE
TEST
SET
THE
CONFIGURATION
E
ACHIEVES
TOP
ERROR
TABLE
CONVNET
PERFORMANCE
AT
MULTIPLE
TEST
SCALES
CONVNET
CONFIG
TABLE
SMALLEST
IMAGE
SIDE
TOP
VAL
ERROR
TOP
VAL
ERROR
TRAIN
TEST
Q
B
C
D
E
M
ULTI
CROP
EVALUATION
IN
TABLE
WE
COMPARE
DENSE
CONVNET
EVALUATION
WITH
MULT
CROP
EVALUATION
SEE
SECT
FOR
DE
TAILS
WE
ALSO
ASSESS
THE
COMPLEMENTARITY
OF
THE
TWO
EVALUATION
TECHNIQUES
BY
AVERAGING
THEIR
SOFT
MAX
OUTPUTS
AS
CAN
BE
SEEN
USING
MULTIPLE
CROPS
PERFORMS
SLIGHTLY
BETTER
THAN
DENSE
EVALUATION
AND
THE
TWO
APPROACHES
ARE
INDEED
COMPLEMENTARY
AS
THEIR
COMBINATION
OUTPERFORMS
EACH
OF
THEM
AS
NOTED
ABOVE
WE
HYPOTHESIZE
THAT
THIS
IS
DUE
TO
A
DIFFERENT
TREATMENT
OF
CONVOLUTION
BOUNDARY
CONDITIONS
TABLE
CONVNET
EVALUATION
TECHNIQUES
COMPARISON
IN
ALL
EXPERIMENTS
THE
TRAINING
SCALE
WAS
SAMPLED
FROM
AND
THREE
TEST
SCALES
Q
WERE
CONSIDERED
CONVNET
CONFIG
TABLE
EVALUATION
METHOD
TOP
VAL
ERROR
TOP
VAL
ERROR
DENSE
D
MULTI
CROP
MULTI
CROP
DENSE
DENSE
E
MULTI
CROP
MULTI
CROP
DENSE
C
ONV
N
ET
F
USION
UP
UNTIL
NOW
WE
EVALUATED
THE
PERFORMANCE
OF
INDIVIDUAL
CONVNET
MODELS
IN
THIS
PART
OF
THE
EXPER
IMENTS
WE
COMBINE
THE
OUTPUTS
OF
SEVERAL
MODELS
BY
AVERAGING
THEIR
SOFT
MAX
CLASS
POSTERIORS
THIS
IMPROVES
THE
PERFORMANCE
DUE
TO
COMPLEMENTARITY
OF
THE
MODELS
AND
WAS
USED
IN
THE
TOP
ILSVRC
SUBMISSIONS
IN
KRIZHEVSKY
ET
AL
AND
ZEILER
FERGUS
SERMANET
ET
AL
THE
RESULTS
ARE
SHOWN
IN
TABLE
BY
THE
TIME
OF
ILSVRC
SUBMISSION
WE
HAD
ONLY
TRAINED
THE
SINGLE
SCALE
NETWORKS
AS
WELL
AS
A
MULTI
SCALE
MODEL
D
BY
FINE
TUNING
ONLY
THE
FULLY
CONNECTED
LAYERS
RATHER
THAN
ALL
LAYERS
THE
RESULTING
ENSEMBLE
OF
NETWORKS
HAS
ILSVRC
TEST
ERROR
AFTER
THE
SUBMISSION
WE
CONSIDERED
AN
ENSEMBLE
OF
ONLY
TWO
BEST
PERFORMING
MULTI
SCALE
MODELS
CONFIGURATIONS
D
AND
E
WHICH
REDUCED
THE
TEST
ERROR
TO
USING
DENSE
EVALUATION
AND
USING
COMBINED
DENSE
AND
MULTI
CROP
EVALUATION
FOR
REFERENCE
OUR
BEST
PERFORMING
SINGLE
MODEL
ACHIEVES
ERROR
MODEL
E
TABLE
C
OMPARISON
WITH
THE
TATE
OF
THE
A
RT
FINALLY
WE
COMPARE
OUR
RESULTS
WITH
THE
STATE
OF
THE
ART
IN
TABLE
IN
THE
CLASSIFICATION
TASK
OF
ILSVRC
CHALLENGE
RUSSAKOVSKY
ET
AL
OUR
VGG
TEAM
SECURED
THE
PLACE
WITH
PUBLISHED
AS
A
CONFERENCE
PAPER
AT
ICLR
TABLE
MULTIPLE
CONVNET
FUSION
RESULTS
ERROR
COMBINED
CONVNET
MODELS
TOP
VAL
TOP
VAL
TOP
TEST
ILSVRC
SUBMISSION
D
D
D
C
C
E
E
416
POST
SUBMISSION
D
E
DENSE
EVAL
D
E
MULTI
CROP
D
E
256
384
MULTI
CROP
DENSE
EVAL
TEST
ERROR
USING
AN
ENSEMBLE
OF
MODELS
AFTER
THE
SUBMISSION
WE
DECREASED
THE
ERROR
RATE
TO
USING
AN
ENSEMBLE
OF
MODELS
AS
CAN
BE
SEEN
FROM
TABLE
OUR
VERY
DEEP
CONVNETS
SIGNIFICANTLY
OUTPERFORM
THE
PREVIOUS
GENER
ATION
OF
MODELS
WHICH
ACHIEVED
THE
BEST
RESULTS
IN
THE
ILSVRC
AND
ILSVRC
COMPETI
TIONS
OUR
RESULT
IS
ALSO
COMPETITIVE
WITH
RESPECT
TO
THE
CLASSIFICATION
TASK
WINNER
GOOGLENET
WITH
ERROR
AND
SUBSTANTIALLY
OUTPERFORMS
THE
ILSVRC
WINNING
SUBMISSION
CLARIFAI
WHICH
ACHIEVED
WITH
OUTSIDE
TRAINING
DATA
AND
WITHOUT
IT
THIS
IS
REMARKABLE
CONSIDERING
THAT
OUR
BEST
RESULT
IS
ACHIEVED
BY
COMBINING
JUST
TWO
MODELS
SIGNIFICANTLY
LESS
THAN
USED
IN
MOST
ILSVRC
SUBMISSIONS
IN
TERMS
OF
THE
SINGLE
NET
PERFORMANCE
OUR
ARCHITECTURE
ACHIEVES
THE
BEST
RESULT
TEST
ERROR
OUTPERFORMING
A
SINGLE
GOOGLENET
BY
NOTABLY
WE
DID
NOT
DEPART
FROM
THE
CLASSICAL
CONVNET
ARCHITECTURE
OF
LECUN
ET
AL
BUT
IMPROVED
IT
BY
SUBSTANTIALLY
INCREASING
THE
DEPTH
TABLE
COMPARISON
WITH
THE
STATE
OF
THE
ART
IN
ILSVRC
CLASSIFICATION
OUR
METHOD
IS
DENOTED
AS
VGG
ONLY
THE
RESULTS
OBTAINED
WITHOUT
OUTSIDE
TRAINING
DATA
ARE
REPORTED
METHOD
TOP
VAL
ERROR
TOP
VAL
ERROR
TOP
TEST
ERROR
VGG
NETS
MULTI
CROP
DENSE
EVAL
VGG
NET
MULTI
CROP
DENSE
EVAL
VGG
ILSVRC
SUBMISSION
NETS
DENSE
EVAL
GOOGLENET
SZEGEDY
ET
AL
NET
GOOGLENET
SZEGEDY
ET
AL
NETS
MSRA
HE
ET
AL
NETS
MSRA
HE
ET
AL
NET
CLARIFAI
RUSSAKOVSKY
ET
AL
MULTIPLE
NETS
CLARIFAI
RUSSAKOVSKY
ET
AL
NET
ZEILER
FERGUS
ZEILER
FERGUS
NETS
ZEILER
FERGUS
ZEILER
FERGUS
NET
OVERFEAT
SERMANET
ET
AL
NETS
OVERFEAT
SERMANET
ET
AL
NET
KRIZHEVSKY
ET
AL
KRIZHEVSKY
ET
AL
NETS
KRIZHEVSKY
ET
AL
KRIZHEVSKY
ET
AL
NET
WE
PROPOSE
A
NATURAL
SCENE
STATISTIC
BASED
EXPANDED
TO
ENSURE
THAT
THE
END
USER
IS
PRESENTED
WITH
A
DISTORTION
GENERIC
BLIND
NO
REFERENCE
NR
IMAGE
QUALITY
SATISFACTORY
QUALITY
OF
EXPERIENCE
QOE
WHILE
TRADITIONAL
ASSESSMENT
IQA
MODEL
THAT
OPERATES
IN
THE
SPATIAL
DOMAIN
QOE
METHODS
HAVE
FOCUSED
ON
OPTIMIZING
DELIVERY
NETWORKS
THE
NEW
MODEL
DUBBED
BLIND
REFERENCELESS
IMAGE
SPATIAL
QUALITY
EVALUATOR
BRISQUE
DOES
NOT
COMPUTE
DISTORTION
SPECIFIC
WITH
RESPECT
TO
THROUGHPUT
BUFFER
LENGTHS
AND
CAPACITY
PER
FEATURES
SUCH
AS
RINGING
BLUR
OR
BLOCKING
BUT
INSTEAD
USES
SCENE
CEPTUALLY
OPTIMIZED
DELIVERY
OF
MULTIMEDIA
SERVICES
IS
ALSO
STATISTICS
OF
LOCALLY
NORMALIZED
LUMINANCE
COEFFICIENTS
TO
QUANTIFY
FAST
GAINING
IMPORTANCE
THIS
IS
ESPECIALLY
TIMELY
GIVEN
THE
POSSIBLE
LOSSES
OF
NATURALNESS
IN
THE
IMAGE
DUE
TO
THE
PRESENCE
EXPLOSIVE
GROWTH
IN
ESPECIALLY
WIRELESS
VIDEO
TRAFFIC
AND
OF
DISTORTIONS
THEREBY
LEADING
TO
A
HOLISTIC
MEASURE
OF
QUALITY
THE
EXPECTED
SHORTFALLS
IN
BANDWIDTH
THESE
PERCEPTUAL
APPROACHES
UNDERLYING
FEATURES
USED
DERIVE
FROM
THE
EMPIRICAL
DISTRIBUTION
OF
LOCALLY
NORMALIZED
LUMINANCES
AND
PRODUCTS
OF
LOCALLY
NORMALIZED
ATTEMPT
TO
DELIVER
AN
OPTIMIZED
QOE
TO
THE
END
USER
BY
LUMINANCES
UNDER
A
SPATIAL
NATURAL
SCENE
STATISTIC
MODEL
NO
UTILIZING
OBJECTIVE
MEASURES
OF
VISUAL
QUALITY
TRANSFORMATION
TO
ANOTHER
COORDINATE
FRAME
DCT
WAVELET
ETC
OBJECTIVE
BLIND
OR
NO
REFERENCE
NR
IMAGE
QUALITY
ASSESS
IS
REQUIRED
DISTINGUISHING
IT
FROM
PRIOR
NR
IQA
APPROACHES
MENT
IQA
REFERS
TO
AUTOMATIC
QUALITY
ASSESSMENT
OF
AN
IMAGE
DESPITE
ITS
SIMPLICITY
WE
ARE
ABLE
TO
SHOW
THAT
BRISQUE
USING
AN
ALGORITHM
SUCH
THAT
THE
ONLY
INFORMATION
THAT
THE
IS
STATISTICALLY
BETTER
THAN
THE
FULL
REFERENCE
PEAK
SIGNAL
TO
NOISE
RATIO
AND
THE
STRUCTURAL
SIMILARITY
INDEX
AND
IS
HIGHLY
ALGORITHM
RECEIVES
BEFORE
IT
MAKES
A
PREDICTION
ON
QUALITY
IS
COMPETITIVE
WITH
RESPECT
TO
ALL
PRESENT
DAY
DISTORTION
GENERIC
THE
DISTORTED
IMAGE
WHOSE
QUALITY
IS
BEING
ASSESSED
ON
THE
NR
IQA
ALGORITHMS
BRISQUE
HAS
VERY
LOW
COMPUTATIONAL
OTHER
END
OF
THE
SPECTRUM
LIE
FULL
REFERENCE
FR
ALGORITHMS
COMPLEXITY
MAKING
IT
WELL
SUITED
FOR
REAL
TIME
APPLICATIONS
THAT
REQUIRE
AS
INPUT
NOT
ONLY
THE
DISTORTED
IMAGE
BUT
ALSO
BRISQUE
FEATURES
MAY
BE
USED
FOR
DISTORTION
IDENTIFICATION
AS
A
CLEAN
PRISTINE
REFERENCE
IMAGE
WITH
RESPECT
TO
WHICH
THE
WELL
TO
ILLUSTRATE
A
NEW
PRACTICAL
APPLICATION
OF
BRISQUE
WE
DESCRIBE
HOW
A
NONBLIND
IMAGE
DENOISING
ALGORITHM
CAN
QUALITY
OF
THE
DISTORTED
IMAGE
IS
ASSESSED
SOMEWHERE
BETWEEN
BE
AUGMENTED
WITH
BRISQUE
IN
ORDER
TO
PERFORM
BLIND
THESE
TWO
EXTREMES
LIE
REDUCED
REFERENCE
RR
APPROACHES
THAT
IMAGE
DENOISING
RESULTS
SHOW
THAT
BRISQUE
AUGMENTATION
POSSESS
SOME
INFORMATION
REGARDING
THE
REFERENCE
IMAGE
EG
LEADS
TO
PERFORMANCE
IMPROVEMENTS
OVER
STATE
OF
THE
ART
A
WATERMARK
BUT
NOT
THE
ACTUAL
REFERENCE
IMAGE
ITSELF
APART
METHODS
A
SOFTWARE
RELEASE
OF
BRISQUE
IS
AVAILABLE
ONLINE
FROM
THE
DISTORTED
IMAGE
HTTP
LIVE
ECE
UTEXAS
EDU
RESEARCH
QUALITY
ZIP
FOR
PUBLIC
USE
AND
EVALUATION
OUR
APPROACH
TO
NR
IQA
IS
BASED
ON
THE
PRINCIPLE
THAT
NATURAL
POSSESS
CERTAIN
REGULAR
STATISTICAL
PROPERTIES
INDEX
TERMS
BLIND
QUALITY
ASSESSMENT
DENOISING
NATURAL
THAT
ARE
MEASURABLY
MODIFIED
BY
THE
PRESENCE
OF
DISTORTIONS
SCENE
STATISTICS
NO
REFERENCE
IMAGE
QUALITY
ASSESSMENT
SPATIAL
DOMAIN
FIGURE
A
AND
B
SHOWS
EXAMPLES
OF
NATURAL
AND
ARTIFICIAL
IMAGES
FROM
THE
TID
DATABASE
RESPECTIVELY
THE
NORMALIZED
LUMINANCE
COEFFICIENTS
EXPLAINED
LATER
OF
THE
NATURAL
IMAGE
I
I
NTRODUCTION
CLOSELY
FOLLOW
GAUSSIAN
LIKE
DISTRIBUTION
AS
SHOWN
IN
FIG
C
W
ITH
THE
LAUNCH
OF
NETWORKED
HANDHELD
DEVICES
WHICH
CAN
CAPTURE
STORE
COMPRESS
SEND
AND
DISPLAY
A
VARIETY
OF
AUDIOVISUAL
STIMULI
HIGH
DEFINITION
TELEVISION
HDTV
WHILE
THE
SAME
DOESNOT
HOLD
FOR
THE
EMPIRICAL
DISTRIBUTION
OF
THE
ARTIFICIAL
IMAGE
SHOWN
IN
FIG
D
DEVIATIONS
FROM
THE
REGULARITY
OF
NATURAL
STATISTICS
WHEN
STREAMING
INTERNET
PROTOCOL
TV
IPTV
AND
WEBSITES
SUCH
AS
QUANTIFIED
APPROPRIATELY
ENABLE
THE
DESIGN
OF
ALGORITHMS
CAPA
YOUTUBE
FACEBOOK
AND
FLICKR
ETC
AN
ENORMOUS
AMOUNT
OF
BLE
OF
ASSESSING
THE
PERCEPTUAL
QUALITY
OF
AN
IMAGE
WITHOUT
VISUAL
DATA
OF
VISUAL
DATA
IS
MAKING
ITS
WAY
TO
CONSUMERS
THE
NEED
FOR
ANY
REFERENCE
IMAGE
BY
QUANTIFYING
NATURAL
BECAUSE
OF
THIS
CONSIDERABLE
TIME
AND
RESOURCES
ARE
BEING
IMAGE
STATISTICS
AND
REFRAINING
FROM
AN
EXPLICIT
CHARACTER
MANUSCRIPT
RECEIVED
JANUARY
REVISED
JULY
ACCEPTED
IZATION
OF
DISTORTIONS
OUR
APPROACH
TO
QUALITY
ASSESSMENT
AUGUST
DATE
OF
PUBLICATION
AUGUST
DATE
OF
CURRENT
IS
NOT
LIMITED
BY
THE
TYPE
OF
DISTORTIONS
THAT
AFFLICT
THE
VERSION
NOVEMBER
THIS
WORK
WAS
SUPPORTED
BY
THE
NATIONAL
IMAGE
SUCH
APPROACHES
TO
NR
IQA
ARE
SIGNIFICANT
SINCE
MOST
SCIENCE
FOUNDATION
UNDER
GRANT
CCF
AND
GRANT
IIS
AND
BY
INTEL
CORPORATION
AND
CISCO
SYSTEMS
INC
UNDER
THE
VIDEO
AWARE
WIRELESS
CURRENT
APPROACHES
ARE
DISTORTION
SPECIFIC
I
E
THEY
NETWORKS
VAWN
PROGRAM
THE
ASSOCIATE
EDITOR
COORDINATING
THE
REVIEW
OF
ARE
CAPABLE
OF
PERFORMING
BLIND
IQA
ONLY
IF
THE
DISTORTION
THIS
MANUSCRIPT
AND
APPROVING
IT
FOR
PUBLICATION
WAS
PROF
ALEX
CHICHUNG
KOT
THE
AUTHORS
ARE
WITH
THE
LABORATORY
FOR
IMAGE
AND
VIDEO
ENGINEERING
DEPARTMENT
OF
ELECTRICAL
AND
COMPUTER
ENGINEERING
UNIVERSITY
OF
TEXAS
NATURAL
IMAGES
ARE
NOT
NECESSARILY
IMAGES
OF
NATURAL
ENVIRONMENTS
SUCH
AT
AUSTIN
AUSTIN
TX
USA
E
MAIL
MITTAL
ANISH
GMAIL
COM
AS
TREES
OR
SKIES
ANY
NATURAL
LIGHT
IMAGE
THAT
IS
CAPTURED
BY
AN
OPTICAL
CAMERA
ANUSHMOORTHY
GMAIL
COM
BOVIK
ECE
UTEXAS
EDU
AND
IS
NOT
SUBJECTED
TO
ARTIFICIAL
PROCESSING
ON
A
COMPUTER
IS
REGARDED
AS
A
COLOR
VERSIONS
OF
ONE
OR
MORE
OF
THE
FIGURES
IN
THIS
PAPER
ARE
AVAILABLE
NATURAL
IMAGE
OF
COURSE
IMAGE
SENSORS
MAY
CAPTURE
NATURAL
RADIATION
OTHER
ONLINE
AT
HTTP
IEEEXPLORE
IEEE
ORG
THAN
VISIBLE
LIGHT
BUT
THE
IMAGES
FORMED
MAY
OBEY
DIFFERENT
NSS
THAN
THOSE
DIGITAL
OBJECT
IDENTIFIER
TIP
CONSIDERED
HERE
IEEE
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
A
B
EMPIRICAL
EMPIRICAL
GAUSSIAN
FIT
GAUSSIAN
FIT
PROBABILITY
PROBABILITY
NORMALIZED
LUMINANCE
MSCN
I
J
C
D
FIG
UNDERLYING
GAUSSIANITY
OF
NATURAL
IMAGES
EXAMPLES
OF
A
NATURAL
IMAGES
AND
B
ARTIFICIAL
IMAGES
FROM
THE
TID
DATABASE
C
SHOWS
THAT
NORMALIZED
LUMINANCE
COEFFICIENTS
FOLLOW
A
NEARLY
GAUSSIAN
DISTRIBUTION
FOR
THE
NATURAL
IMAGE
A
D
SHOWS
THAT
THIS
PROPERTY
DOES
NOT
HOLD
TRUE
FOR
THE
EMPIRICAL
DISTRIBUTION
OF
THE
ARTIFICIAL
IMAGE
B
THAT
AFFLICTS
THE
IMAGE
IS
KNOWN
BEFOREHAND
E
G
BLUR
OR
TO
AS
SUBJECTIVE
QUALITY
ASSESSMENT
WHERE
HUMAN
OBSERVERS
NOISE
OR
COMPRESSION
AND
SO
ON
SEE
BELOW
PREVIOUSLY
WE
RATE
A
LARGE
NUMBER
OF
DISTORTED
AND
POSSIBLY
REFERENCE
HAVE
PROPOSED
OTHER
NSS
BASED
DISTORTION
GENERIC
APPROACHES
SIGNALS
WHEN
THE
INDIVIDUAL
OPINIONS
ARE
AVERAGED
ACROSS
THE
TO
NR
IQA
THAT
STATISTICALLY
MODEL
IMAGES
IN
THE
WAVELET
SUBJECTS
A
MEAN
OPINION
SCORE
MOS
OR
DIFFERENTIAL
MEAN
DOMAIN
AND
IN
THE
DCT
DOMAIN
OUR
CONTRIBUTION
OPINION
SCORE
DMOS
IS
OBTAINED
FOR
EACH
OF
THE
VISUAL
HERE
IS
A
NEW
NR
IQA
MODEL
THAT
IS
PURELY
SPATIAL
THAT
RELIES
SIGNALS
IN
THE
STUDY
WHERE
THE
MOS
DMOS
IS
REPRESENTATIVE
ON
A
SPATIAL
NSS
MODEL
WHICH
DOES
NOT
REQUIRE
A
MAPPING
OF
THE
PERCEPTUAL
QUALITY
OF
THE
VISUAL
SIGNAL
THE
GOAL
OF
TO
A
DIFFERENT
CO
ORDINATE
DOMAIN
WAVELET
DCT
ETC
AND
SO
AN
OBJECTIVE
QUALITY
ASSESSMENT
QA
ALGORITHM
IS
TO
PREDICT
IS
TRANSFORM
FREE
THAT
DEMONSTRATES
BETTER
ABILITY
TO
PREDICT
QUALITY
SCORES
FOR
THESE
SIGNALS
SUCH
THAT
THE
SCORES
PRODUCED
HUMAN
JUDGMENTS
OF
QUALITY
THAN
OTHER
POPULAR
FR
AND
NR
BY
THE
ALGORITHM
CORRELATE
WELL
WITH
HUMAN
OPINIONS
OF
IQA
MODELS
THAT
IS
HIGHLY
EFFICIENT
AND
THAT
IS
USEFUL
FOR
SIGNAL
QUALITY
MOS
DMOS
PRACTICAL
APPLICATION
OF
QA
PERCEPTUALLY
OPTIMIZING
IMAGE
PROCESSING
ALGORITHMS
SUCH
AS
ALGORITHMS
REQUIRES
THAT
THESE
ALGORITHMS
COMPUTE
PERCEPTUAL
DENOISING
QUALITY
EFFICIENTLY
WHILE
THE
PRESENCE
OF
A
REFERENCE
IMAGE
OR
INFORMATION
THE
REGULARITY
OF
NATURAL
SCENE
STATISTICS
NSS
HAS
BEEN
REGARDING
THE
REFERENCE
SIMPLIFIES
THE
PROBLEM
OF
QUALITY
WELL
ESTABLISHED
IN
THE
VISUAL
SCIENCE
LITERATURE
WHERE
REGU
ASSESSMENT
PRACTICAL
APPLICATIONS
OF
SUCH
ALGORITHMS
ARE
LIM
LARITY
HAS
BEEN
DEMONSTRATED
IN
THE
SPATIAL
DOMAIN
AND
ITED
IN
REAL
WORLD
SCENARIOS
WHERE
REFERENCE
INFORMATION
IS
IN
THE
WAVELET
DOMAIN
FOR
EXAMPLE
IT
IS
WELL
KNOWN
GENERALLY
UNAVAILABLE
AT
NODES
WHERE
QUALITY
COMPUTATION
IS
THAT
THE
POWER
SPECTRUM
OF
NATURAL
IMAGES
IS
A
FUNCTION
OF
UNDERTAKEN
FURTHER
IT
CAN
BE
ARGUED
THAT
FR
AND
TO
A
LARGE
FREQUENCY
AND
TAKES
THE
FORM
F
Γ
WHERE
Γ
IS
AN
EXPONENT
EXTENT
RR
APPROACHES
ARE
NOT
QUALITY
MEASURES
IN
THE
TRUE
THAT
VARIES
OVER
A
SMALL
RANGE
ACROSS
NATURAL
IMAGES
SENSE
SINCE
THESE
APPROACHES
MEASURE
FIDELITY
RELATIVE
TO
A
THE
PRODUCT
OF
OUR
RESEARCH
IS
THE
BLIND
REFERENCELESS
REFERENCE
IMAGE
MOREOVER
THE
ASSUMPTION
OF
A
PRISTINE
NATURE
IMAGE
SPATIAL
QUALITY
EVALUATOR
BRISQUE
WHICH
UTILIZES
OF
ANY
REFERENCE
IS
QUESTIONABLE
SINCE
ALL
IMAGES
ARE
OSTENSIBLY
AN
NSS
MODEL
FRAMEWORK
OF
LOCALLY
NORMALIZED
LUMINANCE
DISTORTED
COEFFICIENTS
AND
QUANTIFIES
NATURALNESS
USING
THE
PARAME
THE
PERFORMANCE
OF
ANY
IQA
MODEL
IS
BEST
GAUGED
BY
ITS
TERS
OF
THE
MODEL
BRISQUE
INTRODUCES
A
NEW
MODEL
OF
CORRELATION
WITH
HUMAN
SUBJECTIVE
JUDGEMENTS
OF
QUALITY
THE
STATISTICS
OF
PAIR
WISE
PRODUCTS
OF
NEIGHBORING
LOCALLY
SINCE
THE
HUMAN
IS
THE
ULTIMATE
RECEIVER
OF
THE
VISUAL
NORMALIZED
LUMINANCE
VALUES
THE
PARAMETERS
OF
THIS
MODEL
SIGNAL
SUCH
HUMAN
OPINIONS
OF
VISUAL
QUALITY
ARE
GENERALLY
FURTHER
QUANTIFY
THE
NATURALNESS
OF
THE
IMAGE
OUR
CLAIM
IS
OBTAINED
BY
CONDUCTING
LARGE
SCALE
HUMAN
STUDIES
REFERRED
THAT
CHARACTERIZING
LOCALLY
NORMALIZED
LUMINANCE
COEFFICIENTS
MITTAL
ET
AL
NR
IQA
IN
THE
SPATIAL
DOMAIN
IN
THIS
WAY
IS
SUFFICIENT
NOT
ONLY
TO
QUANTIFY
NATURALNESS
BUT
SECOND
CATERS
ONLY
TO
CERTAIN
KINDS
OF
DISTORTION
PROCESSES
ALSO
TO
QUANTIFY
QUALITY
IN
THE
PRESENCE
OF
DISTORTION
THIS
LIMITS
THE
APPLICABILITY
OF
THEIR
FRAMEWORK
TO
NEW
IN
THIS
ARTICLE
WE
DETAIL
THE
STATISTICAL
MODEL
OF
LOCALLY
DISTORTIONS
NORMALIZED
LUMINANCE
COEFFICIENTS
IN
THE
SPATIAL
DOMAIN
AS
WE
HAVE
ALSO
DEVELOPED
PREVIOUS
NR
QA
MODELS
IN
THE
WELL
AS
THE
MODEL
FOR
PAIRWISE
PRODUCTS
OF
THESE
COEFFICIENTS
PAST
FOLLOWING
OUR
PHILOSOPHY
FIRST
FULLY
DEVELOPED
IN
WE
DESCRIBE
THE
STATISTICAL
FEATURES
THAT
ARE
USED
FROM
THE
THAT
NSS
MODELS
PROVIDE
POWERFUL
TOOLS
FOR
PROBING
HUMAN
MODEL
AND
DEMONSTRATE
THAT
THESE
FEATURES
CORRELATE
WELL
WITH
JUDGEMENTS
OF
VISUAL
DISTORTIONS
OUR
WORK
ON
NSS
BASED
HUMAN
JUDGEMENTS
OF
QUALITY
WE
THEN
DESCRIBE
HOW
WE
LEARN
FR
QA
ALGORITHMS
MORE
RECENT
RR
MODELS
A
MAPPING
FROM
FEATURES
TO
QUALITY
SPACE
TO
PRODUCE
AN
AND
VERY
RECENT
WORK
ON
NSS
BASED
NR
QA
AUTOMATIC
BLIND
MEASURE
OF
PERCEPTUAL
QUALITY
WE
THOROUGHLY
HAVE
LED
US
TO
THE
CONCLUSION
THAT
VISUAL
FEATURES
EVALUATE
THE
PERFORMANCE
OF
BRISQUE
AND
STATISTICALLY
COM
DERIVED
FROM
NSS
LEAD
TO
PARTICULARLY
POTENT
AND
SIMPLE
QA
PARE
BRISQUE
PERFORMANCE
TO
STATE
OF
THE
ART
FR
AND
NR
MODELS
IQA
APPROACHES
WE
DEMONSTRATE
THAT
BRISQUE
IS
HIGHLY
OUR
RECENTLY
PROPOSED
NSS
BASED
NR
IQA
MODEL
DUBBED
COMPETITIVE
TO
THESE
NR
IQA
APPROACHES
AND
ALSO
STATISTICALLY
THE
DISTORTION
IDENTIFICATION
BASED
IMAGE
INTEGRITY
AND
VER
BETTER
THAN
THE
POPULAR
FULL
REFERENCE
PEAK
SIGNAL
TO
NOISE
ITY
EVALUATION
DIIVINE
INDEX
DEPLOYS
SUMMARY
STATISTICS
RATIO
PSNR
AND
STRUCTURAL
SIMILARITY
INDEX
SSIM
WE
DERIVED
FROM
AN
NSS
WAVELET
COEFFICIENT
MODEL
USING
A
TWO
SHOW
THAT
BRISQUE
PERFORMS
WELL
ON
INDEPENDENT
DATABASES
STAGE
FRAMEWORK
FOR
QA
DISTORTION
IDENTIFICATION
FOLLOWED
BY
ANALYZE
ITS
COMPLEXITY
AND
COMPARE
IT
WITH
OTHER
NR
IQA
DISTORTION
SPECIFIC
QA
THE
DIIVINE
INDEX
PERFORMS
APPROACHES
FINALLY
TO
FURTHER
ILLUSTRATE
THE
PRACTICAL
RELEVANCE
QUITE
WELL
ON
THE
LIVE
IQA
DATABASE
ACHIEVING
STATISTICAL
OF
BRISQUE
WE
DESCRIBE
HOW
A
NON
BLIND
IMAGE
DENOISING
PARITY
WITH
THE
FULL
REFERENCE
STRUCTURAL
SIMILARITY
SSIM
ALGORITHM
CAN
BE
AUGMENTED
WITH
BRISQUE
IN
ORDER
TO
INDEX
IMPROVE
BLIND
IMAGE
DENOISING
RESULTS
SHOW
THAT
BRISQUE
A
COMPLEMENTARY
APPROACH
DEVELOPED
AT
THE
SAME
TIME
AUGMENTATION
LEADS
TO
SIGNIFICANT
PERFORMANCE
IMPROVEMENTS
NAMED
BLIND
IMAGE
NOTATOR
USING
DCT
STATISTICS
BLIINDS
OVER
THE
STATE
OF
THE
ART
BEFORE
WE
DESCRIBE
BRISQUE
IN
II
INDEX
IS
A
PRAGMATIC
APPROACH
TO
NR
IQA
THAT
OPERATES
DETAIL
WE
FIRST
BRIEFLY
REVIEW
RELEVANT
PRIOR
WORK
IN
THE
AREA
IN
THE
DCT
DOMAIN
WHERE
A
SMALL
NUMBER
OF
FEATURES
ARE
OF
BLIND
IQA
COMPUTED
FROM
AN
NSS
MODEL
OF
BLOCK
DCT
COEFFICIENTS
EFFICIENT
NSS
FEATURES
ARE
CALCULATED
AND
FED
TO
A
REGRESSION
FUNCTION
THAT
DELIVERS
ACCURATE
QA
PREDICTIONS
BLIINDS
II
IS
II
P
REVIOUS
W
ORK
A
SINGLE
STAGE
ALGORITHM
THAT
ALSO
DELIVERS
HIGHLY
COMPETITIVE
MOST
EXISTING
BLIND
IQA
MODELS
PROPOSED
IN
THE
PAST
QA
PREDICTION
POWER
ALTHOUGH
BLIINDS
II
INDEX
IS
MULTI
ASSUME
THAT
THE
IMAGE
WHOSE
QUALITY
IS
BEING
ASSESSED
IS
SCALE
THE
SMALL
NUMBER
OF
FEATURE
TYPES
ALLOW
FOR
EFFICIENT
AFFLICTED
BY
A
PARTICULAR
KIND
OF
DISTORTION
COMPUTATION
OF
VISUAL
QUALITY
AND
HENCE
THE
INDEX
IS
ATTRACTIVE
THESE
APPROACHES
EXTRACT
DISTORTION
SPECIFIC
FEATURES
THAT
RELATE
FOR
PRACTICAL
APPLICATIONS
TO
LOSS
OF
VISUAL
QUALITY
SUCH
AS
EDGE
STRENGTH
AT
BLOCK
WHILE
BOTH
DIIVINE
AND
BLIINDS
II
DELIVER
TOP
NR
IQA
BOUNDARIES
HOWEVER
A
FEW
GENERAL
PURPOSE
APPROACHES
FOR
PERFORMANCE
TO
DATE
EACH
OF
THEM
HAS
CERTAIN
LIMITATIONS
NR
IQA
HAVE
BEEN
PROPOSED
RECENTLY
THE
LARGE
NUMBER
OF
FEATURES
THAT
DIIVINE
COMPUTES
IMPLIES
LI
DEVISED
A
SET
OF
HEURISTIC
MEASURES
TO
CHARACTERIZE
VISUAL
THAT
IT
MAY
BE
DIFFICULT
TO
COMPUTE
IN
REAL
TIME
ALTHOUGH
QUALITY
IN
TERMS
OF
EDGE
SHARPNESS
RANDOM
NOISE
AND
STRUCTURAL
BLIINDS
II
IS
MORE
EFFICIENT
THAN
DIIVINE
IT
REQUIRES
NON
NOISE
WHILE
GABARDA
AND
CRISTOBAL
MODELED
ANISOTROPIES
LINEAR
SORTING
OF
BLOCK
BASED
NSS
FEATURES
WHICH
SLOWS
IT
IN
IMAGES
USING
RENYI
ENTROPY
THE
AUTHORS
IN
CONSIDERABLY
USE
GABOR
FILTER
BASED
LOCAL
APPEARANCE
DESCRIPTORS
TO
FORM
IN
OUR
CONTINUED
SEARCH
FOR
FAST
AND
EFFICIENT
HIGH
PERFOR
A
VISUAL
CODEBOOK
AND
LEARN
DMOS
SCORE
VECTOR
ASSOCIATING
MANCE
NSS
BASED
NR
QA
INDICES
WE
HAVE
RECENTLY
STUD
EACH
WORD
WITH
A
QUALITY
SCORE
HOWEVER
IN
THE
PROCESS
OF
IED
THE
POSSIBILITY
OF
DEVELOPING
TRANSFORM
FREE
MODELS
THAT
VISUAL
CODEBOOK
FORMATION
EACH
FEATURE
VECTOR
ASSOCIATED
WITH
OPERATE
DIRECTLY
ON
THE
SPATIAL
PIXEL
DATA
OUR
INSPIRATION
FOR
AN
IMAGE
PATCH
IS
LABELED
BY
DMOS
ASIGNED
TO
THE
ENTIRE
THINKING
WE
MAY
SUCCEED
IS
THE
PIONEERING
WORK
BY
RUDERMAN
IMAGE
THIS
IS
QUESTIONABLE
AS
EACH
IMAGE
PATCH
CAN
PRESENT
A
ON
SPATIAL
NATURAL
SCENE
MODELING
AND
THE
SUCCESS
OF
THE
DIFFERENT
LEVEL
OF
QUALITY
DEPENDING
ON
THE
DISTORTION
PROCESS
SPATIAL
MULTI
SCALE
SSIM
INDEX
WHICH
COMPETES
WELL
WITH
THE
IMAGE
IS
AFFLICTED
WITH
IN
PARTICULAR
LOCAL
DISTORTIONS
TRANSFORM
DOMAIN
IQA
MODELS
SUCH
AS
PACKET
LOSS
MIGHT
AFFLICT
ONLY
A
FEW
IMAGE
PATCHES
ALSO
THE
APPROACH
IS
COMPUTATIONALLY
EXPENSIVE
LIMITING
ITS
III
B
LIND
PATIAL
I
MAGE
Q
UALITY
A
SSESSMENT
APPLICABILITY
IN
REAL
TIME
APPLICATIONS
TANG
ET
AL
PROPOSED
AN
APPROACH
WHICH
LEARNS
AN
MUCH
RECENT
WORK
HAS
FOCUSED
ON
MODELING
THE
STATISTICS
ENSEMBLE
OF
REGRESSORS
TRAINED
ON
THREE
DIFFERENT
GROUPS
OF
OF
RESPONSES
OF
NATURAL
IMAGES
USING
MULTISCALE
TRANSFORMS
FEATURES
NATURAL
IMAGE
STATISTICS
DISTORTION
TEXTURE
STATISTICS
EG
GABOR
FILTERS
WAVELETS
ETC
GIVEN
THAT
NEURONAL
AND
BLUR
NOISE
STATISTICS
ANOTHER
APPROACH
IS
BASED
ON
A
RESPONSES
IN
AREA
OF
VISUAL
CORTEX
PERFORM
SCALE
SPACE
HYBRID
OF
CURVELET
WAVELET
AND
COSINE
TRANSFORMS
ALTHOUGH
ORIENTATION
DECOMPOSITIONS
OF
VISUAL
DATA
TRANSFORM
DOMAIN
THESE
APPROACHES
WORK
ON
A
VARIETY
OF
DISTORTIONS
EACH
SET
MODELS
SEEM
LIKE
NATURAL
APPROACHES
PARTICULARLY
IN
VIEW
OF
OF
FEATURES
IN
THE
FIRST
APPROACH
AND
TRANSFORMS
IN
THE
THE
ENERGY
COMPACTION
SPARSITY
AND
DECORRELATING
PROPERTIES
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
OF
THESE
TRANSFORMS
WHEN
COMBINED
WITH
DIVISIVE
NORMAL
DECORRELATED
EXHIBITS
A
LARGELY
HOMOGENEOUS
APPEARANCE
WITH
IZATION
STRATEGIES
HOWEVER
SUCCESSFUL
MODELS
OF
A
FEW
LOW
ENERGY
RESIDUAL
OBJECT
BOUNDARIES
SPATIAL
LUMINANCE
STATISTICS
HAVE
ALSO
RECEIVED
ATTENTION
FROM
OUR
HYPOTHESIS
IS
THAT
THE
MSCN
COEFFICIENTS
HAVE
CHARAC
VISION
RESEARCHERS
TERISTIC
STATISTICAL
PROPERTIES
THAT
ARE
CHANGED
BY
THE
PRESENCE
OF
DISTORTION
AND
THAT
QUANTIFYING
THESE
CHANGES
WILL
MAKE
IT
POSSIBLE
TO
PREDICT
THE
TYPE
OF
DISTORTION
AFFECTING
AN
IMAGE
A
NATURAL
SCENE
STATISTICS
IN
THE
SPATIAL
DOMAIN
AS
WELL
AS
ITS
PERCEPTUAL
QUALITY
IN
ORDER
TO
VISUALIZE
HOW
THE
SPATIAL
APPROACH
TO
NR
IQA
THAT
WE
HAVE
DEVELOPED
THE
MSCN
COEFFICIENT
DISTRIBUTIONS
VARY
AS
A
FUNCTION
OF
CAN
BE
SUMMARIZED
AS
FOLLOWS
GIVEN
A
POSSIBLY
DISTORTED
DISTORTION
FIG
PLOTS
A
HISTOGRAM
OF
MSCN
COEFFICIENTS
FOR
IMAGE
FIRST
COMPUTE
LOCALLY
NORMALIZED
LUMINANCES
VIA
LOCAL
A
NATURAL
UNDISTORTED
IMAGE
AND
FOR
VARIOUS
DISTORTED
VERSIONS
MEAN
SUBTRACTION
AND
DIVISIVE
NORMALIZATION
RUDERMAN
OF
IT
NOTICE
HOW
THE
REFERENCE
IMAGE
EXHIBITS
A
GAUSSIAN
OBSERVED
THAT
APPLYING
A
LOCAL
NON
LINEAR
OPERATION
TO
LOG
LIKE
APPEARANCE
AS
OBSERVED
BY
RUDERMAN
WHILE
EACH
CONTRAST
LUMINANCES
TO
REMOVE
LOCAL
MEAN
DISPLACEMENTS
FROM
DISTORTION
MODIFIES
THE
STATISTICS
IN
ITS
OWN
CHARACTERISTIC
WAY
ZERO
LOG
CONTRAST
AND
TO
NORMALIZE
THE
LOCAL
VARIANCE
OF
THE
LOG
FOR
EXAMPLE
BLUR
CREATES
A
MORE
LAPLACIAN
APPEARANCE
WHILE
CONTRAST
HAS
A
DECORRELATING
EFFECT
SUCH
AN
OPERATION
MAY
WHITE
NOISE
DISTORTION
APPEARS
TO
REDUCE
THE
WEIGHT
OF
THE
TAIL
BE
APPLIED
TO
A
GIVEN
INTENSITY
IMAGE
I
I
J
TO
PRODUCE
OF
THE
HISTOGRAM
WE
HAVE
FOUND
THAT
A
GENERALIZED
GAUSSIAN
I
I
J
Μ
I
J
DISTRIBUTION
GGD
CAN
BE
USED
TO
EFFECTIVELY
CAPTURE
A
BROADER
Iˆ
I
J
SPECTRUM
OF
DISTORTED
IMAGE
STATISTICS
WHICH
OFTEN
EXHIBIT
Σ
I
J
C
CHANGES
IN
THE
TAIL
BEHAVIOUR
I
E
KURTOSIS
OF
THE
EMPIRICAL
WHERE
I
M
J
N
ARE
SPATIAL
INDICES
M
N
COEFFICIENT
DISTRIBUTIONS
WHERE
THE
GGD
WITH
ZERO
MEAN
ARE
THE
IMAGE
HEIGHT
AND
WIDTH
RESPECTIVELY
C
IS
A
IS
GIVEN
BY
CONSTANT
THAT
PREVENTS
INSTABILITIES
FROM
OCCURRING
WHEN
THE
Α
DENOMINATOR
TENDS
TO
ZERO
EG
IN
THE
CASE
OF
AN
IMAGE
PATCH
Α
X
F
X
Α
Σ
EXP
CORRESPONDING
TO
THE
PLAIN
SKY
AND
Α
Β
K
L
WHERE
Μ
I
J
WK
L
IK
L
I
J
Α
Β
Σ
K
K
L
L
Α
K
L
AND
IS
THE
GAMMA
FUNCTION
Σ
I
J
WK
L
IK
L
I
J
Μ
I
J
T
A
E
T
DT
K
K
L
L
A
A
WHERE
W
WK
L
K
K
K
L
L
L
IS
A
CIRCULARLY
SYMMETRIC
GAUSSIAN
WEIGHTING
FUNCTION
SAMPLED
OUT
THE
SHAPE
PARAMETER
Α
CONTROLS
THE
SHAPE
OF
THE
DISTRIBU
TO
STANDARD
DEVIATIONS
AND
RESCALED
TO
UNIT
VOLUME
IN
OUR
TION
WHILE
Σ
CONTROL
THE
VARIANCE
WE
CHOOSE
THE
ZERO
MEAN
IMPLEMENTATION
K
L
WE
SHOW
HOW
PERFORMANCE
DISTRIBUTION
SINCE
GENERALLY
MSCN
COEFFICIENT
DISTRIBUTIONS
VARIES
WITH
CHANGES
IN
THE
WINDOW
SIZE
IN
THE
PERFORMANCE
ARE
SYMMETRIC
THE
PARAMETERS
OF
THE
GGD
Α
Σ
ARE
ESTI
EVALUATION
SECTION
MATED
USING
THE
MOMENT
MATCHING
BASED
APPROACH
PROPOSED
RUDERMAN
ALSO
OBSERVED
THAT
THESE
NORMALIZED
LUMINANCE
IN
VALUES
STRONGLY
TEND
TOWARDS
A
UNIT
NORMAL
GAUSSIAN
CHARAC
WE
DEPLOY
THIS
PARAMETRIC
MODEL
TO
FIT
THE
MSCN
EMPIRICAL
TERISTIC
FOR
NATURAL
IMAGES
SUCH
AN
OPERATION
CAN
BE
USED
DISTRIBUTIONS
FROM
DISTORTED
IMAGES
AS
WELL
AS
UNDISTORTED
ONES
TO
MODEL
THE
CONTRAST
GAIN
MASKING
PROCESS
IN
EARLY
HUMAN
FOR
EACH
IMAGE
WE
ESTIMATE
PARAMETERS
Α
Σ
FROM
A
VISION
WE
UTILIZE
THE
PRE
PROCESSING
MODEL
GGD
FIT
OF
THE
MSCN
COEFFICIENTS
THESE
FORM
THE
FIRST
SET
IN
OUR
QA
MODEL
DEVELOPMENT
AND
REFER
TO
THE
TRANSFORMED
OF
FEATURES
THAT
WILL
BE
USED
TO
CAPTURE
IMAGE
DISTORTION
TO
LUMINANCES
I
I
J
AS
MEAN
SUBTRACTED
CONTRAST
NORMALIZED
SHOW
THAT
PRISTINE
AND
DISTORTED
IMAGES
ARE
WELL
SEPARATED
MSCN
COEFFICIENTS
AS
ILLUSTRATED
IN
THE
LEFT
COLUMN
OF
IN
GGD
PARAMETER
SPACE
WE
TOOK
A
SET
OF
PRISTINE
IMAGES
FIG
THERE
IS
HIGH
CORRELATION
BETWEEN
SURROUNDING
PIXELS
FROM
THE
BERKELEY
IMAGE
SEGMENTATION
DATABASE
SIMILAR
BECAUSE
IMAGE
FUNCTIONS
ARE
GENERALLY
PIECEWISE
SMOOTH
ASIDE
KINDS
OF
DISTORTIONS
AS
PRESENT
IN
THE
LIVE
IQA
DATABASE
FROM
SPARSE
EDGE
DISCONTINUITIES
HENCE
WE
OBSERVE
A
DIAGONAL
JPEG
JPEG
WHITE
NOISE
GAUSSIAN
BLUR
AND
FAST
KIND
OF
STRUCTURE
IN
THE
PLOTS
SHOWN
IN
THE
LEFT
COLUMN
FADING
CHANNEL
ERRORS
WERE
INTRODUCED
IN
EACH
IMAGE
AT
VARYING
THE
NORMALIZATION
PROCEDURE
GREATLY
REDUCES
DEPENDENCIES
DEGREES
OF
SEVERITY
TO
FORM
THE
DISTORTED
IMAGE
SET
AS
SHOWN
BETWEEN
NEIGHBORING
COEFFICIENTS
AS
IS
APPARENT
IN
THE
PLOTS
IN
FIG
A
PRISTINE
AND
DISTORTED
IMAGES
OCCUPY
DIFFERENT
SHOWN
IN
THE
RIGHT
COLUMN
REGIONS
IN
THIS
PARAMETER
SPACE
WHITE
NOISE
IS
VERY
CLEARLY
IN
ORDER
TO
HELP
THE
READER
VISUALIZE
WHAT
THE
NON
LINEAR
SEPARATED
FROM
THE
PRISTINE
IMAGE
SET
MAKING
IT
ONE
OF
THE
TRANSFORMATION
DOES
TO
AN
IMAGE
FIGURE
PLOTS
AN
IMAGE
FROM
EASIEST
TO
GAUGE
THE
QUALITY
OF
AND
FAST
FADING
HAVE
A
THE
LIVE
IQA
DATABASE
ITS
LOCAL
MEAN
FIELD
Μ
I
J
AND
HIGH
DEGREE
OF
OVERLAP
AS
FAST
FADING
IMAGES
IN
LIVE
DATABASE
LOCAL
VARIANCE
FIELD
Σ
I
J
AND
THE
MSCN
FIELD
THE
VARIANCE
ARE
ACTUALLY
MULTIDISTORTED
FIRST
COMPRESSED
INTO
A
BITSTREAM
FIELD
HIGHLIGHTS
OBJECT
BOUNDARIES
AND
OTHER
LOCAL
HIGH
CONTRAST
USING
A
CODEC
THEN
PASSED
THROUGH
A
RAYLEIGH
FAST
PHENOMENON
THE
MSCN
FIELD
WHILE
CLEARLY
NOT
ENTIRELY
FADING
CHANNEL
TO
SIMULATE
PACKET
LOSS
MITTAL
ET
AL
NR
IQA
IN
THE
SPATIAL
DOMAIN
A
B
FIG
SCATTER
PLOT
BETWEEN
NEIGHBORING
VALUES
OF
A
ORIGINAL
LUMINANCE
COEFFICIENTS
AND
B
MSCN
COEFFICIENTS
ROWS
FROM
TOP
TO
BOTTOM
ILLUSTRATE
HORIZONTAL
VERTICAL
MAIN
DIAGONAL
AND
SECONDARY
DIAGONAL
NEIGHBORS
NOTICE
A
HIGH
CORRELATION
BETWEEN
SURROUNDING
PIXELS
WITH
A
DIAGONAL
STRUCTURE
IN
THE
PLOTS
SHOWN
IN
A
THE
NORMALIZATION
PROCEDURE
GREATLY
REDUCES
THESE
DEPENDENCIES
AS
IS
APPARENT
IN
THE
PLOTS
SHOWN
IN
B
WE
ALSO
MODEL
THE
STATISTICAL
RELATIONSHIPS
BETWEEN
NEIGH
I
J
Iˆ
I
J
Iˆ
I
J
BORING
PIXELS
WHILE
MSCN
COEFFICIENTS
ARE
DEFINITELY
MORE
HOMOGENOUS
FOR
PRISTINE
IMAGES
THE
SIGNS
OF
ADJACENT
COEF
FOR
I
M
AND
J
N
FICIENTS
ALSO
EXHIBIT
A
REGULAR
STRUCTURE
WHICH
GETS
DISTURBED
UNDER
THE
GAUSSIAN
COEFFICIENT
MODEL
AND
ASSUMING
THE
IN
THE
PRESENCE
OF
DISTORTION
WE
MODEL
THIS
STRUCTURE
USING
MSCN
COEFFFICIENTS
ARE
ZERO
MEAN
AND
UNIT
VARIANCE
THESE
THE
EMPIRICAL
DISTRIBUTIONS
OF
PAIRWISE
PRODUCTS
OF
NEIGHBORING
PRODUCTS
OBEY
THE
FOLLOWING
DISTRIBUTION
IN
THE
ABSENCE
OF
MSCN
COEFFICIENTS
ALONG
FOUR
ORIENTATIONS
HORIZON
DISTORTION
TAL
H
VERTICAL
V
MAIN
DIAGONAL
AND
SECONDARY
X
Ρ
X
DIAGONAL
AS
ILLUSTRATED
IN
FIG
SPECIFICALLY
EXP
Ρ
Ρ
F
X
Ρ
Π
Ρ
H
I
J
Iˆ
I
J
Iˆ
I
J
WHERE
F
IS
AN
ASYMMETRIC
PROBABILITY
DENSITY
FUNCTION
V
I
J
Iˆ
I
J
Iˆ
I
J
Ρ
DENOTES
THE
CORRELATION
COEFFICIENT
OF
ADJACENT
COEFFICENTS
I
J
Iˆ
I
J
Iˆ
I
J
AND
K
IS
THE
MODIFIED
BESSEL
FUNCTION
OF
THE
SECOND
KIND
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
VARY
IN
THE
PRESENCE
OF
DISTORTION
IN
FIG
WE
PLOT
HISTOGRAMS
OF
PAIRED
PRODUCTS
ALONG
EACH
OF
FOUR
ORIENTATIONS
FOR
A
REFERENCE
IMAGE
AND
FOR
DISTORTED
VERSIONS
OF
IT
THE
AGGD
WITH
ZERO
MODE
IS
GIVEN
BY
Ν
Ν
X
Β
Β
EXP
ΒL
X
L
R
Ν
F
X
Ν
Ν
A
Ν
Β
ΒR
EXP
ΒR
X
X
L
Ν
WHERE
ΒL
ΣL
Ν
B
C
ΒR
ΣR
Ν
THE
SHAPE
PARAMETER
Ν
CONTROLS
THE
SHAPE
OF
THE
DISTRI
BUTION
WHILE
AND
ARE
SCALE
PARAMETERS
THAT
CONTROL
THE
SPREAD
ON
EACH
SIDE
OF
THE
MODE
RESPECTIVELY
THE
AGGD
FURTHER
GENERALIZES
THE
GENERALIZED
GAUSSIAN
DISTRIB
D
E
UTION
GGD
AND
SUBSUMES
IT
BY
ALLOWING
FOR
ASYMMETRY
IN
THE
DISTRIBUTION
THE
SKEW
OF
THE
DISTRIBUTION
IS
A
FUNCTION
OF
FIG
EFFECT
OF
THE
NORMALIZATION
PROCEDURE
A
ORIGINAL
IMAGE
I
B
LOCAL
MEAN
FIELD
Μ
C
I
Μ
D
LOCAL
VARIANCE
FIELD
Σ
E
MSCN
COEFFICIENTS
THE
LEFT
AND
RIGHT
SCALE
PARAMETERS
IF
THEN
THE
AGGD
I
Μ
Σ
REDUCES
TO
THE
GGD
ALTHOUGH
THE
AGGD
IS
INFREQUENTLY
USED
IT
HAS
BEEN
DEPLOYED
TO
MODEL
SKEWED
HEAVY
TAILED
DISTRIBUTIONS
OF
IMAGE
TEXTURE
THE
PARAMETERS
OF
THE
NUMBER
OF
COEFFICIENTS
NORMALIZED
ORG
AGGD
Ν
ARE
ESTIMATED
USING
THE
MOMENT
MATCHING
BASED
APPROACH
PROPOSED
IN
FIGURE
B
SHOWS
THE
D
JPEG
SCATTER
PLOT
BETWEEN
Ν
FOR
HORIZONTAL
PAIRED
PRODUCTS
WN
USING
THE
SAME
SET
OF
IMAGES
AS
USED
FOR
SHOWING
SEPARATION
BLUR
IN
GGD
PARAMETER
SPACE
IT
CAN
BE
VISUALIZED
THAT
DIFFERENT
FF
DISTORTIONS
OCCUPY
DIFFERENT
PARTS
OF
THE
SPACE
ALSO
WE
EXPECT
IMAGES
TO
HAVE
A
BETTER
SEPARATION
WHEN
MODELED
IN
THE
HIGH
DIMENSIONAL
SPACE
OF
PARAMETERS
OBTAINED
BY
FITTING
AGGD
DISTRIBUTIONS
TO
PAIRED
PRODUCTS
FROM
DIFFERENT
ORIENTATIONS
AND
SCALES
TOGETHER
THIS
FIGURE
ALSO
MOTIVES
THE
USE
OF
TO
BETTER
CAPTURE
THE
FINITE
EMPIRICAL
DENSITY
FUNCTION
THE
PARAMETERS
Η
Ν
OF
THE
BEST
AGGD
FIT
ARE
EXTRACTED
WHERE
Η
IS
GIVEN
BY
Η
ΒR
ΒL
MSCN
Ν
THUS
FOR
EACH
PAIRED
PRODUCT
PARAMETERS
PARA
FIG
HISTOGRAM
OF
MSCN
COEFFICIENTS
FOR
A
NATURAL
UNDISTORTED
IMAGE
AND
ITS
VARIOUS
DISTORTED
VERSIONS
DISTORTIONS
FROM
THE
LIVE
IQA
DATABASE
METERS
ORIENTATION
ORIENTATIONS
ARE
COMPUTED
YIELDING
JPEG
JPEG
COMPRESSION
WN
ADDITIVE
WHITE
GAUSSIAN
THE
NEXT
SET
OF
FEATURES
TABLE
I
SUMMARIZES
THE
FEATURES
NOISE
BLUR
GAUSSIAN
BLUR
FF
RAYLEIGH
FAST
FADING
CHANNEL
SIMULATION
UTILIZED
IMAGES
ARE
NATURALLY
MULTISCALE
AND
DISTORTIONS
AFFECT
IMAGE
STRUCTURE
ACROSS
SCALES
FURTHER
AS
RESEARCH
IN
QUALITY
ASSESS
WHILE
WE
HAVE
FOUND
THAT
THIS
DENSITY
FUNCTION
IS
A
GOOD
MODEL
MENT
HAS
DEMONSTRATED
INCORPORATING
MULTISCALE
INFORMATION
OF
THE
EMPIRICAL
HISTOGRAMS
OF
PRODUCTS
OF
ADJACENT
NORMALIZED
WHEN
ASSESSING
QUALITY
PRODUCES
QA
ALGORITHMS
THAT
PER
COEFFICIENTS
IT
HAS
ONLY
A
SINGLE
PARAMETER
AND
AS
SUCH
DOES
FORM
BETTER
IN
TERMS
OF
CORRELATION
WITH
HUMAN
PERCEPTION
NOT
PROVIDE
A
GOOD
FIT
TO
THE
EMPIRICAL
HISTOGRAMS
OF
COEFFICIENT
HENCE
WE
EXTRACT
ALL
FEATURES
LISTED
IN
TABLE
I
PRODUCTS
FIG
FROM
DISTORTED
IMAGES
FURTHER
IT
IS
NOT
AT
TWO
SCALES
THE
ORIGINAL
IMAGE
SCALE
AND
AT
A
REDUCED
FINITE
AT
THE
ORIGIN
HENCE
AS
A
PRACTICAL
ALTERNATIVE
WE
ADOPT
RESOLUTION
LOW
PASS
FILTERED
AND
DOWNSAMPLED
BY
A
FACTOR
THE
VERY
GENERAL
ASYMMETRIC
GENERALIZED
GAUSSIAN
DISTRIBUTION
OF
WE
OBSERVED
THAT
INCREASING
THE
NUMBER
OF
SCALES
BEYOND
AGGD
MODEL
IN
ORDER
TO
VISUALIZE
HOW
PAIRED
PRODUCTS
DID
NOT
CONTRIBUTE
TO
PERFORMANCE
MUCH
THUS
A
TOTAL
OF
MITTAL
ET
AL
NR
IQA
IN
THE
SPATIAL
DOMAIN
ORG
JPEG
WN
ORG
BLUR
FF
LOG
Ν
JPEG
LOG
WN
BLUR
FF
LOG
Σ
LOG
LOG
Α
R
L
A
B
FIG
A
D
SCATTER
PLOT
BETWEEN
SHAPE
AND
SCALE
PARAMETERS
OBTAINED
BY
FITTING
GGD
TO
THE
EMPIRICAL
DISTRIBUTIONS
OF
MSCN
COEFFICIENTS
OF
PRISTINE
IMAGES
OF
BERKELEY
IMAGE
SEGMENTATION
DATABASE
AND
SIMULATED
DISTORTED
IMAGES
WHERE
SIMILAR
KINDS
OF
DISTORTIONS
AS
THOSE
PRESENT
IN
THE
LIVE
IQA
DATABASE
JPEG
JPEG
WHITE
NOISE
GAUSSIAN
BLUR
AND
FAST
FADING
CHANNEL
ERRORS
WERE
INTRODUCED
IN
EACH
IMAGE
AT
VARYING
DEGREES
OF
SEVERITY
B
D
SCATTER
PLOT
BETWEEN
SHAPE
LEFT
SCALE
AND
RIGHT
SCALE
OBTAINED
BY
FITTING
AGGD
TO
HORIZONTAL
PAIRED
PRODUCTS
USING
THE
SAME
SET
OF
IMAGES
AS
A
TABLE
I
UMMARY
OF
F
EATURES
E
XTRACTED
IN
O
RDER
TO
C
LASSIFY
AND
Q
UANTIFY
D
ISTORTIONS
FEATURE
ID
FEATURE
DESCRIPTION
COMPUTATION
PROCEDURE
F
SHAPE
AND
VARIANCE
FIT
GGD
TO
MSCN
COEFFICIENTS
F
SHAPE
MEAN
LEFT
VARIANCE
RIGHT
VARIANCE
FIT
AGGD
TO
H
PAIRWISE
PRODUCTS
F
F
SHAPE
MEAN
LEFT
VARIANCE
RIGHT
VARIANCE
FIT
AGGD
TO
V
PAIRWISE
PRODUCTS
F
F
SHAPE
MEAN
LEFT
VARIANCE
RIGHT
VARIANCE
FIT
AGGD
TO
PAIRWISE
PRODUCTS
F
F
SHAPE
MEAN
LEFT
VARIANCE
RIGHT
VARIANCE
FIT
AGGD
TO
PAIRWISE
PRODUCTS
B
QUALITY
EVALUATION
A
MAPPING
IS
LEARNED
FROM
FEATURE
SPACE
TO
QUALITY
SCORES
USING
A
REGRESSION
MODULE
YIELDING
A
MEASURE
OF
IMAGE
QUAL
ITY
THE
FRAMEWORK
IS
GENERIC
ENOUGH
TO
ALLOW
FOR
THE
USE
OF
ANY
REGRESSOR
IN
OUR
IMPLEMENTATION
A
SUPPORT
VECTOR
MACHINE
SVM
REGRESSOR
SVR
IS
USED
SVR
HAS
PREVIOUSLY
BEEN
APPLIED
TO
IMAGE
QUALITY
ASSESSMENT
PROBLEMS
FOR
EXAMPLE
A
LEARNING
DRIVEN
FEATURE
POOLING
APPROACH
USING
FIG
VARIOUS
PAIRED
PRODUCTS
COMPUTED
IN
ORDER
TO
QUANTIFY
NEIGH
SVR
WAS
PROPOSED
IN
WAVELET
DOMAIN
NSS
AND
SINGULAR
BORING
STATISTICAL
RELATIONSHIPS
PAIRWISE
PRODUCTS
ARE
COMPUTED
ALONG
FOUR
VALUE
DECOMPOSITION
FEATURES
HAVE
BEEN
USED
TO
MAP
QUALITY
ORIENTATIONS
HORIZONTAL
VERTICAL
MAIN
DIAGONAL
AND
SECONDARY
DIAGONAL
AT
A
DISTANCE
OF
PIXEL
TO
HUMAN
RATINGS
VIA
SVR
IN
AND
RESPECTIVELY
SVR
IS
GENERALLY
NOTED
FOR
BEING
ABLE
TO
HANDLE
HIGH
DIMENSIONAL
DATA
WE
UTILIZE
THE
LIBSVM
PACKAGE
TO
IMPLEMENT
FEATURES
AT
EACH
SCALE
ARE
USED
TO
IDENTIFY
DISTORTIONS
THE
SVR
WITH
A
RADIAL
BASIS
FUNCTION
RBF
KERNEL
AND
TO
PERFORM
DISTORTION
SPECIFIC
QUALITY
ASSESSMENT
IN
FIG
WE
PLOT
THE
SPEARMAN
RANK
ORDERED
CORRELATION
COEFFICIENT
IV
P
ERFORMANCE
E
VALUATION
SROCC
BETWEEN
EACH
OF
THESE
FEATURES
AND
HUMAN
DMOS
FROM
THE
LIVE
IQA
DATABASE
FOR
EACH
OF
THE
DISTORTIONS
IN
A
CORRELATION
WITH
HUMAN
OPINIONS
THE
DATABASE
JPEG
AND
COMPRESSION
ADDITIVE
WE
USED
THE
LIVE
IQA
DATABASE
TO
TEST
THE
PERFOR
WHITE
GAUSSIAN
NOISE
GAUSSIAN
BLUR
AND
A
RAYLEIGH
FAST
FADING
MANCE
OF
BRISQUE
WHICH
CONSISTS
OF
REFERENCE
IMAGES
CHANNEL
DISTORTION
TO
ASCERTAIN
HOW
WELL
THE
FEATURES
CORRELATE
WITH
DISTORTED
IMAGES
SPANNING
FIVE
DIFFERENT
DISTORTION
WITH
HUMAN
JUDGMENTS
OF
QUALITY
NOTE
THAT
NO
TRAINING
IS
CATEGORIES
AND
JPEG
COMPRESSION
ADDI
UNDERTAKEN
HERE
THE
PLOT
IS
SIMPLY
TO
ILLUSTRATE
THAT
EACH
TIVE
WHITE
GAUSSIAN
NOISE
WN
GAUSSIAN
BLUR
BLUR
AND
FEATURE
CAPTURES
QUALITY
INFORMATION
AND
TO
SHOW
THAT
IMAGES
A
RAYLEIGH
FAST
FADING
CHANNEL
SIMULATION
FF
EACH
OF
THE
ARE
AFFECTED
DIFFERENTLY
BY
DIFFERENT
DISTORTIONS
DISTORTED
IMAGES
HAS
AN
ASSOCIATED
DIFFERENCE
MEAN
OPINION
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
NUMBER
OF
COEFFICIENTS
NORMALIZED
NUMBER
OF
COEFFICIENTS
NORMALIZED
ORG
ORG
JPEG
JPEG
WN
WN
BLUR
BLUR
FF
FF
PAIRED
PRODUCT
COEFFICIENTS
PAIRED
PRODUCT
COEFFICIENTS
A
B
NUMBER
OF
COEFFICIENTS
NORMALIZED
NUMBER
OF
COEFFICIENTS
NORMALIZED
ORG
ORG
JPEG
JPEG
WN
WN
BLUR
BLUR
FF
FF
PAIRED
PRODUCT
COEFFICIENTS
PAIRED
PRODUCT
COEFFICIENTS
C
D
FIG
HISTOGRAMS
OF
PAIRED
PRODUCTS
OF
MSCN
COEFFICIENTS
OF
A
NATURAL
UNDISTORTED
IMAGE
AND
VARIOUS
DISTORTED
VERSIONS
OF
IT
A
HORIZONTAL
B
VERTICAL
C
MAIN
DIAGONAL
D
SECONDARY
DIAGONAL
DISTORTIONS
FROM
THE
LIVE
IQA
DATABASE
JPEG
JPEG
COMPRESSION
WN
ADDITIVE
WHITE
GAUSSIAN
NOISE
BLUR
GAUSSIAN
BLUR
FF
RAYLEIGH
FAST
FADING
CHANNEL
SIMULATION
SCORE
DMOS
WHICH
REPRESENTS
THE
SUBJECTIVE
QUALITY
OF
THE
AND
LCC
INDICATE
GOOD
PERFORMANCE
IN
TERMS
OF
CORRELATION
IMAGE
WITH
HUMAN
OPINION
THESE
PERFORMANCE
INDICES
ARE
TABULATED
SINCE
THE
BRISQUE
APPROACH
REQUIRES
A
TRAINING
PROCEDURE
IN
TABLES
II
AND
III
TO
CALIBRATE
THE
REGRESSOR
MODULE
WE
DIVIDE
THE
LIVE
DATABASE
WE
ALSO
TABULATED
THE
PERFORMANCE
OF
THREE
FULL
REFERENCE
INTO
TWO
RANDOMLY
CHOSEN
SUBSETS
TRAINING
AND
INDICES
PEAK
SIGNAL
TO
NOISE
RATIO
PSNR
STRUCTURAL
SIMILAR
TESTING
SUCH
THAT
NO
OVERLAP
BETWEEN
TRAIN
AND
TEST
CONTENT
ITY
INDEX
SSIM
AND
MULTI
SCALE
STRUCTURAL
SIMILARITY
OCCURS
WE
DO
THIS
TO
ENSURE
THAT
THE
REPORTED
RESULTS
DO
INDEX
MS
SSIM
ALTHOUGH
PSNR
IS
A
POOR
MEA
NOT
DEPEND
ON
FEATURES
EXTRACTED
FROM
KNOWN
SPATIAL
CONTENT
SURE
OF
PERCEPTUAL
QUALITY
IT
IS
OFTEN
USED
TO
BENCHMARK
WHICH
CAN
ARTIFICALLY
IMPROVE
PERFORMANCE
FURTHER
WE
REPEAT
FOR
QA
ALGORITHMS
THE
SSIM
AND
MS
SSIM
THIS
RANDOM
TRAIN
TEST
PROCEDURE
TIMES
AND
REPORT
THE
INDICES
ARE
POPULAR
OWING
TO
THEIR
PERFORMANCE
AND
SIMPLICITY
MEDIAN
OF
THE
PERFORMANCE
ACROSS
THESE
ITERATIONS
IN
WE
ALSO
INCLUDE
THE
PERFORMANCE
OF
THE
PREVIOUSLY
SUMMA
ORDER
TO
ELIMINATE
PERFORMANCE
BIAS
RIZED
GENERAL
PURPOSE
NO
REFERENCE
ALGORITHMS
CBIQ
THE
SPEARMAN
RANK
ORDERED
CORRELATION
COEFFICIENT
LBIQ
BLIINDS
II
AND
DIIVINE
INDEX
WE
SROCC
AND
PEARSON
LINEAR
CORRELATION
COEFFICIENT
LCC
REQUESTED
QUALITY
SCORES
FROM
AUTHORS
FOR
CBIQ
AND
BETWEEN
THE
PREDICTED
SCORE
FROM
THE
ALGORITHM
AND
DMOS
FURTHER
NOTE
THAT
DUE
TO
RANDOMNESS
OF
THE
TRIALS
THERE
MAY
BE
A
WERE
USED
TO
ACCESS
QA
PERFORMANCE
BEFORE
COMPUTING
LCC
SLIGHT
DISCREPANCY
BETWEEN
RESULTS
REPORTED
HERE
AND
ELSEWHERE
HOWEVER
THESE
THE
ALGORITHM
SCORES
WERE
PASSED
THROUGH
A
LOGISTIC
NON
DIFFERENCES
IN
CORRELATIONS
ARE
NOT
STATISTICALLY
SIGNIFICANT
AND
ARE
SIMPLY
AN
LINEARITY
AS
DESCRIBED
IN
A
VALUE
CLOSE
TO
FOR
SROCC
ARTIFACT
OF
THE
RANDOM
TRAIN
TEST
SAMPLING
MITTAL
ET
AL
NR
IQA
IN
THE
SPATIAL
DOMAIN
TABLE
III
M
EDIAN
L
INEAR
C
ORRELATION
C
OEFFICIENT
A
CROSS
T
RAIN
T
EST
C
OMBINATIONS
ON
THE
LIVE
IQA
D
ATABASE
I
TALICS
I
NDICATE
SROCC
OF
FEATURE
WITH
DMOS
N
O
R
EFERENCE
A
LGORITHMS
JPEG
WN
BLUR
FF
ALL
PSNR
SSIM
MS
SSIM
CBIQ
LBIQ
BLIINDS
II
JP2K
DIIVINE
JPEG
WN
POINTWISE
BLUR
FF
PAIRWISE
BRISQUE
FEATURE
NUMBER
TABLE
IV
FIG
CORRELATION
OF
FEATURES
WITH
HUMAN
JUDGMENTS
OF
QUALITY
DMOS
M
EDIAN
PEARMAN
R
ANK
O
RDERED
C
ORRELATION
C
OEFFICIENT
FOR
DIFFERENT
DISTORTIONS
SROCC
A
CROSS
T
RAIN
T
EST
C
OMBINATIONS
ON
THE
TABLE
II
LIVE
IQA
D
ATABASE
FOR
D
IFFERENT
W
INDOW
IZES
M
EDIAN
PEARMAN
R
ANK
O
RDERED
C
ORRELATION
C
OEFFICIENT
I
TALICS
I
NDICATE
N
O
R
EFERENCE
A
LGORITHMS
SROCC
A
CROSS
T
RAIN
T
EST
C
OMBINATIONS
ON
WHITE
GAUSSIAN
FAST
THE
LIVE
IQA
D
ATABASE
I
TALICS
I
NDICATE
K
L
JPEG
OVERALL
NOISE
BLUR
FADING
N
O
R
EFERENCE
A
LGORITHMS
JPEG
WN
BLUR
FF
ALL
PSNR
SSIM
MS
SSIM
CBIQ
LBIQ
BLIINDS
II
DIIVINE
POINTWISE
PAIRWISE
SROCC
VALUE
BRISQUE
LBIQ
IMPLEMENTATIONS
OF
OTHER
INDICES
ARE
AVAILABLE
ONLINE
WE
ALSO
REPORTED
THE
CORRELATIONS
OBTAINED
BY
MODELING
EMPIRICAL
DISTRIBUTIONS
OF
MSCN
COEFFICIENTS
POINTWISE
ALONE
AND
PAIRWISE
PRODUCTS
ALONE
TO
COMPARE
THEIR
RELATIVE
IMPORTANCE
B
VARIATION
WITH
WINDOW
SIZE
PSNR
SSIM
MS
SSIM
CB
LBIQ
BLIINDS
II
DIIVINE
BRISQUE
AS
OBSERVED
FROM
THE
TABLE
IV
THE
PERFORMANCE
OF
FIG
MEAN
SROCC
AND
STANDARD
ERROR
BARS
FOR
VARIOUS
ALGORITHMS
ACROSS
BRISQUE
REMAINS
RELATIVELY
STABLE
WITH
RESPECT
TO
VARIATION
IN
THE
TRAIN
TEST
TRIALS
ON
LIVE
IQA
DATABASE
THE
WINDOW
SIZE
USED
TO
COMPUTE
THE
LOCAL
MEAN
AND
VARIANCES
HOWEVER
THE
PERFORMANCE
STARTS
TO
DECREASE
WHEN
IT
BECOMES
FAIRLY
LARGE
AS
THE
COMPUTATIONS
BECOME
NON
LOCAL
ALTHOUGH
THERE
EXIST
DIFFERENCES
IN
THE
MEDIAN
CORRELATIONS
BETWEEN
THE
DIFFERENT
ALGORITHMS
SEE
TABLE
II
THESE
DIFFER
ENCES
MAY
NOT
BE
STATISTICALLY
RELEVANT
HENCE
TO
EVALUATE
C
STATISTICAL
SIGNIFICANCE
AND
HYPOTHESIS
TESTING
THE
STATISTICAL
SIGNIFICANCE
OF
PERFORMANCE
OF
EACH
OF
THE
FIGURE
PLOTS
THE
MEAN
SROCC
ACROSS
THE
TRIALS
AND
ALGORITHMS
CONSIDERED
WE
PERFORMED
HYPOTHESIS
TESTING
BASED
THE
STANDARD
DEVIATIONS
OF
PERFORMANCE
ACROSS
THESE
TRIALS
ON
THE
T
TEST
ON
THE
SROCC
VALUES
OBTAINED
FROM
THE
FOR
EACH
OF
THE
ALGORITHMS
CONSIDERED
HERE
TRAIN
TEST
TRIALS
AND
WE
TABULATED
THE
RESULTS
IN
TABLE
V
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
TABLE
V
JPEG
WN
BLUR
FF
R
ESULTS
OF
O
NE
IDED
T
T
EST
P
ERFORMED
B
ETWEEN
SROCC
VALUES
OF
VARIOUS
IQA
A
LGORITHMS
A
VALUE
OF
I
NDICATES
T
HAT
THE
ROW
A
LGORITHM
IS
TATICALLY
UPERIOR
TO
THE
C
OLUMN
A
LGORITHM
I
NDICATES
T
HAT
THE
ROW
IS
W
ORSE
T
HAN
THE
C
OLUMN
A
VALUE
OF
G
IVES
I
NDICATES
JPEG
T
HAT
THE
T
WO
A
LGORITHMS
A
RE
TATISTICALLY
I
NDISTINGUISHABLE
I
TALICS
I
NDICATE
N
O
R
EFERENCE
A
LGORITHMS
WN
BLIINDS
PSNR
SSIM
MSSSIM
CBIQ
LBIQ
DIIVINE
BRISQUE
II
PSNR
SSIM
BLUR
MSSSIM
CBIQ
LBIQ
BLIINDS
II
FF
DIIVINE
BRISQUE
TABLE
VI
FIG
MEAN
CONFUSION
MATRIX
FOR
CLASSIFIER
ACROSS
TRIALS
ILLUSTRATES
WHICH
ROW
DISTORTION
IS
CONFUSED
WITH
WHICH
COLUMN
DISTORTION
HIGHER
M
EDIAN
C
LASSIFICATION
A
CCURACY
A
CROSS
NUMBER
INDICATES
GREATER
CONFUSION
T
RAIN
T
EST
T
RIALS
JPEG
WN
BLUR
FF
ALL
TABLE
VII
M
EDIAN
PEARMAN
R
ANK
O
RDERED
C
ORRELATION
C
OEFFICIENT
CLASSIFICATION
ACCURACY
SROCC
A
CROSS
T
RAIN
T
EST
C
OMBINATIONS
ON
THE
LIVE
IQA
DATABASE
I
TALICS
I
NDICATE
N
O
R
EFERENCE
A
LGORITHMS
THE
NULL
HYPOTHESIS
IS
THAT
THE
MEAN
CORRELATION
FOR
THE
JPEG
WN
BLUR
FF
ALL
ROW
ALGORITHM
IS
EQUAL
TO
MEAN
CORRELATION
FOR
THE
COLUMN
BRISQUE
ALGORITHM
WITH
A
CONFIDENCE
OF
THE
ALTERNATE
HYPOTHESIS
BRISQUE
IS
THAT
THE
MEAN
CORRELATION
OF
ROW
IS
GREATER
THAN
OR
LESSER
STAGE
THAN
THE
MEAN
CORRELATION
OF
THE
COLUMN
A
VALUE
OF
IN
THE
TABLE
INDICATES
THAT
THE
ROW
ALGORITHM
IS
STATICALLY
SUPERIOR
TO
THE
COLUMN
ALGORITHM
WHEREAS
A
INDICATES
THAT
THE
ROW
IS
STATISTICALLY
WORSE
THAN
THE
COLUMN
A
VALUE
OF
INDICATES
EACH
OF
THE
DISTORTIONS
WHERE
THE
SUM
OF
EACH
ROW
IN
THE
THAT
THE
ROW
AND
COLUMN
ARE
STATISTICALLY
INDISTINGUISHABLE
CONFUSION
MATRIX
IS
AND
ACTUAL
VALUES
REPRESENT
THE
MEAN
OR
EQUIVALENT
I
E
WE
COULD
NOT
REJECT
THE
NULL
HYPOTHESIS
CONFUSION
PERCENTAGE
ACROSS
THE
TRAIN
TEST
TRIALS
WE
AT
THE
CONFIDENCE
LEVEL
SEE
FROM
FIG
THAT
FF
AND
ARE
MOST
CONFUSED
WITH
FROM
TABLE
V
WE
CONCLUDE
THAT
BRISQUE
IS
HIGHLY
COM
EACH
OTHER
WHICH
IS
NOT
SURPRISING
SINCE
FF
DISTORTION
IS
A
PETITIVE
WITH
ALL
NO
REFERENCE
ALGORITHMS
TESTED
AND
STATISTICALLY
COMBINATION
OF
FOLLOWED
BY
PACKET
LOSS
ERRORS
BETTER
THAN
THE
FULL
REFERENCE
ALGORITHMS
PSNR
AND
SSIM
AND
JPEG
ARE
ALSO
CONFUSED
SOMETIMES
WN
AND
BLUR
ARE
GIVEN
THAT
THESE
MEASURES
REQUIRE
ADDITIONAL
INFORMATION
IN
GENERALLY
NOT
CONFUSED
WITH
OTHER
DISTORTIONS
THE
FORM
OF
THE
REFERENCE
IMAGE
THIS
IS
BY
NO
MEANS
A
SMALL
ACHIEVEMENT
THIS
RESULT
SUGGESTS
THAT
TO
THE
EXTENT
DISTORTIONS
CAN
BE
TRAINED
ON
ONE
CAN
REPLACE
FULL
REFERENCE
ALGORITHMS
E
TWO
STAGE
PERFORMANCE
SUCH
AS
SSIM
WITH
THE
PROPOSED
BRISQUE
WITHOUT
ANY
LOSS
OF
PERFORMANCE
WE
NOTE
THAT
BRISQUE
REMAINS
SLIGHTLY
INFERIOR
WE
ALSO
INVESTIGATED
THE
POSSIBILITY
OF
REPLACING
THE
ONE
TO
THE
FR
MS
SSIM
INDICATING
THAT
THERE
MAY
STILL
BE
SOME
STAGE
FRAMEWORK
WHERE
FEATURES
ARE
DIRECTLY
MAPPED
TO
ROOM
FOR
IMPROVEMENT
IN
PERFORMANCE
QUALITY
WITH
A
TWO
STAGE
FRAMEWORK
SIMILAR
TO
THAT
PROPOSED
IN
IN
THIS
APPROACH
THE
SAME
SET
OF
FEATURES
ARE
USED
TO
IDENTIFY
THE
DISTORTION
AFFLICTING
THE
IMAGE
AS
ARE
THEN
USED
D
CLASSIFICATION
ACCURACY
FOR
DISTORTION
SPECIFIC
QA
SUCH
A
TWO
STAGE
APPROACH
WAS
IN
ORDER
TO
DEMONSTRATE
THAT
BRISQUE
FEATURES
CAN
ALSO
USED
WITH
RECENT
SUCCESS
FOR
NSS
BASED
BLIND
IQA
IN
BE
USED
FOR
EXPLICIT
DISTORTION
IDENTIFICATION
WE
REPORT
TABLE
VII
WE
TABULATE
THE
MEDIAN
SROCC
VALUE
ACROSS
THE
MEDIAN
CLASSIFICATION
ACCURACY
OF
THE
CLASSIFIER
FOR
EACH
TRIALS
FOR
THE
TWO
STAGE
REALIZATION
OF
BRISQUE
WE
ALSO
LIST
OF
THE
DISTORTIONS
IN
THE
LIVE
DATABASE
AS
WELL
AS
ACROSS
ALL
THE
PERFORMANCES
OF
BRISQUE
FOR
COMPARISON
PURPOSES
THE
DISTORTIONS
IN
TABLE
VI
SLIGHT
DIP
IN
THE
PERFORMANCE
CAN
BE
ATTRIBUTED
TO
IMPERFECT
FURTHER
IN
ORDER
TO
VISUALIZE
WHICH
DISTORTIONS
ARE
DISTORTION
IDENTIFICATION
IN
THE
FIRST
STAGE
OF
THE
TWO
STAGE
CONFUSED
THE
MOST
FIG
PLOTS
THE
CONFUSION
MATRIX
FOR
FRAMEWORK
MITTAL
ET
AL
NR
IQA
IN
THE
SPATIAL
DOMAIN
TABLE
VIII
TABLE
X
PEARMAN
R
ANK
O
RDERED
C
ORRELATION
C
OEFFICIENT
SROCC
ON
C
OMPLEXITY
A
NALYSIS
OF
BRISQUE
A
C
OMPARISON
OF
THE
A
MOUNT
THE
D
ATABASE
I
TALICIZED
A
LGORITHMS
A
RE
NR
IQA
OF
T
IME
TAKEN
TO
C
OMPUTE
VARIOUS
Q
UALITY
M
EASURES
FOR
A
LGORITHMS
O
THERS
A
RE
FR
IQA
A
LGORITHMS
A
I
MAGE
ON
A
GH
Z
INGLE
C
ORE
PC
W
ITH
GB
OF
RAM
JPEG
WN
GBLUR
ALL
PSNR
ALGORITHM
TIME
SECONDS
SSIM
PSNR
BRISQUE
DIIVINE
BLIINDS
II
TABLE
IX
BRISQUE
I
NFORMAL
C
OMPLEXITY
A
NALYSIS
OF
BRISQUE
TABULATED
VALUES
R
EFLECT
THE
P
ERCENTAGE
OF
T
IME
D
EVOTED
TO
E
ACH
OF
THE
TEPS
IN
BRISQUE
AND
DIIVINE
AND
IN
TABLE
X
WE
LIST
THE
TIME
TAKEN
IN
STEP
PERCENTAGE
OF
TIME
SECONDS
TO
COMPUTE
EACH
QUALITY
MEASURE
ON
AN
IMAGE
OF
MSCN
RESOLUTION
ON
A
GHZ
SINGLE
CORE
PC
WITH
GB
GGD
OF
RAM
WE
USE
UNOPTIMIZED
MATLAB
CODE
FOR
ALL
OF
PAIRWISE
PRODUCTS
AND
AGGD
THESE
ALGORITHMS
IN
ORDER
TO
ENSURE
A
FAIR
COMPARISON
WE
ALSO
LIST
THE
EFFICIENCY
AS
A
FRACTION
OF
THE
TIME
TAKEN
TO
COMPUTE
F
DATABASE
INDEPENDENCE
PSNR
TO
ALLOW
FOR
A
MACHINE
INDEPENDENT
COMPARISON
HAVING
EVALUATED
BRISQUE
ON
THE
LIVE
IQA
DATABASE
ACROSS
ALGORITHMS
AS
TABLE
X
DEMONSTRATES
BRISQUE
IS
WE
NOW
DEMONSTRATE
THAT
THE
PERFORMANCE
OF
BRISQUE
IS
NOT
QUITE
EFFICIENT
OUTPERFORMING
THE
DIIVINE
INDEX
AND
THE
BOUND
BY
THE
DATABASE
ON
WHICH
IT
IS
TESTED
TO
SHOW
THIS
WE
BLIINDS
II
INDEX
BY
A
LARGE
AMOUNT
THIS
SUGGESTS
THAT
THE
TRAINED
BRISQUE
ON
THE
ENTIRE
LIVE
IQA
DATABASE
AND
THEN
SPATIAL
DOMAIN
BRISQUE
AN
IDEAL
CANDIDATE
FOR
REAL
TIME
APPLIED
BRISQUE
TO
THE
DATABASE
BLIND
ASSESSMENT
OF
VISUAL
QUALITY
THE
TID
DATABASE
CONSISTS
OF
REFERENCE
IMAGES
AND
DISTORTED
IMAGES
OVER
DISTORTION
CATEGORIES
SINCE
THERE
V
A
PPLICATION
TO
B
LIND
I
MAGE
D
ENOISING
ARE
ONLY
NATURAL
IMAGES
AND
OUR
ALGORITHM
IS
BASED
ON
THE
COMPUTATIONAL
EFFICIENCY
AND
EXCELLENT
QUALITY
PREDIC
THE
STATISTICS
OF
NATURAL
IMAGES
WE
TEST
OUR
APPROACH
ONLY
ON
TION
PERFORMANCE
MAKES
BRISQUE
AN
ATTRACTIVE
OPTION
FOR
THESE
IMAGES
FURTHER
ALTHOUGH
THERE
EXIST
DISTORTION
PRACTICAL
APPLICATIONS
ONE
SUCH
APPLICATION
COULD
BE
USING
A
CATEGORIES
WE
TESTED
BRISQUE
ONLY
ON
THESE
DISTORTIONS
QUALITY
MEASURE
TO
AUGMENT
THE
PERFORMANCE
OF
IMAGE
REPAIR
THAT
IT
IS
TRAINED
FOR
JPEG
COMPRESSION
ALGORITHMS
IN
THIS
SECTION
WE
DESCRIBE
ONE
SUCH
APPROACH
ADDITIVE
WHITE
NOISE
WN
AND
GAUSSIAN
BLUR
BLUR
FF
WHERE
THE
BRISQUE
FEATURES
ARE
USED
TO
TRANSFORM
A
NON
DISTORTION
DOES
NOT
EXIST
IN
THE
TID
DATABASE
THE
RESULTS
BLIND
IMAGE
DENOISING
ALGORITHM
INTO
A
BLIND
IMAGE
DENOISING
OF
APPLYING
BRISQUE
ON
TID
ARE
TABULATED
IN
TABLE
VIII
ALGORITHM
WHERE
WE
ALSO
LIST
THE
PERFORMANCE
OF
PSNR
AND
SSIM
BLIND
IMAGE
DENOISING
ALGORITHMS
SEEK
TO
REDUCE
THE
AMOUNT
FOR
COMPARISON
PURPOSES
IT
SHOULD
BE
CLEAR
THAT
BRISQUE
OF
NOISE
PRESENT
IN
CORRUPTED
IMAGES
WITHOUT
ANY
ADDITIONAL
PERFORMS
WELL
IN
TERMS
OF
CORRELATION
WITH
HUMAN
PERCEPTION
INFORMATION
SUCH
AS
THE
NOISE
VARIANCE
ALTHOUGH
IMAGE
OF
QUALITY
AND
THAT
THE
PERFORMANCE
DOES
NOT
DEPEND
ON
THE
DENOISING
IS
A
WELL
STUDIED
PROBLEM
IN
IMAGE
PROCESSING
DATABASE
BLIND
IMAGE
DENOISING
REMAINS
RELATIVELY
UNDEREX
PLORED
THE
PROPOSED
ALGORITHMS
TYPICALLY
ADDRESS
G
COMPUTATIONAL
COMPLEXITY
PARAMETER
ESTIMATION
IN
AN
AD
HOC
FASHION
WITHOUT
REGARD
TO
OUR
DESCRIPTION
OF
BRISQUE
FOCUSED
ON
THE
RELATIONSHIP
NATURAL
SCENE
STATISTICS
HERE
WE
DEMONSTRATE
A
SYSTEMATIC
OF
THE
STATISTICAL
FEATURES
TO
NATURAL
SCENE
STATISTICS
AND
THE
PERCEPTION
BASED
PARAMETER
ESTIMATION
APPROACH
THAT
RESULTS
EFFECT
THAT
DISTORTIONS
HAVE
ON
SUCH
STATISTICS
HOWEVER
GIVEN
IN
BETTER
DENOISING
PERFORMANCE
WE
AUGMENT
A
STATE
OF
THE
ART
THE
SMALL
NUMBER
OF
FEATURES
THAT
ARE
EXTRACTED
PER
SCALE
IMAGE
DENOISING
ALGORITHM
BY
USING
BRISQUE
FEATURE
BASED
AND
THE
FACT
THAT
PARAMETER
ESTIMATION
NEEDS
TO
BE
PERFORMED
PARAMETER
PREDICTION
TO
IMPROVE
PERFORMANCE
ONLY
TIMES
FOR
AN
ENTIRE
IMAGE
IN
COMPARISON
TO
PARAMETER
THE
WORK
CLOSEST
IN
CONCEPT
TO
THIS
APPROACH
IS
THE
ONE
ESTIMATION
FOR
EACH
BLOCK
AS
IN
BLIINDS
II
THE
READER
PROPOSED
IN
WHERE
IMAGE
CONTENT
MEASURES
WERE
USED
TO
WILL
APPRECIATE
THE
FACT
THAT
BRISQUE
IS
EXTREMELY
EFFICIENT
PREDICT
THE
NOISE
VARIANCE
IN
THE
IMAGE
WHICH
WAS
THEN
USED
HAVING
DEMONSTRATED
THAT
BRISQUE
PERFORMS
WELL
IN
TERMS
FOR
IMAGE
DENOISING
HOWEVER
THE
APPROACH
IS
COMPUTATIONALLY
OF
CORRELATION
WITH
HUMAN
PERCEPTION
WE
ALSO
NOW
SHOW
THAT
INTENSIVE
AND
THE
MEASURE
OF
CONTENT
IN
THE
IMAGE
MAY
BRISQUE
HAS
LOW
COMPLEXITY
IN
TABLE
IX
WE
LIST
THE
RELATIVE
NOT
BE
THE
IDEAL
MEASURE
TO
PREDICT
NOISE
VARIANCE
IN
PERCENTAGE
OF
TIME
EACH
OF
THE
STAGES
OF
BRISQUE
USES
AS
A
THE
NOISY
IMAGE
IS
DENOISED
MULTIPLE
TIMES
AND
QUALITY
IS
PERCENTAGE
OF
THE
TIME
TAKEN
TO
COMPUTE
THE
QUALITY
OF
AN
ESTIMATED
USING
THEIR
PROPOSED
NO
REFERENCE
CONTENT
EVALUATION
IMAGE
ONCE
TRAINED
ALGORITHM
AMONGST
THE
LARGE
SET
OF
DENOISED
IMAGES
PRODUCED
WE
ALSO
COMPARE
THE
OVERALL
COMPUTATIONAL
COMPLEXITY
THE
IMAGE
WITH
THE
BEST
CONTENT
QUALITY
IS
SELECTED
AS
THE
OF
BRISQUE
WITH
THE
FR
PSNR
AND
THE
NR
BLIINDS
II
DENOISED
IMAGE
AS
AN
ALTERNATIVE
WE
PROPOSE
A
LEARNING
BASED
IEEE
TRANSACTIONS
ON
IMAGE
PROCESSING
VOL
NO
DECEMBER
QUALITY
OF
DENOISED
IMAGE
USING
MS
SSIM
A
B
PREDICTED
DEFAULT
C
AMOUNT
OF
NOISE
VARIANCE
ON
SCALE
OF
FIG
ACCURATE
NOISE
VARIANCE
AS
INPUT
TO
THE
ALGORITHM
IN
PRODUCES
POORER
QUALITY
DENOISED
IMAGES
A
NOISY
IMAGE
Σ
MS
SSIM
B
DENOISED
WITH
Σ
MS
SSIM
AND
FIG
MEAN
QUALITY
AND
ASSOCIATED
ERRORS
AT
EACH
NOISE
LEVEL
ACROSS
C
DENOISED
WITH
Σ
MS
SSIM
TEST
IMAGES
FOR
OUR
APPROACH
AS
WELL
AS
THE
REFERENCE
IMPLEMENTATION
OF
FRAMEWORK
WHERE
NOISE
PARAMETERS
ARE
ESTIMATED
USING
NATURAL
SCENE
STATISTICS
BASED
ON
BRISQUE
FEATURES
NON
BLIND
ALGORITHM
COULD
BE
IMPROVED
BY
USING
BRISQUE
THE
DENOISING
ALGORITHM
THAT
WE
USE
IS
THE
ONE
PROPOSED
NATURAL
SCENE
FEATURES
TO
PRODUCE
A
BLIND
IMAGE
DENOISER
IN
WHICH
REQUIRES
AS
INPUT
THE
NOISE
VARIANCE
IN
THE
IMAGE
TO
SHOW
THE
EFFECTIVENESS
OF
OUR
ALGORITHM
AND
TO
HOWEVER
OUR
EXPERIMENTS
SUGGEST
THAT
WHEN
THE
ALGORITHM
DEMONSTRATE
ITS
ROBUSTNESS
ACROSS
A
LARGE
VARIETY
OF
IMAGES
IS
FED
THE
TRUE
ACCURATE
NOISE
VARIANCE
THE
PERFORMANCE
OF
AND
DISTORTION
LEVELS
WE
CREATED
A
NOISY
IMAGE
DATASET
FROM
THE
DENOISER
IS
SUB
PAR
THE
PERFORMANCE
OF
THE
ALGORITHM
THE
IMAGES
PRESENT
IN
THE
BERKELEY
IMAGE
SEGMENTATION
DRASTICALLY
IMPROVES
IF
A
SYSTEMATICALLY
DIFFERENT
PARAMETER
DATABASE
WE
INTRODUCED
DIFFERENT
LEVELS
OF
GAUSSIAN
SELECTED
BASED
ON
PERCEPTUAL
QUALITY
IS
FED
AS
INPUT
TO
THE
NOISE
TO
EACH
IMAGE
YIELDING
A
TOTAL
OF
NOISY
IMAGES
ALGORITHM
IN
ORDER
TO
DEMONSTRATE
THIS
IN
FIG
WE
PLOT
AN
THE
NOISE
VARIANCE
RANGED
FROM
TO
UNIFORMLY
IMAGE
DENOISED
USING
THE
TRUE
NOISE
VARIANCE
AND
THAT
ARRIVED
AT
SAMPLED
ON
A
LOGARITHMIC
SCALE
IMAGES
WERE
THEN
USED
USING
THE
NOISE
VARIANCE
FROM
OUR
APPROACH
DESCRIBED
BELOW
FOR
TRAINING
AND
FOR
TESTING
THEREBY
ENSURING
NO
CONTENT
NOTICE
THAT
OUR
APPROACH
PRODUCES
BETTER
VISUAL
QUALITY
AND
OVERLAP
BETWEEN
THE
TWO
SETS
THE
REGRESSION
MODEL
DESCRIBED
BETTER
OBJECTIVE
QUALITY
AS
GAUGED
BY
THE
MULTI
SCALE
STRUCTURAL
ABOVE
WAS
TRAINED
ON
TRAINING
IMAGES
AND
THEN
USED
TO
SIMILARITY
INDEX
MS
SSIM
PREDICT
THE
INPUT
PARAMETER
ON
THE
TEST
IMAGES
WE
DESIGN
OUR
TRAINING
FRAMEWORK
TO
ACCOUNT
FOR
THIS
ONCE
DENOISED
IMAGES
ARE
OBTAINED
WE
COMPARE
THEIR
DISCREPENCY
AND
TO
ENSURE
THAT
THE
DENOISED
IMAGE
ATTAINS
QUALITY
USING
MS
SSIM
USING
OUR
APPROACH
AS
WELL
FOR
THE
HIGHEST
VISUAL
QUALITY
OUR
APPROACH
PROCEEDS
AS
FOLLOWS
THE
DEFAULT
IMPLEMENTATION
OF
THE
ALGORITHM
AND
IN
GIVEN
A
LARGE
SET
OF
NOISY
IMAGES
AFFLICTED
WITH
DIFFERENT
FIG
WE
PLOT
THE
MEAN
QUALITY
AND
THE
ASSOCIATED
STANDARD
LEVELS
OF
NOISE
WE
DENOISE
EACH
IMAGE
USING
THE
DENOISING
ERRORS
AT
EACH
NOISE
LEVEL
ACROSS
THE
TEST
IMAGES
FOR
BOTH
ALGORITHM
BY
PROVIDING
AS
INPUT
IMAGES
THESE
APPROACHES
IT
IS
CLEAR
THAT
BRISQUE
AUGMENTED
DISTORTED
WITH
VARIOUS
VALUES
OF
NOISE
VARIANCE
THE
DENOISED
PRODUCES
MUCH
HIGHER
QUALITY
IMAGES
THAN
THE
BASELINE
IMAGES
SO
OBTAINED
ARE
JUDGED
FOR
THEIR
QUALITY
USING
MS
WE
ALSO
ANALYZED
WHETHER
THE
DIFFERENCES
OBSERVED
IN
THE
SSIM
AND
THE
NOISE
PARAMETER
CORRESPONDING
TO
THE
IMAGE
QUALITY
OF
THE
DENOISED
IMAGES
BETWEEN
OUR
APPROACH
AND
THE
WITH
THE
MAXIMUM
DENOISED
QUALITY
IS
SET
AS
THE
INPUT
TO
THE
REFERENCE
IMPLEMENTATION
ARE
STATISTICALLY
SIGNIFICANT
ALGORITHM
THESE
NOISE
VARIANCES
ARE
THEN
USED
IN
A
TRAINING
USING
THE
T
TEST
OUR
ANALYSIS
INDICATES
THAT
FOR
ALL
NOISE
PHASE
WHERE
BRISQUE
FEATURES
ARE
MAPPED
ON
TO
THE
NOISE
VARIANCES
SIMULATED
IN
THE
PRESENT
DATA
OUR
APPROACH
IS
STA
PREDICTION
PARAMETER
USING
SVM
REGRESSION
AS
BEFORE
TISTICALLY
SUPERIOR
TO
THE
REFERENCE
IMPLEMENTATION
IN
ONCE
TRAINED
THE
AUTOMATIC
PARAMETER
PREDICTION
APPROACH
IS
TERMS
OF
PERCEIVED
VISUAL
QUALITY
AT
THE
CONFIDENCE
LEVEL
CAPABLE
OF
PREDICTING
THE
LEVEL
OF
INPUT
NOISE
TO
SO
EXCEPTING
WHEN
THE
NOISE
VARIANCE
IS
A
TINY
WHERE
THAT
THE
OUTPUT
DENOISED
IMAGE
HAS
THE
HIGHEST
VISUAL
QUALITY
THE
TWO
APPROACHES
BECOME
STATISTICALLY
INDISTINGUISHABLE
WE
NOTE
THAT
OUR
TRAINING
APPROACH
RESEMBLES
THAT
OF
GIVEN
A
NEW
UNSEEN
TEST
NOISY
IMAGE
THE
BRISQUE
AUG
VI
C
ONCLUSION
MENTED
APPROACH
PREDICTS
THE
ACCURATE
INPUT
TO
WE
PROPOSED
A
NATURAL
SCENE
STATISTIC
BASED
DISTORTION
AND
DENOISES
THE
IMAGE
WITH
AS
WE
SHALL
SOON
SEE
MUCH
GENERIC
BLIND
NO
REFERENCE
NR
QUALITY
ASSESSMENT
ALGORITHM
HIGHER
VISUAL
QUALITY
THAN
THE
BASELINE
NOTICE
THAT
BRISQUE
THE
BLIND
REFERENCELESS
IMAGE
SPATIAL
QUALITY
EVALUATOR
AUGMENTATION
IS
NOT
LIMITED
TO
THE
ALGORITHM
AND
ANY
BRISQUE
WHICH
OPERATES
IN
THE
SPATIAL
DOMAIN
THE
SUCCESS
OF
MACHINE
LEARNING
ALGORITHMS
GENERALLY
DEPENDS
ON
DATA
REPRESENTATION
AND
WE
HYPOTHESIZE
THAT
THIS
IS
BECAUSE
DIFFERENT
REPRESENTATIONS
CAN
ENTANGLE
AND
HIDE
MORE
OR
LESS
THE
DIFFERENT
EXPLANATORY
FACTORS
OF
VARIATION
BEHIND
THE
DATA
ALTHOUGH
SPECIFIC
DOMAIN
KNOWLEDGE
CAN
BE
USED
TO
HELP
DESIGN
REPRESENTATIONS
LEARNING
WITH
GENERIC
PRIORS
CAN
ALSO
BE
USED
AND
THE
QUEST
FOR
AI
IS
MOTIVATING
THE
DESIGN
OF
MORE
POWERFUL
REPRESENTATION
LEARNING
ALGORITHMS
IMPLEMENTING
SUCH
PRIORS
THIS
PAPER
REVIEWS
RECENT
WORK
IN
THE
AREA
OF
UNSUPERVISED
FEATURE
LEARNING
AND
DEEP
LEARNING
COVERING
ADVANCES
IN
PROBABILISTIC
MODELS
AUTOENCODERS
MANIFOLD
LEARNING
AND
DEEP
NETWORKS
THIS
MOTIVATES
LONGER
TERM
UNANSWERED
QUESTIONS
ABOUT
THE
APPROPRIATE
OBJECTIVES
FOR
LEARNING
GOOD
REPRESENTATIONS
FOR
COMPUTING
REPRESENTATIONS
I
E
INFERENCE
AND
THE
GEOMETRICAL
CONNECTIONS
BETWEEN
REPRESENTATION
LEARNING
DENSITY
ESTIMATION
AND
MANIFOLD
LEARNING
INDEX
TERMS
DEEP
LEARNING
REPRESENTATION
LEARNING
FEATURE
LEARNING
UNSUPERVISED
LEARNING
BOLTZMANN
MACHINE
AUTOENCODER
NEURAL
NETS
Ç
INTRODUCTION
T
HE
PERFORMANCE
OF
MACHINE
LEARNING
METHODS
IS
HEAVILY
DEPENDENT
ON
THE
CHOICE
OF
DATA
REPRESENTATION
OR
FEATURES
ON
WHICH
THEY
ARE
APPLIED
FOR
THAT
REASON
MUCH
DISTRIBUTION
OF
THE
UNDERLYING
EXPLANATORY
FACTORS
FOR
THE
OBSERVED
INPUT
A
GOOD
REPRESENTATION
IS
ALSO
ONE
THAT
IS
USEFUL
AS
INPUT
TO
A
SUPERVISED
PREDICTOR
AMONG
THE
OF
THE
ACTUAL
EFFORT
IN
DEPLOYING
MACHINE
LEARNING
ALGO
VARIOUS
WAYS
OF
LEARNING
REPRESENTATIONS
THIS
PAPER
FOCUSES
RITHMS
GOES
INTO
THE
DESIGN
OF
PREPROCESSING
PIPELINES
AND
ON
DEEP
LEARNING
METHODS
THOSE
THAT
ARE
FORMED
BY
THE
DATA
TRANSFORMATIONS
THAT
RESULT
IN
A
REPRESENTATION
OF
THE
COMPOSITION
OF
MULTIPLE
NONLINEAR
TRANSFORMATIONS
WITH
DATA
THAT
CAN
SUPPORT
EFFECTIVE
MACHINE
LEARNING
SUCH
THE
GOAL
OF
YIELDING
MORE
ABSTRACT
AND
ULTIMATELY
MORE
FEATURE
ENGINEERING
IS
IMPORTANT
BUT
LABOR
INTENSIVE
AND
USEFUL
REPRESENTATIONS
HERE
WE
SURVEY
THIS
RAPIDLY
HIGHLIGHTS
THE
WEAKNESS
OF
CURRENT
LEARNING
ALGORITHMS
DEVELOPING
AREA
WITH
SPECIAL
EMPHASIS
ON
RECENT
PROGRESS
THEIR
INABILITY
TO
EXTRACT
AND
ORGANIZE
THE
DISCRIMINATIVE
WE
CONSIDER
SOME
OF
THE
FUNDAMENTAL
QUESTIONS
THAT
HAVE
INFORMATION
FROM
THE
DATA
FEATURE
ENGINEERING
IS
A
WAY
TO
BEEN
DRIVING
RESEARCH
IN
THIS
AREA
SPECIFICALLY
WHAT
MAKES
TAKE
ADVANTAGE
OF
HUMAN
INGENUITY
AND
PRIOR
KNOWLEDGE
TO
ONE
REPRESENTATION
BETTER
THAN
ANOTHER
GIVEN
AN
EXAMPLE
COMPENSATE
FOR
THAT
WEAKNESS
TO
EXPAND
THE
SCOPE
AND
HOW
SHOULD
WE
COMPUTE
ITS
REPRESENTATION
I
E
PERFORM
EASE
OF
APPLICABILITY
OF
MACHINE
LEARNING
IT
WOULD
BE
HIGHLY
FEATURE
EXTRACTION
ALSO
WHAT
ARE
APPROPRIATE
OBJECTIVES
FOR
DESIRABLE
TO
MAKE
LEARNING
ALGORITHMS
LESS
DEPENDENT
ON
LEARNING
GOOD
REPRESENTATIONS
FEATURE
ENGINEERING
SO
THAT
NOVEL
APPLICATIONS
COULD
BE
CONSTRUCTED
FASTER
AND
MORE
IMPORTANTLY
TO
MAKE
PROGRESS
WHY
SHOULD
WE
CARE
ABOUT
LEARNING
TOWARD
ARTIFICIAL
INTELLIGENCE
AI
AN
AI
MUST
FUNDAMEN
REPRESENTATIONS
TALLY
UNDERSTAND
THE
WORLD
AROUND
US
AND
WE
ARGUE
THAT
THIS
CAN
ONLY
BE
ACHIEVED
IF
IT
CAN
LEARN
TO
IDENTIFY
AND
REPRESENTATION
LEARNING
HAS
BECOME
A
FIELD
IN
ITSELF
IN
THE
DISENTANGLE
THE
UNDERLYING
EXPLANATORY
FACTORS
HIDDEN
IN
MACHINE
LEARNING
COMMUNITY
WITH
REGULAR
WORKSHOPS
AT
THE
OBSERVED
MILIEU
OF
LOW
LEVEL
SENSORY
DATA
THE
LEADING
CONFERENCES
SUCH
AS
NIPS
AND
ICML
AND
A
NEW
THIS
PAPER
IS
ABOUT
REPRESENTATION
LEARNING
I
E
LEARNING
CONFERENCE
DEDICATED
TO
IT
ICLR
SOMETIMES
UNDER
THE
REPRESENTATIONS
OF
THE
DATA
THAT
MAKE
IT
EASIER
TO
EXTRACT
HEADER
OF
DEEP
LEARNING
OR
FEATURE
LEARNING
ALTHOUGH
DEPTH
USEFUL
INFORMATION
WHEN
BUILDING
CLASSIFIERS
OR
OTHER
IS
AN
IMPORTANT
PART
OF
THE
STORY
MANY
OTHER
PRIORS
ARE
PREDICTORS
IN
THE
CASE
OF
PROBABILISTIC
MODELS
A
GOOD
INTERESTING
AND
CAN
BE
CONVENIENTLY
CAPTURED
WHEN
THE
REPRESENTATION
IS
OFTEN
ONE
THAT
CAPTURES
THE
POSTERIOR
PROBLEM
IS
CAST
AS
ONE
OF
LEARNING
A
REPRESENTATION
AS
DISCUSSED
IN
THE
NEXT
SECTION
THE
RAPID
INCREASE
IN
SCIENTIFIC
ACTIVITY
ON
REPRESENTATION
LEARNING
HAS
BEEN
ACCOMPANIED
THE
AUTHORS
ARE
WITH
THE
DEPARTMENT
OF
COMPUTER
SCIENCE
AND
OPERATIONS
RESEARCH
UNIVERSITE
DE
MONTRE
AL
PO
BOX
SUCC
CENTRE
VILLE
AND
NOURISHED
BY
A
REMARKABLE
STRING
OF
EMPIRICAL
SUCCESSES
MONTREAL
QUEBEC
CANADA
BOTH
IN
ACADEMIA
AND
IN
INDUSTRY
BELOW
WE
BRIEFLY
MANUSCRIPT
RECEIVED
APR
REVISED
OCT
ACCEPTED
FEB
HIGHLIGHT
SOME
OF
THESE
HIGH
POINTS
PUBLISHED
ONLINE
FEB
RECOMMENDED
FOR
ACCEPTANCE
BY
BENGIO
L
DENG
H
LAROCHELLE
H
LEE
AND
SPEECH
RECOGNITION
AND
SIGNAL
PROCESSING
R
SALAKHUTDINOV
SPEECH
WAS
ONE
OF
THE
EARLY
APPLICATIONS
OF
NEURAL
FOR
INFORMATION
ON
OBTAINING
REPRINTS
OF
THIS
ARTICLE
PLEASE
SEND
E
MAIL
TO
TPAMI
COMPUTER
ORG
AND
REFERENCE
IEEECS
LOG
NUMBER
NETWORKS
IN
PARTICULAR
CONVOLUTIONAL
OR
TIME
DELAY
NEURAL
TPAMISI
DIGITAL
OBJECT
IDENTIFIER
NO
TPAMI
INTERNATIONAL
CONFERENCE
ON
LEARNING
REPRESENTATIONS
SS
IEEE
PUBLISHED
BY
THE
IEEE
COMPUTER
SOCIETY
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
NETWORKS
THE
RECENT
REVIVAL
OF
INTEREST
IN
NEURAL
NETWORKS
DEEP
LEARNING
AND
REPRESENTATION
LEARNING
HAS
HAD
A
STRONG
IMPACT
IN
THE
AREA
OF
SPEECH
RECOGNITION
WITH
BREAKTHROUGH
RESULTS
OBTAINED
BY
SEVERAL
ACADEMICS
AS
WELL
AS
RESEARCHERS
AT
INDUSTRIAL
LABS
BRINGING
THESE
ALGORITHMS
TO
A
LARGER
SCALE
AND
INTO
PRODUCTS
FOR
EXAMPLE
MICROSOFT
RELEASED
IN
A
NEW
VERSION
OF
THEIR
MICROSOFT
AUDIO
VIDEO
INDEXING
SERVICE
SPEECH
SYSTEM
BASED
ON
DEEP
LEARNING
THESE
AUTHORS
MANAGED
TO
REDUCE
THE
WORD
ERROR
RATE
ON
FOUR
MAJOR
BENCHMARKS
BY
ABOUT
PERCENT
E
G
FROM
TO
PERCENT
ON
COMPARED
TO
STATE
OF
THE
ART
MODELS
BASED
ON
GAUSSIAN
MIXTURES
FOR
THE
ACOUSTIC
MODELING
AND
TRAINED
ON
THE
SAME
AMOUNT
OF
DATA
HOURS
OF
SPEECH
THE
RELATIVE
FIG
ILLUSTRATION
OF
REPRESENTATION
LEARNING
DISCOVERING
EXPLANATORY
IMPROVEMENT
IN
ERROR
RATE
OBTAINED
BY
DAHL
ET
AL
ON
FACTORS
MIDDLE
HIDDEN
LAYER
IN
RED
SOME
EXPLAINING
THE
INPUT
SEMI
A
SMALLER
LARGE
VOCABULARY
SPEECH
RECOGNITION
BENCHMARK
SUPERVISED
SETTING
AND
SOME
EXPLAINING
TARGET
FOR
EACH
TASK
BECAUSE
BING
MOBILE
BUSINESS
SEARCH
DATASET
WITH
HOURS
OF
THESE
SUBSETS
OVERLAP
SHARING
OF
STATISTICAL
STRENGTH
HELPS
GENERALIZATION
SPEECH
IS
BETWEEN
AND
PERCENT
REPRESENTATION
LEARNING
ALGORITHMS
HAVE
ALSO
BEEN
AP
APPROACHES
OR
SURPASSES
THE
STATE
OF
THE
ART
ON
THESE
TASKS
PLIED
TO
MUSIC
SUBSTANTIALLY
BEATING
THE
STATE
OF
THE
ART
IN
BUT
IS
SIMPLER
AND
MUCH
FASTER
THAN
TRADITIONAL
PREDICTORS
POLYPHONIC
TRANSCRIPTION
WITH
RELATIVE
ERROR
IMPROVE
LEARNING
WORD
EMBEDDINGS
CAN
BE
COMBINED
WITH
LEARNING
MENT
BETWEEN
AND
PERCENT
ON
A
STANDARD
BENCHMARK
OF
IMAGE
REPRESENTATIONS
IN
A
WAY
THAT
ALLOWS
ASSOCIATING
TEXT
FOUR
DATASETS
DEEP
LEARNING
ALSO
HELPED
TO
WIN
MIREX
AND
IMAGES
THIS
APPROACH
HAS
BEEN
USED
SUCCESSFULLY
TO
MUSIC
INFORMATION
RETRIEVAL
COMPETITIONS
FOR
EXAMPLE
IN
BUILD
GOOGLE
IMAGE
SEARCH
EXPLOITING
HUGE
QUANTITIES
OF
ON
AUDIO
TAGGING
DATA
TO
MAP
IMAGES
AND
QUERIES
IN
THE
SAME
SPACE
AND
IT
HAS
RECENTLY
BEEN
EXTENDED
TO
DEEPER
MULTIMODAL
OBJECT
RECOGNITION
REPRESENTATIONS
THE
BEGINNINGS
OF
DEEP
LEARNING
IN
FOCUSED
ON
THE
THE
NEURAL
NET
LANGUAGE
MODEL
WAS
ALSO
IMPROVED
BY
MNIST
DIGIT
IMAGE
CLASSIFICATION
PROBLEM
BREAK
ADDING
RECURRENCE
TO
THE
HIDDEN
LAYERS
ALLOWING
IT
TO
ING
THE
SUPREMACY
OF
SVMS
PERCENT
ERROR
ON
THIS
BEAT
THE
STATE
OF
THE
ART
SMOOTHED
N
GRAM
MODELS
NOT
DATASET
THE
LATEST
RECORDS
ARE
STILL
HELD
BY
DEEP
NETWORKS
ONLY
IN
TERMS
OF
PERPLEXITY
EXPONENTIAL
OF
THE
AVERAGE
CIRESAN
ET
AL
CURRENTLY
CLAIM
THE
TITLE
OF
STATE
OF
THE
ART
NEGATIVE
LOG
LIKELIHOOD
OF
PREDICTING
THE
RIGHT
NEXT
WORD
FOR
THE
UNCONSTRAINED
VERSION
OF
THE
TASK
E
G
USING
A
GOING
DOWN
FROM
TO
BUT
ALSO
IN
TERMS
OF
WORD
CONVOLUTIONAL
ARCHITECTURE
WITH
PERCENT
ERROR
AND
ERROR
RATE
IN
SPEECH
RECOGNITION
SINCE
THE
LANGUAGE
MODEL
RIFAI
ET
AL
IS
STATE
OF
THE
ART
FOR
THE
KNOWLEDGE
FREE
IS
AN
IMPORTANT
COMPONENT
OF
A
SPEECH
RECOGNITION
SYSTEM
DECREASING
IT
FROM
PERCENT
BASELINE
VERSION
OF
MNIST
WITH
PERCENT
ERROR
OR
PERCENT
DISCRIMINATIVE
LANGUAGE
MODEL
TO
IN
THE
LAST
FEW
YEARS
DEEP
LEARNING
HAS
MOVED
FROM
PERCENT
ON
THE
WALL
STREET
JOURNAL
BENCHMARK
TASK
DIGITS
TO
OBJECT
RECOGNITION
IN
NATURAL
IMAGES
AND
THE
LATEST
SIMILAR
MODELS
HAVE
BEEN
APPLIED
IN
STATISTICAL
MACHINE
BREAKTHROUGH
HAS
BEEN
ACHIEVED
ON
THE
IMAGENET
DATASET
TRANSLATION
IMPROVING
PERPLEXITY
AND
BLEU
BRINGING
DOWN
THE
STATE
OF
THE
ART
ERROR
RATE
FROM
TO
SCORES
RECURSIVE
AUTOENCODERS
WHICH
GENERALIZE
RECURRENT
PERCENT
NETWORKS
HAVE
ALSO
BEEN
USED
TO
BEAT
THE
STATE
OF
THE
ART
NATURAL
LANGUAGE
PROCESSING
NLP
IN
FULL
SENTENCE
PARAPHRASE
DETECTION
ALMOST
DOU
BLING
THE
SCORE
FOR
PARAPHRASE
DETECTION
REPRESENTATION
BESIDES
SPEECH
RECOGNITION
THERE
ARE
MANY
OTHER
NLP
LEARNING
CAN
ALSO
BE
USED
TO
PERFORM
WORD
SENSE
APPLICATIONS
OF
REPRESENTATION
LEARNING
DISTRIBUTED
REPRESEN
DISAMBIGUATION
BRINGING
UP
THE
ACCURACY
FROM
TATIONS
FOR
SYMBOLIC
DATA
WERE
INTRODUCED
BY
HINTON
TO
PERCENT
ON
THE
SUBSET
OF
SENSEVAL
WHERE
THE
AND
FIRST
DEVELOPED
IN
THE
CONTEXT
OF
STATISTICAL
LANGUAGE
SYSTEM
COULD
BE
APPLIED
WITH
SUBJECT
VERB
OBJECT
SEN
MODELING
BY
BENGIO
ET
AL
IN
THE
SO
CALLED
NEURAL
NET
TENCES
FINALLY
IT
HAS
ALSO
BEEN
SUCCESSFULLY
USED
TO
LANGUAGE
MODELS
THEY
ARE
ALL
BASED
ON
LEARNING
A
SURPASS
THE
STATE
OF
THE
ART
IN
SENTIMENT
ANALYSIS
DISTRIBUTED
REPRESENTATION
FOR
EACH
WORD
CALLED
A
WORD
EMBEDDING
ADDING
A
CONVOLUTIONAL
ARCHITECTURE
COLLOBERT
MULTITASK
AND
TRANSFER
LEARNING
DOMAIN
ET
AL
DEVELOPED
THE
SENNA
THAT
SHARES
ADAPTATION
REPRESENTATIONS
ACROSS
THE
TASKS
OF
LANGUAGE
MODELING
TRANSFER
LEARNING
IS
THE
ABILITY
OF
A
LEARNING
ALGORITHM
TO
PART
OF
SPEECH
TAGGING
CHUNKING
NAMED
ENTITY
RECOGNITION
EXPLOIT
COMMONALITIES
BETWEEN
DIFFERENT
LEARNING
TASKS
TO
SEMANTIC
ROLE
LABELING
AND
SYNTACTIC
PARSING
SENNA
SHARE
STATISTICAL
STRENGTH
AND
TRANSFER
KNOWLEDGE
ACROSS
TASKS
AS
DISCUSSED
BELOW
WE
HYPOTHESIZE
THAT
REPRESENTATION
SEE
FOR
A
REVIEW
OF
EARLY
WORK
IN
THIS
AREA
LEARNING
ALGORITHMS
HAVE
AN
ADVANTAGE
FOR
SUCH
TASKS
FOR
THE
KNOWLEDGE
FREE
VERSION
OF
THE
TASK
WHERE
NO
IMAGE
SPECIFIC
BECAUSE
THEY
LEARN
REPRESENTATIONS
THAT
CAPTURE
UNDERLYING
PRIOR
IS
USED
SUCH
AS
IMAGE
DEFORMATIONS
OR
CONVOLUTIONS
FACTORS
A
SUBSET
OF
WHICH
MAY
BE
RELEVANT
FOR
EACH
THE
CLASS
IMAGENET
BENCHMARK
WHOSE
RESULTS
ARE
DETAILED
HERE
HTTP
WWW
IMAGE
NET
ORG
CHALLENGES
LSVRC
RESULTS
HTML
PARTICULAR
TASK
AS
ILLUSTRATED
IN
FIG
THIS
HYPOTHESIS
DOWNLOADABLE
FROM
HTTP
ML
NEC
LABS
COM
SENNA
SEEMS
CONFIRMED
BY
A
NUMBER
OF
EMPIRICAL
RESULTS
SHOWING
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
THE
STRENGTHS
OF
REPRESENTATION
LEARNING
ALGORITHMS
IN
DISCUSSED
IN
THE
PREVIOUS
SECTION
MULTITASK
AND
TRANSFER
LEARNING
SCENARIOS
TRANSFER
LEARNING
DOMAIN
ADAPTATION
MOST
IMPRESSIVE
ARE
THE
TWO
TRANSFER
LEARNING
CHALLENGES
MANIFOLDS
PROBABILITY
MASS
CONCENTRATES
NEAR
RE
HELD
IN
AND
WON
BY
REPRESENTATION
LEARNING
ALGO
GIONS
THAT
HAVE
A
MUCH
SMALLER
DIMENSIONALITY
THAN
RITHMS
FIRST
THE
TRANSFER
LEARNING
CHALLENGE
PRESENTED
AT
THE
ORIGINAL
SPACE
WHERE
THE
DATA
LIVE
THIS
IS
AN
ICML
WORKSHOP
OF
THE
SAME
NAME
WAS
WON
USING
EXPLICITLY
EXPLOITED
IN
SOME
OF
THE
AUTOENCODER
UNSUPERVISED
LAYERWISE
PRETRAINING
A
SECOND
ALGORITHMS
AND
OTHER
MANIFOLD
INSPIRED
ALGORITHMS
TRANSFER
LEARNING
CHALLENGE
WAS
HELD
THE
SAME
YEAR
AND
DESCRIBED
RESPECTIVELY
IN
SECTIONS
AND
WON
BY
GOODFELLOW
ET
AL
RESULTS
WERE
PRESENTED
AT
NATURAL
CLUSTERING
DIFFERENT
VALUES
OF
CATEGORICAL
NIPS
CHALLENGES
IN
LEARNING
HIERARCHICAL
MODELS
VARIABLES
SUCH
AS
OBJECT
CLASSES
ARE
ASSOCIATED
WITH
WORKSHOP
IN
THE
RELATED
DOMAIN
ADAPTATION
SETUP
THE
TARGET
SEPARATE
MANIFOLDS
MORE
PRECISELY
THE
LOCAL
VARIA
REMAINS
THE
SAME
BUT
THE
INPUT
DISTRIBUTION
CHANGES
TIONS
ON
THE
MANIFOLD
TEND
TO
PRESERVE
THE
VALUE
OF
A
IN
THE
MULTITASK
LEARNING
SETUP
REPRESENTATION
LEARNING
CATEGORY
AND
A
LINEAR
INTERPOLATION
BETWEEN
EXAM
HAS
ALSO
BEEN
FOUND
TO
BE
ADVANTAGEOUS
BECAUSE
PLES
OF
DIFFERENT
CLASSES
IN
GENERAL
INVOLVES
GOING
OF
SHARED
FACTORS
ACROSS
TASKS
THROUGH
A
LOW
DENSITY
REGION
I
E
P
ÐX
J
Y
IÞ
FOR
DIFFERENT
I
TEND
TO
BE
WELL
SEPARATED
AND
NOT
OVERLAP
WHAT
MAKES
A
REPRESENTATION
GOOD
MUCH
FOR
EXAMPLE
THIS
IS
EXPLOITED
IN
THE
MANIFOLD
PRIORS
FOR
REPRESENTATION
LEARNING
IN
AI
TANGENT
CLASSIFIER
MTC
DISCUSSED
IN
SECTION
THIS
HYPOTHESIS
IS
CONSISTENT
WITH
THE
IDEA
THAT
IN
ONE
OF
US
INTRODUCED
THE
NOTION
OF
AI
TASKS
WHICH
HUMANS
HAVE
NAMED
CATEGORIES
AND
CLASSES
BECAUSE
ARE
CHALLENGING
FOR
CURRENT
MACHINE
LEARNING
ALGORITHMS
OF
SUCH
STATISTICAL
STRUCTURE
DISCOVERED
BY
THEIR
AND
INVOLVE
COMPLEX
BUT
HIGHLY
STRUCTURED
DEPENDENCIES
BRAIN
AND
PROPAGATED
BY
THEIR
CULTURE
AND
MACHINE
ONE
REASON
WHY
EXPLICITLY
DEALING
WITH
REPRESENTATIONS
IS
LEARNING
TASKS
OFTEN
INVOLVE
PREDICTING
SUCH
CATEGO
INTERESTING
IS
BECAUSE
THEY
CAN
BE
CONVENIENT
TO
EXPRESS
RICAL
VARIABLES
MANY
GENERAL
PRIORS
ABOUT
THE
WORLD
AROUND
US
I
E
PRIORS
TEMPORAL
AND
SPATIAL
COHERENCE
CONSECUTIVE
FROM
A
THAT
ARE
NOT
TASK
SPECIFIC
BUT
WOULD
BE
LIKELY
TO
BE
USEFUL
FOR
SEQUENCE
OR
SPATIALLY
NEARBY
OBSERVATIONS
TEND
TO
BE
A
LEARNING
MACHINE
TO
SOLVE
AI
TASKS
EXAMPLES
OF
SUCH
ASSOCIATED
WITH
THE
SAME
VALUE
OF
RELEVANT
CATEGO
GENERAL
PURPOSE
PRIORS
ARE
THE
FOLLOWING
RICAL
CONCEPTS
OR
RESULT
IN
A
SMALL
MOVE
ON
THE
SMOOTHNESS
ASSUMES
THAT
THE
FUNCTION
TO
BE
LEARNED
SURFACE
OF
THE
HIGH
DENSITY
MANIFOLD
MORE
GENER
F
IS
T
X
Y
GENERALLY
IMPLIES
FÐXÞ
FÐYÞ
THIS
ALLY
DIFFERENT
FACTORS
CHANGE
AT
DIFFERENT
TEMPORAL
MOST
BASIC
PRIOR
IS
PRESENT
IN
MOST
MACHINE
LEARNING
AND
SPATIAL
SCALES
AND
MANY
CATEGORICAL
CONCEPTS
OF
BUT
IS
INSUFFICIENT
TO
GET
AROUND
THE
CURSE
OF
INTEREST
CHANGE
SLOWLY
WHEN
ATTEMPTING
TO
CAPTURE
DIMENSIONALITY
SEE
SECTION
SUCH
CATEGORICAL
VARIABLES
THIS
PRIOR
CAN
BE
ENFORCED
MULTIPLE
EXPLANATORY
FACTORS
THE
DATA
GENERATING
BY
MAKING
THE
ASSOCIATED
REPRESENTATIONS
SLOWLY
DISTRIBUTION
IS
GENERATED
BY
DIFFERENT
UNDERLYING
CHANGING
I
E
PENALIZING
CHANGES
IN
VALUES
OVER
FACTORS
AND
FOR
THE
MOST
PART
WHAT
ONE
LEARNS
ABOUT
TIME
OR
SPACE
THIS
PRIOR
WAS
INTRODUCED
IN
AND
IS
ONE
FACTOR
GENERALIZES
IN
MANY
CONFIGURATIONS
OF
THE
DISCUSSED
IN
SECTION
OTHER
FACTORS
THE
OBJECTIVE
TO
RECOVER
OR
AT
LEAST
SPARSITY
FOR
ANY
GIVEN
OBSERVATION
X
ONLY
A
SMALL
DISENTANGLE
THESE
UNDERLYING
FACTORS
OF
VARIATION
IS
FRACTION
OF
THE
POSSIBLE
FACTORS
ARE
RELEVANT
IN
TERMS
DISCUSSED
IN
SECTION
THIS
ASSUMPTION
IS
BEHIND
OF
REPRESENTATION
THIS
COULD
BE
REPRESENTED
BY
THE
IDEA
OF
DISTRIBUTED
REPRESENTATIONS
DISCUSSED
IN
FEATURES
THAT
ARE
OFTEN
ZERO
AS
INITIALLY
PROPOSED
SECTION
BY
OLSHAUSEN
AND
FIELD
OR
BY
THE
FACT
THAT
A
HIERARCHICAL
ORGANIZATION
OF
EXPLANATORY
FACTORS
THE
MOST
OF
THE
EXTRACTED
FEATURES
ARE
INSENSITIVE
TO
SMALL
CONCEPTS
THAT
ARE
USEFUL
FOR
DESCRIBING
THE
WORLD
VARIATIONS
OF
X
THIS
CAN
BE
ACHIEVED
WITH
CERTAIN
AROUND
US
CAN
BE
DEFINED
IN
TERMS
OF
OTHER
CONCEPTS
FORMS
OF
PRIORS
ON
LATENT
VARIABLES
PEAKED
AT
OR
IN
A
HIERARCHY
WITH
MORE
ABSTRACT
CONCEPTS
HIGHER
IN
BY
USING
A
NONLINEARITY
WHOSE
VALUE
IS
OFTEN
FLAT
AT
THE
HIERARCHY
DEFINED
IN
TERMS
OF
LESS
ABSTRACT
ONES
I
E
AND
WITH
A
DERIVATIVE
OR
SIMPLY
BY
THIS
ASSUMPTION
IS
EXPLOITED
WITH
DEEP
REPRESENTA
PENALIZING
THE
MAGNITUDE
OF
THE
JACOBIAN
MATRIX
OF
TIONS
ELABORATED
IN
SECTION
DERIVATIVES
OF
THE
FUNCTION
MAPPING
INPUT
TO
SEMI
SUPERVISED
LEARNING
WITH
INPUTS
X
AND
TARGET
Y
REPRESENTATION
THIS
IS
DISCUSSED
IN
SECTIONS
TO
PREDICT
A
SUBSET
OF
THE
FACTORS
EXPLAINING
X
AND
DISTRIBUTION
EXPLAIN
MUCH
OF
Y
GIVEN
X
HENCE
SIMPLICITY
OF
FACTOR
DEPENDENCIES
IN
GOOD
HIGH
LEVEL
REPRESENTATIONS
THAT
ARE
USEFUL
FOR
P
ÐXÞ
TEND
TO
BE
REPRESENTATIONS
THE
FACTORS
ARE
RELATED
TO
EACH
OTHER
USEFUL
WHEN
LEARNING
P
ÐY
J
XÞ
ALLOWING
SHARING
OF
THROUGH
SIMPLE
TYPICALLY
LINEAR
DEPENDENCIES
THIS
STATISTICAL
STRENGTH
BETWEEN
THE
UNSUPERVISED
AND
CAN
BE
SEEN
IN
MANY
LAWS
OF
PHYSICS
AND
IS
ASSUMED
SUPERVISED
LEARNING
TASKS
SEE
SECTION
WHEN
PLUGGING
A
LINEAR
PREDICTOR
ON
TOP
OF
A
LEARNED
SHARED
FACTORS
ACROSS
TASKS
WITH
MANY
Y
OF
INTEREST
OR
REPRESENTATION
MANY
LEARNING
TASKS
IN
GENERAL
TASKS
E
G
THE
WE
CAN
VIEW
MANY
OF
THE
ABOVE
PRIORS
AS
WAYS
TO
HELP
THE
CORRESPONDING
P
ÐY
J
X
TASKÞ
ARE
EXPLAINED
BY
LEARNER
DISCOVER
AND
DISENTANGLE
SOME
OF
THE
UNDERLYING
AND
FACTORS
THAT
ARE
SHARED
WITH
OTHER
TASKS
ALLOWING
A
PRIORI
UNKNOWN
FACTORS
OF
VARIATION
THAT
THE
DATA
MAY
SHARING
OF
STATISTICAL
STRENGTHS
ACROSS
TASKS
AS
REVEAL
THIS
IDEA
IS
PURSUED
FURTHER
IN
SECTIONS
AND
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
SMOOTHNESS
AND
THE
CURSE
OF
DIMENSIONALITY
SPARSE
REPRESENTATION
AND
K
N
IN
NONSPARSE
RBMS
AND
FOR
AI
TASKS
SUCH
AS
VISION
AND
NLP
IT
SEEMS
HOPELESS
TO
OTHER
DENSE
REPRESENTATIONS
THESE
ARE
ALL
OR
RELY
ONLY
ON
SIMPLE
PARAMETRIC
MODELS
SUCH
AS
LINEAR
REPRESENTATIONS
THE
GENERALIZATION
OF
CLUSTERING
TO
MODELS
BECAUSE
THEY
CANNOT
CAPTURE
ENOUGH
OF
THE
DISTRIBUTED
REPRESENTATIONS
IS
MULTICLUSTERING
WHERE
EITHER
COMPLEXITY
OF
INTEREST
UNLESS
PROVIDED
WITH
THE
APPROPRIATE
SEVERAL
CLUSTERINGS
TAKE
PLACE
IN
PARALLEL
OR
THE
SAME
FEATURE
SPACE
CONVERSELY
MACHINE
LEARNING
RESEARCHERS
CLUSTERING
IS
APPLIED
ON
DIFFERENT
PARTS
OF
THE
INPUT
SUCH
HAVE
SOUGHT
FLEXIBILITY
IN
LEARNERS
SUCH
AS
AS
IN
THE
VERY
POPULAR
HIERARCHICAL
FEATURE
EXTRACTION
FOR
KERNEL
MACHINES
WITH
A
FIXED
GENERIC
LOCAL
RESPONSE
KERNEL
OBJECT
RECOGNITION
BASED
ON
A
HISTOGRAM
OF
CLUSTER
CATEGORIES
SUCH
AS
THE
GAUSSIAN
KERNEL
UNFORTUNATELY
AS
ARGUED
AT
DETECTED
IN
DIFFERENT
PATCHES
OF
AN
IMAGE
THE
LENGTH
BY
BENGIO
AND
MONPERRUS
BENGIO
ET
AL
EXPONENTIAL
GAIN
FROM
DISTRIBUTED
OR
SPARSE
REPRESENTATIONS
BENGIO
AND
LECUN
BENGIO
AND
BENGIO
ET
AL
IS
DISCUSSED
FURTHER
IN
SECTION
FIG
IT
COMES
MOST
OF
THESE
ALGORITHMS
ONLY
EXPLOIT
THE
PRINCIPLE
OF
LOCAL
ABOUT
BECAUSE
EACH
PARAMETER
E
G
THE
PARAMETERS
OF
ONE
OF
GENERALIZATION
I
E
THE
ASSUMPTION
THAT
THE
TARGET
FUNCTION
TO
THE
UNITS
IN
A
SPARSE
CODE
OR
ONE
OF
THE
UNITS
IN
AN
RBM
CAN
BE
LEARNED
IS
SMOOTH
ENOUGH
SO
THEY
RELY
ON
EXAMPLES
TO
BE
REUSED
IN
MANY
EXAMPLES
THAT
ARE
NOT
SIMPLY
NEAR
EXPLICITLY
MAP
OUT
THE
WRINKLES
OF
THE
TARGET
FUNCTION
GENERAL
NEIGHBORS
OF
EACH
OTHER
WHEREAS
WITH
LOCAL
GENERALIZATION
IZATION
IS
MOSTLY
ACHIEVED
BY
A
FORM
OF
LOCAL
INTERPOLATION
DIFFERENT
REGIONS
IN
INPUT
SPACE
ARE
BASICALLY
ASSOCIATED
WITH
BETWEEN
NEIGHBORING
TRAINING
EXAMPLES
ALTHOUGH
SMOOTH
THEIR
OWN
PRIVATE
SET
OF
PARAMETERS
FOR
EXAMPLE
AS
IN
NESS
CAN
BE
A
USEFUL
ASSUMPTION
IT
IS
INSUFFICIENT
TO
DEAL
DECISION
TREES
NEAREST
NEIGHBORS
GAUSSIAN
SVMS
AND
SO
WITH
THE
CURSE
OF
DIMENSIONALITY
BECAUSE
THE
NUMBER
OF
SUCH
ON
IN
A
DISTRIBUTED
REPRESENTATION
AN
EXPONENTIALLY
LARGE
WRINKLES
UPS
AND
DOWNS
OF
THE
TARGET
FUNCTION
MAY
GROW
NUMBER
OF
POSSIBLE
SUBSETS
OF
FEATURES
OR
HIDDEN
UNITS
CAN
BE
EXPONENTIALLY
WITH
THE
NUMBER
OF
RELEVANT
INTERACTING
ACTIVATED
IN
RESPONSE
TO
A
GIVEN
INPUT
IN
A
SINGLE
LAYER
FACTORS
WHEN
THE
DATA
ARE
REPRESENTED
IN
RAW
INPUT
SPACE
MODEL
EACH
FEATURE
IS
TYPICALLY
ASSOCIATED
WITH
A
PREFERRED
WE
ADVOCATE
LEARNING
ALGORITHMS
THAT
ARE
FLEXIBLE
AND
INPUT
DIRECTION
CORRESPONDING
TO
A
HYPERPLANE
IN
INPUT
NONPARAMETRIC
BUT
DO
NOT
RELY
EXCLUSIVELY
ON
THE
SMOOTH
SPACE
AND
THE
CODE
OR
REPRESENTATION
ASSOCIATED
WITH
THAT
NESS
ASSUMPTION
INSTEAD
WE
PROPOSE
TO
INCORPORATE
GENERIC
INPUT
IS
PRECISELY
THE
PATTERN
OF
ACTIVATION
WHICH
FEATURES
PRIORS
SUCH
AS
THOSE
ENUMERATED
ABOVE
INTO
REPRESENTATION
RESPOND
TO
THE
INPUT
AND
HOW
MUCH
THIS
IS
IN
CONTRAST
LEARNING
ALGORITHMS
SMOOTHNESS
BASED
LEARNERS
SUCH
AS
WITH
A
NONDISTRIBUTED
REPRESENTATION
SUCH
AS
THE
ONE
KERNEL
MACHINES
AND
LINEAR
MODELS
CAN
STILL
BE
USEFUL
ON
TOP
LEARNED
BY
MOST
CLUSTERING
ALGORITHMS
FOR
EXAMPLE
OF
SUCH
LEARNED
REPRESENTATIONS
IN
FACT
THE
COMBINATION
OF
K
MEANS
IN
WHICH
THE
REPRESENTATION
OF
A
GIVEN
INPUT
LEARNING
A
REPRESENTATION
AND
KERNEL
MACHINE
IS
EQUIVALENT
VECTOR
IS
A
ONE
HOT
CODE
IDENTIFYING
WHICH
ONE
OF
A
SMALL
TO
LEARNING
THE
KERNEL
I
E
THE
FEATURE
SPACE
KERNEL
MACHINES
NUMBER
OF
CLUSTER
CENTROIDS
BEST
REPRESENTS
THE
INPUT
ARE
USEFUL
BUT
THEY
DEPEND
ON
A
PRIOR
DEFINITION
OF
A
SUITABLE
DEPTH
AND
ABSTRACTION
SIMILARITY
METRIC
OR
A
FEATURE
SPACE
IN
WHICH
NAIVE
SIMILARITY
METRICS
SUFFICE
WE
WOULD
LIKE
TO
USE
THE
DATA
ALONG
WITH
DEPTH
IS
A
KEY
ASPECT
TO
THE
REPRESENTATION
LEARNING
STRATEGIES
VERY
GENERIC
PRIORS
TO
DISCOVER
THOSE
FEATURES
OR
EQUIVA
WE
CONSIDER
IN
THIS
PAPER
AS
WE
WILL
DISCUSS
DEEP
LENTLY
A
SIMILARITY
FUNCTION
ARCHITECTURES
ARE
OFTEN
CHALLENGING
TO
TRAIN
EFFECTIVELY
AND
THIS
HAS
BEEN
THE
SUBJECT
OF
MUCH
RECENT
RESEARCH
AND
DISTRIBUTED
REPRESENTATIONS
PROGRESS
HOWEVER
DESPITE
THESE
CHALLENGES
THEY
CARRY
TWO
GOOD
REPRESENTATIONS
ARE
EXPRESSIVE
MEANING
THAT
A
REASON
SIGNIFICANT
ADVANTAGES
THAT
MOTIVATE
OUR
LONG
TERM
INTEREST
IN
ABLY
SIZED
LEARNED
REPRESENTATION
CAN
CAPTURE
A
HUGE
DISCOVERING
SUCCESSFUL
TRAINING
STRATEGIES
FOR
DEEP
ARCHITEC
NUMBER
OF
POSSIBLE
INPUT
CONFIGURATIONS
A
SIMPLE
COUNTING
TURES
THESE
ADVANTAGES
ARE
DEEP
ARCHITECTURES
PROMOTE
ARGUMENT
HELPS
US
TO
ASSESS
THE
EXPRESSIVENESS
OF
A
MODEL
THE
REUSE
OF
FEATURES
AND
DEEP
ARCHITECTURES
CAN
POTENTIALLY
PRODUCING
A
REPRESENTATION
HOW
MANY
PARAMETERS
DOES
IT
LEAD
TO
PROGRESSIVELY
MORE
ABSTRACT
FEATURES
AT
HIGHER
LAYERS
OF
REQUIRE
COMPARED
TO
THE
NUMBER
OF
INPUT
REGIONS
OR
REPRESENTATIONS
MORE
REMOVED
FROM
THE
DATA
CONFIGURATIONS
IT
CAN
DISTINGUISH
LEARNERS
OF
ONE
HOT
FEATURE
REUSE
THE
NOTION
OF
REUSE
WHICH
EXPLAINS
THE
REPRESENTATIONS
SUCH
AS
TRADITIONAL
CLUSTERING
ALGORITHMS
POWER
OF
DISTRIBUTED
REPRESENTATIONS
IS
ALSO
AT
THE
HEART
OF
GAUSSIAN
MIXTURES
NEAREST
NEIGHBOR
ALGORITHMS
DECISION
THE
THEORETICAL
ADVANTAGES
BEHIND
DEEP
LEARNING
I
E
TREES
OR
GAUSSIAN
SVMS
ALL
REQUIRE
OÐNÞ
PARAMETERS
AND
DISTRIBUTED
REPRESENTATIONS
WHERE
K
OUT
OF
N
REPRESENTATION
OR
OÐNÞ
EXAMPLES
TO
DISTINGUISH
OÐNÞ
INPUT
REGIONS
ONE
ELEMENTS
OR
FEATURE
VALUES
CAN
BE
INDEPENDENTLY
VARIED
FOR
EXAMPLE
COULD
NAIVELY
BELIEVE
THAT
ONE
CANNOT
DO
BETTER
HOWEVER
THEY
ARE
NOT
MUTUALLY
EXCLUSIVE
EACH
CONCEPT
IS
REPRESENTED
BY
HAVING
K
FEATURES
BEING
TURNED
ON
OR
ACTIVE
WHILE
EACH
FEATURE
IS
INVOLVED
IN
RESTRICTED
BOLTZMANN
MACHINES
RBMS
SPARSE
CODING
REPRESENTING
MANY
CONCEPTS
AUTOENCODERS
OR
MULTILAYER
NEURAL
NETWORKS
CAN
ALL
SPARSE
REPRESENTATIONS
DISTRIBUTED
REPRESENTATIONS
WHERE
ONLY
A
FEW
REPRESENT
UP
TO
Þ
INPUT
REGIONS
USING
ONLY
OÐNÞ
OF
THE
ELEMENTS
CAN
BE
VARIED
AT
A
TIME
I
E
K
N
AS
DISCUSSED
IN
THINGS
ARE
ONLY
SLIGHTLY
BETTER
WHEN
ALLOWING
PARAMETERS
WITH
K
THE
NUMBER
OF
NONZERO
ELEMENTS
IN
A
CONTINUOUS
VALUED
MEMBERSHIP
VALUES
FOR
EXAMPLE
IN
ORDINARY
MIXTURE
MODELS
WITH
SEPARATE
PARAMETERS
FOR
EACH
MIXTURE
COMPONENT
BUT
THE
LOCAL
IN
THE
SENSE
THAT
THE
VALUE
OF
THE
LEARNED
FUNCTION
AT
X
DEPENDS
DIFFERENCE
IN
REPRESENTATIONAL
POWER
IS
STILL
EXPONENTIAL
THE
SITUATION
MOSTLY
ON
TRAINING
EXAMPLES
XÐTÞ
CLOSE
TO
X
MAY
ALSO
SEEM
BETTER
WITH
A
DECISION
TREE
WHERE
EACH
GIVEN
INPUT
IS
WE
UNDERSTAND
NONPARAMETRIC
AS
INCLUDING
ALL
LEARNING
ALGORITHMS
ASSOCIATED
WITH
A
ONE
HOT
CODE
OVER
THE
TREE
LEAVES
WHICH
DETERMINISTICALLY
WHOSE
CAPACITY
CAN
BE
INCREASED
APPROPRIATELY
AS
THE
AMOUNT
OF
DATA
SELECTS
ASSOCIATED
ANCESTORS
THE
PATH
FROM
ROOT
TO
NODE
UNFORTUNATELY
THE
AND
ITS
COMPLEXITY
DEMANDS
IT
FOR
EXAMPLE
INCLUDING
MIXTURE
MODELS
NUMBER
OF
DIFFERENT
REGIONS
REPRESENTED
EQUAL
TO
THE
NUMBER
OF
LEAVES
OF
AND
NEURAL
NETWORKS
WHERE
THE
NUMBER
OF
PARAMETERS
IS
A
DATA
THE
TREE
STILL
ONLY
GROWS
LINEARLY
WITH
THE
NUMBER
OF
PARAMETERS
USED
TO
SELECTED
HYPERPARAMETER
SPECIFY
IT
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
CONSTRUCTING
MULTIPLE
LEVELS
OF
REPRESENTATION
OR
LEARNING
A
EXAMPLES
TO
LEARN
REPRESENTATIONS
THAT
SEPARATE
THE
VARIOUS
HIERARCHY
OF
FEATURES
THE
DEPTH
OF
A
CIRCUIT
IS
THE
LENGTH
OF
EXPLANATORY
SOURCES
DOING
SO
SHOULD
GIVE
RISE
TO
A
THE
LONGEST
PATH
FROM
AN
INPUT
NODE
OF
THE
CIRCUIT
TO
AN
REPRESENTATION
SIGNIFICANTLY
MORE
ROBUST
TO
THE
COMPLEX
OUTPUT
NODE
OF
THE
CIRCUIT
THE
CRUCIAL
PROPERTY
OF
A
DEEP
AND
RICHLY
STRUCTURED
VARIATIONS
EXTANT
IN
NATURAL
DATA
CIRCUIT
IS
THAT
ITS
NUMBER
OF
PATHS
I
E
WAYS
TO
REUSE
DIFFERENT
SOURCES
FOR
AI
RELATED
TASKS
PARTS
CAN
GROW
EXPONENTIALLY
WITH
ITS
DEPTH
FORMALLY
ONE
IT
IS
IMPORTANT
TO
DISTINGUISH
BETWEEN
THE
RELATED
BUT
CAN
CHANGE
THE
DEPTH
OF
A
GIVEN
CIRCUIT
BY
CHANGING
THE
DISTINCT
GOALS
OF
LEARNING
INVARIANT
FEATURES
AND
LEARNING
TO
DEFINITION
OF
WHAT
EACH
NODE
CAN
COMPUTE
BUT
ONLY
BY
A
DISENTANGLE
EXPLANATORY
FACTORS
THE
CENTRAL
DIFFERENCE
IS
CONSTANT
FACTOR
THE
TYPICAL
COMPUTATIONS
WE
ALLOW
IN
EACH
THE
PRESERVATION
OF
INFORMATION
INVARIANT
FEATURES
BY
NODE
INCLUDE
WEIGHTED
SUM
PRODUCT
ARTIFICIAL
NEURON
DEFINITION
HAVE
REDUCED
SENSITIVITY
IN
THE
DIRECTION
OF
MODEL
SUCH
AS
A
MONOTONE
NONLINEARITY
ON
TOP
OF
AN
INVARIANCE
THIS
IS
THE
GOAL
OF
BUILDING
FEATURES
THAT
ARE
AFFINE
TRANSFORMATION
COMPUTATION
OF
A
KERNEL
OR
LOGIC
INSENSITIVE
TO
VARIATION
IN
THE
DATA
THAT
ARE
UNINFORMATIVE
GATES
THEORETICAL
RESULTS
CLEARLY
SHOW
FAMILIES
OF
FUNCTIONS
TO
THE
TASK
AT
HAND
UNFORTUNATELY
IT
IS
OFTEN
DIFFICULT
TO
WHERE
A
DEEP
REPRESENTATION
CAN
BE
EXPONENTIALLY
MORE
DETERMINE
A
PRIORI
WHICH
SET
OF
FEATURES
AND
VARIATIONS
WILL
EFFICIENT
THAN
ONE
THAT
IS
INSUFFICIENTLY
DEEP
ULTIMATELY
BE
RELEVANT
TO
THE
TASK
AT
HAND
FURTHER
AS
IS
IF
THE
SAME
FAMILY
OF
FUNCTIONS
CAN
BE
OFTEN
THE
CASE
IN
THE
CONTEXT
OF
DEEP
LEARNING
METHODS
THE
REPRESENTED
WITH
FEWER
PARAMETERS
OR
MORE
PRECISELY
FEATURE
SET
BEING
TRAINED
MAY
BE
DESTINED
TO
BE
USED
IN
WITH
A
SMALLER
VC
DIMENSION
LEARNING
THEORY
WOULD
MULTIPLE
TASKS
THAT
MAY
HAVE
DISTINCT
SUBSETS
OF
RELEVANT
SUGGEST
THAT
IT
CAN
BE
LEARNED
WITH
FEWER
EXAMPLES
FEATURES
CONSIDERATIONS
SUCH
AS
THESE
LEAD
US
TO
THE
YIELDING
IMPROVEMENTS
IN
BOTH
COMPUTATIONAL
EFFICIENCY
CONCLUSION
THAT
THE
MOST
ROBUST
APPROACH
TO
FEATURE
LESS
NODES
TO
VISIT
AND
STATISTICAL
EFFICIENCY
FEWER
LEARNING
IS
TO
DISENTANGLE
AS
MANY
FACTORS
AS
POSSIBLE
DISCARDING
PARAMETERS
TO
LEARN
AND
REUSE
OF
THESE
PARAMETERS
OVER
AS
LITTLE
INFORMATION
ABOUT
THE
DATA
AS
IS
PRACTICAL
IF
SOME
FORM
MANY
DIFFERENT
KINDS
OF
INPUTS
OF
DIMENSIONALITY
REDUCTION
IS
DESIRABLE
THEN
WE
HYPOTHE
ABSTRACTION
AND
INVARIANCE
DEEP
ARCHITECTURES
CAN
LEAD
TO
SIZE
THAT
THE
LOCAL
DIRECTIONS
OF
VARIATION
LEAST
REPRESENTED
ABSTRACT
REPRESENTATIONS
BECAUSE
MORE
ABSTRACT
CONCEPTS
CAN
IN
THE
TRAINING
DATA
SHOULD
BE
FIRST
TO
BE
PRUNED
OUT
AS
IN
OFTEN
BE
CONSTRUCTED
IN
TERMS
OF
LESS
ABSTRACT
ONES
IN
SOME
PRINCIPAL
COMPONENTS
ANALYSIS
PCA
FOR
EXAMPLE
WHICH
CASES
SUCH
AS
IN
THE
CONVOLUTIONAL
NEURAL
NETWORK
WE
DOES
IT
GLOBALLY
INSTEAD
OF
AROUND
EACH
EXAMPLE
EXPLICITLY
BUILD
THIS
ABSTRACTION
IN
VIA
A
POOLING
MECHANISM
SEE
SECTION
MORE
ABSTRACT
CONCEPTS
ARE
GENERALLY
GOOD
CRITERIA
FOR
LEARNING
REPRESENTATIONS
INVARIANT
TO
MOST
LOCAL
CHANGES
OF
THE
INPUT
THAT
MAKES
THE
ONE
OF
THE
CHALLENGES
OF
REPRESENTATION
LEARNING
THAT
REPRESENTATIONS
THAT
CAPTURE
THESE
CONCEPTS
GENERALLY
HIGHLY
DISTINGUISHES
IT
FROM
OTHER
MACHINE
LEARNING
TASKS
SUCH
NONLINEAR
FUNCTIONS
OF
THE
RAW
INPUT
THIS
IS
OBVIOUSLY
TRUE
AS
CLASSIFICATION
IS
THE
DIFFICULTY
IN
ESTABLISHING
A
CLEAR
OF
CATEGORICAL
CONCEPTS
WHERE
MORE
ABSTRACT
REPRESENTATIONS
OBJECTIVE
OR
TARGET
FOR
TRAINING
IN
THE
CASE
OF
CLASSIFICATION
DETECT
CATEGORIES
THAT
COVER
MORE
VARIED
PHENOMENA
E
G
THE
OBJECTIVE
IS
AT
LEAST
CONCEPTUALLY
OBVIOUS
WE
WANT
TO
LARGER
MANIFOLDS
WITH
MORE
WRINKLES
AND
THUS
THEY
MINIMIZE
THE
NUMBER
OF
MISCLASSIFICATIONS
ON
THE
TRAINING
POTENTIALLY
HAVE
GREATER
PREDICTIVE
POWER
ABSTRACTION
CAN
DATASET
IN
THE
CASE
OF
REPRESENTATION
LEARNING
OUR
OBJECTIVE
ALSO
APPEAR
IN
HIGH
LEVEL
CONTINUOUS
VALUED
ATTRIBUTES
THAT
IS
FAR
REMOVED
FROM
THE
ULTIMATE
OBJECTIVE
WHICH
TYPICALLY
ARE
ONLY
SENSITIVE
TO
SOME
VERY
SPECIFIC
TYPES
OF
CHANGES
IN
IS
LEARNING
A
CLASSIFIER
OR
SOME
OTHER
PREDICTOR
OUR
THE
INPUT
LEARNING
THESE
SORTS
OF
INVARIANT
FEATURES
HAS
PROBLEM
IS
REMINISCENT
OF
THE
CREDIT
ASSIGNMENT
PROBLEM
BEEN
A
LONG
STANDING
GOAL
IN
PATTERN
RECOGNITION
ENCOUNTERED
IN
REINFORCEMENT
LEARNING
WE
HAVE
PROPOSED
THAT
A
GOOD
REPRESENTATION
IS
ONE
THAT
DISENTANGLES
THE
DISENTANGLING
FACTORS
OF
VARIATION
UNDERLYING
FACTORS
OF
VARIATION
BUT
HOW
DO
WE
TRANSLATE
BEYOND
BEING
DISTRIBUTED
AND
INVARIANT
WE
WOULD
LIKE
OUR
THAT
INTO
APPROPRIATE
TRAINING
CRITERIA
IS
IT
EVEN
NECESSARY
REPRESENTATIONS
TO
DISENTANGLE
THE
FACTORS
OF
VARIATION
DIFFERENT
TO
DO
ANYTHING
BUT
MAXIMIZE
LIKELIHOOD
UNDER
A
GOOD
EXPLANATORY
FACTORS
OF
THE
DATA
TEND
TO
CHANGE
INDEPEN
MODEL
OR
CAN
WE
INTRODUCE
PRIORS
SUCH
AS
THOSE
ENUMER
DENTLY
OF
EACH
OTHER
IN
THE
INPUT
DISTRIBUTION
AND
ONLY
A
ATED
ABOVE
POSSIBLY
DATA
DEPENDENT
ONES
THAT
HELP
THE
FEW
AT
A
TIME
TEND
TO
CHANGE
WHEN
ONE
CONSIDERS
A
SEQUENCE
REPRESENTATION
BETTER
DO
THIS
DISENTANGLING
THIS
QUESTION
OF
CONSECUTIVE
REAL
WORLD
INPUTS
REMAINS
CLEARLY
OPEN
BUT
IS
DISCUSSED
IN
MORE
DETAIL
IN
COMPLEX
DATA
ARISE
FROM
THE
RICH
INTERACTION
OF
MANY
SECTIONS
AND
SOURCES
THESE
FACTORS
INTERACT
IN
A
COMPLEX
WEB
THAT
CAN
COMPLICATE
AI
RELATED
TASKS
SUCH
AS
OBJECT
CLASSIFICATION
FOR
EXAMPLE
AN
IMAGE
IS
COMPOSED
OF
THE
INTERACTION
BETWEEN
BUILDING
DEEP
REPRESENTATIONS
ONE
OR
MORE
LIGHT
SOURCES
THE
OBJECT
SHAPES
AND
THE
IN
A
BREAKTHROUGH
IN
FEATURE
LEARNING
AND
DEEP
MATERIAL
PROPERTIES
OF
THE
VARIOUS
SURFACES
PRESENT
IN
THE
LEARNING
WAS
INITIATED
BY
GEOFF
HINTON
AND
QUICKLY
IMAGE
SHADOWS
FROM
OBJECTS
IN
THE
SCENE
CAN
FALL
ON
EACH
FOLLOWED
UP
IN
THE
SAME
YEAR
AND
SOON
OTHER
IN
COMPLEX
PATTERNS
CREATING
THE
ILLUSION
OF
OBJECT
AFTER
BY
LEE
ET
AL
AND
MANY
MORE
LATER
IT
HAS
BEEN
BOUNDARIES
WHERE
THERE
ARE
NONE
AND
CAN
DRAMATICALLY
EXTENSIVELY
REVIEWED
AND
DISCUSSED
IN
A
CENTRAL
IDEA
EFFECT
THE
PERCEIVED
OBJECT
SHAPE
HOW
CAN
WE
COPE
WITH
REFERRED
TO
AS
GREEDY
LAYERWISE
UNSUPERVISED
PRETRAINING
WAS
TO
THESE
COMPLEX
INTERACTIONS
HOW
CAN
WE
DISENTANGLE
THE
LEARN
A
HIERARCHY
OF
FEATURES
ONE
LEVEL
AT
A
TIME
USING
OBJECTS
AND
THEIR
SHADOWS
ULTIMATELY
WE
BELIEVE
THE
UNSUPERVISED
FEATURE
LEARNING
TO
LEARN
A
NEW
TRANSFORMA
APPROACH
WE
ADOPT
FOR
OVERCOMING
THESE
CHALLENGES
MUST
TION
AT
EACH
LEVEL
TO
BE
COMPOSED
WITH
THE
PREVIOUSLY
LEVERAGE
THE
DATA
ITSELF
USING
VAST
QUANTITIES
OF
UNLABELED
LEARNED
TRANSFORMATIONS
ESSENTIALLY
EACH
ITERATION
OF
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
UNSUPERVISED
FEATURE
LEARNING
ADDS
ONE
LAYER
OF
WEIGHTS
TO
ANOTHER
EARLY
APPROACH
WAS
TO
STACK
RBMS
OR
AUTOENCO
A
DEEP
NEURAL
NETWORK
FINALLY
THE
SET
OF
LAYERS
COULD
BE
DERS
INTO
A
DEEP
AUTOENCODER
IF
WE
HAVE
A
SERIES
OF
ENCODER
COMBINED
TO
INITIALIZE
A
DEEP
SUPERVISED
PREDICTOR
SUCH
AS
DECODER
PAIRS
ÐF
ÐIÞ
Ð
Þ
GÐIÞ
Ð
ÞÞ
THEN
THE
OVERALL
ENCODER
IS
THE
A
NEURAL
NETWORK
CLASSIFIER
OR
A
DEEP
GENERATIVE
MODEL
COMPOSITION
OF
THE
ENCODERS
F
ÐNÞ
Ð
F
ÐF
Ð
ÞÞÞ
AND
THE
SUCH
AS
A
DEEP
BOLTZMANN
MACHINE
DBM
OVERALL
DECODER
IS
ITS
TRANSPOSE
OFTEN
WITH
TRANSPOSED
THIS
PAPER
IS
MOSTLY
ABOUT
FEATURE
LEARNING
ALGORITHMS
WEIGHT
MATRICES
AS
WELL
Ð
F
ÐNÞ
Ð
ÞÞÞ
THE
DEEP
THAT
CAN
BE
USED
TO
FORM
DEEP
ARCHITECTURES
IN
PARTICULAR
IT
AUTOENCODER
OR
ITS
REGULARIZED
VERSION
AS
DISCUSSED
IN
WAS
EMPIRICALLY
OBSERVED
THAT
LAYERWISE
STACKING
OF
FEATURE
SECTION
CAN
THEN
BE
JOINTLY
TRAINED
WITH
ALL
THE
EXTRACTION
OFTEN
YIELDED
BETTER
REPRESENTATIONS
FOR
EXAMPLE
PARAMETERS
OPTIMIZED
WITH
RESPECT
TO
A
GLOBAL
RECONSTRUCTION
IN
TERMS
OF
CLASSIFICATION
ERROR
QUALITY
OF
THE
ERROR
CRITERION
MORE
WORK
ON
THIS
AVENUE
CLEARLY
NEEDS
TO
BE
SAMPLES
GENERATED
BY
A
PROBABILISTIC
MODEL
OR
IN
DONE
AND
IT
WAS
PROBABLY
AVOIDED
BY
FEAR
OF
THE
CHALLENGES
IN
TERMS
OF
THE
INVARIANCE
PROPERTIES
OF
THE
LEARNED
FEATURES
TRAINING
DEEP
FEEDFORWARD
NETWORKS
DISCUSSED
IN
SECTION
WHEREAS
THIS
SECTION
FOCUSES
ON
THE
IDEA
OF
STACKING
ALONG
WITH
VERY
ENCOURAGING
RECENT
RESULTS
SINGLE
LAYER
MODELS
SECTION
FOLLOWS
UP
WITH
A
DISCUSSION
YET
ANOTHER
RECENTLY
PROPOSED
APPROACH
TO
TRAINING
DEEP
ON
JOINT
TRAINING
OF
ALL
THE
LAYERS
ARCHITECTURES
IS
TO
CONSIDER
THE
ITERATIVE
CONSTRUCTION
OF
AFTER
GREEDY
LAYERWISE
UNSUPERVISED
PRETRAINING
THE
A
FREE
ENERGY
FUNCTION
I
E
WITH
NO
EXPLICIT
LATENT
VARIABLES
RESULTING
DEEP
FEATURES
CAN
BE
USED
EITHER
AS
INPUT
TO
A
EXCEPT
POSSIBLY
FOR
A
TOP
LEVEL
LAYER
OF
HIDDEN
UNITS
FOR
A
STANDARD
SUPERVISED
MACHINE
LEARNING
PREDICTOR
SUCH
AS
AN
DEEP
ARCHITECTURE
AS
THE
COMPOSITION
OF
TRANSFORMATIONS
SVM
OR
AS
INITIALIZATION
FOR
A
DEEP
SUPERVISED
NEURAL
ASSOCIATED
WITH
LOWER
LAYERS
FOLLOWED
BY
TOP
LEVEL
HIDDEN
NETWORK
E
G
BY
APPENDING
A
LOGISTIC
REGRESSION
LAYER
OR
UNITS
THE
QUESTION
IS
THEN
HOW
TO
TRAIN
A
MODEL
DEFINED
BY
PURELY
SUPERVISED
LAYERS
OF
A
MULTILAYER
NEURAL
NETWORK
AN
ARBITRARY
PARAMETERIZED
FREE
ENERGY
FUNCTION
NGIAM
THE
LAYERWISE
PROCEDURE
CAN
ALSO
BE
APPLIED
IN
A
PURELY
ET
AL
HAVE
USED
HYBRID
MONTE
CARLO
BUT
OTHER
SUPERVISED
SETTING
CALLED
THE
GREEDY
LAYERWISE
SUPERVISED
OPTIONS
INCLUDE
CONTRASTIVE
DIVERGENCE
CD
SCORE
PRETRAINING
FOR
EXAMPLE
AFTER
THE
FIRST
ONE
HIDDEN
MATCHING
DENOISING
SCORE
MATCHING
LAYER
MULTILAYER
PERCEPTRONS
MLP
IS
TRAINED
ITS
OUTPUT
RATIO
MATCHING
AND
NOISE
CONTRASTIVE
ESTIMATION
LAYER
IS
DISCARDED
AND
ANOTHER
ONE
HIDDEN
LAYER
MLP
CAN
BE
STACKED
ON
TOP
OF
IT
AND
SO
ON
ALTHOUGH
RESULTS
REPORTED
SINGLE
LAYER
LEARNING
MODULES
IN
WERE
NOT
AS
GOOD
AS
FOR
UNSUPERVISED
PRETRAINING
WITHIN
THE
COMMUNITY
OF
RESEARCHERS
INTERESTED
IN
REPRE
THEY
WERE
NONETHELESS
BETTER
THAN
WITHOUT
PRETRAINING
AT
ALL
SENTATION
LEARNING
THERE
HAS
DEVELOPED
TWO
BROAD
PARALLEL
ALTERNATIVELY
THE
OUTPUTS
OF
THE
PREVIOUS
LAYER
CAN
BE
FED
AS
LINES
OF
INQUIRY
ONE
ROOTED
IN
PROBABILISTIC
GRAPHICAL
EXTRA
INPUTS
FOR
THE
NEXT
LAYER
IN
ADDITION
TO
THE
RAW
INPUT
MODELS
AND
ONE
ROOTED
IN
NEURAL
NETWORKS
FUNDAMENTALLY
AS
SUCCESSFULLY
DONE
IN
ANOTHER
VARIANT
THE
DIFFERENCE
BETWEEN
THESE
TWO
PARADIGMS
IS
WHETHER
THE
PRETRAINS
IN
A
SUPERVISED
WAY
ALL
THE
PREVIOUSLY
ADDED
LAYERED
ARCHITECTURE
OF
A
DEEP
LEARNING
MODEL
IS
TO
BE
LAYERS
AT
EACH
STEP
OF
THE
ITERATION
AND
IN
THEIR
EXPERIMENTS
INTERPRETED
AS
DESCRIBING
A
PROBABILISTIC
GRAPHICAL
MODEL
OR
THIS
DISCRIMINANT
VARIANT
YIELDED
BETTER
RESULTS
THAN
UN
AS
DESCRIBING
A
COMPUTATION
GRAPH
IN
SHORT
ARE
HIDDEN
SUPERVISED
PRETRAINING
UNITS
CONSIDERED
LATENT
RANDOM
VARIABLES
OR
AS
COMPUTA
WHEREAS
COMBINING
SINGLE
LAYERS
INTO
A
SUPERVISED
TIONAL
NODES
MODEL
IS
STRAIGHTFORWARD
IT
IS
LESS
CLEAR
HOW
LAYERS
TO
DATE
THE
DICHOTOMY
BETWEEN
THESE
TWO
PARADIGMS
PRETRAINED
BY
UNSUPERVISED
LEARNING
SHOULD
BE
COMBINED
HAS
REMAINED
IN
THE
BACKGROUND
PERHAPS
BECAUSE
THEY
TO
FORM
A
BETTER
UNSUPERVISED
MODEL
WE
COVER
HERE
SOME
OF
APPEAR
TO
HAVE
MORE
CHARACTERISTICS
IN
COMMON
THAN
THE
APPROACHES
TO
DO
SO
BUT
NO
CLEAR
WINNER
EMERGES
AND
SEPARATING
THEM
WE
SUGGEST
THAT
THIS
IS
LIKELY
A
FUNCTION
MUCH
WORK
HAS
TO
BE
DONE
TO
VALIDATE
EXISTING
PROPOSALS
OR
OF
THE
FACT
THAT
MUCH
RECENT
PROGRESS
IN
BOTH
OF
THESE
AREAS
IMPROVE
THEM
HAS
FOCUSED
ON
SINGLE
LAYER
GREEDY
LEARNING
MODULES
AND
THE
THE
FIRST
PROPOSAL
WAS
TO
STACK
PRETRAINED
RBMS
INTO
A
SIMILARITIES
BETWEEN
THE
TYPES
OF
SINGLE
LAYER
MODELS
THAT
DEEP
BELIEF
NETWORK
OR
DBN
WHERE
THE
TOP
LAYER
IS
HAVE
BEEN
EXPLORED
MAINLY
THE
RBM
ON
THE
PROBABILISTIC
INTERPRETED
AS
AN
RBM
AND
THE
LOWER
LAYERS
AS
A
DIRECTED
SIDE
AND
THE
AUTOENCODER
VARIANTS
ON
THE
NEURAL
NETWORK
SIGMOID
BELIEF
NETWORK
HOWEVER
IT
IS
NOT
CLEAR
HOW
TO
SIDE
INDEED
AS
SHOWN
BY
ONE
OF
US
AND
OTHERS
APPROXIMATE
MAXIMUM
LIKELIHOOD
TRAINING
TO
FURTHER
IN
THE
CASE
OF
THE
RBM
TRAINING
THE
MODEL
VIA
AN
INDUCTIVE
OPTIMIZE
THIS
GENERATIVE
MODEL
ONE
OPTION
IS
THE
WAKE
PRINCIPLE
KNOWN
AS
SCORE
MATCHING
TO
BE
DISCUSSED
IN
SLEEP
ALGORITHM
BUT
MORE
WORK
SHOULD
BE
DONE
TO
SECTION
IS
ESSENTIALLY
IDENTICAL
TO
APPLYING
A
REGULAR
ASSESS
THE
EFFICIENCY
OF
THIS
PROCEDURE
IN
TERMS
OF
IMPROVING
IZED
RECONSTRUCTION
OBJECTIVE
TO
AN
AUTOENCODER
ANOTHER
THE
GENERATIVE
MODEL
STRONG
LINK
BETWEEN
PAIRS
OF
MODELS
ON
BOTH
SIDES
OF
THIS
THE
SECOND
APPROACH
THAT
HAS
BEEN
PUT
FORWARD
IS
TO
DIVIDE
IS
WHEN
THE
COMPUTATIONAL
GRAPH
FOR
COMPUTING
COMBINE
THE
RBM
PARAMETERS
INTO
A
DBM
BY
BASICALLY
REPRESENTATION
IN
THE
NEURAL
NETWORK
MODEL
CORRESPONDS
HALVING
THE
RBM
WEIGHTS
TO
OBTAIN
THE
DBM
WEIGHTS
EXACTLY
TO
THE
COMPUTATIONAL
GRAPH
THAT
CORRESPONDS
TO
THE
DBM
CAN
THEN
BE
TRAINED
BY
APPROXIMATE
MAXIMUM
INFERENCE
IN
THE
PROBABILISTIC
MODEL
AND
THIS
HAPPENS
TO
LIKELIHOOD
AS
DISCUSSED
IN
MORE
DETAIL
LATER
SECTION
ALSO
CORRESPOND
TO
THE
STRUCTURE
OF
GRAPHICAL
MODEL
ITSELF
THIS
JOINT
TRAINING
HAS
BROUGHT
SUBSTANTIAL
IMPROVEMENTS
E
G
AS
IN
THE
RBM
BOTH
IN
TERMS
OF
LIKELIHOOD
AND
IN
TERMS
OF
CLASSIFICATION
THE
CONNECTION
BETWEEN
THESE
TWO
PARADIGMS
BECOMES
PERFORMANCE
OF
THE
RESULTING
DEEP
FEATURE
LEARNER
MORE
TENUOUS
WHEN
WE
CONSIDER
DEEPER
MODELS
WHERE
IN
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
THE
CASE
OF
A
PROBABILISTIC
MODEL
EXACT
INFERENCE
TYPICALLY
CONSTRAINTS
IS
INDEPENDENT
COMPONENT
ANALYSIS
OR
ICA
BECOMES
INTRACTABLE
IN
THE
CASE
OF
DEEP
MODELS
THE
INSTEAD
WE
REFER
THE
READER
TO
NOTE
COMPUTATIONAL
GRAPH
DIVERGES
FROM
THE
STRUCTURE
OF
THE
THAT
WHILE
IN
THE
SIMPLEST
CASE
COMPLETE
NOISE
FREE
ICA
MODEL
FOR
EXAMPLE
IN
THE
CASE
OF
A
DBM
UNROLLING
YIELDS
LINEAR
FEATURES
IN
THE
MORE
GENERAL
CASE
IT
CAN
BE
VARIATIONAL
APPROXIMATE
INFERENCE
INTO
A
COMPUTATIONAL
EQUATED
WITH
A
LINEAR
GENERATIVE
MODEL
WITH
NON
GAUSSIAN
GRAPH
RESULTS
IN
A
RECURRENT
GRAPH
STRUCTURE
WE
HAVE
INDEPENDENT
LATENT
VARIABLES
SIMILAR
TO
SPARSE
CODING
PERFORMED
PRELIMINARY
EXPLORATION
OF
DETERMINISTIC
SECTION
WHICH
RESULT
IN
NONLINEAR
FEATURES
THEREFORE
VARIANTS
OF
DEEP
AUTOENCODERS
WHOSE
COMPUTATIONAL
GRAPH
ICA
AND
ITS
VARIANTS
LIKE
INDEPENDENT
AND
TOPOGRAPHIC
ICA
IS
SIMILAR
TO
THAT
OF
A
DBM
IN
FACT
VERY
CLOSE
TO
THE
MEAN
CAN
AND
HAVE
BEEN
USED
TO
BUILD
DEEP
NETWORKS
FIELD
VARIATIONAL
APPROXIMATIONS
ASSOCIATED
WITH
THE
SEE
SECTION
THE
NOTION
OF
OBTAINING
INDEPEN
BOLTZMANN
MACHINE
AND
THAT
IS
ONE
INTERESTING
INTER
DENT
COMPONENTS
ALSO
APPEARS
SIMILAR
TO
OUR
STATED
GOAL
OF
MEDIATE
POINT
TO
EXPLORE
BETWEEN
THE
DETERMINISTIC
DISENTANGLING
UNDERLYING
EXPLANATORY
FACTORS
THROUGH
DEEP
APPROACHES
AND
THE
GRAPHICAL
MODEL
APPROACHES
NETWORKS
HOWEVER
FOR
COMPLEX
REAL
WORLD
DISTRIBUTIONS
IT
IN
THE
NEXT
FEW
SECTIONS
WE
WILL
REVIEW
THE
MAJOR
IS
DOUBTFUL
THAT
THE
RELATIONSHIP
BETWEEN
TRULY
INDEPENDENT
DEVELOPMENTS
IN
SINGLE
LAYER
TRAINING
MODULES
USED
TO
UNDERLYING
FACTORS
AND
THE
OBSERVED
HIGH
DIMENSIONAL
DATA
SUPPORT
FEATURE
LEARNING
AND
PARTICULARLY
DEEP
LEARNING
WE
CAN
BE
ADEQUATELY
CHARACTERIZED
BY
A
LINEAR
TRANSFORMATION
DIVIDE
THESE
SECTIONS
BETWEEN
SECTION
THE
PROBABILISTIC
MODELS
WITH
INFERENCE
AND
TRAINING
SCHEMES
THAT
DIRECTLY
PARAMETERIZE
THE
GENERATIVE
OR
DECODING
PATHWAY
AND
PROBABILISTIC
MODELS
SECTION
THE
TYPICALLY
NEURAL
NETWORK
BASED
MODELS
THAT
FROM
THE
PROBABILISTIC
MODELING
PERSPECTIVE
THE
QUESTION
DIRECTLY
PARAMETRIZE
THE
ENCODING
PATHWAY
INTERESTINGLY
OF
FEATURE
LEARNING
CAN
BE
INTERPRETED
AS
AN
ATTEMPT
TO
SOME
MODELS
LIKE
PREDICTIVE
SPARSE
DECOMPOSITION
PSD
RECOVER
A
PARSIMONIOUS
SET
OF
LATENT
RANDOM
VARIABLES
THAT
INHERIT
BOTH
PROPERTIES
AND
WILL
ALSO
BE
DISCUSSED
DESCRIBE
A
DISTRIBUTION
OVER
THE
OBSERVED
DATA
WE
CAN
SECTION
WE
THEN
PRESENT
A
DIFFERENT
VIEW
OF
EXPRESS
AS
PÐX
HÞ
A
PROBABILISTIC
MODEL
OVER
THE
JOINT
SPACE
REPRESENTATION
LEARNING
BASED
ON
THE
ASSOCIATED
GEOMETRY
OF
THE
LATENT
VARIABLES
H
AND
OBSERVED
DATA
OR
VISIBLE
AND
THE
MANIFOLD
ASSUMPTION
IN
SECTION
VARIABLES
X
FEATURE
VALUES
ARE
CONCEIVED
AS
THE
RESULT
OF
AN
FIRST
LET
US
CONSIDER
AN
UNSUPERVISED
SINGLE
LAYER
INFERENCE
PROCESS
TO
DETERMINE
THE
PROBABILITY
DISTRIBUTION
REPRESENTATION
LEARNING
ALGORITHM
SPANNING
ALL
THREE
VIEWS
OF
THE
LATENT
VARIABLES
GIVEN
THE
DATA
I
E
PÐH
J
XÞ
OFTEN
PROBABILISTIC
AUTOENCODER
AND
MANIFOLD
LEARNING
REFERRED
TO
AS
THE
POSTERIOR
PROBABILITY
LEARNING
IS
CONCEIVED
IN
TERMS
OF
ESTIMATING
A
SET
OF
MODEL
PARAMETERS
THAT
PCA
LOCALLY
MAXIMIZE
THE
REGULARIZED
LIKELIHOOD
OF
THE
TRAINING
WE
WILL
USE
PROBABLY
THE
OLDEST
FEATURE
EXTRACTION
ALGO
DATA
THE
PROBABILISTIC
GRAPHICAL
MODEL
FORMALISM
GIVES
US
RITHM
PCA
TO
ILLUSTRATE
THE
PROBABILISTIC
AUTOENCODER
AND
TWO
POSSIBLE
MODELING
PARADIGMS
IN
WHICH
WE
CAN
CONSIDER
MANIFOLD
VIEWS
OF
REPRESENTATION
LEARNING
PCA
LEARNS
A
THE
QUESTION
OF
INFERRING
LATENT
VARIABLES
DIRECTED
AND
LINEAR
TRANSFORMATION
H
FÐXÞ
W
T
X
Þ
B
OF
INPUT
X
IRDX
UNDIRECTED
GRAPHICAL
MODELS
WHICH
DIFFER
IN
THEIR
PARA
WHERE
THE
COLUMNS
OF
DX
DH
MATRIX
W
FORM
AN
ORTHOGONAL
METERIZATION
OF
THE
JOINT
DISTRIBUTION
PÐX
HÞ
YIELDING
MAJOR
BASIS
FOR
THE
DH
ORTHOGONAL
DIRECTIONS
OF
GREATEST
VARIANCE
IN
IMPACT
ON
THE
NATURE
AND
COMPUTATIONAL
COSTS
OF
BOTH
THE
TRAINING
DATA
THE
RESULT
IS
DH
FEATURES
THE
COMPONENTS
INFERENCE
AND
LEARNING
OF
REPRESENTATION
H
THAT
ARE
DECORRELATED
THE
THREE
INTERPRETATIONS
OF
PCA
ARE
THE
FOLLOWING
IT
IS
RELATED
TO
DIRECTED
GRAPHICAL
MODELS
PROBABILISTIC
MODELS
SECTION
SUCH
AS
PROBABILISTIC
PCA
DIRECTED
LATENT
FACTOR
MODELS
SEPARATELY
PARAMETERIZE
THE
FACTOR
ANALYSIS
AND
THE
TRADITIONAL
MULTIVARIATE
GAUSSIAN
CONDITIONAL
LIKELIHOOD
PÐX
J
HÞ
AND
THE
PRIOR
PÐHÞ
TO
CONSTRUCT
DISTRIBUTION
THE
LEADING
EIGENVECTORS
OF
THE
COVARIANCE
THE
JOINT
DISTRIBUTION
PÐX
HÞ
PÐX
J
HÞPÐHÞ
EXAMPLES
OF
MATRIX
ARE
THE
PRINCIPAL
COMPONENTS
THE
REPRESENTATION
THIS
DECOMPOSITION
INCLUDE
PCA
SPARSE
CODING
IT
LEARNS
IS
ESSENTIALLY
THE
SAME
AS
THAT
LEARNED
BY
A
BASIC
SIGMOID
BELIEF
NETWORKS
AND
THE
NEWLY
LINEAR
AUTOENCODER
SECTION
AND
IT
CAN
BE
VIEWED
AS
A
INTRODUCED
SPIKE
AND
SLAB
SPARSE
CODING
MODEL
SIMPLE
LINEAR
FORM
OF
LINEAR
MANIFOLD
LEARNING
SECTION
I
E
CHARACTERIZING
A
LOWER
DIMENSIONAL
REGION
IN
INPUT
SPACE
EXPLAINING
AWAY
NEAR
WHICH
THE
DATA
DENSITY
IS
PEAKED
THUS
PCA
MAY
BE
IN
DIRECTED
MODELS
OFTEN
LEAD
TO
ONE
IMPORTANT
PROPERTY
THE
BACK
OF
THE
READER
MIND
AS
A
COMMON
THREAD
RELATING
EXPLAINING
AWAY
I
E
A
PRIORI
INDEPENDENT
CAUSES
OF
AN
EVENT
THESE
VARIOUS
VIEWPOINTS
UNFORTUNATELY
THE
EXPRESSIVE
CAN
BECOME
NONINDEPENDENT
GIVEN
THE
OBSERVATION
OF
THE
POWER
OF
LINEAR
FEATURES
IS
VERY
LIMITED
THEY
CANNOT
BE
EVENT
LATENT
FACTOR
MODELS
CAN
GENERALLY
BE
INTERPRETED
AS
STACKED
TO
FORM
DEEPER
MORE
ABSTRACT
REPRESENTATIONS
SINCE
LATENT
CAUSE
MODELS
WHERE
THE
H
ACTIVATIONS
CAUSE
THE
THE
COMPOSITION
OF
LINEAR
OPERATIONS
YIELDS
ANOTHER
LINEAR
OBSERVED
X
THIS
RENDERS
THE
A
PRIORI
INDEPENDENT
H
TO
BE
OPERATION
HERE
WE
FOCUS
ON
RECENT
ALGORITHMS
THAT
HAVE
NONINDEPENDENT
AS
A
CONSEQUENCE
RECOVERING
THE
POSTERIOR
BEEN
DEVELOPED
TO
EXTRACT
NONLINEAR
FEATURES
WHICH
CAN
BE
DISTRIBUTION
OF
H
PÐH
J
XÞ
WHICH
WE
USE
AS
A
BASIS
FOR
FEATURE
STACKED
IN
THE
CONSTRUCTION
OF
DEEP
NETWORKS
ALTHOUGH
REPRESENTATION
IS
OFTEN
COMPUTATIONALLY
CHALLENGING
AND
SOME
AUTHORS
SIMPLY
INSERT
A
NONLINEARITY
BETWEEN
LEARNED
CAN
BE
ENTIRELY
INTRACTABLE
ESPECIALLY
WHEN
H
IS
DISCRETE
SINGLE
LAYER
LINEAR
PROJECTIONS
A
CLASSIC
EXAMPLE
THAT
ILLUSTRATES
THE
PHENOMENON
IS
TO
ANOTHER
RICH
FAMILY
OF
FEATURE
EXTRACTION
TECHNIQUES
THAT
IMAGINE
YOU
ARE
ON
VACATION
AWAY
FROM
HOME
AND
YOU
THIS
REVIEW
DOES
NOT
COVER
IN
ANY
DETAIL
DUE
TO
SPACE
RECEIVE
A
PHONE
CALL
FROM
THE
SECURITY
SYSTEM
COMPANY
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
ÐTÞ
TELLING
YOU
THAT
THE
ALARM
HAS
BEEN
ACTIVATED
YOU
BEGIN
EXCHANGE
SCALING
OF
COLUMN
I
WITH
SCALING
OF
HI
SUCH
A
WORRYING
YOUR
HOME
HAS
BEEN
BURGLARIZED
BUT
THEN
YOU
CONSTRAINT
IS
NECESSARY
FOR
THE
PENALTY
TO
HAVE
ANY
EFFECT
HEAR
ON
THE
RADIO
THAT
A
MINOR
EARTHQUAKE
HAS
BEEN
REPORTED
THE
PROBABILISTIC
INTERPRETATION
OF
SPARSE
CODING
DIFFERS
IN
THE
AREA
OF
YOUR
HOME
IF
YOU
HAPPEN
TO
KNOW
FROM
PRIOR
FROM
THAT
OF
PCA
IN
THAT
INSTEAD
OF
A
GAUSSIAN
PRIOR
ON
THE
EXPERIENCE
THAT
EARTHQUAKES
SOMETIMES
CAUSE
YOUR
HOME
LATENT
RANDOM
VARIABLE
H
WE
USE
A
SPARSITY
INDUCING
ALARM
SYSTEM
TO
ACTIVATE
THEN
SUDDENLY
YOU
RELAX
CON
LAPLACE
PRIOR
CORRESPONDING
TO
AN
PENALTY
FIDENT
THAT
YOUR
HOME
HAS
VERY
LIKELY
NOT
BEEN
BURGLARIZED
Y
DH
THE
EXAMPLE
ILLUSTRATES
HOW
THE
ALARM
ACTIVATION
RENDERED
PÐHÞ
EXPÐ
JHI
JÞ
TWO
OTHERWISE
ENTIRELY
INDEPENDENT
CAUSES
BURGLARIZED
AND
I
EARTHQUAKE
TO
BECOME
DEPENDENT
IN
THIS
CASE
THE
DEPEN
PÐX
J
HÞ
N
X
W
H
Þ
X
I
DENCY
IS
ONE
OF
MUTUAL
EXCLUSIVITY
SINCE
BOTH
BURGLARIZED
AND
EARTHQUAKE
ARE
VERY
RARE
EVENTS
AND
BOTH
CAN
CAUSE
ALARM
IN
THE
CASE
OF
SPARSE
CODING
BECAUSE
WE
WILL
SEEK
A
SPARSE
ACTIVATION
THE
OBSERVATION
OF
ONE
EXPLAINS
AWAY
THE
OTHER
REPRESENTATION
I
E
ONE
WITH
MANY
FEATURES
SET
TO
EXACTLY
DESPITE
THE
COMPUTATIONAL
OBSTACLES
WE
FACE
WHEN
ATTEMPT
ZERO
WE
WILL
BE
INTERESTED
IN
RECOVERING
THE
MAXIMUM
ING
TO
RECOVER
THE
POSTERIOR
OVER
H
EXPLAINING
AWAY
A
POSTERIORI
VALUE
MAP
VALUE
OF
H
I
E
H
ARGMAXH
PÐH
J
PROMISES
TO
PROVIDE
A
PARSIMONIOUS
PÐH
J
XÞ
WHICH
CAN
BE
XÞ
RATHER
THAN
ITS
EXPECTED
VALUE
J
X
UNDER
THIS
AN
EXTREMELY
USEFUL
CHARACTERISTIC
OF
A
FEATURE
ENCODING
INTERPRETATION
DICTIONARY
LEARNING
PROCEEDS
AS
MAXIMIZING
SCHEME
IF
ONE
THINKS
OF
A
REPRESENTATION
AS
BEING
COMPOSED
THE
LIKELIHOOD
Q
OF
THE
DATA
GIVEN
THESE
MAP
VALUES
OF
H
OF
VARIOUS
FEATURE
DETECTORS
AND
ESTIMATED
ATTRIBUTES
OF
THE
ARGMAXW
T
PÐXÐTÞ
J
H
ÐTÞ
Þ
SUBJECT
TO
THE
NORM
CONSTRAINT
ON
OBSERVED
INPUT
IT
IS
USEFUL
TO
ALLOW
THE
DIFFERENT
FEATURES
TO
W
NOTE
THAT
THIS
PARAMETER
LEARNING
SCHEME
SUBJECT
TO
THE
COMPETE
AND
COLLABORATE
WITH
EACH
OTHER
TO
EXPLAIN
THE
MAP
VALUES
OF
THE
LATENT
H
IS
NOT
STANDARD
PRACTICE
IN
INPUT
THIS
IS
NATURALLY
ACHIEVED
WITH
DIRECTED
GRAPHICAL
P
LITERATURE
TYPICALLY
THE
THE
PROBABILISTIC
GRAPHICAL
MODEL
MODELS
BUT
CAN
ALSO
BE
ACHIEVED
WITH
UNDIRECTED
MODELS
LIKELIHOOD
OF
THE
DATA
PÐXÞ
H
PÐX
J
HÞPÐHÞ
IS
MAXIMIZED
SEE
SECTION
SUCH
AS
BOLTZMANN
MACHINES
IF
THERE
ARE
DIRECTLY
IN
THE
PRESENCE
OF
LATENT
VARIABLES
EXPECTATION
LATERAL
CONNECTIONS
BETWEEN
THE
CORRESPONDING
UNITS
OR
MAXIMIZATION
IS
EMPLOYED
WHERE
THE
PARAMETERS
ARE
OPTIMIZED
WITH
RESPECT
TO
THE
MARGINAL
LIKELIHOOD
I
E
CORRESPONDING
INTERACTION
TERMS
IN
THE
ENERGY
FUNCTION
THAT
SUMMING
OR
INTEGRATING
THE
JOINT
LOG
LIKELIHOOD
OVER
ALL
DEFINES
THE
PROBABILITY
MODEL
VALUES
OF
THE
LATENT
VARIABLES
UNDER
THEIR
POSTERIOR
P
ÐH
J
XÞ
PROBABILISTIC
INTERPRETATION
OF
PCA
PCA
CAN
BE
GIVEN
A
RATHER
THAN
CONSIDERING
ONLY
THE
SINGLE
MAP
VALUE
OF
H
NATURAL
PROBABILISTIC
INTERPRETATION
AS
FACTOR
THE
THEORETICAL
PROPERTIES
OF
THIS
FORM
OF
PARAMETER
ANALYSIS
LEARNING
ARE
NOT
YET
WELL
UNDERSTOOD
BUT
SEEM
TO
WORK
WELL
IN
PRACTICE
E
G
K
MEANS
VERSUS
GAUSSIAN
MIXTURE
PÐHÞ
N
H
I
MODELS
AND
VITERBI
TRAINING
FOR
HMMS
NOTE
ALSO
THAT
THE
PÐX
J
HÞ
N
X
W
H
Þ
X
I
INTERPRETATION
OF
SPARSE
CODING
AS
A
MAP
ESTIMATION
CAN
WHERE
X
IRDX
H
IRDH
N
ÐV
Þ
IS
THE
MULTIVARIATE
BE
QUESTIONED
BECAUSE
EVEN
THOUGH
THE
INTERPRETATION
NORMAL
DENSITY
OF
V
WITH
MEAN
AND
COVARIANCE
AND
OF
THE
PENALTY
AS
A
LOG
PRIOR
IS
A
POSSIBLE
INTERPRETATION
COLUMNS
OF
W
SPAN
THE
SAME
SPACE
AS
LEADING
DH
PRINCIPAL
THERE
CAN
BE
OTHER
BAYESIAN
INTERPRETATIONS
COMPATIBLE
WITH
COMPONENTS
BUT
ARE
NOT
CONSTRAINED
TO
BE
ORTHONORMAL
THE
TRAINING
CRITERION
SPARSE
CODING
LIKE
PCA
SPARSE
CODING
HAS
BOTH
A
SPARSE
CODING
IS
AN
EXCELLENT
EXAMPLE
OF
THE
POWER
OF
PROBABILISTIC
AND
NONPROBABILISTIC
INTERPRETATION
SPARSE
EXPLAINING
AWAY
EVEN
WITH
A
VERY
OVERCOMPLETE
DICTION
CODING
ALSO
RELATES
A
LATENT
REPRESENTATION
H
EITHER
A
VECTOR
ARY
THE
MAP
INFERENCE
PROCESS
USED
IN
SPARSE
CODING
TO
OF
RANDOM
VARIABLES
OR
A
FEATURE
VECTOR
DEPENDING
ON
THE
FIND
H
CAN
PICK
OUT
THE
MOST
APPROPRIATE
BASES
AND
ZERO
INTERPRETATION
TO
THE
DATA
X
THROUGH
A
LINEAR
MAPPING
W
THE
OTHERS
DESPITE
THEM
HAVING
A
HIGH
DEGREE
OF
CORRELA
TION
WITH
THE
INPUT
THIS
PROPERTY
ARISES
NATURALLY
IN
WHICH
WE
REFER
TO
AS
THE
DICTIONARY
THE
DIFFERENCE
BETWEEN
DIRECTED
GRAPHICAL
MODELS
SUCH
AS
SPARSE
CODING
AND
IS
SPARSE
CODING
AND
PCA
IS
THAT
SPARSE
CODING
INCLUDES
A
ENTIRELY
DUE
TO
THE
EXPLAINING
AWAY
EFFECT
IT
IS
NOT
SEEN
IN
PENALTY
TO
ENSURE
A
SPARSE
ACTIVATION
OF
H
IS
USED
TO
ENCODE
COMMONLY
USED
UNDIRECTED
PROBABILISTIC
MODELS
SUCH
AS
EACH
INPUT
X
FROM
A
NONPROBABILISTIC
PERSPECTIVE
SPARSE
THE
RBM
NOR
IS
IT
SEEN
IN
PARAMETRIC
FEATURE
ENCODING
CODING
CAN
BE
SEEN
AS
RECOVERING
THE
CODE
OR
FEATURE
VECTOR
METHODS
SUCH
AS
AUTOENCODERS
THE
TRADEOFF
IS
THAT
ASSOCIATED
WITH
A
NEW
INPUT
X
VIA
COMPARED
TO
METHODS
SUCH
AS
RBMS
AND
AUTOENCODERS
INFERENCE
IN
SPARSE
CODING
INVOLVES
AN
EXTRA
INNER
LOOP
OF
H
FÐXÞ
ARGMIN
KX
W
H
Þ
H
OPTIMIZATION
TO
FIND
H
WITH
A
CORRESPONDING
INCREASE
IN
THE
COMPUTATIONAL
COST
OF
FEATURE
EXTRACTION
COMPARED
TO
LEARNING
THE
DICTIONARY
W
CAN
BE
ACCOMPLISHED
BY
OPTIMIZ
AUTOENCODERS
AND
RBMS
THE
CODE
IN
SPARSE
CODING
IS
A
FREE
ING
THE
FOLLOWING
TRAINING
CRITERION
WITH
RESPECT
TO
W
VARIABLE
FOR
EACH
EXAMPLE
AND
IN
THAT
SENSE
THE
IMPLICIT
X
ENCODER
IS
NONPARAMETRIC
J
SC
KXÐTÞ
W
H
ÐTÞ
T
ONE
MIGHT
EXPECT
THAT
THE
PARSIMONY
OF
THE
SPARSE
CODING
REPRESENTATION
AND
ITS
EXPLAINING
AWAY
EFFECT
WOULD
ÐTÞ
WHERE
X
IS
THE
TTH
EXAMPLE
AND
H
ÐTÞ
IS
THE
CORRESPONDING
BE
ADVANTAGEOUS
AND
INDEED
IT
SEEMS
TO
BE
THE
CASE
COATES
SPARSE
CODE
DETERMINED
BY
W
IS
USUALLY
CONSTRAINED
TO
HAVE
UNIT
NORM
COLUMNS
BECAUSE
ONE
CAN
ARBITRARILY
OVERCOMPLETE
WITH
MORE
DIMENSIONS
OF
H
THAN
DIMENSIONS
OF
X
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
AND
NG
DEMONSTRATED
ON
THE
CIFAR
OBJECT
OR
UNITS
THESE
STOCHASTIC
UNITS
CAN
BE
DIVIDED
INTO
TWO
CLASSIFICATION
TASK
WITH
A
PATCH
BASE
FEATURE
EXTRACTION
GROUPS
THE
VISIBLE
UNITS
X
THAT
REPRESENT
THE
PIPELINE
THAT
IN
THE
REGIME
WITH
FEW
LABELED
DATA
AND
THE
HIDDEN
OR
LATENT
UNITS
H
THAT
TRAINING
EXAMPLES
PER
CLASS
THE
SPARSE
CODING
REPRESENTA
MEDIATE
DEPENDENCIES
BETWEEN
THE
VISIBLE
UNITS
THROUGH
TION
SIGNIFICANTLY
OUTPERFORMED
OTHER
HIGHLY
COMPETITIVE
THEIR
MUTUAL
INTERACTIONS
THE
PATTERN
OF
INTERACTION
IS
ENCODING
SCHEMES
POSSIBLY
BECAUSE
OF
THESE
PROPERTIES
AND
SPECIFIED
THROUGH
THE
ENERGY
FUNCTION
BECAUSE
OF
THE
VERY
COMPUTATIONALLY
EFFICIENT
ALGORITHMS
T
T
THAT
HAVE
BEEN
PROPOSED
FOR
IT
IN
COMPARISON
WITH
THE
E
BM
T
T
T
ÐX
HÞ
X
UX
H
V
H
X
W
H
B
X
D
H
GENERAL
CASE
OF
INFERENCE
IN
THE
PRESENCE
OF
EXPLAINING
AWAY
SPARSE
CODING
ENJOYS
CONSIDERABLE
POPULARITY
AS
A
WHERE
FU
V
W
B
DG
ARE
THE
MODEL
PARAMETERS
THAT
FEATURE
LEARNING
AND
ENCODING
PARADIGM
THERE
ARE
NUMER
RESPECTIVELY
ENCODE
THE
VISIBLE
TO
VISIBLE
INTERACTIONS
THE
OUS
EXAMPLES
OF
ITS
SUCCESSFUL
APPLICATION
AS
A
FEATURE
HIDDEN
TO
HIDDEN
INTERACTIONS
THE
VISIBLE
TO
HIDDEN
INTER
REPRESENTATION
SCHEME
INCLUDING
NATURAL
IMAGE
MODELING
ACTIONS
THE
VISIBLE
SELF
CONNECTIONS
AND
THE
HIDDEN
SELF
AUDIO
CLASSIFICATION
NLP
AS
CONNECTIONS
CALLED
BIASES
TO
AVOID
OVERPARAMETERIZATION
WELL
AS
BEING
A
VERY
SUCCESSFUL
MODEL
OF
THE
EARLY
VISUAL
THE
DIAGONALS
OF
U
AND
V
ARE
SET
TO
ZERO
CORTEX
SPARSITY
CRITERIA
CAN
ALSO
BE
GENERALIZED
THE
BOLTZMANN
MACHINE
ENERGY
FUNCTION
SPECIFIES
THE
SUCCESSFULLY
TO
YIELD
GROUPS
OF
FEATURES
THAT
PREFER
TO
ALL
PROBABILITY
DISTRIBUTION
OVER
H
VIA
THE
BOLTZMANN
BE
ZERO
BUT
IF
ONE
OR
A
FEW
OF
THEM
ARE
ACTIVE
THEN
THE
DISTRIBUTION
WITH
THE
PARTITION
FUNCTION
Z
GIVEN
BY
PENALTY
FOR
ACTIVATING
OTHERS
IN
THE
GROUP
IS
SMALL
DIFFERENT
HDH
XX
DX
H
XX
X
X
GROUP
SPARSITY
PATTERNS
CAN
INCORPORATE
DIFFERENT
FORMS
OF
Z
EXP
E
BM
ÐX
H
Þ
PRIOR
KNOWLEDGE
XDX
HDH
IS
ONE
EXAMPLE
OF
A
PROMISING
VARIATION
ON
SPARSE
CODING
FOR
FEATURE
LEARNING
THE
MODEL
THIS
JOINT
PROBABILITY
DISTRIBUTION
GIVES
RISE
TO
THE
SET
OF
POSSESSES
A
SET
OF
LATENT
BINARY
SPIKE
VARIABLES
TOGETHER
WITH
CONDITIONAL
DISTRIBUTIONS
OF
THE
FORM
A
SET
OF
LATENT
REAL
VALUED
SLAB
VARIABLES
THE
ACTIVATION
OF
X
THE
SPIKE
VARIABLES
DICTATES
THE
SPARSITY
PATTERN
HAS
X
P
ÐHI
J
X
HNI
Þ
SIGMOID
WJI
XJ
Þ
Þ
DI
BEEN
APPLIED
TO
THE
CIFAR
AND
CIFAR
OBJECT
J
CLASSIFICATION
TASKS
AND
SHOWS
THE
SAME
PATTERN
AS
SPARSE
CODING
OF
SUPERIOR
PERFORMANCE
IN
THE
REGIME
OF
X
RELATIVELY
FEW
LABELED
EXAMPLES
PER
CLASS
IN
X
P
ÐXJ
J
H
XNJ
Þ
SIGMOID
WJI
XJ
Þ
Þ
BJ
FACT
IN
BOTH
THE
CIFAR
DATASET
WITH
EXAMPLES
PER
I
CLASS
AND
THE
CIFAR
DATASET
WHEN
THE
NUMBER
OF
EXAMPLES
IS
REDUCED
TO
A
SIMILAR
RANGE
THE
REPRESENTA
IN
GENERAL
INFERENCE
IN
THE
BOLTZMANN
MACHINE
IS
INTRACT
TION
ACTUALLY
OUTPERFORMS
SPARSE
CODING
REPRESENTATIONS
ABLE
FOR
EXAMPLE
COMPUTING
THE
CONDITIONAL
PROBABILITY
OF
THIS
ADVANTAGE
WAS
REVEALED
CLEARLY
WITH
WINNING
THE
HI
GIVEN
THE
VISIBLES
P
ÐHI
J
XÞ
REQUIRES
MARGINALIZING
OVER
NIPS
TRANSFER
LEARNING
CHALLENGE
THE
REST
OF
THE
HIDDENS
WHICH
IMPLIES
EVALUATING
A
SUM
UNDIRECTED
GRAPHICAL
MODELS
WITH
TERMS
UNDIRECTED
GRAPHICAL
MODELS
ALSO
CALLED
MARKOV
RANDOM
HX
HX
I
HX
HDH
X
FIELDS
MRFS
PARAMETERIZE
THE
JOINT
PÐX
HÞ
THROUGH
A
P
ÐHI
J
XÞ
P
ÐH
J
XÞ
PRODUCT
OF
UNNORMALIZED
NONNEGATIVE
CLIQUE
POTENTIALS
HI
HDH
Y
Y
Y
HOWEVER
WITH
SOME
JUDICIOUS
CHOICES
IN
THE
PATTERN
OF
PÐX
HÞ
I
ÐXÞ
J
ÐHÞ
K
ÐX
HÞ
Z
I
J
INTERACTIONS
BETWEEN
THE
VISIBLE
AND
HIDDEN
UNITS
MORE
K
TRACTABLE
SUBSETS
OF
THE
MODEL
FAMILY
ARE
POSSIBLE
AS
WE
WHERE
I
ÐXÞ
J
ÐHÞ
AND
K
ÐX
HÞ
ARE
THE
CLIQUE
POTENTIALS
DISCUSS
NEXT
DESCRIBING
THE
INTERACTIONS
BETWEEN
THE
VISIBLE
ELEMENTS
RBMS
THE
RBM
IS
LIKELY
THE
MOST
POPULAR
SUBCLASS
OF
BETWEEN
THE
HIDDEN
VARIABLES
AND
THOSE
INTERACTION
BOLTZMANN
MACHINE
IT
IS
DEFINED
BY
RESTRICTING
THE
BETWEEN
THE
VISIBLE
AND
HIDDEN
VARIABLES
RESPECTIVELY
INTERACTIONS
IN
THE
BOLTZMANN
ENERGY
FUNCTION
IN
TO
ONLY
THE
PARTITION
FUNCTION
Z
ENSURES
THAT
THE
DISTRIBUTION
IS
THOSE
BETWEEN
H
AND
X
I
E
E
RBM
IS
E
BM
WITH
U
AND
NORMALIZED
WITHIN
THE
CONTEXT
OF
UNSUPERVISED
FEATURE
V
AS
SUCH
THE
RBM
CAN
BE
SAID
TO
FORM
A
BIPARTITE
LEARNING
WE
GENERALLY
SEE
A
PARTICULAR
FORM
OF
MRF
CALLED
A
GRAPH
WITH
THE
VISIBLES
AND
THE
HIDDENS
FORMING
TWO
LAYERS
BOLTZMANN
DISTRIBUTION
WITH
CLIQUE
POTENTIALS
CONSTRAINED
OF
VERTICES
IN
THE
GRAPH
AND
NO
CONNECTION
BETWEEN
UNITS
OF
TO
BE
POSITIVE
THE
SAME
LAYER
WITH
THIS
RESTRICTION
THE
RBM
POSSESSES
THE
USEFUL
PROPERTY
THAT
THE
CONDITIONAL
DISTRIBUTION
OVER
THE
PÐX
HÞ
EXPÐ
E
ÐX
HÞÞ
HIDDEN
UNITS
FACTORIZES
GIVEN
THE
VISIBLES
Z
Y
WHERE
E
ÐX
HÞ
IS
THE
ENERGY
FUNCTION
AND
CONTAINS
THE
P
ÐH
J
XÞ
P
ÐHI
J
XÞ
INTERACTIONS
DESCRIBED
BY
THE
MRF
CLIQUE
POTENTIALS
AND
ARE
I
X
THE
MODEL
PARAMETERS
THAT
CHARACTERIZE
THESE
INTERACTIONS
P
ÐHI
J
XÞ
SIGMOID
WJI
XJ
Þ
DI
THE
BOLTZMANN
MACHINE
WAS
ORIGINALLY
DEFINED
AS
A
J
NETWORK
OF
SYMMETRICALLY
COUPLED
BINARY
RANDOM
VARIABLES
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
LIKEWISE
THE
CONDITIONAL
DISTRIBUTION
OVER
THE
VISIBLE
UNITS
ABSOLUTE
VALUES
THIS
POINT
IS
SUPPORTED
BY
THE
COMMON
USE
GIVEN
THE
HIDDENS
ALSO
FACTORIZES
OF
PREPROCESSING
METHODS
THAT
STANDARDIZE
THE
GLOBAL
Y
SCALING
OF
THE
PIXEL
VALUES
ACROSS
IMAGES
IN
A
DATASET
OR
P
ÐX
J
HÞ
P
ÐXJ
J
HÞ
ACROSS
THE
PIXEL
VALUES
WITHIN
EACH
IMAGE
J
X
THESE
KINDS
OF
CONCERNS
ABOUT
THE
ABILITY
OF
THE
GRBM
TO
MODEL
NATURAL
IMAGE
DATA
HAS
LED
TO
THE
DEVELOPMENT
OF
P
ÐXJ
J
HÞ
SIGMOID
WJI
HI
Þ
BJ
I
ALTERNATIVE
RBM
BASED
MODELS
THAT
EACH
ATTEMPT
TO
TAKE
ON
THIS
OBJECTIVE
OF
BETTER
MODELING
NONDIAGONAL
CONDITIONAL
THIS
MAKES
INFERENCES
READILY
TRACTABLE
IN
RBMS
FOR
COVARIANCES
RANZATO
AND
HINTON
INTRODUCED
THE
MEAN
EXAMPLE
THE
RBM
FEATURE
REPRESENTATION
IS
TAKEN
TO
BE
AND
COVARIANCE
RBM
MCRBM
LIKE
THE
GRBM
THE
MCRBM
THE
SET
OF
POSTERIOR
MARGINALS
P
ÐHI
J
XÞ
WHICH
GIVEN
THE
IS
A
TWO
LAYER
BOLTZMANN
MACHINE
THAT
EXPLICITLY
MODELS
CONDITIONAL
INDEPENDENCE
DESCRIBED
IN
ARE
IMMEDI
THE
VISIBLE
UNITS
AS
GAUSSIAN
DISTRIBUTED
QUANTITIES
HOW
ATELY
AVAILABLE
NOTE
THAT
THIS
IS
IN
STARK
CONTRAST
TO
THE
EVER
UNLIKE
THE
GRBM
THE
MCRBM
USES
ITS
HIDDEN
LAYER
TO
SITUATION
WITH
POPULAR
DIRECTED
GRAPHICAL
MODELS
FOR
INDEPENDENTLY
PARAMETRIZE
BOTH
THE
MEAN
AND
COVARIANCE
UNSUPERVISED
FEATURE
EXTRACTION
WHERE
COMPUTING
THE
OF
THE
DATA
THROUGH
TWO
SETS
OF
HIDDEN
UNITS
THE
MCRBM
POSTERIOR
PROBABILITY
IS
INTRACTABLE
IS
A
COMBINATION
OF
THE
COVARIANCE
RBM
CRBM
IMPORTANTLY
THE
TRACTABILITY
OF
THE
RBM
DOES
NOT
EXTEND
WHICH
MODELS
THE
CONDITIONAL
COVARIANCE
AND
THE
GRBM
TO
ITS
PARTITION
FUNCTION
WHICH
STILL
INVOLVES
SUMMING
AN
WHICH
CAPTURES
THE
CONDITIONAL
MEAN
WHILE
THE
GRBM
HAS
EXPONENTIAL
NUMBER
OF
TERMS
IT
DOES
IMPLY
HOWEVER
THAT
SHOWN
CONSIDERABLE
POTENTIAL
AS
THE
BASIS
OF
A
HIGHLY
WE
CAN
LIMIT
THE
NUMBER
OF
TERMS
TO
G
USUALLY
SUCCESSFUL
PHONEME
RECOGNITION
SYSTEM
IT
SEEMS
THAT
THIS
IS
STILL
AN
UNMANAGEABLE
NUMBER
OF
TERMS
AND
THEREFORE
DUE
TO
DIFFICULTIES
IN
TRAINING
THE
MCRBM
THE
MODEL
HAS
WE
MUST
RESORT
TO
APPROXIMATE
METHODS
TO
DEAL
WITH
ITS
BEEN
LARGELY
SUPERSEDED
BY
THE
MPOT
MODEL
THE
MPOT
ESTIMATION
MODEL
MEAN
PRODUCT
OF
STUDENT
T
DISTRIBUTIONS
MODEL
IT
IS
DIFFICULT
TO
OVERSTATE
THE
IMPACT
THE
RBM
HAS
HAD
TO
IS
A
COMBINATION
OF
THE
GRBM
AND
THE
PRODUCT
OF
STUDENT
THE
FIELDS
OF
UNSUPERVISED
FEATURE
LEARNING
AND
DEEP
T
DISTRIBUTIONS
MODEL
IT
IS
AN
ENERGY
BASED
MODEL
LEARNING
IT
HAS
BEEN
USED
IN
A
TRULY
IMPRESSIVE
VARIETY
OF
WHERE
THE
CONDITIONAL
DISTRIBUTION
OVER
THE
VISIBLE
UNITS
APPLICATIONS
INCLUDING
FMRI
IMAGE
CLASSIFICATION
CONDITIONED
ON
THE
HIDDEN
VARIABLES
IS
A
MULTIVARIATE
MOTION
AND
SPATIAL
TRANSFORMATIONS
COLLABORA
GAUSSIAN
NONDIAGONAL
COVARIANCE
AND
THE
COMPLEMENTARY
TIVE
FILTERING
AND
NATURAL
IMAGE
MODELING
CONDITIONAL
DISTRIBUTION
OVER
THE
HIDDEN
VARIABLES
GIVEN
THE
VISIBLES
ARE
A
SET
OF
INDEPENDENT
GAMMA
DISTRIBUTIONS
GENERALIZATIONS
OF
THE
RBM
TO
REAL
VALUED
DATA
THE
POT
MODEL
HAS
RECENTLY
BEEN
GENERALIZED
TO
THE
IMPORTANT
PROGRESS
HAS
BEEN
MADE
IN
THE
LAST
FEW
YEARS
IN
MPOT
MODEL
TO
INCLUDE
NONZERO
GAUSSIAN
MEANS
BY
DEFINING
GENERALIZATIONS
OF
THE
RBM
THAT
BETTER
CAPTURE
REAL
THE
ADDITION
OF
GRBM
LIKE
HIDDEN
UNITS
SIMILARLY
TO
HOW
VALUED
DATA
IN
PARTICULAR
REAL
VALUED
IMAGE
DATA
BY
BETTER
THE
MCRBM
GENERALIZES
THE
CRBM
THE
MPOT
MODEL
HAS
MODELING
THE
CONDITIONAL
COVARIANCE
OF
THE
INPUT
PIXELS
THE
BEEN
USED
TO
SYNTHESIZE
LARGE
SCALE
NATURAL
IMAGES
THAT
STANDARD
RBM
AS
DISCUSSED
ABOVE
IS
DEFINED
WITH
BOTH
SHOW
LARGE
SCALE
FEATURES
AND
SHADOWING
STRUCTURE
IT
HAS
BINARY
VISIBLE
VARIABLES
V
AND
BINARY
LATENT
VARI
BEEN
USED
TO
MODEL
NATURAL
TEXTURES
IN
A
TILED
ABLES
H
THE
TRACTABILITY
OF
INFERENCE
AND
LEARNING
IN
CONVOLUTION
CONFIGURATION
SEE
SECTION
THE
RBM
HAS
INSPIRED
MANY
AUTHORS
TO
EXTEND
IT
VIA
ANOTHER
RECENTLY
INTRODUCED
RBM
BASED
MODEL
WITH
THE
MODIFICATIONS
OF
ITS
ENERGY
FUNCTION
TO
MODEL
OTHER
KINDS
OF
OBJECTIVE
OF
HAVING
THE
HIDDEN
UNITS
ENCODE
BOTH
THE
MEAN
DATA
DISTRIBUTIONS
IN
PARTICULAR
THERE
HAVE
BEEN
MULTIPLE
AND
COVARIANCE
INFORMATION
IS
THE
SPIKE
AND
SLAB
RESTRICTED
ATTEMPTS
TO
DEVELOP
RBM
TYPE
MODELS
OF
REAL
VALUED
DATA
BOLTZMANN
MACHINE
SSRBM
THE
SSRBM
IS
WHERE
X
IRDX
THE
MOST
STRAIGHTFORWARD
APPROACH
TO
DEFINED
AS
HAVING
BOTH
A
REAL
VALUED
SLAB
VARIABLE
AND
A
MODELING
REAL
VALUED
OBSERVATIONS
WITHIN
THE
RBM
FRAME
BINARY
SPIKE
VARIABLE
ASSOCIATED
WITH
EACH
UNIT
IN
THE
WORK
IS
THE
SO
CALLED
GAUSSIAN
RBM
GRBM
WHERE
THE
ONLY
HIDDEN
LAYER
THE
SSRBM
HAS
BEEN
DEMONSTRATED
AS
A
CHANGE
IN
THE
RBM
ENERGY
FUNCTION
IS
TO
THE
VISIBLE
UNITS
FEATURE
LEARNING
AND
EXTRACTION
SCHEME
IN
THE
CONTEXT
OF
BIASES
BY
ADDING
A
BIAS
TERM
THAT
IS
QUADRATIC
IN
THE
VISIBLE
CIFAR
OBJECT
CLASSIFICATION
FROM
NATURAL
IMAGES
UNITS
X
WHILE
IT
PROBABLY
REMAINS
THE
MOST
POPULAR
WAY
TO
AND
HAS
PERFORMED
WELL
IN
THE
ROLE
WHEN
TRAINED
MODEL
REAL
VALUED
DATA
WITHIN
THE
RBM
FRAMEWORK
CONVOLUTIONALLY
SEE
SECTION
ON
FULL
CIFAR
NATURAL
RANZATO
AND
HINTON
SUGGEST
THAT
THE
GRBM
HAS
IMAGES
THE
MODEL
DEMONSTRATED
THE
ABILITY
TO
GENERATE
PROVEN
TO
BE
A
SOMEWHAT
UNSATISFACTORY
MODEL
OF
NATURAL
NATURAL
IMAGE
SAMPLES
THAT
SEEM
TO
CAPTURE
THE
BROAD
IMAGES
THE
TRAINED
FEATURES
TYPICALLY
DO
NOT
REPRESENT
STATISTICAL
STRUCTURE
OF
NATURAL
IMAGES
BETTER
THAN
PREVIOUS
SHARP
EDGES
THAT
OCCUR
AT
OBJECT
BOUNDARIES
AND
LEAD
TO
PARAMETRIC
GENERATIVE
MODELS
AS
ILLUSTRATED
WITH
THE
LATENT
REPRESENTATIONS
THAT
ARE
NOT
PARTICULARLY
USEFUL
SAMPLES
OF
FIG
FEATURES
FOR
CLASSIFICATION
TASKS
RANZATO
AND
HINTON
THE
MCRBM
MPOT
AND
SSRBM
EACH
SET
OUT
TO
MODEL
ARGUE
THAT
THE
FAILURE
OF
THE
GRBM
TO
ADEQUATELY
CAPTURE
REAL
VALUED
DATA
SUCH
THAT
THE
HIDDEN
UNITS
ENCODE
NOT
ONLY
THE
STATISTICAL
STRUCTURE
OF
NATURAL
IMAGES
STEMS
FROM
THE
THE
CONDITIONAL
MEAN
OF
THE
DATA
BUT
ALSO
ITS
CONDITIONAL
EXCLUSIVE
USE
OF
THE
MODEL
CAPACITY
TO
CAPTURE
THE
COVARIANCE
OTHER
THAN
DIFFERENCES
IN
THE
TRAINING
SCHEMES
CONDITIONAL
MEAN
AT
THE
EXPENSE
OF
THE
CONDITIONAL
THE
MOST
SIGNIFICANT
DIFFERENCE
BETWEEN
THESE
MODELS
IS
HOW
COVARIANCE
NATURAL
IMAGES
THEY
ARGUE
ARE
CHIEFLY
CHAR
THEY
ENCODE
THEIR
CONDITIONAL
COVARIANCE
WHILE
THE
MCRBM
ACTERIZED
BY
THE
COVARIANCE
OF
THE
PIXEL
VALUES
NOT
BY
THEIR
AND
THE
MPOT
USE
THE
ACTIVATION
OF
THE
HIDDEN
UNITS
TO
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
X
T
XT
X
LOG
P
XÐTÞ
LOG
P
XÐTÞ
H
GRADIENT
BASED
OPTIMIZATION
REQUIRES
ITS
GRADIENT
WHICH
FOR
BOLTZMANN
MACHINES
IS
GIVEN
BY
X
T
XT
BM
ÐTÞ
LOG
PÐXÐTÞ
Þ
IEPÐHJXÐTÞ
Þ
E
ÐX
HÞ
I
I
XT
BM
Þ
IEPÐX
HÞ
E
ÐX
HÞ
I
WHERE
WE
HAVE
THE
EXPECTATIONS
WITH
RESPECT
TO
PÐHÐTÞ
J
XÐTÞ
Þ
UNDER
THE
CLAMPED
CONDITION
ALSO
CALLED
THE
POSITIVE
PHASE
AND
OVER
THE
FULL
JOINT
PÐX
HÞ
UNDER
THE
UNCLAMPED
CONDITION
ALSO
CALLED
THE
NEGATIVE
PHASE
INTUITIVELY
THE
GRADIENT
ACTS
TO
LOCALLY
MOVE
THE
MODEL
DISTRIBUTION
THE
NEGATIVE
PHASE
DISTRIBUTION
TOWARD
THE
DATA
DISTRIBUTION
POSITIVE
PHASE
DISTRIBUTION
BY
PUSHING
DOWN
THE
ENERGY
OF
ÐH
XÐTÞ
Þ
PAIRS
FOR
H
P
ÐH
J
XÐTÞ
Þ
WHILE
PUSHING
UP
THE
ENERGY
OF
ÐH
XÞ
PAIRS
FOR
ÐH
XÞ
P
ÐH
XÞ
UNTIL
THE
TWO
FORCES
ARE
IN
EQUILIBRIUM
AT
WHICH
POINT
THE
SUFFICIENT
FIG
TOP
SAMPLES
FROM
CONVOLUTIONALLY
TRAINED
SSRBM
FROM
STATISTICS
GRADIENT
OF
THE
ENERGY
FUNCTION
HAVE
EQUAL
BOTTOM
IMAGES
IN
THE
CIFAR
TRAINING
SET
CLOSEST
EXPECTATIONS
WITH
X
SAMPLED
FROM
THE
TRAINING
DISTRIBUTION
DISTANCE
WITH
CONTRAST
NORMALIZED
TRAINING
IMAGES
TO
CORRESPOND
ING
MODEL
SAMPLES
ON
TOP
THE
MODEL
DOES
NOT
APPEAR
TO
BE
OR
WITH
X
SAMPLED
FROM
THE
MODEL
OVERFITTING
PARTICULAR
TRAINING
EXAMPLES
THE
RBM
CONDITIONAL
INDEPENDENCE
PROPERTIES
IMPLY
THAT
THE
EXPECTATION
IN
THE
POSITIVE
PHASE
OF
IS
ENFORCE
CONSTRAINTS
ON
THE
COVARIANCE
OF
X
THE
SSRBM
USES
TRACTABLE
THE
NEGATIVE
PHASE
TERM
ARISING
FROM
THE
THE
HIDDEN
UNIT
TO
PINCH
THE
PRECISION
MATRIX
ALONG
THE
PARTITION
FUNCTION
CONTRIBUTION
TO
THE
LOG
LIKELIHOOD
DIRECTION
SPECIFIED
BY
THE
CORRESPONDING
WEIGHT
VECTOR
GRADIENT
IS
MORE
PROBLEMATIC
BECAUSE
THE
COMPUTATION
THESE
TWO
WAYS
OF
MODELING
CONDITIONAL
COVARIANCE
OF
THE
EXPECTATION
OVER
THE
JOINT
IS
NOT
TRACTABLE
THE
DIVERGE
WHEN
THE
DIMENSIONALITY
OF
THE
HIDDEN
LAYER
IS
VARIOUS
WAYS
OF
DEALING
WITH
THE
PARTITION
FUNCTION
SIGNIFICANTLY
DIFFERENT
FROM
THAT
OF
THE
INPUT
IN
THE
CONTRIBUTION
TO
THE
GRADIENT
HAVE
BROUGHT
ABOUT
A
NUMBER
OVERCOMPLETE
SETTING
SPARSE
ACTIVATION
WITH
THE
SSRBM
OF
DIFFERENT
TRAINING
ALGORITHMS
MANY
TRYING
TO
APPROX
PARAMETRIZATION
PERMITS
VARIANCE
ONLY
IN
THE
SELECT
DIREC
IMATE
THE
LOG
LIKELIHOOD
GRADIENT
TIONS
OF
THE
SPARSELY
ACTIVATED
HIDDEN
UNITS
THIS
IS
A
TO
APPROXIMATE
THE
EXPECTATION
OF
THE
JOINT
DISTRIBUTION
PROPERTY
THE
SSRBM
SHARES
WITH
SPARSE
CODING
MODELS
IN
THE
NEGATIVE
PHASE
CONTRIBUTION
TO
THE
GRADIENT
IT
IS
ON
THE
OTHER
HAND
IN
THE
CASE
OF
THE
MPOT
OR
NATURAL
TO
AGAIN
CONSIDER
EXPLOITING
THE
CONDITIONAL
IN
MCRBM
AN
OVERCOMPLETE
SET
OF
CONSTRAINTS
ON
THE
COVAR
DEPENDENCE
OF
THE
RBM
TO
SPECIFY
A
MONTE
CARLO
APPROX
IANCE
IMPLIES
THAT
CAPTURING
ARBITRARY
COVARIANCE
ALONG
A
IMATION
OF
THE
EXPECTATION
OVER
THE
JOINT
PARTICULAR
DIRECTION
OF
THE
INPUT
REQUIRES
DECREASING
POTENTIALLY
ALL
CONSTRAINTS
WITH
POSITIVE
PROJECTION
IN
THAT
RBM
L
RBM
ÐLÞ
ÐLÞ
DIRECTION
THIS
PERSPECTIVE
WOULD
SUGGEST
THAT
THE
MPOT
IEPÐX
HÞ
E
ÐX
HÞ
E
X
H
I
L
I
AND
MCRBM
DO
NOT
APPEAR
TO
BE
WELL
SUITED
TO
PROVIDE
A
SPARSE
REPRESENTATION
IN
THE
OVERCOMPLETE
SETTING
XÐLÞ
H
ÐLÞ
Þ
DRAWN
BY
A
BLOCK
GIBBS
MARKOV
WITH
THE
SAMPLES
Ð
CHAIN
MONTE
CARLO
MCMC
SAMPLING
PROCEDURE
RBM
PARAMETER
ESTIMATION
MANY
OF
THE
RBM
TRAINING
METHODS
WE
DISCUSS
HERE
ARE
X
ÐLÞ
P
ÐX
J
H
ÐL
Þ
APPLICABLE
TO
MORE
GENERAL
UNDIRECTED
GRAPHICAL
MODELS
H
ÐLÞ
P
ÐH
J
X
ÐLÞ
Þ
BUT
ARE
PARTICULARLY
PRACTICAL
IN
THE
RBM
SETTING
FREUND
AND
HAUSSLER
PROPOSED
A
LEARNING
ALGORITHM
FOR
NAIVELY
FOR
EACH
GRADIENT
UPDATE
STEP
ONE
WOULD
START
A
HARMONIUMS
RBMS
BASED
ON
PROJECTION
PURSUIT
CD
GIBBS
SAMPLING
CHAIN
WAIT
UNTIL
THE
CHAIN
CONVERGES
TO
THE
HAS
BEEN
USED
MOST
OFTEN
TO
TRAIN
RBMS
AND
MANY
EQUILIBRIUM
DISTRIBUTION
AND
THEN
DRAW
A
SUFFICIENT
NUMBER
RECENT
PAPERS
USE
STOCHASTIC
MAXIMUM
LIKELIHOOD
SML
OF
SAMPLES
TO
APPROXIMATE
THE
EXPECTED
GRADIENT
WITH
RESPECT
TO
THE
MODEL
JOINT
DISTRIBUTION
IN
THEN
RESTART
AS
DISCUSSED
IN
SECTION
IN
TRAINING
PROBABILISTIC
THE
PROCESS
FOR
THE
NEXT
STEP
OF
APPROXIMATE
GRADIENT
ASCENT
MODELS
PARAMETERS
ARE
TYPICALLY
ADAPTED
TO
MAXIMIZE
THE
ON
THE
LOG
LIKELIHOOD
THIS
PROCEDURE
HAS
THE
OBVIOUS
FLAW
LIKELIHOOD
OF
THE
TRAINING
DATA
OR
EQUIVALENTLY
THE
LOG
THAT
WAITING
FOR
THE
GIBBS
CHAIN
TO
BURN
IN
AND
REACH
LIKELIHOOD
OR
ITS
PENALIZED
VERSION
WHICH
ADDS
A
REGULAR
EQUILIBRIUM
ANEW
FOR
EACH
GRADIENT
UPDATE
CANNOT
FORM
THE
IZATION
TERM
WITH
T
TRAINING
EXAMPLES
THE
LOG
LIKELIHOOD
BASIS
OF
A
PRACTICAL
TRAINING
ALGORITHM
CD
SML
IS
GIVEN
BY
AND
FAST
WEIGHTS
PERSISTENT
CD
OR
FAST
WEIGHTS
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
PERSISTENT
CONTRASTIVE
DIVERGENCE
FPCD
ARE
ALL
WAYS
WHICH
IMPLIES
THAT
THE
LEARNING
UPDATE
WILL
SLIGHTLY
TO
AVOID
OR
REDUCE
THE
NEED
FOR
BURN
IN
INCREASE
THE
ENERGY
DECREASE
THE
PROBABILITY
OF
THOSE
SAMPLES
MAKING
THE
REGION
IN
THE
NEIGHBORHOOD
OF
THOSE
CD
SAMPLES
LESS
LIKELY
TO
BE
RESAMPLED
AND
THEREFORE
MAKING
IT
CD
ESTIMATION
ESTIMATES
THE
NEGATIVE
PHASE
MORE
LIKELY
THAT
THE
SAMPLES
WILL
MOVE
SOMEWHERE
ELSE
EXPECTATION
WITH
A
VERY
SHORT
GIBBS
CHAIN
OFTEN
JUST
TYPICALLY
GOING
NEAR
ANOTHER
MODE
RATHER
THAN
DRAWING
ONE
STEP
INITIALIZED
AT
THE
TRAINING
DATA
USED
IN
THE
POSITIVE
SAMPLES
FROM
THE
DISTRIBUTION
OF
THE
CURRENT
MODEL
WITH
PHASE
THIS
REDUCES
THE
VARIANCE
OF
THE
GRADIENT
ESTIMATOR
PARAMETERS
FPCD
EXAGGERATES
THIS
EFFECT
BY
DRAWING
AND
STILL
MOVES
IN
A
DIRECTION
THAT
PULLS
THE
NEGATIVE
CHAIN
SAMPLES
FROM
A
LOCAL
PERTURBATION
OF
THE
MODEL
WITH
SAMPLES
TOWARD
THE
ASSOCIATED
POSITIVE
CHAIN
SAMPLES
PARAMETERS
AND
AN
UPDATE
MUCH
HAS
BEEN
WRITTEN
ABOUT
THE
PROPERTIES
AND
ALTERNATIVE
X
T
INTERPRETATIONS
OF
CD
AND
ITS
SIMILARITY
TO
AUTOENCODER
Þ
Þ
T
Þ
LOG
PÐXÐTÞ
Þ
TRAINING
FOR
EXAMPLE
I
SML
WHERE
IS
THE
RELATIVELY
LARGE
FAST
WEIGHT
LEARNING
RATE
THE
SML
ALGORITHM
ALSO
KNOWN
AS
PERSISTENT
CONTRASTIVE
AND
BUT
NEAR
IS
A
FORGETTING
FACTOR
THAT
DIVERGENCE
OR
PCD
IS
AN
ALTERNATIVE
WAY
TO
KEEPS
THE
PERTURBED
MODEL
CLOSE
TO
THE
CURRENT
MODEL
SIDESTEP
AN
EXTENDED
BURN
IN
OF
THE
NEGATIVE
PHASE
GIBBS
UNLIKE
TEMPERING
FPCD
DOES
NOT
CONVERGE
TO
THE
MODEL
SAMPLER
AT
EACH
GRADIENT
UPDATE
RATHER
THAN
INITIALIZING
DISTRIBUTION
AS
AND
GO
TO
AND
FURTHER
WORK
IS
THE
GIBBS
CHAIN
AT
THE
POSITIVE
PHASE
SAMPLE
AS
IN
CD
SML
NECESSARY
TO
CHARACTERIZE
THE
NATURE
OF
ITS
APPROXIMATION
TO
INITIALIZES
THE
CHAIN
AT
THE
LAST
STATE
OF
THE
CHAIN
USED
FOR
THE
THE
MODEL
DISTRIBUTION
NEVERTHELESS
FPCD
IS
A
POPULAR
PREVIOUS
UPDATE
IN
OTHER
WORDS
SML
USES
A
CONTINUALLY
AND
APPARENTLY
EFFECTIVE
MEANS
OF
DRAWING
APPROXIMATE
RUNNING
GIBBS
CHAIN
OR
OFTEN
A
NUMBER
OF
GIBBS
CHAINS
SAMPLES
FROM
THE
MODEL
DISTRIBUTION
THAT
FAITHFULLY
REPRE
RUN
IN
PARALLEL
FROM
WHICH
SAMPLES
ARE
DRAWN
TO
ESTIMATE
SENT
ITS
DIVERSITY
AT
THE
PRICE
OF
SOMETIMES
GENERATING
THE
NEGATIVE
PHASE
EXPECTATION
DESPITE
THE
MODEL
PARA
SPURIOUS
SAMPLES
IN
BETWEEN
TWO
MODES
BECAUSE
THE
FAST
METERS
CHANGING
BETWEEN
UPDATES
THESE
CHANGES
SHOULD
BE
WEIGHTS
ROUGHLY
CORRESPOND
TO
A
SMOOTHED
VIEW
OF
THE
SMALL
ENOUGH
THAT
ONLY
A
FEW
STEPS
OF
GIBBS
IN
PRACTICE
CURRENT
MODEL
ENERGY
FUNCTION
IT
HAS
BEEN
APPLIED
IN
A
OFTEN
ONE
STEP
IS
USED
ARE
REQUIRED
TO
MAINTAIN
SAMPLES
VARIETY
OF
APPLICATIONS
AND
IT
HAS
BEEN
FROM
THE
EQUILIBRIUM
DISTRIBUTION
OF
THE
GIBBS
CHAIN
I
E
TRANSFORMED
INTO
A
SAMPLING
ALGORITHM
THAT
ALSO
SHARES
THE
MODEL
DISTRIBUTION
THIS
FAST
MIXING
PROPERTY
WITH
HERDING
FOR
THE
SAME
A
TROUBLESOME
ASPECT
OF
SML
IS
THAT
IT
RELIES
ON
THE
GIBBS
REASON
I
E
INTRODUCING
NEGATIVE
CORRELATIONS
BETWEEN
CON
CHAIN
TO
MIX
WELL
ESPECIALLY
BETWEEN
MODES
FOR
LEARNING
TO
SECUTIVE
SAMPLES
OF
THE
CHAIN
TO
PROMOTE
FASTER
MIXING
SUCCEED
TYPICALLY
AS
LEARNING
PROGRESSES
AND
THE
WEIGHTS
OF
THE
RBM
GROW
THE
ERGODICITY
OF
THE
GIBBS
SAMPLE
BEGINS
TO
PSEUDOLIKELIHOOD
RATIO
MATCHING
AND
MORE
BREAK
DOWN
IF
THE
LEARNING
RATE
ASSOCIATED
WITH
GRADIENT
WHILE
CD
SML
AND
FPCD
ARE
BY
FAR
THE
MOST
POPULAR
ASCENT
Þ
G
WITH
G
LOG
P
ÐXÞ
IS
NOT
REDUCED
TO
METHODS
FOR
TRAINING
RBMS
AND
RBM
BASED
MODELS
ALL
OF
COMPENSATE
THEN
THE
GIBBS
SAMPLER
WILL
DIVERGE
FROM
THE
THESE
METHODS
ARE
PERHAPS
MOST
NATURALLY
DESCRIBED
AS
MODEL
DISTRIBUTION
AND
LEARNING
WILL
FAIL
DESJARDINS
ET
AL
OFFERING
DIFFERENT
APPROXIMATIONS
TO
MAXIMUM
LIKELIHOOD
CHO
ET
AL
AND
SALAKHUTDINOV
HAVE
ALL
TRAINING
THERE
EXIST
OTHER
INDUCTIVE
PRINCIPLES
THAT
ARE
CONSIDERED
VARIOUS
FORMS
OF
TEMPERED
TRANSITIONS
TO
ADDRESS
ALTERNATIVES
TO
MAXIMUM
LIKELIHOOD
THAT
CAN
ALSO
BE
USED
TO
THE
FAILURE
OF
GIBBS
CHAIN
MIXING
AND
CONVINCING
SOLUTIONS
TRAIN
RBMS
IN
PARTICULAR
THESE
INCLUDE
PSEUDOLIKELIHOOD
HAVE
NOT
YET
BEEN
CLEARLY
DEMONSTRATED
A
RECENTLY
INTRO
AND
RATIO
MATCHING
BOTH
OF
THESE
INDUCTIVE
DUCED
PROMISING
AVENUE
RELIES
ON
DEPTH
ITSELF
RELYING
ON
THE
PRINCIPLES
ATTEMPT
TO
AVOID
EXPLICITLY
DEALING
WITH
THE
OBSERVATION
THAT
MIXING
BETWEEN
MODES
IS
MUCH
EASIER
ON
PARTITION
FUNCTION
AND
THEIR
ASYMPTOTIC
EFFICIENCY
HAS
BEEN
DEEPER
LAYERS
SECTION
ANALYZED
PSEUDOLIKELIHOOD
SEEKS
TO
MAXIMIZE
THE
TIELEMAN
AND
HINTON
HAVE
PROPOSED
QUITE
A
PRODUCT
OF
ALL
CONDITIONAL
DISTRIBUTIONS
OF
THE
FORM
DIFFERENT
APPROACH
TO
ADDRESSING
POTENTIAL
MIXING
PROBLEMS
P
ÐXD
J
XND
Þ
WHILE
RATIO
MATCHING
CAN
BE
INTERPRETED
AS
AN
OF
SML
WITH
THEIR
FPCD
AND
IT
HAS
ALSO
BEEN
EXPLOITED
TO
EXTENSION
OF
SCORE
MATCHING
TO
DISCRETE
DATA
TYPES
BOTH
TRAIN
DBMS
AND
CONSTRUCT
A
PURE
SAMPLING
ALGORITHM
METHODS
AMOUNT
TO
WEIGHTED
DIFFERENCES
OF
THE
GRADIENT
OF
FOR
RBMS
FPCD
BUILDS
ON
THE
SURPRISING
BUT
ROBUST
THE
RBM
FREE
EVALUATED
AT
A
DATA
POINT
AND
AT
TENDENCY
OF
GIBBS
CHAINS
TO
MIX
BETTER
DURING
SML
NEIGHBORING
POINTS
ONE
POTENTIAL
DRAWBACK
OF
THESE
LEARNING
THAN
WHEN
THE
MODEL
PARAMETERS
ARE
FIXED
THE
METHODS
IS
THAT
DEPENDING
ON
THE
PARAMETERIZATION
OF
THE
PHENOMENON
IS
ROOTED
IN
THE
FORM
OF
THE
LIKELIHOOD
ENERGY
FUNCTION
THEIR
COMPUTATIONAL
REQUIREMENTS
MAY
GRADIENT
ITSELF
THE
SAMPLES
DRAWN
FROM
THE
SML
SCALE
UP
TO
OÐND
Þ
WORSE
THAN
CD
SML
FPCD
OR
DENOISING
GIBBS
CHAIN
ARE
USED
IN
THE
NEGATIVE
PHASE
OF
THE
GRADIENT
SCORE
MATCHING
DISCUSSED
BELOW
MARLIN
ET
AL
EMPIRICALLY
COMPARED
ALL
OF
THESE
METHODS
EXCEPT
WHEN
WEIGHTS
BECOME
LARGE
THE
ESTIMATED
DISTRIBUTION
IS
MORE
PEAKY
AND
THE
CHAIN
TAKES
A
VERY
LONG
TIME
TO
MIX
TO
MOVE
FROM
MODE
TO
DENOISING
SCORE
MATCHING
ON
A
RANGE
OF
CLASSIFICATION
MODE
SO
THAT
PRACTICALLY
THE
GRADIENT
ESTIMATOR
CAN
BE
VERY
POOR
THIS
IS
A
SERIOUS
CHICKEN
AND
EGG
PROBLEM
BECAUSE
IF
SAMPLING
IS
NOT
EFFECTIVE
THEN
THE
FREE
ENERGY
F
ÐX
Þ
IS
THE
ENERGY
ASSOCIATED
WITH
THE
DATA
NEITHER
IS
THE
TRAINING
PROCEDURE
WHICH
MAY
SEEM
TO
STALL
AND
YIELD
EVEN
MARGINAL
PROBABILITY
F
ÐX
Þ
LOG
P
ÐXÞ
LOG
Z
AND
IS
TRACTABLE
FOR
LARGER
WEIGHTS
THE
RBM
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
RECONSTRUCTION
AND
DENSITY
MODELING
TASKS
AND
FOUND
THAT
DIRECT
ENCODING
METHODS
THAT
DO
NOT
REQUIRE
A
DECODER
IN
GENERAL
SML
PROVIDED
THE
BEST
COMBINATION
OF
OVERALL
SUCH
AS
SEMI
SUPERVISED
EMBEDDING
AND
SLOW
FEATURE
PERFORMANCE
AND
COMPUTATIONAL
TRACTABILITY
HOWEVER
IN
A
ANALYSIS
LATER
STUDY
THE
SAME
AUTHORS
FOUND
DENOISING
SCORE
MATCHING
TO
BE
A
COMPETITIVE
INDUCTIVE
PRINCIPLE
BOTH
IN
AUTOENCODERS
TERMS
OF
CLASSIFICATION
PERFORMANCE
WITH
RESPECT
TO
SML
IN
THE
AUTOENCODER
FRAMEWORK
ONE
STARTS
BY
AND
IN
TERMS
OF
COMPUTATIONAL
EFFICIENCY
WITH
RESPECT
TO
EXPLICITLY
DEFINING
A
FEATURE
EXTRACTING
FUNCTION
IN
A
SPECIFIC
ANALYTICALLY
OBTAINED
SCORE
MATCHING
DENOISING
SCORE
PARAMETERIZED
CLOSED
FORM
THIS
FUNCTION
WHICH
WE
WILL
MATCHING
IS
A
SPECIAL
CASE
OF
THE
DENOISING
AUTOENCODER
DENOTE
F
IS
CALLED
THE
ENCODER
AND
WILL
ALLOW
THE
DAE
TRAINING
CRITERION
SECTION
WHEN
THE
RECONSTRUC
STRAIGHTFORWARD
AND
EFFICIENT
COMPUTATION
OF
A
FEATURE
TION
ERROR
RESIDUAL
EQUALS
A
GRADIENT
I
E
THE
SCORE
FUNCTION
VECTOR
H
F
ÐXÞ
FROM
AN
INPUT
X
FOR
EACH
EXAMPLE
XÐTÞ
ASSOCIATED
WITH
AN
ENERGY
FUNCTION
AS
SHOWN
IN
FROM
A
DATASET
XÐT
Þ
G
WE
DEFINE
IN
THE
SPIRIT
OF
THE
BOLTZMANN
MACHINE
GRADIENT
HÐTÞ
F
ÐXÐTÞ
Þ
SEVERAL
APPROACHES
HAVE
BEEN
PROPOSED
TO
TRAIN
ENERGY
BASED
MODELS
ONE
IS
NOISE
CONTRASTIVE
ESTIMATION
IN
WHERE
HÐTÞ
IS
THE
FEATURE
VECTOR
OR
REPRESENTATION
OR
CODE
WHICH
THE
TRAINING
CRITERION
IS
TRANSFORMED
INTO
A
PROBABIL
COMPUTED
FROM
XÐTÞ
ANOTHER
CLOSED
FORM
PARAMETERIZED
ISTIC
CLASSIFICATION
PROBLEM
DISTINGUISH
BETWEEN
POSITIVE
FUNCTION
G
CALLED
THE
DECODER
MAPS
FROM
FEATURE
SPACE
BACK
TRAINING
EXAMPLES
AND
NEGATIVE
NOISE
SAMPLES
GENERATED
INTO
INPUT
SPACE
PRODUCING
A
RECONSTRUCTION
R
G
ÐHÞ
BY
A
BROAD
DISTRIBUTION
SUCH
AS
THE
GAUSSIAN
ANOTHER
WHEREAS
PROBABILISTIC
MODELS
ARE
DEFINED
FROM
AN
EXPLICIT
FAMILY
OF
APPROACHES
MORE
IN
THE
SPIRIT
OF
CD
RELIES
ON
PROBABILITY
FUNCTION
AND
ARE
TRAINED
TO
MAXIMIZE
OFTEN
DISTINGUISHING
POSITIVE
EXAMPLES
OF
THE
TRAINING
DISTRIBU
APPROXIMATELY
THE
DATA
LIKELIHOOD
OR
A
PROXY
AUTOENCO
TION
AND
NEGATIVE
EXAMPLES
OBTAINED
BY
PERTURBATIONS
OF
DERS
ARE
PARAMETERIZED
THROUGH
THEIR
ENCODER
AND
DECODER
THE
POSITIVE
EXAMPLES
AND
ARE
TRAINED
USING
A
DIFFERENT
TRAINING
PRINCIPLE
THE
SET
OF
PARAMETERS
OF
THE
ENCODER
AND
DECODER
ARE
LEARNED
SIMULTANEOUSLY
ON
THE
TASK
OF
RECONSTRUCTING
AS
WELL
AS
DIRECTLY
LEARNING
A
PARAMETRIC
MAP
FROM
POSSIBLY
THE
ORIGINAL
INPUT
I
E
ATTEMPTING
TO
INCUR
THE
INPUT
TO
REPRESENTATION
LOWEST
POSSIBLE
RECONSTRUCTION
ERROR
LÐX
RÞ
A
MEASURE
OF
THE
WITHIN
THE
FRAMEWORK
OF
PROBABILISTIC
MODELS
ADOPTED
IN
DISCREPANCY
BETWEEN
X
AND
ITS
RECONSTRUCTION
R
OVER
SECTION
THE
LEARNED
REPRESENTATION
IS
ALWAYS
ASSOCIATED
TRAINING
EXAMPLES
GOOD
GENERALIZATION
MEANS
LOW
RECON
WITH
LATENT
VARIABLES
SPECIFICALLY
WITH
THEIR
POSTERIOR
STRUCTION
ERROR
AT
TEST
EXAMPLES
WHILE
HAVING
HIGH
DISTRIBUTION
GIVEN
AN
OBSERVED
INPUT
X
UNFORTUNATELY
THIS
RECONSTRUCTION
ERROR
FOR
MOST
OTHER
X
CONFIGURATIONS
TO
POSTERIOR
DISTRIBUTION
TENDS
TO
BECOME
VERY
COMPLICATED
CAPTURE
THE
STRUCTURE
OF
THE
DATA
GENERATING
DISTRIBUTION
IT
AND
INTRACTABLE
IF
THE
MODEL
HAS
MORE
THAN
A
COUPLE
OF
IS
THEREFORE
IMPORTANT
THAT
SOMETHING
IN
THE
TRAINING
INTERCONNECTED
LAYERS
WHETHER
IN
THE
DIRECTED
OR
UNDIR
CRITERION
OR
THE
PARAMETERIZATION
PREVENTS
THE
AUTOENCODER
ECTED
GRAPHICAL
MODEL
FRAMEWORKS
IT
THEN
BECOMES
FROM
LEARNING
THE
IDENTITY
FUNCTION
WHICH
HAS
ZERO
NECESSARY
TO
RESORT
TO
SAMPLING
OR
APPROXIMATE
INFERENCE
RECONSTRUCTION
ERROR
EVERYWHERE
THIS
IS
ACHIEVED
THROUGH
TECHNIQUES
AND
TO
PAY
THE
ASSOCIATED
COMPUTATIONAL
AND
VARIOUS
MEANS
IN
THE
DIFFERENT
FORMS
OF
AUTOENCODERS
AS
APPROXIMATION
ERROR
PRICE
IF
THE
TRUE
POSTERIOR
HAS
A
LARGE
DESCRIBED
BELOW
IN
MORE
DETAIL
AND
WE
CALL
THESE
REGULARIZED
NUMBER
OF
MODES
THAT
MATTER
THEN
CURRENT
INFERENCE
AUTOENCODERS
A
PARTICULAR
FORM
OF
REGULARIZATION
CONSISTS
OF
TECHNIQUES
MAY
FACE
AN
UNSURMOUNTABLE
CHALLENGE
OR
CONSTRAINING
THE
CODE
TO
HAVE
A
LOW
DIMENSION
AND
THIS
IS
ENDURE
A
POTENTIALLY
SERIOUS
APPROXIMATION
THIS
IS
IN
WHAT
THE
CLASSICAL
AUTOENCODER
OR
PCA
DO
ADDITION
TO
THE
DIFFICULTIES
RAISED
BY
THE
INTRACTABLE
PARTITION
IN
SUMMARY
BASIC
AUTOENCODER
TRAINING
CONSISTS
IN
FUNCTION
IN
UNDIRECTED
GRAPHICAL
MODELS
MOREOVER
FINDING
A
VALUE
OF
PARAMETER
VECTOR
MINIMIZING
RECON
A
POSTERIOR
DISTRIBUTION
OVER
LATENT
VARIABLES
IS
NOT
YET
A
STRUCTION
ERROR
SIMPLE
USABLE
FEATURE
VECTOR
THAT
CAN
FOR
EXAMPLE
BE
FED
TO
A
X
J
AE
Ð
Þ
LÐXÐTÞ
G
ÐF
ÐXÐTÞ
ÞÞÞ
CLASSIFIER
SO
ACTUAL
FEATURE
VALUES
ARE
TYPICALLY
DERIVED
FROM
T
THAT
DISTRIBUTION
TAKING
THE
LATENT
VARIABLE
EXPECTATION
AS
IS
TYPICALLY
DONE
WITH
RBMS
THEIR
MARGINAL
PROBABILITY
WHERE
XÐTÞ
IS
A
TRAINING
EXAMPLE
THIS
MINIMIZATION
IS
OR
FINDING
THEIR
MOST
LIKELY
VALUE
AS
IN
SPARSE
CODING
IF
USUALLY
CARRIED
OUT
BY
STOCHASTIC
GRADIENT
DESCENT
AS
IN
THE
WE
ARE
TO
EXTRACT
STABLE
DETERMINISTIC
NUMERICAL
FEATURE
TRAINING
OF
MLPS
SINCE
AUTOENCODERS
WERE
PRIMARILY
VALUES
IN
THE
END
ANYWAY
AN
ALTERNATIVE
APPARENTLY
DEVELOPED
AS
MLPS
PREDICTING
THEIR
INPUT
THE
MOST
COMMONLY
USED
FORMS
FOR
THE
ENCODER
AND
DECODER
ARE
NONPROBABILISTIC
FEATURE
LEARNING
PARADIGM
THAT
FOCUSES
ON
AFFINE
MAPPINGS
OPTIONALLY
FOLLOWED
BY
A
NONLINEARITY
CARRYING
OUT
THIS
PART
OF
THE
COMPUTATION
VERY
EFFICIENTLY
IS
THAT
OF
AUTOENCODERS
AND
OTHER
DIRECTLY
PARAMETERIZED
F
ÐXÞ
SF
ÐB
Þ
W
XÞ
FEATURE
OR
REPRESENTATION
FUNCTIONS
THE
COMMONALITY
BETWEEN
THESE
METHODS
IS
THAT
THEY
LEARN
A
DIRECT
ENCODING
G
ÐHÞ
SG
ÐD
Þ
W
HÞ
I
E
A
PARAMETRIC
MAP
FROM
INPUTS
TO
THEIR
REPRESENTATION
REGULARIZED
AUTOENCODERS
DISCUSSED
NEXT
ALSO
INVOLVE
WHERE
SF
AND
SG
ARE
THE
ENCODER
AND
DECODER
ACTIVATION
LEARNING
A
DECODING
FUNCTION
THAT
MAPS
BACK
FROM
FUNCTIONS
TYPICALLY
THE
ELEMENTWISE
SIGMOID
OR
HYPERBOLIC
REPRESENTATION
TO
INPUT
SPACE
SECTIONS
AND
DISCUSS
TANGENT
NONLINEARITY
OR
THE
IDENTITY
FUNCTION
IF
STAYING
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
LINEAR
THE
SET
OF
PARAMETERS
OF
SUCH
A
MODEL
IS
THE
REPRESENTATION
EVEN
WHEN
IT
IS
OVERCOMPLETE
THE
EFFECT
FW
B
W
DG
WHERE
B
AND
D
ARE
CALLED
ENCODER
AND
OF
A
BOTTLENECK
OR
OF
THIS
REGULARIZATION
IS
THAT
THE
DECODER
BIAS
VECTORS
AND
W
AND
W
ARE
THE
ENCODER
AND
AUTOENCODER
CANNOT
RECONSTRUCT
EVERYTHING
WELL
THAT
IT
IS
DECODER
WEIGHT
MATRICES
TRAINED
TO
RECONSTRUCT
WELL
THE
TRAINING
EXAMPLES
AND
THE
CHOICE
OF
SG
AND
L
DEPENDS
LARGELY
ON
THE
INPUT
GENERALIZATION
MEAN
THAT
RECONSTRUCTION
ERROR
IS
ALSO
SMALL
DOMAIN
RANGE
AND
NATURE
AND
IS
USUALLY
CHOSEN
SO
THAT
L
ON
TEST
EXAMPLES
AN
INTERESTING
JUSTIFICATION
FOR
THE
RETURNS
A
NEGATIVE
LOG
LIKELIHOOD
FOR
THE
OBSERVED
VALUE
OF
X
SPARSITY
PENALTY
OR
ANY
PENALTY
THAT
RESTRICTS
IN
A
SOFT
WAY
A
NATURAL
CHOICE
FOR
AN
UNBOUNDED
DOMAIN
IS
A
LINEAR
THE
VOLUME
OF
HIDDEN
CONFIGURATIONS
EASILY
ACCESSIBLE
BY
THE
DECODER
WITH
A
SQUARED
RECONSTRUCTION
ERROR
I
E
SG
ÐAÞ
A
LEARNER
IS
THAT
IT
ACTS
IN
SPIRIT
LIKE
THE
PARTITION
FUNCTION
OF
AND
LÐX
RÞ
KX
IF
INPUTS
ARE
BOUNDED
BETWEEN
AND
RBMS
BY
MAKING
SURE
THAT
ONLY
FEW
INPUT
CONFIGURATIONS
HOWEVER
ENSURING
A
SIMILARLY
BOUNDED
RECONSTRUCTION
CAN
HAVE
A
LOW
RECONSTRUCTION
ERROR
CAN
BE
ACHIEVED
BY
USING
SG
SIGMOID
IN
ADDITION
IF
THE
ALTERNATIVELY
ONE
CAN
VIEW
THE
OBJECTIVE
OF
THE
REGULAR
INPUTS
ARE
OF
A
BINARY
NATURE
A
BINARY
CROSS
ENTROPY
IS
IZATION
APPLIED
TO
AN
AUTOENCODER
AS
MAKING
THE
REPRESEN
SOMETIMES
USED
TATION
AS
CONSTANT
INSENSITIVE
AS
POSSIBLE
WITH
RESPECT
TO
IF
BOTH
ENCODER
AND
DECODER
USE
A
SIGMOID
NONLINEARITY
CHANGES
IN
INPUT
THIS
VIEW
IMMEDIATELY
JUSTIFIES
TWO
THEN
F
ÐXÞ
AND
G
ÐHÞ
HAVE
THE
EXACT
SAME
FORM
AS
THE
VARIANTS
OF
REGULARIZED
AUTOENCODERS
DESCRIBED
BELOW
CONDITIONALS
P
ÐH
J
VÞ
AND
P
ÐV
J
HÞ
OF
BINARY
RBMS
SEE
CONTRACTIVE
AUTOENCODERS
CAES
REDUCE
THE
NUMBER
OF
SECTION
THIS
SIMILARITY
MOTIVATED
AN
INITIAL
STUDY
OF
EFFECTIVE
DEGREES
OF
FREEDOM
OF
THE
REPRESENTATION
AROUND
EACH
POINT
BY
MAKING
THE
ENCODER
CONTRACTIVE
I
E
MAKING
THE
POSSIBILITY
OF
REPLACING
RBMS
WITH
AUTOENCODERS
AS
THE
THE
DERIVATIVE
OF
THE
ENCODER
SMALL
THUS
MAKING
THE
BASIC
PRETRAINING
STRATEGY
FOR
BUILDING
DEEP
NETWORKS
AS
HIDDEN
UNITS
SATURATE
WHILE
THE
DAE
MAKES
THE
WHOLE
WELL
AS
THE
COMPARATIVE
ANALYSIS
OF
AUTOENCODER
RECONSTRUC
MAPPING
ROBUST
I
E
INSENSITIVE
TO
SMALL
RANDOM
TION
ERROR
GRADIENT
AND
CD
UPDATES
PERTURBATIONS
OR
CONTRACTIVE
MAKING
SURE
THAT
THE
RECON
ONE
NOTABLE
DIFFERENCE
IN
THE
PARAMETERIZATION
IS
THAT
STRUCTION
CANNOT
STAY
GOOD
WHEN
MOVING
IN
MOST
DIRECTIONS
RBMS
USE
A
SINGLE
WEIGHT
MATRIX
WHICH
FOLLOWS
NATURALLY
AROUND
A
TRAINING
EXAMPLE
FROM
THEIR
ENERGY
FUNCTION
WHEREAS
THE
AUTOENCODER
FRAMEWORK
ALLOWS
FOR
A
DIFFERENT
MATRIX
IN
THE
ENCODER
SPARSE
AUTOENCODERS
AND
DECODER
IN
PRACTICE
HOWEVER
WEIGHT
TYING
IN
WHICH
ONE
THE
EARLIEST
USES
OF
SINGLE
LAYER
AUTOENCODERS
FOR
BUILDING
DEFINES
W
W
T
MAY
BE
AND
IS
MOST
OFTEN
USED
DEEP
ARCHITECTURES
BY
STACKING
THEM
CONSIDERED
THE
RENDERING
THE
PARAMETERIZATIONS
IDENTICAL
THE
USUAL
TRAIN
IDEA
OF
TYING
THE
ENCODER
WEIGHTS
AND
DECODER
WEIGHTS
TO
ING
PROCEDURES
HOWEVER
DIFFER
GREATLY
BETWEEN
THE
TWO
APPROACHES
A
PRACTICAL
ADVANTAGE
OF
TRAINING
AUTOENCODER
RESTRICT
CAPACITY
AS
WELL
AS
THE
IDEA
OF
INTRODUCING
A
FORM
OF
VARIANTS
IS
THAT
THEY
DEFINE
A
SIMPLE
TRACTABLE
OPTIMIZATION
SPARSITY
REGULARIZATION
SPARSITY
IN
THE
REPRESENTATION
OBJECTIVE
THAT
CAN
BE
USED
TO
MONITOR
PROGRESS
CAN
BE
ACHIEVED
BY
PENALIZING
THE
HIDDEN
UNIT
BIASES
IN
THE
CASE
OF
A
LINEAR
AUTOENCODER
LINEAR
ENCODER
AND
MAKING
THESE
ADDITIVE
OFFSET
PARAMETERS
MORE
NEGATIVE
DECODER
WITH
SQUARED
RECONSTRUCTION
ERROR
MINIMIZING
OR
BY
DIRECTLY
PENALIZING
THE
OUTPUT
LEARNS
THE
SAME
AS
PCA
THIS
IS
ALSO
TRUE
OF
THE
HIDDEN
UNIT
ACTIVATIONS
MAKING
THEM
CLOSER
TO
THEIR
WHEN
USING
A
SIGMOID
NONLINEARITY
IN
THE
ENCODER
BUT
SATURATING
VALUE
AT
PENALIZING
THE
BIAS
NOT
IF
THE
WEIGHTS
W
AND
W
ARE
TIED
W
W
T
BECAUSE
W
RUNS
THE
DANGER
THAT
THE
WEIGHTS
COULD
COMPENSATE
FOR
THE
CANNOT
BE
FORCED
INTO
BEING
SMALL
AND
W
LARGE
TO
ACHIEVE
A
BIAS
WHICH
COULD
HURT
NUMERICAL
OPTIMIZATION
WHEN
LINEAR
ENCODER
DIRECTLY
PENALIZING
THE
HIDDEN
UNIT
OUTPUTS
SEVERAL
VARIANTS
SIMILARLY
LE
ET
AL
RECENTLY
CAN
BE
FOUND
IN
THE
LITERATURE
BUT
A
CLEAR
COMPARATIVE
P
PSHOWED
THAT
ADDING
A
ANALYSIS
IS
STILL
LACKING
ALTHOUGH
THE
PENALTY
I
E
SIMPLY
REGULARIZATION
TERM
OF
THE
FORM
T
J
ÐWJ
XÐTÞ
Þ
TO
A
LINEAR
AUTOENCODER
WITH
TIED
WEIGHTS
WHERE
IS
A
NONLINEAR
THE
SUM
OF
OUTPUT
ELEMENTS
HJ
IN
THE
CASE
OF
SIGMOID
CONVEX
FUNCTION
YIELDS
AN
EFFICIENT
ALGORITHM
FOR
LEARNING
NONLINEARITY
WOULD
SEEM
THE
MOST
NATURAL
BECAUSE
OF
ITS
LINEAR
ICA
USE
IN
SPARSE
CODING
IT
IS
USED
IN
FEW
PAPERS
INVOLVING
SPARSE
AUTOENCODERS
A
CLOSE
COUSIN
OF
THE
PENALTY
IS
THE
REGULARIZED
AUTOENCODERS
STUDENT
T
PENALTY
Þ
Þ
ORIGINALLY
PROPOSED
FOR
LIKE
PCA
AUTOENCODERS
WERE
ORIGINALLY
SEEN
AS
A
DIMEN
SPARSE
CODING
SEVERAL
PAPERS
PENALIZE
THE
AVERAGE
SIONALITY
REDUCTION
TECHNIQUE
AND
THUS
USED
A
BOTTLENECK
I
E
OUTPUT
H
J
E
G
OVER
A
MINIBATCH
AND
INSTEAD
OF
PUSHING
IT
DH
DX
ON
THE
OTHER
HAND
SUCCESSFUL
USES
OF
SPARSE
CODING
TO
ENCOURAGE
IT
TO
APPROACH
A
FIXED
TARGET
EITHER
THROUGH
A
AND
RBM
APPROACHES
TEND
TO
FAVOR
OVERCOMPLETE
REPRESENTA
MEAN
SQUARE
ERROR
PENALTY
OR
MAYBE
MORE
SENSIBLY
TIONS
I
E
DH
DX
THIS
CAN
ALLOW
THE
AUTOENCODER
TO
SIMPLY
BECAUSE
HJ
BEHAVES
LIKE
A
PROBABILITY
A
KULLBACK
LIEBLER
DUPLICATE
THE
INPUT
IN
THE
FEATURES
WITH
PERFECT
RECONSTRUC
DIVERGENCE
WITH
RESPECT
TO
THE
BINOMIAL
DISTRIBUTION
WITH
TION
WITHOUT
HAVING
EXTRACTED
MORE
MEANINGFUL
FEATURES
PROBABILITY
LOG
H
J
Þ
H
J
Þ
Þ
CONSTANT
FOR
RECENT
RESEARCH
HAS
DEMONSTRATED
VERY
SUCCESSFUL
ALTER
EXAMPLE
WITH
NATIVE
WAYS
CALLED
REGULARIZED
AUTOENCODERS
TO
CONSTRAIN
DAES
PDX
LÐX
RÞ
XI
LOGÐRI
Þ
Þ
RI
Þ
RI
Þ
VINCENT
ET
AL
PROPOSED
ALTERING
THE
TRAINING
CONTRARY
TO
TRADITIONAL
PCA
LOADING
FACTORS
BUT
SIMILARLY
TO
THE
OBJECTIVE
IN
FROM
MERE
RECONSTRUCTION
TO
THAT
OF
PARAMETERS
LEARNED
BY
PROBABILISTIC
PCA
THE
WEIGHT
VECTORS
LEARNED
BY
A
LINEAR
AUTOENCODER
ARE
NOT
CONSTRAINED
TO
FORM
AN
ORTHONORMAL
BASIS
NOR
TO
DENOISING
AN
ARTIFICIALLY
CORRUPTED
INPUT
I
E
LEARNING
TO
HAVE
A
MEANINGFUL
ORDERING
THEY
WILL
HOWEVER
SPAN
THE
SAME
SUBSPACE
RECONSTRUCT
THE
CLEAN
INPUT
FROM
A
CORRUPTED
VERSION
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
SCORE
MATCHING
EFFICIENTLY
FINALLY
ALAIN
AND
BENGIO
GENERALIZE
AND
PROVE
THAT
DAES
OF
ARBITRARY
PARA
METERIZATION
WITH
SMALL
GAUSSIAN
CORRUPTION
NOISE
ARE
GENERAL
ESTIMATORS
OF
THE
SCORE
CAES
CAES
PROPOSED
BY
RIFAI
ET
AL
FOLLOW
UP
ON
DAES
AND
SHARE
A
SIMILAR
MOTIVATION
OF
LEARNING
ROBUST
REPRESENTA
TIONS
CAES
ACHIEVE
THIS
BY
ADDING
AN
ANALYTIC
CONTRACTIVE
PENALTY
TO
THE
FROBENIUS
NORM
OF
THE
ENCODER
JACOBIAN
AND
RESULTS
IN
PENALIZING
THE
SENSITIVITY
OF
LEARNED
FIG
WHEN
DATA
CONCENTRATE
NEAR
A
LOWER
DIMENSIONAL
MANIFOLD
THE
FEATURES
TO
INFINITESIMAL
INPUT
VARIATIONS
LET
JÐXÞ
F
X
ÐXÞ
CORRUPTION
VECTOR
IS
TYPICALLY
ALMOST
ORTHOGONAL
TO
THE
MANIFOLD
AND
THE
BE
THE
JACOBIAN
MATRIX
OF
THE
ENCODER
AT
X
THE
CAE
RECONSTRUCTION
FUNCTION
LEARNS
TO
DENOISE
MAP
FROM
LOW
PROBABILITY
TRAINING
OBJECTIVE
IS
CONFIGURATIONS
CORRUPTED
INPUTS
TO
HIGH
PROBABILITY
ONES
ORIGINAL
INPUTS
CREATING
A
VECTOR
FIELD
ALIGNED
WITH
THE
SCORE
DERIVATIVE
OF
THE
X
ESTIMATED
DENSITY
J
CAE
L
XÐTÞ
G
F
ÐXÐTÞ
Þ
Þ
KJÐXÐTÞ
T
LEARNING
THE
IDENTITY
IS
NO
LONGER
ENOUGH
THE
LEARNER
MUST
WHERE
IS
A
HYPERPARAMETER
CONTROLLING
THE
STRENGTH
OF
THE
CAPTURE
THE
STRUCTURE
OF
THE
INPUT
DISTRIBUTION
TO
OPTIMALLY
REGULARIZATION
FOR
AN
AFFINE
SIGMOID
ENCODER
THE
CONTRAC
UNDO
THE
EFFECT
OF
THE
CORRUPTION
PROCESS
WITH
THE
TIVE
PENALTY
TERM
IS
EASY
TO
COMPUTE
RECONSTRUCTION
ESSENTIALLY
BEING
A
NEARBY
BUT
HIGHER
DENSITY
POINT
THAN
THE
CORRUPTED
INPUT
FIG
ILLUSTRATES
THAT
THE
JJ
ÐXÞ
F
ÐXÞJ
F
ÐXÞJ
ÞWJ
X
DAE
IS
LEARNING
A
RECONSTRUCTION
FUNCTION
THAT
CORRESPONDS
ÐF
ÐXÞJ
F
ÐXÞJ
KWJ
TO
A
VECTOR
FIELD
POINTING
TOWARD
HIGH
DENSITY
REGIONS
J
THE
MANIFOLD
WHERE
EXAMPLES
CONCENTRATE
THERE
ARE
AT
LEAST
THREE
NOTABLE
DIFFERENCES
WITH
DAES
FORMALLY
THE
OBJECTIVE
OPTIMIZED
BY
A
DAE
IS
WHICH
MAY
BE
PARTLY
RESPONSIBLE
FOR
THE
BETTER
PERFORMANCE
X
J
DAE
IEQÐ
XJXÐTÞ
Þ
LÐXÐTÞ
G
ÐF
Ð
XÞÞÞ
THAT
CAE
FEATURES
SEEM
TO
EMPIRICALLY
DEMONSTRATE
THE
T
SENSITIVITY
OF
THE
FEATURES
IS
RATHER
THAN
THAT
OF
THE
RECONSTRUCTION
THE
PENALTY
IS
ANALYTIC
RATHER
THAN
WHERE
IEQÐ
XJXÐTÞ
Þ
AVERAGES
OVER
CORRUPTED
EXAMPLES
X
STOCHASTIC
AN
EFFICIENTLY
COMPUTABLE
EXPRESSION
REPLACES
DRAWN
FROM
CORRUPTION
PROCESS
QÐ
X
J
XÐTÞ
Þ
IN
PRACTICE
THIS
WHAT
MIGHT
OTHERWISE
REQUIRE
DX
CORRUPTED
SAMPLES
TO
SIZE
IS
OPTIMIZED
BY
STOCHASTIC
GRADIENT
DESCENT
WHERE
THE
UP
I
E
THE
SENSITIVITY
IN
DX
DIRECTIONS
A
HYPERPARA
STOCHASTIC
GRADIENT
IS
ESTIMATED
BY
DRAWING
ONE
OR
A
FEW
METER
ALLOWS
FINE
CONTROL
OF
THE
TRADEOFF
BETWEEN
CORRUPTED
VERSIONS
OF
XÐTÞ
EACH
TIME
XÐTÞ
IS
CONSIDERED
RECONSTRUCTION
AND
ROBUSTNESS
WHILE
THE
TWO
ARE
MINGLED
CORRUPTIONS
CONSIDERED
IN
VINCENT
ET
AL
INCLUDE
IN
A
DAE
NOTE
HOWEVER
THAT
THERE
IS
A
TIGHT
CONNECTION
ADDITIVE
ISOTROPIC
GAUSSIAN
NOISE
SALT
AND
PEPPER
NOISE
FOR
BETWEEN
THE
DAE
AND
THE
CAE
AS
SHOWN
IN
A
DAE
GRAY
SCALE
IMAGES
AND
MASKING
NOISE
SALT
OR
PEPPER
ONLY
WITH
SMALL
CORRUPTION
NOISE
CAN
BE
SEEN
THROUGH
A
TAYLOR
FOR
EXAMPLE
SETTING
SOME
RANDOMLY
CHOSEN
INPUTS
TO
EXPANSION
AS
A
TYPE
OF
CONTRACTIVE
AUTOENCODER
WHERE
THE
INDEPENDENTLY
PER
EXAMPLE
MASKING
NOISE
HAS
BEEN
USED
CONTRACTIVE
PENALTY
IS
ON
THE
WHOLE
RECONSTRUCTION
FUNCTION
IN
MOST
OF
THE
SIMULATIONS
QUALITATIVELY
BETTER
FEATURES
ARE
RATHER
THAN
JUST
ON
THE
ENCODER
REPORTED
WITH
DENOISING
RESULTING
IN
IMPROVED
CLASSIFICA
A
POTENTIAL
DISADVANTAGE
OF
THE
CAE
ANALYTIC
PENALTY
IS
TION
AND
DAE
FEATURES
PERFORMED
SIMILARLY
OR
BETTER
THAN
THAT
IT
AMOUNTS
TO
ONLY
ENCOURAGING
ROBUSTNESS
TO
INFINITESIMAL
RBM
FEATURES
CHEN
ET
AL
SHOW
THAT
A
SIMPLER
INPUT
VARIATIONS
THIS
IS
REMEDIED
IN
WITH
THE
ALTERNATIVE
WITH
A
CLOSED
FORM
SOLUTION
CAN
BE
OBTAINED
CAE
H
WHICH
PENALIZES
ALL
HIGHER
ORDER
DERIVATIVES
IN
WHEN
RESTRICTING
TO
A
LINEAR
AUTOENCODER
AND
HAVE
SUCCESS
AN
EFFICIENT
STOCHASTIC
MANNER
BY
ADDING
A
TERM
THAT
FULLY
APPLIED
IT
TO
DOMAIN
ADAPTATION
ENCOURAGES
JÐXÞ
AND
JÐX
Þ
Þ
TO
BE
CLOSE
VINCENT
RELATES
DAES
TO
ENERGY
BASED
PROBABILISTIC
MODELS
DAES
BASICALLY
LEARN
IN
RÐ
XÞ
X
A
VECTOR
POINTING
X
J
CAEÞH
L
XÐTÞ
G
ÐXÐTÞ
Þ
Þ
KJÐXÐTÞ
IN
THE
DIRECTION
OF
THE
ESTIMATED
SCORE
LOG
X
PÐ
XÞ
FIG
IN
THE
T
SPECIAL
CASE
OF
LINEAR
RECONSTRUCTION
AND
SQUARED
ERROR
Þ
IE
KJÐXÞ
JÐX
Þ
VINCENT
SHOWS
THAT
TRAINING
AN
AFFINE
SIGMOID
AFFINE
DAE
AMOUNTS
TO
LEARNING
AN
ENERGY
BASED
MODEL
WHOSE
WHERE
N
IÞ
AND
IS
THE
ASSOCIATED
REGULARIZATION
ENERGY
FUNCTION
IS
VERY
CLOSE
TO
THAT
OF
A
GRBM
TRAINING
STRENGTH
HYPERPARAMETER
USES
A
REGULARIZED
VARIANT
OF
THE
SCORE
MATCHING
PARAMETER
THE
DAE
AND
CAE
HAVE
BEEN
SUCCESSFULLY
USED
TO
WIN
ESTIMATION
TECHNIQUE
TERMED
DENOISING
SCORE
THE
FINAL
PHASE
OF
THE
UNSUPERVISED
AND
TRANSFER
LEARNING
MATCHING
SWERSKY
HAD
SHOWN
THAT
TRAINING
CHALLENGE
THE
REPRESENTATION
LEARNED
BY
THE
CAE
GRBMS
WITH
SCORE
MATCHING
IS
EQUIVALENT
TO
TRAINING
A
REGULAR
AUTOENCODER
WITH
AN
ADDITIONAL
REGULARIZATION
TERM
THAT
IS
THE
ROBUSTNESS
OF
THE
REPRESENTATION
IS
ENCOURAGED
BUT
NOTE
THAT
IN
THE
CAE
THE
DECODER
WEIGHTS
ARE
TIED
TO
THE
ENCODER
WHILE
FOLLOW
UP
ON
THE
THEORETICAL
RESULTS
IN
WEIGHTS
TO
AVOID
DEGENERATE
SOLUTIONS
AND
THIS
SHOULD
ALSO
MAKE
THE
SHOWED
THE
PRACTICAL
ADVANTAGE
OF
DENOISING
TO
IMPLEMENT
DECODER
CONTRACTIVE
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
TENDS
TO
BE
SATURATED
RATHER
THAN
SPARSE
I
E
MOST
HIDDEN
SO
A
SPARSE
CODING
STAGE
COULD
BE
JOINTLY
OPTIMIZED
UNITS
ARE
NEAR
THE
EXTREMES
OF
THEIR
RANGE
E
G
OR
AND
ALONG
WITH
FOLLOWING
STAGES
OF
A
DEEP
ARCHITECTURE
I
ÐXÞ
THEIR
DERIVATIVE
H
X
IS
NEAR
THE
NONSATURATED
UNITS
ARE
FEW
AND
SENSITIVE
TO
THE
INPUTS
WITH
THEIR
ASSOCIATED
FILTERS
WEIGHT
VECTORS
TOGETHER
FORMING
A
BASIS
EXPLAINING
THE
REPRESENTATION
LEARNING
AS
MANIFOLD
LOCAL
CHANGES
AROUND
X
AS
DISCUSSED
IN
SECTION
LEARNING
ANOTHER
WAY
TO
GET
SATURATED
NEARLY
BINARY
UNITS
IS
ANOTHER
IMPORTANT
PERSPECTIVE
ON
REPRESENTATION
LEARNING
IS
SEMANTIC
HASHING
BASED
ON
THE
GEOMETRIC
NOTION
OF
MANIFOLD
ITS
PREMISE
IS
THE
MANIFOLD
HYPOTHESIS
ACCORDING
TO
WHICH
REAL
WORLD
DATA
PSD
PRESENTED
IN
HIGH
DIMENSIONAL
SPACES
ARE
EXPECTED
TO
SPARSE
CODING
MAY
BE
VIEWED
AS
A
KIND
OF
AUTO
CONCENTRATE
IN
THE
VICINITY
OF
A
MANIFOLD
M
OF
MUCH
LOWER
ENCODER
THAT
USES
A
LINEAR
DECODER
WITH
A
SQUARED
DIMENSIONALITY
DM
EMBEDDED
IN
HIGH
DIMENSIONAL
INPUT
RECONSTRUCTION
ERROR
BUT
WHOSE
NONPARAMETRIC
ENCODER
F
SPACE
IRDX
THIS
PRIOR
SEEMS
PARTICULARLY
WELL
SUITED
FOR
AI
PERFORMS
THE
COMPARATIVELY
NONTRIVIAL
AND
RELATIVELY
COSTLY
TASKS
SUCH
AS
THOSE
INVOLVING
IMAGES
SOUNDS
OR
TEXT
FOR
ITERATIVE
MINIMIZATION
OF
A
PRACTICALLY
SUCCESSFUL
WHICH
MOST
UNIFORMLY
SAMPLED
INPUT
CONFIGURATIONS
ARE
VARIANT
OF
SPARSE
CODING
AND
AUTOENCODERS
NAMED
PSD
UNLIKE
NATURAL
STIMULI
AS
SOON
AS
THERE
IS
A
NOTION
OF
REPLACES
THAT
COSTLY
AND
HIGHLY
NONLINEAR
ENCODING
REPRESENTATION
ONE
CAN
THINK
OF
A
MANIFOLD
BY
CONSIDER
STEP
BY
A
FAST
NONITERATIVE
APPROXIMATION
DURING
RECOGNI
ING
THE
VARIATIONS
IN
INPUT
SPACE
WHICH
ARE
CAPTURED
BY
OR
TION
COMPUTING
THE
LEARNED
FEATURES
PSD
HAS
BEEN
APPLIED
REFLECTED
BY
CORRESPONDING
CHANGES
IN
THE
LEARNED
REPRE
TO
OBJECT
RECOGNITION
IN
IMAGES
AND
VIDEO
SENTATION
TO
FIRST
APPROXIMATION
SOME
DIRECTIONS
ARE
WELL
BUT
ALSO
TO
AUDIO
MOSTLY
WITHIN
THE
FRAMEWORK
OF
PRESERVED
THE
TANGENT
DIRECTIONS
OF
THE
MANIFOLD
WHILE
MULTISTAGE
CONVOLUTIONAL
DEEP
ARCHITECTURES
SECTION
OTHERS
ARE
NOT
DIRECTIONS
ORTHOGONAL
TO
THE
MANIFOLDS
WITH
THE
MAIN
IDEA
CAN
BE
SUMMARIZED
BY
THE
FOLLOWING
THIS
PERSPECTIVE
THE
PRIMARY
UNSUPERVISED
LEARNING
TASK
IS
EQUATION
FOR
THE
TRAINING
CRITERION
WHICH
IS
SIMULTANEOUSLY
THEN
SEEN
AS
MODELING
THE
STRUCTURE
OF
THE
DATA
SUPPORTING
OPTIMIZED
WITH
RESPECT
TO
HIDDEN
CODES
REPRESENTATION
HÐTÞ
MANIFOLD
THE
ASSOCIATED
REPRESENTATION
BEING
LEARNED
CAN
AND
WITH
RESPECT
TO
PARAMETERS
ÐW
Þ
BE
ASSOCIATED
WITH
AN
INTRINSIC
COORDINATE
SYSTEM
ON
THE
X
EMBEDDED
MANIFOLD
THE
ARCHETYPAL
MANIFOLD
MODELING
J
PSD
KHÐTÞ
Þ
KXÐTÞ
W
HÐTÞ
Þ
KHÐTÞ
F
ÐXÐTÞ
ALGORITHM
IS
NOT
SURPRISINGLY
ALSO
THE
ARCHETYPAL
LOW
T
DIMENSIONAL
REPRESENTATION
LEARNING
ALGORITHM
PCA
WHICH
MODELS
A
LINEAR
MANIFOLD
IT
WAS
INITIALLY
DEVISED
WITH
THE
OBJECTIVE
OF
FINDING
THE
CLOSEST
LINEAR
MANIFOLD
TO
A
CLOUD
OF
WHERE
XÐTÞ
IS
THE
INPUT
VECTOR
FOR
EXAMPLE
T
HÐTÞ
IS
THE
DATA
POINTS
THE
PRINCIPAL
COMPONENTS
I
E
THE
REPRESENTA
OPTIMIZED
HIDDEN
CODE
FOR
THAT
EXAMPLE
AND
F
Ð
Þ
IS
THE
TION
F
ÐXÞ
THAT
PCA
YIELDS
FOR
AN
INPUT
POINT
X
UNIQUELY
ENCODING
FUNCTION
THE
SIMPLEST
VARIANT
BEING
LOCATES
ITS
PROJECTION
ON
THAT
MANIFOLD
IT
CORRESPONDS
TO
F
ÐXÐTÞ
Þ
TANHÐB
Þ
W
T
XÐTÞ
Þ
INTRINSIC
COORDINATES
ON
THE
MANIFOLD
DATA
MANIFOLDS
FOR
COMPLEX
REAL
WORLD
DOMAINS
ARE
HOWEVER
EXPECTED
TO
BE
WHERE
ENCODING
WEIGHTS
ARE
THE
TRANSPOSE
OF
DECODING
STRONGLY
NONLINEAR
THEIR
MODELING
IS
SOMETIMES
APPROACHED
WEIGHTS
MANY
VARIANTS
HAVE
BEEN
PROPOSED
INCLUDING
THE
AS
PATCHWORKS
OF
LOCALLY
LINEAR
TANGENT
SPACES
USE
OF
A
SHRINKAGE
OPERATION
INSTEAD
OF
THE
HYPERBOLIC
THE
LARGE
MAJORITY
OF
ALGORITHMS
BUILT
ON
THIS
GEOMETRIC
TANGENT
NOTE
THAT
THE
PENALTY
ON
H
TENDS
TO
MAKE
PERSPECTIVE
ADOPT
A
NONPARAMETRIC
APPROACH
BASED
ON
A
THEM
SPARSE
AND
HOW
THIS
IS
THE
SAME
CRITERION
AS
SPARSE
TRAINING
SET
NEAREST
NEIGHBOR
GRAPH
CODING
WITH
DICTIONARY
LEARNING
EXCEPT
FOR
THE
ADDITIONAL
IN
THESE
NONPARAMETRIC
AP
CONSTRAINT
THAT
ONE
SHOULD
BE
ABLE
TO
APPROXIMATE
THE
PROACHES
EACH
HIGH
DIMENSIONAL
TRAINING
POINT
HAS
ITS
SPARSE
CODES
H
WITH
A
PARAMETERIZED
ENCODER
F
ÐXÞ
ONE
OWN
SET
OF
FREE
LOW
DIMENSIONAL
EMBEDDING
COORDINATES
CAN
THUS
VIEW
PSD
AS
AN
APPROXIMATION
TO
SPARSE
CODING
WHICH
ARE
OPTIMIZED
SO
THAT
CERTAIN
PROPERTIES
OF
THE
WHERE
WE
OBTAIN
A
FAST
APPROXIMATE
ENCODER
ONCE
PSD
IS
NEIGHBORHOOD
GRAPH
COMPUTED
IN
ORIGINAL
HIGH
DIMEN
TRAINED
OBJECT
REPRESENTATIONS
F
ÐXÞ
ARE
USED
TO
FEED
A
SIONAL
INPUT
SPACE
ARE
BEST
PRESERVED
THESE
METHODS
CLASSIFIER
THEY
ARE
COMPUTED
QUICKLY
AND
CAN
BE
FURTHER
HOWEVER
DO
NOT
DIRECTLY
LEARN
A
PARAMETERIZED
FEATURE
FINE
TUNED
THE
ENCODER
CAN
BE
VIEWED
AS
ONE
STAGE
OR
ONE
EXTRACTION
FUNCTION
F
ÐXÞ
APPLICABLE
TO
NEW
TEST
POINTS
LAYER
OF
A
TRAINABLE
MULTISTAGE
SYSTEM
SUCH
AS
A
FEEDFORWARD
WHICH
SERIOUSLY
LIMITS
THEIR
USE
AS
FEATURE
EXTRACTORS
EXCEPT
NEURAL
NETWORK
IN
A
TRANSDUCTIVE
SETTING
COMPARATIVELY
FEW
NONLINEAR
PSD
CAN
ALSO
BE
SEEN
AS
A
KIND
OF
AUTOENCODER
WHERE
THE
MANIFOLD
LEARNING
METHODS
HAVE
BEEN
PROPOSED
THAT
LEARN
A
CODES
H
ARE
GIVEN
SOME
FREEDOM
THAT
CAN
HELP
TO
FURTHER
PARAMETRIC
MAP
THAT
CAN
DIRECTLY
COMPUTE
A
REPRESENTATION
IMPROVE
RECONSTRUCTION
ONE
CAN
ALSO
VIEW
THE
ENCODING
FOR
NEW
POINTS
WE
WILL
FOCUS
ON
THESE
PENALTY
ADDED
ON
TOP
OF
SPARSE
CODING
AS
A
KIND
OF
REGULARIZER
THAT
FORCES
THE
SPARSE
CODES
TO
BE
NEARLY
ACTUALLY
DATA
POINTS
NEED
NOT
STRICTLY
LIE
ON
THE
MANIFOLD
BUT
THE
PROBABILITY
DENSITY
IS
EXPECTED
TO
FALL
OFF
SHARPLY
AS
ONE
MOVES
AWAY
FROM
IT
COMPUTABLE
BY
A
SMOOTH
AND
EFFICIENT
ENCODER
THIS
IS
IN
AND
IT
MAY
ACTUALLY
BE
CONSTITUTED
OF
SEVERAL
POSSIBLY
DISCONNECTED
CONTRAST
WITH
THE
CODES
OBTAINED
BY
COMPLETE
OPTIMIZATION
MANIFOLDS
WITH
DIFFERENT
INTRINSIC
DIMENSIONALITY
OF
THE
SPARSE
CODING
CRITERION
WHICH
ARE
HIGHLY
NONSMOOTH
FOR
SEVERAL
OF
THESE
TECHNIQUES
REPRESENTATIONS
FOR
NEW
POINTS
CAN
BE
COMPUTED
USING
THE
NYSTRO
M
APPROXIMATION
AS
HAS
BEEN
OR
EVEN
NONDIFFERENTIABLE
A
PROBLEM
THAT
MOTIVATED
OTHER
PROPOSED
AS
AN
EXTENSION
IN
BUT
THIS
REMAINS
CUMBERSOME
AND
APPROACHES
TO
SMOOTH
THE
INFERRED
CODES
OF
SPARSE
CODING
COMPUTATIONALLY
EXPENSIVE
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
LEARNING
A
PARAMETRIC
MAPPING
BASED
ON
A
TO
BE
STUCK
AT
UNTIL
A
SIGNIFICANT
DISPLACEMENT
HAS
TAKEN
NEIGHBORHOOD
GRAPH
PLACE
IN
INPUT
SPACE
SOME
OF
THE
ABOVE
NONPARAMETRIC
MANIFOLD
LEARNING
THE
LOCAL
COORDINATE
CODING
LCC
ALGORITHM
IS
VERY
ALGORITHMS
CAN
BE
MODIFIED
TO
LEARN
A
PARAMETRIC
MAPPING
SIMILAR
TO
SPARSE
CODING
BUT
IS
EXPLICITLY
DERIVED
FROM
A
F
I
E
APPLICABLE
TO
NEW
POINTS
INSTEAD
OF
HAVING
FREE
LOW
MANIFOLD
PERSPECTIVE
USING
THE
SAME
NOTATION
AS
THAT
OF
DIMENSIONAL
EMBEDDING
COORDINATE
PARAMETERS
FOR
EACH
P
ÐTÞIN
LCC
REPLACES
REGULARIZATION
TERM
SPARSE
CODING
TRAINING
POINT
THESE
COORDINATES
ARE
OBTAINED
THROUGH
AN
KHÐTÞ
J
JHJ
J
YIELDING
OBJECTIVE
EXPLICITLY
PARAMETERIZED
FUNCTION
AS
WITH
THE
PARAMETRIC
X
X
ÐTÞ
VARIANT
OF
T
SNE
J
LCC
KXÐTÞ
W
HÐTÞ
Þ
JHJ
JKW
J
XÐTÞ
INSTEAD
SEMI
SUPERVISED
EMBEDDING
LEARNS
A
DIRECT
T
J
ENCODING
WHILE
TAKING
INTO
ACCOUNT
THE
MANIFOLD
HYPOTHESIS
THROUGH
A
NEIGHBORHOOD
GRAPH
A
PARAMETERIZED
NEURAL
NETWORK
ARCHITECTURE
SIMULTANEOUSLY
LEARNS
A
MANIFOLD
THIS
IS
IDENTICAL
TO
SPARSE
CODING
WHEN
P
BUT
WITH
EMBEDDING
AND
A
CLASSIFIER
THE
TRAINING
CRITERION
ENCOURAGES
LARGER
P
IT
ENCOURAGES
THE
ACTIVE
ANCHOR
POINTS
FOR
XÐTÞ
I
E
THE
ÐTÞ
TRAINING
SET
NEIGBHORS
TO
HAVE
SIMILAR
REPRESENTATIONS
CODEBOOK
VECTORS
W
J
WITH
NONNEGLIGIBLE
JHJ
J
THAT
ARE
THE
REDUCED
AND
TIGHTLY
CONTROLLED
NUMBER
OF
FREE
COMBINED
TO
RECONSTRUCT
XÐTÞ
TO
BE
NOT
TOO
FAR
FROM
XÐTÞ
PARAMETERS
IN
SUCH
PARAMETRIC
METHODS
COMPARED
TO
THEIR
HENCE
THE
LOCAL
ASPECT
OF
THE
ALGORITHM
AN
IMPORTANT
PURE
NONPARAMETRIC
COUNTERPARTS
FORCES
MODELS
TO
GENERAL
THEORETICAL
CONTRIBUTION
OF
YU
ET
AL
IS
TO
SHOW
THAT
THAT
IZE
THE
MANIFOLD
SHAPE
NONLOCALLY
WHICH
CAN
TRANSLATE
ANY
LIPSCHITZ
SMOOTH
FUNCTION
M
IR
DEFINED
ON
A
INTO
BETTER
FEATURES
AND
FINAL
PERFORMANCE
HOWEVER
SMOOTH
NONLINEAR
MANIFOLD
M
EMBEDDED
IN
IRDX
CAN
BE
BASING
THE
MODELING
OF
MANIFOLDS
ON
TRAINING
SET
NEIGHBOR
WELL
APPROXIMATED
BY
A
GLOBALLY
LINEAR
FUNCTION
WITH
RESPECT
HOOD
RELATIONSHIPS
MIGHT
BE
RISKY
STATISTICALLY
IN
HIGH
TO
THE
RESULTING
CODING
SCHEME
I
E
LINEAR
IN
H
WHERE
THE
DIMENSIONAL
SPACES
SPARSELY
POPULATED
DUE
TO
THE
CURSE
OF
ACCURACY
OF
THE
APPROXIMATION
AND
REQUIRED
NUMBER
DH
OF
DIMENSIONALITY
AS
FOR
EXAMPLE
MOST
EUCLIDEAN
NEAREST
ANCHOR
POINTS
DEPEND
ON
DM
RATHER
THAN
DX
THIS
RESULT
HAS
NEIGHBORS
RISK
HAVING
TOO
LITTLE
IN
COMMON
SEMANTICALLY
BEEN
FURTHER
EXTENDED
WITH
THE
USE
OF
LOCAL
TANGENT
THE
NEAREST
NEIGHBOR
GRAPH
IS
SIMPLY
NOT
SUFFICIENTLY
DIRECTIONS
AS
WELL
AS
TO
MULTIPLE
LAYERS
DENSELY
POPULATED
TO
MAP
OUT
SATISFYINGLY
THE
WRINKLES
OF
LET
US
NOW
CONSIDER
THE
EFFICIENT
NONITERATIVE
FEEDFOR
THE
TARGET
MANIFOLD
IT
CAN
ALSO
BECOME
WARD
ENCODERS
F
USED
BY
PSD
AND
THE
AUTOENCODERS
REVIEWED
IN
SECTION
WHICH
ARE
IN
THE
FORM
OF
OR
PROBLEMATIC
COMPUTATIONALLY
TO
CONSIDER
ALL
PAIRS
OF
DATA
THE
COMPUTED
REPRESENTATION
FOR
X
WILL
ONLY
BE
SIGNIFICANTLY
POINTS
WHICH
SCALES
QUADRATICALLY
WITH
TRAINING
SET
SIZE
SENSITIVE
TO
INPUT
SPACE
DIRECTIONS
ASSOCIATED
WITH
NON
LEARNING
TO
REPRESENT
NONLINEAR
MANIFOLDS
SATURATED
HIDDEN
UNITS
SEE
E
G
FOR
THE
JACOBIAN
OF
A
CAN
WE
LEARN
A
MANIFOLD
WITHOUT
REQUIRING
NEAREST
SIGMOID
LAYER
THESE
DIRECTIONS
TO
WHICH
THE
REPRESENTATION
NEIGHBOR
SEARCHES
YES
FOR
EXAMPLE
WITH
REGULARIZED
IS
SIGNIFICANTLY
SENSITIVE
LIKE
IN
THE
CASE
OF
PCA
OR
SPARSE
AUTOENCODERS
OR
PCA
IN
PCA
THE
SENSITIVITY
OF
THE
CODING
MAY
BE
VIEWED
AS
SPANNING
THE
TANGENT
SPACE
OF
THE
EXTRACTED
COMPONENTS
THE
CODE
TO
INPUT
CHANGES
IS
THE
MANIFOLD
AT
POINT
X
SAME
REGARDLESS
OF
POSITION
X
THE
TANGENT
SPACE
IS
THE
SAME
RIFAI
ET
AL
EMPIRICALLY
ANALYZE
IN
THIS
LIGHT
THE
EVERYWHERE
ALONG
THE
LINEAR
MANIFOLD
BY
CONTRAST
FOR
A
SINGULAR
VALUE
SPECTRUM
OF
THE
JACOBIAN
DERIVATIVES
OF
NONLINEAR
MANIFOLD
THE
TANGENT
OF
THE
MANIFOLD
CHANGES
AS
REPRESENTATION
VECTOR
WITH
RESPECT
TO
INPUT
VECTOR
OF
A
WE
MOVE
ON
THE
MANIFOLD
AS
ILLUSTRATED
IN
FIG
IN
TRAINED
CAE
HERE
THE
SVD
PROVIDES
AN
ORDERED
ORTHO
NONLINEAR
REPRESENTATION
LEARNING
ALGORITHMS
IT
IS
CONVENI
NORMAL
BASIS
OF
MOST
SENSITIVE
DIRECTIONS
THE
SPECTRUM
IS
ENT
TO
THINK
ABOUT
THE
LOCAL
VARIATIONS
IN
THE
REPRESENTATION
AS
SHARPLY
DECREASING
INDICATING
A
RELATIVELY
SMALL
NUMBER
OF
THE
INPUT
X
IS
VARIED
ON
THE
MANIFOLD
I
E
AS
WE
MOVE
AMONG
SIGNIFICANTLY
SENSITIVE
DIRECTIONS
THIS
IS
TAKEN
AS
EMPIRICAL
HIGH
PROBABILITY
CONFIGURATIONS
AS
WE
DISCUSS
BELOW
THE
EVIDENCE
THAT
THE
CAE
INDEED
MODELED
THE
TANGENT
SPACE
OF
FIRST
DERIVATIVE
OF
THE
ENCODER
THEREFORE
SPECIFIES
THE
SHAPE
A
LOW
DIMENSIONAL
MANIFOLD
THE
LEADING
SINGULAR
VECTORS
OF
THE
MANIFOLD
ITS
TANGENT
PLANE
AROUND
AN
EXAMPLE
X
FORM
A
BASIS
FOR
THE
TANGENT
PLANE
OF
THE
ESTIMATED
LYING
ON
IT
IF
THE
DENSITY
WAS
REALLY
CONCENTRATED
ON
THE
MANIFOLD
AS
ILLUSTRATED
IN
FIG
THE
CAE
CRITERION
IS
MANIFOLD
AND
THE
ENCODER
HAD
CAPTURED
THAT
WE
WOULD
FIND
BELIEVED
TO
ACHIEVE
THIS
THANKS
TO
ITS
TWO
OPPOSING
TERMS
THE
ENCODER
DERIVATIVES
TO
BE
NONZERO
ONLY
IN
THE
DIRECTIONS
THE
ISOTROPIC
CONTRACTIVE
PENALTY
THAT
ENCOURAGES
THE
REPRESENTATION
TO
BE
EQUALLY
INSENSITIVE
TO
CHANGES
IN
ANY
SPANNED
BY
THE
TANGENT
PLANE
INPUT
DIRECTIONS
AND
THE
RECONSTRUCTION
TERM
THAT
PUSHES
LET
US
CONSIDER
SPARSE
CODING
IN
THIS
LIGHT
PARAMETER
DIFFERENT
TRAINING
POINTS
IN
PARTICULAR
NEIGHBORS
TO
HAVE
A
MATRIX
W
MAY
BE
INTERPRETED
AS
A
DICTIONARY
OF
INPUT
DIFFERENT
REPRESENTATION
SO
THEY
MAY
BE
RECONSTRUCTED
DIRECTIONS
FROM
WHICH
A
DIFFERENT
SUBSET
WILL
BE
PICKED
TO
ACCURATELY
THUS
COUNTERACTING
THE
ISOTROPIC
CONTRACTIVE
MODEL
THE
LOCAL
TANGENT
SPACE
AT
AN
X
ON
THE
MANIFOLD
THAT
PRESSURE
ONLY
IN
DIRECTIONS
TANGENT
TO
THE
MANIFOLD
SUBSET
CORRESPONDS
TO
THE
ACTIVE
I
E
NONZERO
FEATURES
FOR
ANALYZING
LEARNED
REPRESENTATIONS
THROUGH
THE
LENS
OF
INPUT
X
NONZERO
COMPONENT
HI
WILL
BE
SENSITIVE
TO
SMALL
THE
SPECTRUM
OF
THE
JACOBIAN
AND
RELATING
IT
TO
THE
NOTION
OF
CHANGES
OF
THE
INPUT
IN
THE
DIRECTION
OF
THE
ASSOCIATED
TANGENT
SPACE
OF
A
MANIFOLD
IS
FEASIBLE
WHENEVER
THE
WEIGHT
VECTOR
W
I
WHEREAS
INACTIVE
FEATURES
ARE
MORE
LIKELY
MAPPING
IS
DIFFERENTIABLE
AND
REGARDLESS
OF
HOW
IT
WAS
EVEN
IF
PAIRS
ARE
PICKED
STOCHASTICALLY
MANY
MUST
BE
CONSIDERED
LEARNED
WHETHER
AS
DIRECT
ENCODING
AS
IN
AUTOENCODER
BEFORE
OBTAINING
ONE
THAT
WEIGHS
SIGNIFICANTLY
ON
THE
OPTIMIZATION
OBJECTIVE
VARIANTS
OR
DERIVED
FROM
LATENT
VARIABLE
INFERENCE
AS
IN
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
P
ÐX
J
HÞ
OF
SPARSE
CODING
SECTION
WHICH
ONLY
ACCOUNTS
FOR
THE
DECODER
THE
ENCODER
IS
VIEWED
AS
AN
APPROXIMATE
INFERENCE
MECHANISM
TO
GUESS
P
ÐH
J
XÞ
AND
INITIALIZE
A
MAP
ITERATIVE
INFERENCE
WHERE
THE
SPARSE
PRIOR
P
ÐHÞ
IS
TAKEN
INTO
ACCOUNT
HOWEVER
IN
PSD
THE
ENCODER
IS
TRAINED
JOINTLY
WITH
THE
DECODER
RATHER
THAN
SIMPLY
TAKING
THE
END
RESULT
OF
ITERATIVE
INFERENCE
AS
A
TARGET
TO
APPROXIMATE
FIG
THE
TANGENT
VECTORS
TO
THE
HIGH
DENSITY
MANIFOLD
AS
ESTIMATED
BY
AN
INTERESTING
TO
RECONCILE
THESE
FACTS
IS
THAT
THE
A
CONTRACTIVE
AUTOENCODER
THE
ORIGINAL
INPUT
IS
SHOWN
ON
THE
TOP
ENCODER
IS
A
PARAMETRIC
APPROXIMATION
FOR
THE
MAP
SOLUTION
OF
A
LEFT
EACH
TANGENT
VECTOR
IMAGES
ON
RIGHT
SIDE
OF
FIRST
ROW
CORRESPONDS
VARIATIONAL
LOWER
BOUND
ON
THE
JOINT
LOG
LIKELIHOOD
WHEN
MAP
TO
A
PLAUSIBLE
ADDITIVE
DEFORMATION
OF
THE
ORIGINAL
INPUT
AS
ILLUSTRATED
ON
THE
SECOND
ROW
WHERE
A
BIT
OF
THE
THIRD
SINGULAR
VECTOR
IS
ADDED
TO
THE
LEARNING
IS
VIEWED
AS
A
SPECIAL
CASE
OF
VARIATIONAL
LEARNING
ORIGINAL
TO
FORM
A
TRANSLATED
AND
DEFORMED
IMAGE
UNLIKE
IN
PCA
THE
WHERE
THE
APPROXIMATION
OF
THE
JOINT
LOG
LIKELIHOOD
IS
TANGENT
VECTORS
ARE
DIFFERENT
FOR
DIFFERENT
INPUTS
BECAUSE
THE
ESTIMATED
WITH
A
DIRAC
DISTRIBUTION
LOCATED
AT
THE
MAP
SOLUTION
MANIFOLD
IS
HIGHLY
NONLINEAR
THE
VARIATIONAL
RECIPE
TELLS
US
TO
SIMULTANEOUSLY
IMPROVE
THE
LIKELIHOOD
REDUCE
RECONSTRUCTION
ERROR
AND
IMPROVE
THE
SPARSE
CODING
OR
RBMS
EXACT
LOW
DIMENSIONAL
MANIFOLD
VARIATIONAL
APPROXIMATION
REDUCE
THE
DISCREPANCY
BETWEEN
MODELS
LIKE
PCA
WOULD
YIELD
NONZERO
SINGULAR
VALUES
THE
ENCODER
OUTPUT
AND
THE
LATENT
VARIABLE
VALUE
HENCE
ASSOCIATED
TO
DIRECTIONS
ALONG
THE
MANIFOLD
AND
EXACT
ZEROS
PSD
SITS
AT
THE
INTERSECTION
OF
PROBABILISTIC
MODELS
WITH
FOR
DIRECTIONS
ORTHOGONAL
TO
THE
MANIFOLD
BUT
IN
SMOOTH
LATENT
VARIABLES
AND
DIRECT
ENCODING
METHODS
WHICH
MODELS
LIKE
THE
CAE
OR
THE
RBM
WE
WILL
INSTEAD
HAVE
LARGE
DIRECTLY
PARAMETERIZE
THE
MAPPING
FROM
INPUT
TO
REPRESEN
VERSUS
RELATIVELY
SMALL
SINGULAR
VALUES
AS
OPPOSED
TO
TATION
RBMS
ALSO
SIT
AT
THE
INTERSECTION
BECAUSE
THEIR
NONZERO
VERSUS
EXACTLY
ZERO
PARTICULAR
PARAMETERIZATION
INCLUDES
AN
EXPLICIT
MAPPING
LEVERAGING
THE
MODELED
TANGENT
SPACES
FROM
INPUT
TO
REPRESENTATION
THANKS
TO
THE
RESTRICTED
THE
LOCAL
TANGENT
SPACE
AT
A
POINT
ALONG
THE
MANIFOLD
CAN
CONNECTIVITY
BETWEEN
HIDDEN
UNITS
HOWEVER
THIS
NICE
BE
THOUGHT
OF
AS
CAPTURING
LOCALLY
VALID
TRANSFORMATIONS
PROPERTY
DOES
NOT
EXTEND
TO
THEIR
NATURAL
DEEP
GENERAL
THAT
WERE
PROMINENT
IN
THE
TRAINING
DATA
FOR
EXAMPLE
IZATIONS
I
E
DBMS
DISCUSSED
IN
SECTION
RIFAI
ET
AL
EXAMINE
THE
TANGENT
DIRECTIONS
EXTRACTED
REGULARIZED
AUTOENCODERS
CAPTURE
LOCAL
WITH
AN
SVD
OF
THE
JACOBIAN
OF
CAES
TRAINED
ON
DIGITS
STRUCTURE
OF
THE
DENSITY
IMAGES
OR
TEXT
DOCUMENT
DATA
THEY
APPEAR
TO
CORRESPOND
CAN
WE
ALSO
SAY
SOMETHING
ABOUT
THE
PROBABILISTIC
INTER
TO
SMALL
TRANSLATIONS
OR
ROTATIONS
FOR
IMAGES
OR
DIGITS
AND
PRETATION
OF
REGULARIZED
AUTOENCODERS
THEIR
TRAINING
TO
SUBSTITUTIONS
OF
WORDS
WITHIN
THE
SAME
THEME
FOR
CRITERION
DOES
NOT
FIT
THE
STANDARD
LIKELIHOOD
FRAMEWORK
DOCUMENTS
SUCH
VERY
LOCAL
TRANSFORMATIONS
ALONG
A
DATA
BECAUSE
THIS
WOULD
INVOLVE
A
DATA
DEPENDENT
PRIOR
AN
MANIFOLD
ARE
NOT
EXPECTED
TO
CHANGE
CLASS
IDENTITY
TO
INTERESTING
HYPOTHESIS
EMERGES
TO
ANSWER
THAT
QUESTION
OUT
BUILD
THEIR
MTC
RIFAI
ET
AL
THEN
APPLY
TECHNIQUES
OF
RECENT
THEORETICAL
RESULTS
THE
TRAINING
CRITERION
SUCH
AS
TANGENT
DISTANCE
AND
TANGENT
PROPAGATION
OF
REGULARIZED
AUTOENCODERS
INSTEAD
OF
BEING
A
FORM
OF
WHICH
WERE
INITIALLY
DEVELOPED
TO
BUILD
CLASSIFIERS
THAT
ARE
MAXIMUM
LIKELIHOOD
CORRESPONDS
TO
A
DIFFERENT
INDUCTIVE
INSENSITIVE
TO
INPUT
DEFORMATIONS
PROVIDED
AS
PRIOR
PRINCIPLE
SUCH
AS
SCORE
MATCHING
THE
SCORE
MATCHING
DOMAIN
KNOWLEDGE
NOW
THESE
TECHNIQUES
ARE
APPLIED
CONNECTION
IS
DISCUSSED
IN
SECTION
AND
HAS
BEEN
SHOWN
USING
THE
LOCAL
LEADING
TANGENT
DIRECTIONS
EXTRACTED
BY
A
FOR
A
PARTICULAR
PARAMETRIZATION
OF
DAE
AND
EQUIVALENT
CAE
I
E
NOT
USING
ANY
PRIOR
DOMAIN
KNOWLEDGE
EXCEPT
GRBM
THE
WORK
IN
GENERALIZES
THIS
IDEA
TO
A
THE
BROAD
PRIOR
ABOUT
THE
EXISTENCE
OF
A
MANIFOLD
THIS
BROADER
CLASS
OF
PARAMETERIZATIONS
ARBITRARY
ENCODERS
AND
APPROACH
SET
A
NEW
RECORD
FOR
MNIST
DIGIT
CLASSIFICATION
DECODERS
AND
SHOWS
THAT
BY
REGULARIZING
THE
AUTOENCODER
AMONG
PRIOR
KNOWLEDGE
FREE
APPROACHES
SO
THAT
IT
BE
CONTRACTIVE
ONE
OBTAINS
THAT
THE
RECONSTRUCTION
FUNCTION
AND
ITS
DERIVATIVE
ESTIMATE
FIRST
AND
SECOND
DERIVATIVES
CONNECTIONS
BETWEEN
PROBABILISTIC
AND
OF
THE
UNDERLYING
DATA
GENERATIVE
DENSITY
THIS
VIEW
CAN
BE
DIRECT
ENCODING
MODELS
EXPLOITED
TO
SUCCESSFULLY
SAMPLE
FROM
AUTOENCODERS
AS
SHOWN
IN
THE
PROPOSED
SAMPLING
ALGORITHMS
THE
STANDARD
LIKELIHOOD
FRAMEWORK
FOR
PROBABILISTIC
MODELS
ARE
MCMCS
SIMILAR
TO
LANGEVIN
MCMC
USING
NOT
JUST
THE
DECOMPOSES
THE
TRAINING
CRITERION
FOR
MODELS
WITH
PARA
ESTIMATED
FIRST
DERIVATIVE
OF
THE
DENSITY
BUT
ALSO
THE
METERS
IN
TWO
PARTS
THE
LOG
LIKELIHOOD
LOG
P
ÐX
J
Þ
OR
ESTIMATED
MANIFOLD
TANGENTS
SO
AS
TO
STAY
CLOSE
TO
MANIFOLDS
LOG
P
ÐX
J
H
Þ
WITH
LATENT
VARIABLES
H
AND
THE
PRIOR
LOG
P
Ð
Þ
OF
HIGH
DENSITY
OR
LOG
P
ÐH
J
Þ
Þ
LOG
P
Ð
Þ
WITH
LATENT
VARIABLES
THIS
INTERPRETATION
CONNECTS
WELL
WITH
THE
GEOMETRIC
PSD
A
PROBABILISTIC
INTERPRETATION
PERSPECTIVE
INTRODUCED
IN
SECTION
THE
REGULARIZATION
IN
THE
CASE
OF
THE
PSD
ALGORITHM
A
CONNECTION
CAN
BE
MADE
EFFECTS
E
G
DUE
TO
A
SPARSITY
REGULARIZER
A
CONTRACTIVE
BETWEEN
THE
ABOVE
STANDARD
PROBABILISTIC
VIEW
AND
THE
REGULARIZER
OR
THE
DENOISING
CRITERION
ASK
THE
LEARNED
DIRECT
ENCODING
COMPUTATION
GRAPH
THE
PROBABILISTIC
REPRESENTATION
TO
BE
AS
INSENSITIVE
AS
POSSIBLE
TO
THE
INPUT
MODEL
OF
PSD
IS
THE
SAME
DIRECTED
GENERATIVE
MODEL
WHILE
MINIMIZING
RECONSTRUCTION
ERROR
ON
THE
TRAINING
EXAMPLES
FORCES
THE
REPRESENTATION
TO
CONTAIN
JUST
ENOUGH
IT
YIELDED
PERCENT
ERROR
RATE
USING
THE
FULL
MNIST
TRAINING
SET
WITH
NO
PRIOR
DEFORMATIONS
AND
NO
CONVOLUTION
SUGGESTED
BY
IAN
GOODFELLOW
PERSONAL
COMMUNICATION
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
FIG
TOP
EARLY
DURING
TRAINING
MCMC
MIXES
EASILY
BETWEEN
MODES
BECAUSE
THE
ESTIMATED
DISTRIBUTION
HAS
HIGH
ENTROPY
AND
PUTS
ENOUGH
MASS
EVERYWHERE
FOR
SMALL
STEPS
MOVEMENTS
MCMC
TO
GO
FROM
MODE
TO
MODE
BOTTOM
LATER
ON
TRAINING
RELYING
ON
GOOD
MIXING
CAN
STALL
BECAUSE
ESTIMATED
MODES
ARE
SEPARATED
BY
WIDE
LOW
DENSITY
DESERTS
LEADING
SINGULAR
VECTORS
OF
THE
RECONSTRUCTION
OR
ENCODER
FIG
RECONSTRUCTION
FUNCTION
RÐXÞ
GREEN
LEARNED
BY
A
HIGH
CAPACITY
JACOBIAN
CORRESPONDING
TO
THOSE
ASSOCIATED
WITH
SMALLEST
AUTOENCODER
ON
INPUT
MINIMIZING
RECONSTRUCTION
ERROR
AT
TRAINING
EXAMPLES
XÐTÞ
RÐXÐTÞ
Þ
IN
RED
WHILE
TRYING
TO
BE
AS
CONSTANT
AS
POSSIBLE
SECOND
DERIVATIVE
OF
THE
LOG
DENSITY
OTHERWISE
THE
DOTTED
LINE
IS
THE
IDENTITY
RECONSTRUCTION
WHICH
MIGHT
BE
OBTAINED
WITHOUT
THE
REGULARIZER
THE
BLUE
ARROWS
SHOW
THE
VECTOR
FIELD
LEARNING
APPROXIMATE
INFERENCE
OF
RÐXÞ
X
POINTING
TOWARD
HIGH
DENSITY
PEAKS
ESTIMATED
BY
THE
MODEL
LET
US
NOW
CONSIDER
FROM
CLOSER
HOW
A
REPRESENTATION
IS
AND
ESTIMATING
THE
SCORE
LOG
DENSITY
DERIVATIVE
COMPUTED
IN
PROBABILISTIC
MODELS
WITH
LATENT
VARIABLES
WHEN
ITERATIVE
INFERENCE
IS
REQUIRED
THERE
IS
A
COMPUTATION
INFORMATION
TO
DISTINGUISH
THEM
THE
SOLUTION
IS
THAT
GRAPH
POSSIBLY
WITH
RANDOM
NUMBER
GENERATION
IN
SOME
OF
VARIATIONS
ALONG
THE
HIGH
DENSITY
MANIFOLDS
ARE
PRESERVED
THE
NODES
IN
THE
CASE
OF
MCMC
THAT
MAPS
INPUTS
TO
WHILE
OTHER
VARIATIONS
ARE
COMPRESSED
THE
RECONSTRUCTION
REPRESENTATION
AND
IN
THE
CASE
OF
DETERMINISTIC
INFERENCE
FUNCTION
SHOULD
BE
AS
CONSTANT
AS
POSSIBLE
WHILE
REPRODU
E
G
MAP
INFERENCE
OR
VARIATIONAL
INFERENCE
THAT
FUNCTION
CING
TRAINING
EXAMPLES
I
E
POINTS
NEAR
A
TRAINING
EXAMPLE
COULD
BE
OPTIMIZED
DIRECTLY
THIS
IS
A
WAY
TO
GENERALIZE
PSD
SHOULD
BE
MAPPED
TO
THAT
TRAINING
EXAMPLE
FIG
THE
THAT
HAS
BEEN
EXPLORED
IN
RECENT
WORK
ON
PROBABILISTIC
RECONSTRUCTION
FUNCTION
SHOULD
MAP
AN
INPUT
TOWARD
THE
MODELS
AT
THE
INTERSECTION
OF
INFERENCE
AND
LEARNING
NEAREST
POINT
MANIFOLD
I
E
THE
DIFFERENCE
BETWEEN
WHERE
A
CENTRAL
IDEA
IS
THAT
INSTEAD
OF
RECONSTRUCTION
AND
INPUT
IS
A
VECTOR
ALIGNED
WITH
THE
USING
A
GENERIC
INFERENCE
MECHANISM
ONE
CAN
USE
ONE
THAT
IS
ESTIMATED
SCORE
THE
DERIVATIVE
OF
THE
LOG
DENSITY
WITH
LEARNED
AND
IS
MORE
EFFICIENT
TAKING
ADVANTAGE
OF
THE
RESPECT
TO
THE
INPUT
THE
SCORE
CAN
BE
ZERO
ON
THE
SPECIFICS
OF
THE
TYPE
OF
DATA
ON
WHICH
IT
IS
APPLIED
MANIFOLD
WHERE
RECONSTRUCTION
ERROR
IS
ALSO
ZERO
AT
LOCAL
MAXIMA
OF
THE
LOG
DENSITY
BUT
IT
CAN
ALSO
BE
ZERO
AT
LOCAL
SAMPLING
CHALLENGES
MINIMA
IT
MEANS
THAT
WE
CANNOT
EQUATE
LOW
RECONSTRUCTION
A
TROUBLING
CHALLENGE
WITH
MANY
PROBABILISTIC
MODELS
WITH
ERROR
WITH
HIGH
ESTIMATED
PROBABILITY
THE
SECOND
DERIVA
LATENT
VARIABLES
LIKE
MOST
BOLTZMANN
MACHINE
VARIANTS
IS
TIVES
OF
THE
LOG
DENSITY
CORRESPOND
TO
THE
FIRST
DERIVATIVES
THAT
GOOD
MCMC
SAMPLING
IS
REQUIRED
AS
PART
OF
THE
OF
THE
RECONSTRUCTION
FUNCTION
AND
ON
THE
MANIFOLD
WHERE
LEARNING
PROCEDURE
BUT
THAT
SAMPLING
BECOMES
EXTREMELY
THE
FIRST
DERIVATIVE
IS
THEY
INDICATE
THE
TANGENT
DIRECTIONS
INEFFICIENT
OR
UNRELIABLE
AS
TRAINING
PROGRESSES
BECAUSE
THE
OF
THE
MANIFOLD
WHERE
THE
FIRST
DERIVATIVE
REMAINS
NEAR
MODES
OF
THE
LEARNED
DISTRIBUTION
BECOME
SHARPER
MAKING
AS
ILLUSTRATED
IN
FIG
THE
BASIC
IDEA
OF
THE
AUTO
MIXING
BETWEEN
MODES
VERY
SLOW
WHEREAS
INITIALLY
DURING
ENCODER
SAMPLING
ALGORITHMS
IN
IS
TO
MAKE
TRAINING
A
LEARNER
ASSIGNS
MASS
ALMOST
UNIFORMLY
AS
MCMC
MOVES
WHERE
ONE
MOVES
TOWARD
THE
MANIFOLD
TRAINING
PROGRESSE
ITS
ENTROPY
DECREASES
APPROACHING
THE
BY
FOLLOWING
THE
DENSITY
GRADIENT
I
E
APPLYING
A
ENTROPY
OF
THE
TARGET
DISTRIBUTION
AS
MORE
EXAMPLES
AND
RECONSTRUCTION
AND
ADDS
NOISE
IN
THE
DIRECTIONS
OF
THE
MORE
COMPUTATION
ARE
PROVIDED
ACCORDING
TO
OUR
MANIFOLD
AND
NATURAL
CLUSTERING
PRIORS
OF
SECTION
THE
TARGET
DISTRIBUTION
HAS
SHARP
MODES
MANIFOLDS
SEPARATED
BY
EXTREMELY
LOW
DENSITY
AREAS
MIXING
THEN
BECOMES
MORE
DIFFICULT
BECAUSE
MCMC
METHODS
BY
THEIR
VERY
NATURE
TEND
TO
MAKE
SMALL
STEPS
TO
NEARBY
HIGH
PROBABILITY
CONFIGURATIONS
THIS
IS
ILLUSTRATED
IN
FIG
BENGIO
ET
AL
SUGGEST
THAT
DEEP
REPRESENTATIONS
COULD
HELP
MIXING
BETWEEN
SUCH
WELL
SEPARATED
MODES
BASED
ON
BOTH
THEORETICAL
ARGUMENTS
AND
ON
EMPIRICAL
EVIDENCE
THE
IDEA
IS
THAT
IF
HIGHER
LEVEL
REPRESENTATIONS
DISENTANGLE
THE
UNDERLYING
ABSTRACT
FACTORS
BETTER
THEN
FIG
SAMPLING
FROM
REGULARIZED
AUTOENCODERS
EACH
MCMC
SMALL
STEPS
IN
THIS
ABSTRACT
SPACE
E
G
SWAPPING
FROM
STEP
ADDS
TO
CURRENT
STATE
X
THE
NOISE
MOSTLY
IN
THE
DIRECTION
OF
THE
ESTIMATED
MANIFOLD
TANGENT
PLANE
H
AND
PROJECTS
BACK
TOWARD
THE
ONE
CATEGORY
TO
ANOTHER
CAN
EASILY
BE
DONE
BY
MCMC
MANIFOLD
HIGH
DENSITY
REGIONS
BY
PERFORMING
A
RECONSTRUCTION
STEP
THE
HIGH
LEVEL
REPRESENTATIONS
CAN
THEN
BE
MAPPED
BACK
TO
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
THE
INPUT
SPACE
TO
OBTAIN
INPUT
LEVEL
SAMPLES
AS
IN
THE
GLOBAL
TRAINING
OF
DEEP
MODELS
DBNS
SAMPLING
ALGORITHM
THIS
HAS
BEEN
DEMON
ONE
OF
THE
MOST
INTERESTING
CHALLENGES
RAISED
BY
DEEP
STRATED
BOTH
WITH
DBNS
AND
WITH
THE
NEWLY
PROPOSED
ARCHITECTURES
IS
HOW
SHOULD
WE
JOINTLY
TRAIN
ALL
THE
LEVELS
IN
ALGORITHM
FOR
SAMPLING
FROM
CONTRACTING
AND
DAES
THE
PREVIOUS
SECTION
AND
IN
SECTION
WE
HAVE
ONLY
THIS
OBSERVATION
ALONE
DOES
NOT
SUFFICE
TO
SOLVE
THE
DISCUSSED
HOW
SINGLE
LAYER
MODELS
COULD
BE
COMBINED
TO
PROBLEM
OF
TRAINING
A
DBN
OR
A
DBM
BUT
IT
MAY
PROVIDE
A
FORM
A
DEEP
MODEL
HERE
WE
CONSIDER
JOINT
TRAINING
OF
ALL
CRUCIAL
INGREDIENT
AND
IT
MAKES
IT
POSSIBLE
TO
CONSIDER
THE
LEVELS
AND
THE
DIFFICULTIES
THAT
MAY
ARISE
SUCCESSFULLY
SAMPLING
FROM
DEEP
MODELS
TRAINED
BY
PROCEDURES
THAT
DO
NOT
REQUIRE
AN
MCMC
LIKE
THE
STACKED
THE
CHALLENGE
OF
TRAINING
DEEP
ARCHITECTURES
REGULARIZED
AUTOENCODERS
USED
IN
HIGHER
LEVEL
ABSTRACTION
MEANS
MORE
NONLINEARITY
IT
MEANS
EVALUATING
AND
MONITORING
PERFORMANCE
THAT
TWO
NEARBY
INPUT
CONFIGURATIONS
MAY
BE
INTERPRETED
VERY
DIFFERENTLY
BECAUSE
A
FEW
SURFACE
DETAILS
CHANGE
THE
IT
IS
ALWAYS
POSSIBLE
TO
EVALUATE
A
FEATURE
LEARNING
UNDERLYING
SEMANTICS
WHEREAS
MOST
OTHER
CHANGES
IN
THE
ALGORITHM
IN
TERMS
OF
ITS
USEFULNESS
WITH
RESPECT
TO
A
SURFACE
DETAILS
WOULD
NOT
CHANGE
THE
UNDERLYING
SEMANTICS
PARTICULAR
TASK
E
G
OBJECT
CLASSIFICATION
WITH
A
PREDICTOR
THAT
IS
FED
OR
INITIALIZED
WITH
THE
LEARNED
FEATURES
IN
THE
REPRESENTATIONS
ASSOCIATED
WITH
INPUT
MANIFOLDS
MAY
PRACTICE
WE
DO
THIS
BY
SAVING
THE
FEATURES
LEARNED
E
G
AT
BE
COMPLEX
BECAUSE
THE
MAPPING
FROM
INPUT
TO
REPRESENTA
REGULAR
INTERVALS
DURING
TRAINING
TO
PERFORM
EARLY
STOP
TION
MAY
HAVE
TO
UNFOLD
AND
DISTORT
INPUT
MANIFOLDS
THAT
PING
AND
TRAINING
A
CHEAP
CLASSIFIER
ON
TOP
SUCH
AS
A
LINEAR
GENERALLY
HAVE
COMPLICATED
SHAPES
INTO
SPACES
WHERE
CLASSIFIER
HOWEVER
TRAINING
THE
FINAL
CLASSIFIER
CAN
BE
A
DISTRIBUTIONS
ARE
MUCH
SIMPLER
WHERE
RELATIONS
BETWEEN
SUBSTANTIAL
COMPUTATIONAL
OVERHEAD
E
G
SUPERVISED
FINE
FACTORS
ARE
SIMPLER
MAYBE
EVEN
LINEAR
OR
INVOLVING
MANY
TUNING
A
DEEP
NEURAL
NETWORK
USUALLY
TAKES
MORE
TRAINING
CONDITIONAL
INDEPENDENCIES
OUR
EXPECTATION
IS
THAT
ITERATIONS
THAN
THE
FEATURE
LEARNING
ITSELF
SO
WE
MAY
WANT
MODELING
THE
JOINT
DISTRIBUTION
BETWEEN
HIGH
LEVEL
ABSTRAC
TO
AVOID
HAVING
TO
TRAIN
A
CLASSIFIER
FOR
EVERY
TRAINING
TIONS
AND
CONCEPTS
SHOULD
BE
MUCH
EASIER
IN
THE
SENSE
OF
ITERATION
OF
THE
UNSUPERVISED
LEARNER
AND
EVERY
HYPERPARA
REQUIRING
MUCH
LESS
DATA
TO
LEARN
THE
HARD
PART
IS
LEARNING
METER
SETTING
MORE
IMPORTANTLY
THIS
MAY
GIVE
AN
INCOM
A
GOOD
REPRESENTATION
THAT
DOES
THIS
UNFOLDING
AND
PLETE
EVALUATION
OF
THE
FEATURES
WHAT
WOULD
HAPPEN
FOR
DISENTANGLING
THIS
MAY
BE
AT
THE
PRICE
OF
A
MORE
DIFFICULT
OTHER
TASKS
ALL
THESE
ISSUES
MOTIVATE
THE
USE
OF
METHODS
TRAINING
PROBLEM
POSSIBLY
INVOLVING
ILL
CONDITIONING
AND
TO
MONITOR
AND
EVALUATE
PURELY
UNSUPERVISED
PERFORMANCE
LOCAL
MINIMA
THIS
IS
RATHER
EASY
WITH
ALL
THE
AUTOENCODER
VARIANTS
WITH
IT
IS
ONLY
SINCE
THAT
RESEARCHERS
HAVE
SERIOUSLY
SOME
CAUTION
OUTLINED
BELOW
AND
RATHER
DIFFICULT
WITH
THE
INVESTIGATED
WAYS
TO
TRAIN
DEEP
ARCHITECTURES
TO
THE
EXCEP
UNDIRECTED
GRAPHICAL
MODELS
SUCH
AS
THE
RBM
AND
TION
OF
THE
CONVOLUTIONAL
NETWORKS
THE
FIRST
REALIZATION
BOLTZMANN
MACHINES
SECTION
WAS
THAT
UNSUPERVISED
OR
SUPERVISED
LAYERWISE
FOR
AUTOENCODER
AND
SPARSE
CODING
VARIANTS
TEST
SET
TRAINING
WAS
EASIER
AND
THAT
THIS
COULD
BE
TAKEN
ADVANTAGE
OF
RECONSTRUCTION
ERROR
CAN
BE
READILY
COMPUTED
BUT
BY
ITSELF
BY
STACKING
SINGLE
LAYER
MODELS
INTO
DEEPER
ONES
MAY
BE
MISLEADING
BECAUSE
LARGER
CAPACITY
E
G
MORE
IT
IS
INTERESTING
TO
ASK
WHY
DOES
THE
LAYERWISE
UNSUPERVISED
FEATURES
MORE
TRAINING
TIME
TENDS
TO
SYSTEMATICALLY
LEAD
PRETRAINING
PROCEDURE
SOMETIMES
HELP
A
SUPERVISED
LEARNER
TO
LOWER
RECONSTRUCTION
ERROR
EVEN
ON
THE
TEST
SET
HENCE
IT
THERE
SEEMS
TO
BE
A
MORE
GENERAL
PRINCIPLE
AT
OF
CANNOT
BE
USED
RELIABLY
FOR
SELECTING
MOST
HYPERPARAMETERS
GUIDING
THE
TRAINING
OF
INTERMEDIATE
REPRESENTATIONS
WHICH
MAY
ON
THE
OTHER
HAND
DENOISING
RECONSTRUCTION
ERROR
IS
CLEARLY
BE
EASIER
THAN
TRYING
TO
LEARN
IT
ALL
IN
ONE
GO
THIS
IS
NICELY
IMMUNE
TO
THIS
PROBLEM
SO
THAT
SOLVES
THE
PROBLEM
FOR
RELATED
TO
THE
CURRICULUM
LEARNING
IDEA
THAT
IT
MAY
BE
DAES
BASED
ON
THE
CONNECTION
BETWEEN
DAES
AND
CAES
MUCH
EASIER
TO
LEARN
SIMPLER
CONCEPTS
FIRST
AND
THEN
BUILD
UNCOVERED
IN
THIS
IMMUNITY
CAN
BE
EXTENDED
TO
HIGHER
LEVEL
ONES
ON
TOP
OF
SIMPLER
ONES
THIS
IS
ALSO
DAES
BUT
NOT
TO
THE
HYPERPARAMETER
CONTROLLING
THE
COHERENT
WITH
THE
SUCCESS
OF
SEVERAL
DEEP
LEARNING
ALGO
AMOUNT
OF
NOISE
OR
OF
CONTRACTION
RITHMS
THAT
PROVIDE
SOME
SUCH
GUIDANCE
FOR
INTERMEDIATE
FOR
RBMS
AND
SOME
NOT
TOO
DEEP
BOLTZMANN
MA
REPRESENTATIONS
LIKE
SEMI
SUPERVISED
EMBEDDING
CHINES
ONE
OPTION
IS
THE
USE
OF
ANNEALED
IMPORTANCE
THE
QUESTION
OF
WHY
UNSUPERVISED
PRETRAINING
COULD
BE
SAMPLING
TO
ESTIMATE
THE
PARTITION
FUNCTION
AND
THUS
HELPFUL
WAS
EXTENSIVELY
STUDIED
TRYING
TO
DISSECT
THE
THE
TEST
LOG
LIKELIHOOD
NOTE
THAT
THIS
ESTIMATOR
CAN
HAVE
ANSWER
INTO
A
REGULARIZATION
EFFECT
AND
AN
OPTIMIZATION
EFFECT
HIGH
VARIANCE
AND
THAT
IT
BECOMES
LESS
RELIABLE
VARIANCE
THE
REGULARIZATION
EFFECT
IS
CLEAR
FROM
THE
EXPERIMENTS
BECOMES
TOO
LARGE
AS
THE
MODEL
BECOMES
MORE
INTERESTING
WHERE
THE
STACKED
RBMS
OR
DAES
ARE
USED
TO
INITIALIZE
A
WITH
LARGER
WEIGHTS
MORE
NONLINEARITY
SHARPER
MODES
AND
SUPERVISED
CLASSIFICATION
NEURAL
NETWORK
IT
MAY
SIMPLY
A
SHARPER
PROBABILITY
DENSITY
FUNCTION
SEE
OUR
PREVIOUS
COME
FROM
THE
USE
OF
UNSUPERVISED
LEARNING
TO
BIAS
THE
DISCUSSION
IN
SECTION
ANOTHER
INTERESTING
AND
RECENTLY
LEARNING
DYNAMICS
AND
INITIALIZE
IT
IN
THE
BASIN
OF
ATTRACTION
OF
PROPOSED
OPTION
FOR
RBMS
IS
TO
TRACK
THE
PARTITION
FUNCTION
A
GOOD
LOCAL
MINIMUM
OF
THE
TRAINING
CRITERION
WHERE
DURING
TRAINING
WHICH
COULD
BE
USEFUL
FOR
EARLY
GOOD
IS
IN
TERMS
OF
GENERALIZATION
ERROR
THE
UNDERLYING
STOPPING
AND
REDUCING
THE
COST
OF
ORDINARY
AIS
FOR
TOY
HYPOTHESIS
EXPLOITED
BY
THIS
PROCEDURE
IS
THAT
SOME
OF
THE
RBMS
E
G
HIDDEN
UNITS
OR
LESS
OR
INPUTS
OR
LESS
FEATURES
OR
LATENT
FACTORS
THAT
ARE
GOOD
AT
CAPTURING
THE
THE
EXACT
LOG
LIKELIHOOD
CAN
ALSO
BE
COMPUTED
ANALYTICALLY
LEADING
VARIATIONS
IN
THE
INPUT
DISTRIBUTION
ARE
ALSO
GOOD
AT
AND
THIS
CAN
BE
A
GOOD
WAY
TO
DEBUG
AND
VERIFY
SOME
PROPERTIES
OF
INTEREST
FIRST
SUGGESTED
TO
US
BY
LEON
BOTTOU
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
CAPTURING
THE
VARIATIONS
IN
THE
TARGET
OUTPUT
RANDOM
NEURAL
NETWORK
TRAINING
IS
TO
NULLIFY
THE
AVERAGE
VALUE
AND
VARIABLES
OF
INTEREST
E
G
CLASSES
THE
OPTIMIZATION
EFFECT
SLOPE
OF
EACH
HIDDEN
UNIT
OUTPUT
AND
POSSIBLY
LOCALLY
IS
MORE
DIFFICULT
TO
TEASE
OUT
BECAUSE
THE
TOP
TWO
LAYERS
OF
A
NORMALIZE
MAGNITUDE
AS
WELL
THE
DEBATE
STILL
RAGES
DEEP
NEURAL
NET
CAN
JUST
OVERFIT
THE
TRAINING
SET
WHETHER
THE
BETWEEN
USING
ONLINE
METHODS
SUCH
AS
STOCHASTIC
GRADIENT
LOWER
LAYERS
COMPUTE
USEFUL
FEATURES
OR
NOT
BUT
THERE
ARE
DESCENT
AND
USING
SECOND
ORDER
METHODS
ON
LARGE
MINI
SEVERAL
INDICATIONS
THAT
OPTIMIZING
THE
LOWER
LEVELS
WITH
BATCHES
OF
SEVERAL
THOUSAND
EXAMPLES
WITH
A
RESPECT
TO
A
SUPERVISED
TRAINING
CRITERION
CAN
BE
CHALLENGING
VARIANT
OF
STOCHASTIC
GRADIENT
DESCENT
RECENTLY
WINNING
AN
ONE
SUCH
INDICATION
IS
THAT
CHANGING
THE
NUMERICAL
OPTIMIZATION
CHALLENGE
CONDITIONS
OF
THE
OPTIMIZATION
PROCEDURE
CAN
HAVE
A
FINALLY
SEVERAL
RECENT
RESULTS
EXPLOITING
LARGE
QUANTITIES
OF
PROFOUND
IMPACT
ON
THE
JOINT
TRAINING
OF
A
DEEP
ARCHITEC
LABELED
DATA
SUGGEST
THAT
WITH
PROPER
INITIALIZATION
AND
TURE
FOR
EXAMPLE
BY
CHANGING
THE
INITIALIZATION
RANGE
AND
CHOICE
OF
NONLINEARITY
VERY
DEEP
PURELY
SUPERVISED
NET
CHANGING
THE
TYPE
OF
NONLINEARITY
USED
MUCH
MORE
SO
WORKS
CAN
BE
TRAINED
SUCCESSFULLY
WITHOUT
ANY
LAYERWISE
THAN
WITH
SHALLOW
ARCHITECTURES
ONE
HYPOTHESIS
TO
EXPLAIN
PRETRAINING
RESEARCHERS
REPORT
THAT
IN
SOME
OF
THE
DIFFICULTY
IN
THE
OPTIMIZATION
OF
DEEP
SUCH
CONDITIONS
LAYERWISE
UNSUPERVISED
PRETRAINING
ARCHITECTURES
IS
CENTERED
ON
THE
SINGULAR
VALUES
OF
THE
BROUGHT
LITTLE
OR
NO
IMPROVEMENT
OVER
PURE
SUPERVISED
JACOBIAN
MATRIX
ASSOCIATED
WITH
THE
TRANSFORMATION
FROM
THE
LEARNING
FROM
SCRATCH
WHEN
TRAINING
FOR
LONG
ENOUGH
THIS
FEATURES
AT
ONE
LEVEL
INTO
THE
FEATURES
AT
THE
NEXT
LEVEL
IF
REINFORCES
THE
HYPOTHESIS
THAT
UNSUPERVISED
PRETRAINING
ACTS
THESE
SINGULAR
VALUES
ARE
ALL
SMALL
LESS
THAN
THEN
THE
AS
A
PRIOR
WHICH
MAY
BE
LESS
NECESSARY
WHEN
VERY
LARGE
MAPPING
IS
CONTRACTIVE
IN
EVERY
DIRECTION
AND
GRADIENTS
QUANTITIES
OF
LABELED
DATA
ARE
AVAILABLE
BUT
WHICH
BEGS
WOULD
VANISH
WHEN
PROPAGATED
BACKWARD
THROUGH
MANY
THE
QUESTION
OF
WHY
THIS
HAD
NOT
BEEN
DISCOVERED
EARLIER
LAYERS
THIS
IS
A
PROBLEM
ALREADY
DISCUSSED
FOR
RECURRENT
THE
LATEST
RESULTS
REPORTED
IN
THIS
RESPECT
ARE
NEURAL
NETWORKS
WHICH
CAN
BE
SEEN
AS
VERY
DEEP
PARTICULARLY
INTERESTING
BECAUSE
THEY
ALLOWED
DRASTICALLY
NETWORKS
WITH
SHARED
PARAMETERS
AT
EACH
LAYER
WHEN
REDUCING
THE
ERROR
RATE
OF
OBJECT
RECOGNITION
ON
A
BENCHMARK
UNFOLDED
IN
TIME
THIS
OPTIMIZATION
DIFFICULTY
HAS
MOTI
THE
CLASS
IMAGENET
TASK
WHERE
MANY
MORE
TRADI
VATED
THE
EXPLORATION
OF
SECOND
ORDER
METHODS
FOR
DEEP
TIONAL
COMPUTER
VISION
APPROACHES
HAD
BEEN
EVALUATED
ARCHITECTURES
AND
RECURRENT
NETWORKS
IN
PARTICULAR
HESSIAN
HTTP
WWW
IMAGE
NET
ORG
CHALLENGES
LSVRC
FREE
SECOND
ORDER
METHODS
UNSUPERVISED
RESULTS
HTML
THE
MAIN
TECHNIQUES
THAT
ALLOWED
THIS
SUCCESS
PRETRAINING
HAS
ALSO
BEEN
PROPOSED
TO
HELP
TRAINING
INCLUDE
THE
FOLLOWING
EFFICIENT
GPU
TRAINING
ALLOWING
ONE
TO
RECURRENT
NETWORKS
AND
TEMPORAL
RBMS
I
E
AT
EACH
TRAIN
LONGER
MORE
THAN
MILLION
VISITS
OF
EXAMPLES
AN
TIME
STEP
THERE
IS
A
LOCAL
SIGNAL
TO
GUIDE
THE
DISCOVERY
OF
ASPECT
FIRST
REPORTED
BY
LEE
ET
AL
AND
CIRESAN
ET
AL
GOOD
FEATURES
TO
CAPTURE
IN
THE
STATE
VARIABLES
MODEL
WITH
A
LARGE
NUMBER
OF
LABELED
EXAMPLES
ARTIFICIALLY
TRANSFORMED
THE
CURRENT
STATE
AS
HIDDEN
UNITS
THE
JOINT
DISTRIBUTION
OF
EXAMPLES
SEE
SECTION
A
LARGE
NUMBER
OF
TASKS
OR
THE
PREVIOUS
STATE
AND
THE
CURRENT
INPUT
NATURAL
GRADIENT
CLASSES
FOR
IMAGENET
CONVOLUTIONAL
ARCHITECTURE
WITH
METHODS
THAT
CAN
BE
APPLIED
TO
NETWORKS
WITH
MILLIONS
MAX
POOLING
SEE
SECTION
FOR
THESE
LATTER
TWO
TECHNIQUES
OF
PARAMETERS
I
E
WITH
GOOD
SCALING
PROPERTIES
HAVE
ALSO
RECTIFYING
NONLINEARITIES
DISCUSSED
ABOVE
CAREFUL
INITIALIZATION
BEEN
PROPOSED
CHO
ET
AL
PROPOSE
USING
DISCUSSED
ABOVE
CAREFUL
PARAMETER
UPDATE
AND
ADAPTIVE
ADAPTIVE
LEARNING
RATES
FOR
RBM
TRAINING
ALONG
WITH
A
LEARNING
RATE
HEURISTICS
LAYERWISE
FEATURE
NORMALIZATION
ACROSS
NOVEL
AND
INTERESTING
IDEA
FOR
A
GRADIENT
ESTIMATOR
THAT
FEATURES
AND
A
NEW
DROPOUT
TRICK
BASED
ON
INJECTING
STRONG
TAKES
INTO
ACCOUNT
THE
INVARIANCE
OF
THE
MODEL
TO
FLIPPING
BINARY
MULTIPLICATIVE
NOISE
ON
HIDDEN
UNITS
THIS
TRICK
IS
HIDDEN
UNIT
BITS
AND
INVERTING
SIGNS
OF
CORRESPONDING
SIMILAR
TO
THE
BINARY
NOISE
INJECTION
USED
AT
EACH
LAYER
OF
A
WEIGHT
VECTORS
AT
LEAST
ONE
STUDY
INDICATES
THAT
THE
CHOICE
STACK
OF
DAES
FUTURE
WORK
IS
HOPEFULLY
GOING
TO
HELP
OF
INITIALIZATION
TO
MAKE
THE
JACOBIAN
OF
EACH
LAYER
CLOSER
TO
IDENTIFY
WHICH
OF
THESE
ELEMENTS
MATTER
MOST
HOW
TO
ACROSS
ALL
ITS
SINGULAR
VALUES
COULD
SUBSTANTIALLY
REDUCE
GENERALIZE
THEM
ACROSS
A
LARGE
VARIETY
OF
TASKS
AND
THE
TRAINING
DIFFICULTY
OF
DEEP
NETWORKS
AND
THIS
IS
ARCHITECTURES
AND
IN
PARTICULAR
CONTEXTS
WHERE
MOST
COHERENT
WITH
THE
SUCCESS
OF
THE
INITIALIZATION
PROCEDURE
OF
EXAMPLES
ARE
UNLABELED
I
E
INCLUDING
AN
UNSUPERVISED
ECHO
STATE
NETWORKS
AS
RECENTLY
STUDIED
BY
SUTSKEVER
COMPONENT
IN
THE
TRAINING
CRITERION
THERE
ARE
ALSO
SEVERAL
EXPERIMENTAL
RESULTS
SHOWING
THAT
THE
CHOICE
OF
HIDDEN
UNITS
NONLINEARITY
JOINT
TRAINING
OF
DBMS
COULD
INFLUENCE
BOTH
TRAINING
AND
GENERALIZATION
PERFOR
WE
NOW
CONSIDER
THE
PROBLEM
OF
JOINT
TRAINING
OF
ALL
LAYERS
MANCE
WITH
PARTICULARLY
INTERESTING
RESULTS
OBTAINED
WITH
OF
A
SPECIFIC
UNSUPERVISED
MODEL
THE
DBM
WHEREAS
MUCH
SPARSE
RECTIFYING
UNITS
AN
OLD
IDEA
PROGRESS
ALBEIT
WITH
MANY
UNANSWERED
QUESTIONS
HAS
BEEN
REGARDING
THE
ILL
CONDITIONING
ISSUE
WITH
NEURAL
NETWORKS
IS
MADE
ON
JOINTLY
TRAINING
ALL
THE
LAYERS
OF
DEEP
ARCHITECTURES
THAT
OF
SYMMETRY
BREAKING
PART
OF
THE
SLOWNESS
OF
CONVER
USING
BACK
PROPAGATED
GRADIENTS
I
E
MOSTLY
IN
THE
GENCE
MAY
BE
DUE
TO
MANY
UNITS
MOVING
TOGETHER
LIKE
SUPERVISED
SETTING
MUCH
LESS
WORK
HAS
BEEN
DONE
ON
THEIR
SHEEP
AND
ALL
TRYING
TO
REDUCE
THE
OUTPUT
ERROR
FOR
THE
SAME
PURELY
UNSUPERVISED
COUNTERPART
FOR
EXAMPLE
WITH
EXAMPLES
BY
INITIALIZING
WITH
SPARSE
WEIGHTS
OR
BY
DBMS
NOTE
HOWEVER
THAT
ONE
COULD
HOPE
THAT
THE
USING
OFTEN
SATURATED
NONLINEARITIES
SUCH
AS
RECTIFIERS
AS
MAX
POOLING
UNITS
GRADIENTS
ONLY
FLOW
ALONG
A
FEW
PATHS
HTTPS
SITES
GOOGLE
COM
SITE
OPTIMIZATION
CHALLENGES
WHICH
MAY
HELP
HIDDEN
UNITS
TO
SPECIALIZE
MORE
QUICKLY
JOINT
TRAINING
OF
ALL
THE
LAYERS
OF
A
DEEP
BELIEF
NET
IS
MUCH
MORE
ANOTHER
PROMISING
IDEA
TO
IMPROVE
THE
CONDITIONING
OF
CHALLENGING
BECAUSE
OF
THE
MUCH
HARDER
INFERENCE
PROBLEM
INVOLVED
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
SUCCESSFUL
TECHNIQUES
DESCRIBED
IN
THE
PREVIOUS
SECTION
LÐQV
Þ
IEQV
LOG
P
ÐV
Þ
LOG
QV
Þ
COULD
BE
APPLIED
TO
UNSUPERVISED
LEARNING
ALGORITHMS
IEQV
E
DBM
ÐV
Þ
LOG
QV
Þ
LIKE
THE
RBM
THE
DBM
IS
ANOTHER
PARTICULAR
SUBSET
OF
LOG
Z
THE
BOLTZMANN
MACHINE
FAMILY
OF
MODELS
WHERE
THE
UNITS
DBM
ARE
AGAIN
ARRANGED
IN
LAYERS
HOWEVER
UNLIKE
THE
RBM
THE
LÐQV
Þ
E
ÐV
Þ
IEQV
DBM
POSSESSES
MULTIPLE
LAYERS
OF
HIDDEN
UNITS
WITH
UNITS
DBM
IN
ODD
NUMBERED
LAYERS
BEING
CONDITIONALLY
INDEPENDENT
E
ÐV
Þ
Þ
IEP
GIVEN
EVEN
NUMBERED
LAYERS
AND
VICE
VERSA
WITH
RESPECT
TO
THE
BOLTZMANN
ENERGY
FUNCTION
OF
THE
DBM
CORRESPONDS
TO
SETTING
U
AND
A
SPARSE
CONNECTIVITY
THIS
VARIATIONAL
LEARNING
PROCEDURE
LEAVES
THE
NEGATIVE
STRUCTURE
IN
BOTH
V
AND
W
WE
CAN
MAKE
THE
STRUCTURE
OF
THE
PHASE
UNTOUCHED
WHICH
CAN
THUS
BE
ESTIMATED
THROUGH
DBM
MORE
EXPLICIT
BY
SPECIFYING
ITS
ENERGY
FUNCTION
FOR
SML
OR
CD
AS
IN
THE
RBM
CASE
THE
MODEL
WITH
TWO
HIDDEN
LAYERS
IT
IS
GIVEN
AS
TRAINING
DBMS
T
THE
MAJOR
DIFFERENCE
BETWEEN
TRAINING
A
DBM
AND
AN
RBM
E
DBM
ÐV
Þ
VT
W
H
V
IS
THAT
INSTEAD
OF
MAXIMIZING
THE
LIKELIHOOD
DIRECTLY
WE
T
T
BT
V
INSTEAD
CHOOSE
PARAMETERS
TO
MAXIMIZE
THE
LOWER
BOUND
ON
THE
LIKELIHOOD
GIVEN
IN
THE
SML
BASED
ALGORITHM
FOR
WITH
FW
V
BG
THE
DBM
CAN
ALSO
BE
CHARAC
MAXIMIZING
THIS
LOWER
BOUND
IS
AS
FOLLOWS
TERIZED
AS
A
BIPARTITE
GRAPH
BETWEEN
TWO
SETS
OF
VERTICES
FORMED
BY
ODD
AND
EVEN
NUMBERED
LAYERS
WITH
V
CLAMP
THE
VISIBLE
UNITS
TO
A
TRAINING
EXAMPLE
ITERATE
OVER
UNTIL
CONVERGENCE
MEAN
FIELD
APPROXIMATE
INFERENCE
GENERATE
NEGATIVE
PHASE
SAMPLES
V
AND
A
KEY
POINT
OF
DEPARTURE
FROM
THE
RBM
IS
THAT
THE
POSTERIOR
THROUGH
SML
DISTRIBUTION
OVER
THE
HIDDEN
UNITS
GIVEN
THE
VISIBLES
IS
NO
COMPUTE
LÐQV
Þ
USING
THE
VALUES
OBTAINED
IN
LONGER
TRACTABLE
DUE
TO
THE
INTERACTIONS
BETWEEN
THE
HIDDEN
STEPS
AND
UNITS
SALAKHUTDINOV
AND
HINTON
RESORT
TO
A
MEAN
FINALLY
UPDATE
THE
MODEL
PARAMETERS
WITH
A
STEP
OF
FIELD
APPROXIMATION
TO
THE
POSTERIOR
SPECIFICALLY
IN
THE
CASE
APPROXIMATE
STOCHASTIC
GRADIENT
ASCENT
OF
A
MODEL
WITH
TWO
HIDDEN
LAYERS
WE
WISH
TO
APPROXIMATE
WHILE
THE
ABOVE
PROCEDURE
APPEARS
TO
BE
A
SIMPLE
P
J
VÞQ
Q
WITH
THE
FACTORED
DISTRIBUTION
QV
Þ
EXTENSION
OF
THE
HIGHLY
EFFECTIVE
SML
SCHEME
FOR
TRAINING
QV
ÐHJ
Þ
QV
ÐHI
Þ
SUCH
THAT
THE
KL
DIVERGENCE
RBMS
AS
WE
DEMONSTRATE
IN
DESJARDINS
ET
AL
THIS
KLÐP
ÐH
H
J
VÞKQV
ÞÞ
IS
MINIMIZED
OR
EQUIVA
PROCEDURE
SEEMS
VULNERABLE
TO
FALLING
IN
POOR
LOCAL
LENTLY
THAT
A
LOWER
BOUND
TO
THE
LOG
LIKELIHOOD
IS
MAXIMIZED
MINIMA
THAT
LEAVE
MANY
HIDDEN
UNITS
EFFECTIVELY
DEAD
XX
NOT
SIGNIFICANTLY
DIFFERENT
FROM
ITS
RANDOM
INITIALIZATION
LOG
P
ÐVÞ
LÐQV
Þ
QV
Þ
WITH
SMALL
NORM
THE
FAILURE
OF
THE
SML
JOINT
TRAINING
STRATEGY
WAS
NOTED
P
ÐV
Þ
BY
SALAKHUTDINOV
AND
HINTON
AS
AN
ALTERNATIVE
THEY
LOG
QV
Þ
PROPOSED
A
GREEDY
LAYERWISE
TRAINING
STRATEGY
THIS
PROCEDURE
CONSISTS
OF
PRETRAINING
THE
LAYERS
OF
THE
DBM
MAXIMIZING
THIS
LOWER
BOUND
WITH
RESPECT
TO
THE
MEAN
IN
MUCH
THE
SAME
WAY
AS
THE
DBN
I
E
BY
STACKING
RBMS
FIELD
DISTRIBUTION
QV
Þ
BY
SETTING
DERIVATIVES
TO
ZERO
AND
TRAINING
EACH
LAYER
TO
INDEPENDENTLY
MODEL
THE
OUTPUT
YIELDS
THE
FOLLOWING
MEAN
FIELD
UPDATE
EQUATIONS
OF
THE
PREVIOUS
LAYER
A
FINAL
JOINT
FINE
TUNING
IS
DONE
X
X
FOLLOWING
THE
ABOVE
SML
BASED
PROCEDURE
H
I
SIGMOID
WJI
VJ
Þ
VIK
H
K
Þ
DI
J
K
BUILDING
IN
INVARIANCE
X
IT
IS
WELL
UNDERSTOOD
THAT
INCORPORATING
PRIOR
DOMAIN
H
K
SIGMOID
VIK
H
I
Þ
DK
KNOWLEDGE
HELPS
MACHINE
LEARNING
EXPLORING
GOOD
STRATE
I
GIES
FOR
DOING
SO
IS
A
VERY
IMPORTANT
RESEARCH
AVENUE
NOTE
HOW
THE
ABOVE
EQUATIONS
OSTENSIBLY
LOOK
LIKE
A
FIXED
HOWEVER
IF
WE
ARE
TO
ADVANCE
OUR
UNDERSTANDING
OF
CORE
POINT
RECURRENT
NEURAL
NETWORK
I
E
WITH
CONSTANT
INPUT
IN
THE
MACHINE
LEARNING
PRINCIPLES
IT
IS
IMPORTANT
THAT
WE
KEEP
SAME
WAY
THAT
AN
RBM
CAN
BE
ASSOCIATED
WITH
A
SIMPLE
COMPARISONS
BETWEEN
PREDICTORS
FAIR
AND
MAINTAIN
A
CLEAR
AUTOENCODER
THE
ABOVE
MEAN
FIELD
UPDATE
EQUATIONS
FOR
THE
AWARENESS
OF
THE
PRIOR
DOMAIN
KNOWLEDGE
USED
BY
DIFFERENT
DBM
CAN
BE
ASSOCIATED
WITH
A
RECURRENT
AUTOENCODER
IN
THAT
LEARNING
ALGORITHMS
ESPECIALLY
WHEN
COMPARING
THEIR
CASE
THE
TRAINING
CRITERION
INVOLVES
THE
RECONSTRUCTION
ERROR
PERFORMANCE
ON
BENCHMARK
PROBLEMS
WE
HAVE
SO
FAR
ONLY
AT
THE
LAST
OR
AT
CONSECUTIVE
TIME
STEPS
THIS
TYPE
OF
MODEL
PRESENTED
ALGORITHMS
THAT
EXPLOITED
ONLY
GENERIC
INDUCTIVE
HAS
BEEN
EXPLORED
BY
SAVARD
AND
SEUNG
AND
BIASES
FOR
HIGH
DIMENSIONAL
PROBLEMS
THUS
MAKING
THEM
SHOWN
TO
DO
A
BETTER
JOB
AT
DENOISING
THAN
ORDINARY
POTENTIALLY
APPLICABLE
TO
ANY
HIGH
DIMENSIONAL
PROBLEM
AUTOENCODERS
THE
MOST
PREVALENT
APPROACH
TO
INCORPORATING
PRIOR
KNOWL
ITERATING
UNTIL
CONVERGENCE
YIELDS
THE
Q
PARA
EDGE
IS
TO
HAND
DESIGN
BETTER
FEATURES
TO
FEED
A
GENERIC
METERS
OF
THE
VARIATIONAL
POSITIVE
PHASE
OF
CLASSIFIER
AND
THIS
HAS
BEEN
USED
EXTENSIVELY
IN
COMPUTER
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
VISION
E
G
HERE
WE
RATHER
FOCUS
ON
HOW
BASIC
TYPICALLY
TAKING
THEIR
MAX
OR
THEIR
SUM
THIS
CONFERS
UPON
DOMAIN
KNOWLEDGE
OF
THE
INPUT
IN
PARTICULAR
ITS
TOPOLOGICAL
THE
RESULTING
POOLED
FEATURE
LAYER
SOME
DEGREE
OF
INVARIANCE
STRUCTURE
E
G
BITMAP
IMAGES
HAVING
A
STRUCTURE
MAY
TO
INPUT
TRANSLATIONS
AND
THIS
STYLE
OF
ARCHITECTURE
ALTER
BE
USED
TO
LEARN
BETTER
FEATURES
NATING
SELECTIVE
FEATURE
EXTRACTION
AND
INVARIANCE
CREATING
POOLING
HAS
BEEN
THE
BASIS
OF
CONVOLUTIONAL
NETWORKS
THE
GENERATING
TRANSFORMED
EXAMPLES
NEOCOGNITRON
AND
HMAX
MODELS
AND
ARGUED
TO
GENERALIZATION
PERFORMANCE
IS
USUALLY
IMPROVED
BY
BE
THE
ARCHITECTURE
USED
BY
MAMMALIAN
BRAINS
FOR
OBJECT
PROVIDING
A
LARGER
QUANTITY
OF
REPRESENTATIVE
DATA
THIS
RECOGNITION
THE
OUTPUT
OF
A
POOLING
UNIT
CAN
BE
ACHIEVED
BY
GENERATING
NEW
EXAMPLES
BY
APPLYING
WILL
BE
THE
SAME
IRRESPECTIVE
OF
WHERE
A
SPECIFIC
FEATURE
IS
SMALL
RANDOM
DEFORMATIONS
TO
THE
ORIGINAL
TRAINING
LOCATED
INSIDE
ITS
POOLING
REGION
EMPIRICALLY
THE
USE
OF
EXAMPLES
USING
DEFORMATIONS
THAT
ARE
KNOWN
NOT
TO
POOLING
SEEMS
TO
CONTRIBUTE
SIGNIFICANTLY
TO
IMPROVED
CHANGE
THE
TARGET
VARIABLES
OF
INTEREST
FOR
EXAMPLE
AN
CLASSIFICATION
ACCURACY
IN
OBJECT
CLASSIFICATION
TASKS
OBJECT
CLASS
IS
INVARIANT
TO
SMALL
TRANSFORMATIONS
OF
IMAGES
A
SUCCESSFUL
VARIANT
OF
POOLING
CONNECTED
TO
SUCH
AS
TRANSLATIONS
ROTATIONS
SCALING
OR
SHEARING
THIS
SPARSE
CODING
IS
POOLING
FOR
WHICH
THE
OLD
APPROACH
HAS
RECENTLY
BEEN
APPLIED
WITH
GREAT
POOL
OUTPUT
IS
THE
SQUARE
ROOT
OF
THE
POSSIBLY
WEIGHTED
SUM
SUCCESS
IN
THE
WORK
OF
CIRESAN
ET
AL
WHO
USED
AN
OF
SQUARES
OF
FILTER
OUTPUTS
IDEALLY
WE
WOULD
LIKE
TO
EFFICIENT
GPU
IMPLEMENTATION
SPEEDUP
TO
TRAIN
A
GENERALIZE
FEATURE
POOLING
SO
AS
TO
LEARN
WHAT
FEATURES
SHOULD
STANDARD
BUT
LARGE
DEEP
MLP
ON
DEFORMED
MNIST
DIGITS
BE
POOLED
TOGETHER
FOR
EXAMPLE
AS
SUCCESSFULLY
DONE
IN
USING
BOTH
AFFINE
AND
ELASTIC
DEFORMATIONS
WITH
SEVERAL
PAPERS
IN
THIS
PLAIN
OLD
STOCHASTIC
GRADIENT
DESCENT
THEY
REACH
A
RECORD
WAY
THE
POOL
OUTPUT
LEARNS
TO
BE
INVARIANT
TO
THE
VARIATIONS
PERCENT
CLASSIFICATION
ERROR
RATE
CAPTURED
BY
THE
SPAN
OF
THE
FEATURES
POOLED
CONVOLUTION
AND
POOLING
PATCH
BASED
TRAINING
ANOTHER
POWERFUL
APPROACH
IS
BASED
ON
EVEN
MORE
BASIC
THE
SIMPLEST
APPROACH
FOR
LEARNING
A
CONVOLUTIONAL
LAYER
IN
KNOWLEDGE
OF
MERELY
THE
TOPOLOGICAL
STRUCTURE
OF
THE
INPUT
AN
UNSUPERVISED
FASHION
IS
PATCH
BASED
TRAINING
SIMPLY
DIMENSIONS
BY
THIS
WE
MEAN
FOR
EXAMPLE
THE
LAYOUT
OF
FEEDING
A
GENERIC
UNSUPERVISED
FEATURE
LEARNING
ALGORITHM
PIXELS
IN
IMAGES
OR
AUDIO
SPECTROGRAMS
THE
STRUCTURE
OF
WITH
LOCAL
PATCHES
EXTRACTED
AT
RANDOM
POSITIONS
OF
THE
VIDEOS
THE
SEQUENTIAL
STRUCTURE
OF
TEXT
OR
OF
TEMPORAL
INPUTS
THE
RESULTING
FEATURE
EXTRACTOR
CAN
THEN
BE
SWIPED
SEQUENCES
IN
GENERAL
BASED
ON
SUCH
STRUCTURE
ONE
CAN
OVER
THE
INPUT
TO
PRODUCE
THE
CONVOLUTIONAL
FEATURE
MAPS
DEFINE
LOCAL
RECEPTIVE
FIELDS
SO
THAT
EACH
LOW
LEVEL
FEATURE
THAT
MAP
MAY
BE
USED
AS
A
NEW
INPUT
FOR
THE
NEXT
LAYER
WILL
BE
COMPUTED
FROM
ONLY
A
SUBSET
OF
THE
INPUT
A
AND
THE
OPERATION
REPEATED
TO
THUS
LEARN
AND
STACK
SEVERAL
NEIGHBORHOOD
IN
THE
TOPOLOGY
E
G
A
SUBIMAGE
AT
A
GIVEN
LAYERS
SUCH
AN
APPROACH
WAS
RECENTLY
USED
WITH
INDEPEN
POSITION
THIS
TOPOLOGICAL
LOCALITY
CONSTRAINT
CORRESPONDS
TO
DENT
SUBSPACE
ANALYSIS
ON
VIDEO
BLOCKS
REACHING
A
LAYER
HAVING
A
VERY
SPARSE
WEIGHT
MATRIX
WITH
NONZEROS
THE
STATE
OF
THE
ART
ON
THE
UCF
KTH
AND
ONLY
ALLOWED
FOR
TOPOLOGICALLY
LOCAL
CONNECTIONS
COMPUT
YOUTUBE
ACTION
RECOGNITION
DATASETS
SIMILARLY
COATES
AND
ING
THE
ASSOCIATED
MATRIX
PRODUCTS
CAN
OF
COURSE
BE
MADE
NG
COMPARED
SEVERAL
FEATURE
LEARNERS
WITH
PATCH
BASED
MUCH
MORE
EFFICIENT
THAN
HAVING
TO
HANDLE
A
DENSE
MATRIX
TRAINING
AND
REACHED
STATE
OF
THE
ART
RESULTS
ON
SEVERAL
IN
ADDITION
TO
THE
STATISTICAL
GAIN
FROM
A
MUCH
SMALLER
CLASSIFICATION
BENCHMARKS
INTERESTINGLY
IN
THIS
WORK
NUMBER
OF
FREE
PARAMETERS
IN
DOMAINS
WITH
SUCH
TOPOLO
PERFORMANCE
WAS
ALMOST
AS
GOOD
WITH
VERY
SIMPLE
K
MEANS
GICAL
STRUCTURE
SIMILAR
INPUT
PATTERNS
ARE
LIKELY
TO
APPEAR
AT
CLUSTERING
AS
WITH
MORE
SOPHISTICATED
FEATURE
LEARNERS
WE
DIFFERENT
POSITIONS
AND
NEARBY
VALUES
E
G
CONSECUTIVE
HOWEVER
CONJECTURE
THAT
THIS
IS
THE
CASE
ONLY
BECAUSE
FRAMES
OR
NEARBY
PIXELS
ARE
LIKELY
TO
HAVE
STRONGER
PATCHES
ARE
RATHER
LOW
DIMENSIONAL
COMPARED
TO
THE
DEPENDENCIES
THAT
ARE
ALSO
IMPORTANT
TO
MODEL
THE
DATA
DIMENSION
OF
A
WHOLE
IMAGE
A
LARGE
DATASET
MIGHT
IN
FACT
THESE
DEPENDENCIES
CAN
BE
EXPLOITED
TO
DISCOVER
THE
PROVIDE
SUFFICIENT
COVERAGE
OF
THE
SPACE
OF
FOR
EXAMPLE
TOPOLOGY
I
E
RECOVER
A
REGULAR
GRID
OF
PIXELS
OUT
OF
A
EDGES
PREVALENT
IN
PATCHES
SO
THAT
A
DISTRIBUTED
SET
OF
VECTORS
WITHOUT
ANY
ORDER
INFORMATION
FOR
EXAMPLE
REPRESENTATION
IS
NOT
ABSOLUTELY
NECESSARY
ANOTHER
PLAU
AFTER
THE
ELEMENTS
HAVE
BEEN
ARBITRARILY
SHUFFLED
IN
THE
SAME
SIBLE
EXPLANATION
FOR
THIS
SUCCESS
IS
THAT
THE
CLUSTERS
WAY
FOR
ALL
EXAMPLES
THUS
THE
SAME
LOCAL
FEATURE
IDENTIFIED
IN
EACH
IMAGE
PATCH
ARE
THEN
POOLED
INTO
A
COMPUTATION
IS
LIKELY
TO
BE
RELEVANT
AT
ALL
TRANSLATED
HISTOGRAM
OF
CLUSTER
COUNTS
ASSOCIATED
WITH
A
LARGER
POSITIONS
OF
THE
RECEPTIVE
FIELD
HENCE
THE
IDEA
OF
SWEEPING
SUBIMAGE
WHEREAS
THE
OUTPUT
OF
A
REGULAR
CLUSTERING
IS
A
SUCH
A
LOCAL
FEATURE
EXTRACTOR
OVER
THE
TOPOLOGY
THIS
ONE
HOT
NONDISTRIBUTED
CODE
THIS
HISTOGRAM
IS
ITSELF
A
CORRESPONDS
TO
A
CONVOLUTION
AND
TRANSFORMS
AN
INPUT
INTO
DISTRIBUTED
REPRESENTATION
AND
THE
SOFT
K
MEANS
A
SIMILARLY
SHAPED
FEATURE
MAP
EQUIVALENTLY
TO
SWEEPING
REPRESENTATION
ALLOWS
NOT
ONLY
THE
NEAREST
FILTER
BUT
ALSO
ITS
THIS
MAY
BE
SEEN
AS
STATIC
BUT
DIFFERENTLY
POSITIONED
NEIGHBORS
TO
BE
ACTIVE
REPLICATED
FEATURE
EXTRACTORS
THAT
ALL
SHARE
THE
SAME
PARAMETERS
THIS
IS
AT
THE
HEART
OF
CONVOLUTIONAL
NETWORKS
CONVOLUTIONAL
AND
TILED
CONVOLUTIONAL
TRAINING
THAT
HAVE
BEEN
APPLIED
BOTH
TO
OBJECT
RECOGNITION
IT
IS
POSSIBLE
TO
DIRECTLY
TRAIN
LARGE
CONVOLUTIONAL
LAYERS
AND
TO
IMAGE
SEGMENTATION
ANOTHER
HALLMARK
OF
THE
USING
AN
UNSUPERVISED
CRITERION
AN
EARLY
APPROACH
CONVOLUTIONAL
ARCHITECTURE
IS
THAT
VALUES
COMPUTED
BY
THE
TRAINED
A
STANDARD
BUT
DEEP
CONVOLUTIONAL
MLP
ON
THE
TASK
SAME
FEATURE
DETECTOR
APPLIED
AT
SEVERAL
NEIGHBORING
INPUT
OF
DENOISING
IMAGES
I
E
AS
A
DEEP
CONVOLUTIONAL
DAE
LOCATIONS
ARE
THEN
SUMMARIZED
THROUGH
A
POOLING
OPERATION
CONVOLUTIONAL
VERSIONS
OF
THE
RBM
OR
ITS
EXTENSIONS
HAVE
BENGIO
ET
AL
REPRESENTATION
LEARNING
A
REVIEW
AND
NEW
PERSPECTIVES
ALSO
BEEN
DEVELOPED
AS
WELL
AS
A
SURROUND
US
SECOND
ONE
WOULD
EXPECT
THAT
INSTEAD
OF
JUST
PROBABILISTIC
MAX
POOLING
OPERATION
BUILT
INTO
CONVOLUTIONAL
BEING
SLOWLY
CHANGING
DIFFERENT
FACTORS
COULD
BE
ASSOCIATED
DEEP
NETWORKS
OTHER
UNSUPERVISED
WITH
THEIR
OWN
DIFFERENT
TIME
SCALE
THE
SPECIFICITY
OF
THEIR
FEATURE
LEARNING
APPROACHES
THAT
WERE
ADAPTED
TO
THE
TIME
SCALE
COULD
THUS
BECOME
A
HINT
TO
DISENTANGLE
CONVOLUTIONAL
SETTING
INCLUDE
PSD
EXPLANATORY
FACTORS
THIRD
ONE
WOULD
EXPECT
THAT
SOME
A
CONVOLUTIONAL
VERSION
OF
SPARSE
CODING
CALLED
DECONVOLU
FACTORS
SHOULD
REALLY
BE
REPRESENTED
BY
A
GROUP
OF
NUMBERS
TIONAL
NETWORKS
TOPOGRAPHIC
ICA
AND
MPOT
SUCH
AS
THE
X
Y
AND
Z
POSITION
OF
SOME
OBJECT
IN
SPACE
AND
WHICH
KIVINEN
AND
WILLIAMS
APPLIED
TO
MODELING
THE
POSE
PARAMETERS
OF
HINTON
ET
AL
RATHER
THAN
BY
A
NATURAL
TEXTURES
GREGOR
AND
LECUN
AND
LE
ET
AL
SINGLE
SCALAR
AND
THAT
THESE
GROUPS
TEND
TO
MOVE
TOGETHER
ALSO
DEMONSTRATED
THE
TECHNIQUE
OF
TILED
CONVOLUTION
WHERE
STRUCTURED
SPARSITY
PENALTIES
COULD
BE
PARAMETERS
ARE
SHARED
ONLY
BETWEEN
FEATURE
EXTRACTORS
USED
FOR
THIS
PURPOSE
WHOSE
RECEPTIVE
FIELDS
ARE
K
STEPS
AWAY
SO
THE
ONES
LOOKING
AT
IMMEDIATE
NEIGHBOR
LOCATIONS
ARE
NOT
SHARED
THIS
ALGORITHMS
TO
DISENTANGLE
FACTORS
OF
VARIATION
ALLOWS
POOLING
UNITS
TO
BE
INVARIANT
TO
MORE
THAN
JUST
THE
GOAL
OF
BUILDING
INVARIANT
FEATURES
IS
TO
REMOVE
TRANSLATIONS
AND
IS
A
HYBRID
BETWEEN
CONVOLUTIONAL
NET
SENSITIVITY
OF
THE
REPRESENTATION
TO
DIRECTIONS
OF
VARIANCE
WORKS
AND
EARLIER
NEURAL
NETWORKS
WITH
LOCAL
CONNECTIONS
IN
THE
DATA
THAT
ARE
UNINFORMATIVE
TO
THE
TASK
AT
HAND
BUT
NO
WEIGHT
SHARING
HOWEVER
IT
IS
OFTEN
THE
CASE
THAT
THE
GOAL
OF
FEATURE
EXTRACTION
IS
THE
DISENTANGLING
OR
SEPARATION
OF
MANY
DISTINCT
ALTERNATIVES
TO
POOLING
BUT
INFORMATIVE
FACTORS
IN
THE
DATA
FOR
EXAMPLE
IN
A
VIDEO
ALTERNATIVELY
ONE
CAN
ALSO
USE
EXPLICIT
KNOWLEDGE
OF
THE
OF
PEOPLE
SUBJECT
IDENTITY
ACTION
PERFORMED
SUBJECT
POSE
EXPECTED
INVARIANTS
EXPRESSED
MATHEMATICALLY
TO
DEFINE
RELATIVE
TO
THE
CAMERA
AND
SO
ON
IN
THIS
SITUATION
THE
TRANSFORMATIONS
THAT
ARE
ROBUST
TO
A
KNOWN
FAMILY
OF
INPUT
METHODS
OF
GENERATING
INVARIANT
FEATURES
SUCH
AS
FEATURE
DEFORMATIONS
USING
THE
SO
CALLED
SCATTERING
OPERATORS
POOLING
MAY
BE
INADEQUATE
WHICH
CAN
BE
COMPUTED
IN
A
WAY
INTERESTINGLY
THE
PROCESS
OF
BUILDING
INVARIANT
FEATURES
CAN
BE
SEEN
AS
ANALOGOUS
TO
DEEP
CONVOLUTIONAL
NETWORKS
AND
WAVELETS
CONSISTING
OF
TWO
STEPS
FIRST
LOW
LEVEL
FEATURES
ARE
LIKE
CONVOLUTIONAL
NETWORKS
THE
SCATTERING
OPERATORS
RECOVERED
THAT
ACCOUNT
FOR
THE
DATA
SECOND
SUBSETS
OF
ALTERNATE
TWO
TYPES
OF
OPERATIONS
CONVOLUTION
AND
POOLING
THESE
LOW
LEVEL
FEATURES
ARE
POOLED
TOGETHER
TO
FORM
HIGHER
AS
A
NORM
UNLIKE
CONVOLUTIONAL
NETWORKS
THE
PROPOSED
LEVEL
INVARIANT
FEATURES
EXEMPLIFIED
BY
THE
POOLING
AND
APPROACH
KEEPS
AT
EACH
LEVEL
ALL
OF
THE
INFORMATION
ABOUT
THE
SUBSAMPLING
LAYERS
OF
CONVOLUTIONAL
NEURAL
NETWORKS
THE
INPUT
IN
A
WAY
THAT
CAN
BE
INVERTED
AND
AUTOMATICALLY
INVARIANT
REPRESENTATION
FORMED
BY
THE
POOLING
FEATURES
YIELDS
A
VERY
SPARSE
BUT
VERY
HIGH
DIMENSIONAL
REPRESEN
OFFERS
AN
INCOMPLETE
WINDOW
ON
THE
DATA
AS
THE
DETAILED
TATION
ANOTHER
DIFFERENCE
IS
THAT
THE
FILTERS
ARE
NOT
LEARNED
REPRESENTATION
OF
THE
LOWER
LEVEL
FEATURES
IS
ABSTRACTED
AWAY
BUT
INSTEAD
ARE
SET
SO
AS
TO
GUARANTEE
THAT
A
PRIORI
SPECIFIED
IN
THE
POOLING
PROCEDURE
WHILE
WE
WOULD
LIKE
HIGHER
LEVEL
INVARIANCES
ARE
ROBUSTLY
ACHIEVED
JUST
A
FEW
LEVELS
WERE
FEATURES
TO
BE
MORE
ABSTRACT
AND
EXHIBIT
GREATER
INVARIANCE
SUFFICIENT
TO
ACHIEVE
IMPRESSIVE
RESULTS
ON
SEVERAL
BENCH
WE
HAVE
LITTLE
CONTROL
OVER
WHAT
INFORMATION
IS
LOST
THROUGH
MARK
DATASETS
POOLING
WHAT
WE
REALLY
WOULD
LIKE
IS
FOR
A
PARTICULAR
FEATURE
SET
TO
BE
INVARIANT
TO
THE
IRRELEVANT
FEATURES
AND
TEMPORAL
COHERENCE
AND
SLOW
FEATURES
DISENTANGLE
THE
RELEVANT
FEATURES
UNFORTUNATELY
IT
IS
OFTEN
THE
PRINCIPLE
OF
IDENTIFYING
SLOWLY
MOVING
CHANGING
DIFFICULT
TO
DETERMINE
A
PRIORI
WHICH
SET
OF
FEATURES
WILL
FACTORS
IN
TEMPORAL
SPATIAL
DATA
HAS
BEEN
INVESTIGATED
BY
ULTIMATELY
BE
RELEVANT
TO
THE
TASK
AT
HAND
MANY
AS
A
PRINCIPLE
FOR
FINDING
AN
INTERESTING
APPROACH
TO
TAKING
ADVANTAGE
OF
SOME
OF
USEFUL
REPRESENTATIONS
IN
PARTICULAR
THIS
IDEA
HAS
BEEN
THE
FACTORS
OF
VARIATION
KNOWN
TO
EXIST
IN
THE
DATA
IS
THE
APPLIED
TO
IMAGE
SEQUENCES
AND
AS
AN
EXPLANATION
FOR
TRANSFORMING
AUTOENCODER
INSTEAD
OF
A
SCALAR
PATTERN
WHY
SIMPLE
AND
COMPLEX
CELLS
BEHAVE
THE
WAY
THEY
DO
DETECTOR
E
G
CORRESPONDING
TO
THE
PROBABILITY
OF
THE
A
GOOD
OVERVIEW
CAN
BE
FOUND
IN
PRESENCE
OF
A
PARTICULAR
FORM
IN
THE
INPUT
ONE
CAN
THINK
MORE
RECENTLY
TEMPORAL
COHERENCE
HAS
BEEN
SUCCESSFULLY
OF
THE
FEATURES
AS
ORGANIZED
IN
GROUPS
THAT
INCLUDE
BOTH
A
EXPLOITED
IN
DEEP
ARCHITECTURES
TO
MODEL
VIDEO
IT
WAS
PATTERN
DETECTOR
AND
POSE
PARAMETERS
THAT
SPECIFY
ATTRIBUTES
OF
ALSO
FOUND
THAT
TEMPORAL
COHERENCE
DISCOVERED
VISUAL
THE
DETECTED
PATTERN
IN
WHAT
IS
ASSUMED
A
PRIORI
IS
THAT
FEATURES
SIMILAR
TO
THOSE
OBTAINED
BY
ORDINARY
UNSUPER
PAIRS
OF
EXAMPLES
OR
CONSECUTIVE
ONES
ARE
OBSERVED
WITH
VISED
FEATURE
LEARNING
AND
A
TEMPORAL
COHERENCE
AN
ASSOCIATED
VALUE
FOR
THE
CORRESPONDING
CHANGE
IN
THE
POSE
PENALTY
HAS
BEEN
COMBINED
WITH
A
TRAINING
CRITERION
FOR
PARAMETERS
FOR
EXAMPLE
AN
ANIMAL
THAT
CONTROLS
ITS
EYES
UNSUPERVISED
FEATURE
LEARNING
SPARSE
AUTOENCODERS
KNOWS
WHAT
CHANGES
TO
ITS
OCULAR
MOTOR
SYSTEM
WERE
APPLIED
WITH
REGULARIZATION
IN
THIS
CASE
YIELDING
IMPROVED
WHEN
GOING
FROM
ONE
IMAGE
ON
ITS
RETINA
TO
THE
NEXT
IN
THAT
CLASSIFICATION
PERFORMANCE
WORK
IT
IS
ALSO
ASSUMED
THAT
THE
POSE
CHANGES
ARE
THE
SAME
THE
TEMPORAL
COHERENCE
PRIOR
CAN
BE
EXPRESSED
IN
FOR
ALL
THE
PATTERN
DETECTORS
AND
THIS
MAKES
SENSE
FOR
GLOBAL
SEVERAL
WAYS
THE
SIMPLEST
BEING
THE
SQUARED
DIFFERENCE
CHANGES
SUCH
AS
IMAGE
TRANSLATION
AND
CAMERA
GEOMETRY
BETWEEN
FEATURE
VALUES
AT
TIMES
T
AND
T
Þ
OTHER
PLAUSIBLE
CHANGES
INSTEAD
WE
WOULD
LIKE
TO
DISCOVER
THE
POSE
TEMPORAL
COHERENCE
PRIORS
INCLUDE
THE
FOLLOWING
FIRST
PARAMETERS
AND
ATTRIBUTES
THAT
SHOULD
BE
ASSOCIATED
WITH
INSTEAD
OF
PENALIZING
THE
SQUARED
CHANGE
PENALIZING
THE
EACH
FEATURE
DETECTOR
WITHOUT
HAVING
TO
SPECIFY
AHEAD
OF
ABSOLUTE
VALUE
OR
A
SIMILAR
SPARSITY
PENALTY
WOULD
STATE
TIME
WHAT
THEY
SHOULD
BE
FORCE
THEM
TO
BE
THE
SAME
FOR
ALL
THAT
MOST
OF
THE
TIME
THE
CHANGE
SHOULD
BE
EXACTLY
WHICH
FEATURES
AND
HAVING
TO
NECESSARILY
OBSERVE
THE
CHANGES
IN
WOULD
INTUITIVELY
MAKE
SENSE
FOR
THE
REAL
LIFE
FACTORS
THAT
ALL
OF
THE
POSE
PARAMETERS
OR
ATTRIBUTES
IEEE
TRANSACTIONS
ON
PATTERN
ANALYSIS
AND
MACHINE
INTELLIGENCE
VOL
NO
AUGUST
THE
APPROACH
TAKEN
RECENTLY
IN
THE
MTC
DISCUSSED
IN
APPROACHES
THE
PROBABILISTIC
MODELS
BOTH
THE
DIRECTED
SECTION
IS
INTERESTING
IN
THIS
RESPECT
WITHOUT
ANY
KIND
SUCH
AS
SPARSE
CODING
AND
THE
UNDIRECTED
KIND
SUCH
AS
SUPERVISION
OR
PRIOR
KNOWLEDGE
IT
FINDS
PROMINENT
LOCAL
BOLTZMANN
MACHINES
THE
RECONSTRUCTION
BASED
ALGORITHMS
FACTORS
OF
VARIATION
TANGENT
VECTORS
TO
THE
MANIFOLD
RELATED
TO
AUTOENCODERS
AND
THE
GEOMETRICALLY
MOTIVATED
EXTRACTED
FROM
A
CAE
INTERPRETED
AS
LOCALLY
VALID
INPUT
MANIFOLD
LEARNING
APPROACHES
DRAWING
CONNECTIONS
BE
DEFORMATIONS
HIGHER
LEVEL
FEATURES
ARE
SUBSEQUENTLY
TWEEN
THESE
APPROACHES
IS
CURRENTLY
A
VERY
ACTIVE
AREA
OF
ENCOURAGED
TO
BE
INVARIANT
TO
THESE
FACTORS
OF
VARIATION
SO
RESEARCH
AND
IS
LIKELY
TO
CONTINUE
TO
PRODUCE
MODELS
AND
THAT
THEY
MUST
DEPEND
ON
OTHER
CHARACTERISTICS
IN
A
SENSE
METHODS
THAT
TAKE
ADVANTAGE
OF
THE
RELATIVE
STRENGTHS
OF
THIS
APPROACH
IS
DISENTANGLING
VALID
LOCAL
DEFORMATIONS
EACH
PARADIGM
ALONG
THE
DATA
MANIFOLD
FROM
OTHER
MORE
DRASTIC
CHANGES
PRACTICAL
CONCERNS
AND
GUIDELINES
ONE
OF
THE
CRITICISMS
ASSOCIATED
TO
OTHER
FACTORS
OF
VARIATION
SUCH
AS
THOSE
THAT
ADDRESSED
TO
ARTIFICIAL
NEURAL
NETWORKS
AND
DEEP
LEARNING
AFFECT
CLASS
IDENTITY
ALGORITHMS
IS
THAT
THEY
HAVE
MANY
HYPERPARAMETERS
AND
ONE
SOLUTION
TO
THE
PROBLEM
OF
INFORMATION
LOSS
THAT
VARIANTS
AND
THAT
EXPLORING
THEIR
CONFIGURATIONS
AND
WOULD
FIT
WITHIN
THE
FEATURE
POOLING
PARADIGM
IS
TO
ARCHITECTURES
IS
AN
ART
THIS
HAS
MOTIVATED
AN
EARLIER
BOOK
CONSIDER
MANY
OVERLAPPING
POOLS
OF
FEATURES
BASED
ON
THE
ON
THE
TRICKS
OF
THE
TRADE
OF
WHICH
IS
STILL
SAME
LOW
LEVEL
FEATURE
SET
SUCH
A
STRUCTURE
WOULD
HAVE
THE
RELEVANT
FOR
TRAINING
DEEP
ARCHITECTURES
IN
PARTICULAR
WHAT
POTENTIAL
TO
LEARN
A
REDUNDANT
SET
OF
INVARIANT
FEATURES
THAT
CONCERNS
INITIALIZATION
ILL
CONDITIONING
AND
STOCHASTIC
MAY
NOT
CAUSE
SIGNIFICANT
LOSS
OF
INFORMATION
HOWEVER
IT
GRADIENT
DESCENT
A
GOOD
AND
MORE
MODERN
COMPENDIUM
IS
NOT
OBVIOUS
WHAT
LEARNING
PRINCIPLE
COULD
BE
APPLIED
OF
GOOD
TRAINING
PRACTICE
PARTICULARLY
ADAPTED
TO
TRAINING
THAT
CAN
ENSURE
THAT
THE
FEATURES
ARE
INVARIANT
WHILE
RBMS
IS
PROVIDED
IN
WHILE
A
SIMILAR
GUIDE
ORIENTED
MAINTAINING
AS
MUCH
INFORMATION
AS
POSSIBLE
WHILE
A
MORE
TOWARD
DEEP
NEURAL
NETWORKS
CAN
BE
FOUND
IN
DBN
OR
A
DBM
AS
DISCUSSED
IN
SECTIONS
AND
BOTH
OF
WHICH
ARE
PART
OF
A
NOVEL
VERSION
OF
THE
ABOVE
RESPECTIVELY
WITH
TWO
HIDDEN
LAYERS
WOULD
IN
PRINCIPLE
BE
BOOK
RECENT
WORK
ON
AUTOMATING
HYPERPARAMETER
SEARCH
ABLE
TO
PRESERVE
INFORMATION
INTO
THE
POOLING
SECOND
IS
ALSO
MAKING
IT
MORE
CONVENIENT
EFFICIENT
HIDDEN
LAYER
THERE
IS
NO
GUARANTEE
THAT
THE
SECOND
LAYER
AND
REPRODUCIBLE
FEATURES
ARE
MORE
INVARIANT
THAN
THE
LOW
LEVEL
FIRST
LAYER
INCORPORATING
GENERIC
AI
LEVEL
PRIORS
WE
HAVE
COVERED
FEATURES
HOWEVER
THERE
IS
SOME
EMPIRICAL
EVIDENCE
THAT
MANY
HIGH
LEVEL
GENERIC
PRIORS
THAT
WE
BELIEVE
COULD
BRING
THE
SECOND
LAYER
OF
THE
DBN
TENDS
TO
DISPLAY
MORE
MACHINE
LEARNING
CLOSER
TO
AI
BY
IMPROVING
REPRESENTATION
INVARIANCE
THAN
THE
FIRST
LAYER
LEARNING
MANY
OF
THESE
PRIORS
RELATE
TO
THE
ASSUMED
A
MORE
PRINCIPLED
APPROACH
FROM
THE
PERSPECTIVE
OF
EXISTENCE
OF
MULTIPLE
UNDERLYING
FACTORS
OF
VARIATION
WHOSE
ENSURING
A
MORE
ROBUST
COMPACT
FEATURE
REPRESENTATION
CAN
VARIATIONS
ARE
IN
SOME
SENSE
ORTHOGONAL
TO
EACH
OTHER
THEY
BE
CONCEIVED
BY
RECONSIDERING
THE
DISENTANGLING
OF
FEATURES
ARE
EXPECTED
TO
BE
ORGANIZED
AT
MULTIPLE
LEVELS
OF
ABSTRAC
THROUGH
THE
LENS
OF
ITS
GENERATIVE
EQUIVALENT
FEATURE
TION
HENCE
THE
NEED
FOR
DEEP
ARCHITECTURES
WHICH
ALSO
HAVE
COMPOSITION
SINCE
MANY
UNSUPERVISED
LEARNING
ALGORITHMS
STATISTICAL
ADVANTAGES
BECAUSE
THEY
ALLOW
TO
REUSE
PARA
HAVE
A
GENERATIVE
INTERPRETATION
OR
A
WAY
TO
RECONSTRUCT
METERS
IN
A
COMBINATORIALLY
EFFICIENT
WAY
ONLY
A
FEW
OF
INPUTS
FROM
THEIR
HIGH
LEVEL
REPRESENTATION
THE
GENERATIVE
THESE
FACTORS
WOULD
TYPICALLY
BE
RELEVANT
FOR
ANY
PARTICULAR
PERSPECTIVE
CAN
PROVIDE
INSIGHT
INTO
HOW
TO
THINK
ABOUT
EXAMPLE
JUSTIFYING
SPARSITY
OF
REPRESENTATION
THESE
FACTORS
DISENTANGLING
FACTORS
THE
MAJORITY
OF
THE
MODELS
CURRENTLY
ARE
EXPECTED
TO
BE
RELATED
TO
SIMPLE
E
G
LINEAR
DEPEN
USED
TO
CONSTRUCT
INVARIANT
FEATURES
HAVE
THE
INTERPRETATION
DENCIES
WITH
SUBSETS
OF
THESE
EXPLAINING
DIFFERENT
RANDOM
THAT
THEIR
LOW
LEVEL
FEATURES
LINEARLY
COMBINE
TO
CONSTRUCT
VARIABLES
OF
INTEREST
INPUTS
TASKS
AND
VARYING
IN
STRUC
THE
DATA
THIS
IS
A
FAIRLY
RUDIMENTARY
FORM
OF
FEATURE
TURED
WAYS
IN
TIME
AND
SPACE
TEMPORAL
AND
SPATIAL
COMPOSITION
WITH
SIGNIFICANT
LIMITATIONS
FOR
EXAMPLE
IT
IS
COHERENCE
WE
EXPECT
FUTURE
SUCCESSFUL
APPLICATIONS
OF
NOT
POSSIBLE
TO
LINEARLY
COMBINE
A
FEATURE
WITH
A
GENERIC
REPRESENTATION
LEARNING
TO
REFINE
AND
INCREASE
THAT
LIST
OF
TRANSFORMATION
SUCH
AS
TRANSLATION
TO
GENERATE
A
TRANS
PRIORS
AND
TO
INCORPORATE
MOST
OF
THEM
INSTEAD
OF
FOCUSING
ON
ONLY
ONE
RESEARCH
IN
TRAINING
CRITERIA
THAT
BETTER
TAKE
FORMED
VERSION
OF
THE
FEATURE
NOR
CAN
WE
EVEN
CONSIDER
A
THESE
PRIORS
INTO
ACCOUNT
IS
LIKELY
TO
MOVE
US
CLOSER
TO
THE
GENERIC
COLOR
FEATURE
BEING
LINEARLY
COMBINED
WITH
A
LONG
TERM
OBJECTIVE
OF
DISCOVERING
LEARNING
ALGORITHMS
THAT
GRAYSCALE
STIMULUS
PATTERN
TO
GENERATE
A
COLORED
PATTERN
IT
CAN
DISENTANGLE
THE
UNDERLYING
EXPLANATORY
FACTORS
WOULD
SEEM
THAT
IF
WE
ARE
TO
TAKE
THE
NOTION
OF
DISEN
INFERENCE
WE
ANTICIPATE
THAT
METHODS
BASED
ON
DIRECTLY
TANGLING
SERIOUSLY
WE
REQUIRE
A
RICHER
INTERACTION
OF
PARAMETERIZING
A
REPRESENTATION
FUNCTION
WILL
INCORPORATE
FEATURES
THAN
THAT
OFFERED
BY
SIMPLE
LINEAR
COMBINATIONS
MORE
AND
MORE
OF
THE
ITERATIVE
TYPE
OF
COMPUTATION
ONE
IT
IS
A
CHALLENGING
TASK
TO
DEVELOP
EFFECTIVE
AND
EFFICIENT
AP
PEARANCE
MODELS
FOR
ROBUST
OBJECT
TRACKING
DUE
TO
FACTORS
SUCH
AS
POSE
VARIATION
ILLUMINATION
CHANGE
OCCLUSION
AND
MOTION
BLUR
EXISTING
ON
LINE
TRACKING
ALGORITHMS
OFTEN
UPDATE
MODELS
WITH
SAMPLES
FROM
OBSER
VATIONS
IN
RECENT
FRAMES
WHILE
MUCH
SUCCESS
HAS
BEEN
DEMONSTRATED
NUMEROUS
ISSUES
REMAIN
TO
BE
ADDRESSED
FIRST
WHILE
THESE
ADAPTIVE
APPEARANCE
MODELS
ARE
DATA
DEPENDENT
THERE
DOES
NOT
EXIST
SUFFICIENT
AMOUNT
OF
DATA
FOR
ONLINE
ALGORITHMS
TO
LEARN
AT
THE
OUTSET
SECOND
ONLINE
TRACKING
ALGORITHMS
OFTEN
ENCOUNTER
THE
DRIFT
PROBLEMS
AS
A
RE
SULT
OF
SELF
TAUGHT
LEARNING
THESE
MIS
ALIGNED
SAMPLES
ARE
LIKELY
TO
BE
ADDED
AND
DEGRADE
THE
APPEARANCE
MODELS
IN
THIS
PAPER
WE
PROPOSE
A
SIMPLE
YET
EFFECTIVE
AND
EFFICIENT
TRACKING
ALGORITHM
WITH
AN
APPEARANCE
MODEL
BASED
ON
FEATURES
EXTRACTED
FROM
THE
MULTI
SCALE
IMAGE
FEATURE
SPACE
WITH
DATA
INDEPENDENT
BASIS
OUR
APPEARANCE
MODEL
EMPLOYS
NON
ADAPTIVE
RANDOM
PROJECTIONS
THAT
PRESERVE
THE
STRUCTURE
OF
THE
IMAGE
FEATURE
SPACE
OF
OBJECTS
A
VERY
SPARSE
MEASUREMENT
MATRIX
IS
ADOPTED
TO
EFFICIENTLY
EXTRACT
THE
FEATURES
FOR
THE
APPEARANCE
MODEL
WE
COM
PRESS
SAMPLES
OF
FOREGROUND
TARGETS
AND
THE
BACKGROUND
USING
THE
SAME
SPARSE
MEASUREMENT
MATRIX
THE
TRACKING
TASK
IS
FORMULATED
AS
A
BINARY
CLASSIFICATION
VIA
A
NAIVE
BAYES
CLASSIFIER
WITH
ONLINE
UPDATE
IN
THE
COM
PRESSED
DOMAIN
THE
PROPOSED
COMPRESSIVE
TRACKING
ALGORITHM
RUNS
IN
REAL
TIME
AND
PERFORMS
FAVORABLY
AGAINST
STATE
OF
THE
ART
ALGORITHMS
ON
CHALLENGING
SEQUENCES
IN
TERMS
OF
EFFICIENCY
ACCURACY
AND
ROBUSTNESS
INTRODUCTION
DESPITE
THAT
NUMEROUS
ALGORITHMS
HAVE
BEEN
PROPOSED
IN
THE
LITERATURE
OBJECT
TRACKING
REMAINS
A
CHALLENGING
PROBLEM
DUE
TO
APPEARANCE
CHANGE
CAUSED
BY
POSE
ILLUMINATION
OCCLUSION
AND
MOTION
AMONG
OTHERS
AN
EFFECTIVE
APPEARANCE
MODEL
IS
OF
PRIME
IMPORTANCE
FOR
THE
SUCCESS
OF
A
TRACKING
ALGORITHM
THAT
HAS
BEEN
ATTRACTING
MUCH
ATTENTION
IN
RECENT
YEARS
TRACKING
ALGORITHMS
CAN
BE
GENERALLY
CATEGORIZED
AS
EITHER
GENERATIVE
OR
DISCRIMINATIVE
BASED
ON
THEIR
APPEARANCE
MODELS
GENERATIVE
TRACKING
ALGORITHMS
TYPICALLY
LEARN
A
MODEL
TO
REPRESENT
THE
TARGET
OBJECT
AND
THEN
USE
IT
TO
SEARCH
FOR
THE
IMAGE
REGION
WITH
MINIMAL
RECONSTRUCTION
ERROR
BLACK
ET
AL
LEARN
AN
OFF
LINE
SUBSPACE
MODEL
TO
REPRESENT
THE
OBJECT
OF
INTEREST
FOR
TRACKING
THE
IVT
METHOD
UTILIZES
AN
INCREMENTAL
SUBSPACE
MODEL
A
FITZGIBBON
ET
AL
EDS
ECCV
PART
III
LNCS
PP
C
SPRINGER
VERLAG
BERLIN
HEIDELBERG
REAL
TIME
COMPRESSIVE
TRACKING
TO
ADAPT
APPEARANCE
CHANGES
RECENTLY
SPARSE
REPRESENTATION
HAS
BEEN
USED
IN
THE
TRACKER
WHERE
AN
OBJECT
IS
MODELED
BY
A
SPARSE
LINEAR
COMBINATION
OF
TARGET
AND
TRIVIAL
TEMPLATES
HOWEVER
THE
COMPUTATIONAL
COMPLEXITY
OF
THIS
TRACKER
IS
RATHER
HIGH
THEREBY
LIMITING
ITS
APPLICATIONS
IN
REAL
TIME
SCENARIOS
LI
ET
AL
FURTHER
EXTEND
THE
TRACKER
BY
USING
THE
ORTHOGONAL
MATCHING
PURSUIT
ALGORITHM
FOR
SOLVING
THE
OPTIMIZATION
PROBLEMS
EFFICIENTLY
DESPITE
MUCH
DEMONSTRATED
SUCCESS
OF
THESE
ONLINE
GENERATIVE
TRACKING
ALGORITHMS
SEVERAL
PROBLEMS
REMAIN
TO
BE
SOLVED
FIRST
NUMEROUS
TRAINING
SAMPLES
CROPPED
FROM
CONSECUTIVE
FRAMES
ARE
REQUIRED
IN
ORDER
TO
LEARN
AN
APPEARANCE
MODEL
ONLINE
SINCE
THERE
ARE
ONLY
A
FEW
SAMPLES
AT
THE
OUTSET
MOST
TRACKING
ALGORITHMS
OFTEN
ASSUME
THAT
THE
TARGET
APPEARANCE
DOES
NOT
CHANGE
MUCH
DURING
THIS
PERIOD
HOWEVER
IF
THE
APPEARANCE
OF
THE
TARGET
CHANGES
SIGNIFICANTLY
AT
THE
BEGINNING
THE
DRIFT
PROBLEM
IS
LIKELY
TO
OCCUR
SECOND
WHEN
MULTIPLE
SAMPLES
ARE
DRAWN
AT
THE
CURRENT
TARGET
LOCATION
IT
IS
LIKELY
TO
CAUSE
DRIFT
AS
THE
APPEARANCE
MODEL
NEEDS
TO
ADAPT
TO
THESE
POTENTIALLY
MIS
ALIGNED
EXAMPLES
THIRD
THESE
GENERATIVE
ALGORITHMS
DO
NOT
USE
THE
BACKGROUND
INFORMATION
WHICH
IS
LIKELY
TO
IMPROVE
TRACKING
STABILITY
AND
ACCURACY
DISCRIMINATIVE
ALGORITHMS
POSE
THE
TRACKING
PROBLEM
AS
A
BINARY
CLASSIFICATION
TASK
IN
ORDER
TO
FIND
THE
DECISION
BOUNDARY
FOR
SEPARATING
THE
TARGET
OBJECT
FROM
THE
BACKGROUND
AVIDAN
EXTENDS
THE
OPTICAL
FLOW
APPROACH
WITH
A
SUPPORT
VECTOR
MACHINE
CLASSIFIER
FOR
OBJECT
TRACKING
COLLINS
ET
AL
DEMONSTRATE
THAT
THE
MOST
DISCRIMINATIVE
FEATURES
CAN
BE
LEARNED
ONLINE
TO
SEPARATE
THE
TARGET
OBJECT
FROM
THE
BACKGROUND
GRABNER
ET
AL
PROPOSE
AN
ONLINE
BOOSTING
ALGO
RITHM
TO
SELECT
FEATURES
FOR
TRACKING
HOWEVER
THESE
TRACKERS
ONLY
USE
ONE
POSITIVE
SAMPLE
I
E
THE
CURRENT
TRACKER
LOCATION
AND
A
FEW
NEGATIVE
SAMPLES
WHEN
UPDATING
THE
CLASSIFIER
AS
THE
APPEARANCE
MODEL
IS
UPDATED
WITH
NOISY
AND
POTENTIALLY
MISALIGNED
EXAMPLES
THIS
OFTEN
LEADS
TO
THE
TRACKING
DRIFT
PROBLEM
GRABNER
ET
AL
PROPOSE
AN
ONLINE
SEMI
SUPERVISED
BOOSTING
METHOD
TO
ALLEVI
ATE
THE
DRIFT
PROBLEM
IN
WHICH
ONLY
THE
SAMPLES
IN
THE
FIRST
FRAME
ARE
LABELED
AND
ALL
THE
OTHER
SAMPLES
ARE
UNLABELED
BABENKO
ET
AL
INTRODUCE
MULTIPLE
INSTANCE
LEARNING
INTO
ONLINE
TRACKING
WHERE
SAMPLES
ARE
CONSIDERED
WITHIN
POSI
TIVE
AND
NEGATIVE
BAGS
OR
SETS
RECENTLY
A
SEMI
SUPERVISED
LEARNING
APPROACH
IS
DEVELOPED
IN
WHICH
POSITIVE
AND
NEGATIVE
SAMPLES
ARE
SELECTED
VIA
AN
ONLINE
CLASSIFIER
WITH
STRUCTURAL
CONSTRAINTS
IN
THIS
PAPER
WE
PROPOSE
AN
EFFECTIVE
AND
EFFICIENT
TRACKING
ALGORITHM
WITH
AN
APPEARANCE
MODEL
BASED
ON
FEATURES
EXTRACTED
IN
THE
COMPRESSED
DOMAIN
THE
MAIN
COMPONENTS
OF
OUR
COMPRESSIVE
TRACKING
ALGORITHM
ARE
SHOWN
BY
FIG
URE
OUR
APPEARANCE
MODEL
IS
GENERATIVE
AS
THE
OBJECT
CAN
BE
WELL
REPRESENTED
BASED
ON
THE
FEATURES
EXTRACTED
IN
THE
COMPRESSIVE
DOMAIN
IT
IS
ALSO
DISCRIMI
NATIVE
BECAUSE
WE
USE
THESE
FEATURES
TO
SEPARATE
THE
TARGET
FROM
THE
SURROUND
ING
BACKGROUND
VIA
A
NAIVE
BAYES
CLASSIFIER
IN
OUR
APPEARANCE
MODEL
FEATURES
ARE
SELECTED
BY
AN
INFORMATION
PRESERVING
AND
NON
ADAPTIVE
DIMENSIONALITY
RE
DUCTION
FROM
THE
MULTI
SCALE
IMAGE
FEATURE
SPACE
BASED
ON
COMPRESSIVE
SENSING
THEORIES
IT
HAS
BEEN
DEMONSTRATED
THAT
A
SMALL
NUMBER
OF
RANDOMLY
GENERATED
LINEAR
MEASUREMENTS
CAN
PRESERVE
MOST
OF
THE
SALIENT
INFORMATION
AND
ALLOW
ALMOST
PERFECT
RECONSTRUCTION
OF
THE
SIGNAL
IF
THE
SIGNAL
IS
COMPRESSIBLE
SUCH
AS
NATURAL
IMAGES
OR
AUDIO
WE
USE
A
VERY
SPARSE
MEASUREMENT
MATRIX
THAT
SATISFIES
THE
RESTRICTED
ISOMETRY
PROPERTY
RIP
THEREBY
FACILITATING
EF
FICIENT
PROJECTION
FROM
THE
IMAGE
FEATURE
SPACE
TO
A
LOW
DIMENSIONAL
COMPRESSED
SUBSPACE
FOR
TRACKING
THE
POSITIVE
AND
NEGATIVE
SAMPLES
ARE
PROJECTED
I
E
COMPRESSED
WITH
THE
SAME
SPARSE
MEASUREMENT
MATRIX
AND
DISCRIMINATED
BY
A
SIMPLE
NAIVE
BAYES
CLASSIFIER
LEARNED
ONLINE
THE
PROPOSED
COMPRESSIVE
TRACK
ING
ALGORITHM
RUNS
AT
REAL
TIME
AND
PERFORMS
FAVORABLY
AGAINST
STATE
OF
THE
ART
TRACKERS
ON
CHALLENGING
SEQUENCES
IN
TERMS
OF
EFFICIENCY
ACCURACY
AND
ROBUSTNESS
IDEALLY
WE
EXPECT
R
PROVIDES
A
STABLE
EMBEDDING
THAT
APPROXI
MATELY
PRESERVES
THE
DISTANCE
BETWEEN
ALL
PAIRS
OF
ORIGINAL
SIGNALS
THE
JOHNSON
LINDENSTRAUSS
LEMMA
STATES
THAT
WITH
HIGH
PROBABILITY
THE
DISTANCES
BE
TWEEN
THE
POINTS
IN
A
VECTOR
SPACE
ARE
PRESERVED
IF
THEY
ARE
PROJECTED
ONTO
A
RANDOMLY
SELECTED
SUBSPACE
WITH
SUITABLY
HIGH
DIMENSIONS
BARANIUK
ET
AL
PROVED
THAT
THE
RANDOM
MATRIX
SATISFYING
THE
JOHNSON
LINDENSTRAUSS
LEMMA
ALSO
HOLDS
TRUE
FOR
THE
RESTRICTED
ISOMETRY
PROPERTY
IN
COMPRESSIVE
SENSING
THERE
FORE
IF
THE
RANDOM
MATRIX
R
IN
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
WE
CAN
RECONSTRUCT
X
WITH
MINIMUM
ERROR
FROM
V
WITH
HIGH
PROBABILITY
IF
X
IS
COMPRESSIVE
SUCH
AS
AUDIO
OR
IMAGE
WE
CAN
ENSURE
THAT
V
PRESERVES
ALMOST
ALL
THE
INFORMATION
IN
X
THIS
VERY
STRONG
THEORETICAL
SUPPORT
MOTIVATES
US
TO
ANA
LYZE
THE
HIGH
DIMENSIONAL
SIGNALS
VIA
ITS
LOW
DIMENSIONAL
RANDOM
PROJECTIONS
IN
THE
PROPOSED
ALGORITHM
WE
USE
A
VERY
SPARSE
MATRIX
THAT
NOT
ONLY
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
BUT
ALSO
CAN
BE
EFFICIENTLY
COMPUTED
FOR
REAL
TIME
TRACKING
RANDOM
MEASUREMENT
MATRIX
A
TYPICAL
MEASUREMENT
MATRIX
SATISFYING
THE
RESTRICTED
ISOMETRY
PROPERTY
IS
THE
RANDOM
GAUSSIAN
MATRIX
R
RN
M
WHERE
RIJ
N
AS
USED
IN
NUMEROUS
WORKS
RECENTLY
HOWEVER
AS
THE
MATRIX
IS
DENSE
THE
MEMORY
AND
COMPUTATIONAL
LOADS
ARE
STILL
LARGE
WHEN
M
IS
LARGE
IN
THIS
PAPER
WE
ADOPT
A
VERY
SPARSE
RANDOM
MEASUREMENT
MATRIX
WITH
ENTRIES
DEFINED
AS
ACHLIOPTAS
PROVED
THAT
THIS
TYPE
OF
MATRIX
WITH
OR
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
THIS
MATRIX
IS
VERY
EASY
TO
COMPUTE
WHICH
RE
QUIRES
ONLY
A
UNIFORM
RANDOM
GENERATOR
MORE
IMPORTANTLY
WHEN
IT
IS
VERY
SPARSE
WHERE
TWO
THIRDS
OF
THE
COMPUTATION
CAN
BE
AVOIDED
IN
ADDITION
LI
ET
AL
SHOWED
THAT
FOR
O
M
X
RM
THIS
MATRIX
IS
ASYMPTOTICALLY
NORMAL
EVEN
WHEN
M
LOG
M
THE
RANDOM
PROJECTIONS
ARE
ALMOST
AS
ACCU
RATE
AS
THE
CONVENTIONAL
RANDOM
PROJECTIONS
WHERE
RIJ
N
IN
THIS
WORK
WE
SET
M
WHICH
MAKES
A
VERY
SPARSE
RANDOM
MATRIX
FOR
EACH
ROW
OF
R
ONLY
ABOUT
C
C
ENTRIES
NEED
TO
BE
COMPUTED
THEREFORE
THE
COMPUTATIONAL
COMPLEXITY
IS
ONLY
O
CN
WHICH
IS
VERY
LOW
FURTHERMORE
WE
ONLY
NEED
TO
STORE
THE
NONZERO
ENTRIES
OF
R
WHICH
MAKES
THE
MEMORY
REQUIREMENT
ALSO
VERY
LIGHT
IN
THIS
SECTION
WE
PRESENT
OUR
TRACKING
ALGORITHM
IN
DETAILS
THE
TRACKING
PROB
LEM
IS
FORMULATED
AS
A
DETECTION
TASK
AND
OUR
ALGORITHM
IS
SHOWN
IN
FIGURE
WE
ASSUME
THAT
THE
TRACKING
WINDOW
IN
THE
FIRST
FRAME
HAS
BEEN
DETERMINED
AT
EACH
FRAME
WE
SAMPLE
SOME
POSITIVE
SAMPLES
NEAR
THE
CURRENT
TARGET
LOCATION
AND
NEGATIVE
SAMPLES
FAR
AWAY
FROM
THE
OBJECT
CENTER
TO
UPDATE
THE
CLASSIFIER
TO
PREDICT
THE
OBJECT
LOCATION
IN
THE
NEXT
FRAME
WE
DRAW
SOME
SAMPLES
AROUND
THE
CURRENT
TARGET
LOCATION
AND
DETERMINE
THE
ONE
WITH
THE
MAXIMAL
CLASSIFICATION
SCORE
GRAPHICAL
REPRESENTATION
OF
COMPRESSING
A
HIGH
DIMENSIONAL
VECTOR
X
TO
A
LOW
DIMENSIONAL
VECTOR
V
IN
THE
MATRIX
R
DARK
GRAY
AND
WHITE
RECTANGLES
REPRESENT
NEG
ATIVE
POSITIVE
AND
ZERO
ENTRIES
RESPECTIVELY
THE
BLUE
ARROWS
ILLUSTRATE
THAT
ONE
OF
NONZERO
ENTRIES
OF
ONE
ROW
OF
R
SENSING
AN
ELEMENT
IN
X
IS
EQUIVALENT
TO
A
RECTANGLE
FILTER
CONVOLVING
THE
INTENSITY
AT
A
FIXED
POSITION
OF
AN
INPUT
IMAGE
EFFICIENT
DIMENSIONALITY
REDUCTION
FOR
EACH
SAMPLE
Z
RW
H
TO
DEAL
WITH
THE
SCALE
PROBLEM
WE
REPRESENT
IT
BY
CONVOLVING
Z
WITH
A
SET
OF
RECTANGLE
FILTERS
AT
MULTIPLE
SCALES
HW
H
DEFINED
AS
WHERE
I
AND
J
ARE
THE
WIDTH
AND
HEIGHT
OF
A
RECTANGLE
FILTER
RESPECTIVELY
THEN
WE
REPRESENT
EACH
FILTERED
IMAGE
AS
A
COLUMN
VECTOR
IN
RWH
AND
THEN
CONCATENATE
THESE
VECTORS
AS
A
VERY
HIGH
DIMENSIONAL
MULTI
SCALE
IMAGE
FEATURE
VECTOR
X
XM
RM
WHERE
M
WH
THE
DIMENSIONALITY
M
IS
TYPICALLY
IN
THE
ORDER
OF
TO
WE
ADOPT
A
SPARSE
RANDOM
MATRIX
R
IN
WITH
M
TO
PROJECT
X
ONTO
A
VECTOR
V
RN
IN
A
LOW
DIMENSIONAL
SPACE
THE
RANDOM
MATRIX
R
NEEDS
TO
BE
COMPUTED
ONLY
ONCE
OFF
LINE
AND
REMAINS
FIXED
THROUGHOUT
THE
TRACKING
PROCESS
FOR
THE
SPARSE
MATRIX
R
IN
THE
COMPUTATIONAL
LOAD
IS
VERY
LIGHT
AS
SHOWN
BY
FIGURE
WE
ONLY
NEED
TO
STORE
THE
NONZERO
ENTRIES
IN
R
AND
THE
POSITIONS
OF
RECTANGLE
FILTERS
IN
AN
INPUT
IMAGE
CORRESPONDING
TO
THE
NONZERO
ENTRIES
IN
EACH
ROW
OF
R
THEN
V
CAN
BE
EFFICIENTLY
COMPUTED
BY
USING
R
TO
SPARSELY
MEASURE
THE
RECTANGULAR
FEATURES
WHICH
CAN
BE
EFFICIENTLY
COMPUTED
USING
THE
INTEGRAL
IMAGE
METHOD
ANALYSIS
OF
LOW
DIMENSIONAL
COMPRESSIVE
FEATURES
AS
SHOWN
IN
FIGURE
EACH
ELEMENT
VI
IN
THE
LOW
DIMENSIONAL
FEATURE
V
RN
IS
A
LINEAR
COMBINATION
OF
SPATIALLY
DISTRIBUTED
RECTANGLE
FEATURES
AT
DIFFERENT
SCALES
AS
THE
COEFFICIENTS
IN
THE
MEASUREMENT
MATRIX
CAN
BE
POSITIVE
OR
NEGATIVE
VIA
THE
COMPRESSIVE
FEATURES
COMPUTE
THE
RELATIVE
INTENSITY
DIFFERENCE
IN
A
WAY
SIMILAR
TO
THE
GENERALIZED
HAAR
LIKE
FEATURES
SEE
ALSO
FIGURE
THE
HAAR
LIKE
FEATURES
HAVE
BEEN
WIDELY
USED
FOR
OBJECT
DETECTION
WITH
DEMONSTRATED
SUCCESS
THE
BASIC
TYPES
OF
THESE
HAAR
LIKE
FEATURES
ARE
TYPICALLY
DE
SIGNED
FOR
DIFFERENT
TASKS
THERE
OFTEN
EXIST
A
VERY
LARGE
NUMBER
OF
IDEALLY
WE
EXPECT
R
PROVIDES
A
STABLE
EMBEDDING
THAT
APPROXI
MATELY
PRESERVES
THE
DISTANCE
BETWEEN
ALL
PAIRS
OF
ORIGINAL
SIGNALS
THE
JOHNSON
LINDENSTRAUSS
LEMMA
STATES
THAT
WITH
HIGH
PROBABILITY
THE
DISTANCES
BE
TWEEN
THE
POINTS
IN
A
VECTOR
SPACE
ARE
PRESERVED
IF
THEY
ARE
PROJECTED
ONTO
A
RANDOMLY
SELECTED
SUBSPACE
WITH
SUITABLY
HIGH
DIMENSIONS
BARANIUK
ET
AL
PROVED
THAT
THE
RANDOM
MATRIX
SATISFYING
THE
JOHNSON
LINDENSTRAUSS
LEMMA
ALSO
HOLDS
TRUE
FOR
THE
RESTRICTED
ISOMETRY
PROPERTY
IN
COMPRESSIVE
SENSING
THERE
FORE
IF
THE
RANDOM
MATRIX
R
IN
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
WE
CAN
RECONSTRUCT
X
WITH
MINIMUM
ERROR
FROM
V
WITH
HIGH
PROBABILITY
IF
X
IS
COMPRESSIVE
SUCH
AS
AUDIO
OR
IMAGE
WE
CAN
ENSURE
THAT
V
PRESERVES
ALMOST
ALL
THE
INFORMATION
IN
X
THIS
VERY
STRONG
THEORETICAL
SUPPORT
MOTIVATES
US
TO
ANA
LYZE
THE
HIGH
DIMENSIONAL
SIGNALS
VIA
ITS
LOW
DIMENSIONAL
RANDOM
PROJECTIONS
IN
THE
PROPOSED
ALGORITHM
WE
USE
A
VERY
SPARSE
MATRIX
THAT
NOT
ONLY
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
BUT
ALSO
CAN
BE
EFFICIENTLY
COMPUTED
FOR
REAL
TIME
TRACKING
RANDOM
MEASUREMENT
MATRIX
A
TYPICAL
MEASUREMENT
MATRIX
SATISFYING
THE
RESTRICTED
ISOMETRY
PROPERTY
IS
THE
RANDOM
GAUSSIAN
MATRIX
R
RN
M
WHERE
RIJ
N
AS
USED
IN
NUMEROUS
WORKS
RECENTLY
HOWEVER
AS
THE
MATRIX
IS
DENSE
THE
MEMORY
AND
COMPUTATIONAL
LOADS
ARE
STILL
LARGE
WHEN
M
IS
LARGE
IN
THIS
PAPER
WE
ADOPT
A
VERY
SPARSE
RANDOM
MEASUREMENT
MATRIX
WITH
ENTRIES
DEFINED
AS
ACHLIOPTAS
PROVED
THAT
THIS
TYPE
OF
MATRIX
WITH
OR
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
THIS
MATRIX
IS
VERY
EASY
TO
COMPUTE
WHICH
RE
QUIRES
ONLY
A
UNIFORM
RANDOM
GENERATOR
MORE
IMPORTANTLY
WHEN
IT
IS
VERY
SPARSE
WHERE
TWO
THIRDS
OF
THE
COMPUTATION
CAN
BE
AVOIDED
IN
ADDITION
LI
ET
AL
SHOWED
THAT
FOR
O
M
X
RM
THIS
MATRIX
IS
ASYMPTOTICALLY
NORMAL
EVEN
WHEN
M
LOG
M
THE
RANDOM
PROJECTIONS
ARE
ALMOST
AS
ACCU
RATE
AS
THE
CONVENTIONAL
RANDOM
PROJECTIONS
WHERE
RIJ
N
IN
THIS
WORK
WE
SET
M
WHICH
MAKES
A
VERY
SPARSE
RANDOM
MATRIX
FOR
EACH
ROW
OF
R
ONLY
ABOUT
C
C
ENTRIES
NEED
TO
BE
COMPUTED
THEREFORE
THE
COMPUTATIONAL
COMPLEXITY
IS
ONLY
O
CN
WHICH
IS
VERY
LOW
FURTHERMORE
WE
ONLY
NEED
TO
STORE
THE
NONZERO
ENTRIES
OF
R
WHICH
MAKES
THE
MEMORY
REQUIREMENT
ALSO
VERY
LIGHT
IN
THIS
SECTION
WE
PRESENT
OUR
TRACKING
ALGORITHM
IN
DETAILS
THE
TRACKING
PROB
LEM
IS
FORMULATED
AS
A
DETECTION
TASK
AND
OUR
ALGORITHM
IS
SHOWN
IN
FIGURE
WE
ASSUME
THAT
THE
TRACKING
WINDOW
IN
THE
FIRST
FRAME
HAS
BEEN
DETERMINED
AT
EACH
FRAME
WE
SAMPLE
SOME
POSITIVE
SAMPLES
NEAR
THE
CURRENT
TARGET
LOCATION
AND
NEGATIVE
SAMPLES
FAR
AWAY
FROM
THE
OBJECT
CENTER
TO
UPDATE
THE
CLASSIFIER
TO
PREDICT
THE
OBJECT
LOCATION
IN
THE
NEXT
FRAME
WE
DRAW
SOME
SAMPLES
AROUND
THE
CURRENT
TARGET
LOCATION
AND
DETERMINE
THE
ONE
WITH
THE
MAXIMAL
CLASSIFICATION
SCORE
GRAPHICAL
REPRESENTATION
OF
COMPRESSING
A
HIGH
DIMENSIONAL
VECTOR
X
TO
A
LOW
DIMENSIONAL
VECTOR
V
IN
THE
MATRIX
R
DARK
GRAY
AND
WHITE
RECTANGLES
REPRESENT
NEG
ATIVE
POSITIVE
AND
ZERO
ENTRIES
RESPECTIVELY
THE
BLUE
ARROWS
ILLUSTRATE
THAT
ONE
OF
NONZERO
ENTRIES
OF
ONE
ROW
OF
R
SENSING
AN
ELEMENT
IN
X
IS
EQUIVALENT
TO
A
RECTANGLE
FILTER
CONVOLVING
THE
INTENSITY
AT
A
FIXED
POSITION
OF
AN
INPUT
IMAGE
EFFICIENT
DIMENSIONALITY
REDUCTION
FOR
EACH
SAMPLE
Z
RW
H
TO
DEAL
WITH
THE
SCALE
PROBLEM
WE
REPRESENT
IT
BY
CONVOLVING
Z
WITH
A
SET
OF
RECTANGLE
FILTERS
AT
MULTIPLE
SCALES
HW
H
DEFINED
AS
WHERE
I
AND
J
ARE
THE
WIDTH
AND
HEIGHT
OF
A
RECTANGLE
FILTER
RESPECTIVELY
THEN
WE
REPRESENT
EACH
FILTERED
IMAGE
AS
A
COLUMN
VECTOR
IN
RWH
AND
THEN
CONCATENATE
THESE
VECTORS
AS
A
VERY
HIGH
DIMENSIONAL
MULTI
SCALE
IMAGE
FEATURE
VECTOR
X
XM
RM
WHERE
M
WH
THE
DIMENSIONALITY
M
IS
TYPICALLY
IN
THE
ORDER
OF
TO
WE
ADOPT
A
SPARSE
RANDOM
MATRIX
R
IN
WITH
M
TO
PROJECT
X
ONTO
A
VECTOR
V
RN
IN
A
LOW
DIMENSIONAL
SPACE
THE
RANDOM
MATRIX
R
NEEDS
TO
BE
COMPUTED
ONLY
ONCE
OFF
LINE
AND
REMAINS
FIXED
THROUGHOUT
THE
TRACKING
PROCESS
FOR
THE
SPARSE
MATRIX
R
IN
THE
COMPUTATIONAL
LOAD
IS
VERY
LIGHT
AS
SHOWN
BY
FIGURE
WE
ONLY
NEED
TO
STORE
THE
NONZERO
ENTRIES
IN
R
AND
THE
POSITIONS
OF
RECTANGLE
FILTERS
IN
AN
INPUT
IMAGE
CORRESPONDING
TO
THE
NONZERO
ENTRIES
IN
EACH
ROW
OF
R
THEN
V
CAN
BE
EFFICIENTLY
COMPUTED
BY
USING
R
TO
SPARSELY
MEASURE
THE
RECTANGULAR
FEATURES
WHICH
CAN
BE
EFFICIENTLY
COMPUTED
USING
THE
INTEGRAL
IMAGE
METHOD
ANALYSIS
OF
LOW
DIMENSIONAL
COMPRESSIVE
FEATURES
AS
SHOWN
IN
FIGURE
EACH
ELEMENT
VI
IN
THE
LOW
DIMENSIONAL
FEATURE
V
RN
IS
A
LINEAR
COMBINATION
OF
SPATIALLY
DISTRIBUTED
RECTANGLE
FEATURES
AT
DIFFERENT
SCALES
AS
THE
COEFFICIENTS
IN
THE
MEASUREMENT
MATRIX
CAN
BE
POSITIVE
OR
NEGATIVE
VIA
THE
COMPRESSIVE
FEATURES
COMPUTE
THE
RELATIVE
INTENSITY
DIFFERENCE
IN
A
WAY
SIMILAR
TO
THE
GENERALIZED
HAAR
LIKE
FEATURES
SEE
ALSO
FIGURE
THE
HAAR
LIKE
FEATURES
HAVE
BEEN
WIDELY
USED
FOR
OBJECT
DETECTION
WITH
DEMONSTRATED
SUCCESS
THE
BASIC
TYPES
OF
THESE
HAAR
LIKE
FEATURES
ARE
TYPICALLY
DE
SIGNED
FOR
DIFFERENT
TASKS
THERE
OFTEN
EXIST
A
VERY
LARGE
NUMBER
OF
PROBABILITY
DISTRIBUTIONS
OF
THREE
DIFFERENT
FEATURES
IN
A
LOW
DIMENSIONAL
SPACE
THE
RED
STAIR
REPRESENTS
THE
HISTOGRAM
OF
POSITIVE
SAMPLES
WHILE
THE
BLUE
ONE
REPRESENTS
THE
HISTOGRAM
OF
NEGATIVE
SAMPLES
THE
RED
AND
BLUE
LINES
DENOTE
THE
CORRESPONDING
ESTIMATED
DISTRIBUTIONS
BY
OUR
INCREMENTAL
UPDATE
METHOD
HAAR
LIKE
FEATURES
WHICH
MAKE
THE
COMPUTATIONAL
LOAD
VERY
HEAVY
THIS
PROBLEM
IS
ALLEVIATED
BY
BOOSTING
ALGORITHMS
FOR
SELECTING
IMPORTANT
FEATURES
RE
CENTLY
BABENKO
ET
AL
ADOPTED
THE
GENERALIZED
HAAR
LIKE
FEATURES
WHERE
EACH
ONE
IS
A
LINEAR
COMBINATION
OF
RANDOMLY
GENERATED
RECTANGLE
FEATURES
AND
USE
ONLINE
BOOSTING
TO
SELECT
A
SMALL
SET
OF
THEM
FOR
OBJECT
TRACKING
IN
OUR
WORK
THE
LARGE
SET
OF
HAAR
LIKE
FEATURES
ARE
COMPRESSIVELY
SENSED
WITH
A
VERY
SPARSE
MEASUREMENT
MATRIX
THE
COMPRESSIVE
SENSING
THEORIES
ENSURE
THAT
THE
EXTRACTED
FEATURES
OF
OUR
ALGORITHM
PRESERVE
ALMOST
ALL
THE
INFORMATION
OF
THE
ORIGINAL
IM
AGE
THEREFORE
WE
CAN
CLASSIFY
THE
PROJECTED
FEATURES
IN
THE
COMPRESSED
DOMAIN
EFFICIENTLY
WITHOUT
CURSE
OF
DIMENSIONALITY
CLASSIFIER
CONSTRUCTION
AND
UPDATE
FOR
EACH
SAMPLE
Z
RM
ITS
LOW
DIMENSIONAL
REPRESENTATION
IS
V
VN
RN
WITH
M
N
WE
ASSUME
ALL
ELEMENTS
IN
V
ARE
INDEPENDENTLY
DISTRIBUTED
AND
MODEL
THEM
WITH
A
NAIVE
BAYES
CLASSIFIER
FIGURE
SHOWS
THE
PROBABILITY
DISTRIBUTIONS
FOR
THREE
DIF
FERENT
FEATURES
OF
THE
POSITIVE
AND
NEGATIVE
SAMPLES
CROPPED
FROM
A
FEW
FRAMES
OF
A
SEQUENCE
FOR
CLARITY
OF
PRESENTATION
IT
SHOWS
THAT
A
GAUSSIAN
DISTRIBUTION
WITH
ONLINE
UPDATE
USING
IS
A
GOOD
APPROXIMATION
OF
THE
FEATURES
IN
THE
PROJECTED
SPACE
THE
MAIN
STEPS
OF
OUR
ALGORITHM
ARE
SUMMARIZED
IN
ALGORITHM
DISCUSSION
WE
NOTE
THAT
SIMPLICITY
IS
THE
PRIME
CHARACTERISTIC
OF
OUR
ALGORITHM
IN
WHICH
THE
PROPOSED
SPARSE
MEASUREMENT
MATRIX
R
IS
INDEPENDENT
OF
ANY
TRAINING
SAMPLES
THEREBY
RESULTING
IN
A
VERY
EFFICIENT
METHOD
IN
ADDITION
OUR
ALGORITHM
ACHIEVES
ROBUST
PERFORMANCE
AS
DISCUSSED
BELOW
DIFFERENCE
WITH
RELATED
WORK
IT
SHOULD
BE
NOTED
THAT
OUR
ALGORITHM
IS
DIFFERENT
FROM
THE
RECENTLY
PROPOSED
TRACKER
AND
COMPRESSIVE
SENSING
TRACKER
FIRST
BOTH
ALGORITHMS
ARE
GENERATIVE
MODELS
THAT
ENCODE
AN
OB
JECT
SAMPLE
BY
SPARSE
REPRESENTATION
OF
TEMPLATES
USING
MINIMIZATION
THUS
THE
TRAINING
SAMPLES
CROPPED
FROM
THE
PREVIOUS
FRAMES
ARE
STORED
AND
UPDATED
BUT
THIS
IS
NOT
REQUIRED
IN
OUR
ALGORITHM
DUE
TO
THE
USE
OF
A
DATA
INDEPENDENT
MEASUREMENT
MATRIX
SECOND
OUR
ALGORITHM
EXTRACTS
A
LINEAR
COMBINATION
OF
GEN
ERALIZED
HAAR
LIKE
FEATURES
BUT
THESE
TRACKERS
USE
THE
HOLISTIC
TEMPLATES
FOR
SPARSE
REPRESENTATION
WHICH
ARE
LESS
ROBUST
AS
DEMONSTRATED
IN
OUR
EXPERI
MENTS
IN
AN
ORTHOGONAL
MATCHING
PURSUIT
ALGORITHM
IS
APPLIED
TO
SOLVE
THE
MINIMIZATION
PROBLEMS
THIRD
BOTH
OF
THESE
TRACKING
ALGORITHMS
NEED
TO
SOLVE
NUMEROUS
TIME
CONSUMING
MINIMIZATION
PROBLEMS
BUT
OUR
ALGORITHM
IS
EFFICIENT
AS
ONLY
MATRIX
MULTIPLICATIONS
ARE
REQUIRED
RANDOM
PROJECTION
VS
PRINCIPAL
COMPONENT
ANALYSIS
FOR
VISUAL
TRACK
ING
DIMENSIONALITY
REDUCTION
ALGORITHMS
SUCH
AS
PRINCIPAL
COMPONENT
ANALYSIS
ILLUSTRATION
OF
ROBUSTNESS
OF
OUR
ALGORITHM
TO
AMBIGUITY
IN
DETECTION
TOP
ROW
THREE
POSITIVE
SAMPLES
THE
SAMPLE
IN
RED
RECTANGLE
IS
THE
MOST
CORRECT
POSITIVE
SAM
PLE
WHILE
OTHER
TWO
IN
YELLOW
RECTANGLES
ARE
LESS
CORRECT
POSITIVE
SAMPLES
BOTTOM
ROW
THE
PROBABILITY
DISTRIBUTIONS
FOR
A
FEATURE
EXTRACTED
FROM
POSITIVE
AND
NEGATIVE
SAMPLES
THE
RED
MARKERS
DENOTE
THE
FEATURE
EXTRACTED
FROM
THE
MOST
CORRECT
POS
ITIVE
SAMPLE
WHILE
THE
YELLOW
MARKERS
DENOTE
THE
FEATURE
EXTRACTED
FROM
THE
TWO
LESS
CORRECT
POSITIVE
SAMPLES
THE
RED
AND
BLUE
STAIRS
AS
WELL
AS
LINES
DENOTE
THE
ESTIMATED
DISTRIBUTIONS
OF
POSITIVE
AND
NEGATIVE
SAMPLES
AS
SHOWN
IN
FIGURE
AND
ITS
VARIATIONS
HAVE
BEEN
WIDELY
USED
IN
GENERATIVE
TRACKING
METHODS
THESE
METHODS
NEED
TO
UPDATE
THE
APPEARANCE
MODELS
FREQUENTLY
FOR
ROBUST
TRACKING
HOWEVER
THESE
METHODS
ARE
SENSITIVE
TO
OCCLUSION
DUE
TO
THE
HOLIS
TIC
REPRESENTATION
SCHEMES
FURTHERMORE
IT
IS
NOT
CLEAR
WHETHER
THE
APPEARANCE
MODELS
CAN
BE
UPDATED
CORRECTLY
WITH
NEW
OBSERVATIONS
E
G
WITHOUT
ALIGNMENT
ERRORS
TO
AVOID
TRACKING
DRIFT
IN
CONTRAST
OUR
ALGORITHM
DOES
NOT
SUFFER
FROM
THE
PROBLEMS
WITH
ONLINE
SELF
TAUGHT
LEARNING
APPROACHES
AS
THE
PROPOSED
MODEL
WITH
THE
MEASUREMENT
MATRIX
IS
DATA
INDEPENDENT
IT
HAS
BEEN
SHOWN
THAT
FOR
IMAGE
AND
TEXT
APPLICATIONS
FAVORABLE
RESULTS
CAN
BE
ACHIEVED
BY
METHODS
WITH
RANDOM
PROJECTION
THAN
PRINCIPAL
COMPONENT
ANALYSIS
ROBUSTNESS
TO
AMBIGUITY
IN
DETECTION
THE
TRACKING
BY
DETECTION
METHODS
OFTEN
ENCOUNTER
THE
INHERENT
AMBIGUITY
PROBLEMS
AS
SHOWN
IN
FIGURE
RECENTLY
BABENKO
ET
AL
INTRODUCED
MULTIPLE
INSTANCE
LEARNING
SCHEMES
TO
ALLEVIATE
THE
TRACKING
AMBIGUITY
PROBLEM
OUR
ALGORITHM
IS
ROBUST
TO
THE
AMBIGUITY
PROBLEM
AS
ILLUSTRATED
IN
FIGURE
WHILE
THE
TARGET
APPEARANCE
CHANGES
OVER
TIME
THE
MOST
CORRECT
POSITIVE
SAMPLES
E
G
THE
SAMPLE
IN
THE
RED
RECTANGLE
IN
FIGURE
ARE
SIMILAR
IN
MOST
FRAMES
HOWEVER
THE
LESS
CORRECT
POSITIVE
SAMPLES
E
G
SAMPLES
IN
YELLOW
RECTANGLES
OF
FIGURE
ARE
MUCH
MORE
DIFFERENT
AS
THEY
INVOLVE
SOME
BACKGROUND
INFORMATION
WHICH
VARY
MUCH
MORE
THAN
THOSE
WITHIN
THE
TAR
GET
OBJECT
THUS
THE
DISTRIBUTIONS
FOR
THE
FEATURES
EXTRACTED
FROM
THE
MOST
CORRECT
POSITIVE
SAMPLES
ARE
MORE
CONCENTRATED
THAN
THOSE
FROM
THE
LESS
COR
RECT
POSITIVE
SAMPLES
THIS
IN
TURN
MAKES
THE
FEATURES
FROM
THE
MOST
CORRECT
POSITIVE
SAMPLES
MUCH
MORE
STABLE
THAN
THOSE
FROM
THE
LESS
CORRECT
POSITIVE
SAMPLES
E
G
BOTTOM
ROW
IN
FIGURE
THE
FEATURES
DENOTED
BY
RED
MARKERS
ARE
MORE
STABLE
THAN
THOSE
DENOTED
BY
YELLOW
MARKERS
THUS
OUR
ALGORITHM
IS
ABLE
TO
SELECT
THE
MOST
CORRECT
POSITIVE
SAMPLE
BECAUSE
ITS
PROBABILITY
IS
LARGER
THAN
K
ZHANG
L
ZHANG
AND
M
H
YANG
THOSE
OF
THE
LESS
CORRECT
POSITIVE
SAMPLES
SEE
THE
MARKERS
IN
FIGURE
IN
AD
DITION
OUR
MEASUREMENT
MATRIX
IS
DATA
INDEPENDENT
AND
NO
NOISE
IS
INTRODUCED
BY
MIS
ALIGNED
SAMPLES
ROBUSTNESS
TO
OCCLUSION
EACH
FEATURE
IN
OUR
ALGORITHM
IS
SPATIALLY
LOCALIZED
FIGURE
WHICH
IS
LESS
SENSITIVE
TO
OCCLUSION
THAN
HOLISTIC
REPRESENTATIONS
SIMI
LAR
REPRESENTATIONS
E
G
LOCAL
BINARY
PATTERNS
AND
GENERALIZED
HAAR
LIKE
FEA
TURES
HAVE
BEEN
SHOWN
TO
BE
MORE
EFFECTIVE
IN
HANDLING
OCCLUSION
MOREOVER
FEATURES
ARE
RANDOMLY
SAMPLED
AT
MULTIPLE
SCALES
BY
OUR
ALGORITHM
IN
A
WAY
SIMILAR
TO
WHICH
HAVE
DEMONSTRATED
ROBUST
RESULTS
FOR
DEALING
WITH
OCCLUSION
DIMENSIONALITY
OF
PROJECTED
SPACE
ASSUME
THERE
EXIST
D
INPUT
POINTS
IN
RM
GIVEN
AS
WELL
AS
Β
AND
LET
R
RN
M
BE
A
RANDOM
MATRIX
PROJECTING
DATA
FROM
RM
TO
RN
THE
THEORETICAL
BOUND
FOR
THE
DIMENSION
N
THAT
SATISFIES
THE
JOHNSON
LINDENSTRAUSS
LEMMA
IS
N
LN
D
IN
PRACTICE
BINGHAM
AND
MANNILA
POINTED
OUT
THAT
THIS
BOUND
IS
MUCH
HIGHER
THAN
THAT
SUFFICES
TO
ACHIEVE
GOOD
RESULTS
ON
IMAGE
AND
TEXT
DATA
IN
THEIR
APPLICATIONS
THE
LOWER
BOUND
FOR
N
WHEN
IS
BUT
N
IS
SUFFICIENT
TO
GENERATE
GOOD
RESULTS
IN
OUR
EXPERIMENTS
WITH
SAMPLES
I
E
D
AND
Β
THE
LOWER
BOUND
FOR
N
IS
APPROXIMATELY
ANOTHER
BOUND
DERIVED
FROM
THE
RESTRICTED
ISOMETRY
PROPERTY
IN
COMPRESSIVE
SENSING
IS
MUCH
TIGHTER
THAN
THAT
FROM
JOHNSON
LINDENSTRAUSS
LEMMA
WHERE
N
ΚΒ
LOG
M
Β
AND
Κ
AND
Β
ARE
CONSTANTS
FOR
M
Κ
AND
Β
IT
IS
EXPECTED
THAT
N
WE
FIND
THAT
GOOD
RESULTS
CAN
BE
OBTAINED
WHEN
N
IN
OUR
EXPERIMENTS
EXPERIMENTS
WE
EVALUATE
OUR
TRACKING
ALGORITHM
WITH
STATE
OR
THE
ART
METHODS
ON
CHAL
LENGING
SEQUENCES
AMONG
WHICH
ARE
PUBLICLY
AVAILABLE
AND
ARE
OUR
OWN
THE
ANIMAL
SHAKING
AND
SOCCER
SEQUENCES
ARE
PROVIDED
IN
AND
THE
BOX
AND
JUMPING
ARE
FROM
THE
TRACKERS
WE
COMPARE
WITH
ARE
THE
FRAGMENT
TRACKER
FRAG
THE
ONLINE
ADABOOST
METHOD
OAB
THE
SEMI
SUPERVISED
TRACKER
SEMIB
THE
MILTRACK
ALGORITHM
THE
TRACKER
THE
TLD
TRACKER
AND
THE
STRUCK
METHOD
WE
NOTE
THAT
THE
SOURCE
CODE
OF
IS
NOT
AVAILABLE
FOR
EVALUATION
AND
THE
IMPLEMENTATION
REQUIRES
SOME
TECHNICAL
DETAILS
AND
PARAMETERS
NOT
DISCUSSED
THEREIN
IT
IS
WORTH
NOTICING
THAT
WE
USE
THE
MOST
CHALLENGING
SEQUENCES
FROM
THE
EXISTING
WORKS
FOR
FAIR
COMPARISON
WE
USE
THE
SOURCE
OR
BINARY
CODES
PROVIDED
BY
THE
AUTHORS
WITH
TUNED
PARAMETERS
FOR
BEST
PERFORMANCE
FOR
OUR
COMPARED
TRACKERS
WE
EITHER
USE
THE
TUNED
PA
RAMETERS
FROM
THE
SOURCE
CODES
OR
EMPIRICALLY
SET
THEM
FOR
BEST
RESULTS
SINCE
ALL
OF
THE
TRACKERS
EXCEPT
FOR
FRAG
INVOLVE
RANDOMNESS
WE
RUN
THEM
TIMES
AND
REPORT
THE
AVERAGE
RESULT
FOR
EACH
VIDEO
CLIP
OUR
TRACKER
IS
IMPLEMENTED
IN
MATLAB
WHICH
RUNS
AT
FRAMES
PER
SECOND
FPS
ON
A
PENTIUM
DUAL
CORE
GHZ
CPU
WITH
GB
RAM
THE
SOURCE
CODES
AND
DATASETS
ARE
AVAILABLE
AT
EXPERIMENTAL
SETUP
GIVEN
A
TARGET
LOCATION
AT
THE
CURRENT
FRAME
THE
SEARCH
RADIUS
FOR
DRAWING
POSITIVE
SAMPLES
IS
SET
TO
Α
WHICH
GENERATES
POSITIVE
SAMPLES
THE
INNER
AND
OUTER
RADII
FOR
THE
SET
X
Ζ
Β
THAT
GENERATES
NEGATIVE
SAMPLES
ARE
SET
TO
Ζ
AND
Β
RESPECTIVELY
WE
RANDOMLY
SELECT
NEGATIVE
SAMPLES
FROM
SET
X
Ζ
Β
THE
SEARCH
RADIUS
FOR
SET
DΓ
TO
DETECT
THE
OBJECT
LOCATION
IS
SET
TO
Γ
AND
ABOUT
SAMPLES
ARE
GENERATED
THE
DIMENSIONALITY
OF
PROJECTED
SPACE
IS
SET
TO
N
AND
THE
LEARNING
PARAMETER
Λ
IS
SET
TO
EXPERIMENTAL
RESULTS
ALL
OF
THE
VIDEO
FRAMES
ARE
IN
GRAY
SCALE
AND
WE
USE
TWO
METRICS
TO
EVALUATE
THE
PROPOSED
ALGORITHM
WITH
STATE
OF
THE
ART
TRACKERS
THE
FIRST
METRIC
IS
THE
SUCCESS
RATE
SCORE
AREA
ROI
AREA
ROIT
T
ROIG
ROIG
WHERE
ROIT
IS
THE
TRACKING
BOUNDING
BOX
AND
ROIG
IS
THE
GROUND
TRUTH
BOUNDING
BOX
IF
THE
SCORE
IS
LARGER
THAN
IN
ONE
FRAME
THE
TRACKING
RESULT
IS
CONSIDERED
AS
A
SUCCESS
THE
OTHER
IS
THE
CENTER
LOCATION
ERROR
MEASURED
WITH
MANUALLY
LABELED
GROUND
TRUTH
DATA
TABLE
AND
TABLE
SHOW
THE
QUANTITATIVE
RESULTS
AVERAGED
OVER
TIMES
AS
DESCRIBED
ABOVE
WE
NOTE
THAT
ALTHOUGH
TLD
TRACKER
IS
ABLE
TO
RELOCATE
ON
THE
TARGET
DURING
TRACKING
IT
IS
EASY
TO
LOSE
THE
TARGET
COMPLETELY
FOR
SOME
FRAMES
IN
MOST
OF
THE
TEST
SEQUENCES
THUS
WE
ONLY
SHOW
THE
CENTER
LOCATION
ERRORS
FOR
THE
SEQUENCES
THAT
TLD
CAN
KEEP
TRACK
ALL
THE
TIME
THE
PROPOSED
COMPRESSIVE
TRACKING
ALGORITHM
ACHIEVES
THE
BEST
OR
SECOND
BEST
RESULTS
IN
MOST
SEQUENCES
IN
TERMS
OF
BOTH
SUCCESS
RATE
AND
CENTER
LOCATION
ERROR
FURTHERMORE
OUR
TRACKER
RUNS
FASTER
THAN
ALL
THE
OTHER
ALGORITHMS
ALTHOUGH
THEY
EXCEPT
FOR
THE
TLD
METHOD
AND
TRACKER
ARE
IMPLEMENTED
IN
C
OR
C
WHICH
IS
INTRINSICALLY
MORE
EFFICIENT
THAN
MATLAB
FIGURE
SHOWS
SCREENSHOTS
OF
SOME
TRACKING
RESULTS
K
ZHANG
L
ZHANG
AND
M
H
YANG
TABLE
CENTER
LOCATION
ERROR
CLE
IN
PIXELS
AND
AVERAGE
FRAME
PER
SECOND
FPS
BOLD
FONTS
INDICATE
THE
BEST
PERFORMANCE
WHILE
THE
ITALIC
FONTS
INDICATE
THE
SECOND
BEST
ONES
THE
TOTAL
NUMBER
OF
EVALUATED
FRAMES
IS
SCALE
POSE
AND
ILLUMINATION
CHANGE
FOR
THE
DAVID
INDOOR
SEQUENCE
SHOWN
IN
FIGURE
A
THE
ILLUMINATION
AND
POSE
OF
THE
OBJECT
BOTH
CHANGE
GRADUALLY
THE
MILTRACK
TLD
AND
STRUCK
METHODS
PERFORM
WELL
ON
THIS
SEQUENCE
FOR
THE
SHAKING
SEQUENCE
SHOWN
IN
FIGURE
B
WHEN
THE
STAGE
LIGHT
CHANGES
DRAS
TICALLY
AND
THE
POSE
OF
THE
SUBJECT
CHANGES
RAPIDLY
AS
HE
PERFORMS
ALL
THE
OTHER
TRACKERS
FAIL
TO
TRACK
THE
OBJECT
RELIABLY
THE
PROPOSED
TRACKER
IS
ROBUST
TO
POSE
AND
ILLUMINATION
CHANGES
AS
OBJECT
APPEARANCE
CAN
BE
MODELED
WELL
BY
RANDOM
PROJECTIONS
BASED
ON
THE
JOHNSON
LINDENSTRAUSS
LEMMA
AND
THE
CLASSIFIER
WITH
ONLINE
UPDATE
IS
USED
TO
SEPARATE
FOREGROUND
AND
BACKGROUND
SAMPLES
MOREOVER
THE
PROPOSED
TRACKER
IS
A
DISCRIMINATIVE
MODEL
WITH
LOCAL
FEATURES
THAT
HAS
BEEN
DEMONSTRATED
TO
HANDLE
POSE
VARIATION
WELL
E
G
MILTRACK
THE
GENERATIVE
SUBSPACE
TRACKER
E
G
IVT
HAS
BEEN
SHOWN
TO
BE
EFFECTIVE
IN
DEALING
WITH
LARGE
ILLUMINATION
CHANGES
WHILE
THE
DISCRIMINATIVE
TRACKING
METHOD
WITH
LOCAL
FEATURES
I
E
MILTRACK
HAS
BEEN
DEMONSTRATED
TO
HANDLE
POSE
VARIATION
AD
EQUATELY
FURTHERMORE
THE
FEATURES
WE
USE
ARE
SIMILAR
TO
GENERALIZED
HAAR
LIKE
FEATURES
WHICH
HAVE
BEEN
SHOWN
TO
BE
ROBUST
TO
SCALE
AND
ORIENTATION
CHANGE
AS
ILLUSTRATED
IN
THE
DAVID
INDOOR
SEQUENCE
IN
ADDITION
OUR
TRACKER
PERFORMS
WELL
ON
THE
SYLVESTER
AND
PANDA
SEQUENCES
IN
WHICH
THE
TARGET
OBJECTS
UNDERGO
SIGNIFICANT
POSE
CHANGES
SEE
THE
SUPPLEMENTARY
MATERIAL
FOR
DETAILS
OCCLUSION
AND
POSE
VARIATION
THE
TARGET
OBJECT
IN
OCCLUDED
FACE
SEQUENCE
IN
FIGURE
C
UNDERGOES
LARGE
POSE
VARIATION
AND
HEAVY
OCCLUSION
ONLY
THE
MIL
TRACK
AND
STRUCK
METHODS
AS
WELL
AS
THE
PROPOSED
ALGORITHM
PERFORM
WELL
ON
THIS
SEQUENCE
IN
ADDITION
OUR
TRACKER
ACHIEVES
THE
BEST
PERFORMANCE
IN
TERMS
OF
SUCCESS
RATE
CENTER
LOCATION
ERROR
AND
FRAME
RATE
THE
TARGET
PLAYER
IN
SOC
CER
SEQUENCE
IS
HEAVILY
OCCLUDED
BY
OTHERS
MANY
TIMES
WHEN
HE
IS
HOLDING
UP
THE
TROPHY
AS
SHOWN
IN
FIGURE
D
IN
SOME
FRAMES
THE
OBJECT
IS
ALMOST
FULLY
MOREOVER
THE
OBJECT
UNDERGOES
DRASTIC
MOTION
BLUR
AND
ILLUMINATION
CHANGE
AND
ALL
THE
OTHER
TRACKERS
LOSE
TRACK
OF
THE
TARGETS
IN
NUMEROUS
FRAMES
DUE
TO
DRASTIC
SCENE
CHANGE
IT
IS
UNLIKELY
THAT
ON
LINE
APPEARANCE
MODELS
ARE
ABLE
TO
ADAPT
FAST
AND
CORRECTLY
OUR
TRACKER
CAN
HANDLE
OCCLUSION
AND
POSE
VARIATIONS
WELL
AS
ITS
APPEARANCE
MODEL
IS
DISCRIMI
NATIVELY
LEARNED
FROM
TARGET
AND
BACKGROUND
WITH
A
DATA
INDEPENDENT
MEASURE
MENT
THEREBY
ALLEVIATING
THE
INFLUENCE
FROM
BACKGROUND
SEE
ALSO
FIGURE
FURTHERMORE
OUR
TRACKER
PERFORMS
WELL
FOR
OBJECTS
WITH
NON
RIGID
POSE
VARIATION
AND
CAMERA
VIEW
CHANGE
IN
THE
BOLT
SEQUENCE
FIGURE
J
BECAUSE
THE
APPEAR
ANCE
MODEL
OF
OUR
TRACKER
IS
BASED
ON
LOCAL
FEATURES
WHICH
ARE
INSENSITIVE
TO
NON
RIGID
SHAPE
DEFORMATION
OUT
OF
PLANE
ROTATION
AND
ABRUPT
MOTION
THE
OBJECT
IN
THE
KITESURF
SEQUENCE
FIGURE
E
UNDERGOES
ACROBAT
MOVEMENTS
WITH
DEGREES
OUT
OF
PLANE
ROTATION
ONLY
THE
MILTRACK
SEMIB
AND
THE
PROPOSED
TRACKERS
PERFORM
WELL
ON
THIS
SEQUENCE
BOTH
OUR
TRACKER
AND
THE
MILTRACK
METHOD
ARE
DESIGNED
TO
HANDLE
OBJECT
LOCATION
AMBIGUITY
IN
TRACKING
WITH
CLASSIFIERS
AND
DISCRIMINA
TIVE
FEATURES
THE
OBJECT
IN
THE
ANIMAL
SEQUENCE
FIGURE
F
EXHIBITS
ABRUPT
K
ZHANG
L
ZHANG
AND
M
H
YANG
MOTION
BOTH
THE
STRUCK
AND
THE
PROPOSED
METHODS
PERFORM
WELL
ON
THIS
SE
QUENCE
HOWEVER
WHEN
THE
OUT
OF
PLANE
ROTATION
AND
ABRUPT
MOTION
BOTH
OCCUR
IN
THE
BIKER
AND
TIGER
SEQUENCES
FIGURE
G
H
ALL
THE
OTHER
ALGORITHMS
FAIL
TO
TRACK
THE
TARGET
OBJECTS
WELL
OUR
TRACKER
OUTPERFORMS
THE
OTHER
METHODS
IN
ALL
THE
METRICS
ACCURACY
SUCCESS
RATE
AND
SPEED
THE
KITESURF
SKIING
TWIN
INGS
GIRL
AND
TIGER
SEQUENCES
ALL
CONTAIN
OUT
OF
PLANE
ROTATION
WHILE
JUMPING
AND
BOX
SEQUENCES
INCLUDE
ABRUPT
MOTION
SIMILARLY
OUR
TRACKER
PERFORMS
WELL
IN
TERMS
OF
ALL
METRICS
BACKGROUND
CLUTTERS
THE
OBJECT
IN
THE
CLIFF
BAR
SEQUENCE
CHANGES
IN
SCALE
ORIENTATION
AND
THE
SURROUNDING
BACKGROUND
HAS
SIMILAR
TEXTURE
AS
THE
TRACKER
USES
A
GENERATIVE
APPEARANCE
MODEL
THAT
DOES
NOT
TAKE
BACKGROUND
IN
FORMATION
INTO
ACCOUNT
IT
IS
DIFFICULT
TO
KEEP
TRACK
OF
THE
OBJECTS
CORRECTLY
THE
OBJECT
IN
THE
COUPON
BOOK
SEQUENCE
UNDERGOES
SIGNIFICANT
APPEARANCE
CHANGE
AT
THE
TH
FRAME
AND
THEN
THE
OTHER
COUPON
BOOK
APPEARS
BOTH
THE
FRAG
AND
SEMIB
METHODS
ARE
DISTRACTED
TO
TRACK
THE
OTHER
COUPON
BOOK
IN
FIG
URE
I
WHILE
OUR
TRACKER
SUCCESSFULLY
TRACKS
THE
CORRECT
ONE
BECAUSE
THE
TLD
TRACKER
RELIES
HEAVILY
ON
THE
VISUAL
INFORMATION
IN
THE
FIRST
FRAME
TO
RE
DETECT
THE
OBJECT
IT
ALSO
SUFFERS
FROM
THE
SAME
PROBLEM
OUR
ALGORITHM
IS
ABLE
TO
TRACK
THE
RIGHT
OBJECTS
ACCURATELY
IN
THESE
TWO
SEQUENCES
BECAUSE
IT
EXTRACTS
DISCRIMINATIVE
FEATURES
FOR
THE
MOST
CORRECT
POSITIVE
SAMPLE
I
E
THE
TARGET
OBJECT
ONLINE
SEE
FIGURE
WITH
CLASSIFIER
UPDATE
FOR
FOREGROUND
BACKGROUND
SEPARATION
CONCLUDING
REMARKS
IN
THIS
PAPER
WE
PROPOSED
A
SIMPLE
YET
ROBUST
TRACKING
ALGORITHM
WITH
AN
AP
PEARANCE
MODEL
BASED
ON
NON
ADAPTIVE
RANDOM
PROJECTIONS
THAT
PRESERVE
THE
STRUCTURE
OF
ORIGINAL
IMAGE
SPACE
A
VERY
SPARSE
MEASUREMENT
MATRIX
WAS
ADOPTED
TO
EFFICIENTLY
COMPRESS
FEATURES
FROM
THE
FOREGROUND
TARGETS
AND
BACKGROUND
ONES
THE
TRACKING
TASK
WAS
FORMULATED
AS
A
BINARY
CLASSIFICATION
PROBLEM
WITH
ONLINE
UPDATE
IN
THE
COMPRESSED
DOMAIN
OUR
ALGORITHM
COMBINES
THE
MERITS
OF
GENERATIVE
AND
DISCRIMINATIVE
APPEARANCE
MODELS
TO
ACCOUNT
FOR
SCENE
CHANGES
NUMEROUS
EXPERIMENTS
WITH
STATE
OF
THE
ART
ALGORITHMS
ON
CHALLENGING
SEQUENCES
DEMONSTRATED
THAT
THE
PROPOSED
ALGORITHM
PERFORMS
WELL
IN
TERMS
OF
ACCURACY
ROBUSTNESS
AND
SPEED
EVERAL
SALIENT
OBJECT
DETECTION
APPROACHES
HAVE
BEEN
PUB
LISHED
WHICH
HAVE
BEEN
ASSESSED
USING
DIFFERENT
EVALUATION
SCORES
AND
DATASETS
RESULTING
IN
DISCREPANCY
IN
MODEL
COMPARISON
THIS
CALLS
FOR
A
METHODOLOGICAL
FRAMEWORK
TO
COMPARE
EXISTING
MODELS
AND
EVALUATE
THEIR
PROS
AND
CONS
WE
ANALYZE
BENCHMARK
DATASETS
AND
SCORING
TECHNIQUES
AND
FOR
THE
FIRST
TIME
PROVIDE
A
QUANTITATIVE
COMPARISON
OF
STATE
OF
THE
ART
SALIENCY
DETECTION
MODELS
WE
FIND
THAT
SOME
MODELS
PERFORM
CONSISTENTLY
BETTER
THAN
THE
OTHERS
SALIENCY
MODELS
THAT
INTEND
TO
PRE
DICT
EYE
FIXATIONS
PERFORM
LOWER
ON
SEGMENTATION
DATASETS
COMPARED
TO
SALIENT
OBJECT
DETECTION
ALGORITHMS
FURTHER
WE
PROPOSE
COMBINED
MOD
ELS
WHICH
SHOW
THAT
INTEGRATION
OF
THE
FEW
BEST
MODELS
OUTPERFORMS
ALL
MODELS
OVER
OTHER
DATASETS
BY
ANALYZING
THE
CONSISTENCY
AMONG
THE
BEST
MODELS
AND
AMONG
HUMANS
FOR
EACH
SCENE
WE
IDENTIFY
THE
SCENES
WHERE
MODELS
OR
HUMANS
FAIL
TO
DETECT
THE
MOST
SALIENT
OBJECT
WE
HIGHLIGHT
THE
CURRENT
ISSUES
AND
PROPOSE
FUTURE
RESEARCH
DIRECTIONS
INTRODUCTION
VISUAL
SALIENCY
IS
THE
ABILITY
OF
A
VISION
SYSTEM
HUMAN
OR
MACHINE
TO
SELECT
A
CERTAIN
SUBSET
OF
VISUAL
INFORMATION
FOR
FURTHER
PROCESSING
THIS
MECHANISM
SERVES
AS
A
FILTER
TO
SELECT
ONLY
THE
INTERESTING
INFORMATION
RELATED
TO
CURRENT
BEHAVIORS
OR
TASKS
TO
BE
PROCESSED
WHILE
IGNORING
IRRELEVANT
INFORMATION
RECENTLY
SALIENT
OBJECT
DETECTION
HAS
ATTRACTED
A
LOT
OF
INTEREST
IN
COMPUTER
VISION
AS
IT
PROVIDES
FAST
SOLUTIONS
TO
SEVERAL
COMPLEX
PROCESSES
FIRSTLY
IT
DETECTS
THE
MOST
SALIENT
AND
ATTENTION
GRABBING
OBJECT
IN
A
SCENE
AND
THEN
IT
SEGMENTS
THE
WHOLE
EXTENT
OF
THAT
OBJECT
THE
OUTPUT
USUALLY
IS
A
MAP
WHERE
THE
INTENSITY
OF
EACH
PIXEL
REPRESENTS
THE
PROBABILITY
OF
THAT
PIXEL
BELONGING
TO
THE
SALIENT
OBJECT
THIS
PROBLEM
IN
ITS
ESSENCE
IS
A
SEGMENTATION
PROBLEM
BUT
SLIGHTLY
DIFFERS
FROM
THE
TRADITIONAL
GENERAL
IMAGE
SEGMENTATION
WHILE
SALIENT
OBJECT
DETECTION
MODELS
SEGMENT
ONLY
THE
SALIENT
FOREGROUND
OBJECT
FROM
THE
BACKGROUND
GENERAL
SEGMENTATION
ALGORITHMS
PARTITION
AN
IMAGE
INTO
REGIONS
OF
COHERENT
PROPERTIES
SALIENT
OBJECT
DETECTION
METHODS
ALSO
DIFFER
FROM
OTHER
SALIENCY
MODELS
THAT
AIM
TO
PREDICT
SCENE
LOCATIONS
WHERE
A
HUMAN
OBSERVER
MAY
FIXATE
SINCE
SALIENCY
MODELS
WHETHER
THEY
ADDRESS
SEGMENTATION
OR
FIXATION
PREDICTION
BOTH
GENERATE
SALIENCY
MAPS
THEY
ARE
INTERCHANGEABLY
APPLICABLE
THE
VALUE
OF
SALIENCY
DETECTION
METHODS
LIES
IN
THEIR
APPLICATIONS
IN
MANY
FIELDS
INCLUDING
OBJECT
DETECTION
AND
RECOGNITION
IMAGE
COMPRESSION
VIDEO
A
FITZGIBBON
ET
AL
EDS
ECCV
PART
II
LNCS
PP
C
SPRINGER
VERLAG
BERLIN
HEIDELBERG
SALIENT
OBJECT
DETECTION
A
BENCHMARK
SUMMARIZATION
AND
PHOTO
COLLAGE
A
COMPARISON
OF
SOME
IMAGE
RE
TARGETING
TECHNIQUES
SOME
BASED
ON
SALIENT
OBJECT
DETECTION
IS
AVAILABLE
AT
HTTP
PEOPLE
CSAIL
MIT
EDU
MRUB
RETARGETME
SOME
WORK
HAS
BEEN
PUBLISHED
ON
QUANTITATIVE
EVALUATION
OF
GENERAL
SEGMEN
TATION
ALGORITHMS
TO
THE
AUTHORS
BEST
KNOWLEDGE
SUCH
ATTEMPT
FOR
BENCHMARKING
SALIENT
OBJECT
SEGMENTATION
METHODS
HAS
NOT
BEEN
REPORTED
UN
FORTUNATELY
THESE
METHODS
HAVE
OFTEN
BEEN
EVALUATED
ON
DIFFERENT
DATASETS
WHICH
IN
SOME
CASES
ARE
SMALL
AND
NOT
EASILY
ACCESSIBLE
THE
LACK
OF
PUBLISHED
BENCH
MARKS
CAUSES
DISCREPANCY
IN
QUANTITATIVE
COMPARISON
OF
COMPETING
MODELS
NOT
ONLY
DOES
A
BENCHMARK
ALLOW
RESEARCHERS
TO
COMPARE
THEIR
MODELS
WITH
OTHER
AL
GORITHMS
BUT
IT
ALSO
HELPS
IDENTIFY
THE
CHIEF
FACTORS
AFFECTING
PERFORMANCE
THIS
COULD
RESULT
IN
AN
EVEN
FASTER
PERFORMANCE
IMPROVEMENT
RELATED
WORKS
HERE
WE
PROVIDE
A
SHORT
SUMMARY
OF
THE
MAIN
TRENDS
IN
SALIENCY
DETECTION
THE
INTERESTED
READER
CAN
REFER
TO
THE
EXTENSIVE
REVIEWS
FOR
MORE
DETAILS
AS
A
PIONEER
ITTI
ET
AL
DERIVED
BOTTOM
UP
VISUAL
SALIENCY
USING
CENTER
SURROUND
DIFFERENCES
ACROSS
MULTI
SCALE
IMAGE
FEATURES
MA
AND
ZHANG
PRO
POSED
AN
ALTERNATIVE
LOCAL
CONTRAST
METHOD
USING
A
FUZZY
GROWTH
MODEL
HAREL
ET
AL
USED
GRAPH
ALGORITHMS
AND
A
MEASURE
OF
DISSIMILARITY
TO
ACHIEVE
EFFICIENT
SALIENCY
COMPUTATION
WITH
THEIR
GRAPH
BASED
VISUAL
SALIENCY
GBVS
MODEL
LIU
ET
AL
USED
CONDITIONAL
RANDOM
FIELD
TO
LEARN
REGIONS
OF
INTEREST
US
ING
THREE
FEATURES
MULTI
SCALE
CONTRAST
CENTER
SURROUND
HISTOGRAM
AND
COLOR
SPATIAL
DISTRIBUTION
MORE
RECENTLY
GOFERMAN
ET
AL
SIMULTANEOUSLY
MODELED
LOCAL
LOW
LEVEL
CLUES
GLOBAL
CONSIDERATIONS
VISUAL
ORGANIZATION
RULES
AND
HIGH
LEVEL
FEATURES
TO
HIGHLIGHT
SALIENT
OBJECTS
ALONG
WITH
THEIR
CONTEXTS
ZHAI
AND
SHAH
DEFINED
PIXEL
LEVEL
SALIENCY
BY
CONTRAST
TO
ALL
OTHER
PIXELS
HOWEVER
FOR
EFFICIENCY
THEY
USED
ONLY
LUMINANCE
INFORMATION
THUS
IGNORING
DISTINCTIVE
CLUES
IN
OTHER
CHANNELS
ACHANTA
ET
AL
PROPOSED
A
FREQUENCY
TUNED
METHOD
THAT
DIRECTLY
DEFINES
PIXEL
SALIENCY
USING
THE
COLOR
DIFFERENCES
FROM
THE
AVERAGE
IMAGE
COLOR
VISUAL
SALIENCY
IS
EQUATED
TO
DISCRIMINATION
IN
AND
EXTENDED
TO
BOTTOM
UP
MECHANISM
IN
THE
PRE
ATTENTIVE
BIOLOGICAL
VISION
SPECTRAL
COM
PONENTS
IN
AN
IMAGE
HAVE
BEEN
EXPLORED
TO
DETECT
VISUAL
SALIENCY
IN
HOU
AND
ZHANG
THE
GIST
OF
THE
SCENE
IS
REPRESENTED
WITH
THE
AVERAGE
FOURIER
ENVELOPE
AND
THE
DIFFERENTIAL
SPECTRAL
COMPONENTS
ARE
USED
TO
EXTRACT
SALIENT
RE
GIONS
THIS
IS
REPLACED
BY
THE
PHASE
SPECTRUM
OF
THE
FOURIER
TRANSFORM
IN
BECAUSE
IT
IS
MORE
EFFECTIVE
AND
COMPUTATIONALLY
EFFICIENT
SOME
RESEARCHERS
IN
CLUDING
BRUCE
AND
TSOTSOS
AND
ZHANG
ET
AL
ATTEMPTED
TO
DEFINE
VISUAL
SALIENCY
BASED
ON
INFORMATION
THEORY
SOME
OTHERS
HAVE
FURTHER
USED
GRAPH
CUT
OR
GRAB
CUB
ALGORITHMS
TO
REFINE
BORDERS
OF
THEIR
SALIENCY
MAPS
AND
COUNT
FOR
SALIENT
OBJECT
CONTOURS
WHILE
SOME
METHODS
DEFINE
VISUAL
SALIENCY
IN
A
LOCAL
WAY
E
G
ITTI
ET
AL
SEO
GBVS
AWS
AND
DAKLEIN
HTTP
WWW
WISDOM
WEIZMANN
AC
IL
SIM
VISION
A
BORJI
D
N
SIHITE
AND
L
ITTI
SOME
OTHERS
ARE
BASED
ON
GLOBAL
RARITY
OF
IMAGE
REGIONS
OVER
THE
ENTIRE
SCENE
E
G
AIM
SUN
HOUNIPS
HOUCVPR
AND
RC
OBJECT
BASED
THEORIES
OF
ATTENTION
PROPOSE
THAT
HUMANS
ATTEND
TO
OBJECTS
AND
HIGH
LEVEL
CONCEPTS
INSPIRED
BY
THESE
COGNITIVE
FINDINGS
SOME
MODELS
E
G
JUDD
ET
AL
HAVE
USED
OBJECT
DETECTORS
SUCH
AS
FACES
HUMANS
ANIMALS
AND
TEXT
TO
DETECT
SALIENT
LOCATIONS
SOME
MODELS
ADDRESS
SALIENCY
DETECTION
IN
THE
SPATIO
TEMPORAL
DOMAIN
BY
EMPLOYING
MOTION
FLICKER
OPTICAL
FLOW
E
G
OR
INTEREST
POINTS
LEARNED
FROM
THE
IMAGE
REGIONS
AT
FIXATED
LOCATIONS
E
G
SINCE
THE
RESEARCH
IN
THIS
AREA
IS
RATHER
NEW
AND
THE
FEW
EXISTING
MODELS
ARE
IN
THEIR
EARLY
PHASES
THUS
WE
LEAVE
THEIR
QUANTITATIVE
EVALUATION
FOR
THE
FUTURE
RECENTLY
A
NEW
TREND
CALLED
ACTIVE
VISUAL
SEGMENTATION
HAS
EMERGED
WITH
THE
INTENTION
TO
SEGMENT
A
REGION
THAT
CONTAINS
A
FIXATION
POINT
MISHRA
ET
AL
THEIR
FRAMEWORK
COMBINES
MONOCULAR
CUES
COLOR
INTENSITY
TEXTURE
WITH
STEREO
AND
OR
MOTION
IN
A
CUE
INDEPENDENT
MANNER
SIMILARLY
SIAGIAN
AND
KOCH
ALSO
PROPOSED
A
NEW
APPROACH
FOR
ACTIVE
SEGMENTATION
BY
COMBINING
BOUNDARY
AND
REGION
INFORMATION
WE
CONSIDER
ADDING
THEM
TO
PROMOTE
THIS
NEW
TREND
THE
SALIENT
OBJECT
DETECTION
BENCHMARK
SALIENCY
DETECTION
MODELS
IN
THIS
WORK
AS
THE
INITIAL
SEED
WE
FOCUS
ON
THOSE
MODELS
THAT
ARE
EASILY
ACCESSIBLE
ATTAINED
GOOD
ACCURACIES
OR
HAVE
BEEN
HIGHLY
REFERRED
SOFTWARE
FOR
SOME
MODELS
WAS
ALREADY
AVAILABLE
ONLINE
FOR
OTHERS
WE
CONTACTED
THEIR
CREATORS
FOR
THE
CODE
THE
AUTHORS
THEN
EITHER
SENT
US
THE
SOURCE
CODE
TO
COMPILE
OR
THE
EXECUTABLES
SOME
AUTHORS
HOWEVER
PREFERRED
TO
RUN
THEIR
MODELS
ON
OUR
STIMULI
AND
HENCE
SEND
US
BACK
THE
SALIENCY
MAPS
IN
ORDER
TO
ACHIEVE
A
THOROUGH
MODEL
COMPARISON
WE
INTEND
TO
OPEN
AN
ONLINE
CHALLENGE
WHERE
MODELERS
COULD
CONTRIBUTE
BY
SUBMITTING
THEIR
RESULTS
WE
COMPARE
THREE
CATEGORIES
OF
MODELS
THOSE
AIMING
TO
DETECT
AND
SEGMENT
THE
MOST
SALIENT
OBJECT
IN
A
SCENE
EMPHASIZED
MORE
HERE
ACTIVE
SEGMENTATION
APPROACHES
AND
MODELS
THAT
ADDRESS
FIXATION
PREDICTION
TABLE
SHOWS
THE
LIST
OF
MODELS
FROM
THE
FIRST
TWO
CATEGORIES
AND
TABLE
SHOWS
CATEGORY
DATASETS
WE
CHOOSE
BENCHMARK
DATASETS
BASED
ON
THE
FOLLOWING
CRITERIA
BEING
WIDELY
USED
HAVING
SIZE
AND
STIMULUS
VARIETY
AND
CONTAINING
DIFFERENT
BIASES
SUCH
AS
NUMBER
OF
ANNOTATORS
NUMBER
OF
SALIENT
OBJECTS
AND
CENTER
BIAS
DUE
TO
SPECIALTY
OF
VARIOUS
DATASETS
IT
IS
LIKELY
THAT
MODEL
RANKINGS
MAY
DIFFER
ACROSS
DATASETS
HENCE
TO
COME
UP
WITH
A
FAIR
COMPARISON
IT
IS
RECOMMENDED
TO
RUN
MODELS
OVER
SEVERAL
DATASETS
AND
DRAW
OBJECTIVE
CONCLUSIONS
A
MODEL
IS
CONSIDERED
TO
BE
GOOD
IF
IT
PERFORMS
WELL
OVER
ALMOST
ALL
DATASETS
FIG
PROVIDES
EXPLANATION
OF
THE
DATASETS
USED
HERE
AS
WELL
AS
SAMPLE
IMAGES
OF
THE
FIVE
SMALLEST
AND
LARGEST
OBJECTS
VFROM
EACH
FIG
SHOWS
MEAN
U
ANNOTATION
POSITION
M
AP
U
V
U
V
SUV
AVERAGED
OVER
U
IMAGES
AND
ANNOTATED
BOUNDING
BOXES
OF
V
SUBJECTS
SUV
THERE
IS
A
STRONG
CENTER
BIAS
IN
THE
SINGLE
OBJECT
DATASETS
MOST
PROBABLY
DUE
TO
THE
TENDENCY
OF
PHOTOGRA
PHERS
TO
FRAME
INTERESTING
OBJECTS
AT
THE
IMAGE
CENTER
SIMILARLY
THERE
ARE
TWO
PEAKS
AT
THE
LEFT
AND
THE
RIGHT
IN
THE
IMAGES
WITH
TWO
SALIENT
OBJECTS
SALIENT
OBJECT
DETECTION
A
BENCHMARK
TABLE
COMPARED
SALIENT
OBJECT
DETECTION
MODELS
CHECKED
SORTED
CHRONOLOGICALLY
ABBREVIATIONS
M
MATLAB
C
C
C
SENT
SALIENCY
MAPS
W
AND
H
IMAGE
WIDTH
HEIGHT
DB
SHOWS
THE
DATASETS
THAT
WE
HAVE
RESULTS
OVER
THEM
JIALISAL
IS
AP
PLIED
TO
AND
IMAGES
OF
ASD
AND
MSRA
RESPECTIVELY
MAX
X
PRESERVE
THE
ASPECT
RATIO
WHILE
RESIZING
THE
BIGGER
DIMENSION
TO
X
FIG
A
SHOWS
ENTROPY
OF
IMAGES
ASD
AND
MSRA
CONTAIN
MORE
CLUT
TERED
SCENES
HISTOGRAM
OF
NORMALIZED
OBJECT
SIZES
OBJECT
SIZE
IMAGE
SIZE
IS
PLOTTED
IN
FIG
B
IT
SHOWS
THERE
ARE
FEW
IMAGES
WITH
LARGE
OBJECTS
IN
THESE
DATASETS
OBJECTS
USUALLY
RANGE
FROM
SMALL
TO
MEDIUM
SIZE
ABOUT
OF
THE
WHOLE
IMAGE
WITH
MSRA
CONTAINING
LARGER
OBJECTS
ON
AVERAGE
FIG
C
SHOWS
SUBJECT
AGREEMENT
FOR
AN
IMAGE
WHICH
IS
DEFINED
AS
WHERE
SI
AND
SJ
ARE
ANNOTATIONS
OF
THE
I
TH
AND
J
TH
SUBJECTS
OF
N
SUBJECTS
ABOVE
SCORE
HAS
THE
WELL
DEFINED
LOWER
BOUND
OF
WHEN
THERE
IS
NO
OVERLAP
IN
SEGMENTATIONS
OF
USERS
AND
UPPER
BOUND
OF
WHEN
THEY
HAVE
PERFECT
OVERLAP
AS
FIG
SHOWS
SUBJECTS
HAVE
HIGHER
AGREEMENT
OVER
MSRA
AND
DATASETS
ABOUT
OF
R
VALUES
ARE
ABOVE
COMPARED
TO
THE
SOD
DATASET
PROPOSED
COMBINED
MODELS
SINCE
DIFFERENT
MODELS
ARE
BASED
ON
DIFFER
ENT
HYPOTHESES
AND
ALGORITHMS
IT
IS
LIKELY
THAT
COMBINING
EVIDENCES
FROM
THEM
MAY
ENHANCE
THE
SALIENCY
DETECTION
ACCURACY
HERE
WE
INVESTIGATE
SUCH
AN
IDEA
LET
P
XF
REPRESENT
THE
PROBABILITY
OF
AN
IMAGE
PIXEL
X
BEING
PART
OF
THE
SALIENT
FOREGROUND
OBJECT
I
E
NORMALIZED
SALIENCY
MAP
LET
P
XF
MI
BE
SUCH
EVIDENCE
FROM
THE
I
TH
MODEL
ASSUMING
INDEPENDENCE
AMONG
MODELS
I
E
P
XF
MI
MJ
P
XF
MI
P
XF
MJ
THEN
A
NAIVE
BAYESIAN
EVIDENCE
ACCUMULA
TION
WOULD
BE
WHERE
K
IS
THE
NUMBER
OF
MODELS
AND
Z
IS
CHOSEN
IN
A
WAY
THAT
THE
FINAL
MAP
IS
A
PROBABILITY
DENSITY
FUNCTION
PDF
SINCE
A
VERY
SMALL
VALUE
BY
ONLY
A
SINGLE
MODEL
SUPPRESSES
ALL
EVIDENCES
FROM
THE
OTHER
MODELS
IN
THE
MULTIPLICATION
CASE
EQ
WE
ALSO
CONSIDER
ANOTHER
COMBINATION
SCHEME
USING
LINEAR
SUMMATION
WHERE
SI
AND
SJ
ARE
ANNOTATIONS
OF
THE
I
TH
AND
J
TH
SUBJECTS
OF
N
SUBJECTS
ABOVE
SCORE
HAS
THE
WELL
DEFINED
LOWER
BOUND
OF
WHEN
THERE
IS
NO
OVERLAP
IN
SEGMENTATIONS
OF
USERS
AND
UPPER
BOUND
OF
WHEN
THEY
HAVE
PERFECT
OVERLAP
AS
FIG
SHOWS
SUBJECTS
HAVE
HIGHER
AGREEMENT
OVER
MSRA
AND
DATASETS
ABOUT
OF
R
VALUES
ARE
ABOVE
COMPARED
TO
THE
SOD
DATASET
PROPOSED
COMBINED
MODELS
SINCE
DIFFERENT
MODELS
ARE
BASED
ON
DIFFER
ENT
HYPOTHESES
AND
ALGORITHMS
IT
IS
LIKELY
THAT
COMBINING
EVIDENCES
FROM
THEM
MAY
ENHANCE
THE
SALIENCY
DETECTION
ACCURACY
HERE
WE
INVESTIGATE
SUCH
AN
IDEA
LET
P
XF
REPRESENT
THE
PROBABILITY
OF
AN
IMAGE
PIXEL
X
BEING
PART
OF
THE
SALIENT
FOREGROUND
OBJECT
I
E
NORMALIZED
SALIENCY
MAP
LET
P
XF
MI
BE
SUCH
EVIDENCE
FROM
THE
I
TH
MODEL
ASSUMING
INDEPENDENCE
AMONG
MODELS
EXPERIMENTS
AND
RESULTS
BASELINE
MODELS
WE
IMPLEMENTED
TWO
SIMPLE
YET
POWERFUL
BASELINE
MODELS
MAP
EXPLAINED
IN
SEC
AND
FIG
AND
HUMAN
INTER
OBSERVER
IO
MODEL
WHICH
IS
THE
AGGREGATED
MAP
OF
ANNOTATIONS
BY
OTHER
SUBJECTS
EXCLUDING
THE
ONE
UNDER
TEST
FOR
EACH
IMAGE
THE
IO
MODEL
PROVIDES
AN
UPPER
BOUND
FOR
OTHER
MODELS
SINCE
HUMANS
USUALLY
AGREE
IN
ANNOTATING
THE
MOST
SALIENT
OBJECT
SAMPLE
IMAGES
FROM
THE
DATASETS
TOP
ROW
SHOWS
THE
FIVE
SMALLEST
OB
JECTS
AND
BOTTOM
ROW
SHOWS
THE
FIVE
LARGEST
OBJECTS
FROM
EACH
DATASET
ASD
THIS
DATASET
CONTAINS
IMAGES
FROM
THE
MSRA
DATASET
AUTHORS
HAVE
MANUALLY
SEGMENTED
THE
SALIENT
OBJECT
CONTOUR
WITHIN
THE
USER
DRAWN
RECT
ANGLE
TO
OBTAIN
BINARY
MASKS
LINK
HTTP
IVRGWWW
EPFL
CH
SIM
ACHANTA
MSRA
THIS
DATASET
PART
B
OF
THE
ORIGINAL
DATASET
INCLUDES
IM
AGES
CONTAINING
LABELED
RECTANGLES
FROM
NINE
USERS
DRAWING
A
RECTANGULAR
SHAPE
AROUND
WHAT
THEY
CONSIDER
THE
MOST
SALIENT
OBJECT
THERE
IS
A
LARGE
VARIATION
AMONG
IMAGES
INCLUDING
NATURAL
SCENES
ANIMALS
INDOOR
OUTDOOR
RESOLUTION
ETC
LINK
HTTP
RESEARCH
MICROSOFT
COM
EN
US
UM
PEOPLE
JIANSUN
SALIENTOBJECT
SALIENT
OBJECT
HTM
SED
THIS
DATASET
CONTAINS
TWO
PARTS
THE
FIRST
ONE
SINGLE
OBJECT
DATABASE
HAS
IMAGES
CONTAINING
ONLY
ONE
SALIENT
OBJECT
SIMILAR
TO
THE
ASD
BUT
IN
THE
SECOND
ONE
TWO
OBJECTS
DATABASE
THERE
ARE
TWO
SALIENT
OBJECTS
IN
EACH
IMAGE
IMAGES
OUR
PURPOSE
IN
EMPLOYING
THIS
DATASET
IS
TO
EVALUATE
THE
ACCURACY
OF
MODELS
WHEN
THERE
IS
MORE
THAN
ONE
OB
JECT
IN
A
SCENE
IS
TO
EVALUATE
ACCURACY
OF
MODELS
OVER
MORE
COMPLEX
STIMULI
IT
IS
STILL
NOT
CLEAR
HOW
THE
MODELS
DEVELOPED
OVER
SINGLE
OBJECT
DATASETS
WILL
SCALE
UP
IN
MORE
GENERAL
CASES
EACH
OF
ONE
OBJECT
AND
TWO
OBJECT
DATASETS
CONTAIN
IM
AGES
LINK
HTTP
WWW
WISDOM
WEIZMANN
AC
IL
SIM
VISION
SOD
THIS
DATASET
IS
A
COLLECTION
OF
SALIENT
OBJECT
BOUNDARIES
BASED
ON
THE
BERKELEY
SEGMENTATION
DATASET
BSD
SEVEN
SUBJECTS
ARE
ASKED
TO
CHOOSE
THE
SALIENT
OBJECT
IN
IMAGES
THIS
DATASET
CON
TAINS
MANY
IMAGES
WITH
SEVERAL
OBJECTS
MAKING
IT
CHALLENGING
FOR
MODELS
LINK
HTTP
ELDERLAB
YORKU
CA
SIM
VIDA
SOD
INDEX
HTML
MAP
MODEL
RANKS
IN
THE
MIDDLE
AMONG
FIXATION
PREDICTION
MODELS
ON
SOD
MAP
MODEL
WORKS
VERY
WELL
RIGHT
BELOW
THE
BEST
MODEL
REPEATEDLY
INDICATING
HIGH
CENTER
BIAS
IN
THIS
DATASET
FIG
USING
F
MEASURE
AIM
CONSISTENTLY
RANKS
ABOVE
OTHER
MODELS
ITTI
AND
PQFT
RANK
AT
THE
BOTTOM
OVER
ALL
DATASETS
THE
MODEL
IS
BASED
ON
THE
SAME
PRINCIPLES
OF
THE
ITTI
MODEL
BUT
USES
MAXNORM
NORMALIZATION
FOR
EACH
FEATURE
MAP
FIND
THE
GLOBAL
MAX
M
AND
THE
AVERAGE
M
OF
ALL
OTHER
LOCAL
MAXIMA
THEN
WEIGH
THE
MAP
BY
M
M
PLEASE
REFER
TO
FOR
A
FULL
INVESTIGATION
OF
FIXATION
PREDICTION
MODELS
MODELS
BUILT
ORIGINALLY
FOR
FIXATION
PREDICTION
ON
AVERAGE
PERFORM
LOWER
THAN
MODELS
SPECIFICALLY
BUILT
TO
DETECT
AND
SEGMENT
THE
MOST
SALIENT
OBJECT
IN
A
SCENE
BEST
FIXATION
PREDICTION
MODELS
PERFORM
BETTER
THAN
POOR
SALIENCY
DETECTION
MOD
ELS
WHY
DOES
PERFORMANCE
ACCURACY
OF
THE
TWO
CATEGORIES
OF
APPROACHES
DIFFER
OVER
SEGMENTATION
DATASETS
THE
REASON
LIES
ON
THE
AMOUNT
OF
TRUE
POSITIVES
VS
FALSE
POSITIVES
SEGMENTATION
APPROACHES
TRY
TO
GENERATE
WHITE
SALIENT
REGIONS
TO
CAPTURE
MORE
OF
THE
TRUE
POSITIVES
ON
THE
OTHER
HAND
FIXATION
PREDICTION
MODELS
ARE
VERY
SELECTIVE
AND
GENERATE
FEW
FALSE
POSITIVES
THERE
ARE
NOT
MANY
FIXATIONS
ON
THE
IMAGE
IN
A
SEPARATE
STUDY
WE
NOTICED
THAT
FIXATION
PREDICTION
MOD
ELS
PERFORM
BETTER
THAN
THE
SALIENCY
DETECTION
MODELS
OVER
EYE
FIXATION
DATASETS
ACTIVE
SEGMENTATION
ALGORITHMS
SCORE
CONSISTENTLY
BELOW
THE
OTHER
TWO
CATEGORIES
THE
MAIN
REASON
IS
THE
DEPENDENCY
OF
THESE
MODELS
ON
THE
INITIAL
SEED
WHICH
SOMETIMES
MAY
NOT
HAPPEN
ON
THE
MOST
SALIENT
OBJECT
DUE
TO
THE
SPATIAL
OUTLIERS
IN
THE
IMAGE
ACCURACY
OF
COMBINED
MODELS
OUR
COMBINED
MODELS
USING
CBSAL
SVO
AND
RC
SCORE
THE
HIGHEST
IN
MANY
CASES
SUPPORTING
OUR
CLAIM
IN
EVIDENCE
IN
TEGRATION
OVERALL
OUR
COMBINED
MODELS
RANK
THE
BEST
IN
THE
FOLLOWING
ORDER
IDENTITY
LOG
EXP
AND
MULT
OVER
AND
SOD
DATASETS
COMBINED
MODELS
PERFORM
LOWER
COMPARED
TO
SINGLE
OBJECT
DATASETS
BUT
STILL
OUTPERFORM
MANY
MOD
ELS
ACCORDING
PRECISION
RECALL
CURVES
OUR
MODELS
STAND
ON
TOP
EXCEPT
THIS
IS
BECAUSE
OF
CBSAL
MODEL
PERFORM
POORLY
ON
THESE
DATASETS
CAUSING
THE
PER
FORMANCE
TO
DROP
FOR
COMBINED
MODELS
NOTE
THAT
OUR
SELECTION
OF
WHICH
MODELS
TO
COMBINE
WAS
PURELY
BASED
ON
THE
ASD
DATASET
AND
NOT
BY
OVER
FITTING
RE
SULTS
TO
ALL
DATASETS
IT
IS
POSSIBLE
THAT
COMBINING
BEST
MODELS
OVER
EACH
DATASET
WILL
OUTPERFORM
ALL
MODELS
OVER
THAT
DATASET
WE
FOUND
THAT
THE
COMBINATION
OF
THE
BEST
TWO
MODELS
CBSAL
AND
SVO
STILL
WORKS
AS
GOOD
AS
SLIGHTLY
BELOW
COMBINING
THE
THREE
BEST
MODELS
SUPPLEMENT
THE
ROLE
OF
OBJECT
SIZE
IT
IS
MORE
CHALLENGING
TO
OBTAIN
HIGH
PRECISION
RECALL
FOR
SMALL
OBJECTS
THAN
LARGE
OBJECTS
AN
ALGORITHM
THAT
SELECTS
THE
WHOLE
IMAGE
OBTAINS
PRECISION
WITH
RECALL
IF
AN
OBJECT
OCCUPIES
OF
THE
IMAGE
WE
COMPARE
ACCURACY
OF
MODELS
OVER
IMAGES
OF
ASD
FOR
WITH
THE
SMALLEST
AND
FOR
IMAGES
WITH
THE
LARGEST
OBJECTS
FIG
SHOWS
SAMPLES
ON
AVERAGE
THE
OBJECT
OCCUPIED
FOR
FOR
OF
THE
IMAGE
AREA
RESPECTIVELY
FOR
SMALL
AND
LARGE
OBJECTS
THE
RESULTING
PR
CURVES
FOR
ASD
AND
DATASETS
ARE
SHOWN
IN
FIG
SEE
SUPPLEMENT
FOR
OTHER
DBS
MODELS
SPECIALLY
MAP
SCORE
HIGHER
ON
LARGE
OBJECTS
IO
SCORES
HIGHER
ON
LARGE
OBJECTS
THUS
SHOWING
HIGHER
SUBJECT
AGREEMENT
COMBINED
MODELS
STILL
PERFORM
HIGHER
THAN
OTHER
MODELS
IN
BOTH
CASES
DIFFERENCE
IS
MORE
PRONOUNCED
OVER
SMALL
OBJECTS
GOOD
MODELS
E
G
CBSAL
SVO
AND
LIUIETIP
STILL
PERFORM
WELL
WITH
THE
EXCEPTION
OF
SVO
THAT
SHOWS
A
NOTICEABLE
PERFORMANCE
DROP
OVER
LARGE
OBJECTS
FIXATION
PREDICTION
MODEL
RANKINGS
DIFFER
OVER
BOTH
CASES
WHILE
GBVS
IS
THE
BEST
OVER
SMALL
OBJECTS
HOUNIPS
OVER
ASD
AND
AIM
OVER
ARE
THE
BEST
OVER
LARGE
OBJECTS
MAP
MODEL
OUTPERFORMS
ALL
FIXATION
PREDICTION
MODELS
OVER
LARGE
OBJECTS
THE
ROLE
OF
ANNOTATION
CONSISTENCY
TO
CHECK
WHETHER
ANNOTATION
CON
SISTENCY
AFFECTS
ACCURACY
WE
SELECTED
ACCORDING
TO
EQ
MOST
AND
LEAST
CONSISTENT
IMAGES
FOR
SED
DATASETS
OF
ALL
DATASETS
AND
CALCULATED
THE
SCORES
SHOWN
IN
FIG
AS
EXPECTED
IO
AND
MAP
MODELS
PERFORM
VERY
HIGH
OVER
MOST
CONSISTENT
IMAGES
ON
AVERAGE
FOR
ALL
OTHER
MODELS
COMBINED
MODELS
ARE
AT
THE
TOP
IN
BOTH
CASES
EXCEPT
IN
THE
LEAST
CONSISTENT
CASE
EASY
DIFFICULT
STIMULI
FOR
MODELS
HERE
WE
STUDY
THE
EASIEST
AND
MOST
DIFFICULT
SCENES
FOR
MODELS
THAT
DID
WELL
IN
ALL
CASES
FOR
EACH
MODEL
WE
SORTED
THE
STIMULI
BASED
ON
THEIR
AUC
SCORE
AND
CHOSE
THE
TOP
EASIEST
AND
BOTTOM
HARDEST
FIVE
IMAGES
SUPPLEMENT
WE
NOTICED
THAT
MODELS
HAVE
MANY
EASY
AND
DIFFICULT
SCENES
IN
COMMON
FIG
THE
TOP
FIVE
STIMULI
USUALLY
HAVE
ONE
A
BORJI
D
N
SIHITE
AND
L
ITTI
FIG
FIVE
IMAGES
WITH
LEAST
AND
MOST
ANNOTATION
CONSISTENCY
FROM
DATASETS
VIVID
SALIENT
OBJECT
AT
THE
CENTER
WITH
A
DISTINCTIVE
COLOR
FROM
THE
BACKGROUND
THE
BOTTOM
FIVE
STIMULI
OFTEN
CONTAIN
OBJECTS
IN
A
TEXTURED
BACKGROUND
OBJECTS
COMPOSED
OF
SEVERAL
DIFFERENT
PARTS
OR
OBJECTS
THAT
ATTRACT
TOP
DOWN
ATTENTION
E
G
TEXT
FACES
HUMAN
SOCIAL
INTERACTIONS
GAZE
DIRECTION
OR
ANIMALS
ANALYSIS
OF
MAP
SMOOTHING
AND
CENTER
BIAS
HERE
WE
INVESTIGATE
THE
ROLE
OF
MAP
SMOOTHING
BLURRING
AS
IT
HAS
BEEN
SHOWN
TO
AFFECT
SCORING
FOR
FIX
ATION
PREDICTION
IN
THE
PAST
WE
CONVOLVE
SALIENCY
MAPS
OF
MODELS
WITH
VARIABLE
SIZED
GAUSSIAN
KERNELS
AND
CALCULATE
THE
SCORES
WE
ALSO
ADD
SEPA
RATELY
CENTRAL
GAUSSIAN
KERNELS
TO
THE
SALIENCY
MAPS
AUC
SCORES
ARE
SHOWN
IN
FIG
WITH
SMOOTHING
SCORES
SLIGHTLY
CHANGE
BUT
QUALITATIVE
TRENDS
AND
MODEL
RANKINGS
STAY
THE
SAME
HENCE
NOT
AFFECTING
OUR
CONCLUSIONS
THE
REASON
WHY
SMOOTHING
CHANGES
FIXATION
PREDICTION
BUT
NOT
SALIENT
OBJECT
DETECTION
ACCURACY
IS
BECAUSE
THERE
IS
UNCERTAINTY
IN
FIXATIONS
SUCH
THAT
THEY
OFTEN
DO
NOT
LAND
ON
THE
EXACT
INTENDED
LOCATIONS
AND
IN
SALIENT
OBJECT
DETECTION
SCORES
ARE
CALCULATED
USING
IMAGE
REGIONS
WHILE
IN
FIXATION
PREDICTION
THEY
ARE
CALCULATED
BY
SAMPLING
MAPS
FROM
EYE
POSITIONS
SHOWN
IN
FIG
ALL
DATASETS
HAVE
CENTER
BIAS
SIMILAR
TO
THE
EYE
MOVEMENT
DATASETS
FROM
FIG
RIGHT
SIDE
WE
CONCLUDE
THAT
ADDING
CENTER
BIAS
RAISES
THE
ACCURACY
OF
LOW
PERFORMING
MODELS
WHILE
IT
DECREASES
THE
ACCURACY
OF
GOOD
MODELS
HOWEVER
THIS
CHANGE
IN
ACCURACY
IS
NOT
SIGNIFICANT
AND
DOES
NOT
ALTER
MODEL
RANKINGS
LARGE
CONVOLUTIONAL
NETWORK
MODELS
HAVE
RECENTLY
DEMON
STRATED
IMPRESSIVE
CLASSIFICATION
PERFORMANCE
ON
THE
IMAGENET
BENCH
MARK
KRIZHEVSKY
ET
AL
HOWEVER
THERE
IS
NO
CLEAR
UNDERSTANDING
OF
WHY
THEY
PERFORM
SO
WELL
OR
HOW
THEY
MIGHT
BE
IMPROVED
IN
THIS
PAPER
WE
EXPLORE
BOTH
ISSUES
WE
INTRODUCE
A
NOVEL
VISUALIZATION
TECHNIQUE
THAT
GIVES
INSIGHT
INTO
THE
FUNCTION
OF
INTERMEDIATE
FEATURE
LAYERS
AND
THE
OPER
ATION
OF
THE
CLASSIFIER
USED
IN
A
DIAGNOSTIC
ROLE
THESE
VISUALIZATIONS
ALLOW
US
TO
FIND
MODEL
ARCHITECTURES
THAT
OUTPERFORM
KRIZHEVSKY
ET
AL
ON
THE
IMAGENET
CLASSIFICATION
BENCHMARK
WE
ALSO
PERFORM
AN
ABLATION
STUDY
TO
DISCOVER
THE
PERFORMANCE
CONTRIBUTION
FROM
DIFFERENT
MODEL
LAYERS
WE
SHOW
OUR
IMAGENET
MODEL
GENERALIZES
WELL
TO
OTHER
DATASETS
WHEN
THE
SOFTMAX
CLASSIFIER
IS
RETRAINED
IT
CONVINCINGLY
BEATS
THE
CURRENT
STATE
OF
THE
ART
RESULTS
ON
CALTECH
AND
CALTECH
DATASETS
INTRODUCTION
SINCE
THEIR
INTRODUCTION
BY
LECUN
ET
AL
IN
THE
EARLY
CONVOLUTIONAL
NETWORKS
CONVNETS
HAVE
DEMONSTRATED
EXCELLENT
PERFORMANCE
AT
TASKS
SUCH
AS
HAND
WRITTEN
DIGIT
CLASSIFICATION
AND
FACE
DETECTION
IN
THE
LAST
MONTHS
SEV
ERAL
PAPERS
HAVE
SHOWN
THAT
THEY
CAN
ALSO
DELIVER
OUTSTANDING
PERFORMANCE
ON
MORE
CHALLENGING
VISUAL
CLASSIFICATION
TASKS
CIRESAN
ET
AL
DEMONSTRATE
STATE
OF
THE
ART
PERFORMANCE
ON
NORB
AND
CIFAR
DATASETS
MOST
NOTABLY
KRIZHEVSKY
ET
AL
SHOW
RECORD
BEATING
PERFORMANCE
ON
THE
IMAGENET
CLASSIFICATION
BENCHMARK
WITH
THEIR
CONVNET
MODEL
ACHIEVING
AN
ERROR
RATE
OF
COMPARED
TO
THE
PLACE
RESULT
OF
FOLLOWING
ON
FROM
THIS
WORK
GIRSHICK
ET
AL
HAVE
SHOWN
LEADING
DETECTION
PERFORMANCE
ON
THE
PASCAL
VOC
DATASET
SEV
ERAL
FACTORS
ARE
RESPONSIBLE
FOR
THIS
DRAMATIC
IMPROVEMENT
IN
PERFORMANCE
I
THE
AVAILABILITY
OF
MUCH
LARGER
TRAINING
SETS
WITH
MILLIONS
OF
LABELED
EXAMPLES
II
POWERFUL
GPU
IMPLEMENTATIONS
MAKING
THE
TRAINING
OF
VERY
LARGE
MODELS
PRACTI
CAL
AND
III
BETTER
MODEL
REGULARIZATION
STRATEGIES
SUCH
AS
DROPOUT
DESPITE
THIS
ENCOURAGING
PROGRESS
THERE
IS
STILL
LITTLE
INSIGHT
INTO
THE
INTERNAL
OPERATION
AND
BEHAVIOR
OF
THESE
COMPLEX
MODELS
OR
HOW
THEY
ACHIEVE
SUCH
GOOD
PERFORMANCE
FROM
A
SCIENTIFIC
STANDPOINT
THIS
IS
DEEPLY
UNSATISFACTORY
WITH
OUT
CLEAR
UNDERSTANDING
OF
HOW
AND
WHY
THEY
WORK
THE
DEVELOPMENT
OF
BETTER
MODELS
IS
REDUCED
TO
TRIAL
AND
ERROR
IN
THIS
PAPER
WE
INTRODUCE
A
VISUALIZATION
D
FLEET
ET
AL
EDS
ECCV
PART
I
LNCS
PP
C
SPRINGER
INTERNATIONAL
PUBLISHING
SWITZERLAND
VISUALIZING
AND
UNDERSTANDING
CONVOLUTIONAL
NETWORKS
TECHNIQUE
THAT
REVEALS
THE
INPUT
STIMULI
THAT
EXCITE
INDIVIDUAL
FEATURE
MAPS
AT
ANY
LAYER
IN
THE
MODEL
IT
ALSO
ALLOWS
US
TO
OBSERVE
THE
EVOLUTION
OF
FEATURES
DURING
TRAINING
AND
TO
DIAGNOSE
POTENTIAL
PROBLEMS
WITH
THE
MODEL
THE
VISU
ALIZATION
TECHNIQUE
WE
PROPOSE
USES
A
MULTI
LAYERED
DECONVOLUTIONAL
NETWORK
DECONVNET
AS
PROPOSED
BY
ZEILER
ET
AL
TO
PROJECT
THE
FEATURE
ACTIVATIONS
BACK
TO
THE
INPUT
PIXEL
SPACE
WE
ALSO
PERFORM
A
SENSITIVITY
ANALYSIS
OF
THE
CLAS
SIFIER
OUTPUT
BY
OCCLUDING
PORTIONS
OF
THE
INPUT
IMAGE
REVEALING
WHICH
PARTS
OF
THE
SCENE
ARE
IMPORTANT
FOR
CLASSIFICATION
USING
THESE
TOOLS
WE
START
WITH
THE
ARCHITECTURE
OF
KRIZHEVSKY
ET
AL
AND
EXPLORE
DIFFERENT
ARCHITECTURES
DISCOVERING
ONES
THAT
OUTPERFORM
THEIR
RESULTS
ON
IMAGENET
WE
THEN
EXPLORE
THE
GENERALIZATION
ABILITY
OF
THE
MODEL
TO
OTHER
DATASETS
JUST
RETRAINING
THE
SOFTMAX
CLASSIFIER
ON
TOP
AS
SUCH
THIS
IS
A
FORM
OF
SUPERVISED
PRE
TRAINING
WHICH
CONTRASTS
WITH
THE
UNSUPERVISED
PRE
TRAINING
METHODS
POPULARIZED
BY
HINTON
ET
AL
AND
OTHERS
RELATED
WORK
VISUALIZATION
VISUALIZING
FEATURES
TO
GAIN
INTUITION
ABOUT
THE
NETWORK
IS
COM
MON
PRACTICE
BUT
MOSTLY
LIMITED
TO
THE
LAYER
WHERE
PROJECTIONS
TO
PIXEL
SPACE
ARE
POSSIBLE
IN
HIGHER
LAYERS
ALTERNATE
METHODS
MUST
BE
USED
FIND
THE
OPTIMAL
STIMULUS
FOR
EACH
UNIT
BY
PERFORMING
GRADIENT
DESCENT
IN
IMAGE
SPACE
TO
MAXIMIZE
THE
UNIT
ACTIVATION
THIS
REQUIRES
A
CAREFUL
INITIALIZATION
AND
DOES
NOT
GIVE
ANY
INFORMATION
ABOUT
THE
UNIT
INVARIANCES
MOTIVATED
BY
THE
LATTER
SHORT
COMING
EXTENDING
AN
IDEA
BY
SHOW
HOW
THE
HESSIAN
OF
A
GIVEN
UNIT
MAY
BE
COMPUTED
NUMERICALLY
AROUND
THE
OPTIMAL
RESPONSE
GIVING
SOME
INSIGHT
INTO
INVARIANCES
THE
PROBLEM
IS
THAT
FOR
HIGHER
LAYERS
THE
INVARIANCES
ARE
EXTREMELY
COMPLEX
SO
ARE
POORLY
CAPTURED
BY
A
SIMPLE
QUADRATIC
APPROXIMATION
OUR
APPROACH
BY
CONTRAST
PROVIDES
A
NON
PARAMETRIC
VIEW
OF
INVARIANCE
SHOW
ING
WHICH
PATTERNS
FROM
THE
TRAINING
SET
ACTIVATE
THE
FEATURE
MAP
OUR
APPROACH
IS
SIMILAR
TO
CONTEMPORARY
WORK
BY
SIMONYAN
ET
AL
WHO
DEMONSTRATE
HOW
SALIENCY
MAPS
CAN
BE
OBTAINED
FROM
A
CONVNET
BY
PROJECTING
BACK
FROM
THE
FULLY
CONNECTED
LAYERS
OF
THE
NETWORK
INSTEAD
OF
THE
CONVOLUTIONAL
FEATURES
THAT
WE
USE
GIRSHICK
ET
AL
SHOW
VISUALIZATIONS
THAT
IDENTIFY
PATCHES
WITHIN
A
DATASET
THAT
ARE
RESPONSIBLE
FOR
STRONG
ACTIVATIONS
AT
HIGHER
LAYERS
IN
THE
MODEL
OUR
VI
SUALIZATIONS
DIFFER
IN
THAT
THEY
ARE
NOT
JUST
CROPS
OF
INPUT
IMAGES
BUT
RATHER
TOP
DOWN
PROJECTIONS
THAT
REVEAL
STRUCTURES
WITHIN
EACH
PATCH
THAT
STIMULATE
A
PARTICULAR
FEATURE
MAP
FEATURE
GENERALIZATION
OUR
DEMONSTRATION
OF
THE
GENERALIZATION
ABILITY
OF
CONVNET
FEATURES
IS
ALSO
EXPLORED
IN
CONCURRENT
WORK
BY
DONAHUE
ET
AL
AND
GIRSHICK
ET
AL
THEY
USE
THE
CONVNET
FEATURES
TO
OBTAIN
STATE
OF
THE
ART
PERFORMANCE
ON
CALTECH
AND
THE
SUN
SCENES
DATASET
IN
THE
FORMER
CASE
AND
FOR
OBJECT
DETECTION
ON
THE
PASCAL
VOC
DATASET
IN
THE
LATTER
APPROACH
WE
USE
STANDARD
FULLY
SUPERVISED
CONVNET
MODELS
THROUGHOUT
THE
PAPER
AS
DE
FINED
BY
LECUN
ET
AL
AND
KRIZHEVSKY
ET
AL
THESE
MODELS
MAP
A
COLOR
M
D
ZEILER
AND
R
FERGUS
INPUT
IMAGE
XI
VIA
A
SERIES
OF
LAYERS
TO
A
PROBABILITY
VECTOR
YˆI
OVER
THE
C
DIF
FERENT
CLASSES
EACH
LAYER
CONSISTS
OF
I
CONVOLUTION
OF
THE
PREVIOUS
LAYER
OUTPUT
OR
IN
THE
CASE
OF
THE
LAYER
THE
INPUT
IMAGE
WITH
A
SET
OF
LEARNED
FILTERS
II
PASSING
THE
RESPONSES
THROUGH
A
RECTIFIED
LINEAR
FUNCTION
RELU
X
MAX
X
III
OPTIONALLY
MAX
POOLING
OVER
LOCAL
NEIGHBORHOODS
AND
IV
OPTIONALLY
A
LOCAL
CONTRAST
OPERATION
THAT
NORMALIZES
THE
RESPONSES
ACROSS
FEATURE
MAPS
FOR
MORE
DETAILS
OF
THESE
OPERATIONS
SEE
AND
THE
TOP
FEW
LAYERS
OF
THE
NET
WORK
ARE
CONVENTIONAL
FULLY
CONNECTED
NETWORKS
AND
THE
FINAL
LAYER
IS
A
SOFTMAX
CLASSIFIER
FIG
SHOWS
THE
MODEL
USED
IN
MANY
OF
OUR
EXPERIMENTS
WE
TRAIN
THESE
MODELS
USING
A
LARGE
SET
OF
N
LABELED
IMAGES
X
Y
WHERE
LABEL
YI
IS
A
DISCRETE
VARIABLE
INDICATING
THE
TRUE
CLASS
A
CROSS
ENTROPY
LOSS
FUNCTION
SUITABLE
FOR
IMAGE
CLASSIFICATION
IS
USED
TO
COMPARE
YˆI
AND
YI
THE
PARAMETERS
OF
THE
NETWORK
FILTERS
IN
THE
CONVOLUTIONAL
LAYERS
WEIGHT
MATRICES
IN
THE
FULLY
CONNECTED
LAYERS
AND
BIASES
ARE
TRAINED
BY
BACK
PROPAGATING
THE
DERIVATIVE
OF
THE
LOSS
WITH
RESPECT
TO
THE
PARAMETERS
THROUGHOUT
THE
NETWORK
AND
UPDATING
THE
PARAMETERS
VIA
STOCHASTIC
GRADIENT
DESCENT
DETAILS
OF
TRAINING
ARE
GIVEN
IN
SECTION
VISUALIZATION
WITH
A
DECONVNET
UNDERSTANDING
THE
OPERATION
OF
A
CONVNET
REQUIRES
INTERPRETING
THE
FEATURE
ACTIV
ITY
IN
INTERMEDIATE
LAYERS
WE
PRESENT
A
NOVEL
WAY
TO
MAP
THESE
ACTIVITIES
BACK
TO
THE
INPUT
PIXEL
SPACE
SHOWING
WHAT
INPUT
PATTERN
ORIGINALLY
CAUSED
A
GIVEN
ACTIVATION
IN
THE
FEATURE
MAPS
WE
PERFORM
THIS
MAPPING
WITH
A
DECONVOLUTIONAL
NETWORK
DECONVNET
ZEILER
ET
AL
A
DECONVNET
CAN
BE
THOUGHT
OF
AS
A
CONVNET
MODEL
THAT
USES
THE
SAME
COMPONENTS
FILTERING
POOLING
BUT
IN
REVERSE
SO
INSTEAD
OF
MAPPING
PIXELS
TO
FEATURES
DOES
THE
OPPOSITE
IN
ZEILER
ET
AL
DECONVNETS
WERE
PROPOSED
AS
A
WAY
OF
PERFORMING
UNSUPERVISED
LEARNING
HERE
THEY
ARE
NOT
USED
IN
ANY
LEARNING
CAPACITY
JUST
AS
A
PROBE
OF
AN
ALREADY
TRAINED
CONVNET
TO
EXAMINE
A
CONVNET
A
DECONVNET
IS
ATTACHED
TO
EACH
OF
ITS
LAYERS
AS
ILLUS
TRATED
IN
FIG
TOP
PROVIDING
A
CONTINUOUS
PATH
BACK
TO
IMAGE
PIXELS
TO
START
AN
INPUT
IMAGE
IS
PRESENTED
TO
THE
CONVNET
AND
FEATURES
COMPUTED
THROUGHOUT
THE
LAYERS
TO
EXAMINE
A
GIVEN
CONVNET
ACTIVATION
WE
SET
ALL
OTHER
ACTIVATIONS
IN
THE
LAYER
TO
ZERO
AND
PASS
THE
FEATURE
MAPS
AS
INPUT
TO
THE
ATTACHED
DECONVNET
LAYER
THEN
WE
SUCCESSIVELY
I
UNPOOL
II
RECTIFY
AND
III
FILTER
TO
RECONSTRUCT
THE
ACTIVITY
IN
THE
LAYER
BENEATH
THAT
GAVE
RISE
TO
THE
CHOSEN
ACTIVATION
THIS
IS
THEN
REPEATED
UNTIL
INPUT
PIXEL
SPACE
IS
REACHED
UNPOOLING
IN
THE
CONVNET
THE
MAX
POOLING
OPERATION
IS
NON
INVERTIBLE
HOW
EVER
WE
CAN
OBTAIN
AN
APPROXIMATE
INVERSE
BY
RECORDING
THE
LOCATIONS
OF
THE
MAXIMA
WITHIN
EACH
POOLING
REGION
IN
A
SET
OF
SWITCH
VARIABLES
IN
THE
DECON
VNET
THE
UNPOOLING
OPERATION
USES
THESE
SWITCHES
TO
PLACE
THE
RECONSTRUCTIONS
FROM
THE
LAYER
ABOVE
INTO
APPROPRIATE
LOCATIONS
PRESERVING
THE
STRUCTURE
OF
THE
STIMULUS
SEE
FIG
BOTTOM
FOR
AN
ILLUSTRATION
OF
THE
PROCEDURE
RECTIFICATION
THE
CONVNET
USES
RELU
NON
LINEARITIES
WHICH
RECTIFY
THE
FEA
TURE
MAPS
THUS
ENSURING
THE
FEATURE
MAPS
ARE
ALWAYS
POSITIVE
TO
OBTAIN
VALID
VISUALIZING
AND
UNDERSTANDING
CONVOLUTIONAL
NETWORKS
FEATURE
RECONSTRUCTIONS
AT
EACH
LAYER
WHICH
ALSO
SHOULD
BE
POSITIVE
WE
PASS
THE
RECONSTRUCTED
SIGNAL
THROUGH
A
RELU
NON
FILTERING
THE
CONVNET
USES
LEARNED
FILTERS
TO
CONVOLVE
THE
FEATURE
MAPS
FROM
THE
PREVIOUS
LAYER
TO
APPROXIMATELY
INVERT
THIS
THE
DECONVNET
USES
TRANSPOSED
VERSIONS
OF
THE
SAME
FILTERS
AS
OTHER
AUTOENCODER
MODELS
SUCH
AS
RBMS
BUT
APPLIED
TO
THE
RECTIFIED
MAPS
NOT
THE
OUTPUT
OF
THE
LAYER
BENEATH
IN
PRACTICE
THIS
MEANS
FLIPPING
EACH
FILTER
VERTICALLY
AND
HORIZONTALLY
NOTE
THAT
WE
DO
NOT
USE
ANY
CONTRAST
NORMALIZATION
OPERATIONS
WHEN
IN
THIS
RECONSTRUCTION
PATH
PROJECTING
DOWN
FROM
HIGHER
LAYERS
USES
THE
SWITCH
SETTINGS
GENERATED
BY
THE
MAX
POOLING
IN
THE
CONVNET
ON
THE
WAY
UP
AS
THESE
SWITCH
SETTINGS
ARE
PECULIAR
TO
A
GIVEN
INPUT
IMAGE
THE
RECONSTRUCTION
OBTAINED
FROM
A
SINGLE
ACTIVATION
THUS
RESEMBLES
A
SMALL
PIECE
OF
THE
ORIGINAL
INPUT
IMAGE
WITH
STRUCTURES
WEIGHTED
ACCORDING
TO
THEIR
CONTRIBUTION
TOWARD
TO
THE
FEATURE
ACTI
VATION
SINCE
THE
MODEL
IS
TRAINED
DISCRIMINATIVELY
THEY
IMPLICITLY
SHOW
WHICH
PARTS
OF
THE
INPUT
IMAGE
ARE
DISCRIMINATIVE
NOTE
THAT
THESE
PROJECTIONS
ARE
NOT
SAMPLES
FROM
THE
MODEL
SINCE
THERE
IS
NO
GENERATIVE
PROCESS
INVOLVED
THE
WHOLE
PROCEDURE
IS
SIMILAR
TO
BACKPROPPING
A
SINGLE
STRONG
ACTIVATION
RATHER
THAN
THE
H
USUAL
GRADIENTS
I
E
COMPUTING
X
N
WHERE
H
IS
THE
ELEMENT
OF
THE
FEATURE
MAP
WITH
THE
STRONG
ACTIVATION
AND
XN
IS
THE
INPUT
IMAGE
HOWEVER
IT
DIFFERS
IN
THAT
I
THE
THE
RELU
IS
IMPOSED
INDEPENDENTLY
AND
II
CONTRAST
NORMALIZATION
OPERATIONS
ARE
NOT
USED
A
GENERAL
SHORTCOMING
OF
OUR
APPROACH
IS
THAT
IT
ONLY
VISUALIZES
A
SINGLE
ACTIVATION
NOT
THE
JOINT
ACTIVITY
PRESENT
IN
A
LAYER
NEVERTHE
LESS
AS
WE
SHOW
IN
FIG
THESE
VISUALIZATIONS
ARE
ACCURATE
REPRESENTATIONS
OF
THE
INPUT
PATTERN
THAT
STIMULATES
THE
GIVEN
FEATURE
MAP
IN
THE
MODEL
WHEN
THE
PARTS
OF
THE
ORIGINAL
INPUT
IMAGE
CORRESPONDING
TO
THE
PATTERN
ARE
OCCLUDED
WE
SEE
A
DISTINCT
DROP
IN
ACTIVITY
WITHIN
THE
FEATURE
MAP
TRAINING
DETAILS
WE
NOW
DESCRIBE
THE
LARGE
CONVNET
MODEL
THAT
WILL
BE
VISUALIZED
IN
SECTION
THE
ARCHITECTURE
SHOWN
IN
FIG
IS
SIMILAR
TO
THAT
USED
BY
KRIZHEVSKY
ET
AL
FOR
IMAGENET
CLASSIFICATION
ONE
DIFFERENCE
IS
THAT
THE
SPARSE
CONNECTIONS
USED
IN
KRIZHEVSKY
LAYERS
DUE
TO
THE
MODEL
BEING
SPLIT
ACROSS
GPUS
ARE
REPLACED
WITH
DENSE
CONNECTIONS
IN
OUR
MODEL
OTHER
IMPORTANT
DIFFERENCES
RE
LATING
TO
LAYERS
AND
WERE
MADE
FOLLOWING
INSPECTION
OF
THE
VISUALIZATIONS
IN
FIG
AS
DESCRIBED
IN
SECTION
THE
MODEL
WAS
TRAINED
ON
THE
IMAGENET
TRAINING
SET
MILLION
IMAGES
SPREAD
OVER
DIFFERENT
CLASSES
EACH
RGB
IMAGE
WAS
PREPROCESSED
BY
RESIZ
ING
THE
SMALLEST
DIMENSION
TO
CROPPING
THE
CENTER
REGION
SUBTRACT
ING
THE
PER
PIXEL
MEAN
ACROSS
ALL
IMAGES
AND
THEN
USING
DIFFERENT
SUB
CROPS
OF
SIZE
CORNERS
CENTER
WITH
OUT
HORIZONTAL
FLIPS
STOCHASTIC
GRADIENT
DESCENT
WITH
A
MINI
BATCH
SIZE
OF
WAS
USED
TO
UPDATE
THE
PARAMETERS
STARTING
WITH
A
LEARNING
RATE
OF
IN
CONJUNCTION
WITH
A
MOMENTUM
TERM
OF
A
DECONVNET
LAYER
LEFT
ATTACHED
TO
A
CONVNET
LAYER
RIGHT
THE
DECONVNET
WILL
RECONSTRUCT
AN
APPROXIMATE
VERSION
OF
THE
CONVNET
FEATURES
FROM
THE
LAYER
BENEATH
BOTTOM
AN
ILLUSTRATION
OF
THE
UNPOOLING
OPERATION
IN
THE
DECONVNET
USING
SWITCHES
WHICH
RECORD
THE
LOCATION
OF
THE
LOCAL
MAX
IN
EACH
POOLING
REGION
COLORED
ZONES
DURING
POOLING
IN
THE
CONVNET
THE
BLACK
WHITE
BARS
ARE
NEGATIVE
POSITIVE
ACTIVATIONS
WITHIN
THE
FEATURE
MAP
ANNEAL
THE
LEARNING
RATE
THROUGHOUT
TRAINING
MANUALLY
WHEN
THE
VALIDATION
ERROR
PLATEAUS
DROPOUT
IS
USED
IN
THE
FULLY
CONNECTED
LAYERS
AND
WITH
A
RATE
OF
ALL
WEIGHTS
ARE
INITIALIZED
TO
AND
BIASES
ARE
SET
TO
VISUALIZATION
OF
THE
FIRST
LAYER
FILTERS
DURING
TRAINING
REVEALS
THAT
A
FEW
OF
THEM
DOMINATE
TO
COMBAT
THIS
WE
RENORMALIZE
EACH
FILTER
IN
THE
CONVOLUTIONAL
LAYERS
WHOSE
RMS
VALUE
EXCEEDS
A
FIXED
RADIUS
OF
TO
THIS
FIXED
RADIUS
THIS
IS
CRUCIAL
ESPECIALLY
IN
THE
FIRST
LAYER
OF
THE
MODEL
WHERE
THE
INPUT
IMAGES
ARE
ROUGHLY
IN
THE
RANGE
AS
IN
KRIZHEVSKY
ET
AL
WE
PRODUCE
MULTIPLE
DIFFERENT
CROPS
AND
FLIPS
OF
EACH
TRAINING
EXAMPLE
TO
BOOST
TRAINING
SET
SIZE
WE
STOPPED
TRAINING
AFTER
EPOCHS
WHICH
TOOK
AROUND
DAYS
ON
A
SINGLE
GPU
USING
AN
IMPLEMENTATION
BASED
ON
CONVNET
VISUALIZATION
USING
THE
MODEL
DESCRIBED
IN
SECTION
WE
NOW
USE
THE
DECONVNET
TO
VISUALIZE
THE
FEATURE
ACTIVATIONS
ON
THE
IMAGENET
VALIDATION
SET
FEATURE
VISUALIZATION
FIG
SHOWS
FEATURE
VISUALIZATIONS
FROM
OUR
MODEL
ONCE
TRAINING
IS
COMPLETE
FOR
A
GIVEN
FEATURE
MAP
WE
SHOW
THE
TOP
ACTI
VATIONS
EACH
PROJECTED
SEPARATELY
DOWN
TO
PIXEL
SPACE
REVEALING
THE
DIFFERENT
VISUALIZING
AND
UNDERSTANDING
CONVOLUTIONAL
NETWORKS
STRUCTURES
THAT
EXCITE
THAT
MAP
AND
SHOWING
ITS
INVARIANCE
TO
INPUT
DEFORMATIONS
ALONGSIDE
THESE
VISUALIZATIONS
WE
SHOW
THE
CORRESPONDING
IMAGE
PATCHES
THESE
HAVE
GREATER
VARIATION
THAN
VISUALIZATIONS
WHICH
SOLELY
FOCUS
ON
THE
DISCRIMINANT
STRUCTURE
WITHIN
EACH
PATCH
FOR
EXAMPLE
IN
LAYER
ROW
COL
THE
PATCHES
APPEAR
TO
HAVE
LITTLE
IN
COMMON
BUT
THE
VISUALIZATIONS
REVEAL
THAT
THIS
PARTICULAR
FEATURE
MAP
FOCUSES
ON
THE
GRASS
IN
THE
BACKGROUND
NOT
THE
FOREGROUND
OBJECTS
THE
PROJECTIONS
FROM
EACH
LAYER
SHOW
THE
HIERARCHICAL
NATURE
OF
THE
FEATURES
IN
THE
NETWORK
LAYER
RESPONDS
TO
CORNERS
AND
OTHER
EDGE
COLOR
CONJUNCTIONS
LAYER
HAS
MORE
COMPLEX
INVARIANCES
CAPTURING
SIMILAR
TEXTURES
E
G
MESH
PATTERNS
ROW
COL
TEXT
LAYER
SHOWS
SIGNIFICANT
VARIATION
AND
IS
MORE
CLASS
SPECIFIC
DOG
FACES
BIRD
LEGS
LAYER
SHOWS
ENTIRE
OBJECTS
WITH
SIGNIFICANT
POSE
VARIATION
E
G
KEYBOARDS
AND
DOGS
FEATURE
EVOLUTION
DURING
TRAINING
FIG
VISUALIZES
THE
PROGRESSION
DURING
TRAINING
OF
THE
STRONGEST
ACTIVATION
ACROSS
ALL
TRAINING
EXAMPLES
WITHIN
A
GIVEN
FEATURE
MAP
PROJECTED
BACK
TO
PIXEL
SPACE
SUDDEN
JUMPS
IN
APPEARANCE
RESULT
FROM
A
CHANGE
IN
THE
IMAGE
FROM
WHICH
THE
STRONGEST
ACTIVATION
ORIGINATES
THE
LOWER
LAYERS
OF
THE
MODEL
CAN
BE
SEEN
TO
CONVERGE
WITHIN
A
FEW
EPOCHS
HOWEVER
THE
UPPER
LAYERS
ONLY
DEVELOP
DEVELOP
AFTER
A
CONSIDERABLE
NUMBER
OF
EPOCHS
DEMONSTRATING
THE
NEED
TO
LET
THE
MODELS
TRAIN
UNTIL
FULLY
CONVERGED
ARCHITECTURE
SELECTION
WHILE
VISUALIZATION
OF
A
TRAINED
MODEL
GIVES
INSIGHT
INTO
ITS
OPERATION
IT
CAN
ALSO
ASSIST
WITH
SELECTING
GOOD
ARCHITECTURES
IN
THE
FIRST
PLACE
BY
VISUALIZING
THE
FIRST
AND
SECOND
LAYERS
OF
KRIZHEVSKY
ET
AL
ARCHITECTURE
FIG
A
C
VARIOUS
PROBLEMS
ARE
APPARENT
THE
FIRST
LAYER
FILTERS
ARE
A
MIX
OF
EXTREMELY
HIGH
AND
LOW
FREQUENCY
INFORMATION
WITH
LITTLE
COVERAGE
OF
THE
MID
FREQUENCIES
ADDITIONALLY
THE
LAYER
VISUALIZATION
SHOWS
ALIASING
ARTIFACTS
CAUSED
BY
THE
LARGE
STRIDE
USED
IN
THE
LAYER
CONVOLUTIONS
TO
REMEDY
THESE
PROBLEMS
WE
I
REDUCED
THE
LAYER
FILTER
SIZE
FROM
TO
AND
II
MADE
THE
STRIDE
OF
THE
CONVOLUTION
RATHER
THAN
THIS
NEW
ARCHITECTURE
RETAINS
MUCH
MORE
INFORMATION
IN
THE
AND
LAYER
FEATURES
AS
SHOWN
IN
FIG
B
D
MORE
IMPORTANTLY
IT
ALSO
IMPROVES
THE
CLASSIFICATION
PERFORMANCE
AS
SHOWN
IN
SECTION
OCCLUSION
SENSITIVITY
WITH
IMAGE
CLASSIFICATION
APPROACHES
A
NATURAL
QUESTION
IS
IF
THE
MODEL
IS
TRULY
IDENTIFYING
THE
LOCATION
OF
THE
OBJECT
IN
THE
IMAGE
OR
JUST
USING
THE
SURROUNDING
CONTEXT
FIG
ATTEMPTS
TO
ANSWER
THIS
QUESTION
BY
SYSTEMATICALLY
OCCLUDING
DIFFERENT
PORTIONS
OF
THE
INPUT
IMAGE
WITH
A
GREY
SQUARE
AND
MONITORING
THE
OUTPUT
OF
THE
CLASSIFIER
THE
EXAMPLES
CLEARLY
SHOW
THE
MODEL
IS
LOCALIZING
THE
OBJECTS
WITHIN
THE
SCENE
AS
THE
PROBABILITY
OF
THE
CORRECT
CLASS
DROPS
SIGNIFICANTLY
WHEN
THE
OBJECT
IS
OCCLUDED
FIG
ALSO
SHOWS
VISUALIZATIONS
FROM
THE
STRONGEST
FEATURE
MAP
OF
THE
TOP
CONVOLUTION
LAYER
IN
ADDITION
TO
ACTIVITY
IN
THIS
MAP
SUMMED
OVER
SPATIAL
LOCATIONS
AS
A
FUNCTION
OF
OCCLUDER
POSITION
VISUALIZATION
OF
FEATURES
IN
A
FULLY
TRAINED
MODEL
FOR
LAYERS
WE
SHOW
THE
TOP
ACTIVATIONS
IN
A
RANDOM
SUBSET
OF
FEATURE
MAPS
ACROSS
THE
VALIDATION
DATA
PROJECTED
DOWN
TO
PIXEL
SPACE
USING
OUR
DECONVOLUTIONAL
NETWORK
APPROACH
OUR
RECONSTRUCTIONS
ARE
NOT
SAMPLES
FROM
THE
MODEL
THEY
ARE
RECONSTRUCTED
PATTERNS
FROM
THE
VALIDATION
SET
THAT
CAUSE
HIGH
ACTIVATIONS
IN
A
GIVEN
FEATURE
MAP
FOR
EACH
FEATURE
MAP
WE
ALSO
SHOW
THE
CORRESPONDING
IMAGE
PATCHES
NOTE
I
THE
THE
STRONG
GROUPING
WITHIN
EACH
FEATURE
MAP
II
GREATER
INVARIANCE
AT
HIGHER
LAYERS
AND
III
EXAGGERATION
OF
DISCRIMINATIVE
PARTS
OF
THE
IMAGE
E
G
EYES
AND
NOSES
OF
DOGS
LAYER
ROW
COLS
BEST
VIEWED
IN
ELECTRONIC
FORM
THE
COMPRESSION
ARTIFACTS
ARE
A
CONSEQUENCE
OF
THE
SUBMISSION
LIMIT
NOT
THE
RECONSTRUCTION
ALGORITHM
ITSELF
ARCHITECTURE
OF
OUR
LAYER
CONVNET
MODEL
A
BY
CROP
OF
AN
IMAGE
WITH
COLOR
PLANES
IS
PRESENTED
AS
THE
INPUT
THIS
IS
CONVOLVED
WITH
DIFFERENT
LAYER
FILTERS
RED
EACH
OF
SIZE
BY
USING
A
STRIDE
OF
IN
BOTH
X
AND
Y
THE
RESULTING
FEATURE
MAPS
ARE
THEN
I
PASSED
THROUGH
A
RECTIFIED
LINEAR
FUNCTION
NOT
SHOWN
II
POOLED
MAX
WITHIN
REGIONS
USING
STRIDE
AND
III
CONTRAST
NORMALIZED
ACROSS
FEATURE
MAPS
TO
GIVE
DIFFERENT
BY
ELEMENT
FEATURE
MAPS
SIMILAR
OPERATIONS
ARE
REPEATED
IN
LAYERS
THE
LAST
TWO
LAYERS
ARE
FULLY
CONNECTED
TAKING
FEATURES
FROM
THE
TOP
CONVOLUTIONAL
LAYER
AS
INPUT
IN
VECTOR
FORM
DIMENSIONS
THE
FINAL
LAYER
IS
A
C
WAY
SOFTMAX
FUNCTION
C
BEING
THE
NUMBER
OF
CLASSES
ALL
FILTERS
AND
FEATURE
MAPS
ARE
SQUARE
IN
SHAPE
EVOLUTION
OF
A
RANDOMLY
CHOSEN
SUBSET
OF
MODEL
FEATURES
THROUGH
TRAINING
EACH
LAYER
FEATURES
ARE
DISPLAYED
IN
A
DIFFERENT
BLOCK
WITHIN
EACH
BLOCK
WE
SHOW
A
RANDOMLY
CHOSEN
SUBSET
OF
FEATURES
AT
EPOCHS
THE
VISUALIZA
TION
SHOWS
THE
STRONGEST
ACTIVATION
ACROSS
ALL
TRAINING
EXAMPLES
FOR
A
GIVEN
FEATURE
MAP
PROJECTED
DOWN
TO
PIXEL
SPACE
USING
OUR
DECONVNET
APPROACH
COLOR
CONTRAST
IS
ARTIFICIALLY
ENHANCED
AND
THE
FIGURE
IS
BEST
VIEWED
IN
ELECTRONIC
FORM
OCCLUDER
COVERS
THE
IMAGE
REGION
THAT
APPEARS
IN
THE
VISUALIZATION
WE
SEE
A
STRONG
DROP
IN
ACTIVITY
IN
THE
FEATURE
MAP
THIS
SHOWS
THAT
THE
VISUALIZATION
GENUINELY
CORRESPONDS
TO
THE
IMAGE
STRUCTURE
THAT
STIMULATES
THAT
FEATURE
MAP
HENCE
VALIDATING
THE
OTHER
VISUALIZATIONS
SHOWN
IN
FIG
AND
FIG
THIS
DATASET
CONSISTS
OF
TRAINING
VALIDATION
TEST
EXAMPLES
SPREAD
OVER
CATEGORIES
TABLE
SHOWS
OUR
RESULTS
ON
THIS
DATASET
USING
THE
EXACT
ARCHITECTURE
SPECIFIED
IN
KRIZHEVSKY
ET
AL
WE
ATTEMPT
TO
REPLICATE
THEIR
RESULT
ON
THE
VALIDATION
SET
WE
ACHIEVE
AN
ERROR
RATE
WITHIN
OF
THEIR
REPORTED
VALUE
ON
THE
IMAGENET
VALIDATION
SET
NEXT
WE
ANALYZE
THE
PERFORMANCE
OF
OUR
MODEL
WITH
THE
ARCHITECTURAL
CHANGES
OUTLINED
IN
SECTION
THIS
MODEL
SHOWN
IN
FIG
SIGNIFICANTLY
OUTPERFORMS
THE
ARCHITECTURE
OF
KRIZHEVSKY
ET
AL
BEATING
THEIR
SINGLE
MODEL
RESULT
BY
TEST
TOP
WHEN
WE
COMBINE
MULTIPLE
MODELS
WE
OBTAIN
A
TEST
ERROR
OF
AN
IMPROVE
MENT
OF
THIS
RESULT
IS
CLOSE
TO
THAT
PRODUCED
BY
THE
DATA
AUGMENTATION
APPROACHES
OF
HOWARD
WHICH
COULD
EASILY
BE
COMBINED
WITH
OUR
ARCHITEC
TURE
HOWEVER
OUR
MODEL
IS
SOME
WAY
SHORT
OF
THE
WINNER
OF
THE
IMAGENET
CLASSIFICATION
COMPETITION
THREE
TEST
EXAMPLES
WHERE
WE
SYSTEMATICALLY
COVER
UP
DIFFERENT
PORTIONS
OF
THE
SCENE
WITH
A
GRAY
SQUARE
COLUMN
AND
SEE
HOW
THE
TOP
LAYER
FEATURE
MAPS
B
C
AND
CLASSIFIER
OUTPUT
D
E
CHANGES
B
FOR
EACH
POSITION
OF
THE
GRAY
SCALE
WE
RECORD
THE
TOTAL
ACTIVATION
IN
ONE
LAYER
FEATURE
MAP
THE
ONE
WITH
THE
STRONGEST
RESPONSE
IN
THE
UNOCCLUDED
IMAGE
C
A
VISUALIZATION
OF
THIS
FEATURE
MAP
PROJECTED
DOWN
INTO
THE
INPUT
IMAGE
BLACK
SQUARE
ALONG
WITH
VISUALIZATIONS
OF
THIS
MAP
FROM
OTHER
IMAGES
THE
FIRST
ROW
EXAMPLE
SHOWS
THE
STRONGEST
FEATURE
TO
BE
THE
DOG
FACE
WHEN
THIS
IS
COVERED
UP
THE
ACTIVITY
IN
THE
FEATURE
MAP
DECREASES
BLUE
AREA
IN
B
D
A
MAP
OF
CORRECT
CLASS
PROBABILITY
AS
A
FUNCTION
OF
THE
POSITION
OF
THE
GRAY
SQUARE
E
G
WHEN
THE
DOG
FACE
IS
OBSCURED
THE
PROBABILITY
FOR
POMERANIAN
DROPS
SIGNIFICANTLY
E
THE
MOST
PROBABLE
LABEL
AS
A
FUNCTION
OF
OCCLUDER
POSITION
E
G
IN
THE
ROW
FOR
MOST
LOCATIONS
IT
IS
POMERANIAN
BUT
IF
THE
DOG
FACE
IS
OBSCURED
BUT
NOT
THE
BALL
THEN
IT
PREDICTS
TENNIS
BALL
IN
THE
EXAMPLE
TEXT
ON
THE
CAR
IS
THE
STRONGEST
FEATURE
IN
LAYER
BUT
THE
CLASSIFIER
IS
MOST
SENSITIVE
TO
THE
WHEEL
THE
EXAMPLE
CONTAINS
MULTIPLE
OBJECTS
THE
STRONGEST
FEATURE
IN
LAYER
PICKS
OUT
THE
FACES
BUT
THE
CLASSIFIER
IS
SENSITIVE
TO
THE
DOG
BLUE
REGION
IN
D
SINCE
IT
USES
MULTIPLE
FEATURE
MAPS
THE
FOLLOWING
WE
REFER
TO
TOP
VALIDATION
ERROR
THIS
IS
SURPRISING
GIVEN
THAT
THEY
CONTAIN
THE
MAJORITY
OF
MODEL
PARAMETERS
REMOVING
TWO
OF
THE
MIDDLE
CONVOLUTIONAL
LAYERS
ALSO
MAKES
A
RELATIVELY
SMALL
DIFFERENCE
TO
THE
ERROR
RATE
HOWEVER
REMOVING
BOTH
THE
MIDDLE
CONVOLUTION
LAYERS
AND
THE
FULLY
CONNECTED
LAYERS
YIELDS
A
MODEL
WITH
ONLY
LAYERS
WHOSE
PERFORMANCE
IS
DRAMATICALLY
WORSE
THIS
WOULD
SUGGEST
THAT
THE
OVERALL
DEPTH
OF
THE
MODEL
IS
IMPORTANT
FOR
OBTAINING
GOOD
PERFORMANCE
WE
THEN
MODIFY
OUR
MODEL
SHOWN
IN
FIG
CHANGING
THE
SIZE
OF
THE
FULLY
CONNECTED
LAYERS
MAKES
LITTLE
DIFFERENCE
TO
PERFORMANCE
SAME
FOR
MODEL
OF
KRIZHEVSKY
ET
AL
HOWEVER
INCREASING
THE
SIZE
OF
THE
MIDDLE
CONVOLUTION
LAYERS
GOES
GIVE
A
USEFUL
GAIN
IN
PERFORMANCE
THE
EXPERIMENTS
ABOVE
SHOW
THE
IMPORTANCE
OF
THE
CONVOLUTIONAL
PART
OF
OUR
IMAGENET
MODEL
IN
OBTAINING
STATE
OF
THE
ART
PERFORMANCE
THIS
IS
SUPPORTED
BY
THE
VISUALIZATIONS
OF
FIG
WHICH
SHOW
THE
COMPLEX
INVARIANCES
LEARNED
IN
THE
CONVOLUTIONAL
LAYERS
WE
NOW
EXPLORE
THE
ABILITY
OF
THESE
FEATURE
EXTRACTION
LAYERS
TO
GENERALIZE
TO
OTHER
DATASETS
NAMELY
CALTECH
CALTECH
AND
PASCAL
VOC
TO
DO
THIS
WE
KEEP
LAYERS
OF
OUR
IMAGENET
TRAINED
MODEL
FIXED
AND
TRAIN
A
NEW
SOFTMAX
CLASSIFIER
ON
TOP
FOR
THE
APPROPRIATE
NUM
BER
OF
CLASSES
USING
THE
TRAINING
IMAGES
OF
THE
NEW
DATASET
SINCE
THE
SOFTMAX
CONTAINS
RELATIVELY
FEW
PARAMETERS
IT
CAN
BE
TRAINED
QUICKLY
FROM
A
RELATIVELY
SMALL
NUMBER
OF
EXAMPLES
AS
IS
THE
CASE
FOR
CERTAIN
DATASETS
THE
EXPERIMENTS
COMPARE
OUR
FEATURE
REPRESENTATION
OBTAINED
FROM
IMA
GENET
WITH
THE
HAND
CRAFTED
FEATURES
USED
BY
OTHER
METHODS
IN
BOTH
OUR
AP
PROACH
AND
EXISTING
ONES
THE
CALTECH
PASCAL
TRAINING
DATA
IS
ONLY
USED
TO
TRAIN
THE
CLASSIFIER
AS
THEY
ARE
OF
SIMILAR
COMPLEXITY
OURS
SOFTMAX
OTHERS
LIN
EAR
SVM
THE
FEATURE
REPRESENTATION
IS
CRUCIAL
TO
PERFORMANCE
IT
IS
IMPORTANT
TO
NOTE
THAT
BOTH
REPRESENTATIONS
WERE
BUILT
USING
IMAGES
BEYOND
THE
CALTECH
AND
PASCAL
TRAINING
SETS
FOR
EXAMPLE
THE
HYPER
PARAMETERS
IN
HOG
DESCRIPTORS
WERE
DETERMINED
THROUGH
SYSTEMATIC
EXPERIMENTS
ON
A
PEDESTRIAN
DATASET
WE
ALSO
TRY
A
SECOND
STRATEGY
OF
TRAINING
A
MODEL
FROM
SCRATCH
I
E
RESETTING
LAYERS
TO
RANDOM
VALUES
AND
TRAIN
THEM
AS
WELL
AS
THE
SOFTMAX
ON
THE
TRAINING
IMAGES
OF
THE
PASCAL
CALTECH
DATASET
ONE
COMPLICATION
IS
THAT
SOME
OF
THE
CALTECH
DATASETS
HAVE
SOME
IMAGES
THAT
ARE
ALSO
IN
THE
IMAGENET
TRAINING
DATA
USING
NORMALIZED
CORRELATION
WE
VISUALIZING
AND
UNDERSTANDING
CONVOLUTIONAL
NETWORKS
IDENTIFIED
THESE
FEW
OVERLAP
AND
REMOVED
THEM
FROM
OUR
IMAGENET
TRAINING
SET
AND
THEN
RETRAINED
OUR
IMAGENET
MODELS
SO
AVOIDING
THE
POSSIBILITY
OF
TRAIN
TEST
CONTAMINATION
CALTECH
WE
FOLLOW
THE
PROCEDURE
OF
AND
RANDOMLY
SELECT
OR
IM
AGES
PER
CLASS
FOR
TRAINING
AND
TEST
ON
UP
TO
IMAGES
PER
CLASS
REPORTING
THE
AVERAGE
OF
THE
PER
CLASS
ACCURACIES
IN
TABLE
USING
TRAIN
TEST
FOLDS
TRAINING
TOOK
MINUTES
FOR
IMAGES
CLASS
THE
PRE
TRAINED
MODEL
BEATS
THE
BEST
RE
PORTED
RESULT
FOR
IMAGES
CLASS
FROM
BY
OUR
RESULT
AGREES
WITH
THE
RECENTLY
PUBLISHED
RESULT
OF
DONAHUE
ET
AL
WHO
OBTAIN
ACCURACY
IMGS
CLASS
THE
CONVNET
MODEL
TRAINED
FROM
SCRATCH
HOWEVER
DOES
TERRIBLY
ONLY
ACHIEVING
SHOWING
THE
IMPOSSIBILITY
OF
TRAINING
A
LARGE
CONVNET
ON
SUCH
A
SMALL
DATASET
WE
FOLLOW
THE
PROCEDURE
OF
SELECTING
OR
TRAINING
IMAGES
PER
CLASS
REPORTING
THE
AVERAGE
OF
THE
PER
CLASS
ACCURACIES
IN
TABLE
OUR
IMAGENET
PRETRAINED
MODEL
BEATS
THE
CURRENT
STATE
OF
THE
ART
RESULTS
OB
TAINED
BY
BO
ET
AL
BY
A
SIGNIFICANT
MARGIN
VS
FOR
TRAINING
IMAGES
CLASS
HOWEVER
AS
WITH
CALTECH
THE
MODEL
TRAINED
FROM
SCRATCH
DOES
POORLY
IN
FIG
WE
EXPLORE
THE
ONE
SHOT
LEARNING
REGIME
WITH
OUR
PRE
TRAINED
MODEL
JUST
CALTECH
TRAINING
IMAGES
ARE
NEEDED
TO
BEAT
THE
LEADING
METHOD
USING
TIMES
AS
MANY
IMAGES
THIS
SHOWS
THE
POWER
OF
THE
IMAGENET
FEATURE
EXTRACTOR
PASCAL
WE
USED
THE
STANDARD
TRAINING
AND
VALIDATION
IMAGES
TO
TRAIN
A
WAY
SOFTMAX
ON
TOP
OF
THE
IMAGENET
PRETRAINED
CONVNET
THIS
IS
NOT
IDEAL
AS
PASCAL
IMAGES
CAN
CONTAIN
MULTIPLE
OBJECTS
AND
OUR
MODEL
JUST
PROVIDES
A
SINGLE
EXCLUSIVE
PREDICTION
FOR
EACH
IMAGE
TABLE
SHOWS
THE
RESULTS
ON
THE
TEST
SET
COMPARING
TO
THE
LEADING
METHODS
THE
TOP
ENTRIES
IN
THE
COMPETITION
AND
CONCURRENT
WORK
FROM
OQUAB
ET
AL
WHO
USE
A
CONVNET
WITH
A
MORE
APPROPRIATE
CLASSIFIER
THE
PASCAL
AND
IMAGENET
IMAGES
ARE
QUITE
DIFFERENT
IN
NATURE
THE
FORMER
BEING
FULL
SCENES
UNLIKE
THE
LATTER
WE
EXPLORED
LARGE
CONVOLUTIONAL
NEURAL
NETWORK
MODELS
TRAINED
FOR
IMAGE
CLAS
SIFICATION
IN
A
NUMBER
WAYS
FIRST
WE
PRESENTED
A
NOVEL
WAY
TO
VISUALIZE
THE
ACTIVITY
WITHIN
THE
MODEL
THIS
REVEALS
THE
FEATURES
TO
BE
FAR
FROM
RANDOM
UN
INTERPRETABLE
PATTERNS
RATHER
THEY
SHOW
MANY
INTUITIVELY
DESIRABLE
PROPERTIES
SUCH
AS
COMPOSITIONALITY
INCREASING
INVARIANCE
AND
CLASS
DISCRIMINATION
AS
WE
ASCEND
THE
LAYERS
WE
ALSO
SHOW
HOW
THESE
VISUALIZATION
CAN
BE
USED
TO
IDENTIFY
PROBLEMS
WITH
THE
MODEL
AND
SO
OBTAIN
BETTER
RESULTS
FOR
EXAMPLE
IMPROVING
ON
KRIZHEVSKY
ET
AL
IMPRESSIVE
IMAGENET
RESULT
WE
THEN
DEMON
STRATED
THROUGH
A
SERIES
OF
OCCLUSION
EXPERIMENTS
THAT
THE
MODEL
WHILE
TRAINED
FOR
CLASSIFICATION
IS
HIGHLY
SENSITIVE
TO
LOCAL
STRUCTURE
IN
THE
IMAGE
AND
IS
NOT
JUST
USING
BROAD
SCENE
CONTEXT
AN
ABLATION
STUDY
ON
THE
MODEL
REVEALED
THAT
HAVING
A
MINIMUM
DEPTH
TO
THE
NETWORK
RATHER
THAN
ANY
INDIVIDUAL
SECTION
IS
VITAL
TO
THE
MODEL
PERFORMANCE
FINALLY
WE
SHOWED
HOW
THE
IMAGENET
TRAINED
MODEL
CAN
GENERALIZE
WELL
TO
OTHER
DATASETS
FOR
CALTECH
AND
CALTECH
THE
DATASETS
ARE
SIMILAR
ENOUGH
THAT
WE
CAN
BEAT
THE
BEST
REPORTED
RESULTS
IN
THE
LATTER
CASE
BY
A
SIGNIFICANT
MARGIN
OUR
CONVNET
MODEL
GENERALIZED
LESS
WELL
TO
THE
PASCAL
DATA
PERHAPS
M
D
ZEILER
AND
R
FERGUS
SUFFERING
FROM
DATASET
BIAS
ALTHOUGH
IT
WAS
STILL
WITHIN
OF
THE
BEST
REPORTED
RESULT
DESPITE
NO
TUNING
FOR
THE
TASK
FOR
EXAMPLE
OUR
PERFORMANCE
MIGHT
IMPROVE
IF
A
DIFFERENT
LOSS
FUNCTION
WAS
USED
THAT
PERMITTED
MULTIPLE
OB
JECTS
PER
IMAGE
THIS
WOULD
NATURALLY
ENABLE
THE
NETWORKS
TO
TACKLE
THE
OBJECT
DETECTION
AS
WELL
CATALOGUE
DESCRIPTION
ADVANCED
TOPICS
IN
COMPUTER
GRAPHICS
CONCENTRATING
ON
IMAGE
FORMATION
AND
MODELLING
ISSUES
THE
IMPLI
CATIONS
OF
THE
DATA
DRIVEN
APPROACH
TO
COMPUTER
GRAPHICS
SIMULATION
AND
NON
PARAMETRIC
METHODS
CONTRASTED
THE
COURSE
WILL
INVOLVE
A
PROJECT
INVESTIGATING
AND
IMPLEMENTING
SOME
CURRENT
ALGORITHMS
FROM
THE
LITERATURE
LEARNING
OBJECTIVES
CMPT
EXPOSES
STUDENTS
TO
A
COMPREHENSIVE
INTRODUCTION
TO
THE
FUNDAMENTALS
OF
COMPUTER
GRAPHICS
PRO
GRAMMING
THE
LEARNING
OUTCOMES
FOR
THIS
COURSE
INCLUDE
DESCRIBE
THE
BASIC
GRAPHICS
PIPELINE
AND
HOW
FORWARD
AND
BACKWARD
RENDERING
FACTOR
IN
THIS
CREATE
A
PROGRAM
TO
DISPLAY
MODELS
OF
SIMPLE
GRAPHICS
IMAGES
DERIVE
LINEAR
PERSPECTIVE
FROM
SIMILAR
TRIANGLES
BY
CONVERTING
POINTS
X
Y
Z
TO
POINTS
X
Z
Y
Z
OBTAIN
DIMENSIONAL
AND
DIMENSIONAL
POINTS
BY
APPLYING
AFFINE
TRANSFORMATIONS
APPLY
DIMENSIONAL
COORDINATE
SYSTEM
AND
THE
CHANGES
REQUIRED
TO
EXTEND
DIMENSIONAL
TRANSFORMATION
OPERATIONS
TO
HANDLE
TRANSFORMATIONS
IN
EXPLAIN
THE
CONCEPT
AND
APPLICATIONS
OF
TEXTURE
MAPPING
SAMPLING
AND
ANTI
ALIASING
IMPLEMENT
SIMPLE
PROCEDURES
THAT
PERFORM
TRANSFORMATION
AND
CLIPPING
OPERATIONS
ON
SIMPLE
IMAGES
IMPLEMENT
A
SIMPLE
REAL
TIME
RENDERER
USING
THE
OPENGL
API
WITH
VERTEX
BUFFERS
AND
SHADERS
COMPARE
AND
CONTRAST
THE
DIFFERENT
RENDERING
TECHNIQUES
REPRESENT
CURVES
AND
SURFACES
USING
BOTH
IMPLICIT
AND
PARAMETRIC
FORMS
CREATE
SIMPLE
POLYHEDRAL
MODELS
BY
SURFACE
TESSELLATION
AND
USING
MODELING
TOOLS
E
G
BLENDER
DESCRIBE
THE
TRADEOFFS
IN
DIFFERENT
REPRESENTATIONS
OF
ROTATIONS
IMPLEMENT
THE
SPLINE
INTERPOLATION
METHOD
FOR
PRODUCING
IN
BETWEEN
POSITIONS
AND
ORIENTATIONS
IMPLEMENT
BASIC
PHYSICS
BASED
ANIMATION
ALGORITHMS
FOR
PARTICLE
DYNAMICS
USING
SIMPLE
NEWTONIAN
ME
CHANICS
WITH
EULER
METHODS
STUDENT
EVALUATION
GRADING
SCHEME
PRESENTATION
MIDTERM
EXAM
FEB
IN
CLASS
CLASS
PROJECT
FINAL
EXAM
TOTAL
PROJECT
THE
PROJECT
WILL
INVOLVE
GRAPHICS
PROGRAMMING
MODELING
AND
ANIMATION
IN
MODERN
OPENGL
FINAL
PROJECT
VIDEOS
WILL
BE
PRESENTED
IN
CLASS
ON
TUESDAY
APRIL
ATTENDANCE
IS
MANDATORY
THE
TENTATIVE
PROJECT
SCHEDULE
IS
AS
FOLLOWS
PART
DUE
JAN
BASIC
OPENGL
APPLICATION
PART
DUE
FEB
CAMERA
CONTROLS
PART
DUE
FEB
SHADING
PART
DUE
MARCH
TEXTURE
MAPPING
PART
DUE
MARCH
CREATING
A
MODEL
OF
A
CAMPUS
OR
CITY
BUILDING
PART
DUE
APRIL
CREATING
A
ANIMATION
OF
CITYSCAPE
PRESENTATION
STUDENTS
WILL
DELIVER
IN
CLASS
PRESENTATIONS
THAT
DESCRIBE
AND
DEMONSTRATE
A
USEFUL
COMPUTER
GRAPHICS
TOOL
OR
SOFTWARE
PACKAGE
STUDENT
PRESENTATIONS
WILL
BE
DONE
IN
GROUPS
OF
AND
WILL
TAKE
PLACE
DURING
A
COUPLE
OF
THE
THURSDAY
LECTURE
SLOTS
THROUGHOUT
THE
TERM
ATTENDANCE
IS
MANDATORY
AND
STUDENTS
WILL
BE
MARKED
ON
THEIR
PARTICIPATION
IN
DISCUSSIONS
PRESENTATIONS
WILL
BE
PREPARED
IN
GROUPS
OF
TWO
EACH
GROUP
WILL
PRESENT
FOR
MINUTES
SHOW
LIVE
DEMO
FOR
MINUTES
AND
HAVE
A
MINUTE
Q
A
DISCUSSION
QUESTIONS
FROM
THE
CLASS
PRESENTATION
GROUPS
AND
TOPICS
WILL
BE
SET
IN
THE
FIRST
WEEK
OF
THE
COURSE
CRITERIA
THAT
MUST
BE
MET
TO
PASS
STUDENTS
MUST
ACHIEVE
AN
TOTAL
MARK
OF
OR
GREATER
TO
PASS
THE
COURSE
ATTENDANCE
EXPECTATION
REGULAR
ATTENDANCE
IS
EXPECTED
ATTENDANCE
IS
MANDATORY
FOR
ALL
STUDENT
PRESENTATIONS
FINAL
EXAM
SCHEDULING
THE
REGISTRAR
SCHEDULES
ALL
FINAL
EXAMINATIONS
INCLUDING
DEFERRED
AND
SUPPLEMENTAL
EXAMS
STUDENTS
ARE
ADVISED
NOT
TO
MAKE
TRAVEL
ARRANGEMENTS
FOR
THE
EXAM
PERIOD
UNTIL
THE
OFFICIAL
EXAM
SCHEDULE
HAS
BEEN
POSTED
NOTE
ALL
STUDENTS
MUST
BE
PROPERLY
REGISTERED
IN
ORDER
TO
ATTEND
LECTURES
AND
RECEIVE
CREDIT
FOR
THIS
COURSE
TEXTBOOK
INFORMATION
REQUIRED
TEXT
INTERACTIVE
COMPUTER
GRAPHICS
EDITION
BY
EDWARD
ANGEL
PEARSON
RECOMMENDED
TEXTS
OPENGL
PROGRAMMING
GUIDE
EDITION
BY
DAVE
SHREINER
ET
AL
ADDISON
WESLEY
LECTURE
SCHEDULE
TOPIC
SUBTOPICS
COMPUTER
GRAPHICS
OVERVIEW
IMAGES
MODELS
PIPELINE
ARCHITECTURE
C
PROGRAMMING
REVIEW
C
VS
C
BUILD
PROCESSES
CONVENTIONS
MODERN
OPENGL
PROGRAMMING
OPENGL
PIPELINE
LIBRARIES
CONVENTIONS
BASIC
SHADERS
LINEAR
ALGEBRA
VECTORS
MATRICES
COORDINATE
SYSTEMS
GEOMETRY
CURVES
SURFACES
IMPLICIT
VS
PARAMETRIC
FORMS
POLYGONS
TRANSFORMATIONS
POINTS
VS
VECTORS
HOMOGENEOUS
TRANSFORMATIONS
VIEWING
PROJECTIONS
OPENGL
CAMERA
CONTROL
SHADING
LIGHTING
MODELS
SURFACE
NORMALS
PHONG
SHADING
TEXTURE
MAPPING
MAPPING
METHODS
TEXTURE
COORDINATES
BUFFERS
AND
BLENDING
TRANSLUCENCY
COMPOSITING
IMAGES
ANTI
ALIASING
CLIPPING
COHEN
SUTHERLAND
BOUNDING
BOXES
HIDDEN
SURFACE
REMOVAL
RASTERIZATION
LINE
DRAWING
POLYGON
FILL
LINE
SCANNING
ENVIRONMENT
MAPS
REFLECTION
MODELS
SPHERE
MAP
CUBE
MAP
SHADOW
MAPS
PROJECTIVE
SHADOWS
DEPTH
MAPS
SHADOW
TEST
PARAMETRIC
ANIMATION
CAMERA
MOTION
SPLINES
QUATERNIONS
PHYSICS
BASED
ANIMATION
DYNAMICS
PARTICLES
RIGID
BODIES
FLUID
SIMULATION
DISPLAYS
VISUAL
CUES
STEREOSCOPIC
DISPLAYS
HEAD
COUPLED
RENDERING
POLICIES
LATE
ASSIGNMENTS
ASSIGNMENT
ARE
DUE
ON
MONDAYS
AT
LATE
ASSIGNMENTS
MAY
BE
SUBMITTED
BY
THE
FOLLOWING
THURSDAY
BEFORE
BUT
WILL
BE
DEDUCTED
ASSIGNMENTS
SUBMITTED
LATER
THAN
THIS
WILL
RECEIVE
A
MARK
OF
ZERO
MISSED
ASSIGNMENTS
MISSED
ASSIGNMENTS
SUBMITTED
LATER
THAN
THURSDAY
AT
FOLLOWING
THE
ASSIGNMENT
DEADLINE
WILL
BE
GIVEN
A
GRADE
OF
ZERO
MISSED
EXAMINATIONS
STUDENTS
WHO
HAVE
MISSED
AN
EXAM
OR
ASSIGNMENT
MUST
CONTACT
THEIR
INSTRUCTOR
AS
SOON
AS
POSSIBLE
A
DOCTOR
NOTE
IS
REQUIRED
FOR
MISSES
DUE
TO
ILLNESS
ARRANGEMENTS
TO
MAKE
UP
THE
EXAM
MAY
BE
ARRANGED
WITH
THE
INSTRUCTOR
MISSED
EXAMS
THROUGHOUT
THE
YEAR
ARE
LEFT
UP
TO
THE
DISCRETION
OF
THE
INSTRUCTOR
IF
A
STUDENT
MAY
MAKE
UP
THE
EXAM
OR
WRITE
AT
A
DIFFERENT
TIME
IF
A
STUDENT
KNOWS
PRIOR
TO
THE
EXAM
THAT
SHE
HE
WILL
NOT
BE
ABLE
TO
ATTEND
THEY
SHOULD
LET
THE
INSTRUCTOR
KNOW
BEFORE
THE
EXAM
FINAL
EXAMS
A
STUDENT
WHO
IS
ABSENT
FROM
A
FINAL
EXAMINATION
THROUGH
NO
FAULT
OF
HIS
OR
HER
OWN
FOR
MEDICAL
OR
OTHER
VALID
REASONS
MAY
APPLY
TO
THE
COLLEGE
OF
ARTS
AND
SCIENCE
DEAN
OFFICE
THE
APPLI
CATION
MUST
BE
MADE
WITHIN
THREE
DAYS
OF
THE
MISSED
EXAMINATION
ALONG
WITH
SUPPORTING
DOCUMENTARY
EVIDENCE
DEFERRED
EXAMS
ARE
WRITTEN
DURING
THE
FEBRUARY
MID
TERM
BREAK
FOR
TERM
COURSES
AND
IN
EARLY
JUNE
FOR
TERM
AND
FULL
YEAR
COURSES
INCOMPLETE
COURSE
WORK
AND
FINAL
GRADES
WHEN
A
STUDENT
HAS
NOT
COMPLETED
THE
REQUIRED
COURSE
WORK
WHICH
INCLUDES
ANY
ASSIGNMENT
OR
EXAMINATION
INCLUDING
THE
FINAL
EXAMINATION
BY
THE
TIME
OF
SUBMISSION
OF
THE
FINAL
GRADES
THEY
MAY
BE
GRANTED
AN
EXTENSION
TO
PERMIT
COMPLETION
OF
AN
ASSIGNMENT
OR
GRANTED
A
DEFERRED
EXAMINATION
IN
THE
CASE
OF
ABSENCE
FROM
A
FINAL
EXAMINATION
EXTENSIONS
FOR
THE
COMPLETION
OF
ASSIGNMENTS
MUST
BE
APPROVED
BY
THE
DEPARTMENT
HEAD
OR
DEAN
IN
NON
DEPARTMENTALIZED
COLLEGES
AND
MAY
EXCEED
THIRTY
DAYS
ONLY
IN
UNUSUAL
CIRCUMSTANCES
THE
STUDENT
MUST
APPLY
TO
THE
INSTRUCTOR
FOR
SUCH
AN
EXTENSION
AND
FURNISH
SATISFACTORY
REASONS
FOR
THE
DEFICIENCY
DEFERRED
FINAL
EXAMINATIONS
ARE
GRANTED
AS
PER
COLLEGE
POLICY
IN
THE
INTERIM
THE
INSTRUCTOR
WILL
SUBMIT
A
COMPUTED
PERCENTILE
GRADE
FOR
THE
COURSE
WHICH
FACTORS
IN
THE
INCOMPLETE
COURSE
WORK
AS
A
ZERO
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
A
FAILING
GRADE
IN
THE
CASE
WHERE
THE
INSTRUCTOR
HAS
INDICATED
IN
THE
COURSE
OUTLINE
THAT
FAILURE
TO
COMPLETE
THE
REQUIRED
COURSE
WORK
WILL
RESULT
IN
FAILURE
IN
THE
COURSE
AND
THE
STUDENT
HAS
A
COMPUTED
PASSING
PERCENTILE
GRADE
A
FINAL
GRADE
OF
WILL
BE
SUBMITTED
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
AN
EXTENSION
IS
GRANTED
AND
THE
REQUIRED
ASSIGNMENT
IS
SUBMITTED
WITHIN
THE
ALLOTTED
TIME
OR
IF
A
DEFERRED
EXAMINATION
IS
GRANTED
AND
WRITTEN
IN
THE
CASE
OF
ABSENCE
FROM
THE
FINAL
EXAMINATION
THE
INSTRUCTOR
WILL
SUBMIT
A
REVISED
COMPUTED
FINAL
PERCENTAGE
GRADE
THE
GRADE
CHANGE
WILL
REPLACE
THE
PREVIOUS
GRADE
AND
ANY
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
WILL
BE
REMOVED
FOR
PROVISIONS
GOVERNING
EXAMINATIONS
AND
GRADING
STUDENTS
ARE
REFERRED
TO
THE
UNIVERSITY
COUNCIL
REGULATIONS
ON
EXAMINATIONS
SUBSECTION
OF
THE
CALENDAR
UNIVERSITY
OF
SASKATCHEWAN
CALENDAR
ACADEMIC
COURSES
POLICY
ACADEMIC
HONESTY
THE
UNIVERSITY
OF
SASKATCHEWAN
IS
COMMITTED
TO
THE
HIGHEST
STANDARDS
OF
ACADEMIC
INTEGRITY
AND
HONESTY
STUDENTS
ARE
EXPECTED
TO
BE
FAMILIAR
WITH
THESE
STANDARDS
REGARDING
ACADEMIC
HONESTY
AND
TO
UPHOLD
THE
POLICIES
OF
THE
UNIVERSITY
IN
THIS
RESPECT
STUDENTS
ARE
PARTICULARLY
URGED
TO
FAMILIARIZE
THEMSELVES
WITH
THE
PROVISIONS
OF
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AND
AVOID
ANY
BEHAVIOUR
THAT
COULD
POTENTIALLY
RESULT
IN
SUSPICIONS
OF
CHEATING
PLAGIARISM
MISREPRESENTATION
OF
FACTS
AND
OR
PARTICIPATION
IN
AN
OFFENSE
ACADEMIC
DISHONESTY
IS
A
SERIOUS
OFFENSE
AND
CAN
RESULT
IN
SUSPENSION
OR
EXPULSION
FROM
THE
UNIVERSITY
ALL
STUDENTS
SHOULD
READ
AND
BE
FAMILIAR
WITH
THE
REGULATIONS
ON
ACADEMIC
STUDENT
MISCONDUCT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTACADEMICMISCONDUCT
PDF
AS
WELL
AS
THE
STANDARD
OF
STUDENT
CONDUCT
IN
NON
ACADEMIC
MATTERS
AND
PROCEDURES
FOR
RESOLUTION
OF
COM
PLAINTS
AND
APPEALS
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTNON
ACADEMICMISCONDUCT
PDF
ACADEMIC
HONESTY
IS
ALSO
DEFINED
AND
DESCRIBED
IN
THE
DEPARTMENT
OF
COMPUTER
SCIENCE
STATEMENT
ON
ACADEMIC
HONESTY
HTTP
WWW
CS
USASK
CA
UNDERGRAD
HONESTY
PHP
FOR
MORE
INFORMATION
ON
WHAT
ACADEMIC
INTEGRITY
MEANS
FOR
STUDENTS
SEE
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
FORMS
INTEGRITYDEFINED
PDF
EXAMINATIONS
WITH
DISABILITY
SERVICES
FOR
STUDENTS
DSS
STUDENTS
WHO
HAVE
DISABILITIES
LEARNING
MEDICAL
PHYSICAL
OR
MENTAL
HEALTH
ARE
STRONGLY
ENCOURAGED
TO
REGIS
TER
WITH
DISABILITY
SERVICES
FOR
STUDENTS
DSS
IF
THEY
HAVE
NOT
ALREADY
DONE
SO
STUDENTS
WHO
SUSPECT
THEY
MAY
HAVE
DISABILITIES
SHOULD
CONTACT
DSS
FOR
ADVICE
AND
REFERRALS
IN
ORDER
TO
ACCESS
DSS
PROGRAMS
AND
SUPPORTS
STUDENTS
MUST
FOLLOW
DSS
POLICY
AND
PROCEDURES
FOR
MORE
INFORMATION
CHECK
HTTP
WWW
STUDENTS
USASK
CA
DISABILITY
OR
CONTACT
DSS
AT
OR
DSS
USASK
CA
STUDENTS
REGISTERED
WITH
DSS
MAY
REQUEST
ALTERNATIVE
ARRANGEMENTS
FOR
MID
TERM
AND
FINAL
EXAMINATIONS
STUDENTS
MUST
ARRANGE
SUCH
ACCOMMODATIONS
THROUGH
DSS
BY
THE
STATED
DEADLINES
INSTRUCTORS
SHALL
PROVIDE
THE
EXAMINATIONS
FOR
STUDENTS
WHO
ARE
BEING
ACCOMMODATED
BY
THE
DEADLINES
ESTABLISHED
BY
DSS
CATALOGUE
DESCRIPTION
AN
INTRODUCTION
TO
COMPUTER
GRAPHICS
THAT
INCLUDES
REAL
TIME
AND
OFF
LINE
REALISTIC
IMAGE
SYNTHESIS
TECH
NIQUES
AND
BASIC
ANIMATION
TECHNIQUES
SUCH
AS
KEY
FRAMING
AND
PHYSICS
BASED
METHODS
PROGRAMMABLE
RATER
GRAPHICS
RAY
TRACING
AND
EFFICIENT
DATA
STRUCTURES
FOR
BOTH
ARE
ALSO
INTRODUCED
LEARNING
OBJECTIVES
CMPT
EXPOSES
STUDENTS
TO
A
COMPREHENSIVE
INTRODUCTION
TO
THE
FUNDAMENTALS
OF
COMPUTER
GRAPHICS
PRO
GRAMMING
THE
LEARNING
OUTCOMES
FOR
THIS
COURSE
INCLUDE
DESCRIBE
THE
BASIC
GRAPHICS
PIPELINE
AND
HOW
FORWARD
AND
BACKWARD
RENDERING
FACTOR
IN
THIS
CREATE
A
PROGRAM
TO
DISPLAY
MODELS
OF
SIMPLE
GRAPHICS
IMAGES
DERIVE
LINEAR
PERSPECTIVE
FROM
SIMILAR
TRIANGLES
BY
CONVERTING
POINTS
X
Y
Z
TO
POINTS
X
Z
Y
Z
OBTAIN
DIMENSIONAL
AND
DIMENSIONAL
POINTS
BY
APPLYING
AFFINE
TRANSFORMATIONS
APPLY
DIMENSIONAL
COORDINATE
SYSTEM
AND
THE
CHANGES
REQUIRED
TO
EXTEND
DIMENSIONAL
TRANSFORMATION
OPERATIONS
TO
HANDLE
TRANSFORMATIONS
IN
EXPLAIN
THE
CONCEPT
AND
APPLICATIONS
OF
TEXTURE
MAPPING
SAMPLING
AND
ANTI
ALIASING
IMPLEMENT
SIMPLE
PROCEDURES
THAT
PERFORM
TRANSFORMATION
AND
CLIPPING
OPERATIONS
ON
SIMPLE
IMAGES
IMPLEMENT
A
SIMPLE
REAL
TIME
RENDERER
USING
THE
OPENGL
API
WITH
VERTEX
BUFFERS
AND
SHADERS
COMPARE
AND
CONTRAST
THE
DIFFERENT
RENDERING
TECHNIQUES
REPRESENT
CURVES
AND
SURFACES
USING
BOTH
IMPLICIT
AND
PARAMETRIC
FORMS
CREATE
SIMPLE
POLYHEDRAL
MODELS
BY
SURFACE
TESSELLATION
AND
USING
MODELING
TOOLS
E
G
BLENDER
DESCRIBE
THE
TRADEOFFS
IN
DIFFERENT
REPRESENTATIONS
OF
ROTATIONS
IMPLEMENT
THE
SPLINE
INTERPOLATION
METHOD
FOR
PRODUCING
IN
BETWEEN
POSITIONS
AND
ORIENTATIONS
IMPLEMENT
BASIC
PHYSICS
BASED
ANIMATION
ALGORITHMS
FOR
PARTICLE
DYNAMICS
USING
SIMPLE
NEWTONIAN
ME
CHANICS
WITH
EULER
METHODS
STUDENT
EVALUATION
GRADING
SCHEME
ASSIGNMENTS
MIDTERM
EXAM
FEB
IN
CLASS
FINAL
EXAM
CLASS
PROJECT
TOTAL
ASSIGNMENTS
THE
ASSIGNMENTS
WILL
INVOLVE
GRAPHICS
PROGRAMMING
AND
MODELING
IF
AN
UNDERGRADUATE
COURSE
IN
COM
PUTER
GRAPHICS
HAS
ALREADY
BEEN
TAKEN
THESE
ASSIGNMENTS
CAN
BE
OMITTED
BY
PERMISSION
OF
THE
INSTRUCTOR
IF
OMITTED
THE
OF
THE
FINAL
GRADE
WILL
BE
RE
DISTRIBUTED
TO
THE
MIDTERM
AND
FINAL
EXAMS
PART
DUE
JAN
BASIC
OPENGL
APPLICATION
PART
DUE
FEB
CAMERA
CONTROLS
PART
DUE
FEB
SHADING
PART
DUE
MARCH
TEXTURE
MAPPING
PROJECT
THE
PROJECT
WILL
ASSIGNED
ON
AN
INDIVIDUAL
BASIS
CRITERIA
THAT
MUST
BE
MET
TO
PASS
STUDENTS
MUST
ACHIEVE
AN
TOTAL
MARK
OF
OR
GREATER
TO
PASS
THE
COURSE
ATTENDANCE
EXPECTATION
REGULAR
ATTENDANCE
IS
EXPECTED
ATTENDANCE
IS
MANDATORY
FOR
ALL
STUDENT
PRESENTATIONS
FINAL
EXAM
SCHEDULING
THE
REGISTRAR
SCHEDULES
ALL
FINAL
EXAMINATIONS
INCLUDING
DEFERRED
AND
SUPPLEMENTAL
EXAMS
STUDENTS
ARE
ADVISED
NOT
TO
MAKE
TRAVEL
ARRANGEMENTS
FOR
THE
EXAM
PERIOD
UNTIL
THE
OFFICIAL
EXAM
SCHEDULE
HAS
BEEN
POSTED
NOTE
ALL
STUDENTS
MUST
BE
PROPERLY
REGISTERED
IN
ORDER
TO
ATTEND
LECTURES
AND
RECEIVE
CREDIT
FOR
THIS
COURSE
TEXTBOOK
INFORMATION
REQUIRED
TEXT
INTERACTIVE
COMPUTER
GRAPHICS
EDITION
BY
EDWARD
ANGEL
PEARSON
RECOMMENDED
TEXTS
OPENGL
PROGRAMMING
GUIDE
EDITION
BY
DAVE
SHREINER
ET
AL
ADDISON
WESLEY
LECTURE
SCHEDULE
TOPIC
SUBTOPICS
COMPUTER
GRAPHICS
OVERVIEW
IMAGES
MODELS
PIPELINE
ARCHITECTURE
C
PROGRAMMING
REVIEW
C
VS
C
BUILD
PROCESSES
CONVENTIONS
MODERN
OPENGL
PROGRAMMING
OPENGL
PIPELINE
LIBRARIES
CONVENTIONS
BASIC
SHADERS
LINEAR
ALGEBRA
VECTORS
MATRICES
COORDINATE
SYSTEMS
GEOMETRY
CURVES
SURFACES
IMPLICIT
VS
PARAMETRIC
FORMS
POLYGONS
TRANSFORMATIONS
POINTS
VS
VECTORS
HOMOGENEOUS
TRANSFORMATIONS
VIEWING
PROJECTIONS
OPENGL
CAMERA
CONTROL
SHADING
LIGHTING
MODELS
SURFACE
NORMALS
PHONG
SHADING
TEXTURE
MAPPING
MAPPING
METHODS
TEXTURE
COORDINATES
BUFFERS
AND
BLENDING
TRANSLUCENCY
COMPOSITING
IMAGES
ANTI
ALIASING
CLIPPING
COHEN
SUTHERLAND
BOUNDING
BOXES
HIDDEN
SURFACE
REMOVAL
RASTERIZATION
LINE
DRAWING
POLYGON
FILL
LINE
SCANNING
ENVIRONMENT
MAPS
REFLECTION
MODELS
SPHERE
MAP
CUBE
MAP
SHADOW
MAPS
PROJECTIVE
SHADOWS
DEPTH
MAPS
SHADOW
TEST
PARAMETRIC
ANIMATION
CAMERA
MOTION
SPLINES
QUATERNIONS
PHYSICS
BASED
ANIMATION
DYNAMICS
PARTICLES
RIGID
BODIES
FLUID
SIMULATION
DISPLAYS
VISUAL
CUES
STEREOSCOPIC
DISPLAYS
HEAD
COUPLED
RENDERING
POLICIES
LATE
ASSIGNMENTS
ASSIGNMENT
ARE
DUE
ON
MONDAYS
AT
LATE
ASSIGNMENTS
MAY
BE
SUBMITTED
BY
THE
FOLLOWING
THURSDAY
BEFORE
BUT
WILL
BE
DEDUCTED
ASSIGNMENTS
SUBMITTED
LATER
THAN
THIS
WILL
RECEIVE
A
MARK
OF
ZERO
MISSED
ASSIGNMENTS
MISSED
ASSIGNMENTS
SUBMITTED
LATER
THAN
THURSDAY
AT
FOLLOWING
THE
ASSIGNMENT
DEADLINE
WILL
BE
GIVEN
A
GRADE
OF
ZERO
MISSED
EXAMINATIONS
STUDENTS
WHO
HAVE
MISSED
AN
EXAM
OR
ASSIGNMENT
MUST
CONTACT
THEIR
INSTRUCTOR
AS
SOON
AS
POSSIBLE
A
DOCTOR
NOTE
IS
REQUIRED
FOR
MISSES
DUE
TO
ILLNESS
ARRANGEMENTS
TO
MAKE
UP
THE
EXAM
MAY
BE
ARRANGED
WITH
THE
INSTRUCTOR
MISSED
EXAMS
THROUGHOUT
THE
YEAR
ARE
LEFT
UP
TO
THE
DISCRETION
OF
THE
INSTRUCTOR
IF
A
STUDENT
MAY
MAKE
UP
THE
EXAM
OR
WRITE
AT
A
DIFFERENT
TIME
IF
A
STUDENT
KNOWS
PRIOR
TO
THE
EXAM
THAT
SHE
HE
WILL
NOT
BE
ABLE
TO
ATTEND
THEY
SHOULD
LET
THE
INSTRUCTOR
KNOW
BEFORE
THE
EXAM
FINAL
EXAMS
A
STUDENT
WHO
IS
ABSENT
FROM
A
FINAL
EXAMINATION
THROUGH
NO
FAULT
OF
HIS
OR
HER
OWN
FOR
MEDICAL
OR
OTHER
VALID
REASONS
MAY
APPLY
TO
THE
COLLEGE
OF
ARTS
AND
SCIENCE
DEAN
OFFICE
THE
APPLI
CATION
MUST
BE
MADE
WITHIN
THREE
DAYS
OF
THE
MISSED
EXAMINATION
ALONG
WITH
SUPPORTING
DOCUMENTARY
EVIDENCE
DEFERRED
EXAMS
ARE
WRITTEN
DURING
THE
FEBRUARY
MID
TERM
BREAK
FOR
TERM
COURSES
AND
IN
EARLY
JUNE
FOR
TERM
AND
FULL
YEAR
COURSES
INCOMPLETE
COURSE
WORK
AND
FINAL
GRADES
WHEN
A
STUDENT
HAS
NOT
COMPLETED
THE
REQUIRED
COURSE
WORK
WHICH
INCLUDES
ANY
ASSIGNMENT
OR
EXAMINATION
INCLUDING
THE
FINAL
EXAMINATION
BY
THE
TIME
OF
SUBMISSION
OF
THE
FINAL
GRADES
THEY
MAY
BE
GRANTED
AN
EXTENSION
TO
PERMIT
COMPLETION
OF
AN
ASSIGNMENT
OR
GRANTED
A
DEFERRED
EXAMINATION
IN
THE
CASE
OF
ABSENCE
FROM
A
FINAL
EXAMINATION
EXTENSIONS
FOR
THE
COMPLETION
OF
ASSIGNMENTS
MUST
BE
APPROVED
BY
THE
DEPARTMENT
HEAD
OR
DEAN
IN
NON
DEPARTMENTALIZED
COLLEGES
AND
MAY
EXCEED
THIRTY
DAYS
ONLY
IN
UNUSUAL
CIRCUMSTANCES
THE
STUDENT
MUST
APPLY
TO
THE
INSTRUCTOR
FOR
SUCH
AN
EXTENSION
AND
FURNISH
SATISFACTORY
REASONS
FOR
THE
DEFICIENCY
DEFERRED
FINAL
EXAMINATIONS
ARE
GRANTED
AS
PER
COLLEGE
POLICY
IN
THE
INTERIM
THE
INSTRUCTOR
WILL
SUBMIT
A
COMPUTED
PERCENTILE
GRADE
FOR
THE
COURSE
WHICH
FACTORS
IN
THE
INCOMPLETE
COURSE
WORK
AS
A
ZERO
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
A
FAILING
GRADE
IN
THE
CASE
WHERE
THE
INSTRUCTOR
HAS
INDICATED
IN
THE
COURSE
OUTLINE
THAT
FAILURE
TO
COMPLETE
THE
REQUIRED
COURSE
WORK
WILL
RESULT
IN
FAILURE
IN
THE
COURSE
AND
THE
STUDENT
HAS
A
COMPUTED
PASSING
PERCENTILE
GRADE
A
FINAL
GRADE
OF
WILL
BE
SUBMITTED
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
AN
EXTENSION
IS
GRANTED
AND
THE
REQUIRED
ASSIGNMENT
IS
SUBMITTED
WITHIN
THE
ALLOTTED
TIME
OR
IF
A
DEFERRED
EXAMINATION
IS
GRANTED
AND
WRITTEN
IN
THE
CASE
OF
ABSENCE
FROM
THE
FINAL
EXAMINATION
THE
INSTRUCTOR
WILL
SUBMIT
A
REVISED
COMPUTED
FINAL
PERCENTAGE
GRADE
THE
GRADE
CHANGE
WILL
REPLACE
THE
PREVIOUS
GRADE
AND
ANY
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
WILL
BE
REMOVED
FOR
PROVISIONS
GOVERNING
EXAMINATIONS
AND
GRADING
STUDENTS
ARE
REFERRED
TO
THE
UNIVERSITY
COUNCIL
REGULATIONS
ON
EXAMINATIONS
SUBSECTION
OF
THE
CALENDAR
UNIVERSITY
OF
SASKATCHEWAN
CALENDAR
ACADEMIC
COURSES
POLICY
ACADEMIC
HONESTY
THE
UNIVERSITY
OF
SASKATCHEWAN
IS
COMMITTED
TO
THE
HIGHEST
STANDARDS
OF
ACADEMIC
INTEGRITY
AND
HONESTY
STUDENTS
ARE
EXPECTED
TO
BE
FAMILIAR
WITH
THESE
STANDARDS
REGARDING
ACADEMIC
HONESTY
AND
TO
UPHOLD
THE
POLICIES
OF
THE
UNIVERSITY
IN
THIS
RESPECT
STUDENTS
ARE
PARTICULARLY
URGED
TO
FAMILIARIZE
THEMSELVES
WITH
THE
PROVISIONS
OF
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AND
AVOID
ANY
BEHAVIOUR
THAT
COULD
POTENTIALLY
RESULT
IN
SUSPICIONS
OF
CHEATING
PLAGIARISM
MISREPRESENTATION
OF
FACTS
AND
OR
PARTICIPATION
IN
AN
OFFENSE
ACADEMIC
DISHONESTY
IS
A
SERIOUS
OFFENSE
AND
CAN
RESULT
IN
SUSPENSION
OR
EXPULSION
FROM
THE
UNIVERSITY
ALL
STUDENTS
SHOULD
READ
AND
BE
FAMILIAR
WITH
THE
REGULATIONS
ON
ACADEMIC
STUDENT
MISCONDUCT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTACADEMICMISCONDUCT
PDF
AS
WELL
AS
THE
STANDARD
OF
STUDENT
CONDUCT
IN
NON
ACADEMIC
MATTERS
AND
PROCEDURES
FOR
RESOLUTION
OF
COM
PLAINTS
AND
APPEALS
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTNON
ACADEMICMISCONDUCT
PDF
ACADEMIC
HONESTY
IS
ALSO
DEFINED
AND
DESCRIBED
IN
THE
DEPARTMENT
OF
COMPUTER
SCIENCE
STATEMENT
ON
ACADEMIC
HONESTY
HTTP
WWW
CS
USASK
CA
UNDERGRAD
HONESTY
PHP
FOR
MORE
INFORMATION
ON
WHAT
ACADEMIC
INTEGRITY
MEANS
FOR
STUDENTS
SEE
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
FORMS
INTEGRITYDEFINED
PDF
EXAMINATIONS
WITH
DISABILITY
SERVICES
FOR
STUDENTS
DSS
STUDENTS
WHO
HAVE
DISABILITIES
LEARNING
MEDICAL
PHYSICAL
OR
MENTAL
HEALTH
ARE
STRONGLY
ENCOURAGED
TO
REGIS
TER
WITH
DISABILITY
SERVICES
FOR
STUDENTS
DSS
IF
THEY
HAVE
NOT
ALREADY
DONE
SO
STUDENTS
WHO
SUSPECT
THEY
MAY
HAVE
DISABILITIES
SHOULD
CONTACT
DSS
FOR
ADVICE
AND
REFERRALS
IN
ORDER
TO
ACCESS
DSS
PROGRAMS
AND
SUPPORTS
STUDENTS
MUST
FOLLOW
DSS
POLICY
AND
PROCEDURES
FOR
MORE
INFORMATION
CHECK
HTTP
WWW
STUDENTS
USASK
CA
DISABILITY
OR
CONTACT
DSS
AT
OR
DSS
USASK
CA
STUDENTS
REGISTERED
WITH
DSS
MAY
REQUEST
ALTERNATIVE
ARRANGEMENTS
FOR
MID
TERM
AND
FINAL
EXAMINATIONS
STUDENTS
MUST
ARRANGE
SUCH
ACCOMMODATIONS
THROUGH
DSS
BY
THE
STATED
DEADLINES
INSTRUCTORS
SHALL
PROVIDE
THE
EXAMINATIONS
FOR
STUDENTS
WHO
ARE
BEING
ACCOMMODATED
BY
THE
DEADLINES
ESTABLISHED
BY
DSS
CATALOGUE
DESCRIPTION
AN
ADVANCED
COURSE
IN
COMPUTER
GRAPHICS
CONCENTRATING
ON
TECHNIQUES
FOR
SYNTHESIZING
IMAGES
AND
ANIMA
TIONS
PHYSICAL
SIMULATION
FOR
ANIMATION
PROCEDURAL
MODELING
AND
TEXTURE
SYNTHESIS
DATA
DRIVEN
COMPUTER
GRAPHICS
INCLUDING
MOTION
CAPTURE
IMAGE
BASED
RENDERING
AND
MODEL
ACQUISITION
FURTHER
ALTERNATIVES
TO
TRADITIONAL
IMAGE
FORMATION
METHODS
SUCH
AS
NON
PHOTOREALISTIC
RENDERING
AND
POINT
BASED
RENDERING
COURSE
OBJECTIVES
THIS
COURSE
EXPOSES
STUDENTS
TO
MODELING
AND
SIMULATION
TECHNIQUES
FOR
HUMAN
APPLICATIONS
STUDENTS
TAKING
THIS
COURSE
WILL
SURVEY
DIFFERENT
APPROACHES
TO
IMAGE
SYNTHESIS
COMPUTER
GRAPHICS
SURVEY
DIFFERENT
APPROACHES
TO
ANIMATION
SYNTHESIS
COMPUTER
ANIMATION
LEARN
THE
DETAILED
PRINCIPLES
OF
PHYSICS
BASED
SIMULATION
USE
MODELING
TOOLS
TO
CREATE
MODELS
DEVELOP
COMPUTER
PROGRAMS
WITH
EXISTING
MODELING
SIMULATION
APIS
STUDENT
EVALUATION
GRADING
SCHEME
SEMINAR
PRESENTATIONS
PROGRAMMING
ASSIGNMENT
RESEARCH
PROJECT
TOTAL
SEMINAR
PRESENTATION
STUDENTS
WILL
SELECT
A
SIGGRAPH
COURSE
ON
A
TOPIC
OF
INTEREST
IN
CONSULTATION
WITH
THE
INSTRUCTOR
AND
PRESENT
THREE
SHORT
MIN
LECTURES
BASED
ON
TOPICS
FROM
THAT
COURSE
STUDENTS
ARE
ENCOURAGED
TO
USE
THE
SLIDES
AND
OTHER
EXAMPLES
DIRECTLY
FROM
THE
COURSE
MATERIALS
BUT
SHOULD
BE
WELL
VERSED
IN
THE
MATERIAL
TO
MAKE
THE
CONCEPTS
EASY
TO
UNDERSTAND
FOR
THE
REST
OF
THE
CLASS
PRESENTATION
JAN
FIRST
TOPIC
PRESENTATION
FEB
SECOND
TOPIC
PRESENTATION
MARCH
THIRD
TOPIC
PROGRAMMING
ASSIGNMENTS
ASSIGNMENT
JAN
MODELING
IN
ARTISYNTH
ASSIGNMENT
MARCH
PROGRAMMING
ASSIGNMENT
RELATED
TO
RESEARCH
PROJECT
RESEARCH
PROJECT
DELIVERABLE
FEB
PROPOSAL
PRESENTATION
DELIVERABLE
FEB
PROPOSAL
REPORT
DELIVERABLE
FEB
TECHNICAL
REPORT
DELIVERABLE
APRIL
FINAL
PRESENTATION
DELIVERABLE
APRIL
FINAL
REPORT
ATTENDANCE
EXPECTATION
REGULAR
ATTENDANCE
IS
REQUIRED
PLEASE
INFORM
THE
INSTRUCTOR
IF
YOU
HAVE
TO
MISS
A
LECTURE
STUDENTS
WILL
ALSO
BE
ASKED
TO
ATTEND
SELECT
LECTURES
FROM
CMPT
UNLESS
PREVIOUSLY
TAKEN
READING
LIST
RELEVANT
RESEARCH
PAPERS
SELECTED
FROM
BOOKS
AND
CONFERENCE
AND
JOURNAL
PUBLICATIONS
INCLUDING
BUT
NOT
LIMITED
TO
THE
FOLLOWING
VENUES
ACM
SIGGRAPH
COURSES
ACM
SIGGRAPH
ASIA
SOFT
TISSUE
BIOMECHANICAL
MODELING
FOR
COMPUTER
ASSISTED
SURGERY
COMPUTER
METHODS
IN
BIOMECHANICS
AND
BIOMEDICAL
ENGINEERING
PAPERS
AND
EXCERPTS
WILL
BE
POSTED
TO
MOODLE
TOPICS
TOPIC
SUBTOPICS
COMPUTER
GRAPHICS
MODELING
GEOMETRY
MESHES
VERTICES
HOMOGENOUS
COORDINATES
PHYSICS
BASED
SIMULATION
SELECT
READINGS
FROM
SOFT
TISSUE
BIOMECHANICAL
MODELING
FOR
COMPUTER
ASSISTED
SURGERY
ON
RIGID
BODY
MECHANICS
FEM
AP
PROACHES
FOR
HUMAN
TISSUE
MODELING
HUMAN
SIMULATION
MODELING
BASIC
PRINCIPLES
TOOLS
ARTISYNTH
ANSYS
ZYGOTE
DATASETS
AND
MORE
MEDICAL
IMAGING
DIFFERENT
IMAGING
MODALITIES
MRI
CT
US
VF
FMRI
PET
FROM
IMAGING
TO
MODELS
IMAGE
PROCESSING
SEGMENTATION
MESHING
TOOLS
AMIRA
SLICER
TURTLESEG
APPLICATIONS
GRAPHICS
AND
ANIMATION
IN
EDUCATION
MEDICINE
ENTERTAINMENT
ERGONOMICS
SEMINARS
SELECT
TOPICS
TAKEN
FROM
ACM
SIGGRAPH
COURSES
TO
BE
DETER
MINED
POLICIES
INCOMPLETE
COURSE
WORK
AND
FINAL
GRADES
WHEN
A
STUDENT
HAS
NOT
COMPLETED
THE
REQUIRED
COURSE
WORK
WHICH
INCLUDES
ANY
ASSIGNMENT
BY
THE
TIME
OF
SUBMISSION
OF
THE
FINAL
GRADES
THEY
MAY
BE
GRANTED
AN
EXTENSION
TO
PERMIT
COMPLETION
OF
AN
ASSIGNMENT
EXTENSIONS
FOR
THE
COMPLETION
OF
ASSIGNMENTS
MUST
BE
APPROVED
BY
THE
DEPARTMENT
HEAD
OR
DEAN
IN
NON
DEPARTMENTALIZED
COLLEGES
AND
MAY
EXCEED
THIRTY
DAYS
ONLY
IN
UNUSUAL
CIRCUMSTANCES
THE
STUDENT
MUST
APPLY
TO
THE
INSTRUCTOR
FOR
SUCH
AN
EXTENSION
AND
FURNISH
SATISFACTORY
REASONS
FOR
THE
DEFICIENCY
IN
THE
INTERIM
THE
INSTRUCTOR
WILL
SUBMIT
A
COMPUTED
PERCENTILE
GRADE
FOR
THE
COURSE
WHICH
FACTORS
IN
THE
INCOMPLETE
COURSE
WORK
AS
A
ZERO
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
A
FAILING
GRADE
IN
THE
CASE
WHERE
THE
INSTRUCTOR
HAS
INDICATED
IN
THE
COURSE
OUTLINE
THAT
FAILURE
TO
COMPLETE
THE
REQUIRED
COURSE
WORK
WILL
RESULT
IN
FAILURE
IN
THE
COURSE
AND
THE
STUDENT
HAS
A
COMPUTED
PASSING
PERCENTILE
GRADE
A
FINAL
GRADE
OF
WILL
BE
SUBMITTED
ALONG
WITH
A
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
IF
AN
EXTENSION
IS
GRANTED
AND
THE
REQUIRED
ASSIGNMENT
IS
SUBMITTED
WITHIN
THE
ALLOTTED
TIME
THE
INSTRUCTOR
WILL
SUBMIT
A
REVISED
COMPUTED
FINAL
PERCENTAGE
GRADE
THE
GRADE
CHANGE
WILL
REPLACE
THE
PREVIOUS
GRADE
AND
ANY
GRADE
COMMENT
OF
INF
INCOMPLETE
FAILURE
WILL
BE
REMOVED
FOR
PROVISIONS
GOVERNING
EXAMINATIONS
AND
GRADING
STUDENTS
ARE
REFERRED
TO
THE
UNIVERSITY
COUNCIL
REGULATIONS
ON
EXAMINATIONS
SUBSECTION
OF
THE
CALENDAR
UNIVERSITY
OF
SASKATCHEWAN
CALENDAR
ACADEMIC
COURSES
POLICY
ACADEMIC
HONESTY
THE
UNIVERSITY
OF
SASKATCHEWAN
IS
COMMITTED
TO
THE
HIGHEST
STANDARDS
OF
ACADEMIC
INTEGRITY
AND
HONESTY
STUDENTS
ARE
EXPECTED
TO
BE
FAMILIAR
WITH
THESE
STANDARDS
REGARDING
ACADEMIC
HONESTY
AND
TO
UPHOLD
THE
POLICIES
OF
THE
UNIVERSITY
IN
THIS
RESPECT
STUDENTS
ARE
PARTICULARLY
URGED
TO
FAMILIARIZE
THEMSELVES
WITH
THE
PROVISIONS
OF
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AND
AVOID
ANY
BEHAVIOUR
THAT
COULD
POTENTIALLY
RESULT
IN
SUSPICIONS
OF
CHEATING
PLAGIARISM
MISREPRESENTATION
OF
FACTS
AND
OR
PARTICIPATION
IN
AN
OFFENSE
ACADEMIC
DISHONESTY
IS
A
SERIOUS
OFFENSE
AND
CAN
RESULT
IN
SUSPENSION
OR
EXPULSION
FROM
THE
UNIVERSITY
ALL
STUDENTS
SHOULD
READ
AND
BE
FAMILIAR
WITH
THE
REGULATIONS
ON
ACADEMIC
STUDENT
MISCONDUCT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTACADEMICMISCONDUCT
PDF
AS
WELL
AS
THE
STANDARD
OF
STUDENT
CONDUCT
IN
NON
ACADEMIC
MATTERS
AND
PROCEDURES
FOR
RESOLUTION
OF
COM
PLAINTS
AND
APPEALS
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
STUDENTNON
ACADEMICMISCONDUCT
PDF
ACADEMIC
HONESTY
IS
ALSO
DEFINED
AND
DESCRIBED
IN
THE
DEPARTMENT
OF
COMPUTER
SCIENCE
STATEMENT
ON
ACADEMIC
HONESTY
HTTP
WWW
CS
USASK
CA
UNDERGRAD
HONESTY
PHP
FOR
MORE
INFORMATION
ON
WHAT
ACADEMIC
INTEGRITY
MEANS
FOR
STUDENTS
SEE
THE
STUDENT
CONDUCT
APPEALS
SUBSECTION
OF
THE
UNIVERSITY
SECRETARY
WEBSITE
AT
HTTP
WWW
USASK
CA
SECRETARIAT
STUDENT
CONDUCT
APPEALS
FORMS
INTEGRITYDEFINED
PDF
E
HAVE
COMPLETED
OUR
DISCUSSION
OF
THE
FIRST
HALF
OF
THE
SYNTHETIC
CAMERA
MODEL
SPECIFYING
OBJECTS
IN
THREE
DIMENSIONS
WE
NOW
INVESTIGATE
THE
MULTI
TUDE
OF
WAYS
IN
WHICH
WE
CAN
DESCRIBE
OUR
VIRTUAL
CAMERA
ALONG
THE
WAY
WE
EXAMINE
RELATED
TOPICS
SUCH
AS
THE
RELATIONSHIP
BETWEEN
CLASSICAL
VIEWING
TECHNIQUES
AND
COM
PUTER
VIEWING
AND
HOW
PROJECTION
IS
IMPLEMENTED
USING
PROJECTIVE
TRANSFORMATIONS
THERE
ARE
THREE
PARTS
TO
OUR
APPROACH
FIRST
WE
LOOK
AT
THE
TYPES
OF
VIEWS
THAT
WE
CAN
CREATE
AND
WHY
WE
NEED
MORE
THAN
ONE
TYPE
OF
VIEW
THEN
WE
EXAMINE
HOW
AN
APPLICATION
PROGRAM
CAN
SPECIFY
A
PARTICULAR
VIEW
WITHIN
OPENGL
WE
WILL
SEE
THAT
THE
VIEWING
PROCESS
HAS
TWO
PARTS
IN
THE
FIRST
WE
USE
THE
MODEL
VIEW
MATRIX
TO
SWITCH
VERTEX
REPRESENTATIONS
FROM
THE
OBJECT
FRAME
IN
WHICH
WE
DEFINED
OUR
OBJECTS
TO
THEIR
REPRESENTATION
IN
THE
EYE
FRAME
IN
WHICH
THE
CAMERA
IS
AT
THE
ORIGIN
THIS
REPRESEN
TATION
OF
THE
GEOMETRY
WILL
ALLOW
US
TO
USE
CANONICAL
VIEWING
PROCEDURES
THE
SECOND
PART
OF
THE
PROCESS
DEALS
WITH
THE
TYPE
OF
PROJECTION
WE
PREFER
PARALLEL
OR
PERSPEC
TIVE
AND
THE
PART
OF
THE
WORLD
WE
WISH
TO
IMAGE
THE
CLIPPING
OR
VIEW
VOLUME
THESE
SPECIFICATIONS
WILL
ALLOW
US
TO
FORM
A
PROJECTION
MATRIX
THAT
IS
CONCATENATED
WITH
THE
MODEL
VIEW
MATRIX
FINALLY
WE
DERIVE
THE
PROJECTION
MATRICES
THAT
DESCRIBE
THE
MOST
IMPORTANT
PARALLEL
AND
PERSPECTIVE
VIEWS
AND
INVESTIGATE
HOW
TO
CARRY
OUT
THESE
PRO
JECTIONS
IN
OPENGL
CLASSICAL
AND
COMPUTER
VIEWING
BEFORE
LOOKING
AT
THE
INTERFACE
BETWEEN
COMPUTER
GRAPHICS
SYSTEMS
AND
APPLICATION
PROGRAMS
FOR
THREE
DIMENSIONAL
VIEWING
WE
TAKE
A
SLIGHT
DIVERSION
TO
CONSIDER
CLASSI
CAL
VIEWING
THERE
ARE
TWO
REASONS
FOR
EXAMINING
CLASSICAL
VIEWING
FIRST
MANY
OF
THE
JOBS
THAT
WERE
FORMERLY
DONE
BY
HAND
DRAWING
SUCH
AS
ANIMATION
IN
MOVIES
ARCHI
TECTURAL
RENDERING
DRAFTING
AND
MECHANICAL
PARTS
DESIGN
ARE
NOW
ROUTINELY
DONE
WITH
THE
AID
OF
COMPUTER
GRAPHICS
PRACTITIONERS
OF
THESE
FIELDS
NEED
TO
BE
ABLE
TO
PRO
DUCE
CLASSICAL
VIEWS
SUCH
AS
ISOMETRICS
ELEVATIONS
AND
VARIOUS
PERSPECTIVES
AND
THUS
MUST
BE
ABLE
TO
USE
THE
COMPUTER
SYSTEM
TO
PRODUCE
SUCH
RENDERINGS
SECOND
THE
RELATIONSHIPS
BETWEEN
CLASSICAL
AND
COMPUTER
VIEWING
SHOW
MANY
ADVANTAGES
OF
AND
A
FEW
DIFFICULTIES
WITH
THE
APPROACH
USED
BY
MOST
APIS
COP
FIGURE
VIEWING
FIGURE
MOVEMENT
OF
THE
CENTER
OF
PROJECTION
COP
TO
INFINITY
WHEN
WE
INTRODUCED
THE
SYNTHETIC
CAMERA
MODEL
IN
CHAPTER
WE
POINTED
OUT
THE
SIMILARITIES
BETWEEN
CLASSICAL
AND
COMPUTER
VIEWING
THE
BASIC
ELEMENTS
IN
BOTH
CASES
ARE
THE
SAME
WE
HAVE
OBJECTS
A
VIEWER
PROJECTORS
AND
A
PROJECTION
PLANE
FIGURE
THE
PROJECTORS
MEET
AT
THE
CENTER
OF
PROJECTION
COP
THE
COP
CORRESPONDS
TO
THE
CENTER
OF
THE
LENS
IN
THE
CAMERA
OR
IN
THE
EYE
AND
IN
A
COMPUTER
GRAPHICS
SYSTEM
IT
IS
THE
ORIGIN
OF
THE
CAMERA
FRAME
FOR
PERSPECTIVE
VIEWS
ALL
STANDARD
GRAPHICS
SYSTEMS
FOLLOW
THE
MODEL
THAT
WE
DESCRIBED
IN
CHAPTER
WHICH
IS
BASED
ON
GEOMETRIC
OPTICS
THE
PROJECTION
SURFACE
IS
A
PLANE
AND
THE
PROJECTORS
ARE
STRAIGHT
LINES
THIS
SITUATION
IS
THE
ONE
WE
USUALLY
ENCOUNTER
AND
IS
STRAIGHTFORWARD
TO
IMPLEMENT
ESPECIALLY
WITH
OUR
PIPELINE
MODEL
BOTH
CLASSICAL
AND
COMPUTER
GRAPHICS
ALLOW
THE
VIEWER
TO
BE
AN
INFINITE
DISTANCE
FROM
THE
OBJECTS
NOTE
THAT
AS
WE
MOVE
THE
COP
TO
INFINITY
THE
PROJECTORS
BECOME
PARALLEL
AND
THE
COP
CAN
BE
REPLACED
BY
A
DIRECTION
OF
PROJECTION
DOP
AS
SHOWN
IN
FIGURE
NOTE
ALSO
THAT
AS
THE
COP
MOVES
TO
INFINITY
WE
CAN
LEAVE
THE
PROJECTION
PLANE
FIXED
AND
THE
SIZE
OF
THE
IMAGE
REMAINS
ABOUT
THE
SAME
EVEN
THOUGH
THE
COP
IS
INFINITELY
FAR
FROM
THE
OBJECTS
VIEWS
WITH
A
FINITE
COP
ARE
CALLED
PERSPECTIVE
VIEWS
VIEWS
WITH
A
COP
AT
INFINITY
ARE
CALLED
PARALLEL
VIEWS
FOR
PARALLEL
VIEWS
THE
ORIGIN
OF
THE
CAMERA
FRAME
USUALLY
LIES
IN
THE
PROJECTION
PLANE
COLOR
PLATES
AND
SHOW
A
PARALLEL
AND
A
PERSPECTIVE
RENDERING
RESPECTIVELY
THESE
PLATES
ILLUSTRATE
THE
IMPORTANCE
OF
HAVING
BOTH
TYPES
OF
VIEW
AVAILABLE
IN
APPLI
CATIONS
SUCH
AS
ARCHITECTURE
IN
AN
API
THAT
SUPPORTS
BOTH
TYPES
OF
VIEWING
THE
USER
CAN
SWITCH
EASILY
BETWEEN
VARIOUS
VIEWING
MODES
MOST
MODERN
APIS
SUPPORT
BOTH
PARALLEL
AND
PERSPECTIVE
VIEWING
THE
CLASS
OF
PROJECTIONS
PRODUCED
BY
THESE
SYSTEMS
IS
KNOWN
AS
PLANAR
GEOMETRIC
PROJECTIONS
BECAUSE
THE
PROJECTION
SURFACE
IS
A
PLANE
AND
THE
PROJECTORS
ARE
LINES
BOTH
PERSPECTIVE
AND
PARALLEL
PROJECTIONS
PRESERVE
LINES
THEY
DO
NOT
IN
GENERAL
PRESERVE
ANGLES
ALTHOUGH
THE
PARALLEL
VIEWS
ARE
THE
LIMITING
CASE
OF
PERSPECTIVE
VIEWING
BOTH
CLASSICAL
AND
COMPUTER
VIEWING
USUALLY
TREAT
THEM
AS
SEPARATE
CASES
FOR
CLASSICAL
VIEWS
THE
TECHNIQUES
THAT
PEOPLE
USE
TO
CONSTRUCT
THE
TWO
TYPES
BY
HAND
ARE
DIFFERENT
AS
ANYONE
WHO
HAS
TAKEN
A
DRAFTING
CLASS
SURELY
KNOWS
FROM
THE
COMPUTER
PERSPECTIVE
THERE
ARE
DIFFERENCES
IN
HOW
WE
SPECIFY
THE
TWO
TYPES
OF
VIEWS
RATHER
THAN
LOOKING
AT
A
PARALLEL
VIEW
AS
THE
LIMIT
OF
THE
PERSPECTIVE
VIEW
WE
DERIVE
THE
LIMITING
EQUATIONS
AND
USE
THOSE
EQUATIONS
DIRECTLY
TO
FORM
THE
CORRE
SPONDING
PROJECTION
MATRIX
IN
MODERN
PIPELINE
ARCHITECTURES
THE
PROJECTION
MATRIX
CORRESPONDING
TO
EITHER
TYPE
OF
VIEW
CAN
BE
LOADED
INTO
THE
PIPELINE
ALTHOUGH
COMPUTER
GRAPHICS
SYSTEMS
HAVE
TWO
FUNDAMENTAL
TYPES
OF
VIEWING
PARALLEL
AND
PERSPECTIVE
CLASSICAL
GRAPHICS
APPEARS
TO
PERMIT
A
HOST
OF
DIFFERENT
VIEWS
RANGING
FROM
MULTIVIEW
ORTHOGRAPHIC
PROJECTIONS
TO
ONE
TWO
AND
THREE
POINT
PERSPECTIVES
THIS
SEEMING
DISCREPANCY
ARISES
IN
CLASSICAL
GRAPHICS
AS
A
RESULT
OF
THE
DESIRE
TO
SHOW
A
SPECIFIC
RELATIONSHIP
AMONG
AN
OBJECT
THE
VIEWER
AND
THE
PROJEC
TION
PLANE
AS
OPPOSED
TO
THE
COMPUTER
GRAPHICS
APPROACH
OF
COMPLETE
INDEPENDENCE
OF
ALL
SPECIFICATIONS
CLASSICAL
VIEWING
WHEN
AN
ARCHITECT
DRAWS
AN
IMAGE
OF
A
BUILDING
SHE
KNOWS
WHICH
SIDE
SHE
WISHES
TO
DISPLAY
AND
THUS
WHERE
SHE
SHOULD
PLACE
THE
VIEWER
IN
RELATIONSHIP
TO
THE
BUILDING
EACH
CLASSICAL
VIEW
IS
DETERMINED
BY
A
SPECIFIC
RELATIONSHIP
BETWEEN
THE
OBJECTS
AND
THE
VIEWER
IN
CLASSICAL
VIEWING
THERE
IS
THE
UNDERLYING
NOTION
OF
A
PRINCIPAL
FACE
THE
TYPES
OF
OBJECTS
VIEWED
IN
REAL
WORLD
APPLICATIONS
SUCH
AS
ARCHITECTURE
TEND
TO
BE
COMPOSED
OF
A
NUMBER
OF
PLANAR
FACES
EACH
OF
WHICH
CAN
BE
THOUGHT
OF
AS
A
PRINCIPAL
FACE
FOR
A
RECTANGULAR
OBJECT
SUCH
AS
A
BUILDING
THERE
ARE
NATURAL
NOTIONS
OF
THE
FRONT
BACK
TOP
BOTTOM
RIGHT
AND
LEFT
FACES
IN
ADDITION
MANY
REAL
WORLD
OBJECTS
HAVE
FACES
THAT
MEET
AT
RIGHT
ANGLES
THUS
SUCH
OBJECTS
OFTEN
HAVE
THREE
ORTHOGONAL
DIRECTIONS
ASSOCIATED
WITH
THEM
FIGURE
SHOWS
SOME
OF
THE
MAIN
TYPES
OF
VIEWS
WE
START
WITH
THE
MOST
RE
STRICTIVE
VIEW
FOR
EACH
OF
THE
PARALLEL
AND
PERSPECTIVE
TYPES
AND
THEN
MOVE
TO
THE
LESS
RESTRICTIVE
CONDITIONS
ORTHOGRAPHIC
PROJECTIONS
OUR
FIRST
CLASSICAL
VIEW
IS
THE
ORTHOGRAPHIC
PROJECTION
SHOWN
IN
FIGURE
IN
ALL
OR
THOGRAPHIC
OR
ORTHOGONAL
VIEWS
THE
PROJECTORS
ARE
PERPENDICULAR
TO
THE
PROJECTION
PLANE
IN
A
MULTIVIEW
ORTHOGRAPHIC
PROJECTION
WE
MAKE
MULTIPLE
PROJECTIONS
IN
FRONT
ELEVATION
ELEVATION
OBLIQUE
PLAN
OBLIQUE
ISOMETRIC
ONE
POINT
PERSPECTIVE
THREE
POINT
PERSPECTIVE
FIGURE
CLASSICAL
VIEWS
FIGURE
ORTHOGRAPHIC
PROJECTIONS
EACH
CASE
WITH
THE
PROJECTION
PLANE
PARALLEL
TO
ONE
OF
THE
PRINCIPAL
FACES
OF
THE
OBJECT
USUALLY
WE
USE
THREE
VIEWS
SUCH
AS
THE
FRONT
TOP
AND
RIGHT
TO
DISPLAY
THE
OBJECT
THE
REASON
THAT
WE
PRODUCE
MULTIPLE
VIEWS
SHOULD
BE
CLEAR
FROM
FIGURE
FOR
A
BOX
LIKE
OBJECT
ONLY
THE
FACES
PARALLEL
TO
THE
PROJECTION
PLANE
APPEAR
IN
THE
IMAGE
A
VIEWER
USUALLY
NEEDS
MORE
THAN
TWO
VIEWS
TO
VISUALIZE
WHAT
AN
OBJECT
LOOKS
LIKE
FROM
ITS
MULTIVIEW
ORTHOGRAPHIC
PROJECTIONS
VISUALIZATION
FROM
THESE
IMAGES
CAN
REQUIRE
SKILL
ON
THE
PART
OF
THE
VIEWER
THE
IMPORTANCE
OF
THIS
TYPE
OF
VIEW
IS
THAT
IT
PRESERVES
BOTH
DISTANCES
AND
ANGLES
AND
BECAUSE
THERE
IS
NO
DISTORTION
OF
EITHER
DISTANCE
OR
SHAPE
MULTIVIEW
ORTHOGRAPHIC
PROJECTIONS
ARE
WELL
SUITED
FOR
WORKING
DRAWINGS
AXONOMETRIC
PROJECTIONS
IF
WE
WANT
TO
SEE
MORE
PRINCIPAL
FACES
OF
OUR
BOX
LIKE
OBJECT
IN
A
SINGLE
VIEW
WE
MUST
REMOVE
ONE
OF
OUR
RESTRICTIONS
IN
AXONOMETRIC
VIEWS
THE
PROJECTORS
ARE
STILL
FIGURE
TEMPLE
AND
THREE
MULTIVIEW
ORTHOGRAPHIC
PROJECTIONS
PROJECTION
PLANE
PROJECTION
PLANE
PROJECTION
PLANE
A
B
C
FIGURE
AXONOMETRIC
PROJECTIONS
A
CONSTRUCTION
OF
TRIMETRIC
VIEW
PROJECTIONS
B
TOP
VIEW
C
SIDE
VIEW
ORTHOGONAL
TO
THE
PROJECTION
PLANE
AS
SHOWN
IN
FIGURE
BUT
THE
PROJECTION
PLANE
CAN
HAVE
ANY
ORIENTATION
WITH
RESPECT
TO
THE
OBJECT
IF
THE
PROJECTION
PLANE
IS
PLACED
SYMMETRICALLY
WITH
RESPECT
TO
THE
THREE
PRINCIPAL
FACES
THAT
MEET
AT
A
CORNER
OF
OUR
RECTANGULAR
OBJECT
THEN
WE
HAVE
AN
ISOMETRIC
VIEW
IF
THE
PROJECTION
PLANE
IS
PLACED
SYMMETRICALLY
WITH
RESPECT
TO
TWO
OF
THE
PRINCIPAL
FACES
THEN
THE
VIEW
IS
DIMETRIC
THE
GENERAL
CASE
IS
A
TRIMETRIC
VIEW
THESE
VIEWS
ARE
SHOWN
IN
FIGURE
NOTE
THAT
IN
AN
ISOMETRIC
VIEW
A
LINE
SEGMENT
LENGTH
IN
THE
IMAGE
SPACE
IS
SHORTER
THAN
ITS
LENGTH
MEASURED
IN
THE
OBJECT
SPACE
THIS
FORESHORTENING
OF
DISTANCES
IS
THE
SAME
DIMETRIC
TRIMETRIC
ISOMETRIC
FIGURE
AXONOMETRIC
VIEWS
PROJECTION
PLANE
PROJECTION
PLANE
PROJECTION
PLANE
A
B
C
FIGURE
OBLIQUE
VIEW
A
CONSTRUCTION
B
TOP
VIEW
C
SIDE
VIEW
IN
THE
THREE
PRINCIPAL
DIRECTIONS
SO
WE
CAN
STILL
MAKE
DISTANCE
MEASUREMENTS
IN
THE
DIMETRIC
VIEW
HOWEVER
THERE
ARE
TWO
DIFFERENT
FORESHORTENING
RATIOS
IN
THE
TRIMETRIC
VIEW
THERE
ARE
THREE
ALSO
ALTHOUGH
PARALLEL
LINES
ARE
PRESERVED
IN
THE
IMAGE
ANGLES
ARE
NOT
A
CIRCLE
IS
PROJECTED
INTO
AN
ELLIPSE
THIS
DISTORTION
IS
THE
PRICE
WE
PAY
FOR
THE
ABILITY
TO
SEE
MORE
THAN
ONE
PRINCIPAL
FACE
IN
A
VIEW
THAT
CAN
BE
PRODUCED
EASILY
EITHER
BY
HAND
OR
BY
COMPUTER
AXONOMETRIC
VIEWS
ARE
USED
EXTENSIVELY
IN
ARCHITECTURAL
AND
MECHANICAL
DESIGN
OBLIQUE
PROJECTIONS
THE
OBLIQUE
VIEWS
ARE
THE
MOST
GENERAL
PARALLEL
VIEWS
WE
OBTAIN
AN
OBLIQUE
PROJEC
TION
BY
ALLOWING
THE
PROJECTORS
TO
MAKE
AN
ARBITRARY
ANGLE
WITH
THE
PROJECTION
PLANE
AS
SHOWN
IN
FIGURE
CONSEQUENTLY
ANGLES
IN
PLANES
PARALLEL
TO
THE
PROJECTION
PLANE
ARE
PRESERVED
A
CIRCLE
IN
A
PLANE
PARALLEL
TO
THE
PROJECTION
PLANE
IS
PROJECTED
INTO
A
CIR
CLE
YET
WE
CAN
SEE
MORE
THAN
ONE
PRINCIPAL
FACE
OF
THE
OBJECT
OBLIQUE
VIEWS
ARE
THE
MOST
DIFFICULT
TO
CONSTRUCT
BY
HAND
THEY
ARE
ALSO
SOMEWHAT
UNNATURAL
MOST
PHYSI
CAL
VIEWING
DEVICES
INCLUDING
THE
HUMAN
VISUAL
SYSTEM
HAVE
A
LENS
THAT
IS
IN
A
FIXED
RELATIONSHIP
WITH
THE
IMAGE
PLANE
USUALLY
THE
LENS
IS
PARALLEL
TO
THE
PLANE
ALTHOUGH
THESE
DEVICES
PRODUCE
PERSPECTIVE
VIEWS
IF
THE
VIEWER
IS
FAR
FROM
THE
OBJECT
THE
VIEWS
ARE
APPROXIMATELY
PARALLEL
BUT
ORTHOGONAL
BECAUSE
THE
PROJECTION
PLANE
IS
PARALLEL
TO
THE
LENS
THE
BELLOWS
CAMERA
THAT
WE
USED
TO
DEVELOP
THE
SYNTHETIC
CAMERA
MODEL
IN
SECTION
HAS
THE
FLEXIBILITY
TO
PRODUCE
APPROXIMATIONS
TO
PARALLEL
OBLIQUE
VIEWS
ONE
USE
OF
SUCH
A
CAMERA
IS
TO
CREATE
IMAGES
OF
BUILDINGS
IN
WHICH
THE
SIDES
OF
THE
BUILDING
ARE
PARALLEL
RATHER
THAN
CONVERGING
AS
THEY
WOULD
BE
IN
AN
IMAGE
CREATED
WITH
AN
ORTHOGONAL
VIEW
WITH
THE
CAMERA
ON
THE
GROUND
FROM
THE
APPLICATION
PROGRAMMER
POINT
OF
VIEW
THERE
IS
NO
SIGNIFICANT
DIFFER
ENCE
AMONG
THE
DIFFERENT
PARALLEL
VIEWS
THE
APPLICATION
PROGRAMMER
SPECIFIES
A
TYPE
OF
VIEW
PARALLEL
OR
PERSPECTIVE
AND
A
SET
OF
PARAMETERS
THAT
DESCRIBE
THE
CAMERA
THE
PROBLEM
FOR
THE
APPLICATION
PROGRAMMER
IS
HOW
TO
SPECIFY
THESE
PARAMETERS
IN
THE
VIEWING
PROCEDURES
SO
AS
BEST
TO
VIEW
AN
OBJECT
OR
TO
PRODUCE
A
SPECIFIC
CLASSICAL
VIEW
PERSPECTIVE
VIEWING
ALL
PERSPECTIVE
VIEWS
ARE
CHARACTERIZED
BY
DIMINUTION
OF
SIZE
WHEN
OBJECTS
ARE
MOVED
FARTHER
FROM
THE
VIEWER
THEIR
IMAGES
BECOME
SMALLER
THIS
SIZE
CHANGE
GIVES
PERSPECTIVE
VIEWS
THEIR
NATURAL
APPEARANCE
HOWEVER
BECAUSE
THE
AMOUNT
BY
WHICH
A
LINE
IS
FORESHORTENED
DEPENDS
ON
HOW
FAR
THE
LINE
IS
FROM
THE
VIEWER
WE
CANNOT
MAKE
MEASUREMENTS
FROM
A
PERSPECTIVE
VIEW
HENCE
THE
MAJOR
USE
OF
PERSPECTIVE
VIEWS
IS
IN
APPLICATIONS
SUCH
AS
ARCHITECTURE
AND
ANIMATION
WHERE
IT
IS
IMPORTANT
TO
ACHIEVE
NATURAL
LOOKING
IMAGES
IN
THE
CLASSICAL
PERSPECTIVE
VIEWS
THE
VIEWER
IS
LOCATED
SYMMETRICALLY
WITH
RESPECT
TO
THE
PROJECTION
PLANE
AS
SHOWN
IN
FIGURE
THUS
THE
PYRAMID
DETERMINED
BY
THE
WINDOW
IN
THE
PROJECTION
PLANE
AND
THE
CENTER
OF
PROJECTION
IS
A
SYMMETRIC
OR
RIGHT
FIGURE
PERSPECTIVE
VIEWING
A
B
C
FIGURE
CLASSICAL
PERSPECTIVE
VIEWS
A
THREE
POINT
B
TWO
POINT
C
ONE
POINT
PYRAMID
THIS
SYMMETRY
IS
CAUSED
BY
THE
FIXED
RELATIONSHIP
BETWEEN
THE
BACK
RETINA
AND
LENS
OF
THE
EYE
FOR
HUMAN
VIEWING
OR
BETWEEN
THE
BACK
AND
LENS
OF
A
CAMERA
FOR
STANDARD
CAMERAS
AND
BY
SIMILAR
FIXED
RELATIONSHIPS
IN
MOST
PHYSICAL
SITUATIONS
SOME
CAMERAS
SUCH
AS
THE
BELLOWS
CAMERA
HAVE
MOVABLE
FILM
BACKS
AND
CAN
PRODUCE
GENERAL
PERSPECTIVE
VIEWS
THE
MODEL
USED
IN
COMPUTER
GRAPHICS
INCLUDES
THIS
GENERAL
CASE
THE
CLASSICAL
PERSPECTIVE
VIEWS
ARE
USUALLY
KNOWN
AS
ONE
TWO
AND
THREE
POINT
PERSPECTIVES
THE
DIFFERENCES
AMONG
THE
THREE
CASES
ARE
BASED
ON
HOW
MANY
OF
THE
THREE
PRINCIPAL
DIRECTIONS
IN
THE
OBJECT
ARE
PARALLEL
TO
THE
PROJECTION
PLANE
CONSIDER
THE
THREE
PERSPECTIVE
PROJECTIONS
OF
THE
BUILDING
SHOWN
IN
FIGURE
ANY
CORNER
OF
THE
BUILDING
INCLUDES
THE
THREE
PRINCIPAL
DIRECTIONS
IN
THE
MOST
GENERAL
CASE
THE
THREE
POINT
PERSPECTIVE
PARALLEL
LINES
IN
EACH
OF
THE
THREE
PRINCIPAL
DIRECTIONS
CONVERGES
TO
A
FINITE
VANISHING
POINT
FIGURE
A
IF
WE
ALLOW
ONE
OF
THE
PRINCIPAL
DIRECTIONS
TO
BECOME
PARALLEL
TO
THE
PROJECTION
PLANE
WE
HAVE
A
TWO
POINT
PROJECTION
FIGURE
B
IN
WHICH
LINES
IN
ONLY
TWO
OF
THE
PRINCIPAL
DIRECTIONS
CONVERGE
FINALLY
IN
THE
ONE
POINT
PERSPECTIVE
FIGURE
C
TWO
OF
THE
PRINCIPAL
DIRECTIONS
ARE
PARALLEL
TO
THE
PROJECTION
PLANE
AND
WE
HAVE
ONLY
A
SINGLE
VANISHING
POINT
AS
WITH
PARALLEL
VIEWING
IT
SHOULD
BE
APPARENT
FROM
THE
PROGRAMMER
POINT
OF
VIEW
THAT
THE
THREE
SITUATIONS
ARE
MERELY
SPECIAL
CASES
OF
GENERAL
PERSPECTIVE
VIEWING
WHICH
WE
IMPLEMENT
IN
SECTION
VIEWING
WITH
A
COMPUTER
WE
CAN
NOW
RETURN
TO
THREE
DIMENSIONAL
GRAPHICS
FROM
A
COMPUTER
PERSPECTIVE
BE
CAUSE
VIEWING
IN
COMPUTER
GRAPHICS
IS
BASED
ON
THE
SYNTHETIC
CAMERA
MODEL
WE
SHOULD
BE
ABLE
TO
CONSTRUCT
ANY
OF
THE
CLASSICAL
VIEWS
HOWEVER
THERE
IS
A
FUNDAMEN
TAL
DIFFERENCE
ALL
THE
CLASSICAL
VIEWS
ARE
BASED
ON
A
PARTICULAR
RELATIONSHIP
AMONG
THE
OBJECTS
THE
VIEWER
AND
THE
PROJECTORS
IN
COMPUTER
GRAPHICS
WE
STRESS
THE
INDEPEN
DENCE
OF
THE
OBJECT
SPECIFICATIONS
AND
CAMERA
PARAMETERS
HENCE
TO
CREATE
ONE
OF
THE
CLASSICAL
VIEWS
THE
APPLICATION
PROGRAM
MUST
USE
INFORMATION
ABOUT
THE
OBJECTS
TO
CREATE
AND
PLACE
THE
PROPER
CAMERA
USING
OPENGL
WE
WILL
HAVE
MANY
OPTIONS
ON
HOW
AND
WHERE
WE
CARRY
OUT
VIEWING
ALL
OUR
APPROACHES
WILL
USE
THE
POWERFUL
TRANSFORMATION
CAPABILITIES
OF
THE
GPU
BECAUSE
EVERY
TRANSFORMATION
IS
EQUIVALENT
TO
A
CHANGE
OF
FRAMES
WE
CAN
DEVELOP
VIEWING
IN
TERMS
OF
THE
FRAMES
AND
COORDINATE
SYSTEMS
WE
INTRODUCED
IN
CHAPTER
IN
PARTICULAR
WE
WILL
WORK
WITH
OBJECT
COORDINATES
CAMERA
COORDINATES
AND
CLIP
COORDINATES
A
GOOD
STARTING
POINT
IS
THE
OUTPUT
OF
THE
VERTEX
SHADER
IN
CHAPTERS
AND
WE
USED
THE
FACT
THAT
AS
LONG
AS
THE
VERTICES
OUTPUT
BY
THE
VERTEX
SHADER
WERE
WITHIN
THE
CLIPPING
VOLUME
THEY
CONTINUED
ONTO
THE
RASTERIZER
HENCE
IN
CHAPTER
WE
WERE
ABLE
TO
SPECIFY
VERTEX
POSITIONS
INSIDE
THE
DEFAULT
VIEWING
CUBE
IN
CHAPTER
WE
LEARNED
HOW
TO
SCALE
POSITIONS
USING
AFFINE
TRANSFORMATIONS
SO
THEY
WOULD
BE
MAPPED
INSIDE
THE
CUBE
WE
ALSO
RELIED
ON
THE
FACT
THAT
OBJECTS
THAT
ARE
SENT
TO
THE
RASTERIZER
ARE
PROJECTED
WITH
A
SIMPLE
ORTHOGRAPHIC
PROJECTION
HIDDEN
SURFACE
REMOVAL
HOWEVER
OCCURS
AFTER
THE
FRAGMENT
SHADER
CONSE
QUENTLY
ALTHOUGH
AN
OBJECT
MIGHT
BE
BLOCKED
FROM
THE
CAMERA
BY
OTHER
OBJECTS
EVEN
WITH
HIDDEN
SURFACE
REMOVAL
ENABLED
THE
RASTERIZER
WILL
STILL
GENERATE
FRAGMENTS
FOR
BLOCKED
OBJECTS
WITHIN
THE
CLIPPING
VOLUME
HOWEVER
WE
NEED
MORE
FLEXIBILITY
IN
BOTH
HOW
WE
SPECIFY
OBJECTS
AND
HOW
WE
VIEW
THEM
THERE
ARE
FOUR
MAJOR
ADDITIONS
TO
ADDRESS
WE
NEED
THE
ABILITY
TO
WORK
IN
THE
UNITS
OF
THE
APPLICATION
WE
NEED
TO
POSITION
THE
CAMERA
INDEPENDENTLY
OF
THE
OBJECTS
WE
WANT
TO
BE
ABLE
TO
SPECIFY
A
CLIPPING
VOLUME
IN
UNITS
RELATED
TO
THE
APPLI
CATION
WE
WANT
TO
BE
ABLE
TO
DO
EITHER
PARALLEL
OR
PERSPECTIVE
PROJECTIONS
WE
CAN
ACCOMPLISH
ALL
THESE
ADDITIONS
BY
CAREFUL
USE
OF
TRANSFORMATIONS
THE
FIRST
THREE
USING
AFFINE
TRANSFORMATIONS
AND
THE
LAST
USING
A
PROCESS
CALLED
PERSPECTIVE
NORMAL
IZATION
ALL
OF
THESE
TRANSFORMATIONS
MUST
BE
CARRIED
OUT
EITHER
IN
THE
APPLICATION
CODE
OR
IN
THE
VERTEX
SHADER
WE
APPROACH
ALL
THESE
TASKS
THROUGH
THE
TRANSFORMATION
CAPABILITIES
WE
DEVEL
OPED
IN
CHAPTER
OF
THE
FRAMES
THAT
ARE
USED
IN
OPENGL
THREE
ARE
IMPORTANT
IN
THE
VIEWING
PROCESS
THE
OBJECT
FRAME
THE
CAMERA
FRAME
AND
THE
CLIP
COORDINATE
FRAME
IN
CHAPTERS
AND
WE
WERE
ABLE
TO
AVOID
EXPLICITLY
SPECIFYING
THE
FIRST
TWO
BY
USING
A
DEFAULT
IN
WHICH
ALL
THREE
FRAMES
WERE
IDENTICAL
WE
EITHER
DIRECTLY
SPECIFIED
VERTEX
PO
SITIONS
IN
CLIP
COORDINATES
OR
USED
AN
AFFINE
TRANSFORMATION
TO
SCALE
OBJECTS
WE
WANTED
TO
BE
VISIBLE
TO
LIE
WITHIN
THE
CLIPPING
CUBE
IN
CLIP
COORDINATES
THE
CAMERA
WAS
FIXED
TO
BE
AT
THE
ORIGIN
AND
POINTING
IN
THE
NEGATIVE
Z
DIRECTION
IN
CLIP
COORDINATES
TO
GET
A
MORE
FLEXIBLE
WAY
TO
DO
VIEWING
WE
WILL
SEPARATE
THE
PROCESS
INTO
TWO
FUNDAMENTAL
OPERATIONS
FIRST
WE
MUST
POSITION
AND
ORIENT
THE
CAMERA
THIS
OPER
ATION
IS
THE
JOB
OF
THE
MODEL
VIEW
TRANSFORMATION
AFTER
VERTICES
PASS
THROUGH
THIS
THE
DEFAULT
CAMERA
CAN
SEE
OBJECTS
BEHIND
IT
IF
THEY
ARE
IN
THE
CLIPPING
VOLUME
OBJECT
COORDINATES
VERTICES
CAMERA
COORDINATES
CLIP
COORDINATES
VERTICES
FIGURE
VIEWING
TRANSFORMATIONS
TRANSFORMATION
THEY
WILL
BE
REPRESENTED
IN
EYE
OR
CAMERA
COORDINATES
THE
SECOND
STEP
IS
THE
APPLICATION
OF
THE
PROJECTION
TRANSFORMATION
THIS
STEP
APPLIES
THE
SPECIFIED
PROJECTION
ORTHOGRAPHIC
OR
PERSPECTIVE
TO
THE
VERTICES
AND
PUTS
OBJECTS
WITHIN
THE
SPECIFIED
CLIPPING
VOLUME
INTO
THE
SAME
CLIPPING
CUBE
IN
CLIP
COORDINATES
ONE
OF
THE
FUNCTIONS
OF
EITHER
PROJECTION
WILL
BE
TO
ALLOW
US
TO
SPECIFY
A
VIEW
VOLUME
IN
CAMERA
COORDINATES
RATHER
THAN
HAVING
TO
SCALE
OUR
OBJECT
TO
FIT
INTO
THE
DEFAULT
VIEW
VOLUME
THESE
TRANSFORMATIONS
ARE
SHOWN
IN
FIGURE
WHAT
WE
HAVE
CALLED
THE
CURRENT
TRANSFORMATION
MATRIX
WILL
BE
THE
PRODUCT
OF
TWO
MATRICES
THE
MODEL
VIEW
MATRIX
AND
THE
PROJECTION
MATRIX
THE
MODEL
VIEW
MATRIX
WILL
TAKE
VERTICES
IN
OBJECT
COORDINATES
AND
CONVERT
THEM
TO
A
REPRESENTATION
IN
CAMERA
COORDINATES
AND
THUS
MUST
ENCAPSULATE
THE
POSITIONING
AND
ORIENTATION
OF
THE
CAMERA
THE
PROJECTION
MATRIX
WILL
BOTH
CARRY
OUT
THE
DESIRED
PROJECTION
EITHER
ORTHOGONAL
OR
PERSPECTIVE
AND
CONVERT
A
VIEWING
VOLUME
SPECIFIED
IN
CAMERA
COORDINATES
TO
FIT
INSIDE
THE
VIEWING
CUBE
IN
CLIP
COORDINATES
POSITIONING
OF
THE
CAMERA
IN
THIS
SECTION
WE
DEAL
WITH
POSITIONING
AND
ORIENTATION
OF
THE
CAMERA
IN
SECTION
WE
DISCUSS
HOW
WE
SPECIFY
THE
DESIRED
PROJECTION
ALTHOUGH
WE
WILL
FOCUS
ON
AN
API
THAT
WILL
WORK
WELL
WITH
OPENGL
WE
ALSO
WILL
EXAMINE
BRIEFLY
A
FEW
OTHER
APIS
TO
SPECIFY
A
CAMERA
Y
POSITIONING
OF
THE
CAMERA
FRAME
AS
WE
SAW
IN
CHAPTER
WE
CAN
SPECIFY
VERTICES
IN
ANY
UNITS
WE
CHOOSE
AND
WE
CAN
DEFINE
A
MODEL
VIEW
MATRIX
BY
A
SEQUENCE
OF
AFFINE
TRANSFORMATIONS
THAT
REPOSITIONS
THESE
VERTICES
THE
MODEL
VIEW
TRANSFORMATION
IS
THE
CONCATENATION
OF
A
MODELING
X
TRANSFORMATION
THAT
TAKES
INSTANCES
OF
OBJECTS
IN
OBJECT
COORDINATES
AND
BRINGS
THEM
INTO
THE
WORLD
FRAME
THE
SECOND
PART
TRANSFORMS
WORLD
COORDINATES
TO
EYE
COORDI
NATES
BECAUSE
WE
USUALLY
DO
NOT
NEED
TO
ACCESS
WORLD
COORDINATES
WE
CAN
USE
THE
MODEL
VIEW
MATRIX
RATHER
THAN
SEPARATE
MODELING
AND
VIEWING
MATRICES
Z
INITIALLY
WE
SET
THE
MODEL
VIEW
MATRIX
TO
AN
IDENTITY
MATRIX
SO
THE
CAMERA
FRAME
AND
THE
OBJECT
FRAME
ARE
IDENTICAL
HENCE
THE
CAMERA
IS
INITIALLY
POINTING
IN
FIGURE
INITIAL
CAMERA
POSITION
THE
NEGATIVE
Z
DIRECTION
FIGURE
IN
MOST
APPLICATIONS
WE
MODEL
OUR
OBJECTS
AS
BEING
LOCATED
AROUND
THE
ORIGIN
SO
A
CAMERA
LOCATED
AT
THE
DEFAULT
POSITION
WITH
THE
DEFAULT
ORIENTATION
DOES
NOT
SEE
ALL
THE
OBJECTS
IN
THE
SCENE
THUS
EITHER
WE
MUST
Y
Y
YC
X
X
XC
Z
ZC
A
B
FIGURE
MOVEMENT
OF
THE
CAMERA
AND
OBJECT
FRAMES
A
INITIAL
CONFIGURATION
B
CONFIGURATION
AFTER
CHANGE
IN
THE
MODEL
VIEW
MATRIX
MOVE
THE
CAMERA
AWAY
FROM
THE
OBJECTS
THAT
WE
WISH
TO
HAVE
IN
OUR
IMAGE
OR
THE
OBJECTS
MUST
BE
MOVED
IN
FRONT
OF
THE
CAMERA
THESE
ARE
EQUIVALENT
OPERATIONS
AS
EITHER
CAN
BE
LOOKED
AT
AS
POSITIONING
THE
FRAME
OF
THE
CAMERA
WITH
RESPECT
TO
THE
FRAME
OF
THE
OBJECTS
IT
MIGHT
HELP
TO
THINK
OF
A
SCENE
IN
WHICH
WE
HAVE
INITIALLY
SPECIFIED
SEVERAL
OB
JECTS
BY
SPECIFYING
ALL
VERTICES
AND
PUTTING
THEIR
POSITIONS
INTO
AN
ARRAY
WE
START
WITH
THE
MODEL
VIEW
MATRIX
SET
TO
AN
IDENTITY
MATRIX
CHANGES
TO
THE
MODEL
VIEW
MATRIX
MOVE
THE
OBJECT
FRAME
RELATIVE
TO
THE
CAMERA
AND
AFFECT
THE
CAMERA
VIEW
OF
ALL
OB
JECTS
DEFINED
AFTERWARD
BECAUSE
THEIR
VERTICES
ARE
SPECIFIED
RELATIVE
TO
THE
REPOSITIONED
OBJECT
FRAME
EQUIVALENTLY
IN
TERMS
OF
THE
FLOW
OF
AN
APPLICATION
PROGRAM
THE
PRO
JECTION
AND
MODEL
VIEW
MATRICES
ARE
PART
OF
ITS
STATE
WE
WILL
EITHER
APPLY
THEM
TO
THE
VERTEX
POSITIONS
IN
THE
APPLICATION
OR
MORE
LIKELY
WE
WILL
SEND
THEM
TO
THE
VERTEX
SHADER
WHERE
THEY
WILL
BE
APPLIED
AUTOMATICALLY
WHENEVER
VERTEX
DATA
IS
SENT
TO
THE
SHADER
IN
EITHER
CASE
THE
SEQUENCE
ILLUSTRATED
IN
FIGURE
SHOWS
THE
PROCESS
IN
PART
A
WE
HAVE
THE
INITIAL
CONFIGURATION
A
VERTEX
SPECIFIED
AT
P
HAS
THE
SAME
REPRESEN
TATION
IN
BOTH
FRAMES
IN
PART
B
WE
HAVE
CHANGED
THE
MODEL
VIEW
MATRIX
TO
C
BY
A
SEQUENCE
OF
TRANSFORMATIONS
THE
TWO
FRAMES
ARE
NO
LONGER
THE
SAME
ALTHOUGH
C
CONTAINS
THE
INFORMATION
TO
MOVE
FROM
THE
CAMERA
FRAME
TO
THE
OBJECT
FRAME
OR
EQUIVALENTLY
CONTAINS
THE
INFORMATION
THAT
MOVES
THE
CAMERA
AWAY
FROM
ITS
INITIAL
POSITION
AT
THE
ORIGIN
OF
THE
OBJECT
FRAME
A
VERTEX
SPECIFIED
AT
Q
AFTER
THE
CHANGE
TO
THE
MODEL
VIEW
MATRIX
IS
AT
Q
IN
THE
OBJECT
FRAME
HOWEVER
ITS
POSITION
IN
THE
CAMERA
FRAME
IS
CQ
AND
CAN
BE
STORED
INTERNALLY
WITHIN
THE
APPLICATION
OR
SENT
TO
THE
GPU
WHERE
IT
WILL
BE
CONVERTED
TO
CAMERA
COORDINATES
THE
VIEWING
TRANSFORMATION
WILL
ASSUME
THAT
VERTEX
DATA
IT
STARTS
WITH
IS
IN
CAMERA
COORDINATES
AN
EQUIVALENT
VIEW
IS
THAT
THE
CAMERA
IS
STILL
AT
THE
ORIGIN
OF
ITS
OWN
FRAME
AND
THE
MODEL
VIEW
MATRIX
IS
APPLIED
TO
PRIMITIVES
SPECIFIED
IN
THIS
SYSTEM
IN
PRACTICE
YOU
CAN
USE
EITHER
VIEW
BUT
BE
SURE
TO
TAKE
GREAT
CARE
REGARDING
WHERE
IN
YOUR
PROGRAM
THE
PRIMITIVES
ARE
SPECIFIED
RELATIVE
TO
CHANGES
IN
THE
MODEL
VIEW
MATRIX
AT
ANY
GIVEN
TIME
THE
MODEL
VIEW
MATRIX
ENCAPSULATES
THE
RELATIONSHIP
BETWEEN
THE
CAMERA
FRAME
AND
THE
OBJECT
FRAME
ALTHOUGH
COMBINING
THE
MODELING
AND
VIEW
ING
TRANSFORMATIONS
INTO
A
SINGLE
MATRIX
MAY
INITIALLY
CAUSE
CONFUSION
ON
CLOSER
EX
AMINATION
THIS
APPROACH
IS
A
GOOD
ONE
IF
WE
REGARD
THE
CAMERA
AS
AN
OBJECT
WITH
GEOMETRIC
PROPERTIES
THEN
TRANSFORMATIONS
THAT
ALTER
THE
POSITION
AND
ORIENTATION
OF
OBJECTS
SHOULD
ALSO
AFFECT
THE
POSITION
AND
ORIENTATION
OF
THE
CAMERA
RELATIVE
TO
THESE
OBJECTS
THE
NEXT
PROBLEM
IS
HOW
WE
SPECIFY
THE
DESIRED
POSITION
OF
THE
CAMERA
AND
THEN
IMPLEMENT
CAMERA
POSITIONING
IN
OPENGL
WE
OUTLINE
THREE
APPROACHES
ONE
IN
THIS
SECTION
AND
TWO
IN
SECTION
TWO
OTHERS
ARE
GIVEN
AS
EXERCISES
EXERCISES
AND
OUR
FIRST
APPROACH
IS
TO
SPECIFY
THE
POSITION
INDIRECTLY
BY
APPLYING
A
SEQUENCE
OF
ROTATIONS
AND
TRANSLATIONS
TO
THE
MODEL
VIEW
MATRIX
THIS
APPROACH
IS
A
DIRECT
APPLICATION
OF
THE
INSTANCE
TRANSFORMATION
THAT
WE
PRESENTED
IN
CHAPTER
BUT
WE
MUST
BE
CAREFUL
FOR
TWO
REASONS
FIRST
WE
USUALLY
WANT
TO
SPECIFY
THE
CAMERA
POSITION
AND
ORIENTATION
BEFORE
WE
POSITION
ANY
OBJECTS
IN
THE
SCENE
SECOND
THE
ORDER
OF
TRANSFORMATIONS
ON
THE
CAMERA
MAY
APPEAR
TO
BE
BACKWARD
FROM
WHAT
YOU
MIGHT
EXPECT
CONSIDER
AN
OBJECT
CENTERED
AT
THE
ORIGIN
THE
CAMERA
IS
IN
ITS
INITIAL
POSITION
ALSO
AT
THE
ORIGIN
POINTING
DOWN
THE
NEGATIVE
Z
AXIS
SUPPOSE
THAT
WE
WANT
AN
IMAGE
OF
THE
FACES
OF
THE
OBJECT
THAT
POINT
IN
THE
POSITIVE
Z
DIRECTION
WE
MUST
MOVE
THE
CAMERA
AWAY
FROM
THE
ORIGIN
IF
WE
ALLOW
THE
CAMERA
TO
REMAIN
POINTING
IN
THE
NEGATIVE
Z
DIRECTION
THEN
WE
WANT
TO
MOVE
THE
CAMERA
BACKWARD
ALONG
THE
POSITIVE
Z
AXIS
AND
THE
PROPER
TRANSFORMATION
IS
T
WHERE
D
IS
A
POSITIVE
NUMBER
MANY
PEOPLE
FIND
IT
HELPFUL
TO
INTERPRET
THIS
OPERATION
AS
MOVING
THE
CAMERA
FRAME
RELATIVE
TO
THE
OBJECT
FRAME
THIS
POINT
OF
VIEW
HAS
A
BASIS
IN
CLASSICAL
VIEWING
IN
COMPUTER
GRAPHICS
WE
USUALLY
THINK
OF
OBJECTS
AS
BEING
POSITIONED
IN
A
FIXED
FRAME
IN
AN
ANIMATION
WHERE
IN
THE
PROGRAM
WE
SPECIFY
THE
POSITION
OF
THE
CAMERA
DEPENDS
ON
WHETHER
WE
WISH
TO
ATTACH
THE
CAMERA
TO
A
PARTICULAR
OBJECT
OR
TO
PLACE
THE
CAMERA
IN
A
FIXED
POSITION
IN
THE
SCENE
SEE
EXERCISE
AND
IT
IS
THE
VIEWER
WHO
MUST
MOVE
TO
THE
RIGHT
POSITION
TO
ACHIEVE
THE
DESIRED
VIEW
IN
CLASSICAL
VIEWING
THE
VIEWER
DOMINATES
CONCEPTUALLY
WE
DO
VIEWING
BY
PICKING
UP
THE
OBJECT
ORIENTING
IT
AS
DESIRED
AND
BRINGING
IT
TO
THE
DESIRED
LOCATION
ONE
CON
SEQUENCE
OF
THE
CLASSICAL
APPROACH
IS
THAT
DISTANCES
ARE
MEASURED
FROM
THE
VIEWER
TO
THE
OBJECT
RATHER
THAN
AS
IN
MOST
PHYSICALLY
BASED
SYSTEMS
FROM
THE
OBJECT
TO
THE
VIEWER
CLASSICAL
VIEWING
OFTEN
RESULTED
IN
A
LEFT
HANDED
CAMERA
FRAME
EARLY
GRAPHICS
SYSTEMS
FOLLOWED
THE
CLASSICAL
APPROACH
BY
HAVING
MODELING
IN
RIGHT
HANDED
COORDI
Y
NATES
AND
VIEWING
IN
LEFT
HANDED
COORDINATES
A
DECISION
THAT
ALTHOUGH
TECHNICALLY
CORRECT
CAUSED
CONFUSION
AMONG
USERS
WHEN
WE
ARE
WORKING
IN
CAMERA
COORDINATES
WE
WILL
MEASURE
DISTANCES
FROM
THE
CAMERA
WHICH
IS
CONSISTENT
WITH
CLASSICAL
VIEWING
IN
OPENGL
THE
INTERNAL
FRAMES
ARE
RIGHT
HANDED
FORTUNATELY
BECAUSE
THE
APPLICA
TION
PROGRAM
WORKS
PRIMARILY
IN
OBJECT
COORDINATES
THE
APPLICATION
PROGRAMMER
USUALLY
DOES
NOT
SEE
ANY
OF
THE
INTERNAL
REPRESENTATIONS
AND
THUS
DOES
NOT
HAVE
TO
WORRY
ABOUT
THESE
ALTERNATE
PERSPECTIVES
ON
VIEWING
SUPPOSE
THAT
WE
WANT
TO
LOOK
AT
THE
SAME
OBJECT
FROM
THE
POSITIVE
X
AXIS
NOW
NOT
ONLY
DO
WE
HAVE
TO
MOVE
AWAY
FROM
THE
OBJECT
BUT
WE
ALSO
HAVE
TO
ROTATE
THE
Z
CAMERA
ABOUT
THE
Y
AXIS
AS
SHOWN
IN
FIGURE
WE
MUST
DO
THE
TRANSLATION
AFTER
WE
ROTATE
THE
CAMERA
BY
DEGREES
ABOUT
THE
Y
AXIS
IN
THE
PROGRAM
THE
CALLS
MUST
BE
IN
THE
REVERSE
ORDER
AS
WE
DISCUSSED
IN
SECTION
SO
WE
EXPECT
TO
SEE
CODE
LIKE
THE
FOLLOWING
TRANSLATE
D
ROTATEX
IN
TERMS
OF
THE
TWO
FRAMES
FIRST
WE
ROTATE
THE
OBJECT
FRAME
RELATIVE
TO
THE
CAMERA
FRAME
AND
THEN
WE
MOVE
THE
TWO
FRAMES
APART
IN
CHAPTERS
AND
WE
WERE
ABLE
TO
SHOW
SIMPLE
THREE
DIMENSIONAL
EXAMPLES
BY
USING
AN
IDENTITY
MATRIX
AS
THE
DEFAULT
PROJECTION
MATRIX
THAT
DEFAULT
SETTING
HAS
THE
EFFECT
OF
CREATING
AN
ORTHOGRAPHIC
PROJECTION
WITH
THE
CAMERA
AT
THE
ORIGIN
POINTED
IN
THE
NEGATIVE
Z
DIRECTION
IN
OUR
CUBE
EXAMPLE
IN
CHAPTER
WE
ROTATED
THE
CUBE
TO
SEE
THE
DESIRED
FACES
AS
WE
JUST
DISCUSSED
ROTATING
THE
CUBE
IS
EQUIVALENT
TO
ROTATING
THE
FRAME
OF
THE
CUBE
WITH
RESPECT
TO
THE
FRAME
OF
THE
CAMERA
WE
COULD
HAVE
ACHIEVED
THE
SAME
VIEW
BY
ROTATING
THE
CAMERA
RELATIVE
TO
THE
CUBE
WE
CAN
EXTEND
THIS
STRATEGY
OF
TRANSLATING
AND
ROTATING
THE
CAMERA
TO
CREATE
OTHER
ORTHOGRAPHIC
VIEWS
PERSPECTIVE
VIEWS
REQUIRE
CHANGES
TO
THE
DEFAULT
PROJECTION
CONSIDER
CREATING
AN
ISOMETRIC
VIEW
OF
THE
CUBE
SUPPOSE
THAT
AGAIN
WE
START
WITH
A
CUBE
CENTERED
AT
THE
ORIGIN
AND
ALIGNED
WITH
THE
AXES
BECAUSE
THE
DEFAULT
CAMERA
IS
IN
THE
MIDDLE
OF
THE
CUBE
WE
WANT
TO
MOVE
THE
CAMERA
AWAY
FROM
THE
CUBE
BY
A
TRANSLATION
WE
OBTAIN
AN
ISOMETRIC
VIEW
WHEN
THE
CAMERA
IS
LOCATED
SYMMETRICALLY
WITH
RESPECT
TO
THREE
ADJACENT
FACES
OF
THE
CUBE
FOR
EXAMPLE
ANYWHERE
ALONG
THE
LINE
FROM
THE
ORIGIN
THROUGH
THE
POINT
WE
CAN
MOVE
THE
CUBE
AWAY
FROM
THE
CAMERA
AND
THEN
ROTATE
THE
CUBE
TO
ACHIEVE
THE
DESIRED
VIEW
OR
EQUIVALENTLY
MOVE
THE
CAMERA
AWAY
FROM
THE
CUBE
AND
THEN
ROTATE
IT
TO
POINT
AT
THE
CUBE
STARTING
WITH
THE
DEFAULT
CAMERA
SUPPOSE
THAT
WE
ARE
NOW
LOOKING
AT
THE
CUBE
FROM
SOMEWHERE
ON
THE
POSITIVE
Z
AXIS
WE
CAN
OBTAIN
ONE
OF
THE
EIGHT
ISOMETRIC
FIGURE
POSITIONING
OF
THE
CAMERA
Y
Y
X
Z
A
B
FIGURE
CUBE
AFTER
ROTATION
ABOUT
X
AXIS
A
VIEW
FROM
POSITIVE
Z
AXIS
B
VIEW
FROM
POSITIVE
Y
AXIS
VIEWS
THERE
IS
ONE
FOR
EACH
VERTEX
BY
FIRST
ROTATING
THE
CUBE
ABOUT
THE
X
AXIS
UNTIL
WE
SEE
THE
TWO
FACES
SYMMETRICALLY
AS
SHOWN
IN
FIGURE
A
CLEARLY
WE
OBTAIN
THIS
VIEW
BY
ROTATING
THE
CUBE
BY
DEGREES
THE
SECOND
ROTATION
IS
ABOUT
THE
Y
AXIS
WE
ROTATE
THE
CUBE
UNTIL
WE
GET
THE
DESIRED
ISOMETRIC
THE
REQUIRED
ANGLE
OF
ROTATION
IS
DEGREES
ABOUT
THE
Y
AXIS
THIS
SECOND
ANGLE
OF
ROTATION
MAY
NOT
SEEM
OBVIOUS
CONSIDER
WHAT
HAPPENS
TO
THE
CUBE
AFTER
THE
FIRST
ROTATION
FROM
OUR
POSITION
ON
THE
POSITIVE
Z
AXIS
THE
CUBE
APPEARS
AS
SHOWN
IN
FIG
URE
A
THE
ORIGINAL
CORNER
VERTEX
AT
HAS
BEEN
TRANSFORMED
TO
IF
WE
LOOK
AT
THE
CUBE
FROM
THE
X
AXIS
AS
IN
FIGURE
B
WE
SEE
THAT
WE
WANT
TO
ROTATE
THE
RIGHT
VE
RTEX
TO
THE
Y
AXIS
THE
RIGHT
TRIANGLE
THAT
DETERMINES
THIS
ANGLE
HAS
SIDES
OF
AND
WHICH
CORRESPOND
TO
AN
ANGLE
OF
DEGREES
HOWEVER
WE
NEED
A
CLOCKWISE
ROTATION
SO
THE
ANGLE
MUST
BE
NEGATIVE
FINALLY
WE
MOVE
THE
CAMERA
AWAY
FROM
THE
ORIGIN
THUS
OUR
STRATEGY
IS
FIRST
TO
ROTATE
THE
FRAME
OF
THE
CAMERA
RELATIVE
TO
THE
FRAME
OF
THE
OBJECT
AND
THEN
TO
SEPARATE
THE
TWO
FRAMES
THE
MODEL
VIEW
MATRIX
IS
OF
THE
FORM
M
TRXRY
WE
OBTAIN
THIS
MODEL
VIEW
MATRIX
FOR
AN
ISOMETRIC
BY
MULTIPLYING
THE
MATRICES
IN
HOMOGENEOUS
COORDINATES
THE
CONCATENATION
OF
THE
ROTATION
MATRICES
YIELDS
R
R
R
IT
IS
SI
MPLE
TO
VERIFY
THAT
THE
ORIGINAL
VERTEX
IS
CORRECTLY
TRANSFORMED
TO
BY
THIS
MATRIX
IF
WE
CONCATENATE
IN
THE
TRANSLATION
BY
D
THE
MATRIX
BECOMES
TR
D
IN
OPENGL
THE
CODE
FOR
SETTING
THE
MODEL
VIEW
MATRIX
IS
AS
FOLLOWS
TRANSLATE
D
ROTATEX
ROTATEY
WE
HAVE
GONE
FROM
A
REPRESENTATION
OF
OUR
OBJECTS
IN
OBJECT
COORDINATES
TO
ONE
IN
CAMERA
COORDINATES
ROTATION
AND
TRANSLATION
DO
NOT
AFFECT
THE
SIZE
OF
AN
OBJECT
NOR
EQUIVALENTLY
THE
SIZE
OF
ITS
ORTHOGRAPHIC
PROJECTION
HOWEVER
THESE
TRANSFORMA
TIONS
CAN
AFFECT
WHETHER
OR
NOT
OBJECTS
ARE
CLIPPED
BECAUSE
THE
CLIPPING
VOLUME
IS
MEASURED
RELATIVE
TO
THE
CAMERA
IF
FOR
EXAMPLE
WE
TRANSLATE
THE
OBJECT
AWAY
FROM
THE
CAMERA
IT
MAY
NO
LONGER
LIE
WITHIN
THE
CLIPPING
VOLUME
HENCE
EVEN
THOUGH
THE
PROJECTION
OF
THE
OBJECT
IS
UNCHANGED
AND
THE
CAMERA
STILL
POINTS
AT
IT
THE
OBJECT
WOULD
NOT
BE
IN
THE
IMAGE
TWO
VIEWING
APIS
THE
CONSTRUCTION
OF
THE
MODEL
VIEW
MATRIX
FOR
AN
ISOMETRIC
VIEW
IS
A
LITTLE
UNSATIS
FYING
ALTHOUGH
THE
APPROACH
WAS
INTUITIVE
AN
INTERFACE
THAT
REQUIRES
US
TO
COMPUTE
THE
INDIVIDUAL
ANGLES
BEFORE
SPECIFYING
THE
TRANSFORMATIONS
IS
A
POOR
ONE
FOR
AN
AP
PLICATION
PROGRAM
WE
CAN
TAKE
A
DIFFERENT
APPROACH
TO
POSITIONING
THE
CAMERA
AN
APPROACH
THAT
IS
SIMILAR
TO
THAT
USED
BY
PHIGS
ONE
OF
THE
ORIGINAL
STANDARD
APIS
FOR
THREE
DIMENSIONAL
GRAPHICS
OUR
STARTING
POINT
IS
AGAIN
THE
OBJECT
FRAME
WE
DESCRIBE
THE
CAMERA
POSITION
AND
ORIENTATION
IN
THIS
FRAME
THE
PRECISE
TYPE
OF
IMAGE
THAT
WE
WISH
TO
OBTAIN
PERSPECTIVE
OR
PARALLEL
IS
DETERMINED
SEPARATELY
BY
THE
SPECIFI
CATION
OF
THE
PROJECTION
MATRIX
THIS
SECOND
PART
OF
THE
VIEWING
PROCESS
IS
OFTEN
CALLED
THE
NORMALIZATION
TRANSFORMATION
WE
APPROACH
THIS
PROBLEM
AS
ONE
OF
A
CHANGE
IN
FRAMES
AGAIN
WE
THINK
OF
THE
CAMERA
AS
POSITIONED
INITIALLY
AT
THE
ORIGIN
POINTED
IN
THE
NEGATIVE
Z
DIRECTION
ITS
DESIRED
LOCATION
IS
CENTERED
AT
A
POINT
CALLED
THE
VIEW
VRP
N
VUP
V
U
REFERENCE
POINT
VRP
FIGURE
WHOSE
POSITION
IS
GIVEN
IN
THE
OBJECT
FRAME
THE
USER
EXECUTES
A
FUNCTION
SUCH
AS
X
Y
Z
TO
SPECIFY
THIS
POSITION
NEXT
WE
WANT
TO
SPECIFY
THE
ORIENTATION
OF
THE
CAMERA
WE
CAN
DIVIDE
THIS
SPECIFICATION
INTO
TWO
PARTS
SPECIFICATION
OF
THE
VIEW
PLANE
NORMAL
VPN
AND
SPECIFICATION
OF
THE
VIEW
UP
VECTOR
VUP
THE
VPN
N
IN
FIGURE
GIVES
THE
ORIENTATION
OF
THE
PROJECTION
PLANE
OR
BACK
OF
THE
CAMERA
THE
ORIENTATION
FIGURE
CAMERA
FRAME
OF
A
PLANE
IS
DETERMINED
BY
THAT
PLANE
NORMAL
AND
THUS
PART
OF
THE
API
IS
A
FUNCTION
SUCH
AS
NX
NY
NZ
THE
ORIENTATION
OF
THE
PLANE
DOES
NOT
SPECIFY
WHAT
DIRECTION
IS
UP
FROM
THE
CAMERA
PERSPECTIVE
GIVEN
ONLY
THE
VPN
WE
CAN
ROTATE
THE
CAMERA
WITH
ITS
BACK
IN
THIS
PLANE
THE
SPECIFICATION
OF
THE
VUP
FIXES
THE
CAMERA
AND
IS
PERFORMED
BY
A
FUNCTION
SUCH
AS
FIGURE
DETERMINATION
OF
THE
VIEW
UP
VECTOR
WE
PROJECT
THE
VUP
VECTOR
ON
THE
VIEW
PLANE
TO
OBTAIN
THE
UP
DIRECTION
VECTOR
V
FIGURE
USE
OF
THE
PROJECTION
ALLOWS
THE
USER
TO
SPECIFY
ANY
VECTOR
NOT
PARALLEL
TO
V
RATHER
THAN
BEING
FORCED
TO
COMPUTE
A
VECTOR
LYING
IN
THE
PROJECTION
PLANE
THE
VECTOR
V
IS
ORTHOGONAL
TO
N
WE
CAN
USE
THE
CROSS
PRODUCT
TO
OBTAIN
A
THIRD
ORTHOGONAL
DIRECTION
U
THIS
NEW
ORTHOGONAL
COORDINATE
SYSTEM
USUALLY
IS
REFERRED
TO
AS
EITHER
THE
VIEWING
COORDINATE
SYSTEM
OR
THE
U
V
N
SYSTEM
WITH
THE
ADDITION
OF
THE
VRP
WE
HAVE
THE
DESIRED
CAMERA
FRAME
THE
MATRIX
THAT
DOES
THE
CHANGE
OF
FRAMES
IS
THE
VIEW
ORIENTATION
MATRIX
AND
IS
EQUIVALENT
TO
THE
VIEWING
COMPONENT
OF
THE
MODEL
VIEW
MATRIX
WE
CAN
DERIVE
THIS
MATRIX
USING
ROTATIONS
AND
TRANSLATIONS
IN
HOMOGENEOUS
COORDINATES
WE
START
WITH
THE
SPECIFICATIONS
OF
THE
VIEW
REFERENCE
POINT
X
P
Z
THE
VIEW
PLANE
NORMAL
NX
NY
Z
AND
THE
VIEW
UP
VECTOR
VUPX
V
UP
VUP
WE
CONSTRUCT
A
NEW
FRAME
WITH
THE
VIEW
REFERENCE
POINT
AS
ITS
ORIGIN
THE
VIEW
PLANE
NORMAL
AS
ONE
COORDINATE
DIRECTION
AND
TWO
OTHER
ORTHOGONAL
DIRECTIONS
THAT
WE
CALL
U
AND
V
OUR
DEFAULT
IS
THAT
THE
ORIGINAL
X
Y
Z
AXES
BECOME
U
V
N
RE
SPECTIVELY
THE
VIEW
REFERENCE
POINT
CAN
BE
HANDLED
THROUGH
A
SIMPLE
TRANSLATION
T
X
Y
Z
FROM
THE
VIEWING
FRAME
TO
THE
ORIGINAL
ORIGIN
THE
REST
OF
THE
MODEL
VIEW
MATRIX
IS
DETERMINED
BY
A
ROTATION
SO
THAT
THE
MODEL
VIEW
MATRIX
V
IS
OF
THE
FORM
V
TR
THE
DIRECTION
V
MUST
BE
ORTHOGONAL
TO
N
HENCE
N
V
FIGURE
SHOWS
THAT
V
IS
THE
PROJECTION
OF
VUP
INTO
THE
PLANE
FORMED
BY
N
AND
VUP
AND
THUS
MUST
BE
A
LINEAR
COMBINATION
OF
THESE
TWO
VECTORS
V
ΑN
ΒVUP
IF
WE
TEMPORARILY
IGNORE
THE
LENGTH
OF
THE
VECTORS
THEN
WE
CAN
SET
Β
AND
SOLVE
FOR
VUP
N
Α
N
N
AND
V
VUP
VUP
N
N
N
N
WE
CAN
FIND
THE
THIRD
ORTHOGONAL
DIRECTION
BY
TAKING
THE
CROSS
PRODUCT
U
V
N
THESE
VECTORS
DO
NOT
GENERALLY
HAVE
UNIT
LENGTH
WE
CAN
NORMALIZE
EACH
INDEPEN
DENTLY
OBTAINING
THREE
UNIT
LENGTH
VECTORS
UT
VT
AND
NT
THE
MATRIX
UXT
VXT
NTX
A
UYT
UZT
VYT
VZT
NTY
NTZ
IS
A
ROTATION
MATRIX
THAT
ORIENTS
A
VECTOR
IN
THE
UTVTNT
SYSTEM
WITH
RESPECT
TO
THE
ORIGINAL
SYSTEM
HOWEVER
WE
REALLY
WANT
TO
GO
IN
THE
OPPOSITE
DIRECTION
TO
OBTAIN
THE
REPRESENTATION
OF
VECTORS
IN
THE
ORIGINAL
SYSTEM
IN
THE
UTVTNT
SYSTEM
WE
WANT
A
BUT
BECAUSE
A
IS
A
ROTATION
MATRIX
THE
DESIRED
MATRIX
R
IS
R
A
AT
FINALLY
MULTIPLYING
BY
THE
TRANSLATION
MATRIX
T
WE
HAVE
UXT
VXT
V
RT
NT
UYT
VYT
NT
UZT
VZT
NT
XUXT
YUYT
ZUZT
XVXT
YVYT
ZVZT
XNT
YNT
ZNT
NOTE
THAT
IN
THIS
CASE
THE
TRANSLATION
MATRIX
IS
ON
THE
RIGHT
WHEREAS
IN
OUR
FIRST
DERIVATION
IT
WAS
ON
THE
LEFT
ONE
WAY
TO
INTERPRET
THIS
DIFFERENCE
IS
THAT
IN
OUR
FIRST
DERIVATION
WE
FIRST
ROTATED
ONE
OF
THE
FRAMES
AND
THEN
PUSHED
THE
FRAMES
APART
IN
A
DIRECTION
REPRESENTED
IN
THE
CAMERA
FRAME
IN
THE
SECOND
DERIVATION
THE
CAMERA
POSITION
WAS
SPECIFIED
IN
THE
OBJECT
FRAME
ANOTHER
WAY
TO
UNDERSTAND
THIS
DIFFERENCE
IS
TO
NOTE
THAT
THE
MATRICES
RT
AND
TR
HAVE
SIMILAR
FORMS
THE
ROTATION
PARTS
OF
THE
PRODUCT
THE
UPPER
LEFT
SUBMATRICES
ARE
IDENTICAL
AS
ARE
THE
BOTTOM
ROWS
THE
TOP
THREE
ELEMENTS
IN
THE
RIGHT
COLUMN
DIFFER
BECAUSE
THE
FRAME
OF
THE
ROTATION
AFFECTS
THE
TRANSLATION
COEFFICIENTS
IN
RT
AND
DOES
NOT
AFFECT
THEM
IN
TR
FOR
OUR
ISOMETRIC
EXAMPLE
N
VUP
THE
CAMERA
POSITION
MUST
BE
ALONG
A
DIAGONAL
IN
THE
ORIGINAL
FRAME
IF
WE
USE
D
P
D
WE
OBTAIN
THE
SAME
MODEL
VIEW
MATRIX
THAT
WE
DERIVED
IN
SECTION
THE
LOOK
AT
FUNCTION
THE
USE
OF
THE
VRP
VPN
AND
VUP
IS
BUT
ONE
WAY
TO
PROVIDE
AN
API
FOR
SPECIFYING
THE
POSITION
OF
A
CAMERA
IN
MANY
SITUATIONS
A
MORE
DIRECT
METHOD
IS
APPROPRIATE
CONSIDER
THE
SITUATION
ILLUSTRATED
IN
FIGURE
HERE
A
CAMERA
IS
LOCATED
AT
A
POINT
E
CALLED
THE
EYE
POINT
SPECIFIED
IN
THE
OBJECT
FRAME
AND
IT
IS
POINTED
AT
A
SECOND
POINT
A
CALLED
THE
AT
POINT
THESE
POINTS
DETERMINE
A
VPN
AND
A
VRP
THE
VPN
IS
GIVEN
BY
UPX
UPY
UPZ
Y
ATX
ATY
ATZ
X
Z
EYEX
EYEY
EYEZ
FIGURE
LOOK
AT
POSITIONING
THE
VECTOR
FORMED
BY
POINT
SUBTRACTION
BETWEEN
THE
EYEPOINT
AND
THE
AT
POINT
VPN
A
E
AND
NORMALIZING
IT
N
VPN
VPN
THE
VIEW
REFERENCE
POINT
IS
THE
EYE
POINT
HENCE
WE
NEED
ONLY
TO
ADD
THE
DESIRED
UP
DIRECTION
FOR
THE
CAMERA
AND
A
FUNCTION
TO
CONSTRUCT
THE
DESIRED
MATRIX
LOOKAT
COULD
BE
OF
THE
LOOKAT
EYE
AT
UP
OR
THE
EQUIVALENT
FORM
LOOKAT
GLFLOAT
EYEX
GLFLOAT
EYEY
GLFLOAT
EYEZ
GLFLOAT
ATX
GLFLOAT
ATY
GLFLOAT
ATZ
GLFLOAT
UPX
GLFLOAT
UPY
GLFLOAT
UPZ
NOTE
THAT
ONCE
WE
HAVE
COMPUTED
THE
VECTOR
VPN
WE
CAN
PROCEED
AS
WE
DID
WITH
FORMING
THE
TRANSFORMATION
IN
THE
PREVIOUS
SECTION
A
SLIGHTLY
SIMPLER
COMPUTATION
WOULD
BE
TO
FORM
A
VECTOR
PERPENDICULAR
TO
N
AND
VUP
BY
TAKING
THEIR
CROSS
PRODUCT
AND
NORMALIZING
IT
U
VUP
N
VUP
N
BECAUSE
WE
ARE
WORKING
IN
HOMOGENEOUS
COORDINATES
VUP
CAN
BE
A
TYPE
IF
THE
FOURTH
COMPONENT
IS
A
ZERO
Y
Y
Y
X
X
X
Z
Z
Z
ROLL
PITCH
YAW
FIGURE
ROLL
PITCH
AND
YAW
FINALLY
WE
GET
THE
NORMALIZED
PROJECTION
OF
THE
UP
VECTOR
ONTO
THE
CAMERA
PLANE
BY
TAKING
A
SECOND
CROSS
PRODUCT
V
N
U
N
U
NOTE
THAT
WE
CAN
USE
THE
STANDARD
ROTATIONS
TRANSLATIONS
AND
SCALINGS
AS
PART
OF
DEFINING
OUR
OBJECTS
ALTHOUGH
THESE
TRANSFORMATIONS
WILL
ALSO
ALTER
THE
MODEL
VIEW
MATRIX
IT
IS
OFTEN
HELPFUL
CONCEPTUALLY
TO
CONSIDER
THE
USE
OF
LOOKAT
AS
POSITIONING
THE
OBJECTS
AND
SUBSEQUENT
OPERATIONS
THAT
AFFECT
THE
MODEL
VIEW
MATRIX
AS
POSITION
ING
THE
CAMERA
NOTE
THAT
WHEREAS
FUNCTIONS
SUCH
AS
LOOKAT
THAT
POSITION
THE
CAMERA
ALTER
THE
MODEL
VIEW
MATRIX
AND
ARE
SPECIFIED
IN
OBJECT
COORDINATES
THE
FUNCTIONS
THAT
WE
INTRODUCE
TO
FORM
THE
PROJECTION
MATRIX
WILL
BE
SPECIFIED
IN
EYE
COORDINATES
FIGURE
ELEVATION
AND
AZIMUTH
OTHER
VIEWING
APIS
IN
MANY
APPLICATIONS
NEITHER
OF
THE
VIEWING
INTERFACES
THAT
WE
HAVE
PRESENTED
IS
APPROPRIATE
CONSIDER
A
FLIGHT
SIMULATION
APPLICATION
THE
PILOT
USING
THE
SIMULATOR
USUALLY
USES
THREE
ANGLES
ROLL
PITCH
AND
YAW
TO
SPECIFY
HER
ORIENTATION
THESE
ANGLES
ARE
SPECIFIED
RELATIVE
TO
THE
CENTER
OF
MASS
OF
THE
VEHICLE
AND
TO
A
COORDINATE
SYSTEM
ALIGNED
ALONG
THE
AXES
OF
THE
VEHICLE
AS
SHOWN
IN
FIGURE
HENCE
THE
PILOT
SEES
AN
OBJECT
IN
TERMS
OF
THE
THREE
ANGLES
AND
OF
THE
DISTANCE
FROM
THE
OBJECT
TO
THE
CENTER
OF
MASS
OF
HER
VEHICLE
A
VIEWING
TRANSFORMATION
CAN
BE
CONSTRUCTED
EXERCISE
FROM
THESE
SPECIFICATIONS
FROM
A
TRANSLATION
AND
THREE
SIMPLE
ROTATIONS
VIEWING
IN
MANY
APPLICATIONS
IS
MOST
NATURALLY
SPECIFIED
IN
POLAR
RATHER
THAN
RECTILINEAR
COORDINATES
APPLICATIONS
INVOLVING
OBJECTS
THAT
ROTATE
ABOUT
OTHER
OB
JECTS
FIT
THIS
CATEGORY
FOR
EXAMPLE
CONSIDER
THE
SPECIFICATION
OF
A
STAR
IN
THE
SKY
ITS
DIRECTION
FROM
A
VIEWER
IS
GIVEN
BY
ITS
ELEVATION
AND
AZIMUTH
FIGURE
THE
ELEVA
TION
IS
THE
ANGLE
ABOVE
THE
PLANE
OF
THE
VIEWER
AT
WHICH
THE
STAR
APPEARS
BY
DEFINING
A
NORMAL
AT
THE
POINT
THAT
THE
VIEWER
IS
LOCATED
AND
USING
THIS
NORMAL
TO
DEFINE
A
PLANE
WE
DEFINE
THE
ELEVATION
REGARDLESS
OF
WHETHER
OR
NOT
THE
VIEWER
IS
ACTUALLY
STANDING
ON
A
PLANE
WE
CAN
FORM
TWO
OTHER
AXES
IN
THIS
PLANE
CREATING
A
VIEWING
COORDINATE
SYSTEM
THE
AZIMUTH
IS
THE
ANGLE
MEASURED
FROM
AN
AXIS
IN
THIS
PLANE
TO
THE
PROJEC
TION
ONTO
THE
PLANE
OF
THE
LINE
BETWEEN
THE
VIEWER
AND
THE
STAR
THE
CAMERA
CAN
STILL
BE
ROTATED
ABOUT
THE
DIRECTION
IT
IS
POINTED
BY
A
TWIST
ANGLE
PARALLEL
PROJECTIONS
A
PARALLEL
PROJECTION
IS
THE
LIMIT
OF
A
PERSPECTIVE
PROJECTION
IN
WHICH
THE
CENTER
OF
PROJECTION
IS
INFINITELY
FAR
FROM
THE
OBJECTS
BEING
VIEWED
RESULTING
IN
PROJECTORS
THAT
ARE
PARALLEL
RATHER
THAN
CONVERGING
AT
THE
CENTER
OF
PROJECTION
EQUIVALENTLY
A
PARALLEL
PROJECTION
IS
WHAT
WE
WOULD
GET
IF
WE
HAD
A
TELEPHOTO
LENS
WITH
AN
INFINITE
FOCAL
LENGTH
RATHER
THAN
FIRST
DERIVING
THE
EQUATIONS
FOR
A
PERSPECTIVE
PROJECTION
AND
COMPUTING
THEIR
LIMITING
BEHAVIOR
WE
WILL
DERIVE
THE
EQUATIONS
FOR
PARALLEL
PROJECTIONS
DIRECTLY
USING
THE
FACT
THAT
WE
KNOW
IN
ADVANCE
THAT
THE
PROJECTORS
ARE
PARALLEL
AND
POINT
IN
A
Y
DIRECTION
OF
PROJECTION
ORTHOGONAL
PROJECTIONS
ORTHOGONAL
OR
ORTHOGRAPHIC
PROJECTIONS
ARE
A
SPECIAL
CASE
OF
PARALLEL
PROJECTIONS
IN
WHICH
THE
PROJECTORS
ARE
PERPENDICULAR
TO
THE
VIEW
PLANE
IN
TERMS
OF
A
CAMERA
ORTHOGONAL
PROJECTIONS
CORRESPOND
TO
A
CAMERA
WITH
A
BACK
PLANE
PARALLEL
TO
THE
LENS
Z
X
Y
Z
X
WHICH
HAS
AN
INFINITE
FOCAL
LENGTH
FIGURE
SHOWS
AN
ORTHOGONAL
PROJECTION
WITH
THE
PROJECTION
PLANE
Z
AS
POINTS
ARE
PROJECTED
INTO
THIS
PLANE
THEY
RETAIN
THEIR
X
AND
Y
VALUES
AND
THE
EQUATIONS
OF
PROJECTION
ARE
XP
X
YP
Y
ZP
WE
CAN
WRITE
THIS
RESULT
USING
OUR
ORIGINAL
HOMOGENEOUS
COORDINATES
FIGURE
ORTHOGONAL
PROJECTION
XP
X
ZP
Z
TO
PREPARE
OURSELVES
FOR
A
MORE
GENERAL
ORTHOGONAL
PROJECTION
WE
CAN
WRITE
THIS
EXPRESSION
AS
Q
MIP
WHERE
X
Z
I
IDENTITY
MATRIX
AND
M
THE
PROJECTION
DESCRIBED
BY
M
IS
CARRIED
OUT
BY
THE
HARDWARE
AFTER
THE
VERTEX
SHADER
HENCE
ONLY
THOSE
OBJECTS
INSIDE
THE
CUBE
OF
SIDE
LENGTH
CENTERED
AT
THE
ORIGIN
WILL
BE
PROJECTED
AND
POSSIBLY
VISIBLE
IF
WE
WANT
TO
CHANGE
WHICH
OBJECTS
ARE
VISIBLE
WE
CAN
REPLACE
THE
IDENTITY
MATRIX
BY
A
TRANSFORMATION
N
THAT
WE
CAN
CARRY
OUT
EITHER
IN
THE
APPLICATION
OR
IN
THE
VERTEX
SHADER
WHICH
WILL
GIVE
US
CONTROL
OVER
THE
CLIPPING
VOLUME
FOR
EXAMPLE
IF
WE
REPLACE
I
WITH
A
SCALING
MATRIX
WE
CAN
SEE
MORE
OR
FEWER
OBJECTS
PARALLEL
VIEWING
WITH
OPENGL
WE
WILL
FOCUS
ON
A
SINGLE
ORTHOGONAL
VIEWING
FUNCTION
IN
WHICH
THE
VIEW
VOLUME
IS
A
RIGHT
PARALLELEPIPED
AS
SHOWN
IN
FIGURE
THE
SIDES
OF
THE
CLIPPING
VOLUME
ARE
THE
FOUR
PLANES
X
RIGHT
X
LEFT
Y
TOP
Y
BOTTOM
THE
NEAR
FRONT
CLIPPING
PLANE
IS
LOCATED
A
DISTANCE
NEAR
FROM
THE
ORIGIN
AND
THE
FAR
BACK
CLIPPING
PLANE
IS
AT
A
DISTANCE
FAR
FROM
THE
ORIGIN
ALL
THESE
VALUES
ARE
IN
CAMERA
COORDINATES
WE
WILL
DERIVE
A
FUNCTION
ORTHO
GLFLOAT
LEFT
GLFLOAT
RIGHT
GLFLOAT
BOTTOM
GLFLOAT
TOP
GLFLOAT
NEAR
GLFLOAT
FAR
WHICH
WILL
FORM
THE
PROJECTION
MATRIX
N
ALTHOUGH
MATHEMATICALLY
WE
GET
A
PARALLEL
VIEW
BY
MOVING
THE
CAMERA
TO
INFIN
ITY
BECAUSE
THE
PROJECTORS
ARE
PARALLEL
WE
CAN
SLIDE
THIS
CAMERA
IN
THE
DIRECTION
OF
PROJECTION
WITHOUT
CHANGING
THE
PROJECTION
CONSEQUENTLY
IT
IS
HELPFUL
TO
THINK
OF
AN
ORTHOGONAL
CAMERA
LOCATED
INITIALLY
AT
THE
ORIGIN
IN
CAMERA
COORDINATES
WITH
THE
VIEW
VOLUME
DETERMINED
BY
USERS
OF
MICROSOFT
WINDOWS
MAY
HAVE
TO
CHANGE
THE
IDENTIFIERS
NEAR
AND
FAR
BECAUSE
FAR
IS
A
RESERVED
WORD
IN
VISUAL
C
Y
RIGHT
TOP
FAR
Z
FAR
VIEW
VOLUME
Z
NEAR
X
LEFT
BOTTOM
NEAR
Z
FIGURE
ORTHOGRAPHIC
VIEWING
X
Y
Z
AS
THE
DEFAULT
BEHAVIOR
EQUIVALENTLY
WE
ARE
APPLYING
AN
IDENTITY
PROJECTION
MATRIX
FOR
N
WE
WILL
DERIVE
A
NONIDENTITY
MATRIX
N
USING
TRANSLATION
AND
SCALING
THAT
WILL
TRANSFORM
VERTICES
IN
CAMERA
COORDINATES
TO
FIT
INSIDE
THE
DEFAULT
VIEW
VOLUME
A
PROCESS
CALLED
PROJECTION
NORMALIZATION
THIS
MATRIX
IS
WHAT
WILL
BE
PRODUCED
BY
ORTHO
NOTE
THAT
WE
ARE
FORCED
TO
TAKE
THIS
APPROACH
BECAUSE
THE
FINAL
PROJECTION
CARRIED
OUT
BY
THE
GPU
IS
FIXED
NEVERTHELESS
THE
NORMALIZATION
PROCESS
IS
EFFICIENT
AND
WILL
ALLOW
US
TO
CARRY
OUT
PARALLEL
AND
PERSPECTIVE
PROJECTIONS
WITH
THE
SAME
PIPELINE
PROJECTION
NORMALIZATION
WHEN
WE
INTRODUCED
PROJECTION
IN
CHAPTER
AND
LOOKED
AT
CLASSICAL
PROJECTION
EARLIER
IN
THIS
CHAPTER
WE
VIEWED
IT
AS
A
TECHNIQUE
THAT
TOOK
THE
SPECIFICATION
OF
POINTS
IN
THREE
DIMENSIONS
AND
MAPPED
THEM
TO
POINTS
ON
A
TWO
DIMENSIONAL
PROJECTION
SURFACE
SUCH
A
TRANSFORMATION
IS
NOT
INVERTIBLE
BECAUSE
ALL
POINTS
ALONG
A
PROJECTOR
MAP
INTO
THE
SAME
POINT
ON
THE
PROJECTION
SURFACE
IN
COMPUTER
GRAPHICS
SYSTEMS
WE
ADOPT
A
SLIGHTLY
DIFFERENT
APPROACH
FIRST
WE
WORK
IN
FOUR
DIMENSIONS
USING
HOMOGENEOUS
COORDINATES
SECOND
WE
RETAIN
DEPTH
INFORMATION
DISTANCE
ALONG
A
PROJECTOR
AS
LONG
AS
POSSIBLE
SO
THAT
WE
CAN
DO
HIDDEN
SURFACE
REMOVAL
LATER
IN
THE
PIPELINE
THIRD
WE
USE
PROJECTION
NORMALIZATION
TO
CONVERT
ALL
PROJECTIONS
INTO
ORTHOGONAL
PROJECTIONS
BY
FIRST
DISTORTING
THE
OBJECTS
SUCH
THAT
THE
ORTHOGONAL
PROJECTION
OF
THE
DISTORTED
OBJECTS
IS
THE
SAME
AS
THE
DE
SIRED
PROJECTION
OF
THE
ORIGINAL
OBJECTS
THIS
TECHNIQUE
IS
SHOWN
IN
FIGURE
THE
CONCATENATION
OF
THE
NORMALIZATION
MATRIX
WHICH
CARRIES
OUT
THE
DISTORTION
AND
THE
A
B
FIGURE
PREDISTORTION
OF
OBJECTS
A
PERSPECTIVE
VIEW
B
ORTHO
GRAPHIC
PROJECTION
OF
DISTORTED
OBJECT
FIGURE
NORMALIZATION
TRANSFORMATION
SIMPLE
ORTHOGONAL
PROJECTION
MATRIX
FROM
SECTION
AS
SHOWN
IN
FIGURE
YIELDS
A
HOMOGENEOUS
COORDINATE
MATRIX
THAT
PRODUCES
THE
DESIRED
PROJECTION
ONE
ADVANTAGE
OF
THIS
APPROACH
IS
THAT
WE
CAN
DESIGN
THE
NORMALIZATION
MATRIX
SO
THAT
VIEW
VOLUME
IS
DISTORTED
INTO
THE
CANONICAL
VIEW
VOLUME
WHICH
IS
THE
CUBE
DEFINED
BY
THE
PLANES
X
Y
Z
BESIDES
THE
ADVANTAGE
OF
HAVING
BOTH
PERSPECTIVE
AND
PARALLEL
VIEWS
SUPPORTED
BY
THE
SAME
PIPELINE
BY
LOADING
IN
THE
PROPER
NORMALIZATION
MATRIX
THE
CANONICAL
VIEW
VOL
UME
SIMPLIFIES
THE
CLIPPING
PROCESS
BECAUSE
THE
SIDES
ARE
ALIGNED
WITH
THE
COORDINATE
AXES
THE
NORMALIZATION
PROCESS
DEFINES
WHAT
MOST
SYSTEMS
CALL
THE
PROJECTION
MATRIX
THE
PROJECTION
MATRIX
BRINGS
OBJECTS
INTO
FOUR
DIMENSIONAL
CLIP
COORDINATES
AND
THE
SUBSEQUENT
PERSPECTIVE
DIVISION
CONVERTS
VERTICES
TO
A
REPRESENTATION
IN
THREE
DIMENSIONAL
NORMALIZED
DEVICE
COORDINATES
VALUES
IN
NORMALIZED
DEVICE
COORDINATES
ARE
LATER
MAPPED
TO
WINDOW
COORDINATES
BY
THE
VIEWPORT
TRANSFORMATION
HERE
WE
ARE
CONCERNED
WITH
THE
FIRST
STEP
DERIVING
THE
PROJECTION
MATRIX
ORTHOGONAL
PROJECTION
MATRICES
ALTHOUGH
PARALLEL
VIEWING
IS
A
SPECIAL
CASE
OF
PERSPECTIVE
VIEWING
WE
START
WITH
OR
THOGONAL
PARALLEL
VIEWING
AND
LATER
EXTEND
THE
NORMALIZATION
TECHNIQUE
TO
PERSPECTIVE
VIEWING
IN
OPENGL
THE
DEFAULT
PROJECTION
MATRIX
IS
AN
IDENTITY
MATRIX
OR
EQUIVALENTLY
WHAT
WE
WOULD
GET
FROM
THE
FOLLOWING
CODE
N
ORTHO
THE
VIEW
VOLUME
IS
IN
FACT
THE
CANONICAL
VIEW
VOLUME
POINTS
WITHIN
THE
CUBE
DEFINED
BY
THE
SIDES
X
Y
AND
Z
ARE
MAPPED
TO
THE
SAME
CUBE
POINTS
OUTSIDE
THIS
CUBE
REMAIN
OUTSIDE
THE
CUBE
AS
TRIVIAL
AS
THIS
OBSERVATION
MAY
SEEM
IT
INDICATES
THAT
WE
CAN
GET
THE
DESIRED
PROJECTION
MATRIX
FOR
THE
GENERAL
ORTHOGONAL
VIEW
BY
FINDING
A
MATRIX
THAT
MAPS
THE
RIGHT
PARALLELEPIPED
SPECIFIED
BY
ORTHO
TO
THIS
SAME
CUBE
BEFORE
WE
DO
SO
RECALL
THAT
THE
LAST
TWO
PARAMETERS
IN
ORTHO
ARE
DISTANCES
TO
THE
NEAR
AND
FAR
PLANES
MEASURED
FROM
A
CAMERA
AT
THE
ORIGIN
POINTED
IN
THE
NEGATIVE
Z
DIRECTION
THUS
THE
NEAR
PLANE
IS
AT
Z
WHICH
IS
BEHIND
THE
CAMERA
AND
THE
FAR
PLANE
IS
AT
Z
WHICH
IS
IN
FRONT
OF
THE
CAMERA
ALTHOUGH
THE
PROJECTORS
ARE
PARALLEL
AND
AN
ORTHOGRAPHIC
PROJECTION
IS
CONCEPTUALLY
AKIN
TO
HAVING
A
CAMERA
WITH
A
LONG
TELEPHOTO
LENS
LOCATED
FAR
FROM
THE
OBJECTS
THE
IMPORTANCE
OF
THE
NEAR
AND
FAR
DISTANCES
IN
ORTHO
IS
THAT
THEY
DETERMINE
WHICH
OBJECTS
ARE
CLIPPED
OUT
NOW
SUPPOSE
THAT
INSTEAD
WE
SET
THE
ORTHO
PARAMETERS
BY
THE
FOLLOWING
FUNC
TION
CALL
N
ORTHO
LEFT
RIGHT
BOTTOM
TOP
NEAR
FAR
WE
NOW
HAVE
SPECIFIED
A
RIGHT
PARALLELEPIPED
VIEW
VOLUME
WHOSE
RIGHT
SIDE
RELATIVE
TO
THE
CAMERA
IS
THE
PLANE
X
LEFT
WHOSE
LEFT
SIDE
IS
THE
PLANE
X
RIGHT
WHOSE
TOP
IS
THE
PLANE
Y
TOP
AND
WHOSE
BOTTOM
IS
THE
PLANE
Y
BOTTOM
THE
FRONT
IS
THE
NEAR
CLIPPING
PLANE
Z
NEAR
AND
THE
BACK
IS
THE
FAR
CLIPPING
PLANE
Z
FAR
THE
PRO
JECTION
MATRIX
THAT
OPENGL
SETS
UP
IS
THE
MATRIX
THAT
TRANSFORMS
THIS
VOLUME
TO
THE
CUBE
CENTERED
AT
THE
ORIGIN
WITH
SIDES
OF
LENGTH
WHICH
IS
SHOWN
IN
FIGURE
THIS
MATRIX
CONVERTS
THE
VERTICES
THAT
SPECIFY
OUR
OBJECTS
TO
VERTICES
WITHIN
THIS
CANONICAL
VIEW
VOLUME
BY
SCALING
AND
TRANSLATING
THEM
CONSEQUENTLY
VERTICES
ARE
TRANSFORMED
SUCH
THAT
VERTICES
WITHIN
THE
SPECIFIED
VIEW
VOLUME
ARE
TRANSFORMED
TO
VERTICES
WITHIN
THE
CANONICAL
VIEW
VOLUME
AND
VERTICES
OUTSIDE
THE
SPECIFIED
VIEW
VOLUME
ARE
TRANS
FORMED
TO
VERTICES
OUTSIDE
THE
CANONICAL
VIEW
VOLUME
PUTTING
EVERYTHING
TOGETHER
WE
SEE
THAT
THE
PROJECTION
MATRIX
IS
DETERMINED
BY
THE
TYPE
OF
VIEW
AND
THE
VIEW
VOL
UME
SPECIFIED
IN
ORTHO
AND
THAT
THESE
SPECIFICATIONS
ARE
RELATIVE
TO
THE
CAMERA
THE
POSITIONING
AND
ORIENTATION
OF
THE
CAMERA
ARE
DETERMINED
BY
THE
MODEL
VIEW
MATRIX
THESE
TWO
MATRICES
ARE
CONCATENATED
TOGETHER
AND
OBJECTS
HAVE
THEIR
VERTICES
TRANS
FORMED
BY
THIS
MATRIX
PRODUCT
WE
CAN
USE
OUR
KNOWLEDGE
OF
AFFINE
TRANSFORMATIONS
TO
FIND
THIS
PROJECTION
MA
TRIX
THERE
ARE
TWO
TASKS
THAT
WE
NEED
TO
DO
FIRST
WE
MUST
MOVE
THE
CENTER
OF
THE
RIGHT
TOP
FAR
LEFT
BOTTOM
NEAR
FIGURE
MAPPING
A
VIEW
VOLUME
TO
THE
CANONICAL
VIEW
VOLUME
FIGURE
AFFINE
TRANSFORMATIONS
FOR
NORMALIZATION
SPECIFIED
VIEW
VOLUME
TO
THE
CENTER
OF
THE
CANONICAL
VIEW
VOLUME
THE
ORIGIN
BY
DO
ING
A
TRANSLATION
SECOND
WE
MUST
SCALE
THE
SIDES
OF
THE
SPECIFIED
VIEW
VOLUME
TO
EACH
HAVE
A
LENGTH
OF
SEE
FIGURE
HENCE
THE
TWO
TRANSFORMATIONS
ARE
T
T
RIGHT
LEFT
TOP
BOTTOM
FAR
NEAR
AND
RIGHT
LEFT
TOP
BOTTOM
NEAR
FAR
AND
THEY
CAN
BE
CONCATENATED
TOGETHER
FIGURE
TO
FORM
THE
PROJECTION
MATRIX
RIGHT
LEFT
LEFT
RIGHT
RIGHT
LEFT
TOP
BOTTOM
N
ST
TOP
BOTTOM
TOP
BOTTOM
THIS
MATRIX
MAPS
THE
NEAR
CLIPPING
PLANE
Z
NEAR
TO
THE
PLANE
Z
AND
THE
FAR
CLIPPING
PLANE
Z
FAR
TO
THE
PLANE
Z
BECAUSE
THE
CAMERA
IS
POINTING
IN
THE
NEGATIVE
Z
DIRECTION
THE
PROJECTORS
ARE
DIRECTED
FROM
INFINITY
ON
THE
NEGATIVE
Z
AXIS
TOWARD
THE
ORIGIN
OBLIQUE
PROJECTIONS
USING
ORTHO
WE
HAVE
ONLY
A
LIMITED
CLASS
OF
PARALLEL
PROJECTIONS
NAMELY
ONLY
THOSE
FOR
WHICH
THE
PROJECTORS
ARE
ORTHOGONAL
TO
THE
PROJECTION
PLANE
AS
WE
SAW
EARLIER
IN
Y
OBJECT
BACK
CLIPPING
PLANE
FRONT
CLIPPING
PLANE
DOP
PROJECTION
PLANE
X
Z
FIGURE
OBLIQUE
CLIPPING
VOLUME
THIS
CHAPTER
OBLIQUE
PARALLEL
PROJECTIONS
ARE
USEFUL
IN
MANY
FIELDS
WE
COULD
DEVELOP
AN
OBLIQUE
PROJECTION
MATRIX
DIRECTLY
INSTEAD
HOWEVER
WE
FOLLOW
THE
PROCESS
THAT
WE
USED
FOR
THE
GENERAL
ORTHOGONAL
PROJECTION
WE
CONVERT
THE
DESIRED
PROJECTION
TO
A
CANONICAL
ORTHOGONAL
PROJECTION
OF
DISTORTED
OBJECTS
AN
OBLIQUE
PROJECTION
CAN
BE
CHARACTERIZED
BY
THE
ANGLE
THAT
THE
PROJECTORS
MAKE
WITH
THE
PROJECTION
PLANE
AS
SHOWN
IN
FIGURE
IN
APIS
THAT
SUPPORT
GENERAL
PAR
ALLEL
VIEWING
THE
VIEW
VOLUME
FOR
AN
OBLIQUE
PROJECTION
HAS
THE
NEAR
AND
FAR
CLIPPING
PLANES
PARALLEL
TO
THE
VIEW
PLANE
AND
THE
RIGHT
LEFT
TOP
AND
BOTTOM
PLANES
PARALLEL
TO
THE
DIRECTION
OF
PROJECTION
AS
SHOWN
IN
FIGURE
WE
CAN
DERIVE
THE
EQUATIONS
FOR
OBLIQUE
PROJECTIONS
BY
CONSIDERING
THE
TOP
AND
SIDE
VIEWS
IN
FIGURE
WHICH
SHOWS
A
PROJECTOR
AND
THE
PROJECTION
PLANE
Z
THE
ANGLES
Θ
AND
Φ
CHARACTERIZE
THE
DEGREE
OF
OBLIQUENESS
IN
DRAFTING
PROJECTIONS
SUCH
AS
THE
CAVALIER
AND
CABINET
PRO
JECTIONS
ARE
DETERMINED
BY
SPECIFIC
VALUES
OF
THESE
ANGLES
HOWEVER
THESE
ANGLES
ARE
NOT
THE
ONLY
POSSIBLE
INTERFACE
SEE
EXERCISES
AND
IF
WE
CONSIDER
THE
TOP
VIEW
WE
CAN
FIND
XP
BY
NOTING
THAT
TAN
Θ
Z
XP
X
AND
THUS
XP
X
Z
COT
Θ
LIKEWISE
YP
Y
Z
COT
Φ
X
Z
FIGURE
OBLIQUE
PROJECTION
NOTE
THAT
WITHOUT
OBLIQUE
PROJECTIONS
WE
CANNOT
DRAW
COORDINATE
AXES
IN
THE
WAY
THAT
WE
HAVE
BEEN
DOING
IN
THIS
BOOK
SEE
EXERCISE
X
Z
Z
Y
X
Z
A
B
FIGURE
OBLIQUE
PROJECTION
A
TOP
VIEW
B
SIDE
VIEW
USING
THE
EQUATION
FOR
THE
PROJECTION
PLANE
ZP
WE
CAN
WRITE
THESE
RESULTS
IN
TERMS
OF
A
HOMOGENEOUS
COORDINATE
MATRIX
P
FOLLOWING
OUR
STRATEGY
OF
THE
PREVIOUS
EXAMPLE
WE
CAN
BREAK
P
INTO
THE
PRODUCT
P
MORTHH
Θ
Φ
WHERE
H
Θ
Φ
IS
A
SHEARING
MATRIX
THUS
WE
CAN
IMPLEMENT
AN
OBLIQUE
PROJECTION
BY
FIRST
DOING
A
SHEAR
OF
THE
OBJECTS
BY
H
Θ
Φ
AND
THEN
DOING
AN
ORTHOGRAPHIC
PROJECTION
FIGURE
SHOWS
THE
EFFECT
OF
H
Θ
Φ
ON
AN
OBJECT
A
CUBE
INSIDE
AN
OBLIQUE
VIEW
VOLUME
THE
SIDES
OF
THE
CLIPPING
VOLUME
BECOME
ORTHOGONAL
TO
THE
VIEW
PLANE
BUT
THE
SIDES
OF
THE
CUBE
BECOME
OBLIQUE
AS
THEY
ARE
AFFECTED
BY
THE
SAME
SHEAR
TRANSFORMATION
HOWEVER
THE
ORTHOGRAPHIC
PROJECTION
OF
THE
DISTORTED
CUBE
IS
IDENTICAL
TO
THE
OBLIQUE
PROJECTION
OF
THE
UNDISTORTED
CUBE
WE
ARE
NOT
FINISHED
BECAUSE
THE
VIEW
VOLUME
CREATED
BY
THE
SHEAR
IS
NOT
OUR
CANONICAL
VIEW
VOLUME
WE
HAVE
TO
APPLY
THE
SAME
SCALING
AND
TRANSLATION
MATRICES
THAT
WE
USED
IN
SECTION
HENCE
THE
TRANSFORMATION
Y
Z
FIGURE
EFFECT
OF
SHEAR
TRANSFORMATION
RIGHT
LEFT
RIGHT
LEFT
RIGHT
LEFT
TOP
BOTTOM
ST
TOP
BOTTOM
TOP
BOTTOM
MUST
BE
INSERTED
AFTER
THE
SHEAR
AND
BEFORE
THE
FINAL
ORTHOGRAPHIC
PROJECTION
SO
THE
FINAL
MATRIX
IS
N
MORTHSTH
THE
VALUES
OF
LEFT
RIGHT
BOTTOM
AND
TOP
ARE
THE
VERTICES
OF
THE
RIGHT
PARALLELEPIPED
VIEW
VOLUME
CREATED
BY
THE
SHEAR
THESE
VALUES
DEPEND
ON
HOW
THE
SIDES
OF
THE
ORIGINAL
VIEW
VOLUME
ARE
COMMUNICATED
THROUGH
THE
APPLICATION
PROGRAM
THEY
MAY
HAVE
TO
BE
DETERMINED
FROM
THE
RESULTS
OF
THE
SHEAR
TO
THE
CORNERS
OF
THE
ORIGINAL
VIEW
VOLUME
ONE
WAY
TO
DO
THIS
CALCULATION
IS
SHOWN
IN
FIGURE
THE
SPECIFICATION
FOR
AN
OBLIQUE
PROJECTION
CAN
BE
THROUGH
THE
ANGLES
Θ
AND
Ψ
THAT
PROJECTORS
MAKE
WITH
THE
PROJECTION
PLANE
THE
PARAMETERS
NEAR
AND
FAR
ARE
NOT
CHANGED
BY
THE
SHEAR
HOWEVER
THE
X
AND
Y
VALUES
OF
WHERE
THE
SIDES
OF
THE
VIEW
VOLUME
INTERSECT
THE
NEAR
PLANE
ARE
CHANGED
BY
THE
SHEAR
AND
BECOME
LEFT
RIGHT
TOP
AND
BOTTOM
IF
THESE
POINTS
OF
INTERSECTION
ARE
XMIN
NEAR
XMAX
NEAR
YMIN
NEAR
AND
YMAX
NEAR
THEN
OUR
DERIVATION
OF
SHEAR
IN
CHAPTER
YIELDS
THE
RELATIONSHIPS
LEFT
XMIN
NEAR
COT
Θ
RIGHT
XMAX
NEAR
COT
Θ
TOP
YMAX
NEAR
COT
Φ
BOTTOM
YMIN
NEAR
COT
Φ
AN
INTERACTIVE
VIEWER
IN
THIS
SECTION
WE
EXTEND
THE
ROTATING
CUBE
PROGRAM
TO
INCLUDE
BOTH
THE
MODEL
VIEW
MATRIX
AND
AN
ORTHOGONAL
PROJECTION
MATRIX
WHOSE
PARAMETERS
CAN
BE
SET
INTERAC
TIVELY
AS
IN
OUR
PREVIOUS
EXAMPLES
WITH
THE
CUBE
WE
HAVE
CHOICES
AS
TO
WHERE
TO
APPLY
OUR
TRANSFORMATIONS
IN
THIS
EXAMPLE
WE
WILL
SEND
THE
MODEL
VIEW
AND
PRO
JECTION
MATRICES
TO
THE
VERTEX
SHADER
BECAUSE
THE
MODEL
VIEW
MATRIX
CAN
BE
USED
TO
BOTH
TRANSFORM
AN
OBJECT
AND
POSITION
THE
CAMERA
IN
THIS
EXAMPLE
WE
WILL
NOT
USE
THE
MOUSE
FUNCTION
AND
INSTEAD
FOCUS
ON
CAMERA
POSITION
AND
THE
ORTHOGONAL
PROJECTION
IT
WILL
BE
STRAIGHTFORWARD
TO
BRING
BACK
THE
MOUSE
AND
IDLE
CALLBACKS
LATER
TO
RESTART
THE
ROTATION
OF
THE
CUBE
THE
COLORED
CUBE
IS
CENTERED
AT
THE
ORIGIN
IN
OBJECT
COORDINATES
SO
WHEREVER
WE
PLACE
THE
CAMERA
THE
AT
POINT
IS
AT
THE
ORIGIN
LET
POSITION
THE
CAMERA
IN
POLAR
COORDINATES
SO
THE
EYE
POINT
HAS
COORDINATES
R
COS
Θ
EYE
R
SIN
Θ
COS
Φ
R
SIN
Θ
SIN
Φ
WHERE
THE
RADIUS
R
IS
THE
DISTANCE
FROM
THE
ORIGIN
WE
CAN
LET
THE
UP
DIRECTION
BE
THE
Y
DIRECTION
IN
OBJECT
COORDINATES
THESE
VALUES
SPECIFY
A
MODEL
VIEW
MATRIX
THROUGH
THE
LOOKAT
FUNCTION
IN
THIS
EXAMPLE
WE
WILL
SEND
BOTH
A
MODEL
VIEW
AND
A
PROJECTION
MATRIX
TO
THE
VERTEX
SHADER
WITH
THE
FOLLOWING
DISPLAY
CALLBACK
VOID
DISPLAY
GLCLEAR
EYE
RADIUS
COS
THETA
EYE
RADIUS
SIN
THETA
COS
PHI
EYE
RADIUS
SIN
THETA
SIN
PHI
LOOKAT
EYE
AT
UP
PROJECTION
ORTHO
LEFT
RIGHT
BOTTOM
TOP
NEAR
FAR
PROJECTION
GLDRAWARRAYS
N
GLUTSWAPBUFFERS
THE
CORRESPONDING
VERTEX
SHADER
IS
IN
VPOSITION
IN
VCOLOR
OUT
COLOR
UNIFORM
UNIFORM
PROJECTION
VOID
MAIN
PROJECTION
VPOSITION
COLOR
VCOLOR
WE
CAN
USE
THE
KEYBOARD
CALLBACK
TO
ALTER
THE
PROJECTION
MATRIX
AND
THE
CAMERA
POSITION
THE
POSITION
OF
THE
CAMERA
IS
CONTROLLED
BY
THE
R
O
AND
P
KEYS
AND
THE
SIDES
OF
THE
VIEWING
PARALLELPIPED
BY
THE
X
Y
AND
Z
KEYS
VOID
MYKEY
UNSIGNED
CHAR
KEY
INT
MOUSEX
INT
MOUSEY
FLOAT
DR
DEGREES
IN
RADIANS
IF
KEY
Q
KEY
Q
EXIT
IF
KEY
X
LEFT
RIGHT
IF
KEY
X
LEFT
RIGHT
IF
KEY
Y
BOTTOM
TOP
IF
KEY
Y
BOTTOM
TOP
IF
KEY
Z
NEAR
FAR
IF
KEY
Z
NEAR
FAR
IF
KEY
R
RADIUS
IF
KEY
R
RADIUS
IF
KEY
O
THETA
DR
IF
KEY
O
THETA
DR
IF
KEY
P
PHI
DR
IF
KEY
P
PHI
DR
GLUTPOSTREDISPLAY
NOTE
THAT
AS
WE
MOVE
THE
CAMERA
AROUND
THE
SIZE
OF
THE
IMAGE
OF
THE
CUBE
DOES
NOT
CHANGE
WHICH
IS
A
CONSEQUENCE
OF
USING
AN
ORTHOGONAL
PROJECTION
HOWEVER
DEPENDING
ON
THE
RADIUS
SOME
OR
EVEN
ALL
OF
THE
CUBE
CAN
BE
CLIPPED
OUT
THIS
BEHAVIOR
IS
A
CONSEQUENCE
OF
THE
PARAMETERS
IN
ORTHO
BEING
MEASURED
RELATIVE
TO
THE
CAMERA
HENCE
IF
WE
MOVE
THE
CAMERA
BACK
BY
INCREASING
THE
RADIUS
BUT
LEAVE
THE
NEAR
AND
FAR
DISTANCES
UNCHANGED
FIRST
THE
BACK
OF
THE
CUBE
WILL
BE
CLIPPED
OUT
EVENTUALLY
AS
THE
RADIUS
BECOMES
LARGER
THE
ENTIRE
CUBE
WILL
BE
CLIPPED
OUT
NOW
CONSIDER
WHAT
HAPPENS
AS
WE
CHANGE
THE
PARAMETERS
IN
ORTHO
AS
WE
IN
CREASE
RIGHT
AND
LEFT
THE
CUBE
ELONGATES
IN
THE
X
DIRECTION
A
SIMILAR
PHENOMENON
OCCURS
WHEN
WE
INCREASE
BOTTOM
AND
TOP
IN
THE
Y
DIRECTION
ALTHOUGH
THIS
DISTORTION
OF
THE
CUBE
IMAGE
MAY
BE
ANNOYING
IT
IS
A
CONSEQUENCE
OF
USING
AN
X
Y
RECTAN
GLE
IN
ORTHO
THAT
IS
NOT
SQUARE
THIS
RECTANGLE
IS
MAPPED
TO
THE
FULL
VIEWPORT
WHICH
HAS
BEEN
UNCHANGED
WE
CAN
ALTER
THE
PROGRAM
SO
THAT
WE
INCREASE
OR
DECREASE
ALL
OF
LEFT
RIGHT
BOTTOM
AND
TOP
SIMULTANEOUSLY
OR
WE
CAN
ALTER
THE
VIEWPORT
AS
PART
OF
ANY
CHANGE
TO
ORTHO
SEE
EXERCISE
PERSPECTIVE
PROJECTIONS
WE
NOW
TURN
TO
PERSPECTIVE
PROJECTIONS
WHICH
ARE
WHAT
WE
GET
WITH
A
CAMERA
WHOSE
LENS
HAS
A
FINITE
FOCAL
LENGTH
OR
IN
TERMS
OF
OUR
SYNTHETIC
CAMERA
MODEL
THE
CENTER
OF
PROJECTION
IS
FINITE
AS
WITH
PARALLEL
PROJECTIONS
WE
WILL
SEPARATE
PERSPECTIVE
VIEWING
INTO
TWO
PARTS
THE
POSITIONING
OF
THE
CAMERA
AND
THE
PROJECTION
POSITIONING
WILL
BE
DONE
THE
SAME
WAY
AND
WE
CAN
USE
THE
LOOKAT
FUNCTION
THE
PROJECTION
PART
IS
EQUIVALENT
TO
SELECT
ING
A
LENS
FOR
THE
CAMERA
AS
WE
SAW
IN
CHAPTER
IT
IS
THE
COMBINATION
OF
THE
LENS
AND
THE
SIZE
OF
THE
FILM
OR
OF
THE
BACK
OF
THE
CAMERA
THAT
DETERMINES
HOW
MUCH
OF
THE
WORLD
IN
FRONT
OF
A
CAMERA
APPEARS
IN
THE
IMAGE
IN
COMPUTER
GRAPHICS
WE
MAKE
AN
EQUIVALENT
CHOICE
WHEN
WE
SELECT
THE
TYPE
OF
PROJECTION
AND
THE
VIEWING
PARAMETERS
WITH
A
PHYSICAL
CAMERA
A
WIDE
ANGLE
LENS
GIVES
THE
MOST
DRAMATIC
PERSPECTIVES
WITH
OBJECTS
NEAR
THE
CAMERA
APPEARING
LARGE
COMPARED
TO
OBJECTS
FAR
FROM
THE
LENS
A
TELEPHOTO
LENS
GIVES
AN
IMAGE
THAT
APPEARS
FLAT
AND
IS
CLOSE
TO
A
PARALLEL
VIEW
FIRST
WE
CONSIDER
THE
MATHEMATICS
FOR
A
SIMPLE
PROJECTION
WE
CAN
EXTEND
OUR
USE
OF
HOMOGENEOUS
COORDINATES
TO
THE
PROJECTION
PROCESS
WHICH
ALLOWS
US
TO
CHAR
ACTERIZE
A
PARTICULAR
PROJECTION
WITH
A
MATRIX
SIMPLE
PERSPECTIVE
PROJECTIONS
SUPPOSE
THAT
WE
ARE
IN
THE
CAMERA
FRAME
WITH
THE
CAMERA
LOCATED
AT
THE
ORIGIN
POINTED
IN
THE
NEGATIVE
Z
DIRECTION
FIGURE
SHOWS
TWO
POSSIBILITIES
IN
FIG
URE
A
THE
BACK
OF
THE
CAMERA
IS
ORTHOGONAL
TO
THE
Z
DIRECTION
AND
IS
PARALLEL
TO
THE
LENS
THIS
CONFIGURATION
CORRESPONDS
TO
MOST
PHYSICAL
SITUATIONS
INCLUDING
THOSE
OF
THE
HUMAN
VISUAL
SYSTEM
AND
OF
SIMPLE
CAMERAS
THE
SITUATION
SHOWN
IN
FIGURE
B
IS
MORE
GENERAL
THE
BACK
OF
THE
CAMERA
CAN
HAVE
ANY
ORIENTATION
WITH
RESPECT
TO
THE
FRONT
WE
CONSIDER
THE
FIRST
CASE
IN
DETAIL
BECAUSE
IT
IS
SIMPLER
HOW
EVER
THE
DERIVATION
OF
THE
GENERAL
RESULT
FOLLOWS
THE
SAME
STEPS
AND
SHOULD
BE
A
DIRECT
EXERCISE
EXERCISE
AS
WE
SAW
IN
CHAPTER
WE
CAN
PLACE
THE
PROJECTION
PLANE
IN
FRONT
OF
THE
CENTER
OF
PROJECTION
IF
WE
DO
SO
FOR
THE
CONFIGURATION
OF
FIGURE
A
WE
GET
THE
VIEWS
SHOWN
IN
FIGURE
A
POINT
IN
SPACE
X
Y
Z
IS
PROJECTED
ALONG
A
PROJECTOR
INTO
THE
POINT
XP
YP
ZP
ALL
PROJECTORS
PASS
THROUGH
THE
ORIGIN
AND
BECAUSE
THE
PROJECTION
PLANE
IS
PERPENDICULAR
TO
THE
Z
AXIS
ZP
D
BECAUSE
THE
CAMERA
IS
POINTING
IN
THE
NEGATIVE
Z
DIRECTION
THE
PROJECTION
PLANE
IS
IN
THE
NEGATIVE
HALF
SPACE
Z
AND
THE
VALUE
OF
D
IS
NEGATIVE
Z
Z
X
X
A
B
FIGURE
TWO
CAMERAS
A
BACK
PARALLEL
TO
FRONT
B
BACK
NOT
PARALLEL
TO
FRONT
Y
XP
D
X
Z
Y
Z
D
X
Z
Z
A
Z
B
C
FIGURE
THREE
VIEWS
OF
PERSPECTIVE
PROJECTION
A
THREE
DIMENSIONAL
VIEW
B
TOP
VIEW
C
SIDE
VIEW
FROM
THE
TOP
VIEW
SHOWN
IN
FIGURE
B
WE
SEE
TWO
SIMILAR
TRIANGLES
WHOSE
TANGENTS
MUST
BE
THE
SAME
HENCE
X
XP
Z
D
AND
X
XP
Z
D
USING
THE
SIDE
VIEW
SHOWN
IN
FIGURE
C
WE
OBTAIN
A
SIMILAR
RESULT
FOR
YP
Y
YP
Z
D
THESE
EQUATIONS
ARE
NONLINEAR
THE
DIVISION
BY
Z
DESCRIBES
NONUNIFORM
FORESHORT
ENING
THE
IMAGES
OF
OBJECTS
FARTHER
FROM
THE
CENTER
OF
PROJECTION
ARE
REDUCED
IN
SIZE
DIMINUTION
COMPARED
TO
THE
IMAGES
OF
OBJECTS
CLOSER
TO
THE
COP
FIGURE
PROJECTION
PIPELINE
WE
CAN
LOOK
AT
THE
PROJECTION
PROCESS
AS
A
TRANSFORMATION
THAT
TAKES
POINTS
X
Y
Z
TO
OTHER
POINTS
XP
YP
ZP
ALTHOUGH
THIS
PERSPECTIVE
TRANSFORMATION
PRE
SERVES
LINES
IT
IS
NOT
AFFINE
IT
IS
ALSO
IRREVERSIBLE
BECAUSE
ALL
POINTS
ALONG
A
PROJECTOR
PROJECT
INTO
THE
SAME
POINT
WE
CANNOT
RECOVER
A
POINT
FROM
ITS
PROJECTION
IN
SEC
TIONS
AND
WE
WILL
DEVELOP
AN
INVERTIBLE
VARIANT
OF
THE
PROJECTION
TRANSFORMA
TION
THAT
PRESERVES
DISTANCES
THAT
ARE
NEEDED
FOR
HIDDEN
SURFACE
REMOVAL
WE
CAN
EXTEND
OUR
USE
OF
HOMOGENEOUS
COORDINATES
TO
HANDLE
PROJECTIONS
WHEN
WE
INTRODUCED
HOMOGENEOUS
COORDINATES
WE
REPRESENTED
A
POINT
IN
THREE
DIMENSIONS
X
Y
Z
BY
THE
POINT
X
Y
Z
IN
FOUR
DIMENSIONS
SUPPOSE
THAT
INSTEAD
WE
REPLACE
X
Y
Z
BY
THE
FOUR
DIMENSIONAL
POINT
WX
P
WZ
AS
LONG
AS
W
WE
CAN
RECOVER
THE
THREE
DIMENSIONAL
POINT
FROM
ITS
FOUR
DIMENSIONAL
REPRESENTATION
BY
DIVIDING
THE
FIRST
THREE
COMPONENTS
BY
W
IN
THIS
NEW
HOMOGENEOUS
COORDINATE
FORM
POINTS
IN
THREE
DIMENSIONS
BECOME
LINES
THROUGH
THE
ORIGIN
IN
FOUR
DIMENSIONS
TRANSFORMATIONS
ARE
AGAIN
REPRESENTED
BY
MA
TRICES
BUT
NOW
THE
FINAL
ROW
OF
THE
MATRIX
CAN
BE
ALTERED
AND
THUS
W
CAN
BE
CHANGED
BY
SUCH
A
TRANSFORMATION
OBVIOUSLY
WE
WOULD
PREFER
TO
KEEP
W
TO
AVOID
THE
DIVISIONS
OTHERWISE
NEC
ESSARY
TO
RECOVER
THE
THREE
DIMENSIONAL
POINT
HOWEVER
BY
ALLOWING
W
TO
CHANGE
WE
CAN
REPRESENT
A
LARGER
CLASS
OF
TRANSFORMATIONS
INCLUDING
PERSPECTIVE
PROJECTIONS
CONSIDER
THE
MATRIX
M
THE
MATRIX
M
TRANSFORMS
THE
POINT
X
Z
TO
THE
POINT
Q
X
Y
Z
Z
D
AT
FIRST
GLANCE
Q
MAY
NOT
SEEM
SENSIBLE
HOWEVER
WHEN
WE
REMEMBER
THAT
WE
HAVE
TO
DIVIDE
THE
FIRST
THREE
COMPONENTS
BY
THE
FOURTH
TO
RETURN
TO
OUR
ORIGINAL
THREE
DIMENSIONAL
SPACE
WE
OBTAIN
THE
RESULTS
X
XP
Z
D
Y
YP
Z
D
Z
ZP
Z
D
D
WHICH
ARE
THE
EQUATIONS
FOR
A
SIMPLE
PERSPECTIVE
PROJECTION
IN
HOMOGENEOUS
COOR
DINATES
DIVIDING
Q
BY
ITS
W
COMPONENT
REPLACES
Q
BY
THE
EQUIVALENT
POINT
X
XP
T
Y
Y
P
WE
HAVE
SHOWN
THAT
WE
CAN
DO
AT
LEAST
A
SIMPLE
PERSPECTIVE
PROJECTION
BY
DEFIN
ING
A
PROJECTION
MATRIX
THAT
WE
APPLY
AFTER
THE
MODEL
VIEW
MATRIX
HOWEVER
WE
MUST
PERFORM
A
PERSPECTIVE
DIVISION
AT
THE
END
THIS
DIVISION
CAN
BE
MADE
A
PART
OF
THE
PIPELINE
AS
SHOWN
IN
FIGURE
PERSPECTIVE
PROJECTIONS
WITH
OPENGL
THE
PROJECTIONS
THAT
WE
DEVELOPED
IN
SECTION
DID
NOT
TAKE
INTO
ACCOUNT
THE
PROPER
TIES
OF
THE
CAMERA
THE
FOCAL
LENGTH
OF
ITS
LENS
OR
THE
SIZE
OF
THE
FILM
PLANE
FIGURE
SHOWS
THE
ANGLE
OF
VIEW
FOR
A
SIMPLE
PINHOLE
CAMERA
LIKE
THE
ONE
THAT
WE
DISCUSSED
IN
CHAPTER
ONLY
THOSE
OBJECTS
THAT
FIT
WITHIN
THE
ANGLE
OF
VIEW
OF
THE
CAMERA
APPEAR
IN
THE
IMAGE
IF
THE
BACK
OF
THE
CAMERA
IS
RECTANGULAR
ONLY
OBJECTS
WITHIN
A
SEMI
INFINITE
PYRAMID
THE
VIEW
VOLUME
WHOSE
APEX
IS
AT
THE
COP
CAN
APPEAR
IN
THE
IMAGE
OB
JECTS
NOT
WITHIN
THE
VIEW
VOLUME
ARE
SAID
TO
BE
CLIPPED
OUT
OF
THE
SCENE
HENCE
OUR
DESCRIPTION
OF
SIMPLE
PROJECTIONS
HAS
BEEN
INCOMPLETE
WE
DID
NOT
INCLUDE
THE
EFFECTS
OF
CLIPPING
WITH
MOST
GRAPHICS
APIS
THE
APPLICATION
PROGRAM
SPECIFIES
CLIPPING
PARAMETERS
THROUGH
THE
SPECIFICATION
OF
A
PROJECTION
THE
INFINITE
PYRAMID
IN
FIGURE
BECOMES
FIGURE
SPECIFICATION
OF
A
VIEW
VOLUME
BACK
CLIPPING
PLANE
COP
FIGURE
FRONT
AND
BACK
CLIPPING
PLANES
A
FINITE
CLIPPING
VOLUME
BY
ADDING
FRONT
AND
BACK
CLIPPING
PLANES
IN
ADDITION
TO
THE
ANGLE
OF
VIEW
AS
SHOWN
IN
FIGURE
THE
RESULTING
VIEW
VOLUME
IS
A
FRUSTUM
A
TRUNCATED
PYRAMID
WE
HAVE
FIXED
ONLY
ONE
PARAMETER
BY
SPECIFYING
THAT
THE
COP
IS
AT
THE
ORIGIN
IN
THE
CAMERA
FRAME
IN
PRINCIPLE
WE
SHOULD
BE
ABLE
TO
SPECIFY
EACH
OF
THE
SIX
SIDES
OF
THE
FRUSTUM
TO
HAVE
ALMOST
ANY
ORIENTATION
IF
WE
DID
SO
HOWEVER
WE
WOULD
MAKE
IT
DIFFICULT
TO
SPECIFY
A
VIEW
IN
THE
APPLICATION
AND
COMPLICATE
THE
IMPLEMENTATION
IN
PRACTICE
WE
RARELY
NEED
THIS
FLEXIBILITY
AND
USUALLY
WE
CAN
GET
BY
WITH
ONLY
TWO
PERSPECTIVE
VIEWING
FUNCTIONS
OTHER
APIS
DIFFER
IN
THEIR
FUNCTION
CALLS
BUT
INCORPORATE
SIMILAR
RESTRICTIONS
PERSPECTIVE
FUNCTIONS
WE
WILL
DEVELOP
TWO
FUNCTIONS
FOR
SPECIFYING
PERSPECTIVE
VIEWS
AND
ONE
FOR
SPECIFYING
PARALLEL
VIEWS
ALTERNATIVELY
WE
CAN
FORM
THE
PROJECTION
MATRIX
DIRECTLY
EITHER
BY
TOP
NEAR
Z
FIGURE
SPECIFICATION
OF
A
FRUSTUM
LOADING
IT
OR
BY
APPLYING
ROTATIONS
TRANSLATIONS
AND
SCALINGS
TO
AN
INITIAL
IDENTITY
MATRIX
WE
CAN
SPECIFY
A
PERSPECTIVE
CAMERA
VIEW
BY
THE
FUNCTION
FRUSTUM
GLFLOAT
LEFT
GLFLOAT
RIGHT
GLFLOAT
BOTTOM
GLFLOAT
TOP
GLFLOAT
NEAR
GLFLOAT
FAR
WHOSE
PARAMETERS
ARE
SIMILAR
TO
THOSE
IN
ORTHO
THESE
PARAMETERS
ARE
SHOWN
IN
FIG
URE
IN
THE
CAMERA
FRAME
THE
NEAR
AND
FAR
DISTANCES
ARE
MEASURED
FROM
THE
COP
THE
ORIGIN
IN
EYE
COORDINATES
TO
FRONT
AND
BACK
CLIPPING
PLANES
BOTH
OF
WHICH
ARE
PARALLEL
TO
THE
PLANE
Z
BECAUSE
THE
CAMERA
IS
POINTING
IN
THE
NEGATIVE
Z
DIRECTION
THE
FRONT
NEAR
CLIPPING
PLANE
IS
THE
PLANE
Z
NEAR
AND
THE
BACK
FAR
CLIPPING
PLANE
IS
THE
PLANE
Z
FAR
THE
LEFT
RIGHT
TOP
AND
BOTTOM
VALUES
ARE
MEASURED
IN
THE
NEAR
FRONT
CLIPPING
PLANE
THE
PLANE
X
LEFT
IS
TO
THE
LEFT
OF
THE
CAMERA
AS
VIEWED
FROM
THE
COP
IN
THE
DIRECTION
THE
CAMERA
IS
POINTING
SIMILAR
STATEMENTS
HOLD
FOR
RIGHT
BOTTOM
AND
TOP
ALTHOUGH
IN
VIRTUALLY
ALL
APPLICATIONS
FAR
NEAR
AS
LONG
AS
NEAR
FAR
THE
RESULTING
PROJECTION
MATRIX
IS
VALID
ALTHOUGH
OBJECTS
BEHIND
THE
CENTER
OF
PROJECTION
THE
ORIGIN
WILL
BE
INVERTED
IN
THE
IMAGE
IF
THEY
LIE
BETWEEN
THE
NEAR
AND
FAR
PLANES
NOTE
THAT
THESE
SPECIFICATIONS
DO
NOT
HAVE
TO
BE
SYMMETRIC
WITH
RESPECT
TO
THE
Z
AXIS
AND
THAT
THE
RESULTING
FRUSTUM
ALSO
DOES
NOT
HAVE
TO
BE
SYMMETRIC
A
RIGHT
FRUSTUM
IN
SECTION
WE
SHOW
HOW
THE
PROJECTION
MATRIX
FOR
THIS
PROJECTION
CAN
BE
DERIVED
FROM
THE
SIMPLE
PERSPECTIVE
PROJECTION
MATRIX
IN
MANY
APPLICATIONS
IT
IS
NATURAL
TO
SPECIFY
THE
ANGLE
OF
VIEW
OR
FIELD
OF
VIEW
HOWEVER
IF
THE
PROJECTION
PLANE
IS
RECTANGULAR
RATHER
THAN
SQUARE
THEN
WE
SEE
A
DIFFERENT
ANGLE
OF
VIEW
IN
THE
TOP
AND
SIDE
VIEWS
FIGURE
THE
ANGLE
FOVY
IS
THE
ANGLE
BETWEEN
THE
TOP
AND
BOTTOM
PLANES
OF
THE
CLIPPING
VOLUME
THE
FUNCTION
PERSPECTIVE
GLFLOAT
FOVY
GLFLOAT
ASPECT
GLFLOAT
NEAR
GLFLOAT
FAR
W
Y
H
FOVY
X
Z
FIGURE
SPECIFICATION
USING
THE
FIELD
OF
VIEW
ALLOWS
US
TO
SPECIFY
THE
ANGLE
OF
VIEW
IN
THE
UP
Y
DIRECTION
AS
WELL
AS
THE
ASPECT
RATIO
WIDTH
DIVIDED
BY
HEIGHT
OF
THE
PROJECTION
PLANE
THE
NEAR
AND
FAR
PLANES
ARE
SPECIFIED
AS
IN
FRUSTUM
PERSPECTIVE
PROJECTION
MATRICES
FOR
PERSPECTIVE
PROJECTIONS
WE
FOLLOW
A
PATH
SIMILAR
TO
THE
ONE
THAT
WE
USED
FOR
PARALLEL
PROJECTIONS
WE
FIND
A
TRANSFORMATION
THAT
ALLOWS
US
BY
DISTORTING
THE
VERTICES
OF
OUR
OBJECTS
TO
DO
A
SIMPLE
CANONICAL
PROJECTION
TO
OBTAIN
THE
DESIRED
IMAGE
OUR
FIRST
STEP
IS
TO
DECIDE
WHAT
THIS
CANONICAL
VIEWING
VOLUME
SHOULD
BE
WE
THEN
INTRODUCE
A
NEW
TRANSFORMATION
THE
PERSPECTIVE
NORMALIZATION
TRANSFORMATION
THAT
CONVERTS
A
PERSPECTIVE
PROJECTION
TO
AN
ORTHOGONAL
PROJECTION
FINALLY
WE
DERIVE
THE
PERSPECTIVE
PROJECTION
MATRIX
WE
WILL
USE
IN
OPENGL
PERSPECTIVE
NORMALIZATION
IN
SECTION
WE
INTRODUCED
A
SIMPLE
PERSPECTIVE
PROJECTION
MATRIX
FOR
THE
PRO
JECTION
PLANE
AT
Z
AND
THE
CENTER
OF
THE
PROJECTION
AT
THE
ORIGIN
THE
PROJECTION
MATRIX
IS
TO
FORM
AN
IMAGE
WE
ALSO
NEED
TO
SPECIFY
A
CLIPPING
VOLUME
SUPPOSE
THAT
WE
FIX
THE
ANGLE
OF
VIEW
AT
DEGREES
BY
MAKING
THE
SIDES
OF
THE
VIEWING
VOLUME
INTERSECT
THE
PROJECTION
PLANE
AT
A
DEGREE
ANGLE
EQUIVALENTLY
THE
VIEW
VOLUME
IS
THE
SEMI
INFINITE
VIEW
PYRAMID
FORMED
BY
THE
PLANES
Y
X
Z
ZMIN
Z
FIGURE
SIMPLE
PERSPECTIVE
PROJECTION
X
Z
Y
Z
SHOWN
IN
FIGURE
WE
CAN
MAKE
THE
VOLUME
FINITE
BY
SPECIFYING
THE
NEAR
PLANE
TO
BE
Z
NEAR
AND
THE
FAR
PLANE
TO
BE
Z
FAR
WHERE
BOTH
NEAR
AND
FAR
THE
DISTANCES
FROM
THE
CENTER
OF
PROJECTION
TO
THE
NEAR
AND
FAR
PLANES
SATISFY
NEAR
FAR
CONSIDER
THE
MATRIX
N
WHICH
IS
SIMILAR
TO
M
BUT
IS
NONSINGULAR
FOR
NOW
WE
LEAVE
Α
AND
Β
UNSPECIFIED
BUT
NONZERO
IF
WE
APPLY
N
TO
THE
HOMOGENEOUS
COORDINATE
POINT
P
X
Y
Z
T
WE
OBTAIN
THE
NEW
POINT
Q
XT
YT
ZT
WT
T
WHERE
XT
X
YT
Y
ZT
ΑZ
Β
WT
Z
AFTER
DIVIDING
BY
WT
WE
HAVE
THE
THREE
DIMENSIONAL
POINT
XTT
YTT
X
Z
Y
Z
ZTT
Α
Β
IF
WE
APPLY
AN
ORTHOGRAPHIC
PROJECTION
ALONG
THE
Z
AXIS
TO
N
WE
OBTAIN
THE
MATRIX
ORTH
WHICH
IS
A
SIMPLE
PERSPECTIVE
PROJECTION
MATRIX
AND
THE
PROJECTION
OF
THE
ARBITRARY
POINT
P
IS
PT
M
ORTH
X
NP
Z
AFTER
WE
DO
THE
PERSPECTIVE
DIVISION
WE
OBTAIN
THE
DESIRED
VALUES
FOR
XP
AND
YP
X
X
P
Z
Y
Y
P
Z
WE
HAVE
SHOWN
THAT
WE
CAN
APPLY
A
TRANSFORMATION
N
TO
POINTS
AND
AFTER
AN
OR
THOGONAL
PROJECTION
WE
OBTAIN
THE
SAME
RESULT
AS
WE
WOULD
HAVE
FOR
A
PERSPECTIVE
PROJECTION
THIS
PROCESS
IS
SIMILAR
TO
HOW
WE
CONVERTED
OBLIQUE
PROJECTIONS
TO
OR
THOGONAL
PROJECTIONS
BY
FIRST
SHEARING
THE
OBJECTS
THE
MATRIX
N
IS
NONSINGULAR
AND
TRANSFORMS
THE
ORIGINAL
VIEWING
VOLUME
INTO
A
NEW
VOLUME
WE
CHOOSE
Α
AND
Β
SUCH
THAT
THE
NEW
VOLUME
IS
THE
CANONICAL
CLIPPING
VOLUME
CONSIDER
THE
SIDES
X
Z
THEY
ARE
TRANSFORMED
BY
XTT
X
Z
TO
THE
PLANES
XTT
LIKEWISE
THE
SIDES
Y
Z
ARE
TRANSFORMED
TO
YTT
Z
FAR
Z
X
X
COP
FIGURE
PERSPECTIVE
NORMALIZATION
OF
VIEW
VOLUME
Z
THE
FRONT
CLIPPING
PLANE
Z
NEAR
IS
TRANSFORMED
TO
THE
PLANE
ZTT
Α
Β
FINALLY
THE
FAR
PLANE
Z
FAR
IS
TRANSFORMED
TO
THE
PLANE
ZTT
Α
Β
IF
WE
SELECT
Α
NEAR
FAR
NEAR
FAR
NEAR
FAR
Β
NEAR
FAR
THEN
THE
PLANE
Z
NEAR
IS
MAPPED
TO
THE
PLANE
ZTT
THE
PLANE
Z
FAR
IS
MAPPED
TO
THE
PLANE
ZTT
AND
WE
HAVE
OUR
CANONICAL
CLIPPING
VOLUME
FIGURE
SHOWS
THIS
TRANSFORMATION
AND
THE
DISTORTION
TO
A
CUBE
WITHIN
THE
VOLUME
THUS
N
HAS
TRANSFORMED
THE
VIEWING
FRUSTUM
TO
A
RIGHT
PARALLELEPIPED
AND
AN
ORTHOGRAPHIC
PROJECTION
IN
THE
TRANSFORMED
VOLUME
YIELDS
THE
SAME
IMAGE
AS
DOES
THE
PERSPECTIVE
PROJECTION
THE
MATRIX
N
IS
CALLED
THE
PERSPECTIVE
NORMALIZATION
MATRIX
THE
MAP
PING
ZTT
Α
Β
IS
NONLINEAR
BUT
PRESERVES
THE
ORDERING
OF
DEPTHS
THUS
IF
AND
ARE
THE
DEPTHS
OF
TWO
POINTS
WITHIN
THE
ORIGINAL
VIEWING
VOLUME
AND
Z
Z
FAR
LEFT
BOTTOM
NEAR
RIGHT
TOP
NEAR
COP
FIGURE
OPENGL
PERSPECTIVE
THEN
THEIR
TRANSFORMATIONS
SATISFY
CONSEQUENTLY
HIDDEN
SURFACE
REMOVAL
WORKS
IN
THE
NORMALIZED
VOLUME
ALTHOUGH
THE
NONLINEARITY
OF
THE
TRANSFORMATION
CAN
CAUSE
NUMERICAL
PROBLEMS
BECAUSE
THE
DEPTH
BUFFER
HAS
A
LIMITED
DEPTH
RESOLUTION
NOTE
THAT
ALTHOUGH
THE
ORIGINAL
PROJEC
TION
PLANE
WE
PLACED
AT
Z
HAS
BEEN
TRANSFORMED
BY
N
TO
THE
PLANE
ZTT
Β
Α
THERE
IS
LITTLE
CONSEQUENCE
TO
THIS
RESULT
BECAUSE
WE
FOLLOW
N
BY
AN
ORTHOGRAPHIC
PRO
JECTION
ALTHOUGH
WE
HAVE
SHOWN
THAT
BOTH
PERSPECTIVE
AND
PARALLEL
TRANSFORMATIONS
CAN
BE
CONVERTED
TO
ORTHOGRAPHIC
TRANSFORMATIONS
THE
EFFECTS
OF
THIS
CONVERSION
ARE
GREATEST
IN
IMPLEMENTATION
AS
LONG
AS
WE
CAN
PUT
A
CAREFULLY
CHOSEN
PROJECTION
MATRIX
IN
THE
PIPELINE
BEFORE
THE
VERTICES
ARE
DEFINED
WE
NEED
ONLY
ONE
VIEWING
PIPELINE
FOR
ALL
POSSIBLE
VIEWS
IN
CHAPTER
WHERE
WE
DISCUSS
IMPLEMENTATION
IN
DETAIL
WE
WILL
SEE
HOW
CONVERTING
ALL
VIEW
VOLUMES
TO
RIGHT
PARALLELEPIPEDS
BY
OUR
NORMALIZATION
PROCESS
SIMPLIFIES
BOTH
CLIPPING
AND
HIDDEN
SURFACE
REMOVAL
OPENGL
PERSPECTIVE
TRANSFORMATIONS
THE
FUNCTION
FRUSTUM
DOES
NOT
RESTRICT
THE
VIEW
VOLUME
TO
A
SYMMETRIC
OR
RIGHT
FRUSTUM
THE
PARAMETERS
ARE
AS
SHOWN
IN
FIGURE
WE
CAN
FORM
THE
PERSPECTIVE
MATRIX
BY
FIRST
CONVERTING
THIS
FRUSTUM
TO
THE
SYMMETRIC
FRUSTUM
WITH
DEGREE
SIDES
SEE
FIGURE
THE
PROCESS
IS
SIMILAR
TO
THE
CONVERSION
OF
AN
OBLIQUE
PARALLEL
VIEW
TO
AN
ORTHOGONAL
VIEW
FIRST
WE
DO
A
SHEAR
TO
CONVERT
THE
ASYMMETRIC
FRUSTUM
TO
A
SYMMETRIC
ONE
FIGURE
SHOWS
THE
DESIRED
TRANSFORMATION
THE
SHEAR
AN
GLE
IS
DETERMINED
BY
OUR
DESIRE
TO
SKEW
SHEAR
THE
POINT
LEFT
RIGHT
TOP
BOTTOM
NEAR
TO
NEAR
THE
REQUIRED
SHEAR
MATRIX
IS
H
Θ
Φ
H
COT
LEFT
RIGHT
COT
TOP
BOTTOM
THE
RESULTING
FRUSTUM
IS
DESCRIBED
BY
THE
PLANES
RIGHT
LEFT
X
NEAR
TOP
BOTTOM
Y
NEAR
Z
NEAR
Z
FAR
THE
NEXT
STEP
IS
TO
SCALE
THE
SIDES
OF
THIS
FRUSTUM
TO
X
Z
Y
Z
WITHOUT
CHANGING
EITHER
THE
NEAR
PLANE
OR
THE
FAR
PLANE
THE
REQUIRED
SCALING
MATRIX
IS
NEAR
RIGHT
LEFT
NEAR
TOP
BOTTOM
NOTE
THAT
THIS
TRANSFOR
MATION
IS
DETERMINED
UNIQUELY
WITHOUT
REFERENCE
TO
THE
LOCATION
OF
THE
FAR
PLANE
Z
FAR
BECAUSE
IN
THREE
DIMENSIONS
AN
AFFINE
TRANSFORMATION
IS
DETERMINED
BY
THE
RESULTS
OF
THE
TRANSFORMATION
ON
FOUR
POINTS
IN
THIS
CASE
THESE
POINTS
ARE
THE
FOUR
VERTICES
WHERE
THE
SIDES
OF
THE
FRUSTUM
INTERSECT
THE
NEAR
PLANE
TO
GET
THE
FAR
PLANE
TO
THE
PLANE
Z
AND
THE
NEAR
PLANE
TO
Z
AFTER
APPLYING
A
PROJECTION
NORMALIZATION
WE
USE
THE
PROJECTION
NORMALIZATION
MATRIX
N
N
WITH
Α
AND
Β
AS
IN
SECTION
THE
RESULTING
PROJECTION
MATRIX
IS
IN
TERMS
OF
THE
NEAR
AND
FAR
DISTANCES
NEAR
RIGHT
LEFT
RIGHT
LEFT
P
NSH
NEAR
TOP
BOTTOM
TOP
BOTTOM
TOP
BOTTOM
WE
OBTAIN
THE
PROJECTION
MATRIX
CORRESPONDING
TO
PERSECTIVE
FOVY
ASPECT
NEAR
FAR
BY
USING
SYMMETRY
IN
P
SO
LEFT
RIGHT
BOTTOM
TOP
AND
SIMPLE
TRIGONOMETRY
TO
DETERMINE
TOP
NEAR
TAN
FOVY
RIGHT
TOP
ASPECT
SIMPLIFYING
P
TO
NEAR
RIGHT
NEAR
P
NSH
TOP
PERSPECTIVE
EXAMPLE
WE
HAVE
TO
MAKE
ALMOST
NO
CHANGES
TO
OUR
PREVIOUS
EXAMPLE
TO
GO
FROM
AN
ORTHOGO
NAL
PROJECTION
TO
A
PERSPECTIVE
PROJECTION
WE
CAN
SUBSTITUTE
FRUSTUM
FOR
ORTHO
AND
THE
PARAMETERS
ARE
THE
SAME
HOWEVER
FOR
A
PERSPECTIVE
VIEW
WE
SHOULD
HAVE
FAR
NEAR
NOTE
THAT
IF
WE
WANT
TO
SEE
THE
FORESHORTENING
WE
ASSOCIATE
WITH
PERSPECTIVE
VIEWS
WE
CAN
EITHER
MOVE
THE
CUBE
OFF
THE
Z
AXIS
OR
ADD
ADDITIONAL
CUBES
TO
THE
RIGHT
OR
LEFT
WE
CAN
ADD
THE
PERSPECTIVE
DIVISION
TO
OUR
VERTEX
SHADER
SO
IT
BECOMES
IN
VPOSITION
IN
VCOLOR
OUT
COLOR
UNIFORM
UNIFORM
PROJECTION
VOID
MAIN
PROJECTION
VPOSITION
VPOSITION
W
COLOR
VCOLOR
THE
FULL
PROGRAM
IS
IN
APPENDIX
A
HIDDEN
SURFACE
REMOVAL
BEFORE
INTRODUCING
A
FEW
ADDITIONAL
EXAMPLES
AND
EXTENSIONS
OF
VIEWING
WE
NEED
TO
DEEPEN
OUR
UNDERSTANDING
OF
THE
HIDDEN
SURFACE
REMOVAL
PROCESS
LET
START
WITH
THE
CUBE
WE
HAVE
BEEN
USING
IN
OUR
EXAMPLES
WHEN
WE
LOOK
AT
A
CUBE
THAT
HAS
OPAQUE
SIDES
DEPENDING
ON
ITS
ORIENTATION
WE
SEE
ONLY
ONE
TWO
OR
THREE
FRONT
FACING
SIDES
FROM
THE
PERSPECTIVE
OF
OUR
BASIC
VIEWING
MODEL
WE
CAN
SAY
THAT
WE
SEE
ONLY
THESE
FACES
BECAUSE
THEY
BLOCK
THE
PROJECTORS
FROM
REACHING
ANY
OTHER
SURFACES
FROM
THE
PERSPECTIVE
OF
COMPUTER
GRAPHICS
HOWEVER
ALL
SIX
FACES
OF
THE
CUBE
HAVE
BEEN
SPECIFIED
AND
TRAVEL
DOWN
THE
GRAPHICS
PIPELINE
THUS
THE
GRAPHICS
SYS
TEM
MUST
BE
CAREFUL
ABOUT
WHICH
SURFACES
IT
DISPLAYS
CONCEPTUALLY
WE
SEEK
ALGO
RITHMS
THAT
EITHER
REMOVE
THOSE
SURFACES
THAT
SHOULD
NOT
BE
VISIBLE
TO
THE
VIEWER
CALLED
HIDDEN
SURFACE
REMOVAL
ALGORITHMS
OR
FIND
WHICH
SURFACES
ARE
VISIBLE
CALLED
VISIBLE
SURFACE
ALGORITHMS
THERE
ARE
MANY
APPROACHES
TO
THE
PROBLEM
SEVERAL
OF
WHICH
WE
INVESTIGATE
IN
CHAPTER
OPENGL
HAS
A
PARTICULAR
ALGORITHM
ASSOCIATED
WITH
IT
THE
Z
BUFFER
ALGORITHM
TO
WHICH
WE
CAN
INTERFACE
THROUGH
THREE
FUNCTION
CALLS
HENCE
WE
INTRODUCE
THAT
ALGORITHM
HERE
AND
WE
RETURN
TO
THE
TOPIC
IN
CHAPTER
HIDDEN
SURFACE
REMOVAL
ALGORITHMS
CAN
BE
DIVIDED
INTO
TWO
BROAD
CLASSES
OBJECT
SPACE
ALGORITHMS
ATTEMPT
TO
ORDER
THE
SURFACES
OF
THE
OBJECTS
IN
THE
SCENE
SUCH
THAT
RENDERING
SURFACES
IN
A
PARTICULAR
ORDER
PROVIDES
THE
CORRECT
IMAGE
FOR
EXAMPLE
FOR
OUR
CUBE
IF
WE
WERE
TO
RENDER
THE
BACK
FACING
SURFACES
FIRST
WE
COULD
PAINT
OVER
THEM
WITH
THE
FRONT
SURFACES
AND
WOULD
PRODUCE
THE
CORRECT
IMAGE
THIS
CLASS
OF
ALGORITHMS
DOES
NOT
WORK
WELL
WITH
PIPELINE
ARCHITECTURES
IN
WHICH
OBJECTS
ARE
PASSED
DOWN
THE
PIPELINE
IN
AN
ARBITRARY
ORDER
IN
ORDER
TO
DECIDE
ON
A
PROPER
ORDER
IN
WHICH
TO
RENDER
THE
OBJECTS
THE
GRAPHICS
SYSTEM
MUST
HAVE
ALL
THE
OBJECTS
AVAILABLE
SO
IT
CAN
SORT
THEM
INTO
THE
DESIRED
BACK
TO
FRONT
ORDER
IMAGE
SPACE
ALGORITHMS
WORK
AS
PART
OF
THE
PROJECTION
PROCESS
AND
SEEK
TO
DETER
MINE
THE
RELATIONSHIP
AMONG
OBJECT
POINTS
ON
EACH
PROJECTOR
THE
Z
BUFFER
ALGORITHM
IS
OF
THE
LATTER
TYPE
AND
FITS
IN
WELL
WITH
THE
RENDERING
PIPELINE
IN
MOST
GRAPHICS
SYS
TEMS
BECAUSE
WE
CAN
SAVE
PARTIAL
INFORMATION
AS
EACH
OBJECT
IS
RENDERED
THE
BASIC
IDEA
OF
THE
Z
BUFFER
ALGORITHM
IS
SHOWN
IN
FIGURE
A
PROJECTOR
FROM
THE
COP
PASSES
THROUGH
TWO
SURFACES
BECAUSE
THE
CIRCLE
IS
CLOSER
TO
THE
VIEWER
THAN
TO
THE
TRIANGLE
IT
IS
THE
CIRCLE
COLOR
THAT
DETERMINES
THE
COLOR
PLACED
IN
THE
COLOR
BUFFER
AT
THE
LOCATION
CORRESPONDING
TO
WHERE
THE
PROJECTOR
PIERCES
THE
PROJECTION
PLANE
THE
DIFFICULTY
IS
DETERMINING
HOW
WE
CAN
MAKE
THIS
IDEA
WORK
REGARDLESS
OF
THE
ORDER
IN
WHICH
THE
TRIANGLE
AND
THE
CIRCLE
PASS
THROUGH
THE
PIPELINE
PROJECTION
PLANE
COP
Z
FIGURE
THE
Z
BUFFER
ALGORITHM
LET
ASSUME
THAT
ALL
THE
OBJECTS
ARE
POLYGONS
IF
AS
THE
POLYGONS
ARE
RASTERIZED
WE
CAN
KEEP
TRACK
OF
THE
DISTANCE
FROM
THE
COP
OR
THE
PROJECTION
PLANE
TO
THE
CLOSEST
POINT
ON
EACH
PROJECTOR
THAT
ALREADY
HAS
BEEN
RENDERED
THEN
WE
CAN
UPDATE
THIS
INFORMATION
AS
SUCCESSIVE
POLYGONS
ARE
PROJECTED
AND
FILLED
ULTIMATELY
WE
DISPLAY
ONLY
THE
CLOSEST
POINT
ON
EACH
PROJECTOR
THE
ALGORITHM
REQUIRES
A
DEPTH
BUFFER
OR
Z
BUFFER
TO
STORE
THE
NECESSARY
DEPTH
INFORMATION
AS
POLYGONS
ARE
RASTERIZED
BECAUSE
WE
MUST
KEEP
DEPTH
INFORMATION
FOR
EACH
PIXEL
IN
THE
COLOR
BUFFER
THE
Z
BUFFER
HAS
THE
SAME
SPATIAL
RESOLUTION
AS
THE
COLOR
BUFFERS
ITS
DEPTH
RESOLUTION
IS
USUALLY
BITS
WITH
RECENT
GRAPHICS
CARDS
THAT
STORE
THIS
INFORMATION
AS
FLOATING
POINT
NUMBERS
THE
Z
BUFFER
IS
ONE
OF
THE
BUFFERS
THAT
CONSTITUTE
THE
FRAME
BUFFER
AND
IS
USUALLY
PART
OF
THE
MEMORY
ON
THE
GRAPHICS
CARD
THE
DEPTH
BUFFER
IS
INITIALIZED
TO
A
VALUE
THAT
CORRESPONDS
TO
THE
FARTHEST
DISTANCE
FROM
THE
VIEWER
WHEN
EACH
POLYGON
INSIDE
THE
CLIPPING
VOLUME
IS
RASTERIZED
THE
DEPTH
OF
EACH
FRAGMENT
HOW
FAR
THE
CORRESPONDING
POINT
ON
THE
POLYGON
IS
FROM
THE
VIEWER
IS
CALCULATED
IF
THIS
DEPTH
IS
GREATER
THAN
THE
VALUE
AT
THAT
FRAGMENT
LOCATION
IN
THE
DEPTH
BUFFER
THEN
A
POLYGON
THAT
HAS
ALREADY
BEEN
RASTERIZED
IS
CLOSER
TO
THE
VIEWER
ALONG
THE
PROJECTOR
CORRESPONDING
TO
THE
FRAGMENT
HENCE
FOR
THIS
FRAGMENT
WE
IGNORE
THE
COLOR
OF
THE
POLYGON
AND
GO
ON
TO
THE
NEXT
FRAGMENT
FOR
THIS
POLYGON
WHERE
WE
MAKE
THE
SAME
TEST
IF
HOWEVER
THE
DEPTH
IS
LESS
THAN
WHAT
IS
ALREADY
IN
THE
Z
BUFFER
THEN
ALONG
THIS
PROJECTOR
THE
POLYGON
BEING
RENDERED
IS
CLOSER
THAN
ANY
ONE
WE
HAVE
SEEN
SO
FAR
THUS
WE
USE
THE
COLOR
OF
THE
POLYGON
TO
REPLACE
THE
COLOR
OF
THE
PIXEL
IN
THE
COLOR
BUFFER
AND
UPDATE
THE
DEPTH
IN
THE
Z
BUFFER
FOR
THE
EXAMPLE
SHOWN
IN
FIGURE
WE
SEE
THAT
IF
THE
TRIANGLE
PASSES
THROUGH
THE
PIPELINE
FIRST
ITS
COLORS
AND
DEPTHS
WILL
BE
PLACED
IN
THE
COLOR
AND
Z
BUFFERS
WHEN
THE
CIRCLE
PASSES
THROUGH
THE
PIPELINE
ITS
COLORS
AND
DEPTHS
WILL
REPLACE
THE
COLORS
AND
DEPTHS
OF
THE
TRIANGLE
WHERE
THEY
OVERLAP
IF
THE
CIRCLE
IS
RENDERED
FIRST
ITS
COLORS
AND
DEPTHS
WILL
BE
PLACED
IN
THE
BUFFERS
WHEN
THE
TRIANGLE
IS
RENDERED
IN
THE
AREAS
WHERE
THERE
IS
OVERLAP
THE
DEPTHS
OF
THE
TRIANGLE
ARE
GREATER
THAN
THE
DEPTH
OF
THE
CIRCLE
AND
AT
THE
CORRESPONDING
PIXELS
NO
CHANGES
WILL
BE
MADE
TO
THE
COLOR
OR
DEPTH
BUFFERS
MAJOR
ADVANTAGES
OF
THIS
ALGORITHM
ARE
THAT
ITS
COMPLEXITY
IS
PROPORTIONAL
TO
THE
NUMBER
OF
FRAGMENTS
GENERATED
BY
THE
RASTERIZER
AND
THAT
IT
CAN
BE
IMPLEMENTED
WITH
A
SMALL
NUMBER
OF
ADDITIONAL
CALCULATIONS
OVER
WHAT
WE
HAVE
TO
DO
TO
PROJECT
AND
DISPLAY
POLYGONS
WITHOUT
HIDDEN
SURFACE
REMOVAL
WE
WILL
RETURN
TO
THIS
ISSUE
IN
CHAPTER
FROM
THE
APPLICATION
PROGRAMMER
PERSPECTIVE
SHE
MUST
INITIALIZE
THE
DEPTH
BUFFER
AND
ENABLE
HIDDEN
SURFACE
REMOVAL
BY
USING
GLUTINITDISPLAYMODE
GLENABLE
THE
COLOR
OF
THE
POLYGON
IS
DETERMINED
BY
SHADING
CHAPTER
AND
TEXTURE
MAPPING
CHAPTER
IF
THESE
FEATURES
ARE
ENABLED
HERE
WE
USE
THE
GLUT
LIBRARY
FOR
THE
INITIALIZATION
AND
SPECIFY
A
DEPTH
BUFFER
IN
ADDITION
TO
OUR
USUAL
RGB
COLOR
AND
DOUBLE
BUFFERING
THE
PROGRAMMER
CAN
CLEAR
THE
COLOR
AND
DEPTH
BUFFERS
AS
NECESSARY
FOR
A
NEW
RENDERING
BY
USING
GLCLEAR
CULLING
FOR
A
CONVEX
OBJECT
SUCH
AS
THE
CUBE
FACES
WHOSE
NORMALS
POINT
AWAY
FROM
THE
VIEWER
ARE
NEVER
VISIBLE
AND
CAN
BE
ELIMINATED
OR
CULLED
BEFORE
THE
RASTERIZER
WE
CAN
TURN
ON
CULLING
IN
OPENGL
BY
ENABLING
IT
AS
FOLLOWS
GLENABLE
HOWEVER
CULLING
IS
GUARANTEED
TO
PRODUCE
A
CORRECT
IMAGE
ONLY
IF
WE
HAVE
A
SINGLE
CONVEX
OBJECT
OFTEN
WE
CAN
USE
CULLING
IN
ADDITION
TO
THE
Z
BUFFER
ALGORITHM
WHICH
WORKS
WITH
ANY
COLLECTION
OF
POLYGONS
FOR
EXAMPLE
SUPPOSE
THAT
WE
HAVE
A
SCENE
COMPOSED
OF
A
COLLECTION
OF
N
CUBES
IF
WE
USE
ONLY
THE
Z
BUFFER
ALGORITHM
WE
PASS
POLYGONS
THROUGH
THE
PIPELINE
IF
WE
ENABLE
CULLING
HALF
THE
POLYGONS
CAN
BE
ELIMINATED
EARLY
IN
THE
PIPELINE
AND
THUS
ONLY
POLYGONS
PASS
THROUGH
ALL
STAGES
OF
THE
PIPELINE
WE
CONSIDER
CULLING
FURTHER
IN
CHAPTER
DISPLAYING
MESHES
WE
NOW
HAVE
THE
TOOLS
TO
WALK
THROUGH
A
SCENE
INTERACTIVELY
BY
HAVING
THE
CAMERA
PARAMETERS
CHANGE
IN
RESPONSE
TO
USER
INPUT
BEFORE
INTRODUCING
A
SIMPLE
INTERFACE
LET
CONSIDER
ANOTHER
EXAMPLE
OF
DATA
DISPLAY
MESH
PLOTS
A
MESH
IS
A
SET
OF
POLYGONS
THAT
SHARE
VERTICES
AND
EDGES
A
GENERAL
MESH
AS
SHOWN
IN
FIGURE
MAY
CONTAIN
POLYGONS
WITH
ANY
NUMBER
OF
VERTICES
AND
REQUIRE
A
MODERATELY
SOPHISTICATED
DATA
STRUCTURE
TO
STORE
AND
DISPLAY
EFFICIENTLY
RECTANGULAR
AND
TRIANGULAR
MESHES
SUCH
AS
WE
INTRODUCED
IN
CHAPTER
FOR
MODELING
A
SPHERE
ARE
MUCH
SIMPLER
TO
WORK
WITH
AND
ARE
USEFUL
FOR
A
WIDE
VARIETY
OF
APPLICATIONS
HERE
WE
INTRODUCE
RECTANGULAR
MESHES
FOR
THE
DISPLAY
OF
HEIGHT
DATA
HEIGHT
DATA
DETERMINE
A
SURFACE
SUCH
AS
TERRAIN
THROUGH
EITHER
A
FUNCTION
THAT
GIVES
THE
HEIGHTS
ABOVE
A
REFERENCE
VALUE
SUCH
AS
ELEVATIONS
ABOVE
SEA
LEVEL
OR
THROUGH
SAMPLES
TAKEN
AT
VARIOUS
POINTS
ON
THE
SURFACE
SUPPOSE
THAT
THE
HEIGHTS
ARE
GIVEN
BY
Y
THROUGH
A
FUNCTION
Y
F
X
Z
WHERE
X
AND
Z
ARE
THE
POINTS
ON
A
TWO
DIMENSIONAL
SURFACE
SUCH
AS
A
RECTANGLE
THUS
FOR
EACH
X
Z
WE
GET
EXACTLY
ONE
Y
AS
SHOWN
IN
FIGURE
SUCH
SURFACES
ARE
SOMETIMES
CALLED
DIMENSIONAL
SURFACES
OR
HEIGHT
FIELDS
ALTHOUGH
ALL
SURFACES
CANNOT
BE
REPRESENTED
THIS
WAY
THEY
HAVE
MANY
APPLICATIONS
FOR
EXAMPLE
IF
WE
USE
AN
X
Z
COORDINATE
SYSTEM
TO
GIVE
POSITIONS
ON
THE
SURFACE
OF
THE
EARTH
THEN
WE
CAN
USE
SUCH
A
FUNCTION
TO
REPRESENT
THE
HEIGHT
OR
ALTITUDE
AT
EACH
LOCATION
IN
MANY
SITUATIONS
FIGURE
MESH
FIGURE
HEIGHT
FIELD
THE
FUNCTION
F
IS
KNOWN
ONLY
DISCRETELY
AND
WE
HAVE
A
SET
OF
SAMPLES
OR
MEASUREMENTS
OF
EXPERIMENTAL
DATA
OF
THE
FORM
YIJ
F
XI
ZJ
WE
ASSUME
THAT
THESE
DATA
POINTS
ARE
EQUALLY
SPACED
SUCH
THAT
XI
I
N
ZJ
J
M
WHERE
AND
ARE
THE
SPACING
BETWEEN
THE
SAMPLES
IN
THE
X
AND
Z
DIRECTIONS
RESPECTIVELY
IF
F
IS
KNOWN
ANALYTICALLY
THEN
WE
CAN
SAMPLE
IT
TO
OBTAIN
A
SET
OF
DISCRETE
DATA
WITH
WHICH
TO
WORK
PROBABLY
THE
SIMPLEST
WAY
TO
DISPLAY
THE
DATA
IS
TO
DRAW
A
LINE
STRIP
FOR
EACH
VALUE
OF
X
AND
ANOTHER
FOR
EACH
VALUE
OF
Z
THUS
GENERATING
N
M
LINE
STRIPS
SUPPOSE
THAT
THE
HEIGHT
DATA
ARE
IN
AN
ARRAY
DATA
WE
CAN
FORM
A
SINGLE
ARRAY
WITH
THE
DATA
CONVERTED
TO
VERTICES
ARRANGED
BY
ROWS
WITH
THE
CODE
FLOAT
DATA
N
M
VERTICES
N
M
INT
K
FOR
INT
I
I
N
I
FOR
INT
J
J
M
J
VERTICES
K
I
DATA
I
J
J
K
WE
CAN
FORM
AN
ARRAY
FOR
THE
VERTICES
BY
COLUMN
BY
SWITCHING
ROLES
OF
I
AND
J
AS
FOLLOWS
VERTICES
N
M
INT
K
FOR
INT
I
I
M
I
FOR
INT
J
J
N
J
VERTICES
K
J
DATA
J
I
I
K
WE
USUALLY
WILL
WANT
TO
SCALE
THE
DATA
TO
BE
OVER
A
CONVENIENT
RANGE
SUCH
AS
AND
SCALE
THE
X
AND
Z
VALUES
TO
MAKE
THEM
EASIER
TO
DISPLAY
AS
PART
OF
THE
MODEL
VIEW
MATRIX
OR
EQUIVALENTLY
BY
ADJUSTING
THE
SIZE
OF
THE
VIEW
VOLUME
WE
CAN
DISPLAY
THESE
VERTICES
BY
SENDING
BOTH
ARRAYS
TO
THE
VERTEX
SHADER
SO
IN
THE
INITIALIZATION
WE
SET
UP
THE
VERTEX
BUFFER
OBJECT
WITH
THE
CORRECT
SIZE
BUT
WITHOUT
SENDING
ANY
DATA
GLUINT
BUFFER
GLBINDVERTEXARRAY
BUFFER
LOC
GLGETATTRIBLOCATION
PROGRAM
VPOSITION
GLENABLEVERTEXATTRIBARRAY
LOC
GLVERTEXATTRIBPOINTER
LOC
GLGENBUFFERS
BUFFER
GLBINDBUFFER
BUFFER
GLBUFFERDATA
SIZEOF
VERTICES
NULL
IN
THE
DISPLAY
CALLBACK
WE
LOAD
THE
TWO
VERTEX
ARRAYS
SUCCESSIVELY
AND
DISPLAY
THEM
FORM
ARRAY
OF
VERTICES
BY
ROW
HERE
GLBUFFERDATA
SIZEOF
VERTICES
VERTICES
GLDRAWARRAYS
N
M
FORM
ARRAY
OF
VERTICES
BY
COLUMN
HERE
GLBUFFERDATA
SIZEOF
VERTICES
VERTICES
GLDRAWARRAYS
N
M
YOU
SHOULD
NOW
BE
ABLE
TO
COMPLETE
A
PROGRAM
TO
DISPLAY
THE
DATA
FIGURE
SHOWS
A
RECTANGULAR
MESH
FROM
HEIGHT
DATA
FOR
A
PART
OF
HONOLULU
HAWAII
THESE
DATA
ARE
AVAILABLE
ON
THE
WEB
SITE
FOR
THE
BOOK
THERE
ARE
A
FEW
PROBLEMS
WITH
THIS
SIMPLE
FIGURE
MESH
PLOT
OF
HONOLULU
DATA
USING
LINE
STRIPS
APPROACH
ONE
IS
THAT
WE
HAVE
TO
LOAD
DATA
ONTO
THE
GPU
TWICE
EVERY
TIME
WE
WANT
TO
DISPLAY
THE
MESH
AND
THUS
ARE
WASTING
A
LOT
OF
TIME
MOVING
DATA
FROM
THE
CPU
TO
THE
GPU
A
SECOND
PROBLEM
IS
THAT
WE
ARE
NOT
DOING
ANY
HIDDEN
SURFACE
REMOVAL
SO
WE
SEE
THE
LINES
FROM
PARTS
OF
THE
ORIGINAL
SURFACE
THAT
SHOULD
BE
HIDDEN
FROM
THE
VIEWER
THIRD
THERE
ARE
SOME
ANNOYING
EXTRA
LINES
THAT
APPEAR
FROM
THE
END
OF
ONE
ROW
OR
COLUMN
TO
THE
NEXT
ROW
OR
COLUMN
THESE
LINES
ARE
A
CONSEQUENCE
OF
PUTTING
ALL
ROWS
AND
COLUMNS
INTO
A
SINGLE
LINE
STRIP
WE
CAN
GET
AROUND
THE
LAST
PROBLEM
BY
ASSIGNING
VERTEX
COLORS
CAREFULLY
THE
FIRST
TWO
PROBLEMS
CAN
BE
AVOIDED
BY
DISPLAYING
THE
DATA
AS
A
SURFACE
USING
POLYGONS
AN
ADDED
ADVANTAGE
IN
USING
POLYGONS
IS
THAT
WE
WILL
BE
ABLE
TO
EXTEND
OUR
CODE
TO
DISPLAYING
THE
MESH
WITH
LIGHTS
AND
MATERIAL
PROPERTIES
IN
CHAPTER
DISPLAYING
MESHES
AS
A
SURFACE
ONE
SIMPLE
WAY
TO
GENERATE
A
SURFACE
IS
THROUGH
A
TRIANGULAR
MESH
WE
CAN
USE
THE
FOUR
POINTS
YIJ
YI
J
YI
J
AND
YI
J
TO
GENERATE
TWO
TRIANGLES
THUS
THE
HEIGHT
DATA
SPECIFY
A
MESH
OF
TRIANGLES
THE
BASIC
OPENGL
PROGRAM
IS
STRAIGHTFORWARD
WE
CAN
FORM
THE
ARRAY
OF
TRIANGLE
DATA
IN
THE
MAIN
FUNCTION
OR
AS
PART
OF
INITIALIZATION
AS
IN
THE
FOLLOWING
CODE
WHICH
NORMALIZES
THE
DATA
TO
BE
IN
THE
RANGE
THE
X
VALUES
TO
BE
OVER
AND
THE
Z
VALUES
TO
BE
OVER
FLOAT
DATA
N
M
ALL
VALUES
ASSUMED
NON
NEGATIVE
FLOAT
FMAX
MAXIMUM
OF
DATA
TRIANGLES
N
M
VERTEX
POSITIONS
FLOAT
FN
FLOAT
N
FLOAT
FM
FLOAT
M
INT
K
FOR
I
I
N
I
FOR
J
J
M
J
NM
QUADS
TRIANGLES
QUAD
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
TRIANGLES
K
I
FN
DATA
I
J
FMAX
J
FM
K
WE
INITIALIZE
THE
VERTEX
ARRAY
AS
BEFORE
GLBINDVERTEXARRAY
ABUFFER
LOC
GLGETATTRIBLOCATION
PROGRAM
VPOSITION
GLENABLEVERTEXATTRIBARRAY
LOC
GLVERTEXATTRIBPOINTER
LOC
GLGENBUFFERS
BUFFERS
GLBINDBUFFER
BUFFERS
GLBUFFERDATA
SIZEOF
TRIANGLES
TRIANGLES
AND
DISPLAY
IT
AS
GLPOLYGONMODE
GLDRAWARRAYS
N
M
IF
WE
INTEGRATE
THIS
CODE
WITH
OUR
PREVIOUS
EXAMPLE
USING
LINE
STRIPS
THE
OUTPUT
WILL
LOOK
ALMOST
IDENTICAL
ALTHOUGH
WE
HAVE
DESIGNED
A
SURFACE
BY
CHOOSING
TO
DISPLAY
ONLY
THE
EDGES
BY
USING
A
POLYGON
MODE
OF
WE
DO
NOT
GENERATE
ANY
FRAGMENTS
CORRESPONDING
TO
THE
INSIDE
OF
THE
POLYGON
AND
THUS
WE
SEE
THE
EDGES
OF
POLYGONS
THAT
WOULD
BE
HIDDEN
IF
THE
MODE
WERE
WE
CAN
FIX
THIS
PROBLEM
BY
RENDERING
THE
DATA
TWICE
FIRST
AS
A
FILLED
WHITE
SURFACE
AND
SECOND
AS
BLACK
LINES
BECAUSE
THE
DATA
ARE
ALREADY
ON
THE
GPU
WE
DO
NOT
HAVE
TO
SEND
ANY
VERTEX
DATA
TO
THE
GPU
FOR
THE
SECOND
RENDERING
WE
CAN
SPECIFY
TWO
COLORS
IN
THE
INITIALIZATION
THAT
WE
WILL
SEND
TO
THE
FRAGMENT
SHADER
WHITE
BLACK
GLGETUNIFORMLOCATION
PROGRAM
FCOLOR
AND
THEN
MODIFY
TO
THE
DISPLAY
CALLBACK
TO
HAVE
THE
CODE
GLPOLYGONMODE
WHITE
GLDRAWARRAYS
N
M
GLPOLYGONMODE
BLACK
GLDRAWARRAYS
N
M
THE
MODIFIED
FRAGMENT
SHADER
IS
UNIFORM
FCOLOR
VOID
MAIN
FCOLOR
POLYGON
OFFSET
THERE
ARE
INTERESTING
ASPECTS
TO
THIS
OPENGL
PROGRAM
AND
WE
CAN
MAKE
VARIOUS
MODIFICATIONS
FIRST
IF
WE
USE
ALL
THE
DATA
THE
RESULTING
PLOT
MAY
CONTAIN
MANY
SMALL
POLYGONS
THE
RESULTING
DENSITY
OF
LINES
IN
THE
DISPLAY
MAY
BE
ANNOYING
AND
CAN
CONTAIN
MOIRE
PATTERNS
HENCE
WE
MIGHT
PREFER
TO
SUBSAMPLE
THE
DATA
EITHER
BY
USING
EVERY
KTH
POINT
FOR
SOME
K
OR
BY
AVERAGING
GROUPS
OF
DATA
POINTS
TO
OBTAIN
A
NEW
SET
OF
SAMPLES
WITH
SMALLER
N
AND
M
THERE
IS
ONE
ADDITIONAL
TRICK
THAT
WE
USED
IN
THE
DISPLAY
OF
FIGURE
IF
WE
DRAW
BOTH
A
POLYGON
AND
A
LINE
LOOP
WITH
THE
CODE
IN
THE
PREVIOUS
SECTION
THEN
EACH
TRIANGLE
IS
RENDERED
TWICE
IN
THE
SAME
PLANE
ONCE
FILLED
AND
ONCE
BY
ITS
EDGES
EVEN
THOUGH
THE
SECOND
RENDERING
OF
JUST
THE
EDGES
IS
DONE
WITH
FILLED
RENDERING
NUMER
ICAL
INACCURACIES
IN
THE
RENDERER
OFTEN
CAUSE
PARTS
OF
SECOND
RENDERING
TO
LIE
BEHIND
THE
CORRESPONDING
FRAGMENTS
IN
THE
FIRST
RENDERING
WE
CAN
AVOID
THIS
PROBLEM
BY
ENABLING
THE
POLYGON
OFFSET
MODE
AND
SETTING
THE
OFFSET
PARAMETERS
USING
GLPOLY
GONOFFSET
POLYGON
FILL
OFFSET
MOVES
FRAGMENTS
SLIGHTLY
AWAY
FROM
THE
VIEWER
SO
ALL
THE
DESIRED
LINES
SHOULD
BE
VISIBLE
IN
INITIALIZATION
WE
CAN
SET
UP
POLYGON
OFFSET
BY
GLENABLE
GLPOLYGONOFFSET
THE
TWO
PARAMETERS
IN
POLYGONOFFSET
ARE
COMBINED
WITH
THE
SLOPE
OF
THE
POLYGON
AND
AN
IMPLEMENTATION
DEPENDENT
CONSTANT
CONSEQUENTLY
YOU
MAY
HAVE
TO
DO
A
LITTLE
EXPERIMENTATION
TO
FIND
THE
BEST
VALUES
PERHAPS
THE
GREATEST
WEAKNESS
OF
OUR
CODE
IS
THAT
WE
ARE
SENDING
TOO
MUCH
DATA
TO
THE
GPU
AND
NOT
USING
THE
MOST
EFFICIENT
RENDERING
METHOD
CONSIDER
A
MESH
CONSISTING
OF
A
SINGLE
ROW
OF
N
QUADRILATERALS
IF
WE
RENDER
IT
AS
TRIANGLES
USING
VERTICES
N
GLDRAWARRAYS
N
WE
SEND
VERTICES
TO
THE
GPU
IF
WE
INSTEAD
SET
OUR
VERTICES
AS
A
TRIANGLE
STRIP
THEN
THESE
TWO
LINES
OF
CODE
BECOME
VERTICES
N
GLDRAWARRAYS
N
NOT
ONLY
ARE
WE
SENDING
LESS
DATA
AND
REQUIRING
LESS
OF
THE
GPU
MEMORY
BUT
THE
GPU
WILL
RENDER
THE
TRIANGLES
MUCH
FASTER
AS
A
TRIANGLE
STRIP
AS
OPPOSED
TO
INDIVIDUAL
TRIANGLES
FOR
A
M
MESH
WE
CAN
EASILY
CONSTRUCT
THE
ARRAY
FOR
A
TRIANGLE
STRIP
FOR
AN
N
M
MESH
THE
PROCESS
IS
MORE
COMPLEX
ALTHOUGH
IT
WOULD
BE
SIMPLE
TO
REPEAT
THE
PROCESS
FOR
THE
M
MESH
N
TIMES
SETTING
UP
N
TRIANGLE
STRIPS
THIS
APPROACH
WOULD
HAVE
US
REPEATEDLY
SENDING
DATA
TO
THE
GPU
WHAT
WE
NEED
IS
A
SINGLE
TRIANGLE
STRIP
FOR
THE
ENTIRE
MESH
EXERCISES
AND
OUTLINE
TWO
APPROACHES
WALKING
THROUGH
A
SCENE
THE
NEXT
STEP
IS
TO
SPECIFY
THE
CAMERA
AND
ADD
INTERACTIVITY
IN
THIS
VERSION
WE
USE
PERSPECTIVE
VIEWING
AND
WE
ALLOW
THE
VIEWER
TO
MOVE
THE
CAMERA
BY
PRESSING
THE
X
X
Y
Y
Z
AND
Z
KEYS
ON
THE
KEYBOARD
BUT
WE
HAVE
THE
CAMERA
ALWAYS
POINTING
AT
THE
CENTER
OF
THE
CUBE
THE
LOOKAT
FUNCTION
PROVIDES
A
SIMPLE
WAY
TO
REPOSITION
AND
REORIENT
THE
CAMERA
THE
CHANGES
THAT
WE
HAVE
TO
MAKE
TO
OUR
PREVIOUS
PROGRAM
IN
SECTION
ARE
MINOR
WE
DEFINE
AN
ARRAY
VIEWER
TO
HOLD
THE
CAMERA
POSITION
ITS
CONTENTS
ARE
ALTERED
BY
THE
SIMPLE
KEYBOARD
CALLBACK
FUNCTION
KEYS
AS
FOLLOWS
VOID
KEYS
UNSIGNED
CHAR
KEY
INT
X
INT
Y
IF
KEY
X
VIEWER
IF
KEY
X
VIEWER
IF
KEY
Y
VIEWER
IF
KEY
Y
VIEWER
IF
KEY
Z
VIEWER
IF
KEY
Z
VIEWER
GLUTPOSTREDISPLAY
THE
DISPLAY
FUNCTION
CALLS
LOOKAT
USING
VIEWER
FOR
THE
CAMERA
POSITION
AND
USES
THE
ORIGIN
FOR
THE
AT
POSITION
THE
CUBE
IS
ROTATED
AS
BEFORE
BASED
ON
THE
MOUSE
INPUT
NOTE
THE
ORDER
OF
THE
FUNCTION
CALLS
IN
DISPLAY
THAT
ALTER
THE
MODEL
VIEW
MATRIX
VOID
DISPLAY
GLCLEAR
LOOKAT
VIEWER
VIEWER
VIEWER
ROTATEX
THETA
ROTATEY
THETA
ROTATEZ
THETA
DRAW
MESH
OR
OTHER
OBJECTS
HERE
GLUTSWAPBUFFERS
WE
CAN
INVOKE
FRUSTUM
FROM
THE
RESHAPE
CALLBACK
TO
SPECIFY
THE
CAMERA
LENS
THROUGH
THE
FOLLOWING
CODE
PROJECTION
VOID
MYRESHAPE
INT
W
INT
H
GLVIEWPORT
W
H
GLFLOAT
LEFT
RIGHT
BOTTOM
TOP
GLFLOAT
ASPECT
GLFLOAT
W
H
IF
ASPECT
BOTTOM
ASPECT
TOP
ASPECT
ELSE
LEFT
ASPECT
RIGHT
ASPECT
PROJECTION
FRUSTUM
LEFT
RIGHT
BOTTOM
TOP
PROJECTION
NOTE
THAT
WE
CHOSE
THE
VALUES
OF
THE
PARAMETERS
IN
FRUSTUM
BASED
ON
THE
ASPECT
RATIO
OF
THE
WINDOW
OTHER
THAN
THE
ADDED
SPECIFICATION
OF
A
KEYBOARD
CALLBACK
FUNCTION
IN
MAIN
THE
REST
OF
THE
PROGRAM
IS
THE
SAME
AS
THE
PROGRAM
IN
SECTION
IF
YOU
RUN
THIS
PROGRAM
YOU
SHOULD
NOTE
THE
EFFECTS
OF
MOVING
THE
CAMERA
THE
LENS
AND
THE
SIDES
OF
THE
VIEWING
FRUSTUM
NOTE
WHAT
HAPPENS
AS
YOU
MOVE
TOWARD
THE
MESH
YOU
SHOULD
ALSO
CONSIDER
THE
EFFECT
OF
ALWAYS
HAVING
THE
VIEWER
LOOK
AT
THE
CENTER
OF
THE
MESH
AS
SHE
IS
MOVING
NOTE
THAT
WE
COULD
HAVE
USED
THE
MOUSE
BUTTONS
TO
MOVE
THE
VIEWER
WE
COULD
USE
THE
MOUSE
BUTTONS
TO
MOVE
THE
USER
FORWARD
OR
TO
TURN
HER
RIGHT
OR
LEFT
SEE
EXERCISE
HOWEVER
BY
USING
THE
KEYBOARD
FOR
MOVING
THE
VIEWER
WE
CAN
USE
THE
MOUSE
TO
MOVE
THE
OBJECT
AS
WITH
THE
ROTATING
CUBE
IN
CHAPTER
IN
THIS
EXAMPLE
WE
ARE
USING
DIRECT
POSITIONING
OF
THE
CAMERA
THROUGH
LOOKAT
THERE
ARE
OTHER
POSSIBILITIES
ONE
IS
TO
USE
ROTATION
AND
TRANSLATION
MATRICES
TO
ALTER
THE
MODEL
VIEW
MATRIX
INCREMENTALLY
IF
WE
WANT
TO
MOVE
THE
VIEWER
THROUGH
THE
SCENE
WITHOUT
HAVING
HER
LOOKING
AT
A
FIXED
POINT
THIS
OPTION
MAY
BE
MORE
APPEALING
WE
COULD
ALSO
KEEP
A
POSITION
VARIABLE
IN
THE
PROGRAM
AND
CHANGE
IT
AS
THE
VIEWER
MOVES
IN
THIS
CASE
THE
MODEL
VIEW
MATRIX
WOULD
BE
COMPUTED
FROM
SCRATCH
RATHER
THAN
CHANGED
INCREMENTALLY
WHICH
OPTION
WE
CHOOSE
DEPENDS
ON
THE
PARTICULAR
APPLICATION
AND
OFTEN
ON
OTHER
FACTORS
AS
WELL
SUCH
AS
THE
POSSIBILITY
THAT
NUMERICAL
ERRORS
MIGHT
ACCUMULATE
IF
WE
WERE
TO
CHANGE
THE
MODEL
VIEW
MATRIX
INCREMENTALLY
MANY
TIMES
THE
BASIC
MESH
RENDERING
CAN
BE
EXTENDED
IN
MANY
WAYS
IN
CHAPTER
WE
WILL
LEARN
TO
ADD
LIGHTS
AND
SURFACE
PROPERTIES
TO
CREATE
A
MORE
REALISTIC
IMAGE
IN
CHAPTER
WE
WILL
LEARN
TO
ADD
A
TEXTURE
TO
THE
SURFACE
THE
TEXTURE
MAP
MIGHT
BE
AN
IMAGE
OF
THE
TERRAIN
FROM
A
PHOTOGRAPH
OR
OTHER
DATA
THAT
MIGHT
BE
OBTAINED
BY
DIGITIZATION
OF
A
MAP
IF
WE
COMBINE
THESE
TECHNIQUES
WE
CAN
GENERATE
A
DISPLAY
IN
WHICH
WE
CAN
MAKE
THE
IMAGE
DEPEND
ON
THE
TIME
OF
DAY
BY
CHANGING
THE
POSITION
OF
THE
LIGHT
SOURCE
IT
IS
ALSO
POSSIBLE
TO
OBTAIN
SMOOTHER
SURFACES
BY
USING
THE
DATA
TO
DEFINE
A
SMOOTHER
SURFACE
WITH
THE
AID
OF
ONE
OF
THE
SURFACE
TYPES
THAT
WE
WILL
INTRODUCE
IN
CHAPTER
PROJECTIONS
AND
SHADOWS
THE
CREATION
OF
SIMPLE
SHADOWS
IS
AN
INTERESTING
APPLICATION
OF
PROJECTION
MATRICES
ALTHOUGH
SHADOWS
ARE
NOT
GEOMETRIC
OBJECTS
THEY
ARE
IMPORTANT
COMPONENTS
OF
REALISTIC
IMAGES
AND
GIVE
MANY
VISUAL
CLUES
TO
THE
SPATIAL
RELATIONSHIPS
AMONG
THE
OBJECTS
IN
A
SCENE
STARTING
FROM
A
PHYSICAL
POINT
OF
VIEW
SHADOWS
REQUIRE
A
LIGHT
SOURCE
TO
BE
PRESENT
A
POINT
IS
IN
SHADOW
IF
IT
IS
NOT
ILLUMINATED
BY
ANY
LIGHT
SOURCE
OR
EQUIVALENTLY
IF
A
VIEWER
AT
THAT
POINT
CANNOT
SEE
ANY
LIGHT
SOURCES
HOWEVER
IF
THE
ONLY
LIGHT
SOURCE
IS
AT
THE
CENTER
OF
PROJECTION
THERE
ARE
NO
VISIBLE
SHADOWS
BECAUSE
ANY
SHADOWS
ARE
BEHIND
VISIBLE
OBJECTS
THIS
LIGHTING
STRATEGY
HAS
BEEN
CALLED
THE
FLASHLIGHT
IN
THE
EYE
MODEL
AND
CORRESPONDS
TO
THE
SIMPLE
LIGHTING
WE
HAVE
USED
THUS
FAR
TO
ADD
PHYSICALLY
CORRECT
SHADOWS
WE
MUST
UNDERSTAND
THE
INTERACTION
BETWEEN
LIGHT
AND
MATERIALS
A
TOPIC
THAT
WE
INVESTIGATE
IN
CHAPTER
THERE
WE
SHOW
THAT
GLOBAL
CALCULATIONS
ARE
DIFFICULT
NORMALLY
THEY
CANNOT
BE
DONE
IN
REAL
TIME
NEVERTHELESS
THE
IMPORTANCE
OF
SHADOWS
IN
APPLICATIONS
SUCH
AS
FLIGHT
SIMULATORS
LED
TO
A
NUMBER
OF
SPECIAL
APPROACHES
THAT
CAN
BE
USED
IN
MANY
CIRCUMSTANCES
CONSIDER
THE
SHADOW
GENERATED
BY
THE
POINT
SOURCE
IN
FIGURE
WE
ASSUME
FOR
SIMPLICITY
THAT
THE
SHADOW
FALLS
ON
THE
GROUND
OR
THE
SURFACE
Y
XL
YL
ZL
X
Z
FIGURE
SHADOW
FROM
A
SINGLE
POLYGON
NOT
ONLY
IS
THE
SHADOW
A
FLAT
POLYGON
CALLED
A
SHADOW
POLYGON
BUT
IT
ALSO
IS
THE
PROJECTION
OF
THE
ORIGINAL
POLYGON
ONTO
THE
SURFACE
SPECIFICALLY
THE
SHADOW
POLYGON
IS
THE
PROJECTION
OF
THE
POLYGON
ONTO
THE
SURFACE
WITH
THE
CENTER
OF
PROJECTION
AT
THE
LIGHT
SOURCE
THUS
IF
WE
DO
A
PROJECTION
ONTO
THE
PLANE
OF
A
SURFACE
IN
A
FRAME
IN
WHICH
THE
LIGHT
SOURCE
IS
AT
THE
ORIGIN
WE
OBTAIN
THE
VERTICES
OF
THE
SHADOW
POLYGON
THESE
VERTICES
MUST
THEN
BE
CONVERTED
BACK
TO
A
REPRESENTATION
IN
THE
OBJECT
FRAME
RATHER
THAN
DO
THE
WORK
AS
PART
OF
AN
APPLICATION
PROGRAM
WE
CAN
FIND
A
SUITABLE
PROJECTION
MATRIX
AND
USE
IT
TO
COMPUTE
THE
VERTICES
OF
THE
SHADOW
POLYGON
SUPPOSE
THAT
WE
START
WITH
A
LIGHT
SOURCE
AT
XL
YL
ZL
AS
SHOWN
IN
FIGURE
A
IF
WE
REORIENT
THE
FIGURE
SUCH
THAT
THE
LIGHT
SOURCE
IS
AT
THE
ORIGIN
AS
SHOWN
IN
FIGURE
B
BY
A
TRANSLATION
MATRIX
T
XL
YL
ZL
THEN
WE
HAVE
A
SIMPLE
PERSPECTIVE
PROJECTION
THROUGH
THE
ORIGIN
THE
PROJECTION
MATRIX
IS
M
FINALLY
WE
TRANSLATE
EVERYTHING
BACK
WITH
T
XL
YL
ZL
THE
CONCATENATION
OF
THIS
MATRIX
AND
THE
TWO
TRANSLATION
MATRICES
PROJECTS
THE
VERTEX
X
Y
Z
TO
X
X
X
XL
Y
YL
YL
YP
Z
Z
Z
ZL
Y
YL
YL
Y
Z
A
B
FIGURE
SHADOW
POLYGON
PROJECTION
A
FROM
A
LIGHT
SOURCE
B
WITH
SOURCE
MOVED
TO
THE
ORIGIN
HOWEVER
WITH
AN
OPENGL
PROGRAM
WE
CAN
ALTER
THE
MODEL
VIEW
MATRIX
TO
FORM
THE
DESIRED
POLYGON
AS
FOLLOWS
IF
THE
LIGHT
SOURCE
IS
FIXED
WE
CAN
COMPUTE
THE
SHADOW
PROJECTION
MATRIX
ONCE
AS
PART
OF
INITIALIZATION
OTHERWISE
WE
NEED
TO
RECOMPUTE
IT
PERHAPS
IN
THE
IDLE
CALLBACK
FUNCTION
IF
THE
LIGHT
SOURCE
IS
MOVING
THE
CODE
FOR
SETTING
UP
THE
MATRIX
IS
AS
FOLLOWS
FLOAT
LIGHT
LOCATION
OF
LIGHT
M
SHADOW
PROJECTION
MATRIX
INITIALLY
AN
IDENTITY
MATRIX
M
LIGHT
LET
PROJECT
A
SINGLE
SQUARE
POLYGON
PARALLEL
ONTO
THE
PLANE
Y
WE
CAN
SPECIFY
THE
SQUARE
THROUGH
THE
VERTICES
SQUARE
NOTE
THAT
THE
VERTICES
ARE
ORDERED
SO
THAT
WE
CAN
RENDER
THEM
USING
A
TRIANGLE
STRIP
WE
INITIALIZE
A
RED
COLOR
FOR
THE
SQUARE
AND
A
BLACK
COLOR
FOR
ITS
SHADOW
WHICH
WE
WILL
SEND
TO
THE
FRAGMENT
SHADER
WE
INITIALIZE
A
VERTEX
ARRAY
AND
A
BUFFER
OBJECT
AS
WE
DID
IN
OUR
PREVIOUS
EXAMPLES
GLUINT
ABUFFER
BUFFER
GLGENVERTEXARRAYS
ABUFFER
GLBINDVERTEXARRAY
ABUFFER
INT
LOC
GLGETATTRIBLOCATION
PROGRAM
VPOSITION
GLENABLEVERTEXATTRIBARRAY
LOC
GLVERTEXATTRIBPOINTER
LOC
GLGETUNIFORMLOCATION
PROGRAM
FCOLOR
GLGENBUFFERS
BUFFER
GLBINDBUFFER
BUFFER
GLBUFFERDATA
SIZEOF
SQUARE
SQUARE
IF
THE
DATA
DO
NOT
CHANGE
WE
CAN
ALSO
SET
THE
PROJECTION
MATRIX
AND
MODEL
VIEW
MATRIX
AS
PART
OF
INITIALIZATION
AND
SEND
THEM
TO
THE
VERTEX
SHADER
LOOKAT
EYE
AT
UP
PROJECTION
ORTHO
LEFT
RIGHT
BOTTOM
TOP
NEAR
FAR
PROJECTION
THE
CORE
OF
THE
DISPLAY
CALLBACK
IS
VOID
DISPLAY
MM
CLEAR
THE
WINDOW
GLCLEAR
RENDER
RED
SQUARE
RED
GLDRAWARRAYS
MATRIX
TO
COMPUTE
VERTICES
OF
SHADOW
POLYGON
MM
TRANSLATE
LIGHT
LIGHT
LIGHT
M
TRANSLATE
LIGHT
LIGHT
LIGHT
MM
RENDER
SHADOW
POLYGON
BLACK
GLDRAWARRAYS
GLUTSWAPBUFFERS
NOTE
THAT
ALTHOUGH
WE
ARE
PERFORMING
A
PROJECTION
WITH
RESPECT
TO
THE
LIGHT
SOURCE
THE
MATRIX
THAT
WE
USE
IS
THE
MODEL
VIEW
MATRIX
WE
RENDER
THE
SAME
POLYGON
TWICE
THE
FIRST
TIME
AS
USUAL
AND
THE
SECOND
TIME
WITH
AN
ALTERED
MODEL
VIEW
MATRIX
THAT
TRANSFORMS
THE
VERTICES
THE
SAME
VIEWING
CONDITIONS
ARE
APPLIED
TO
BOTH
THE
POLYGON
AND
ITS
SHADOW
POLYGON
THE
RESULTS
OF
COMPUTING
SHADOWS
FOR
THE
COLORED
CUBE
ARE
SHOWN
IN
COLOR
PLATE
FOR
A
SIMPLE
ENVIRONMENT
SUCH
AS
AN
AIRPLANE
FLYING
OVER
FLAT
TERRAIN
CASTING
A
SINGLE
SHADOW
THIS
TECHNIQUE
WORKS
WELL
IT
IS
ALSO
EASY
TO
CONVERT
FROM
POINT
SOURCES
TO
DISTANT
PARALLEL
LIGHT
SOURCES
SEE
EXERCISE
HOWEVER
WHEN
OBJECTS
CAN
CAST
SHADOWS
ON
OTHER
OBJECTS
THIS
METHOD
BECOMES
IMPRACTICAL
IN
CHAPTER
WE
ADDRESS
MORE
GENERAL
BUT
SLOWER
RENDERING
METHODS
THAT
WILL
CREATE
SHADOWS
AUTOMATICALLY
AS
PART
OF
THE
RENDERING
PROCESS
SUMMARY
AND
NOTES
WE
HAVE
COME
A
LONG
WAY
WE
CAN
NOW
WRITE
COMPLETE
NONTRIVIAL
THREE
DIMENSIONAL
APPLICATIONS
PROBABLY
THE
MOST
INSTRUCTIVE
ACTIVITY
THAT
YOU
CAN
DO
NOW
IS
TO
WRITE
SUCH
AN
APPLICATION
DEVELOPING
SKILL
WITH
MANIPULATING
THE
MODEL
VIEW
AND
PROJEC
TION
FUNCTIONS
TAKES
PRACTICE
WE
HAVE
PRESENTED
THE
MATHEMATICS
OF
THE
STANDARD
PROJECTIONS
ALTHOUGH
MOST
APIS
OBVIATE
THE
APPLICATION
PROGRAMMER
FROM
WRITING
PROJECTION
FUNCTIONS
UNDER
STANDING
THE
MATHEMATICS
LEADS
TO
UNDERSTANDING
A
PIPELINE
IMPLEMENTATION
BASED
ON
CONCATENATION
OF
MATRICES
UNTIL
RECENTLY
APPLICATION
PROGRAMS
HAD
TO
DO
THE
PROJECTIONS
WITHIN
THE
APPLICATIONS
AND
MOST
HARDWARE
SYSTEMS
DID
NOT
SUPPORT
PERSPECTIVE
PROJECTIONS
THERE
ARE
THREE
MAJOR
THEMES
IN
THE
REMAINDER
OF
THIS
BOOK
FIRST
WE
EXPLORE
MODELING
FURTHER
BY
EXPANDING
OUR
BASIC
SET
OF
PRIMITIVES
IN
CHAPTER
WE
INCORPO
RATE
MORE
COMPLEX
RELATIONSHIPS
BETWEEN
SIMPLE
OBJECTS
THROUGH
HIERARCHICAL
MODELS
IN
CHAPTER
WE
EXPLORE
APPROACHES
TO
MODELING
THAT
ALLOW
US
TO
DESCRIBE
OBJECTS
THROUGH
PROCEDURES
RATHER
THAN
AS
GEOMETRIC
OBJECTS
THIS
APPROACH
ALLOWS
US
TO
MODEL
OBJECTS
WITH
ONLY
AS
MUCH
DETAIL
AS
IS
NEEDED
TO
INCORPORATE
PHYSICAL
LAWS
INTO
OUR
MODELS
AND
TO
MODEL
NATURAL
PHENOMENA
THAT
CANNOT
BE
DESCRIBED
BY
POLYGONS
IN
CHAPTER
WE
LEAVE
THE
WORLD
OF
FLAT
OBJECTS
ADDING
CURVES
AND
CURVED
SURFACES
THESE
OBJECTS
ARE
DEFINED
BY
VERTICES
AND
WE
CAN
IMPLEMENT
THEM
BY
BREAKING
THEM
INTO
SMALL
FLAT
PRIMITIVES
SO
WE
CAN
USE
THE
SAME
VIEWING
PIPELINE
THE
SECOND
MAJOR
THEME
IS
REALISM
ALTHOUGH
MORE
COMPLEX
OBJECTS
ALLOW
US
TO
BUILD
MORE
REALISTIC
MODELS
WE
ALSO
EXPLORE
MORE
COMPLEX
RENDERING
OPTIONS
IN
CHAPTER
WE
CONSIDER
THE
INTERACTION
OF
LIGHT
WITH
THE
MATERIALS
THAT
CHARACTERIZE
OUR
OBJECTS
WE
LOOK
MORE
DEEPLY
AT
HIDDEN
SURFACE
REMOVAL
METHODS
AT
SHADING
MODELS
AND
IN
CHAPTER
AT
TECHNIQUES
SUCH
AS
TEXTURE
MAPPING
THAT
ALLOW
US
TO
CREATE
COMPLEX
IMAGES
FROM
SIMPLE
OBJECTS
USING
ADVANCED
RENDERING
TECHNIQUES
THIRD
WE
LOOK
MORE
DEEPLY
AT
IMPLEMENTATION
IN
CHAPTER
AT
THIS
POINT
WE
HAVE
INTRODUCED
THE
MAJOR
FUNCTIONAL
UNITS
OF
THE
GRAPHICS
PIPELINE
WE
DISCUSS
THE
DETAILS
OF
THE
ALGORITHMS
USED
IN
EACH
UNIT
WE
WILL
ALSO
SEE
ADDITIONAL
POSSIBILITIES
FOR
CREATING
IMAGES
BY
WORKING
DIRECTLY
IN
THE
FRAME
BUFFER
SUGGESTED
READINGS
CARLBOM
AND
PACIOREK
DISCUSS
THE
RELATIONSHIPS
BETWEEN
CLASSICAL
AND
COM
PUTER
VIEWING
ROGERS
AND
ADAMS
GIVE
MANY
EXAMPLES
OF
THE
PROJECTION
MATRICES
CORRESPONDING
TO
THE
STANDARD
VIEWS
USED
IN
DRAFTING
FOLEY
ET
AL
WATT
AND
HEARN
AND
BAKER
DERIVE
CANONICAL
PROJECTION
TRANSFOR
MATIONS
ALL
FOLLOW
A
PHIGS
ORIENTATION
SO
THE
API
IS
SLIGHTLY
DIFFERENT
FROM
THE
ONE
USED
HERE
ALTHOUGH
FOLEY
DERIVES
THE
MOST
GENERAL
CASE
THE
REFERENCES
DIFFER
IN
WHETHER
THEY
USE
COLUMN
OR
ROW
MATRICES
IN
WHERE
THE
COP
IS
LOCATED
AND
IN
WHETHER
THE
PROJECTION
IS
IN
THE
POSITIVE
OR
NEGATIVE
Z
DIRECTION
SEE
THE
OPENGL
PRO
GRAMMING
GUIDE
FOR
A
FURTHER
DISCUSSION
OF
THE
USE
OF
THE
MODEL
VIEW
AND
PROJECTION
MATRICES
IN
OPENGL
EXERCISES
NOT
ALL
PROJECTIONS
ARE
PLANAR
GEOMETRIC
PROJECTIONS
GIVE
AN
EXAMPLE
OF
A
PROJECTION
IN
WHICH
THE
PROJECTION
SURFACE
IS
NOT
A
PLANE
AND
ANOTHER
IN
WHICH
THE
PROJECTORS
ARE
NOT
LINES
CONSIDER
AN
AIRPLANE
WHOSE
POSITION
IS
SPECIFIED
BY
THE
ROLL
PITCH
AND
YAW
AND
BY
THE
DISTANCE
FROM
AN
OBJECT
FIND
A
MODEL
VIEW
MATRIX
IN
TERMS
OF
THESE
PARAMETERS
CONSIDER
A
SATELLITE
ORBITING
THE
EARTH
ITS
POSITION
ABOVE
THE
EARTH
IS
SPECIFIED
IN
POLAR
COORDINATES
FIND
A
MODEL
VIEW
MATRIX
THAT
KEEPS
THE
VIEWER
LOOKING
AT
THE
EARTH
SUCH
A
MATRIX
COULD
BE
USED
TO
SHOW
THE
EARTH
AS
IT
ROTATES
SHOW
HOW
TO
COMPUTE
U
AND
V
DIRECTIONS
FROM
THE
VPN
VRP
AND
VUP
USING
ONLY
CROSS
PRODUCTS
CAN
WE
OBTAIN
AN
ISOMETRIC
OF
THE
CUBE
BY
A
SINGLE
ROTATION
ABOUT
A
SUITABLY
CHOSEN
AXIS
EXPLAIN
YOUR
ANSWER
DERIVE
THE
PERSPECTIVE
PROJECTION
MATRIX
WHEN
THE
COP
CAN
BE
AT
ANY
POINT
AND
THE
PROJECTION
PLANE
CAN
BE
AT
ANY
ORIENTATION
SHOW
THAT
PERSPECTIVE
PROJECTION
PRESERVES
LINES
ANY
ATTEMPT
TO
TAKE
THE
PROJECTION
OF
A
POINT
IN
THE
SAME
PLANE
AS
THE
COP
WILL
LEAD
TO
A
DIVISION
BY
ZERO
WHAT
IS
THE
PROJECTION
OF
A
LINE
SEGMENT
THAT
HAS
ENDPOINTS
ON
EITHER
SIDE
OF
THE
PROJECTION
PLANE
DEFINE
ONE
OR
MORE
APIS
TO
SPECIFY
OBLIQUE
PROJECTIONS
YOU
DO
NOT
NEED
TO
WRITE
THE
FUNCTIONS
JUST
DECIDE
WHICH
PARAMETERS
THE
USER
MUST
SPECIFY
DERIVE
AN
OBLIQUE
PROJECTION
MATRIX
FROM
SPECIFICATION
OF
FRONT
AND
BACK
CLIP
PING
PLANES
AND
TOP
RIGHT
AND
BOTTOM
LEFT
INTERSECTIONS
OF
THE
SIDES
OF
THE
CLIPPING
VOLUME
WITH
THE
FRONT
CLIPPING
PLANE
OUR
APPROACH
OF
NORMALIZING
ALL
PROJECTIONS
SEEMS
TO
IMPLY
THAT
WE
COULD
PREDISTORT
ALL
OBJECTS
AND
SUPPORT
ONLY
ORTHOGRAPHIC
PROJECTIONS
EXPLAIN
ANY
PROBLEMS
WE
WOULD
FACE
IF
WE
TOOK
THIS
APPROACH
TO
BUILDING
A
GRAPHICS
SYSTEM
HOW
DO
THE
OPENGL
PROJECTION
MATRICES
CHANGE
IF
THE
COP
IS
NOT
AT
THE
ORIGIN
ASSUME
THAT
THE
COP
IS
AT
D
AND
THE
PROJECTION
PLANE
IS
Z
WE
CAN
CREATE
AN
INTERESTING
CLASS
OF
THREE
DIMENSIONAL
OBJECTS
BY
EXTENDING
TWO
DIMENSIONAL
OBJECTS
INTO
THE
THIRD
DIMENSION
BY
EXTRUSION
FOR
EXAMPLE
A
CIRCLE
BECOMES
A
CYLINDER
A
LINE
BECOMES
A
QUADRILATERAL
AND
A
QUADRILATERAL
IN
THE
PLANE
BECOMES
A
PARALLELEPIPED
USE
THIS
TECHNIQUE
TO
CONVERT
THE
TWO
DIMENSIONAL
MAZE
FROM
EXERCISE
TO
A
THREE
DIMENSIONAL
MAZE
EXTEND
THE
MAZE
PROGRAM
OF
EXERCISE
TO
ALLOW
THE
USER
TO
WALK
THROUGH
THE
MAZE
A
CLICK
ON
THE
MIDDLE
MOUSE
BUTTON
SHOULD
MOVE
THE
USER
FORWARD
A
CLICK
ON
THE
RIGHT
OR
LEFT
BUTTON
SHOULD
TURN
THE
USER
DEGREES
TO
THE
RIGHT
OR
LEFT
RESPECTIVELY
IF
WE
WERE
TO
USE
ORTHOGONAL
PROJECTIONS
TO
DRAW
THE
COORDINATE
AXES
THE
X
AND
Y
AXES
WOULD
LIE
IN
THE
PLANE
OF
THE
PAPER
BUT
THE
Z
AXIS
WOULD
POINT
OUT
OF
THE
PAGE
INSTEAD
WE
CAN
DRAW
THE
X
AND
Y
AXES
MEETING
AT
A
DEGREE
ANGLE
WITH
THE
Z
AXIS
GOING
OFF
AT
DEGREES
FROM
THE
X
AXIS
FIND
THE
MATRIX
THAT
PROJECTS
THE
ORIGINAL
ORTHOGONAL
COORDINATE
AXES
TO
THIS
VIEW
WRITE
A
PROGRAM
TO
DISPLAY
A
ROTATING
CUBE
IN
A
BOX
WITH
THREE
LIGHT
SOURCES
EACH
LIGHT
SOURCE
SHOULD
PROJECT
THE
CUBE
ONTO
ONE
OF
THE
THREE
VISIBLE
SIDES
OF
THE
BOX
FIND
THE
PROJECTION
OF
A
POINT
ONTO
THE
PLANE
AX
BY
CZ
D
FROM
A
LIGHT
SOURCE
LOCATED
AT
INFINITY
IN
THE
DIRECTION
DX
DY
DZ
USING
ONE
OF
THE
THREE
DIMENSIONAL
INTERFACES
DISCUSSED
IN
CHAPTER
WRITE
A
PROGRAM
TO
MOVE
THE
CAMERA
THROUGH
A
SCENE
COMPOSED
OF
SIMPLE
OBJECTS
WRITE
A
PROGRAM
TO
FLY
THROUGH
THE
THREE
DIMENSIONAL
SIERPINSKI
GASKET
FORMED
BY
SUBDIVIDING
TETRAHEDRA
CAN
YOU
PREVENT
THE
USER
FROM
FLYING
THROUGH
WALLS
IN
ANIMATION
OFTEN
WE
CAN
SAVE
EFFORT
BY
WORKING
WITH
TWO
DIMENSIONAL
PAT
TERNS
THAT
ARE
MAPPED
ONTO
FLAT
POLYGONS
THAT
ARE
ALWAYS
PARALLEL
TO
THE
CAMERA
A
TECHNIQUE
KNOWN
AS
BILLBOARDING
WRITE
A
PROGRAM
THAT
WILL
KEEP
A
SIMPLE
POLYGON
FACING
THE
CAMERA
AS
THE
CAMERA
MOVES
STEREO
IMAGES
ARE
PRODUCED
BY
CREATING
TWO
IMAGES
WITH
THE
VIEWER
IN
TWO
SLIGHTLY
DIFFERENT
POSITIONS
CONSIDER
A
VIEWER
WHO
IS
AT
THE
ORIGIN
BUT
WHOSE
EYES
ARE
SEPARATED
BY
UNITS
WHAT
ARE
THE
APPROPRIATE
VIEWING
SPECIFICATIONS
TO
CREATE
THE
TWO
IMAGES
IN
SECTION
WE
DISPLAYED
A
MESH
BY
DRAWING
TWO
LINE
STRIPS
HOW
WOULD
YOU
ALTER
THIS
APPROACH
TO
NOT
DRAW
THE
EXTRA
LINE
FROM
THE
END
OF
ONE
ROW
OR
COLUMN
TO
THE
BEGINING
OF
THE
NEXT
ROW
OR
COLUMN
DERIVE
A
METHOD
FOR
DISPLAYING
A
MESH
USING
A
SINGLE
TRIANGLE
STRIP
CONSTRUCT
A
FRAGMENT
SHADER
THAT
DOES
POLYGON
OFFSET
DURING
A
PERSPECTIVE
PROJECTION
WRITE
A
SHADER
THAT
MODIFIES
THE
HEIGHT
OF
A
MESH
IN
THE
SHADER
RENDER
A
RECTANGULAR
MESH
AS
A
SINGLE
TRIANGLE
STRIP
BY
CREATING
A
DEGENERATE
TRIANGLE
AT
THE
END
OF
EACH
ROW
WRITE
A
PROGRAM
THAT
WILL
FLY
AROUND
ABOVE
A
MESH
YOUR
PROGRAM
SHOULD
ALLOW
THE
USER
TO
LOOK
AROUND
AT
THE
HILLS
AND
VALLEYS
RATHER
THAN
ALWAYS
LOOKING
AT
A
SINGLE
POINT
WRITE
A
RESHAPE
CALLBACK
THAT
DOES
NOT
DISTORT
THE
SHAPE
OF
OBJECTS
AS
THE
WIN
DOW
IS
ALTERED
E
HAVE
LEARNED
TO
BUILD
THREE
DIMENSIONAL
GRAPHICAL
MODELS
AND
TO
DISPLAY
THEM
HOWEVER
IF
YOU
RENDER
ONE
OF
OUR
MODELS
YOU
MIGHT
BE
DISAPPOINTED
TO
SEE
IMAGES
THAT
LOOK
FLAT
AND
THUS
FAIL
TO
SHOW
THE
THREE
DIMENSIONAL
NATURE
OF
THE
MODEL
THIS
APPEARANCE
IS
A
CONSEQUENCE
OF
OUR
UNNATURAL
ASSUMPTION
THAT
EACH
SURFACE
IS
LIT
SUCH
THAT
IT
APPEARS
TO
A
VIEWER
IN
A
SINGLE
COLOR
UNDER
THIS
ASSUMPTION
THE
ORTHOGRAPHIC
PROJECTION
OF
A
SPHERE
IS
A
UNIFORMLY
COLORED
CIRCLE
AND
A
CUBE
APPEARS
AS
A
FLAT
HEXAGON
IF
WE
LOOK
AT
A
PHOTOGRAPH
OF
A
LIT
SPHERE
WE
SEE
NOT
A
UNIFORMLY
COLORED
CIRCLE
BUT
RATHER
A
CIRCULAR
SHAPE
WITH
MANY
GRADATIONS
OR
SHADES
OF
COLOR
IT
IS
THESE
GRADATIONS
THAT
GIVE
TWO
DIMENSIONAL
IMAGES
THE
APPEARANCE
OF
BEING
THREE
DIMENSIONAL
WHAT
WE
HAVE
LEFT
OUT
IS
THE
INTERACTION
BETWEEN
LIGHT
AND
THE
SURFACES
IN
OUR
MODELS
THIS
CHAPTER
BEGINS
TO
FILL
THAT
GAP
WE
DEVELOP
SEPARATE
MODELS
OF
LIGHT
SOURCES
AND
OF
THE
MOST
COMMON
LIGHT
MATERIAL
INTERACTIONS
OUR
AIM
IS
TO
ADD
SHADING
TO
A
FAST
PIPELINE
GRAPHICS
ARCHITECTURE
CONSEQUENTLY
WE
DEVELOP
ONLY
LOCAL
LIGHTING
MODELS
SUCH
MODELS
AS
OPPOSED
TO
GLOBAL
LIGHTING
MODELS
ALLOW
US
TO
COMPUTE
THE
SHADE
TO
ASSIGN
TO
A
POINT
ON
A
SURFACE
INDEPENDENT
OF
ANY
OTHER
SURFACES
IN
THE
SCENE
THE
CALCULATIONS
DEPEND
ONLY
ON
THE
MATERIAL
PROPERTIES
ASSIGNED
TO
THE
SURFACE
THE
LOCAL
GEOMETRY
OF
THE
SURFACE
AND
THE
LOCATIONS
AND
PROPERTIES
OF
THE
LIGHT
SOURCES
IN
THIS
CHAPTER
WE
INTRODUCE
THE
LIGHTING
MODELS
USED
MOST
OFTEN
IN
OPENGL
APPLICATIONS
WE
SHALL
SEE
THAT
WE
HAVE
CHOICES
AS
TO
WHERE
TO
APPLY
A
GIVEN
LIGHTING
MODEL
IN
THE
APPLICATION
IN
THE
VERTEX
SHADER
OR
IN
THE
FRAGMENT
SHADER
FOLLOWING
OUR
PREVIOUS
DEVELOPMENT
WE
INVESTIGATE
HOW
WE
CAN
APPLY
SHADING
TO
POLYGONAL
MODELS
WE
DEVELOP
A
RECURSIVE
APPROXIMATION
TO
A
SPHERE
THAT
WILL
ALLOW
US
TO
TEST
OUR
SHADING
ALGORITHMS
WE
THEN
DISCUSS
HOW
LIGHT
AND
MATERIAL
PROPERTIES
ARE
SPECIFIED
IN
OPENGL
APPLICATIONS
AND
CAN
BE
ADDED
TO
OUR
SPHERE
APPROXIMATING
PROGRAM
WE
CONCLUDE
THE
CHAPTER
WITH
A
SHORT
DISCUSSION
OF
THE
TWO
MOST
IMPORTANT
METHODS
FOR
HANDLING
GLOBAL
LIGHTING
EFFECTS
RAY
TRACING
AND
RADIOSITY
B
A
FIGURE
REFLECTING
SURFACES
LIGHT
AND
MATTER
IN
CHAPTERS
AND
WE
PRESENTED
THE
RUDIMENTS
OF
HUMAN
COLOR
VISION
DELAYING
UNTIL
NOW
ANY
DISCUSSION
OF
THE
INTERACTION
BETWEEN
LIGHT
AND
SURFACES
PERHAPS
THE
MOST
GENERAL
APPROACH
TO
RENDERING
IS
BASED
ON
PHYSICS
WHERE
WE
USE
PRINCIPLES
SUCH
AS
CONSERVATION
OF
ENERGY
TO
DERIVE
EQUATIONS
THAT
DESCRIBE
HOW
LIGHT
IS
REFLECTED
FROM
SURFACES
FROM
A
PHYSICAL
PERSPECTIVE
A
SURFACE
CAN
EITHER
EMIT
LIGHT
BY
SELF
EMISSION
AS
A
LIGHT
BULB
DOES
OR
REFLECT
LIGHT
FROM
OTHER
SURFACES
THAT
ILLUMINATE
IT
SOME
SURFACES
MAY
BOTH
REFLECT
LIGHT
AND
EMIT
LIGHT
FROM
INTERNAL
PHYSICAL
PROCESSES
WHEN
WE
LOOK
AT
A
POINT
ON
AN
OBJECT
THE
COLOR
THAT
WE
SEE
IS
DETERMINED
BY
MULTIPLE
INTERACTIONS
AMONG
LIGHT
SOURCES
AND
REFLECTIVE
SURFACES
THESE
INTERACTIONS
CAN
BE
VIEWED
AS
A
RECURSIVE
PROCESS
CONSIDER
THE
SIMPLE
SCENE
IN
FIGURE
SOME
LIGHT
FROM
THE
SOURCE
THAT
REACHES
SURFACE
A
IS
SCATTERED
SOME
OF
THIS
REFLECTED
LIGHT
REACHES
SURFACE
B
AND
SOME
OF
IT
IS
THEN
SCATTERED
BACK
TO
A
WHERE
SOME
OF
IT
IS
AGAIN
REFLECTED
BACK
TO
B
AND
SO
ON
THIS
RECURSIVE
SCATTERING
OF
LIGHT
BETWEEN
SURFACES
ACCOUNTS
FOR
SUBTLE
SHADING
EFFECTS
SUCH
AS
THE
BLEEDING
OF
COLORS
BETWEEN
ADJACENT
SURFACES
MATHEMATICALLY
THE
LIMIT
OF
THIS
RECURSIVE
PROCESS
CAN
BE
DESCRIBED
USING
AN
INTEGRAL
EQUATION
THE
RENDERING
EQUATION
WHICH
IN
PRINCIPLE
WE
COULD
USE
TO
FIND
THE
SHADING
OF
ALL
SURFACES
IN
A
SCENE
UNFORTUNATELY
THIS
EQUATION
GENERALLY
CANNOT
BE
SOLVED
ANALYTICALLY
NUMERICAL
METHODS
FOR
COMPUTING
A
SOLUTION
ARE
NOT
FAST
ENOUGH
FOR
REAL
TIME
RENDERING
THERE
ARE
VARIOUS
APPROXIMATE
APPROACHES
SUCH
AS
RADIOSITY
AND
RAY
TRACING
EACH
OF
WHICH
IS
AN
EXCELLENT
APPROXIMATION
TO
THE
RENDERING
EQUATION
FOR
PARTICULAR
TYPES
OF
SURFACES
ALTHOUGH
RAY
TRACING
CAN
RENDER
MODERATELY
COMPLEX
SCENES
IN
REAL
TIME
THESE
METHODS
CANNOT
RENDER
SCENES
AT
THE
RATE
AT
WHICH
WE
CAN
PASS
POLYGONS
THROUGH
THE
MODELING
PROJECTION
PIPELINE
CONSEQUENTLY
WE
FOCUS
ON
A
SIMPLER
RENDERING
MODEL
BASED
ON
THE
PHONG
REFLECTION
MODEL
THAT
PROVIDES
A
COMPROMISE
BETWEEN
PHYSICAL
CORRECTNESS
AND
EFFICIENT
CALCULATION
WE
WILL
INTRODUCE
GLOBAL
METHODS
IN
SECTION
AND
THEN
CONSIDER
THE
RENDERING
EQUATION
RADIOSITY
AND
RAY
TRACING
IN
GREATER
DETAIL
IN
CHAPTER
FIGURE
LIGHT
AND
SURFACES
RATHER
THAN
LOOKING
AT
A
GLOBAL
ENERGY
BALANCE
WE
FOLLOW
RAYS
OF
LIGHT
FROM
LIGHT
EMITTING
OR
SELF
LUMINOUS
SURFACES
THAT
WE
CALL
LIGHT
SOURCES
WE
THEN
MODEL
WHAT
HAPPENS
TO
THESE
RAYS
AS
THEY
INTERACT
WITH
REFLECTING
SURFACES
IN
THE
SCENE
THIS
APPROACH
IS
SIMILAR
TO
RAY
TRACING
BUT
WE
CONSIDER
ONLY
SINGLE
INTERACTIONS
BETWEEN
LIGHT
SOURCES
AND
SURFACES
THERE
ARE
TWO
INDEPENDENT
PARTS
OF
THE
PROBLEM
FIRST
WE
MUST
MODEL
THE
LIGHT
SOURCES
IN
THE
SCENE
THEN
WE
MUST
BUILD
A
REFLECTION
MODEL
THAT
DEALS
WITH
THE
INTERACTIONS
BETWEEN
MATERIALS
AND
LIGHT
TO
GET
AN
OVERVIEW
OF
THE
PROCESS
WE
CAN
START
FOLLOWING
RAYS
OF
LIGHT
FROM
A
POINT
SOURCE
AS
SHOWN
IN
FIGURE
AS
WE
NOTED
IN
CHAPTER
OUR
VIEWER
SEES
ONLY
THE
LIGHT
THAT
LEAVES
THE
SOURCE
AND
REACHES
HER
EYES
PERHAPS
THROUGH
A
COMPLEX
PATH
AND
MULTIPLE
INTERACTIONS
WITH
OBJECTS
IN
THE
SCENE
IF
A
RAY
OF
LIGHT
ENTERS
HER
EYE
DIRECTLY
FROM
THE
SOURCE
SHE
SEES
THE
COLOR
OF
THE
SOURCE
IF
THE
RAY
OF
LIGHT
HITS
A
SURFACE
VISIBLE
TO
OUR
VIEWER
THE
COLOR
SHE
SEES
IS
BASED
ON
THE
INTERACTION
BETWEEN
THE
SOURCE
AND
THE
SURFACE
MATERIAL
SHE
SEES
THE
COLOR
OF
THE
LIGHT
REFLECTED
FROM
THE
SURFACE
TOWARD
HER
EYES
IN
TERMS
OF
COMPUTER
GRAPHICS
WE
REPLACE
THE
VIEWER
BY
THE
PROJECTION
PLANE
AS
SHOWN
IN
FIGURE
CONCEPTUALLY
THE
CLIPPING
WINDOW
IN
THIS
PLANE
IS
MAPPED
TO
THE
SCREEN
THUS
WE
CAN
THINK
OF
THE
PROJECTION
PLANE
AS
RULED
INTO
RECTANGLES
EACH
CORRESPONDING
TO
A
PIXEL
THE
COLOR
OF
THE
LIGHT
SOURCE
AND
OF
THE
SURFACES
DETERMINES
THE
COLOR
OF
ONE
OR
MORE
PIXELS
IN
THE
FRAME
BUFFER
WE
NEED
TO
CONSIDER
ONLY
THOSE
RAYS
THAT
LEAVE
THE
SOURCE
AND
REACH
THE
VIEWER
EYE
EITHER
DIRECTLY
OR
THROUGH
INTERACTIONS
WITH
OBJECTS
IN
THE
CASE
OF
COMPUTER
VIEWING
THESE
ARE
THE
RAYS
THAT
REACH
THE
CENTER
OF
PROJECTION
COP
AFTER
PASSING
THROUGH
THE
CLIPPING
RECTANGLE
NOTE
THAT
IN
SCENES
FOR
WHICH
THE
IMAGE
SHOWS
A
LOT
COP
FIGURE
LIGHT
SURFACES
AND
COMPUTER
IMAGING
A
B
C
FIGURE
LIGHT
MATERIAL
INTERACTIONS
A
SPECULAR
SURFACE
B
DIFFUSE
SURFACE
C
TRANSLUCENT
SURFACE
OF
THE
BACKGROUND
MOST
RAYS
LEAVING
A
SOURCE
DO
NOT
CONTRIBUTE
TO
THE
IMAGE
AND
ARE
THUS
OF
NO
INTEREST
TO
US
WE
MAKE
USE
OF
THIS
OBSERVATION
IN
SECTION
FIGURE
SHOWS
BOTH
SINGLE
AND
MULTIPLE
INTERACTIONS
BETWEEN
RAYS
AND
OBJECTS
IT
IS
THE
NATURE
OF
THESE
INTERACTIONS
THAT
DETERMINES
WHETHER
AN
OBJECT
APPEARS
RED
OR
BROWN
LIGHT
OR
DARK
DULL
OR
SHINY
WHEN
LIGHT
STRIKES
A
SURFACE
SOME
OF
IT
IS
ABSORBED
AND
SOME
OF
IT
IS
REFLECTED
IF
THE
SURFACE
IS
OPAQUE
REFLECTION
AND
ABSORPTION
ACCOUNT
FOR
ALL
THE
LIGHT
STRIKING
THE
SURFACE
IF
THE
SURFACE
IS
TRANSLUCENT
SOME
OF
THE
LIGHT
IS
TRANSMITTED
THROUGH
THE
MATERIAL
AND
EMERGES
TO
INTERACT
WITH
OTHER
OBJECTS
THESE
INTERACTIONS
DEPEND
ON
WAVELENGTH
AN
OBJECT
ILLUMINATED
BY
WHITE
LIGHT
APPEARS
RED
BECAUSE
IT
ABSORBS
MOST
OF
THE
INCIDENT
LIGHT
BUT
REFLECTS
LIGHT
IN
THE
RED
RANGE
OF
FREQUENCIES
A
SHINY
OBJECT
APPEARS
SO
BECAUSE
ITS
SURFACE
IS
SMOOTH
CONVERSELY
A
DULL
OBJECT
HAS
A
ROUGH
SURFACE
THE
SHADING
OF
OBJECTS
ALSO
DEPENDS
ON
THE
ORIENTATION
OF
THEIR
SURFACES
A
FACTOR
THAT
WE
SHALL
SEE
IS
CHARACTERIZED
BY
THE
NORMAL
VECTOR
AT
EACH
POINT
THESE
INTERACTIONS
BETWEEN
LIGHT
AND
MATERIALS
CAN
BE
CLASSIFIED
INTO
THE
THREE
GROUPS
DEPICTED
IN
FIGURE
SPECULAR
SURFACES
APPEAR
SHINY
BECAUSE
MOST
OF
THE
LIGHT
THAT
IS
REFLECTED
OR
SCATTERED
IS
IN
A
NARROW
RANGE
OF
ANGLES
CLOSE
TO
THE
ANGLE
OF
REFLECTION
MIRRORS
ARE
PERFECTLY
SPECULAR
SURFACES
THE
LIGHT
FROM
AN
INCOMING
LIGHT
RAY
MAY
BE
PARTIALLY
ABSORBED
BUT
ALL
REFLECTED
LIGHT
FROM
A
GIVEN
ANGLE
EMERGES
AT
A
SINGLE
ANGLE
OBEYING
THE
RULE
THAT
THE
ANGLE
OF
INCIDENCE
IS
EQUAL
TO
THE
ANGLE
OF
REFLECTION
DIFFUSE
SURFACES
ARE
CHARACTERIZED
BY
REFLECTED
LIGHT
BEING
SCATTERED
IN
ALL
DIRECTIONS
WALLS
PAINTED
WITH
MATTE
OR
FLAT
PAINT
ARE
DIFFUSE
REFLECTORS
AS
ARE
MANY
NATURAL
MATERIALS
SUCH
AS
TERRAIN
VIEWED
FROM
AN
AIRPLANE
OR
A
SATELLITE
PERFECTLY
DIFFUSE
SURFACES
SCATTER
LIGHT
EQUALLY
IN
ALL
DIRECTIONS
AND
THUS
A
FLAT
PERFECTLY
DIFFUSE
SURFACE
APPEARS
THE
SAME
TO
ALL
VIEWERS
TRANSLUCENT
SURFACES
ALLOW
SOME
LIGHT
TO
PENETRATE
THE
SURFACE
AND
TO
EMERGE
FROM
ANOTHER
LOCATION
ON
THE
OBJECT
THIS
PROCESS
OF
REFRACTION
CHARACTERIZES
GLASS
AND
WATER
SOME
INCIDENT
LIGHT
MAY
ALSO
BE
REFLECTED
AT
THE
SURFACE
WE
SHALL
MODEL
ALL
THESE
SURFACES
IN
SECTION
FIRST
WE
CONSIDER
LIGHT
SOURCES
Y
I
E
LIGHT
SOURCES
LIGHT
CAN
LEAVE
A
SURFACE
THROUGH
TWO
FUNDAMENTAL
PROCESSES
SELF
EMISSION
AND
RE
FLECTION
WE
USUALLY
THINK
OF
A
LIGHT
SOURCE
AS
AN
OBJECT
THAT
EMITS
LIGHT
ONLY
THROUGH
P
X
INTERNAL
ENERGY
SOURCES
HOWEVER
A
LIGHT
SOURCE
SUCH
AS
A
LIGHT
BULB
CAN
ALSO
REFLECT
SOME
LIGHT
THAT
IS
INCIDENT
ON
IT
FROM
THE
SURROUNDING
ENVIRONMENT
WE
WILL
USUALLY
OMIT
THE
EMISSIVE
TERM
IN
OUR
SIMPLE
MODELS
WHEN
WE
DISCUSS
LIGHTING
IN
SECTION
WE
WILL
SEE
THAT
WE
CAN
EASILY
ADD
A
SELF
EMISSION
TERM
Z
IF
WE
CONSIDER
A
SOURCE
SUCH
AS
THE
ONE
IN
FIGURE
WE
CAN
LOOK
AT
IT
AS
AN
OBJECT
WITH
A
SURFACE
EACH
POINT
X
Y
Z
ON
THE
SURFACE
CAN
EMIT
LIGHT
THAT
IS
CHAR
ACTERIZED
BY
THE
DIRECTION
OF
EMISSION
Θ
Φ
AND
THE
INTENSITY
OF
ENERGY
EMITTED
AT
EACH
WAVELENGTH
Λ
THUS
A
GENERAL
LIGHT
SOURCE
CAN
BE
CHARACTERIZED
BY
A
SIX
VARIABLE
ILLUMINATION
FUNCTION
I
X
Y
Z
Θ
Φ
Λ
NOTE
THAT
WE
NEED
TWO
ANGLES
TO
SPECIFY
A
DIRECTION
AND
WE
ARE
ASSUMING
THAT
EACH
FREQUENCY
CAN
BE
CONSIDERED
INDEPENDENTLY
FROM
THE
PERSPECTIVE
OF
A
SURFACE
ILLUMINATED
BY
THIS
SOURCE
WE
CAN
OBTAIN
THE
TOTAL
CONTRIBUTION
OF
THE
SOURCE
FIGURE
BY
INTEGRATING
OVER
ITS
SURFACE
A
PROCESS
THAT
ACCOUNTS
FOR
THE
EMISSION
ANGLES
THAT
REACH
THIS
SURFACE
AND
MUST
ALSO
ACCOUNT
FOR
THE
DISTANCE
BETWEEN
THE
SOURCE
AND
THE
SURFACE
FOR
A
DISTRIBUTED
LIGHT
SOURCE
SUCH
AS
A
LIGHT
BULB
THE
EVALUATION
OF
THIS
INTEGRAL
IS
DIFFICULT
WHETHER
WE
USE
ANALYTIC
OR
NU
MERICAL
METHODS
OFTEN
IT
IS
EASIER
TO
MODEL
THE
DISTRIBUTED
SOURCE
WITH
POLYGONS
EACH
OF
WHICH
IS
A
SIMPLE
SOURCE
OR
WITH
AN
APPROXIMATING
SET
OF
POINT
SOURCES
WE
CONSIDER
FOUR
BASIC
TYPES
OF
SOURCES
AMBIENT
LIGHTING
POINT
SOURCES
SPOT
LIGHTS
AND
DISTANT
LIGHT
THESE
FOUR
LIGHTING
TYPES
ARE
SUFFICIENT
FOR
RENDERING
MOST
SIMPLE
SCENES
FIGURE
LIGHT
SOURCE
FIGURE
ADDING
THE
CONTRIBUTION
FROM
A
SOURCE
COLOR
SOURCES
NOT
ONLY
DO
LIGHT
SOURCES
EMIT
DIFFERENT
AMOUNTS
OF
LIGHT
AT
DIFFERENT
FREQUENCIES
BUT
THEIR
DIRECTIONAL
PROPERTIES
CAN
VARY
WITH
FREQUENCY
AS
WELL
CONSEQUENTLY
A
PHYSICALLY
CORRECT
MODEL
CAN
BE
COMPLEX
HOWEVER
OUR
MODEL
OF
THE
HUMAN
VISUAL
SYSTEM
IS
BASED
ON
THREE
COLOR
THEORY
WHICH
TELLS
US
WE
PERCEIVE
THREE
TRISTIMULUS
VALUES
RATHER
THAN
A
FULL
COLOR
DISTRIBUTION
FOR
MOST
APPLICATIONS
WE
CAN
THUS
MODEL
LIGHT
SOURCES
AS
HAVING
THREE
COMPONENTS
RED
GREEN
AND
BLUE
AND
CAN
USE
EACH
OF
THE
THREE
COLOR
SOURCES
TO
OBTAIN
THE
CORRESPONDING
COLOR
COMPONENTS
THAT
A
HUMAN
OBSERVER
SEES
WE
DESCRIBE
A
SOURCE
THROUGH
A
THREE
COMPONENT
INTENSITY
OR
LUMINANCE
FUNC
TION
IR
IB
EACH
OF
WHOSE
COMPONENTS
IS
THE
INTENSITY
OF
THE
INDEPENDENT
RED
GREEN
AND
BLUE
COMPONENTS
THUS
WE
USE
THE
RED
COMPONENT
OF
A
LIGHT
SOURCE
FOR
THE
CALCULATION
OF
THE
RED
COMPONENT
OF
THE
IMAGE
BECAUSE
LIGHT
MATERIAL
COMPUTATIONS
INVOLVE
THREE
SIMILAR
BUT
INDEPENDENT
CALCULATIONS
WE
WILL
TEND
TO
PRESENT
A
SINGLE
SCALAR
EQUATION
WITH
THE
UNDERSTANDING
THAT
IT
CAN
REPRESENT
ANY
OF
THE
THREE
COLOR
COMPONENTS
AMBIENT
LIGHT
IN
MANY
ROOMS
SUCH
AS
CLASSROOMS
OR
KITCHENS
THE
LIGHTS
HAVE
BEEN
DESIGNED
AND
POSITIONED
TO
PROVIDE
UNIFORM
ILLUMINATION
THROUGHOUT
THE
ROOM
SUCH
ILLUMINATION
IS
OFTEN
ACHIEVED
THROUGH
LARGE
SOURCES
THAT
HAVE
DIFFUSERS
WHOSE
PURPOSE
IS
TO
SCATTER
LIGHT
IN
ALL
DIRECTIONS
WE
COULD
CREATE
AN
ACCURATE
SIMULATION
OF
SUCH
ILLUMINATION
AT
LEAST
IN
PRINCIPLE
BY
MODELING
ALL
THE
DISTRIBUTED
SOURCES
AND
THEN
INTEGRATING
THE
ILLUMINATION
FROM
THESE
SOURCES
AT
EACH
POINT
ON
A
REFLECTING
SURFACE
MAKING
SUCH
A
MODEL
AND
RENDERING
A
SCENE
WITH
IT
WOULD
BE
A
DAUNTING
TASK
FOR
A
GRAPHICS
SYSTEM
ESPECIALLY
ONE
FOR
WHICH
REAL
TIME
PERFORMANCE
IS
DESIRABLE
ALTERNATIVELY
WE
CAN
LOOK
AT
THE
DESIRED
EFFECT
OF
THE
SOURCES
TO
ACHIEVE
A
UNIFORM
LIGHT
LEVEL
IN
THE
ROOM
THIS
UNIFORM
LIGHTING
IS
CALLED
AMBIENT
LIGHT
IF
WE
FOLLOW
THIS
SECOND
APPROACH
WE
CAN
POSTULATE
AN
AMBIENT
INTENSITY
AT
EACH
POINT
IN
THE
ENVIRONMENT
THUS
AMBIENT
FIGURE
POINT
SOURCE
ILLUMINATING
A
SURFACE
ILLUMINATION
IS
CHARACTERIZED
BY
AN
INTENSITY
IA
THAT
IS
IDENTICAL
AT
EVERY
POINT
IN
THE
SCENE
OUR
AMBIENT
SOURCE
HAS
THREE
COLOR
COMPONENTS
IAR
IAB
WE
WILL
USE
THE
SCALAR
IA
TO
DENOTE
ANY
ONE
OF
THE
RED
GREEN
OR
BLUE
COMPONENTS
OF
IA
ALTHOUGH
EVERY
POINT
IN
OUR
SCENE
RECEIVES
THE
SAME
ILLUMINATION
FROM
IA
EACH
SURFACE
CAN
REFLECT
THIS
LIGHT
DIFFERENTLY
POINT
SOURCES
AN
IDEAL
POINT
SOURCE
EMITS
LIGHT
EQUALLY
IN
ALL
DIRECTIONS
WE
CAN
CHARACTERIZE
A
POINT
SOURCE
LOCATED
AT
A
POINT
BY
A
THREE
COMPONENT
COLOR
MATRIX
IR
IB
THE
INTENSITY
OF
ILLUMINATION
RECEIVED
FROM
A
POINT
SOURCE
IS
PROPORTIONAL
TO
THE
INVERSE
SQUARE
OF
THE
DISTANCE
BETWEEN
THE
SOURCE
AND
SURFACE
HENCE
AT
A
POINT
P
FIGURE
THE
INTENSITY
OF
LIGHT
RECEIVED
FROM
THE
POINT
SOURCE
IS
GIVEN
BY
THE
MATRIX
I
P
P
I
P
P
AS
WITH
AMBIENT
LIGHT
WE
WILL
USE
I
TO
DENOTE
ANY
OF
THE
COMPONENTS
OF
I
THE
USE
OF
POINT
SOURCES
IN
MOST
APPLICATIONS
IS
DETERMINED
MORE
BY
THEIR
EASE
OF
USE
THAN
BY
THEIR
RESEMBLANCE
TO
PHYSICAL
REALITY
SCENES
RENDERED
WITH
ONLY
POINT
SOURCES
TEND
TO
HAVE
HIGH
CONTRAST
OBJECTS
APPEAR
EITHER
BRIGHT
OR
DARK
IN
THE
REAL
WORLD
IT
IS
THE
LARGE
SIZE
OF
MOST
LIGHT
SOURCES
THAT
CONTRIBUTES
TO
SOFTER
SCENES
AS
WE
CAN
SEE
FROM
FIGURE
WHICH
SHOWS
THE
SHADOWS
CREATED
BY
A
SOURCE
OF
FINITE
SIZE
SOME
AREAS
ARE
FULLY
IN
SHADOW
OR
IN
THE
UMBRA
WHEREAS
OTHERS
ARE
IN
PARTIAL
FIGURE
SHADOWS
CREATED
BY
FINITE
SIZE
LIGHT
SOURCE
SHADOW
OR
IN
THE
PENUMBRA
WE
CAN
MITIGATE
THE
HIGH
CONTRAST
EFFECT
FROM
POINT
SOURCE
ILLUMINATION
BY
ADDING
AMBIENT
LIGHT
TO
A
SCENE
THE
DISTANCE
TERM
ALSO
CONTRIBUTES
TO
THE
HARSH
RENDERINGS
WITH
POINT
SOURCES
ALTHOUGH
THE
INVERSE
SQUARE
DISTANCE
TERM
IS
CORRECT
FOR
POINT
SOURCES
IN
PRACTICE
IT
P
IS
USUALLY
REPLACED
BY
A
TERM
OF
THE
FORM
A
BD
WHERE
D
IS
THE
DISTANCE
BETWEEN
P
AND
THE
CONSTANTS
A
B
AND
C
CAN
BE
CHOSEN
TO
SOFTEN
THE
LIGHTING
NOTE
THAT
IF
THE
LIGHT
SOURCE
IS
FAR
FROM
THE
SURFACES
IN
THE
SCENE
THE
INTENSITY
OF
THE
LIGHT
FROM
THE
SOURCE
IS
SUFFICIENTLY
UNIFORM
THAT
THE
DISTANCE
TERM
IS
CONSTANT
OVER
EACH
SURFACE
IS
FIGURE
SPOTLIGHT
INTENSITY
E
E
FIGURE
ATTENUATION
OF
A
SPOTLIGHT
INTENSITY
E
E
FIGURE
SPOTLIGHT
EXPO
NENT
FIGURE
PARALLEL
LIGHT
SOURCE
SPOTLIGHTS
SPOTLIGHTS
ARE
CHARACTERIZED
BY
A
NARROW
RANGE
OF
ANGLES
THROUGH
WHICH
LIGHT
IS
EMIT
TED
WE
CAN
CONSTRUCT
A
SIMPLE
SPOTLIGHT
FROM
A
POINT
SOURCE
BY
LIMITING
THE
ANGLES
AT
WHICH
LIGHT
FROM
THE
SOURCE
CAN
BE
SEEN
WE
CAN
USE
A
CONE
WHOSE
APEX
IS
AT
PS
WHICH
POINTS
IN
THE
DIRECTION
LS
AND
WHOSE
WIDTH
IS
DETERMINED
BY
AN
ANGLE
Θ
AS
SHOWN
IN
FIGURE
IF
Θ
THE
SPOTLIGHT
BECOMES
A
POINT
SOURCE
MORE
REALISTIC
SPOTLIGHTS
ARE
CHARACTERIZED
BY
THE
DISTRIBUTION
OF
LIGHT
WITHIN
THE
CONE
USUALLY
WITH
MOST
OF
THE
LIGHT
CONCENTRATED
IN
THE
CENTER
OF
THE
CONE
THUS
THE
INTENSITY
IS
A
FUNCTION
OF
THE
ANGLE
Φ
BETWEEN
THE
DIRECTION
OF
THE
SOURCE
AND
A
VECTOR
TO
A
POINT
ON
THE
SURFACE
AS
LONG
AS
THIS
ANGLE
IS
LESS
THAN
Θ
FIGURE
ALTHOUGH
THIS
FUNCTION
COULD
BE
DEFINED
IN
MANY
WAYS
IT
IS
USUALLY
DEFINED
BY
COSE
Φ
WHERE
THE
EXPONENT
E
FIGURE
DETERMINES
HOW
RAPIDLY
THE
LIGHT
INTENSITY
DROPS
OFF
AS
WE
SHALL
SEE
THROUGHOUT
THIS
CHAPTER
COSINES
ARE
CONVENIENT
FUNCTIONS
FOR
LIGHTING
CALCULATIONS
IF
U
AND
V
ARE
ANY
UNIT
LENGTH
VECTORS
WE
CAN
COMPUTE
THE
COSINE
OF
THE
ANGLE
Θ
BETWEEN
THEM
WITH
THE
DOT
PRODUCT
COS
Θ
U
V
A
CALCULATION
THAT
REQUIRES
ONLY
THREE
MULTIPLICATIONS
AND
TWO
ADDITIONS
DISTANT
LIGHT
SOURCES
MOST
SHADING
CALCULATIONS
REQUIRE
THE
DIRECTION
FROM
THE
POINT
ON
THE
SURFACE
TO
THE
LIGHT
SOURCE
POSITION
AS
WE
MOVE
ACROSS
A
SURFACE
CALCULATING
THE
INTENSITY
AT
EACH
POINT
WE
SHOULD
RECOMPUTE
THIS
VECTOR
REPEATEDLY
A
COMPUTATION
THAT
IS
A
SIGNIFICANT
PART
OF
THE
SHADING
CALCULATION
HOWEVER
IF
THE
LIGHT
SOURCE
IS
FAR
FROM
THE
SURFACE
THE
VECTOR
DOES
NOT
CHANGE
MUCH
AS
WE
MOVE
FROM
POINT
TO
POINT
JUST
AS
THE
LIGHT
FROM
THE
SUN
STRIKES
ALL
OBJECTS
THAT
ARE
IN
CLOSE
PROXIMITY
TO
ONE
ANOTHER
AT
THE
SAME
ANGLE
FIGURE
ILLUSTRATES
THAT
WE
ARE
EFFECTIVELY
REPLACING
A
POINT
SOURCE
OF
LIGHT
WITH
A
SOURCE
THAT
ILLUMINATES
OBJECTS
WITH
PARALLEL
RAYS
OF
LIGHT
A
PARALLEL
SOURCE
IN
PRACTICE
THE
CALCULATIONS
FOR
DISTANT
LIGHT
SOURCES
ARE
SIMILAR
TO
THE
CALCULATIONS
FOR
PARALLEL
PROJECTIONS
THEY
REPLACE
THE
LOCATION
OF
THE
LIGHT
SOURCE
WITH
THE
DIRECTION
OF
THE
LIGHT
SOURCE
HENCE
IN
HOMOGENEOUS
COORDINATES
A
POINT
LIGHT
SOURCE
AT
IS
REPRESENTED
INTERNALLY
AS
A
FOUR
DIMENSIONAL
COLUMN
MATRIX
X
Z
IN
CONTRAST
THE
DISTANT
LIGHT
SOURCE
IS
DESCRIBED
BY
A
DIRECTION
VECTOR
WHOSE
REPRESEN
TATION
IN
HOMOGENEOUS
COORDINATES
IS
THE
MATRIX
X
Y
Z
THE
GRAPHICS
SYSTEM
CAN
CARRY
OUT
RENDERING
CALCULATIONS
MORE
EFFICIENTLY
FOR
DISTANT
LIGHT
SOURCES
THAN
FOR
NEAR
ONES
OF
COURSE
A
SCENE
RENDERED
WITH
DISTANT
LIGHT
SOURCES
LOOKS
DIFFERENT
FROM
A
SCENE
RENDERED
WITH
NEAR
SOURCES
FORTUNATELY
OUR
MODELS
WILL
ALLOW
BOTH
TYPES
OF
SOURCES
THE
PHONG
REFLECTION
MODEL
N
V
ALTHOUGH
WE
COULD
APPROACH
LIGHT
MATERIAL
INTERACTIONS
THROUGH
PHYSICAL
MODELS
WE
HAVE
CHOSEN
TO
USE
A
MODEL
THAT
LEADS
TO
EFFICIENT
COMPUTATIONS
ESPECIALLY
WHEN
WE
I
USE
IT
WITH
OUR
PIPELINE
RENDERING
MODEL
THE
REFLECTION
MODEL
THAT
WE
PRESENT
WAS
R
INTRODUCED
BY
PHONG
AND
LATER
MODIFIED
BY
BLINN
IT
HAS
PROVED
TO
BE
EFFICIENT
AND
TO
BE
A
CLOSE
ENOUGH
APPROXIMATION
TO
PHYSICAL
REALITY
TO
PRODUCE
GOOD
RENDERINGS
UNDER
A
VARIETY
OF
LIGHTING
CONDITIONS
AND
MATERIAL
PROPERTIES
THE
PHONG
MODEL
USES
THE
FOUR
VECTORS
SHOWN
IN
FIGURE
TO
CALCULATE
A
COLOR
FOR
AN
ARBITRARY
POINT
P
ON
A
SURFACE
IF
THE
SURFACE
IS
CURVED
ALL
FOUR
VECTORS
CAN
CHANGE
AS
WE
MOVE
FROM
POINT
TO
POINT
THE
VECTOR
N
IS
THE
NORMAL
AT
P
WE
DISCUSS
ITS
CALCULATION
IN
SECTION
THE
VECTOR
V
IS
IN
THE
DIRECTION
FROM
P
TO
THE
VIEWER
OR
COP
THE
VECTOR
L
IS
IN
THE
DIRECTION
OF
A
LINE
FROM
P
TO
AN
ARBITRARY
POINT
ON
THE
SOURCE
FOR
A
DISTRIBUTED
LIGHT
SOURCE
OR
AS
WE
ARE
ASSUMING
FOR
NOW
TO
THE
POINT
LIGHT
SOURCE
FINALLY
THE
VECTOR
R
IS
IN
THE
DIRECTION
THAT
A
PERFECTLY
REFLECTED
RAY
FROM
L
WOULD
TAKE
NOTE
THAT
R
IS
DETERMINED
BY
N
AND
L
WE
CALCULATE
IT
IN
SECTION
THE
PHONG
MODEL
SUPPORTS
THE
THREE
TYPES
OF
MATERIAL
LIGHT
INTERACTIONS
AMBIENT
DIFFUSE
AND
SPECULAR
THAT
WE
INTRODUCED
IN
SECTION
SUPPOSE
THAT
WE
HAVE
A
SET
OF
POINT
SOURCES
WE
ASSUME
THAT
EACH
SOURCE
CAN
HAVE
SEPARATE
AMBIENT
DIFFUSE
AND
SPECULAR
COMPONENTS
FOR
EACH
OF
THE
THREE
PRIMARY
COLORS
ALTHOUGH
THIS
ASSUMPTION
MAY
APPEAR
UNNATURAL
REMEMBER
THAT
OUR
GOAL
IS
TO
CREATE
REALISTIC
SHAD
ING
EFFECTS
IN
AS
CLOSE
TO
REAL
TIME
AS
POSSIBLE
WE
USE
A
LOCAL
MODEL
TO
SIMULATE
EFFECTS
THAT
CAN
BE
GLOBAL
IN
NATURE
THUS
OUR
LIGHT
SOURCE
MODEL
HAS
AMBIENT
DIFFUSE
AND
SPECULAR
TERMS
WE
NEED
NINE
COEFFICIENTS
TO
CHARACTERIZE
THESE
TERMS
AT
ANY
POINT
P
ON
THE
SURFACE
WE
CAN
PLACE
THESE
NINE
COEFFICIENTS
IN
A
ILLUMINATION
MATRIX
FOR
THE
ITH
LIGHT
SOURCE
FIGURE
VECTORS
USED
BY
THE
PHONG
MODEL
LIRA
LIGA
LIBA
LIRS
LIGS
LIBS
THE
FIRST
ROW
OF
THE
MATRIX
CONTAINS
THE
AMBIENT
INTENSITIES
FOR
THE
RED
GREEN
AND
BLUE
TERMS
FROM
SOURCE
I
THE
SECOND
ROW
CONTAINS
THE
DIFFUSE
TERMS
THE
THIRD
CON
TAINS
THE
SPECULAR
TERMS
WE
ASSUME
THAT
ANY
DISTANCE
ATTENUATION
TERMS
HAVE
NOT
YET
BEEN
APPLIED
THIS
MATRIX
IS
ONLY
A
SIMPLE
WAY
OF
STORING
THE
NINE
LIGHTING
TERMS
WE
NEED
IN
PRACTICE
WE
WILL
USE
CONSTRUCTS
SUCH
AS
OR
FOR
EACH
SOURCE
IN
OUR
CODE
THE
FOUR
DIMENSIONAL
FORM
WILL
BE
USEFUL
WHEN
WE
CONSIDER
LIGHTING
WITH
MATERIALS
THAT
ARE
NOT
OPAQUE
WE
CONSTRUCT
THE
MODEL
BY
ASSUMING
THAT
WE
CAN
COMPUTE
HOW
MUCH
OF
EACH
OF
THE
INCIDENT
LIGHTS
IS
REFLECTED
AT
THE
POINT
OF
INTEREST
FOR
EXAMPLE
FOR
THE
RED
DIFFUSE
TERM
FROM
SOURCE
I
LIRD
WE
CAN
COMPUTE
A
REFLECTION
TERM
RIRD
AND
THE
LATTER
CONTRIBUTION
TO
THE
INTENSITY
AT
P
IS
RIRDLIRD
THE
VALUE
OF
RIRD
DEPENDS
ON
THE
MATERIAL
PROPERTIES
THE
ORIENTATION
OF
THE
SURFACE
THE
DIRECTION
OF
THE
LIGHT
SOURCE
AND
THE
DISTANCE
BETWEEN
THE
LIGHT
SOURCE
AND
THE
VIEWER
THUS
FOR
EACH
POINT
WE
HAVE
NINE
COEFFICIENTS
THAT
WE
CAN
PLACE
IN
A
MATRIX
OF
REFLECTION
TERMS
OF
THE
FORM
RIRA
RIGA
RIBA
RIRS
RIGS
RIBS
WE
CAN
THEN
COMPUTE
THE
CONTRIBUTION
FOR
EACH
COLOR
SOURCE
BY
ADDING
THE
AMBIENT
DIFFUSE
AND
SPECULAR
COMPONENTS
FOR
EXAMPLE
THE
RED
INTENSITY
THAT
WE
SEE
AT
P
FROM
SOURCE
I
IS
IIR
RIRALIRA
RIRDLIRD
RIRSLIRS
IIRA
IIRD
IIRS
WE
OBTAIN
THE
TOTAL
INTENSITY
BY
ADDING
THE
CONTRIBUTIONS
OF
ALL
SOURCES
AND
POSSIBLY
A
GLOBAL
AMBIENT
TERM
THUS
THE
RED
TERM
IS
IR
IIRA
IIRD
IIRS
IAR
I
WHERE
IAR
IS
THE
RED
COMPONENT
OF
THE
GLOBAL
AMBIENT
LIGHT
WE
CAN
SIMPLIFY
OUR
NOTATION
BY
NOTING
THAT
THE
NECESSARY
COMPUTATIONS
ARE
THE
SAME
FOR
EACH
SOURCE
AND
FOR
EACH
PRIMARY
COLOR
THEY
DIFFER
DEPENDING
ON
WHETHER
WE
ARE
CONSIDERING
THE
AMBIENT
DIFFUSE
OR
SPECULAR
TERMS
HENCE
WE
CAN
OMIT
THE
SUBSCRIPTS
I
R
G
AND
B
WE
WRITE
I
IA
ID
IS
LARA
LDRD
LSRS
WITH
THE
UNDERSTANDING
THAT
THE
COMPUTATION
WILL
BE
DONE
FOR
EACH
OF
THE
PRIMARIES
AND
EACH
SOURCE
THE
GLOBAL
AMBIENT
TERM
CAN
BE
ADDED
AT
THE
END
AS
WITH
THE
LIGHTING
TERMS
WHEN
WE
GET
TO
CODE
WE
WILL
USE
FORMS
SUCH
AS
NOTE
THAT
THESE
TERMS
ARE
ALL
FOR
A
SINGLE
SURFACE
AND
IN
GENERAL
WE
WILL
HAVE
DIFFERENT
REFLECTIVITY
PROPERTIES
FOR
EACH
MATERIAL
AMBIENT
REFLECTION
THE
INTENSITY
OF
AMBIENT
LIGHT
IA
IS
THE
SAME
AT
EVERY
POINT
ON
THE
SURFACE
SOME
OF
THIS
LIGHT
IS
ABSORBED
AND
SOME
IS
REFLECTED
THE
AMOUNT
REFLECTED
IS
GIVEN
BY
THE
AMBIENT
REFLECTION
COEFFICIENT
RA
KA
BECAUSE
ONLY
A
POSITIVE
FRACTION
OF
THE
LIGHT
IS
REFLECTED
WE
MUST
HAVE
KA
AND
THUS
IA
KALA
HERE
LA
CAN
BE
ANY
OF
THE
INDIVIDUAL
LIGHT
SOURCES
OR
IT
CAN
BE
A
GLOBAL
AMBIENT
TERM
A
SURFACE
HAS
OF
COURSE
THREE
AMBIENT
COEFFICIENTS
KAR
KAG
AND
KAB
AND
THEY
CAN
DIFFER
HENCE
FOR
EXAMPLE
A
SPHERE
APPEARS
YELLOW
UNDER
WHITE
AMBIENT
LIGHT
IF
ITS
BLUE
AMBIENT
COEFFICIENT
IS
SMALL
AND
ITS
RED
AND
GREEN
COEFFICIENTS
ARE
LARGE
DIFFUSE
REFLECTION
A
PERFECTLY
DIFFUSE
REFLECTOR
SCATTERS
THE
LIGHT
THAT
IT
REFLECTS
EQUALLY
IN
ALL
DIRECTIONS
HENCE
SUCH
A
SURFACE
APPEARS
THE
SAME
TO
ALL
VIEWERS
HOWEVER
THE
AMOUNT
OF
LIGHT
REFLECTED
DEPENDS
BOTH
ON
THE
MATERIAL
BECAUSE
SOME
OF
THE
INCOMING
LIGHT
IS
ABSORBED
AND
ON
THE
POSITION
OF
THE
LIGHT
SOURCE
RELATIVE
TO
THE
SURFACE
DIFFUSE
REFLECTIONS
ARE
CHARACTERIZED
BY
ROUGH
SURFACES
IF
WE
WERE
TO
MAGNIFY
A
CROSS
SECTION
OF
A
DIFFUSE
SURFACE
WE
MIGHT
SEE
AN
IMAGE
LIKE
THAT
SHOWN
IN
FIGURE
RAYS
OF
LIGHT
THAT
HIT
THE
SURFACE
AT
ONLY
SLIGHTLY
DIFFERENT
ANGLES
ARE
REFLECTED
BACK
AT
MARKEDLY
DIFFERENT
ANGLES
PERFECTLY
DIFFUSE
SURFACES
ARE
SO
ROUGH
THAT
THERE
IS
NO
PREFERRED
ANGLE
OF
REFLECTION
SUCH
SURFACES
SOMETIMES
CALLED
LAMBERTIAN
SURFACES
CAN
BE
MODELED
MATHEMATICALLY
WITH
LAMBERT
LAW
CONSIDER
A
DIFFUSE
PLANAR
SURFACE
AS
SHOWN
IN
FIGURE
ILLUMINATED
BY
THE
SUN
THE
SURFACE
IS
BRIGHTEST
AT
NOON
AND
DIMMEST
AT
DAWN
AND
DUSK
BECAUSE
AC
CORDING
TO
LAMBERT
LAW
WE
SEE
ONLY
THE
VERTICAL
COMPONENT
OF
THE
INCOMING
LIGHT
FIGURE
ROUGH
SURFACE
A
B
FIGURE
ILLUMINATION
OF
A
DIFFUSE
SURFACE
A
AT
NOON
B
IN
THE
AFTERNOON
D
N
D
A
B
FIGURE
VERTICAL
CONTRIBUTIONS
BY
LAMBERT
LAW
A
AT
NOON
B
IN
THE
AFTERNOON
ONE
WAY
TO
UNDERSTAND
THIS
LAW
IS
TO
CONSIDER
A
SMALL
PARALLEL
LIGHT
SOURCE
STRIKING
A
PLANE
AS
SHOWN
IN
FIGURE
AS
THE
SOURCE
IS
LOWERED
IN
THE
ARTIFICIAL
SKY
THE
SAME
AMOUNT
OF
LIGHT
IS
SPREAD
OVER
A
LARGER
AREA
AND
THE
SURFACE
APPEARS
DIMMER
RETURNING
TO
THE
POINT
SOURCE
OF
FIGURE
WE
CAN
CHARACTERIZE
DIFFUSE
REFLECTIONS
MATHEMATICALLY
LAMBERT
LAW
STATES
THAT
RD
COS
Θ
WHERE
Θ
IS
THE
ANGLE
BETWEEN
THE
NORMAL
AT
THE
POINT
OF
INTEREST
N
AND
THE
DIRECTION
OF
THE
LIGHT
SOURCE
L
IF
BOTH
L
AND
N
ARE
UNIT
LENGTH
VECTORS
THEN
COS
Θ
L
N
IF
WE
ADD
IN
A
REFLECTION
COEFFICIENT
KD
REPRESENTING
THE
FRACTION
OF
INCOMING
DIFFUSE
LIGHT
THAT
IS
REFLECTED
WE
HAVE
THE
DIFFUSE
REFLECTION
TERM
ID
KD
L
N
LD
IF
WE
WISH
TO
INCORPORATE
A
DISTANCE
TERM
TO
ACCOUNT
FOR
ATTENUATION
AS
THE
LIGHT
TRAVELS
A
DISTANCE
D
FROM
THE
SOURCE
TO
THE
SURFACE
WE
CAN
AGAIN
USE
THE
QUADRATIC
ATTENUATION
TERM
I
KD
A
BD
L
N
LD
DIRECTION
VECTORS
SUCH
AS
L
AND
N
ARE
USED
REPEATEDLY
IN
SHADING
CALCULATIONS
THROUGH
THE
DOT
PRODUCT
IN
PRACTICE
BOTH
THE
PROGRAMMER
AND
THE
GRAPHICS
SOFTWARE
SHOULD
SEEK
TO
NORMALIZE
ALL
SUCH
VECTORS
AS
SOON
AS
POSSIBLE
THERE
IS
A
POTENTIAL
PROBLEM
WITH
THIS
EXPRESSION
BECAUSE
L
N
LD
WILL
BE
NEG
ATIVE
IF
THE
LIGHT
SOURCE
IS
BELOW
THE
HORIZON
IN
THIS
CASE
WE
WANT
TO
USE
ZERO
RATHER
THAN
A
NEGATIVE
VALUE
HENCE
IN
PRACTICE
WE
USE
MAX
L
N
LD
SPECULAR
REFLECTION
IF
WE
EMPLOY
ONLY
AMBIENT
AND
DIFFUSE
REFLECTIONS
OUR
IMAGES
WILL
BE
SHADED
AND
WILL
APPEAR
THREE
DIMENSIONAL
BUT
ALL
THE
SURFACES
WILL
LOOK
DULL
SOMEWHAT
LIKE
CHALK
WHAT
WE
ARE
MISSING
ARE
THE
HIGHLIGHTS
THAT
WE
SEE
REFLECTED
FROM
SHINY
OBJECTS
THESE
HIGHLIGHTS
USUALLY
SHOW
A
COLOR
DIFFERENT
FROM
THE
COLOR
OF
THE
REFLECTED
AMBIENT
AND
DIFFUSE
LIGHT
FOR
EXAMPLE
A
RED
PLASTIC
BALL
VIEWED
UNDER
WHITE
LIGHT
HAS
A
WHITE
HIGHLIGHT
THAT
IS
THE
REFLECTION
OF
SOME
OF
THE
LIGHT
FROM
THE
SOURCE
IN
THE
DIRECTION
OF
THE
VIEWER
FIGURE
WHEREAS
A
DIFFUSE
SURFACE
IS
ROUGH
A
SPECULAR
SURFACE
IS
SMOOTH
THE
SMOOTHER
THE
SURFACE
IS
THE
MORE
IT
RESEMBLES
A
MIRROR
FIGURE
SHOWS
THAT
AS
THE
SURFACE
GETS
SMOOTHER
THE
REFLECTED
LIGHT
IS
CONCENTRATED
IN
A
SMALLER
RANGE
OF
ANGLES
CENTERED
ABOUT
THE
ANGLE
OF
A
PERFECT
REFLECTOR
A
MIRROR
OR
A
PERFECTLY
SPECULAR
SURFACE
MOD
ELING
SPECULAR
SURFACES
REALISTICALLY
CAN
BE
COMPLEX
BECAUSE
THE
PATTERN
BY
WHICH
THE
LIGHT
IS
SCATTERED
IS
NOT
SYMMETRIC
IT
DEPENDS
ON
THE
WAVELENGTH
OF
THE
INCIDENT
LIGHT
AND
IT
CHANGES
WITH
THE
REFLECTION
ANGLE
PHONG
PROPOSED
AN
APPROXIMATE
MODEL
THAT
CAN
BE
COMPUTED
WITH
ONLY
A
SLIGHT
INCREASE
OVER
THE
WORK
DONE
FOR
DIFFUSE
SURFACES
THE
MODEL
ADDS
A
TERM
FOR
SPECULAR
REFLECTION
HENCE
WE
CONSIDER
THE
SURFACE
AS
BEING
ROUGH
FOR
THE
DIFFUSE
TERM
AND
SMOOTH
FOR
THE
SPECULAR
TERM
THE
AMOUNT
OF
LIGHT
THAT
THE
VIEWER
SEES
DEPENDS
ON
THE
ANGLE
Φ
BETWEEN
R
THE
DIRECTION
OF
A
PERFECT
REFLECTOR
AND
V
THE
DIRECTION
OF
THE
VIEWER
THE
PHONG
MODEL
USES
THE
EQUATION
IS
KSLS
COSΑ
Φ
THE
COEFFICIENT
KS
KS
IS
THE
FRACTION
OF
THE
INCOMING
SPECULAR
LIGHT
THAT
IS
REFLECTED
THE
EXPONENT
Α
IS
A
SHININESS
COEFFICIENT
FIGURE
SHOWS
HOW
AS
Α
IS
INCREASED
THE
REFLECTED
LIGHT
IS
CONCENTRATED
IN
A
NARROWER
REGION
CENTERED
ON
THE
ANGLE
OF
A
PERFECT
REFLECTOR
IN
THE
LIMIT
AS
Α
GOES
TO
INFINITY
WE
GET
A
MIRROR
VALUES
IN
THE
RANGE
TO
CORRESPOND
TO
MOST
METALLIC
SURFACES
AND
SMALLER
VALUES
CORRESPOND
TO
MATERIALS
THAT
SHOW
BROAD
HIGHLIGHTS
THE
COMPUTATIONAL
ADVANTAGE
OF
THE
PHONG
MODEL
IS
THAT
IF
WE
HAVE
NORMALIZED
R
AND
N
TO
UNIT
LENGTH
WE
CAN
AGAIN
USE
THE
DOT
PRODUCT
AND
THE
SPECULAR
TERM
BECOMES
IS
KSLSMAX
R
V
Α
WE
CAN
ADD
A
DISTANCE
TERM
AS
WE
DID
WITH
DIFFUSE
REFLECTIONS
WHAT
IS
REFERRED
TO
AS
THE
PHONG
MODEL
INCLUDING
THE
DISTANCE
TERM
IS
WRITTEN
I
K
L
MAX
L
N
K
L
MAX
R
V
Α
K
L
FIGURE
SPECULAR
HIGH
LIGHTS
FIGURE
SPECULAR
SUR
FACE
A
BD
THIS
FORMULA
IS
COMPUTED
FOR
EACH
LIGHT
SOURCE
AND
FOR
EACH
PRIMARY
FIGURE
EFFECT
OF
SHININESS
COEFFICIENT
IT
MIGHT
SEEM
TO
MAKE
LITTLE
SENSE
EITHER
TO
ASSOCIATE
A
DIFFERENT
AMOUNT
OF
AMBI
ENT
LIGHT
WITH
EACH
SOURCE
OR
TO
ALLOW
THE
COMPONENTS
FOR
SPECULAR
AND
DIFFUSE
LIGHTING
TO
BE
DIFFERENT
BECAUSE
WE
CANNOT
SOLVE
THE
FULL
RENDERING
EQUATION
WE
MUST
USE
VAR
IOUS
TRICKS
IN
AN
ATTEMPT
TO
OBTAIN
REALISTIC
RENDERINGS
CONSIDER
FOR
EXAMPLE
AN
ENVIRONMENT
WITH
MANY
OBJECTS
WHEN
WE
TURN
ON
A
LIGHT
SOME
OF
THAT
LIGHT
HITS
A
SURFACE
DIRECTLY
THESE
CONTRIBUTIONS
TO
THE
IMAGE
CAN
BE
MODELED
WITH
SPECULAR
AND
DIFFUSE
COMPONENTS
OF
THE
SOURCE
HOWEVER
MUCH
OF
THE
REST
OF
THE
LIGHT
FROM
THE
SOURCE
IS
SCATTERED
FROM
MULTIPLE
REFLECTIONS
FROM
OTHER
OBJECTS
AND
MAKES
A
CONTRIBUTION
TO
THE
LIGHT
RECEIVED
AT
THE
SURFACE
UNDER
CONSIDERA
TION
WE
CAN
APPROXIMATE
THIS
TERM
BY
HAVING
AN
AMBIENT
COMPONENT
ASSOCIATED
WITH
THE
SOURCE
THE
SHADE
THAT
WE
SHOULD
ASSIGN
TO
THIS
TERM
DEPENDS
ON
BOTH
THE
COLOR
OF
THE
SOURCE
AND
THE
COLOR
OF
THE
OBJECTS
IN
THE
ROOM
AN
UNFORTUNATE
CONSEQUENCE
OF
OUR
USE
OF
APPROXIMATE
MODELS
TO
SOME
EXTENT
THE
SAME
ANALYSIS
HOLDS
FOR
DIFFUSE
LIGHT
DIFFUSE
LIGHT
REFLECTS
AMONG
THE
SURFACES
AND
THE
COLOR
THAT
WE
SEE
ON
A
PARTIC
ULAR
SURFACE
DEPENDS
ON
OTHER
SURFACES
IN
THE
ENVIRONMENT
AGAIN
BY
USING
CAREFULLY
CHOSEN
DIFFUSE
AND
SPECULAR
COMPONENTS
WITH
OUR
LIGHT
SOURCES
WE
CAN
APPROXIMATE
A
GLOBAL
EFFECT
WITH
LOCAL
CALCULATIONS
WE
HAVE
DEVELOPED
THE
PHONG
MODEL
IN
OBJECT
SPACE
THE
ACTUAL
SHADING
HOW
EVER
IS
NOT
DONE
UNTIL
THE
OBJECTS
HAVE
PASSED
THROUGH
THE
MODEL
VIEW
AND
PROJECTION
TRANSFORMATIONS
THESE
TRANSFORMATIONS
CAN
AFFECT
THE
COSINE
TERMS
IN
THE
MODEL
SEE
EXERCISE
CONSEQUENTLY
TO
MAKE
A
CORRECT
SHADING
CALCULATION
WE
MUST
EITHER
PRESERVE
SPATIAL
RELATIONSHIPS
AS
VERTICES
AND
VECTORS
PASS
THROUGH
THE
PIPELINE
PER
HAPS
BY
SENDING
ADDITIONAL
INFORMATION
THROUGH
THE
PIPELINE
FROM
OBJECT
SPACE
OR
GO
BACKWARD
THROUGH
THE
PIPELINE
TO
OBTAIN
THE
REQUIRED
SHADING
INFORMATION
THE
MODIFIED
PHONG
MODEL
IF
WE
USE
THE
PHONG
MODEL
WITH
SPECULAR
REFLECTIONS
IN
OUR
RENDERING
THE
DOT
PRODUCT
R
V
SHOULD
BE
RECALCULATED
AT
EVERY
POINT
ON
THE
SURFACE
WE
CAN
OBTAIN
AN
INTERESTING
APPROXIMATION
BY
USING
THE
UNIT
VECTOR
HALFWAY
BETWEEN
THE
VIEWER
VECTOR
AND
THE
LIGHT
SOURCE
VECTOR
H
L
V
L
V
FIGURE
SHOWS
ALL
FIVE
VECTORS
HERE
WE
HAVE
DEFINED
Ψ
AS
THE
ANGLE
BETWEEN
N
AND
L
V
H
THE
HALFWAY
ANGLE
WHEN
V
LIES
IN
THE
SAME
PLANE
AS
DO
L
N
AND
R
WE
CAN
SHOW
SEE
EXERCISE
THAT
Φ
IF
WE
REPLACE
R
V
WITH
N
H
WE
AVOID
CALCULATION
OF
R
HOWEVER
THE
HALFWAY
ANGLE
Ψ
IS
SMALLER
THAN
Φ
AND
IF
WE
USE
THE
SAME
EXPONENT
E
IN
N
H
E
THAT
WE
USED
IN
R
V
E
THEN
THE
SIZE
OF
THE
SPECULAR
HIGHLIGHTS
WILL
BE
SMALLER
WE
CAN
MITIGATE
THIS
PROBLEM
BY
REPLACING
THE
VALUE
OF
THE
EXPONENT
E
WITH
A
VALUE
ET
SO
THAT
N
H
ET
IS
CLOSER
TO
R
V
E
IT
IS
CLEAR
THAT
AVOIDING
RECALCULATION
OF
R
IS
DESIRABLE
HOWEVER
TO
APPRECIATE
FULLY
WHERE
SAVINGS
CAN
BE
MADE
YOU
SHOULD
CONSIDER
ALL
THE
CASES
OF
FLAT
AND
CURVED
SURFACES
NEAR
AND
FAR
LIGHT
SOURCES
AND
NEAR
AND
FAR
VIEWERS
SEE
EXERCISE
WHEN
WE
USE
THE
HALFWAY
VECTOR
IN
THE
CALCULATION
OF
THE
SPECULAR
TERM
WE
ARE
USING
THE
BLINN
PHONG
OR
MODIFIED
PHONG
LIGHTING
MODEL
THIS
MODEL
IS
THE
DEFAULT
IN
SYSTEMS
WITH
A
FIXED
FUNCTION
PIPELINE
AND
IS
THE
ONE
WE
WILL
USE
IN
OUR
FIRST
SHADERS
THAT
CARRY
OUT
LIGHTING
COLOR
PLATE
SHOWS
A
GROUP
OF
UTAH
TEAPOTS
SECTION
THAT
HAVE
BEEN
REN
DERED
IN
OPENGL
USING
THE
MODIFIED
PHONG
MODEL
NOTE
THAT
IT
IS
ONLY
OUR
ABILITY
TO
CONTROL
MATERIAL
PROPERTIES
THAT
MAKES
THE
TEAPOTS
APPEAR
DIFFERENT
FROM
ONE
ANOTHER
THE
VARIOUS
TEAPOTS
DEMONSTRATE
HOW
THE
MODIFIED
PHONG
MODEL
CAN
CREATE
A
VARIETY
OF
SURFACE
EFFECTS
RANGING
FROM
DULL
SURFACES
TO
HIGHLY
REFLECTIVE
SURFACES
THAT
LOOK
LIKE
METAL
FIGURE
DETERMINATION
OF
THE
HALFWAY
VECTOR
COMPUTATION
OF
VECTORS
THE
ILLUMINATION
AND
REFLECTION
MODELS
THAT
WE
HAVE
DERIVED
ARE
SUFFICIENTLY
GENERAL
THAT
THEY
CAN
BE
APPLIED
TO
EITHER
CURVED
OR
FLAT
SURFACES
TO
PARALLEL
OR
PERSPECTIVE
VIEWS
AND
TO
DISTANT
OR
NEAR
SURFACES
MOST
OF
THE
CALCULATIONS
FOR
RENDERING
A
SCENE
INVOLVE
THE
DETERMINATION
OF
THE
REQUIRED
VECTORS
AND
DOT
PRODUCTS
FOR
EACH
SPECIAL
CASE
SIMPLIFICATIONS
ARE
POSSIBLE
FOR
EXAMPLE
IF
THE
SURFACE
IS
A
FLAT
POLYGON
THE
NORMAL
IS
THE
SAME
AT
ALL
POINTS
ON
THE
SURFACE
IF
THE
LIGHT
SOURCE
IS
FAR
FROM
THE
SURFACE
THE
LIGHT
DIRECTION
IS
THE
SAME
AT
ALL
POINTS
IN
THIS
SECTION
WE
EXAMINE
HOW
THE
VECTORS
ARE
COMPUTED
FOR
THE
GENERAL
CASE
IN
SECTION
WE
SEE
WHAT
ADDITIONAL
TECHNIQUES
CAN
BE
APPLIED
WHEN
OUR
OBJECTS
ARE
COMPOSED
OF
FLAT
POLYGONS
THIS
CASE
IS
ESPECIALLY
IMPORTANT
BECAUSE
MOST
RENDERERS
INCLUDING
OPENGL
RENDER
CURVED
SURFACES
BY
APPROXIMATING
THOSE
SURFACES
WITH
MANY
SMALL
FLAT
POLYGONS
NORMAL
VECTORS
FOR
SMOOTH
SURFACES
THE
VECTOR
NORMAL
TO
THE
SURFACE
EXISTS
AT
EVERY
POINT
AND
GIVES
THE
LOCAL
ORIENTATION
OF
THE
SURFACE
ITS
CALCULATION
DEPENDS
ON
HOW
THE
SURFACE
IS
REPRESENTED
MATHEMATICALLY
TWO
SIMPLE
CASES
THE
PLANE
AND
THE
SPHERE
ILLUSTRATE
BOTH
HOW
WE
COMPUTE
NORMALS
AND
WHERE
THE
DIFFICULTIES
LIE
A
PLANE
CAN
BE
DESCRIBED
BY
THE
EQUATION
AX
BY
CZ
D
AS
WE
SAW
IN
CHAPTER
THIS
EQUATION
COULD
ALSO
BE
WRITTEN
IN
TERMS
OF
THE
NORMAL
TO
THE
PLANE
N
AND
A
POINT
KNOWN
TO
BE
ON
THE
PLANE
AS
N
P
WHERE
P
IS
ANY
POINT
X
Y
Z
ON
THE
PLANE
COMPARING
THE
TWO
FORMS
WE
SEE
THAT
THE
VECTOR
N
IS
GIVEN
BY
A
C
OR
IN
HOMOGENEOUS
COORDINATES
A
C
HOWEVER
SUPPOSE
THAT
INSTEAD
WE
ARE
GIVEN
THREE
NONCOLLINEAR
POINTS
THAT
ARE
IN
THIS
PLANE
AND
THUS
ARE
SUFFICIENT
TO
DETERMINE
IT
UNIQUELY
THE
VECTORS
AND
ARE
PARALLEL
TO
THE
PLANE
AND
WE
CAN
USE
THEIR
CROSS
PRODUCT
TO
FIND
THE
NORMAL
N
WE
MUST
BE
CAREFUL
ABOUT
THE
ORDER
OF
THE
VECTORS
IN
THE
CROSS
PRODUCT
REVERSING
THE
ORDER
CHANGES
THE
SURFACE
FROM
OUTWARD
POINTING
TO
INWARD
POINTING
AND
THAT
REVERSAL
CAN
AFFECT
THE
LIGHTING
CALCULATIONS
SOME
GRAPHICS
SYSTEMS
USE
THE
FIRST
THREE
VERTICES
IN
THE
SPECIFICATION
OF
A
POLYGON
TO
DETERMINE
THE
NORMAL
AUTOMATICALLY
OPENGL
DOES
NOT
DO
SO
BUT
AS
WE
SHALL
SEE
IN
SECTION
FORCING
USERS
TO
COMPUTE
NORMALS
CREATES
MORE
FLEXIBILITY
IN
HOW
WE
APPLY
OUR
LIGHTING
MODEL
FOR
CURVED
SURFACES
HOW
WE
COMPUTE
NORMALS
DEPENDS
ON
HOW
WE
REPRESENT
THE
SURFACE
IN
CHAPTER
WE
DISCUSS
THREE
DIFFERENT
METHODS
FOR
REPRESENTING
CURVES
AND
SURFACES
WE
CAN
SEE
A
FEW
OF
THE
POSSIBILITIES
BY
CONSIDERING
HOW
WE
REPRESENT
A
UNIT
SPHERE
CENTERED
AT
THE
ORIGIN
THE
USUAL
EQUATION
FOR
THIS
SPHERE
IS
THE
IMPLICIT
EQUATION
F
X
Y
Z
OR
IN
VECTOR
FORM
F
P
P
P
THE
NORMAL
IS
GIVEN
BY
THE
GRADIENT
VECTOR
WHICH
IS
DEFINED
BY
THE
COLUMN
MATRIX
F
X
N
THE
SPHERE
COULD
ALSO
BE
REPRESENTED
IN
PARAMETRIC
FORM
IN
THIS
FORM
THE
X
Y
AND
Z
VALUES
OF
A
POINT
ON
THE
SPHERE
ARE
REPRESENTED
INDEPENDENTLY
IN
TERMS
OF
TWO
PARAMETERS
U
AND
V
X
X
U
V
Y
Y
U
V
Z
Z
U
V
AS
WE
SHALL
SEE
IN
CHAPTER
THIS
FORM
IS
PREFERABLE
IN
COMPUTER
GRAPHICS
ESPECIALLY
FOR
REPRESENTING
CURVES
AND
SURFACES
ALTHOUGH
FOR
A
PARTICULAR
SURFACE
THERE
MAY
BE
MULTIPLE
PARAMETRIC
REPRESENTATIONS
ONE
PARAMETRIC
REPRESENTATION
FOR
THE
SPHERE
IS
X
U
V
COS
U
SIN
V
Y
U
V
COS
U
COS
V
Z
U
V
SIN
U
AS
U
AND
V
VARY
IN
THE
RANGE
Π
U
Π
Π
V
Π
WE
GET
ALL
THE
POINTS
ON
THE
SPHERE
WHEN
WE
ARE
USING
THE
PARAMETRIC
FORM
WE
CAN
OBTAIN
THE
NORMAL
FROM
THE
TANGENT
PLANE
SHOWN
IN
FIGURE
AT
A
POINT
P
U
V
X
U
V
Y
U
V
Z
U
V
T
ON
THE
SURFACE
THE
TANGENT
PLANE
GIVES
THE
LOCAL
ORIENTATION
OF
THE
SURFACE
AT
A
POINT
WE
CAN
DERIVE
IT
BY
TAKING
THE
LINEAR
TERMS
OF
THE
TAYLOR
SERIES
EXPANSION
OF
THE
SURFACE
AT
P
THE
RESULT
IS
THAT
AT
P
LINES
IN
THE
DIRECTIONS
OF
THE
VECTORS
REPRESENTED
BY
FIGURE
TANGENT
PLANE
TO
SPHERE
X
U
V
P
Y
U
U
Z
U
P
Y
V
V
Z
V
LIE
IN
THE
TANGENT
PLANE
WE
CAN
USE
THEIR
CROSS
PRODUCT
TO
OBTAIN
THE
NORMAL
N
P
P
U
V
FOR
OUR
SPHERE
WE
FIND
THAT
COS
U
SIN
V
SIN
U
WE
ARE
INTERESTED
IN
ONLY
THE
DIRECTION
OF
N
THUS
WE
CAN
DIVIDE
BY
COS
U
TO
OBTAIN
THE
UNIT
NORMAL
TO
THE
SPHERE
N
P
IN
SECTION
WE
USE
THIS
RESULT
TO
SHADE
A
POLYGONAL
APPROXIMATION
TO
A
SPHERE
WITHIN
A
GRAPHICS
SYSTEM
WE
USUALLY
WORK
WITH
A
COLLECTION
OF
VERTICES
AND
THE
NORMAL
VECTOR
MUST
BE
APPROXIMATED
FROM
SOME
SET
OF
POINTS
CLOSE
TO
THE
POINT
WHERE
THE
NORMAL
IS
NEEDED
THE
PIPELINE
ARCHITECTURE
OF
REAL
TIME
GRAPHICS
SYSTEMS
MAKES
THIS
CALCULATION
DIFFICULT
BECAUSE
WE
PROCESS
ONE
VERTEX
AT
A
TIME
AND
THUS
THE
GRAPHICS
SYSTEM
MAY
NOT
HAVE
THE
INFORMATION
AVAILABLE
TO
COMPUTE
THE
APPROXIMATE
NORMAL
AT
A
GIVEN
POINT
CONSEQUENTLY
GRAPHICS
SYSTEMS
OFTEN
LEAVE
THE
COMPUTATION
OF
NORMALS
TO
THE
USER
PROGRAM
IN
OPENGL
WE
WILL
USUALLY
SET
UP
A
NORMAL
AS
A
VERTEX
ATTRIBUTE
BY
A
MECHANISM
SUCH
AS
TYPEDEF
NORMAL
FIGURE
A
MIRROR
NORMAL
N
NX
NY
NZ
AND
THEN
SEND
THE
NORMAL
AS
NEEDED
TO
A
VERTEX
SHADER
AS
AN
ATTRIBUTE
QUALIFIED
VARIABLE
ANGLE
OF
REFLECTION
ONCE
WE
HAVE
CALCULATED
THE
NORMAL
AT
A
POINT
WE
CAN
USE
THIS
NORMAL
AND
THE
DIRECTION
OF
THE
LIGHT
SOURCE
TO
COMPUTE
THE
DIRECTION
OF
A
PERFECT
REFLECTION
AN
IDEAL
MIRROR
IS
CHARACTERIZED
BY
THE
FOLLOWING
STATEMENT
THE
ANGLE
OF
INCIDENCE
IS
EQUAL
TO
THE
ANGLE
OF
REFLECTION
THESE
ANGLES
ARE
AS
PICTURED
IN
FIGURE
THE
ANGLE
OF
INCIDENCE
IS
THE
ANGLE
BETWEEN
THE
NORMAL
AND
THE
LIGHT
SOURCE
ASSUMED
TO
BE
A
POINT
SOURCE
THE
ANGLE
OF
REFLECTION
IS
THE
ANGLE
BETWEEN
THE
NORMAL
AND
THE
DIRECTION
IN
WHICH
THE
LIGHT
IS
REFLECTED
IN
TWO
DIMENSIONS
THERE
IS
BUT
A
SINGLE
ANGLE
SATISFYING
THE
ANGLE
CONDITION
IN
THREE
DIMENSIONS
HOWEVER
OUR
STATEMENT
IS
INSUFFICIENT
TO
COMPUTE
THE
REQUIRED
ANGLE
THERE
IS
AN
INFINITE
NUMBER
OF
ANGLES
SATISFYING
OUR
CONDITION
WE
MUST
ADD
THE
FOLLOWING
STATEMENT
AT
A
POINT
P
ON
THE
SURFACE
THE
INCOMING
LIGHT
RAY
THE
REFLECTED
LIGHT
RAY
AND
THE
NORMAL
AT
THE
POINT
MUST
ALL
LIE
IN
THE
SAME
PLANE
THESE
TWO
CONDITIONS
ARE
SUFFICIENT
FOR
US
TO
DETERMINE
R
FROM
N
AND
L
OUR
PRIMARY
INTEREST
IS
THE
DIRECTION
RATHER
THAN
THE
MAGNITUDE
OF
R
HOWEVER
MANY
OF
OUR
RENDERING
CALCULATIONS
WILL
BE
EASIER
IF
WE
DEAL
WITH
UNIT
LENGTH
VECTORS
HENCE
WE
ASSUME
THAT
BOTH
L
AND
N
HAVE
BEEN
NORMALIZED
SUCH
THAT
L
N
WE
ALSO
WANT
R
IF
ΘI
ΘR
THEN
COS
ΘI
COS
ΘR
USING
THE
DOT
PRODUCT
THE
ANGLE
CONDITION
IS
COS
ΘI
L
N
COS
ΘR
N
R
THE
COPLANAR
CONDITION
IMPLIES
THAT
WE
CAN
WRITE
R
AS
A
LINEAR
COMBINATION
OF
L
AND
N
R
ΑL
ΒN
TAKING
THE
DOT
PRODUCT
WITH
N
WE
FIND
THAT
N
R
ΑL
N
Β
L
N
WE
CAN
GET
A
SECOND
CONDITION
BETWEEN
Α
AND
Β
FROM
OUR
REQUIREMENT
THAT
R
ALSO
BE
OF
UNIT
LENGTH
THUS
R
R
N
SOLVING
THESE
TWO
EQUATIONS
WE
FIND
THAT
R
L
N
N
L
SOME
OF
THE
SHADERS
WE
DEVELOP
WILL
USE
THIS
CALCULATION
TO
COMPUTE
A
REFLECTION
VECTOR
FOR
USE
IN
THE
APPLICATION
OTHERS
THAT
NEED
THE
REFLECTION
VECTOR
ONLY
IN
A
SHADER
CAN
USE
THE
GLSL
REFLECT
FUNCTION
TO
COMPUTE
IT
METHODS
SUCH
AS
ENVIRONMENT
MAPS
WILL
USE
THE
REFLECTED
VIEW
VECTOR
SEE
EXERCISE
THAT
IS
USED
TO
DETERMINE
WHAT
A
VIEWER
WOULD
SEE
IF
SHE
LOOKED
AT
A
REFLECTING
SURFACE
SUCH
AS
A
HIGHLY
POLISHED
SPHERE
POLYGONAL
SHADING
ASSUMING
THAT
WE
CAN
COMPUTE
NORMAL
VECTORS
GIVEN
A
SET
OF
LIGHT
SOURCES
AND
A
VIEWER
THE
LIGHTING
MODELS
THAT
WE
HAVE
DEVELOPED
CAN
BE
APPLIED
AT
EVERY
POINT
ON
A
SURFACE
UNFORTUNATELY
EVEN
IF
WE
HAVE
SIMPLE
EQUATIONS
TO
DETERMINE
NORMAL
VEC
TORS
AS
WE
DID
IN
OUR
EXAMPLE
OF
A
SPHERE
SECTION
THE
AMOUNT
OF
COMPUTATION
REQUIRED
CAN
BE
LARGE
WE
HAVE
ALREADY
SEEN
MANY
OF
THE
ADVANTAGES
OF
USING
POLYG
ONAL
MODELS
FOR
OUR
OBJECTS
A
FURTHER
ADVANTAGE
IS
THAT
FOR
FLAT
POLYGONS
WE
CAN
SIGNIFICANTLY
REDUCE
THE
WORK
REQUIRED
FOR
SHADING
MOST
GRAPHICS
SYSTEMS
INCLUDING
FIGURE
POLYGONAL
MESH
FIGURE
DISTANT
SOURCE
AND
VIEWER
OPENGL
EXPLOIT
THE
EFFICIENCIES
POSSIBLE
FOR
RENDERING
FLAT
POLYGONS
BY
DECOMPOSING
CURVED
SURFACES
INTO
MANY
SMALL
FLAT
POLYGONS
CONSIDER
A
POLYGONAL
MESH
SUCH
AS
THAT
SHOWN
IN
FIGURE
WHERE
EACH
POLY
GON
IS
FLAT
AND
THUS
HAS
A
WELL
DEFINED
NORMAL
VECTOR
WE
CONSIDER
THREE
WAYS
TO
SHADE
THE
POLYGONS
FLAT
SHADING
SMOOTH
OR
GOURAUD
SHADING
AND
PHONG
SHADING
FLAT
SHADING
THE
THREE
VECTORS
L
N
AND
V
CAN
VARY
AS
WE
MOVE
FROM
POINT
TO
POINT
ON
A
SURFACE
FOR
A
FLAT
POLYGON
HOWEVER
N
IS
CONSTANT
IF
WE
ASSUME
A
DISTANT
VIEWER
V
IS
CONSTANT
OVER
THE
POLYGON
FINALLY
IF
THE
LIGHT
SOURCE
IS
DISTANT
L
IS
CONSTANT
HERE
DISTANT
COULD
BE
INTERPRETED
IN
THE
STRICT
SENSE
OF
MEANING
THAT
THE
SOURCE
IS
AT
INFINITY
THE
NECESSARY
ADJUSTMENTS
SUCH
AS
CHANGING
THE
LOCATION
OF
THE
SOURCE
TO
THE
DIRECTION
OF
THE
SOURCE
COULD
THEN
BE
MADE
TO
THE
SHADING
EQUATIONS
AND
TO
THEIR
IMPLEMENTATION
DISTANT
COULD
ALSO
BE
INTERPRETED
IN
TERMS
OF
THE
SIZE
OF
THE
POLYGON
RELATIVE
TO
HOW
FAR
THE
POLYGON
IS
FROM
THE
SOURCE
OR
VIEWER
AS
SHOWN
IN
FIGURE
GRAPHICS
SYSTEMS
OR
USER
PROGRAMS
OFTEN
EXPLOIT
THIS
DEFINITION
IF
THE
THREE
VECTORS
ARE
CONSTANT
THEN
THE
SHADING
CALCULATION
NEEDS
TO
BE
CARRIED
OUT
ONLY
ONCE
FOR
EACH
POLYGON
AND
EACH
POINT
ON
THE
POLYGON
IS
ASSIGNED
THE
SAME
SHADE
THIS
TECHNIQUE
IS
KNOWN
AS
FLAT
OR
CONSTANT
SHADING
FLAT
SHADING
WILL
SHOW
DIFFERENCES
IN
SHADING
AMONG
THE
POLYGONS
IN
OUR
MESH
IF
THE
LIGHT
SOURCES
AND
VIEWER
ARE
NEAR
THE
POLYGON
THE
VECTORS
L
AND
V
WILL
BE
DIF
FIGURE
FLAT
SHADING
OF
POLYGONAL
MESH
FERENT
FOR
EACH
POLYGON
HOWEVER
IF
OUR
POLYGONAL
MESH
HAS
BEEN
DESIGNED
TO
MODEL
A
SMOOTH
SURFACE
FLAT
SHADING
WILL
ALMOST
ALWAYS
BE
DISAPPOINTING
BECAUSE
WE
CAN
SEE
EVEN
SMALL
DIFFERENCES
IN
SHADING
BETWEEN
ADJACENT
POLYGONS
AS
SHOWN
IN
FIG
URE
THE
HUMAN
VISUAL
SYSTEM
HAS
A
REMARKABLE
SENSITIVITY
TO
SMALL
DIFFERENCES
IN
LIGHT
INTENSITY
DUE
TO
A
PROPERTY
KNOWN
AS
LATERAL
INHIBITION
IF
WE
SEE
AN
INCREAS
ING
SEQUENCE
OF
INTENSITIES
AS
IS
SHOWN
IN
FIGURE
WE
PERCEIVE
THE
INCREASES
IN
BRIGHTNESS
AS
OVERSHOOTING
ON
ONE
SIDE
OF
AN
INTENSITY
STEP
AND
UNDERSHOOTING
ON
THE
OTHER
AS
SHOWN
IN
FIGURE
WE
SEE
STRIPES
KNOWN
AS
MACH
BANDS
ALONG
THE
EDGES
THIS
PHENOMENON
IS
A
CONSEQUENCE
OF
HOW
THE
CONES
IN
THE
EYE
ARE
CONNECTED
TO
THE
OPTIC
NERVE
AND
THERE
IS
LITTLE
THAT
WE
CAN
DO
TO
AVOID
IT
OTHER
THAN
TO
LOOK
FOR
SMOOTHER
SHADING
TECHNIQUES
THAT
DO
NOT
PRODUCE
LARGE
DIFFERENCES
IN
SHADES
AT
THE
EDGES
OF
POLYGONS
SMOOTH
AND
GOURAUD
SHADING
IN
OUR
ROTATING
CUBE
EXAMPLE
OF
SECTION
WE
SAW
THAT
THE
RASTERIZER
INTERPOLATES
COLORS
ASSIGNED
TO
VERTICES
ACROSS
A
POLYGON
SUPPOSE
THAT
THE
LIGHTING
CALCULATION
IS
MADE
AT
EACH
VERTEX
USING
THE
MATERIAL
PROPERTIES
AND
THE
VECTORS
N
V
AND
L
COMPUTED
FOR
EACH
VERTEX
THUS
EACH
VERTEX
WILL
HAVE
ITS
OWN
COLOR
THAT
THE
RASTERIZER
CAN
USE
TO
INTERPOLATE
A
SHADE
FOR
EACH
FRAGMENT
NOTE
THAT
IF
THE
LIGHT
SOURCE
IS
DISTANT
AND
EITHER
THE
VIEWER
IS
DISTANT
OR
THERE
ARE
NO
SPECULAR
REFLECTIONS
THEN
SMOOTH
OR
INTERPOLATIVE
SHADING
SHADES
A
POLYGON
IN
A
CONSTANT
COLOR
FIGURE
STEP
CHART
PERCEIVED
INTENSITY
ACTUAL
INTENSITY
FIGURE
PERCEIVED
AND
ACTUAL
INTENSITIES
AT
AN
EDGE
N
FIGURE
NORMALS
NEAR
INTERIOR
VERTEX
IF
WE
CONSIDER
OUR
MESH
THE
IDEA
OF
A
NORMAL
EXISTING
AT
A
VERTEX
SHOULD
CAUSE
CONCERN
TO
ANYONE
WORRIED
ABOUT
MATHEMATICAL
CORRECTNESS
BECAUSE
MULTIPLE
POLY
GONS
MEET
AT
INTERIOR
VERTICES
OF
THE
MESH
EACH
OF
WHICH
HAS
ITS
OWN
NORMAL
THE
NORMAL
AT
THE
VERTEX
IS
DISCONTINUOUS
ALTHOUGH
THIS
SITUATION
MIGHT
COMPLICATE
THE
MATHEMATICS
GOURAUD
REALIZED
THAT
THE
NORMAL
AT
THE
VERTEX
COULD
BE
DEFINED
IN
SUCH
A
WAY
AS
TO
ACHIEVE
SMOOTHER
SHADING
THROUGH
INTERPOLATION
CONSIDER
AN
INTERIOR
VER
TEX
AS
SHOWN
IN
FIGURE
WHERE
FOUR
POLYGONS
MEET
EACH
HAS
ITS
OWN
NORMAL
IN
GOURAUD
SHADING
WE
DEFINE
THE
NORMAL
AT
A
VERTEX
TO
BE
THE
NORMALIZED
AVERAGE
OF
THE
NORMALS
OF
THE
POLYGONS
THAT
SHARE
THE
VERTEX
FOR
OUR
EXAMPLE
THE
VERTEX
NORMAL
IS
GIVEN
BY
N
FROM
AN
OPENGL
PERSPECTIVE
GOURAUD
SHADING
IS
DECEPTIVELY
SIMPLE
WE
NEED
ONLY
TO
SET
THE
VERTEX
NORMALS
CORRECTLY
OFTEN
THE
LITERATURE
MAKES
NO
DISTINCTION
BETWEEN
SMOOTH
AND
GOURAUD
SHADING
HOWEVER
THE
LACK
OF
A
DISTINCTION
CAUSES
A
PROBLEM
HOW
DO
WE
FIND
THE
NORMALS
THAT
WE
SHOULD
AVERAGE
TOGETHER
IF
OUR
PROGRAM
IS
LIN
EAR
SPECIFYING
A
LIST
OF
VERTICES
AND
OTHER
PROPERTIES
WE
DO
NOT
HAVE
THE
NECESSARY
INFORMATION
ABOUT
WHICH
POLYGONS
SHARE
A
VERTEX
WHAT
WE
NEED
OF
COURSE
IS
A
DATA
STRUCTURE
FOR
REPRESENTING
THE
MESH
TRAVERSING
THIS
DATA
STRUCTURE
CAN
GENERATE
THE
VERTICES
WITH
THE
AVERAGED
NORMALS
SUCH
A
DATA
STRUCTURE
SHOULD
CONTAIN
AT
A
MINI
MUM
POLYGONS
VERTICES
NORMALS
AND
MATERIAL
PROPERTIES
ONE
POSSIBLE
STRUCTURE
IS
THE
ONE
SHOWN
IN
FIGURE
THE
KEY
INFORMATION
THAT
MUST
BE
REPRESENTED
IN
THE
DATA
STRUCTURE
IS
WHICH
POLYGONS
MEET
AT
EACH
VERTEX
COLOR
PLATES
AND
SHOW
THE
SHADING
EFFECTS
AVAILABLE
IN
OPENGL
IN
COLOR
PLATE
THERE
IS
A
SINGLE
LIGHT
SOURCE
BUT
EACH
POLYGON
HAS
BEEN
RENDERED
WITH
A
SINGLE
SHADE
CONSTANT
SHADING
COMPUTED
USING
THE
PHONG
MODEL
IN
COLOR
PLATE
FIGURE
MESH
DATA
STRUCTURE
NA
FIGURE
EDGE
NORMALS
NORMALS
HAVE
BEEN
ASSIGNED
TO
ALL
THE
VERTICES
OPENGL
HAS
THEN
COMPUTED
SHADES
FOR
THE
VERTICES
AND
HAS
INTERPOLATED
THESE
SHADES
OVER
THE
FACES
OF
THE
POLYGONS
COLOR
PLATE
CONTAINS
ANOTHER
ILLUSTRATION
OF
THE
SMOOTH
SHADING
PROVIDED
BY
OPENGL
WE
USED
THIS
COLOR
CUBE
AS
AN
EXAMPLE
IN
BOTH
CHAPTERS
AND
AND
THE
PROGRAMS
ARE
IN
APPENDIX
A
THE
EIGHT
VERTICES
ARE
COLORED
BLACK
WHITE
RED
GREEN
BLUE
CYAN
MAGENTA
AND
YELLOW
ONCE
SMOOTH
SHADING
IS
ENABLED
OPENGL
INTERPOLATES
THE
COLORS
ACROSS
THE
FACES
OF
THE
POLYGONS
AUTOMATICALLY
PHONG
SHADING
EVEN
THE
SMOOTHNESS
INTRODUCED
BY
GOURAUD
SHADING
MAY
NOT
PREVENT
THE
APPEAR
ANCE
OF
MACH
BANDS
PHONG
PROPOSED
THAT
INSTEAD
OF
INTERPOLATING
VERTEX
INTENSITIES
AS
WE
DO
IN
GOURAUD
SHADING
WE
INTERPOLATE
NORMALS
ACROSS
EACH
POLYGON
CONSIDER
A
POLYGON
THAT
SHARES
EDGES
AND
VERTICES
WITH
OTHER
POLYGONS
IN
THE
MESH
AS
SHOWN
IN
FIGURE
WE
CAN
COMPUTE
VERTEX
NORMALS
BY
INTERPOLATING
OVER
THE
NORMALS
OF
THE
POLYGONS
THAT
SHARE
THE
VERTEX
NEXT
WE
CAN
USE
INTERPOLATION
AS
WE
DID
IN
CHAP
TER
TO
INTERPOLATE
THE
NORMALS
OVER
THE
POLYGON
CONSIDER
FIGURE
WE
CAN
USE
THE
INTERPOLATED
NORMALS
AT
VERTICES
A
AND
B
TO
INTERPOLATE
NORMALS
ALONG
THE
EDGE
BETWEEN
THEM
NC
Α
Α
NA
ΑNB
WE
CAN
DO
A
SIMILAR
INTERPOLATION
ON
ALL
THE
EDGES
THE
NORMAL
AT
ANY
INTERIOR
POINT
CAN
BE
OBTAINED
FROM
POINTS
ON
THE
EDGES
BY
N
Α
Β
Β
NC
ΒND
ONCE
WE
HAVE
THE
NORMAL
AT
EACH
POINT
WE
CAN
MAKE
AN
INDEPENDENT
SHADING
CALCU
LATION
USUALLY
THIS
PROCESS
CAN
BE
COMBINED
WITH
RASTERIZATION
OF
THE
POLYGON
UNTIL
RECENTLY
PHONG
SHADING
COULD
ONLY
BE
CARRIED
OUT
OFF
LINE
BECAUSE
IT
REQUIRES
THE
IN
TERPOLATION
OF
NORMALS
ACROSS
EACH
POLYGON
IN
TERMS
OF
THE
PIPELINE
PHONG
SHADING
NA
FIGURE
INTERPOLATION
OF
NORMALS
IN
PHONG
SHADING
REQUIRES
THAT
THE
LIGHTING
MODEL
BE
APPLIED
TO
EACH
FRAGMENT
HENCE
THE
NAME
PER
FRAGMENT
SHADING
WE
WILL
IMPLEMENT
PHONG
SHADING
THROUGH
A
FRAGMENT
SHADER
APPROXIMATION
OF
A
SPHERE
BY
RECURSIVE
SUBDIVISION
WE
HAVE
USED
THE
SPHERE
AS
AN
EXAMPLE
CURVED
SURFACE
TO
ILLUSTRATE
SHADING
CALCU
LATIONS
HOWEVER
THE
SPHERE
IS
NOT
AN
OBJECT
SUPPORTED
WITHIN
OPENGL
SO
WE
WILL
GENERATE
APPROXIMATIONS
TO
A
SPHERE
USING
TRIANGLES
THROUGH
A
PROCESS
KNOWN
AS
RE
CURSIVE
SUBDIVISION
A
TECHNIQUE
WE
INTRODUCED
IN
CHAPTER
FOR
CONSTRUCTING
THE
SIERPINSKI
GASKET
RECURSIVE
SUBDIVISION
IS
A
POWERFUL
TECHNIQUE
FOR
GENERATING
AP
PROXIMATIONS
TO
CURVES
AND
SURFACES
TO
ANY
DESIRED
LEVEL
OF
ACCURACY
THE
SPHERE
APPROXIMATION
PROVIDES
A
BASIS
FOR
US
TO
WRITE
SIMPLE
PROGRAMS
THAT
ILLUSTRATE
THE
INTERACTIONS
BETWEEN
SHADING
PARAMETERS
AND
POLYGONAL
APPROXIMATIONS
TO
CURVED
SURFACES
OUR
STARTING
POINT
IS
A
TETRAHEDRON
ALTHOUGH
WE
COULD
START
WITH
ANY
REGULAR
POLYHEDRON
WHOSE
FACETS
COULD
BE
DIVIDED
INITIALLY
INTO
TRIANGLES
THE
REGULAR
TETRA
HEDRON
IS
COMPOSED
OF
FOUR
EQUILATERAL
TRIANGLES
DETERM
INED
BY
FOUR
VERTICES
WE
ST
ART
WITH
THE
FOUR
VERTICES
AND
ALL
FOUR
LIE
ON
THE
UNIT
SPHERE
CENTERED
AT
THE
ORIGIN
EXER
CISE
SUGGESTS
ONE
METHOD
FOR
FINDING
THESE
POINTS
WE
GET
A
FIRST
APPROXIMATION
BY
DRAWING
A
WIREFRAME
FOR
THE
TETRAHEDRON
WE
SPECIFY
THE
FOUR
VERTICES
AS
FOLLOWS
V
WE
THEN
PUT
THE
VERTICES
INTO
AN
ARRAY
DATA
SO
WE
CAN
DISPLAY
THE
TRIANGLES
USING
LINE
LOOPS
EACH
TRIANGLE
ADDS
THREE
POINTS
TO
THIS
ARRAY
USING
THE
FUNCTION
STATIC
INT
K
VOID
TRIANGLE
A
B
C
DATA
K
A
THE
REGULAR
ICOSAHEDRON
IS
COMPOSED
OF
EQUILATERAL
TRIANGLES
IT
MAKES
A
NICE
STARTING
POINT
FOR
GENERATING
SPHERES
SEE
K
DATA
K
B
K
DATA
K
C
K
ALL
THE
DATA
FOR
THE
TETRAHEDRON
IS
PUT
INTO
DATA
AS
FOLLOWS
VOID
TETRAHEDRON
TRIANGLE
V
V
V
TRIANGLE
V
V
V
TRIANGLE
V
V
V
TRIANGLE
V
V
V
THE
ORDER
OF
VERTICES
OBEYS
THE
RIGHT
HAND
RULE
SO
WE
CAN
CONVERT
THE
CODE
TO
DRAW
SHADED
POLYGONS
WITH
LITTLE
DIFFICULTY
IF
WE
ADD
THE
USUAL
CODE
FOR
INITIALIZATION
SET
TING
UP
A
VERTEX
BUFFER
OBJECT
AND
DRAWING
THE
ARRAY
OUR
PROGRAM
WILL
GENERATE
AN
IMAGE
SUCH
AS
THAT
IN
FIGURE
A
SIMPLE
REGULAR
POLYHEDRON
BUT
A
POOR
APPROXI
MATION
TO
A
SPHERE
WE
CAN
GET
A
CLOSER
APPROXIMATION
TO
THE
SPHERE
BY
SUBDIVIDING
EACH
FACET
OF
THE
TETRAHEDRON
INTO
SMALLER
TRIANGLES
SUBDIVIDING
INTO
TRIANGLES
WILL
ENSURE
THAT
ALL
THE
NEW
FACETS
WILL
BE
FLAT
THERE
ARE
AT
LEAST
THREE
WAYS
TO
DO
THE
SUBDIVISION
AS
SHOWN
IN
FIGURE
WE
CAN
BISECT
EACH
OF
THE
ANGLES
OF
THE
TRIANGLE
AND
DRAW
THE
THREE
BISECTORS
WHICH
MEET
AT
A
COMMON
POINT
THUS
GENERATING
THREE
NEW
TRIANGLES
WE
CAN
ALSO
COMPUTE
THE
CENTER
OF
MASS
CENTROID
OF
THE
VERTICES
BY
SIMPLY
AVERAGING
THEM
AND
THEN
DRAW
LINES
FROM
THIS
POINT
TO
THE
THREE
VERTICES
AGAIN
GENERATING
THREE
TRIANGLES
HOWEVER
THESE
TECHNIQUES
DO
NOT
PRESERVE
THE
EQUILATERAL
TRIANGLES
THAT
MAKE
UP
THE
REGULAR
TETRAHEDRON
INSTEAD
RECALLING
A
CONSTRUCTION
FOR
THE
SIERPINSKI
GASKET
OF
CHAPTER
WE
CAN
CONNECT
THE
BISECTORS
OF
THE
SIDES
OF
THE
TRIANGLE
FORMING
FOUR
EQUILATERAL
TRIANGLES
AS
SHOWN
IN
FIGURE
C
WE
USE
THIS
TECHNIQUE
FOR
OUR
EXAMPLE
AFTER
WE
HAVE
SUBDIVIDED
A
FACET
AS
JUST
DESCRIBED
THE
FOUR
NEW
TRIANGLES
WILL
STILL
BE
IN
THE
SAME
PLANE
AS
THE
ORIGINAL
TRIANGLE
WE
CAN
MOVE
THE
NEW
VERTICES
THAT
FIGURE
TETRAHEDRON
A
B
C
FIGURE
SUBDIVISION
OF
A
TRIANGLE
BY
A
BISECTING
ANGLES
B
COMPUTING
THE
CENTROID
AND
C
BISECTING
SIDES
WE
CREATED
BY
BISECTION
TO
THE
UNIT
SPHERE
BY
NORMALIZING
EACH
BISECTED
VERTEX
USING
THE
NORMALIZATION
FUNCTION
NORMALIZE
IN
VEC
H
WE
CAN
NOW
SUBDIVIDE
A
SINGLE
TRIANGLE
DEFINED
BY
THE
VERTICES
A
B
AND
C
NORMALIZE
A
B
NORMALIZE
A
C
NORMALIZE
B
C
TRIANGLE
A
TRIANGLE
C
TRIANGLE
B
TRIANGLE
WE
CAN
USE
THIS
CODE
IN
OUR
TETRAHEDRON
ROUTINE
TO
GENERATE
TRIANGLES
RATHER
THAN
BUT
WE
WOULD
RATHER
BE
ABLE
TO
REPEAT
THE
SUBDIVISION
PROCESS
N
TIMES
TO
GENERATE
SUCCESSIVELY
CLOSER
APPROXIMATIONS
TO
THE
SPHERE
BY
CALLING
THE
SUBDIVISION
ROUTINE
RECURSIVELY
WE
CAN
CONTROL
THE
NUMBER
OF
SUBDIVISIONS
FIRST
WE
MAKE
THE
TETRAHEDRON
ROUTINE
DEPEND
ON
THE
DEPTH
OF
RECURSION
BY
ADDING
AN
ARGUMENT
N
VOID
TETRAHEDRON
INT
N
V
V
V
N
V
V
V
N
V
V
V
N
V
V
V
N
THE
FUNCTION
CALLS
ITSELF
TO
SUBDIVIDE
FURTHER
IF
N
IS
GREATER
THAN
ZERO
BUT
GENERATES
TRIANGLES
IF
N
HAS
BEEN
REDUCED
TO
ZERO
HERE
IS
THE
CODE
VOID
A
B
C
INT
N
IF
N
NORMALIZE
V
A
V
B
NORMALIZE
V
A
V
C
NORMALIZE
V
B
V
C
A
N
C
N
B
N
N
ELSE
TRIANGLE
A
B
C
FIGURE
SHOWS
AN
APPROXIMATION
TO
THE
SPHERE
DRAWN
WITH
THIS
CODE
WE
NOW
TURN
TO
ADDING
LIGHTING
AND
SHADING
TO
OUR
SPHERE
APPROXIMATION
SPECIFYING
LIGHTING
PARAMETERS
FOR
MANY
YEARS
THE
BLINN
PHONG
LIGHTING
MODEL
WAS
THE
STANDARD
IN
COMPUTER
GRAPHICS
IT
WAS
IMPLEMENTED
IN
HARDWARE
AND
WAS
SPECIFIED
AS
PART
OF
THE
OPENGL
FIXED
FUNCTIONALITY
PIPELINE
WITH
THE
PRESENT
EMPHASIS
ON
SHADERS
WE
ARE
FREE
TO
IM
PLEMENT
OTHER
LIGHTING
MODELS
WITH
NO
LOSS
OF
EFFICIENCY
WE
CAN
ALSO
CHOOSE
WHERE
TO
APPLY
A
LIGHT
MODEL
CONSEQUENTLY
WE
MUST
SPECIFY
A
GROUP
OF
LIGHTING
AND
MATE
RIAL
PARAMETERS
AND
THEN
EITHER
USE
THEM
IN
THE
APPLICATION
CODE
OR
SEND
THEM
TO
THE
SHADERS
LIGHT
SOURCES
IN
SECTION
WE
INTRODUCED
FOUR
TYPES
OF
LIGHT
SOURCES
AMBIENT
POINT
SPOTLIGHT
AND
DISTANT
HOWEVER
BECAUSE
SPOTLIGHTS
AND
DISTANT
LIGHT
SOURCES
CAN
BE
DERIVED
FROM
A
POINT
SOURCE
WE
WILL
FOCUS
ON
POINT
SOURCES
AND
AMBIENT
LIGHT
AN
IDEAL
POINT
SOURCE
EMITS
LIGHT
UNIFORMLY
IN
ALL
DIRECTIONS
TO
GET
A
SPOTLIGHT
FROM
A
POINT
SOURCE
WE
NEED
ONLY
LIMIT
THE
DIRECTIONS
OF
THE
POINT
SOURCE
AND
MAKE
THE
LIGHT
EMISSIONS
FOLLOW
A
DESIRED
PROFILE
TO
GET
A
DISTANT
SOURCE
FROM
A
POINT
SOURCE
WE
NEED
TO
ALLOW
THE
LOCATION
OF
THE
SOURCE
TO
GO
TO
INFINITY
SO
THE
POSITION
OF
THE
SOURCE
BECOMES
THE
DIRECTION
OF
THE
SOURCE
NOTE
THAT
THIS
ARGUMENT
IS
SIMILAR
TO
THE
ARGUMENT
THAT
PARALLEL
VIEWING
IS
THE
LIMIT
OF
PERSPECTIVE
VIEWING
AS
THE
CENTER
OF
PROJECTION
MOVES
TO
INFINITY
AS
WE
ARGUED
IN
DERIVING
THE
EQUATIONS
FOR
PARALLEL
PROJECTIONS
WE
WILL
FIND
IT
EASIER
TO
DERIVE
THE
EQUATIONS
FOR
LIGHTING
WITH
DISTANT
SOURCES
DIRECTLY
RATHER
THAN
BY
TAKING
LIMITS
ALTHOUGH
THE
CONTRIBUTION
OF
AMBIENT
LIGHT
IS
THE
SAME
EVERYWHERE
IN
A
SCENE
AMBIENT
LIGHT
IS
DEPENDENT
ON
THE
SOURCES
IN
THE
ENVIRONMENT
FOR
EXAMPLE
CONSIDER
A
CLOSED
ROOM
WITH
A
SINGLE
WHITE
POINT
SOURCE
WHEN
THE
LIGHT
IS
TURNED
OFF
THERE
IS
NO
LIGHT
IN
THE
ROOM
OF
ANY
KIND
WHEN
THE
LIGHT
IS
TURNED
ON
AT
ANY
POINT
IN
THE
ROOM
THAT
CAN
SEE
THE
LIGHT
SOURCE
THERE
IS
A
CONTRIBUTION
FROM
THE
LIGHT
HITTING
SURFACES
DIRECTLY
CONTRIBUTING
TO
THE
DIFFUSE
OR
SPECULAR
REFLECTION
WE
SEE
AT
THAT
POINT
THERE
IS
ALSO
A
CONTRIBUTION
FROM
THE
WHITE
LIGHT
BOUNCING
OFF
OF
MULTIPLE
SURFACES
IN
THE
ROOM
AND
GIVING
A
CONTRIBUTION
THAT
IS
ALMOST
THE
SAME
AT
EVERY
POINT
IN
THE
ROOM
IT
IS
THIS
LATTER
CONTRIBUTION
THAT
WE
CALL
AMBIENT
LIGHT
ITS
COLOR
DEPENDS
NOT
ONLY
ON
THE
COLOR
OF
THE
SOURCE
BUT
ALSO
ON
THE
REFLECTIVE
PROPERTIES
OF
THE
SURFACES
IN
THE
ROOM
THUS
IF
THE
ROOM
HAS
RED
WALLS
WE
WOULD
EXPECT
THE
AMBIENT
COMPONENT
TO
HAVE
A
DOMINANT
RED
COMPONENT
HOWEVER
THE
EXISTENCE
OF
AN
AMBIENT
COMPONENT
TO
THE
SHADE
WE
SEE
ON
A
SURFACE
IS
ULTIMATELY
TIED
TO
THE
LIGHT
SOURCES
IN
THE
ENVIRONMENT
AND
HENCE
BECOMES
PART
OF
THE
SPECIFICATION
OF
THE
SOURCES
FOR
EVERY
LIGHT
SOURCE
WE
MUST
SPECIFY
ITS
COLOR
AND
EITHER
ITS
LOCATION
OR
ITS
DIRECTION
AS
IN
SECTION
THE
COLOR
OF
A
SOURCE
WILL
HAVE
THREE
COMPONENTS
DIFFUSE
SPECULAR
AND
AMBIENT
THAT
WE
CAN
SPECIFY
FOR
A
SINGLE
LIGHT
AS
FIGURE
SPHERE
APPROX
IMATIONS
USING
SUBDIVISION
WE
CAN
SPECIFY
THE
POSITION
OF
THE
LIGHT
AS
FOLLOWS
FOR
A
POINT
SOURCE
ITS
POSITION
WILL
BE
IN
HOMOGENEOUS
COORDINATES
SO
A
LIGHT
MIGHT
BE
SPECIFIED
AS
IF
THE
FOURTH
COMPONENT
IS
CHANGED
TO
ZERO
AS
IN
THE
SOURCE
BECOMES
A
DIRECTIONAL
SOURCE
IN
THE
DIRECTION
FOR
POSITIONAL
LIGHT
SOURCES
WE
MAY
ALSO
WANT
TO
ACCOUNT
FOR
THE
ATTENUATION
OF
LIGHT
RECEIVED
DUE
TO
ITS
DISTANCE
FROM
THE
SOURCE
ALTHOUGH
FOR
AN
IDEAL
SOURCE
THE
ATTENUATION
IS
INVERSELY
PROPORTIONAL
TO
THE
SQUARE
OF
THE
DISTANCE
D
WE
CAN
GAIN
MORE
FLEXIBILITY
BY
USING
THE
DISTANCE
ATTENUATION
MODEL
F
D
A
BD
WHICH
CONTAINS
CONSTANT
LINEAR
AND
QUADRATIC
TERMS
WE
CAN
USE
THREE
FLOATS
FOR
THESE
VALUES
FLOAT
AND
USE
THEM
IN
THE
APPLICATION
OR
SEND
THEM
TO
THE
SHADERS
AS
UNIFORM
VARIABLES
WE
CAN
ALSO
CONVERT
A
POSITIONAL
SOURCE
TO
A
SPOTLIGHT
BY
SETTING
ITS
DIRECTION
THE
ANGLE
OF
THE
CONE
OR
THE
SPOTLIGHT
CUTOFF
AND
THE
DROP
OFF
RATE
OR
SPOTLIGHT
EXPONENT
THESE
THREE
PARAMETERS
CAN
BE
SPECIFIED
BY
THREE
FLOATS
MATERIALS
MATERIAL
PROPERTIES
SHOULD
MATCH
UP
DIRECTLY
WITH
THE
SUPPORTED
LIGHT
SOURCES
AND
WITH
THE
CHOSEN
REFLECTION
MODEL
WE
MAY
ALSO
WANT
THE
FLEXIBILITY
TO
SPECIFY
DIFFERENT
MATERIAL
PROPERTIES
FOR
THE
FRONT
AND
BACK
FACES
OF
A
SURFACE
FOR
EXAMPLE
WE
MIGHT
SPECIFY
AMBIENT
DIFFUSE
AND
SPECULAR
REFLECTIVITY
COEF
FICIENTS
KA
KD
KS
FOR
EACH
PRIMARY
COLOR
THROUGH
THREE
COLORS
USING
EITHER
RGB
OR
RGBA
COLORS
AS
AMBIENT
DIFFUSE
SPECULAR
OR
ASSUMING
THE
SURFACE
IS
OPAQUE
AMBIENT
DIFFUSE
SPECULAR
HERE
WE
HAVE
DEFINED
A
SMALL
AMOUNT
OF
WHITE
AMBIENT
REFLECTIVITY
YELLOW
DIFFUSE
PROPERTIES
AND
WHITE
SPECULAR
REFLECTIONS
NOTE
THAT
OFTEN
THE
DIFFUSE
AND
SPECULAR
REFLECTIVITY
ARE
THE
SAME
FOR
THE
SPECULAR
COMPONENT
WE
ALSO
NEED
TO
SPECIFY
ITS
SHININESS
FLOAT
SHININESS
IF
WE
HAVE
DIFFERENT
REFLECTIVITY
PROPERTIES
FOR
THE
FRONT
AND
BACK
FACES
WE
CAN
ALSO
SPECIFY
THREE
ADDITIONAL
PARAMETERS
THAT
CAN
BE
USED
TO
RENDER
THE
BACK
FACES
WE
ALSO
WANT
TO
ALLOW
FOR
SCENES
IN
WHICH
A
LIGHT
SOURCE
IS
WITHIN
THE
VIEW
VOLUME
AND
THUS
MIGHT
BE
VISIBLE
FOR
EXAMPLE
FOR
AN
OUTDOOR
NIGHT
SCENE
WE
MIGHT
SEE
THE
MOON
IN
AN
IMAGE
WE
COULD
MODEL
THE
MOON
WITH
A
SIMPLE
POLYGONAL
APPROXIMATION
TO
A
CIRCLE
HOWEVER
WHEN
WE
RENDER
THE
MOON
ITS
COLOR
SHOULD
BE
CONSTANT
AND
NOT
BE
AFFECTED
BY
OTHER
LIGHT
SOURCES
WE
CAN
CREATE
SUCH
EFFECTS
BY
INCLUDING
AN
EMISSIVE
COMPONENT
THAT
MODELS
SELF
LUMINOUS
SOURCES
THIS
TERM
IS
UNAFFECTED
BY
ANY
OF
THE
LIGHT
SOURCES
AND
IT
DOES
NOT
AFFECT
ANY
OTHER
SURFACES
IT
ADDS
A
FIXED
COLOR
TO
THE
SURFACES
AND
IS
SPECIFIED
IN
A
MANNER
SIMILAR
TO
OTHER
MATERIAL
PROPERTIES
FOR
EXAMPLE
EMISSION
SPECFIES
A
SMALL
AMOUNT
OF
BLUE
GREEN
CYAN
EMISSION
FROM
AN
APPLICATION
PROGRAMMER
PERSPECTIVE
WE
WOULD
LIKE
TO
HAVE
MATERIAL
PROPERTIES
THAT
WE
CAN
SPECIFY
WITH
A
SINGLE
FUNCTION
CALL
WE
CAN
ACHIEVE
THIS
GOAL
BY
DEFINING
MATERIAL
OBJECTS
IN
THE
APPLICATION
USING
STRUCTS
OR
CLASSES
FOR
EXAMPLE
CONSIDER
THE
TYPEDEF
TYPEDEF
STRUCT
MATERIALSTRUCT
AMBIENT
DIFFUSE
SPECULAR
EMISSION
FLOAT
SHININESS
MATERIALSTRUCT
WE
CAN
NOW
DEFINE
MATERIALS
BY
CODE
SUCH
AS
MATERIALSTRUCT
BRASSMATERIALS
AND
ACCESS
THIS
CODE
THROUGH
A
POINTER
CURRENTMATERIAL
BRASSMATERIALS
IMPLEMENTING
A
LIGHTING
MODEL
THUS
FAR
WE
HAVE
ONLY
LOOKED
AT
PARAMETERS
THAT
WE
MIGHT
USE
IN
A
LIGHT
MODEL
WE
HAVE
YET
TO
BUILD
A
PARTICULAR
MODEL
NOR
HAVE
WE
WORRIED
ABOUT
WHERE
TO
APPLY
A
LIGHTING
MODEL
WE
FOCUS
ON
A
SIMPLE
VERSION
OF
THE
BLINN
PHONG
MODEL
USING
A
SINGLE
POINT
SOURCE
BECAUSE
LIGHT
FROM
MULTIPLE
SOURCES
IS
ADDITIVE
WE
CAN
REPEAT
THE
CALCULATION
FOR
EACH
SOURCE
AND
ADD
UP
THE
INDIVIDUAL
CONTRIBUTIONS
WE
HAVE
THREE
CHOICES
AS
TO
WHERE
WE
DO
THE
CALCULATION
IN
THE
APPLICATION
IN
THE
VERTEX
SHADER
OR
IN
THE
FRAGMENT
SHADER
ALTHOUGH
THE
BASIC
MODEL
CAN
BE
THE
SAME
FOR
EACH
THERE
WILL
MAJOR
DIFFERENCES
BOTH
IN
EFFICIENCY
AND
APPEARANCE
DEPENDING
ON
WHERE
THE
CALCULATION
IS
DONE
APPLYING
THE
LIGHTING
MODEL
IN
THE
APPLICATION
WE
HAVE
USED
TWO
METHODS
TO
ASSIGN
COLORS
TO
FILLED
TRIANGLES
IN
THE
FIRST
WE
SENT
A
SINGLE
COLOR
FOR
EACH
POLYGON
TO
THE
SHADERS
AS
A
UNIFORM
VARIABLE
AND
USED
THIS
COLOR
FOR
EACH
FRAGMENT
IN
THE
SECOND
WE
ASSIGNED
A
COLOR
TO
EACH
VERTEX
AS
A
VERTEX
ATTRIBUTE
THE
RASTERIZER
THEN
INTERPOLATED
THESE
VERTEX
COLORS
ACROSS
THE
POLYGON
BOTH
THESE
APPROACHES
CAN
BE
APPLIED
TO
LIGHTING
IN
CONSTANT
OR
FLAT
SHADING
WE
APPLY
A
LIGHTING
MODEL
ONCE
FOR
EACH
POLYGON
AND
USE
THE
COMPUTED
COLOR
FOR
THE
ENTIRE
POLYGON
IN
THE
INTERPOLATIVE
SHADING
WE
APPLY
THE
MODEL
AT
EACH
VERTEX
TO
COMPUTE
A
VERTEX
COLOR
ATTRIBUTE
THE
VERTEX
SHADER
CAN
THEN
OUTPUT
THESE
COLORS
AND
THE
RASTERIZER
WILL
INTERPOLATE
THEM
TO
DETERMINE
A
COLOR
FOR
EACH
FRAGMENT
LET
DO
A
SIMPLE
EXAMPLE
WITH
AMBIENT
DIFFUSE
AND
SPECULAR
LIGHTING
ASSUME
THAT
THE
FOLLOWING
PARAMETERS
HAVE
BEEN
SPECIFIED
FOR
A
SINGLE
POINT
LIGHT
SOURCE
ALSO
ASSUME
THAT
THERE
IS
A
SINGLE
MATERIAL
WHOSE
PARAMETERS
ARE
THE
COLOR
WE
NEED
TO
COMPUTE
IS
THE
SUM
OF
THE
AMBIENT
DIFFUSE
AND
SPECULAR
CONTRIBUTIONS
AMBIENT
DIFFUSE
SPECULAR
AMBIENT
DIFFUSE
SPECULAR
EACH
COMPONENT
OF
THE
AMBIENT
TERM
IS
THE
PRODUCT
OF
THE
CORRESPONDING
TERMS
FROM
THE
AMBIENT
LIGHT
SOURCE
AND
THE
MATERIAL
REFLECTIVITY
WE
CAN
USE
THE
FUNCTION
PRODUCT
A
B
RETURN
A
B
A
B
A
B
A
B
HENCE
AMBIENT
PRODUCT
WE
NEED
THE
NORMAL
TO
COMPUTE
THE
DIFFUSE
TERM
BECAUSE
WE
ARE
WORKING
WITH
TRIANGLES
WE
HAVE
THE
THREE
VERTICES
AND
THESE
VERTICES
DETERMINE
A
UNIQUE
PLANE
AND
ITS
NORMAL
SUPPOSE
THAT
WE
HAVE
THREE
VERTICES
AND
THE
CROSS
PRODUCT
OF
AND
IS
PERPENDICULAR
TO
THE
PLANE
DETERMINED
BY
THE
THREE
VERTICES
THUS
WE
GET
THE
DESIRED
UNIT
NORMAL
AS
FOLLOWS
N
NORMALIZE
CROSS
NOTE
THAT
THE
DIRECTION
OF
THE
NORMAL
DEPENDS
ON
THE
ORDER
OF
THE
VERTICES
AND
ASSUMES
WE
ARE
USING
THE
RIGHT
HAND
RULE
TO
DETERMINE
AN
OUTWARD
FACE
NEXT
WE
NEED
TO
TAKE
THE
DOT
PRODUCT
OF
THE
UNIT
NORMAL
WITH
THE
VECTOR
IN
THE
DIRECTION
OF
THE
LIGHT
SOURCE
THERE
ARE
FOUR
CASES
WE
MUST
CONSIDER
CONSTANT
SHADING
WITH
A
DISTANT
SOURCE
INTERPOLATIVE
SHADING
WITH
A
DISTANT
SOURCE
CONSTANT
SHADING
WITH
A
FINITE
SOURCE
INTERPOLATIVE
SHADING
WITH
A
FINITE
SOURCE
FOR
CONSTANT
SHADING
WE
ONLY
NEED
TO
COMPUTE
A
SINGLE
DIFFUSE
COLOR
FOR
EACH
TRIANGLE
FOR
A
DISTANT
SOURCE
WE
HAVE
THE
DIRECTION
OF
THE
SOURCE
THAT
IS
THE
SAME
FOR
ALL
POINTS
ON
THE
TRIANGLE
HENCE
WE
CAN
SIMPLY
TAKE
THE
DOT
PRODUCT
OF
THE
UNIT
NORMAL
WITH
A
NORMALIZED
SOURCE
DIRECTION
THE
DIFFUSE
CONTRIBUTION
IS
THEN
DIFFUSE
PRODUCT
DOT
N
NORMALIZE
THERE
IS
ONE
ADDITIONAL
STEP
WE
SHOULD
TAKE
THE
DIFFUSE
TERM
ONLY
MAKES
SENSE
IF
THE
DOT
PRODUCT
IS
NONNEGATIVE
SO
WE
MUST
MODIFY
THE
CALCULATION
TO
DIFFUSE
FLOAT
D
DOT
N
NORMALIZE
IF
D
DIFFUSE
PRODUCT
D
ELSE
DIFFUSE
FOR
A
DISTANT
LIGHT
SOURCE
THE
DIFFUSE
CONTRIBUTION
AT
EACH
VERTEX
IS
IDENTICAL
SO
WE
NEED
DO
ONLY
ONE
DIFFUSE
CALCULATION
PER
POLYGON
AND
THUS
INTERPOLATIVE
AND
CONSTANT
DIFFUSE
SHADING
ARE
THE
SAME
FOR
A
FINITE
OR
NEAR
SOURCE
WE
HAVE
TWO
CHOICES
WE
EITHER
COMPUTE
A
SINGLE
DIFFUSE
CONTRIBUTION
FOR
THE
ENTIRE
POLYGON
AND
USE
CONSTANT
SHADING
OR
WE
COMPUTE
THE
DIFFUSE
TERM
AT
EACH
VERTEX
AND
USE
INTERPOLATIVE
SHADING
BECAUSE
WE
ARE
WORKING
WITH
TRIANGLES
THE
NORMAL
IS
THE
SAME
AT
EACH
VERTEX
BUT
WITH
A
NEAR
SOURCE
THE
VECTOR
FROM
ANY
POINT
ON
THE
POLYGON
TO
THE
LIGHT
SOURCE
WILL
BE
DIFFERENT
IF
WE
USE
A
SINGLE
COLOR
WE
CAN
USE
THE
POINT
AT
THE
CENTER
OF
THE
TRIANGLE
TO
COMPUTE
THE
DIRECTION
V
V
FLOAT
D
DOT
N
NORMALIZE
IF
D
DIFFUSE
PRODUCT
D
ELSE
DIFFUSE
THE
CALCULATION
FOR
THE
SPECULAR
TERM
APPEARS
TO
BE
SIMILAR
TO
THE
CALCULATION
FOR
THE
DIFFUSE
BUT
THERE
IS
ONE
TRICKY
ISSUE
WE
NEED
TO
COMPUTE
THE
HALFWAY
VECTOR
FOR
A
DISTANCE
SOURCE
THE
LIGHT
POSITION
BECOMES
A
DIRECTION
SO
HALF
NORMALIZE
THE
VIEW
DIRECTION
IS
A
VECTOR
FROM
A
POINT
ON
THE
SURFACE
TO
THE
EYE
THE
DEFAULT
IS
THAT
THE
CAMERA
IS
AT
THE
ORIGIN
IN
OBJECT
SPACE
SO
FOR
A
VERTEX
V
THE
VECTOR
IS
ORIGIN
V
ORIGIN
THUS
EVEN
THOUGH
EACH
TRIANGLE
HAS
A
SINGLE
NORMAL
THERE
IS
A
DIFFERENT
HALFWAY
VECTOR
FOR
EACH
VERTEX
AND
CONSEQUENTLY
THE
SPECULAR
TERM
WILL
VARY
ACROSS
THE
SURFACE
AS
THE
RASTERIZER
INTERPOLATES
THE
VERTEX
SHADES
THE
SPECULAR
TERM
FOR
VERTEX
V
CAN
BE
COMPUTED
AS
SPECULAR
FLOAT
DOT
HALF
N
IF
SPECULAR
POW
PRODUCT
ELSE
SPECULAR
WHERE
THE
EXPRESSION
EXP
LOG
EVALUATES
TO
THE
POWER
EFFICIENCY
FOR
A
STATIC
SCENE
THE
LIGHTING
COMPUTATION
IS
DONE
ONCE
SO
WE
CAN
SEND
THE
VERTEX
POSITIONS
AND
VERTEX
COLORS
TO
THE
GPU
ONCE
CONSIDER
WHAT
HAPPENS
IF
WE
ADD
LIGHTING
TO
OUR
ROTATING
CUBE
PROGRAM
EACH
TIME
THE
CUBE
ROTATES
ABOUT
A
COORDINATE
AXIS
THE
NORMAL
TO
FOUR
OF
THE
FACES
CHANGES
AS
DOES
THE
POSITION
OF
EACH
OF
THE
SIX
VERTICES
HENCE
WE
MUST
RECOMPUTE
THE
DIFFUSE
AND
SPECULAR
COMPONENTS
AT
EACH
OF
THE
VERTICES
IF
WE
DO
ALL
THE
CALCULATIONS
IN
THE
CPU
BOTH
THE
VERTEX
POSITIONS
AND
COLORS
MUST
THEN
BE
SENT
TO
THE
GPU
FOR
LARGE
DATA
SETS
THIS
PROCESS
IS
EXTREMELY
INEFFICIENT
NOT
ONLY
ARE
WE
DOING
A
LOT
OF
COMPUTATION
ON
THE
CPU
BUT
WE
ARE
ALSO
CAUSING
A
POTENTIAL
BOTTLENECK
BY
SENDING
SO
MUCH
VERTEX
DATA
TO
THE
GPU
CONSEQUENTLY
WE
WILL
ALMOST
ALWAYS
WANT
TO
DO
LIGHTING
CALCULATION
IN
THE
SHADERS
BEFORE
EXAMINING
SHADERS
FOR
LIGHTING
THERE
ARE
A
FEW
OTHER
EFFICIENCY
MEASURES
WE
CAN
EMPLOY
EITHER
IN
THE
APPLICATION
OR
IN
A
SHADER
WE
CAN
OBTAIN
MANY
EFFICIEN
CIES
IF
WE
ASSUME
THAT
EITHER
OR
BOTH
OF
THE
VIEWER
AND
THE
LIGHT
SOURCE
ARE
FAR
FROM
THE
POLYGON
WE
ARE
RENDERING
HENCE
EVEN
IF
THE
SOURCE
IS
A
POINT
SOURCE
WITH
A
FINITE
LO
CATION
IT
MIGHT
BE
FAR
ENOUGH
AWAY
THAT
THE
DISTANCES
FROM
THE
VERTICES
TO
THE
SOURCE
ARE
ALL
ABOUT
THE
SAME
IN
THIS
CASE
THE
DIFFUSE
TERM
AT
EACH
VERTEX
WOULD
BE
IDENTICAL
AND
WE
WOULD
NEED
DO
ONLY
ONE
CALCULATION
PER
POLYGON
NOTE
THAT
A
DEFINITION
OF
FAR
AND
NEAR
IN
THIS
CONTEXT
DEPENDS
BOTH
ON
THE
DISTANCE
TO
THE
LIGHT
SOURCE
AND
THE
SIZE
OF
THE
POLYGON
A
SMALL
POLYGON
WILL
NOT
SHOW
MUCH
VARIATION
IN
THE
DIFFUSE
COMPO
NENT
EVEN
IF
THE
SOURCE
IS
FAIRLY
CLOSE
TO
THE
POLYGON
THE
SAME
ARGUMENT
HOLDS
FOR
THE
SPECULAR
TERM
WHEN
WE
CONSIDER
THE
DISTANCE
BETWEEN
VERTICES
AND
THE
VIEWER
WE
CAN
ADD
PARAMETERS
THAT
ALLOW
THE
APPLICATION
TO
SPECIFY
IF
IT
WANTS
TO
USE
THESE
SIMPLIFIED
CALCULATIONS
IN
CHAPTER
WE
SAW
THAT
A
SURFACE
HAS
BOTH
A
FRONT
FACE
AND
A
BACK
FACE
FOR
POLYGONS
WE
DETERMINE
FRONT
AND
BACK
BY
THE
ORDER
IN
WHICH
THE
VERTICES
ARE
SPEC
IFIED
USING
THE
RIGHT
HAND
RULE
FOR
MOST
OBJECTS
WE
SEE
ONLY
THE
FRONT
FACES
SO
WE
ARE
NOT
CONCERNED
WITH
HOW
OPENGL
SHADES
THE
BACK
FACING
SURFACES
FOR
EXAMPLE
FOR
CONVEX
OBJECTS
SUCH
AS
A
SPHERE
OR
A
PARALLELEPIPED
FIGURE
THE
VIEWER
CAN
NEVER
SEE
A
BACK
FACE
REGARDLESS
OF
WHERE
SHE
IS
POSITIONED
HOWEVER
IF
WE
REMOVE
A
SIDE
FROM
A
CUBE
OR
SLICE
THE
SPHERE
AS
SHOWN
IN
FIGURE
A
PROPERLY
PLACED
VIEWER
MAY
SEE
A
BACK
FACE
THUS
WE
MUST
SHADE
BOTH
THE
FRONT
AND
BACK
FACES
CORRECTLY
IN
MANY
SITUATIONS
WE
CAN
IGNORE
ALL
BACK
FACES
BY
EITHER
CULLING
THEM
OUT
IN
THE
APPLI
CATION
OR
BY
NOT
RENDERING
ANY
FACE
WHOSE
NORMAL
DOES
NOT
POINT
TOWARD
THE
VIEWER
IF
WE
RENDER
BACK
FACES
THEY
MAY
HAVE
DIFFERENT
MATERIAL
PROPERTIES
THAN
THE
FRONT
FACES
SO
WE
MUST
SPECIFY
A
SET
OF
BACK
FACE
PROPERTIES
FIGURE
SHADING
OF
CON
VEX
OBJECTS
FIGURE
VISIBLE
BACK
SURFACES
LIGHT
SOURCES
ARE
SPECIAL
TYPES
OF
GEOMETRIC
OBJECTS
AND
HAVE
GEOMETRIC
AT
TRIBUTES
SUCH
AS
POSITION
JUST
LIKE
POLYGONS
AND
POINTS
HENCE
LIGHT
SOURCES
CAN
BE
AFFECTED
BY
TRANSFORMATIONS
WE
CAN
SPECIFY
THEM
AT
THE
DESIRED
POSITION
OR
SPECIFY
THEM
IN
A
CONVENIENT
POSITION
AND
MOVE
THEM
TO
THE
DESIRED
POSITION
BY
THE
MODEL
VIEW
TRANSFORMATION
THE
BASIC
RULE
GOVERNING
OBJECT
PLACEMENT
IS
THAT
VERTICES
ARE
CONVERTED
TO
EYE
COORDINATES
BY
THE
MODEL
VIEW
TRANSFORMATION
IN
EFFECT
AT
THE
TIME
THE
VERTICES
ARE
DEFINED
THUS
BY
CAREFUL
PLACEMENT
OF
THE
LIGHT
SOURCE
SPECIFICATIONS
RELATIVE
TO
THE
DEFINITION
OF
OTHER
GEOMETRIC
OBJECTS
WE
CAN
CREATE
LIGHT
SOURCES
THAT
REMAIN
STATIONARY
WHILE
THE
OBJECTS
MOVE
LIGHT
SOURCES
THAT
MOVE
WHILE
OBJECTS
RE
MAIN
STATIONARY
AND
LIGHT
SOURCES
THAT
MOVE
WITH
THE
OBJECTS
WE
ALSO
HAVE
CHOICES
AS
TO
WHICH
COORDINATE
SYSTEM
TO
USE
FOR
LIGHTING
COMPUTA
TIONS
FOR
NOW
WE
WILL
DO
OUR
LIGHTING
CALCULATIONS
IN
OBJECT
COORDINATES
DEPENDING
ON
WHETHER
OR
NOT
THE
LIGHT
SOURCE
OR
OBJECTS
ARE
MOVING
IT
MAY
BE
MORE
EFFICIENT
TO
USE
EYE
COORDINATES
LATER
WHEN
WE
ADD
TEXTURE
MAPPING
TO
OUR
SKILLS
WE
WILL
INTRO
DUCE
LIGHTING
METHODS
THAT
WILL
USE
LOCAL
COORDINATE
SYSTEMS
LIGHTING
IN
THE
VERTEX
SHADER
WHEN
WE
PRESENTED
TRANSFORMATIONS
WE
SAW
THAT
A
TRANSFORMATION
SUCH
AS
THE
MODEL
VIEW
TRANSFORMATION
COULD
BE
CARRIED
OUT
EITHER
IN
THE
APPLICATION
OR
THE
VERTEX
SHADER
BUT
FOR
MOST
APPLICATIONS
IT
WAS
FAR
MORE
EFFICIENT
TO
IMPLEMENT
THE
TRANSFORMATION
IN
THE
SHADER
THE
SAME
IS
TRUE
FOR
LIGHTING
TO
IMPLEMENT
LIGHTING
IN
THE
VERTEX
SHADER
WE
MUST
CARRY
OUT
THREE
STEPS
FIRST
WE
MUST
CHOOSE
A
LIGHTING
MODEL
DO
WE
USE
THE
BLINN
PHONG
OR
SOME
OTHER
MODEL
DO
WE
INCLUDE
DISTANCE
ATTENUATION
DO
WE
WANT
TWO
SIDED
LIGHTING
ONCE
WE
MAKE
THESE
DECISIONS
WE
CAN
WRITE
A
VERTEX
SHADER
TO
IMPLEMENT
THE
MODEL
FINALLY
WE
HAVE
TO
TRANSFER
THE
NECESSARY
DATA
TO
THE
SHADER
SOME
DATA
CAN
BE
TRANS
FERRED
USING
UNIFORM
VARIABLES
AND
OTHER
DATA
CAN
BE
TRANSFERRED
AS
VERTEX
ATTRIBUTES
LET
GO
THROUGH
THE
PROCESS
FOR
THE
MODEL
WE
JUST
DEVELOPED
THE
BLINN
PHONG
MODEL
WITHOUT
DISTANCE
ATTENUATION
WITH
A
SINGLE
POINT
LIGHT
SOURCE
WE
CAN
TRANSFER
THE
AMBIENT
DIFFUSE
AND
SPECULAR
COMPONENTS
OF
THE
SOURCE
PLUS
ITS
POSITION
AS
UNIFORM
VARIABLES
WE
CAN
DO
LIKEWISE
FOR
THE
MATERIAL
PROPERTIES
RATHER
THAN
WRITING
THE
APPLICATION
CODE
FIRST
BECAUSE
WE
KNOW
HOW
TO
TRANSFER
INFORMATION
TO
A
SHADER
FIRST
WE
WILL
WRITE
THE
VERTEX
SHADER
THE
VERTEX
SHADER
MUST
OUTPUT
A
VERTEX
POSITION
IN
CLIP
COORDINATES
AND
A
VERTEX
COLOR
TO
THE
RASTERIZER
IF
WE
SEND
A
MODEL
VIEW
MATRIX
AND
A
PROJECTION
MATRIX
TO
THE
SHADER
THEN
THE
COMPUTATION
OF
THE
VERTEX
POSITION
IS
IDENTICAL
TO
OUR
EXAMPLES
FROM
CHAPTERS
AND
HENCE
THIS
PART
OF
THE
CODE
WILL
LOOK
SOMETHING
LIKE
IN
VPOSITION
UNIFORM
MODELVIEW
UNIFORM
PROJECTION
VOID
MAIN
PROJECTION
MODELVIEW
VPOSITION
THE
OUTPUT
COLOR
IS
THE
SUM
OF
THE
AMBIENT
DIFFUSE
AND
SPECULAR
CONTRIBUTIONS
OUT
COLOR
AMBIENT
DIFFUSE
SPECULAR
COLOR
AMBIENT
DIFFUSE
SPECULAR
SO
THE
PART
WE
MUST
ADDRESS
IS
COMPUTATION
OF
THESE
THREE
TERMS
RATHER
THAN
SENDING
ALL
THE
REFLECTIVITY
AND
LIGHT
COLORS
SEPARATELY
TO
THE
SHADER
WE
SEND
ONLY
THE
PRODUCT
TERM
FOR
EACH
CONTRIBUTION
THUS
IN
THE
AMBIENT
COMPUTA
TION
WE
USE
THE
PRODUCTS
OF
THE
RED
GREEN
AND
BLUE
AMBIENT
LIGHT
WITH
THE
RED
GREEN
AND
BLUE
AMBIENT
REFLECTIVITIES
WE
CAN
COMPUTE
THESE
PRODUCTS
AND
SEND
THEM
TO
THE
SHADER
AS
THE
UNIFORM
VECTOR
IN
AMBIENTPRODUCT
WE
CAN
DO
THE
SAME
FOR
THE
DIFFUSE
AND
SPECULAR
PRODUCTS
UNIFORM
DIFFUSEPRODUCT
SPECULARPRODUCT
THE
AMBIENT
TERM
IS
THEN
SIMPLY
AMBIENT
AMBIENTPRODUCT
THE
DIFFUSE
TERM
REQUIRES
A
NORMAL
FOR
EACH
VERTEX
BECAUSE
TRIANGLES
ARE
FLAT
THE
NORMAL
IS
THE
SAME
FOR
EACH
VERTEX
IN
A
TRIANGLE
SO
WE
CAN
SEND
THE
NORMAL
TO
THE
SHADER
AS
A
UNIFORM
VARIABLE
WE
CAN
USE
THE
NORMALIZE
FUNCTION
TO
GET
A
UNIT
LENGTH
NORMAL
FROM
THE
TYPE
WE
USED
IN
THE
APPLICATION
UNIFORM
NORMAL
N
NORMALIZE
NORMAL
XYZ
THE
UNIT
VECTOR
IN
THE
DIRECTION
OF
THE
LIGHT
SOURCE
IS
GIVEN
BY
L
NORMALIZE
LIGHTPOSITION
VPOSITION
XYZ
THE
DIFFUSE
TERM
IS
THEN
DIFFUSE
MAX
DOT
L
N
DIFFUSEPRODUCT
THE
SPECULAR
TERM
IS
COMPUTED
IN
A
SIMILAR
MANNER
BECAUSE
THE
VIEWER
IS
AT
THE
ORIGIN
IN
OBJECT
COORDINATES
THE
NORMALIZED
VECTOR
IN
THE
DIRECTION
OF
THE
VIEWER
IS
IN
SECTION
WE
WILL
CONSIDER
METHODS
THAT
ASSIGN
A
DIFFERENT
NORMAL
TO
EACH
VERTEX
OF
A
POLYGON
E
NORMALIZE
VPOSITION
XYZ
AND
THE
HALFWAY
VECTOR
IS
H
NORMALIZE
L
E
THE
SPECULAR
TERM
IS
THEN
SPECULAR
POW
MAX
DOT
N
H
SHININESS
SPECULARPRODUCT
HOWEVER
IF
THE
LIGHT
SOURCE
IS
BEHIND
THE
SURFACE
THERE
CANNOT
BE
A
SPECULAR
TERM
SO
WE
ADD
A
SIMPLE
TEST
SPECULAR
MAX
POW
MAX
DOT
N
H
SHININESS
SPECULARPRODUCT
HERE
IS
THE
FULL
SHADER
IN
VPOSITION
IN
NORMAL
OUT
COLOR
UNIFORM
AMBIENTPRODUCT
DIFFUSEPRODUCT
SPECULARPRODUCT
UNIFORM
MODELVIEW
UNIFORM
PROJECTION
UNIFORM
LIGHTPOSITION
UNIFORM
FLOAT
SHININESS
VOID
MAIN
AMBIENT
DIFFUSE
SPECULAR
PROJECTION
MODELVIEW
VPOSITION
N
NORMALIZE
NORMAL
XYZ
L
NORMALIZE
LIGHTPOSITION
XYZ
MODELVIEW
VPOSITION
XYZ
E
NORMALIZE
MODELVIEW
VPOSITION
XYZ
H
NORMALIZE
L
E
FLOAT
KD
MAX
DOT
L
N
FLOAT
KS
POW
MAX
DOT
N
H
SHININESS
AMBIENT
AMBIENTPRODUCT
DIFFUSE
KD
DIFFUSEPRODUCT
SPECULAR
MAX
POW
MAX
DOT
N
H
SHININESS
SPECULARPRODUCT
COLOR
AMBIENT
DIFFUSE
SPECULAR
XYZ
BECAUSE
THE
COLORS
ARE
SET
IN
THE
VERTEX
SHADER
THE
SIMPLE
FRAGMENT
SHADER
THAT
WE
HAVE
USED
PREVIOUSLY
IN
COLOR
VOID
MAIN
COLOR
WILL
TAKE
THE
INTERPOLATED
COLORS
FROM
THE
RASTERIZER
AND
ASSIGN
THEM
TO
FRAGMENTS
LET
RETURN
TO
THE
CUBE
SHADING
EXAMPLE
THE
MAIN
CHANGE
WE
HAVE
TO
MAKE
IS
TO
SET
UP
UNIFORM
VARIABLES
FOR
THE
LIGHT
AND
MATERIAL
PARAMETERS
THUS
FOR
THE
AMBIENT
COMPONENT
WE
MIGHT
HAVE
AN
AMBIENT
LIGHT
TERM
AND
AN
AMBIENT
REFLECTIVITY
GIVEN
AS
WE
COMPUTE
THE
AMBIENT
PRODUCT
PRODUCT
WE
GET
THESE
VALUES
TO
THE
SHADER
AS
FOLLOWS
GLUINT
GLGETUNIFORMLOCATION
PROGRAM
AMBIENTPRODUCT
WE
CAN
DO
THE
SAME
FOR
THE
REST
OF
THE
UNIFORM
VARIABLES
IN
THE
VERTEX
SHADER
NOTE
THAT
THE
NORMAL
VECTOR
DEPENDS
ON
MORE
THAN
ONE
VERTEX
AND
SO
CANNOT
BE
COMPUTED
IN
THE
SHADER
BECAUSE
THE
SHADER
HAS
THE
POSITION
INFORMATION
ONLY
FOR
THE
VERTEX
THAT
INITIATED
ITS
EXECUTION
THERE
IS
AN
ADDITIONAL
ISSUE
THAT
HAS
TO
DO
WITH
THE
FACT
THAT
THE
CUBE
IS
ROTATING
AS
THE
CUBE
ROTATES
THE
POSITIONS
OF
ALL
THE
VERTICES
AND
ALL
THE
NORMALS
TO
THE
SURFACE
CHANGE
WHEN
WE
FIRST
DEVELOPED
THE
PROGRAM
WE
APPLIED
THE
ROTATION
TRANSFORMA
TION
IN
THE
APPLICATION
AND
EACH
TIME
THAT
THE
ROTATION
MATRIX
WAS
UPDATED
WE
RESENT
THE
VERTICES
TO
THE
GPU
LATER
WE
ARGUED
THAT
IT
WAS
FAR
MORE
EFFICIENT
TO
SEND
THE
ROTATION
MATRIX
TO
THE
SHADER
AND
LET
THE
TRANSFORMATION
BE
CARRIED
OUT
IN
THE
GPU
THE
SAME
IS
TRUE
WITH
THIS
EXAMPLE
WE
CAN
SEND
A
PROJECTION
MATRIX
AND
A
MODEL
VIEW
MATRIX
AS
UNIFORM
VARIABLES
THIS
EXAMPLE
HAS
ONLY
ONE
OBJECT
THE
CUBE
AND
THUS
THE
ROTATION
MATRIX
AND
THE
MODEL
VIEW
MATRIX
ARE
IDENTICAL
IF
WE
WANT
TO
APPLY
THE
ROTATION
TO
THE
NORMAL
VECTOR
IN
THE
GPU
THEN
WE
NEED
TO
MAKE
THE
FOLLOWING
CHANGE
TO
THE
SHADER
NN
MODELVIEW
NORMAL
N
NORMALIZE
NN
XYZ
THE
COMPLETE
PROGRAM
IS
IN
APPENDIX
A
HOWEVER
IF
THERE
ARE
MULTIPLE
OBJECTS
IN
THE
SCENE
OR
THE
VIEWING
PARAMETERS
CHANGE
WE
HAVE
TO
BE
A
LITTLE
CAREFUL
WITH
THIS
CONSTRUCT
SUPPOSE
THAT
THERE
IS
A
SEC
OND
NONROTATING
CUBE
IN
THE
SCENE
AND
WE
ALSO
USE
NONDEFAULT
VIEWING
PARAMETERS
NOW
WE
HAVE
TWO
DIFFERENT
MODEL
VIEW
MATRICES
ONE
FOR
EACH
CUBE
ONE
IS
CONSTANT
AND
THE
OTHER
IS
CHANGING
AS
ONE
OF
THE
CUBES
ROTATES
WHAT
IS
REALLY
CHANGING
IS
THE
MODELING
PART
OF
THE
MODEL
VIEW
MATRIX
AND
NOT
THE
VIEWING
PART
THAT
POSITIONS
THE
CAMERA
WE
CAN
HANDLE
THIS
COMPLICATION
IN
A
NUMBER
OF
WAYS
WE
COULD
COMPUTE
THE
TWO
MODEL
VIEW
MATRICES
IN
THE
APPLICATION
AND
SEND
THEM
TO
THE
VERTEX
SHADER
EACH
TIME
THERE
IS
A
ROTATION
WE
COULD
ALSO
USE
SEPARATE
MODELING
AND
VIEWING
TRANS
FORMATIONS
AND
SEND
ONLY
THE
MODELING
MATRIX
THE
ROTATION
MATRIX
TO
THE
SHADER
AFTER
INITIALIZATION
WE
WOULD
THEN
FORM
THE
MODEL
VIEW
MATRIX
IN
THE
SHADER
WE
COULD
ALSO
JUST
SEND
THE
ROTATION
ANGLES
TO
THE
SHADER
AND
DO
ALL
THE
WORK
THERE
IF
THE
LIGHT
SOURCE
IS
ALSO
CHANGING
ITS
POSITION
WE
HAVE
EVEN
MORE
OPTIONS
FIGURE
SHADED
SPHERE
MODEL
SHADING
OF
THE
SPHERE
MODEL
THE
ROTATING
CUBE
IS
A
SIMPLE
EXAMPLE
TO
DEMONSTRATE
LIGHTING
BUT
BECAUSE
THERE
ARE
ONLY
SIX
FACES
AND
THEY
MEET
AT
RIGHT
ANGLES
IT
IS
NOT
A
GOOD
EXAMPLE
FOR
TESTING
THE
SMOOTHNESS
OF
A
LIGHTING
MODEL
CONSIDER
INSTEAD
THE
SPHERE
MODEL
THAT
WE
DEVELOPED
IN
SECTION
ALTHOUGH
THE
MODEL
COMPRISES
MANY
SMALL
TRIANGLES
UNLIKE
THE
CUBE
WE
DO
NOT
WANT
TO
SEE
THE
EDGES
RATHER
WE
WANT
TO
SHADE
THE
POLYGONS
SO
THAT
WE
CANNOT
SEE
THE
EDGES
WHERE
TRIANGLES
MEET
AND
THE
SMOOTHER
THE
SHADING
THE
FEWER
POLYGONS
WE
NEED
TO
MODEL
THE
SPHERE
TO
SHADE
THE
SPHERE
MODEL
WE
CAN
START
WITH
THE
SAME
SHADERS
WE
USED
FOR
THE
ROTATING
CUBE
THE
DIFFERENCES
ARE
IN
THE
APPLICATION
PROGRAM
WE
REPLACE
THE
GENERATION
OF
THE
CUBE
WITH
THE
TETRAHEDRON
SUBDIVISION
FROM
SECTION
ADDING
THE
COMPUTATION
OF
THE
NORMALS
WHICH
ARE
SENT
TO
THE
VERTEX
SHADER
AS
ATTRIBUTE
QUALIFIED
VARIABLES
THE
RESULT
IS
SHOWN
IN
FIGURE
NOTE
THAT
EVEN
AS
WE
INCREASE
THE
NUMBER
OF
SUBDIVISIONS
SO
THAT
THE
INTERIORS
OF
THE
SPHERES
APPEAR
SMOOTH
WE
CAN
STILL
SEE
EDGES
OF
POLYGONS
AROUND
THE
OUTSIDE
OF
THE
SPHERE
IMAGE
THIS
TYPE
OF
OUTLINE
IS
CALLED
A
SILHOUETTE
EDGE
THE
DIFFERENCES
IN
THIS
EXAMPLE
BETWEEN
CONSTANT
SHADING
AND
SMOOTH
SHADING
ARE
MINOR
BECAUSE
EACH
TRIANGLE
IS
FLAT
THE
NORMAL
IS
THE
SAME
AT
EACH
VERTEX
IF
THE
SOURCE
IS
FAR
FROM
THE
OBJECT
THE
DIFFUSE
COMPONENT
WILL
BE
CONSTANT
FOR
EACH
TRIANGLE
LIKEWISE
IF
THE
CAMERA
IS
FAR
FROM
THE
VIEWER
THE
SPECULAR
TERM
WILL
BE
CONSTANT
FOR
EACH
TRIANGLE
HOWEVER
BECAUSE
TWO
ADJACENT
TRIANGLES
WILL
HAVE
DIFFERENT
NORMALS
AND
THUS
ARE
SHADED
WITH
DIFFERENT
COLORS
WE
STILL
CAN
SEE
THE
LACK
OF
SMOOTHNESS
EVEN
IF
WE
CREATE
MANY
TRIANGLES
ONE
WAY
TO
GET
AN
IDEA
OF
HOW
SMOOTH
A
DISPLAY
WE
CAN
GET
WITH
RELATIVELY
FEW
TRIANGLES
IS
TO
USE
THE
ACTUAL
NORMALS
OF
THE
SPHERE
FOR
EACH
VERTEX
IN
THE
APPROXIMA
TION
IN
SECTION
WE
FOUND
THAT
FOR
THE
SPHERE
CENTERED
AT
THE
ORIGIN
THE
NORMAL
AT
A
POINT
P
IS
SIMPLY
P
HENCE
IN
THE
TRIANGLE
FUNCTION
THE
POSITION
OF
A
VERTEX
GIVES
THE
NORMAL
VOID
TRIANGLE
A
B
C
NORMALS
K
A
DATA
K
A
K
NORMALS
K
B
DATA
K
B
K
NORMALS
K
C
DATA
K
C
K
THE
RESULTS
OF
THIS
DEFINITION
OF
THE
NORMALS
ARE
SHOWN
IN
FIGURE
AND
COLOR
PLATE
ALTHOUGH
USING
THE
TRUE
NORMALS
PRODUCES
A
RENDERING
MORE
REALISTIC
THAN
FLAT
SHADING
THE
EXAMPLE
IS
NOT
A
GENERAL
ONE
BECAUSE
WE
HAVE
USED
NORMALS
THAT
ARE
KNOWN
ANALYTICALLY
WE
ALSO
HAVE
NOT
PROVIDED
A
TRUE
GOURAUD
SHADED
IMAGE
SUP
POSE
WE
WANT
A
GOURAUD
SHADED
IMAGE
OF
OUR
APPROXIMATE
SPHERE
AT
EACH
VERTEX
WE
NEED
TO
KNOW
THE
NORMALS
OF
ALL
POLYGONS
INCIDENT
AT
THE
VERTEX
OUR
CODE
DOES
NOT
HAVE
A
DATA
STRUCTURE
THAT
CONTAINS
THE
REQUIRED
INFORMATION
TRY
EXERCISES
AND
IN
WHICH
YOU
CONSTRUCT
SUCH
A
STRUCTURE
NOTE
THAT
SIX
POLYGONS
MEET
AT
A
VERTEX
CREATED
BY
SUBDIVISION
WHEREAS
ONLY
THREE
POLYGONS
MEET
AT
THE
ORIGINAL
VERTICES
OF
THE
TETRAHEDRON
FIGURE
SHADING
OF
THE
SPHERE
WITH
THE
TRUE
NORMALS
PER
FRAGMENT
LIGHTING
THERE
IS
ANOTHER
OPTION
WE
CAN
USE
TO
OBTAIN
A
SMOOTHER
SHADING
WE
CAN
DO
THE
LIGHT
ING
CALCULATION
ON
A
PER
FRAGMENT
BASIS
RATHER
THAN
ON
A
PER
VERTEX
BASIS
WHEN
WE
DID
ALL
OUR
LIGHTING
CALCULATIONS
IN
THE
VERTEX
SHADER
VISUALLY
THERE
WAS
NO
ADVANTAGE
OVER
DOING
THE
SAME
COMPUTATION
IN
THE
APPLICATION
AND
THEN
SENDING
THE
COMPUTED
VERTEX
COLORS
TO
THE
VERTEX
SHADER
WHICH
WOULD
THEN
PASS
THEM
ON
TO
THE
RASTERIZER
THUS
WHETHER
WE
DID
LIGHTING
IN
THE
VERTEX
SHADER
OR
IN
THE
APPLICATION
THE
RASTERIZER
INTERPOLATED
THE
SAME
VERTEX
COLORS
TO
OBTAIN
FRAGMENT
COLORS
WITH
A
FRAGMENT
SHADER
WE
CAN
DO
AN
INDEPENDENT
LIGHTING
CALCULATION
FOR
EACH
FRAGMENT
THE
FRAGMENT
SHADER
NEEDS
TO
GET
THE
INTERPOLATED
VALUES
OF
THE
NORMAL
VECTOR
LIGHT
SOURCE
POSITION
AND
EYE
POSITION
FROM
THE
RASTERIZER
THE
VERTEX
SHADER
CAN
COMPUTE
THESE
VALUES
AND
OUTPUT
THEM
TO
THE
RASTERIZER
IN
ADDITION
THE
VERTEX
SHADER
MUST
OUTPUT
THE
VERTEX
POSITION
IN
CLIP
COORDINATES
HERE
IS
THE
VERTEX
SHADER
IN
VPOSITION
IN
NORMAL
UNIFORM
MODELVIEW
UNIFORM
LIGHTPOSITION
UNIFORM
PROJECTION
OUT
N
OUT
L
OUT
E
VOID
MAIN
PROJECTION
MODELVIEW
VPOSITION
N
NORMAL
XYZ
L
LIGHTPOSITION
XYZ
VPOSITION
XYZ
IF
LIGHTPOSITION
W
L
LIGHTPOSITION
XYZ
E
VPOSITION
XYZ
THE
FRAGMENT
SHADER
CAN
NOW
APPLY
THE
BLINN
PHONG
LIGHTING
MODEL
TO
EACH
FRAGMENT
USING
THE
LIGHT
AND
MATERIAL
PARAMETERS
PASSED
IN
FROM
THE
APPLICATION
AS
UNIFORM
VARIABLES
AND
THE
INTERPOLATED
VECTORS
FROM
THE
RASTERIZER
THE
FOLLOWING
SHADER
COR
RESPONDS
TO
THE
VERTEX
SHADER
WE
USED
IN
THE
PREVIOUS
EXAMPLE
UNIFORM
AMBIENTPRODUCT
DIFFUSEPRODUCT
SPECULARPRODUCT
UNIFORM
MODELVIEW
UNIFORM
LIGHTPOSITION
UNIFORM
FLOAT
SHININESS
IN
N
IN
L
IN
E
VOID
MAIN
NN
NORMALIZE
N
EE
NORMALIZE
E
LL
NORMALIZE
L
AMBIENT
DIFFUSE
SPECULAR
H
NORMALIZE
LL
EE
FLOAT
KD
MAX
DOT
LL
NN
KD
DOT
LL
NN
FLOAT
KS
POW
MAX
DOT
NN
H
SHININESS
AMBIENT
AMBIENTPRODUCT
DIFFUSE
KD
DIFFUSEPRODUCT
IF
DOT
LL
NN
SPECULAR
ELSE
SPECULAR
KS
SPECULARPRODUCT
AMBIENT
DIFFUSE
SPECULAR
XYZ
NOTE
THAT
WE
NORMALIZE
VECTORS
IN
THE
FRAGMENT
SHADER
RATHER
THAN
IN
THE
VERTEX
SHADERS
IF
WE
WERE
TO
NORMALIZE
A
VARIABLE
SUCH
AS
THE
NORMALS
IN
THE
VERTEX
SHADER
IT
WOULD
NOT
GUARANTEE
THAT
THE
INTERPOLATED
NORMALS
PRODUCED
BY
THE
RASTERIZER
WOULD
HAVE
THE
UNIT
MAGNITUDE
NEEDED
FOR
THE
LIGHTING
COMPUTATION
NONPHOTOREALISTIC
SHADING
PROGRAMMABLE
SHADERS
MAKE
IT
POSSIBLE
TO
NOT
ONLY
INCORPORATE
MORE
REALISTIC
LIGHT
ING
MODELS
IN
REAL
TIME
BUT
ALSO
TO
CREATE
INTERESTING
NONPHOTOREALISTIC
EFFECTS
TWO
SUCH
EXAMPLES
ARE
THE
USE
OF
ONLY
A
FEW
COLORS
AND
EMPHASIZING
THE
EDGES
IN
OBJECTS
BOTH
THESE
EFFECTS
ARE
TECHNIQUES
THAT
WE
MIGHT
WANT
TO
USE
TO
OBTAIN
A
CARTOONLIKE
EFFECT
IN
AN
IMAGE
SUPPOSE
THAT
WE
USE
ONLY
TWO
COLORS
IN
A
VERTEX
SHADER
YELLOW
RED
WE
COULD
THEN
SWITCH
BETWEEN
THE
COLORS
BASED
FOR
EXAMPLE
ON
THE
MAGNITUDE
OF
THE
DIFFUSE
COLOR
USING
THE
LIGHT
AND
NORMAL
VECTORS
WE
COULD
ASSIGN
COLORS
AS
IF
DOT
LIGHTV
NORM
ELSE
ALTHOUGH
WE
COULD
HAVE
USED
TWO
COLORS
IN
SIMPLER
WAYS
BY
USING
THE
DIFFUSE
COLOR
TO
DETERMINE
A
THRESHOLD
THE
COLOR
OF
THE
OBJECT
CHANGES
WITH
ITS
SHAPE
AND
THE
POSITION
OF
THE
LIGHT
SOURCE
WE
CAN
ALSO
TRY
TO
DRAW
THE
SILHOUETTE
EDGE
OF
AN
OBJECT
ONE
WAY
TO
IDENTIFY
SUCH
EDGES
IS
TO
LOOK
AT
SIGN
CHANGES
IN
DOT
LIGHTV
NORM
THIS
VALUE
SHOULD
BE
POSITIVE
FOR
ANY
VERTEX
FACING
THE
VIEWER
AND
NEGATIVE
FOR
A
VERTEX
POINTED
AWAY
FROM
THE
VIEWER
THUS
WE
CAN
TEST
FOR
SMALL
VALUES
OF
THIS
VALUE
AND
ASSIGN
A
COLOR
SUCH
AS
BLACK
TO
THE
VERTEX
BLACK
IF
ABS
DOT
VIEWV
NORM
GLFRONTCOLOR
GLOBAL
ILLUMINATION
THERE
ARE
LIMITATIONS
IMPOSED
BY
THE
LOCAL
LIGHTING
MODEL
THAT
WE
HAVE
USED
CON
SIDER
FOR
EXAMPLE
AN
ARRAY
OF
SPHERES
ILLUMINATED
BY
A
DISTANT
SOURCE
AS
SHOWN
IN
FIGURE
A
THE
SPHERES
CLOSE
TO
THE
SOURCE
BLOCK
SOME
OF
THE
LIGHT
FROM
THE
SOURCE
FROM
REACHING
THE
OTHER
SPHERES
HOWEVER
IF
WE
USE
OUR
LOCAL
MODEL
EACH
SPHERE
IS
SHADED
INDEPENDENTLY
ALL
APPEAR
THE
SAME
TO
THE
VIEWER
FIGURE
B
IN
ADDI
TION
IF
THESE
SPHERES
ARE
SPECULAR
SOME
LIGHT
IS
SCATTERED
AMONG
SPHERES
THUS
IF
THE
SPHERES
WERE
VERY
SHINY
WE
SHOULD
SEE
THE
REFLECTION
OF
MULTIPLE
SPHERES
IN
SOME
OF
THE
SPHERES
AND
POSSIBLY
EVEN
THE
MULTIPLE
REFLECTIONS
OF
SOME
SPHERES
IN
THEMSELVES
OUR
LIGHTING
MODEL
CANNOT
HANDLE
THIS
SITUATION
NOR
CAN
IT
PRODUCE
SHADOWS
EXCEPT
BY
USING
THE
TRICKS
FOR
SOME
SPECIAL
CASES
AS
WE
SAW
IN
CHAPTER
ALL
OF
THESE
PHENOMENA
SHADOWS
REFLECTIONS
BLOCKAGE
OF
LIGHT
ARE
GLOBAL
EFFECTS
AND
REQUIRE
A
GLOBAL
LIGHTING
MODEL
ALTHOUGH
SUCH
MODELS
EXIST
AND
CAN
BE
QUITE
ELEGANT
IN
PRACTICE
THEY
ARE
INCOMPATIBLE
WITH
THE
PIPELINE
MODEL
WITH
THE
L
A
L
B
FIGURE
ARRAY
OF
SHADED
SPHERES
A
GLOBAL
LIGHTING
MODEL
B
LOCAL
LIGHTING
MODEL
COP
FIGURE
POLYGON
BLOCKED
FROM
LIGHT
SOURCE
PIPELINE
MODEL
WE
MUST
RENDER
EACH
POLYGON
INDEPENDENTLY
OF
THE
OTHER
POLYGONS
AND
WE
WANT
OUR
IMAGE
TO
BE
THE
SAME
REGARDLESS
OF
THE
ORDER
IN
WHICH
THE
APPLICATION
PRODUCES
THE
POLYGONS
ALTHOUGH
THIS
RESTRICTION
LIMITS
THE
LIGHTING
EFFECTS
THAT
WE
CAN
SIMULATE
WE
CAN
RENDER
SCENES
VERY
RAPIDLY
THERE
ARE
ALTERNATIVE
RENDERING
STRATEGIES
INCLUDING
RAY
TRACING
AND
RADIOSITY
THAT
CAN
HANDLE
GLOBAL
EFFECTS
EACH
IS
BEST
AT
DIFFERENT
LIGHTING
CONDITIONS
RAY
TRAC
ING
STARTS
WITH
THE
SYNTHETIC
CAMERA
MODEL
BUT
DETERMINES
FOR
EACH
PROJECTOR
THAT
STRIKES
A
POLYGON
IF
THAT
POINT
IS
INDEED
ILLUMINATED
BY
ONE
OR
MORE
SOURCES
BEFORE
COMPUTING
THE
LOCAL
SHADING
AT
EACH
POINT
THUS
IN
FIGURE
WE
SEE
THREE
POLY
GONS
AND
A
LIGHT
SOURCE
THE
PROJECTOR
SHOWN
INTERSECTS
ONE
OF
THE
POLYGONS
A
LOCAL
RENDERER
MIGHT
USE
THE
MODIFIED
PHONG
MODEL
TO
COMPUTE
THE
SHADE
AT
THE
POINT
OF
INTERSECTION
THE
RAY
TRACER
WOULD
FIND
THAT
THE
LIGHT
SOURCE
CANNOT
STRIKE
THE
POINT
OF
INTERSECTION
DIRECTLY
BUT
THAT
LIGHT
FROM
THE
SOURCE
IS
REFLECTED
FROM
THE
THIRD
POLYGON
AND
THIS
REFLECTED
LIGHT
ILLUMINATES
THE
POINT
OF
INTERSECTION
IN
CHAPTER
WE
SHALL
SHOW
HOW
TO
FIND
THIS
INFORMATION
AND
MAKE
THE
REQUIRED
CALCULATIONS
A
RADIOSITY
RENDERER
IS
BASED
UPON
ENERGY
CONSIDERATIONS
FROM
A
PHYSICAL
POINT
OF
VIEW
ALL
THE
LIGHT
ENERGY
IN
A
SCENE
IS
CONSERVED
CONSEQUENTLY
THERE
IS
AN
ENERGY
BALANCE
THAT
ACCOUNTS
FOR
ALL
THE
LIGHT
THAT
RADIATES
FROM
SOURCES
AND
IS
REFLECTED
BY
VARIOUS
SURFACES
IN
THE
SCENE
A
RADIOSITY
CALCULATION
THUS
REQUIRES
THE
SOLUTION
OF
A
LARGE
SET
OF
EQUATIONS
INVOLVING
ALL
THE
SURFACES
AS
WE
SHALL
SEE
IN
CHAPTER
A
RAY
TRACER
IS
BEST
SUITED
TO
A
SCENE
CONSISTING
OF
HIGHLY
REFLECTIVE
SURFACES
WHEREAS
A
RADIOSITY
RENDERER
IS
BEST
SUITED
FOR
A
SCENE
IN
WHICH
ALL
THE
SURFACES
ARE
PERFECTLY
DIFFUSE
ALTHOUGH
A
PIPELINE
RENDERER
CANNOT
TAKE
INTO
ACCOUNT
MANY
GLOBAL
PHENOMENA
EXACTLY
THIS
OBSERVATION
DOES
NOT
MEAN
WE
CANNOT
PRODUCE
REALISTIC
IMAGERY
WITH
OPENGL
OR
ANOTHER
API
THAT
IS
BASED
UPON
A
PIPELINE
ARCHITECTURE
WHAT
WE
CAN
DO
IS
USE
OUR
KNOWLEDGE
OF
OPENGL
AND
OF
THE
EFFECTS
THAT
GLOBAL
LIGHTING
PRODUCES
TO
APPROXIMATE
WHAT
A
GLOBAL
RENDERER
WOULD
DO
FOR
EXAMPLE
OUR
USE
OF
PROJECTIVE
SHADOWS
IN
CHAPTER
SHOWS
THAT
WE
CAN
PRODUCE
SIMPLE
SHADOWS
MANY
OF
THE
MOST
EXCITING
ADVANCES
IN
COMPUTER
GRAPHICS
OVER
THE
PAST
FEW
YEARS
HAVE
BEEN
IN
THE
USE
OF
PIPELINE
RENDERERS
FOR
GLOBAL
EFFECTS
WE
WILL
STUDY
MANY
SUCH
TECHNIQUES
IN
THE
NEXT
FEW
CHAPTERS
INCLUDING
MAPPING
METHODS
MULTIPASS
RENDERING
AND
TRANSPARENCY
SUMMARY
AND
NOTES
WE
HAVE
DEVELOPED
A
LIGHTING
MODEL
THAT
FITS
WELL
WITH
OUR
PIPELINE
APPROACH
TO
GRAPHICS
WITH
IT
WE
CAN
CREATE
A
VARIETY
OF
LIGHTING
EFFECTS
AND
WE
CAN
EMPLOY
DIFFERENT
TYPES
OF
LIGHT
SOURCES
ALTHOUGH
WE
CANNOT
CREATE
THE
GLOBAL
EFFECTS
OF
A
RAY
TRACER
A
TYPICAL
GRAPHICS
WORKSTATION
CAN
RENDER
A
POLYGONAL
SCENE
USING
THE
MODIFIED
PHONG
REFLECTION
MODEL
AND
SMOOTH
SHADING
IN
THE
SAME
AMOUNT
OF
TIME
AS
IT
CAN
RENDER
A
SCENE
WITHOUT
SHADING
FROM
THE
PERSPECTIVE
OF
AN
APPLICATION
PROGRAM
ADDING
SHADING
REQUIRES
SETTING
PARAMETERS
THAT
DESCRIBE
THE
LIGHT
SOURCES
AND
MATERIALS
AND
CAN
BE
IMPLEMENTED
WITH
PROGRAMMABLE
SHADERS
IN
SPITE
OF
THE
LIMITATIONS
OF
THE
LOCAL
LIGHTING
MODEL
THAT
WE
HAVE
INTRODUCED
OUR
SIMPLE
RENDERER
PERFORMS
REMARKABLY
WELL
IT
IS
THE
BASIS
OF
THE
REFLECTION
MODEL
SUPPORTED
BY
MOST
APIS
PROGRAMMABLE
SHADERS
HAVE
CHANGED
THE
PICTURE
CONSIDERABLY
NOT
ONLY
CAN
WE
CREATE
NEW
METHODS
OF
SHADING
EACH
VERTEX
WE
CAN
USE
FRAGMENT
SHADERS
TO
DO
THE
LIGHTING
CALCULATION
FOR
EACH
FRAGMENT
THUS
AVOIDING
THE
NEED
TO
INTERPOLATE
COLORS
ACROSS
EACH
POLYGON
METHODS
SUCH
AS
PHONG
SHADING
THAT
WERE
NOT
POSSIBLE
WITHIN
THE
STANDARD
PIPELINE
CAN
NOW
BE
PROGRAMMED
BY
THE
USER
AND
WILL
EXECUTE
IN
ABOUT
THE
SAME
AMOUNT
OF
TIME
AS
THE
MODIFIED
PHONG
SHADER
IT
IS
ALSO
POSSIBLE
TO
CREATE
A
MYRIAD
OF
NEW
SHADING
EFFECTS
THE
RECURSIVE
SUBDIVISION
TECHNIQUE
THAT
WE
USED
TO
GENERATE
AN
APPROXIMATION
TO
A
SPHERE
IS
A
POWERFUL
ONE
THAT
WILL
REAPPEAR
IN
VARIOUS
GUISES
IN
CHAPTER
WHERE
WE
USE
VARIANTS
OF
THIS
TECHNIQUE
TO
RENDER
CURVES
AND
SURFACES
IT
WILL
ALSO
ARISE
WHEN
WE
INTRODUCE
MODELING
TECHNIQUES
THAT
RELY
ON
THE
SELF
SIMILARITY
OF
MANY
NATURAL
OBJECTS
THIS
CHAPTER
CONCLUDES
OUR
DEVELOPMENT
OF
POLYGONAL
BASED
GRAPHICS
YOU
SHOULD
NOW
BE
ABLE
TO
GENERATE
SCENES
WITH
LIGHTING
AND
SHADING
TECHNIQUES
FOR
CREATING
EVEN
MORE
SOPHISTICATED
IMAGES
SUCH
AS
TEXTURE
MAPPING
AND
COMPOSITING
INVOLVE
USING
THE
PIXEL
LEVEL
CAPABILITIES
OF
GRAPHICS
SYSTEMS
TOPICS
THAT
WE
CONSIDER
IN
CHAPTER
NOW
IS
A
GOOD
TIME
FOR
YOU
TO
WRITE
AN
APPLICATION
PROGRAM
EXPERIMENT
WITH
VARIOUS
LIGHTING
AND
SHADING
PARAMETERS
TRY
TO
CREATE
LIGHT
SOURCES
THAT
MOVE
EITHER
INDEPENDENTLY
OR
WITH
THE
OBJECTS
IN
THE
SCENE
YOU
WILL
PROBABLY
FACE
DIFFICULTIES
IN
PRODUCING
SHADED
IMAGES
THAT
DO
NOT
HAVE
SMALL
DEFECTS
SUCH
AS
CRACKS
BETWEEN
POLYGONS
THROUGH
WHICH
LIGHT
CAN
ENTER
MANY
OF
THESE
PROBLEMS
ARE
ARTIFACTS
OF
SMALL
NUMERICAL
ERRORS
IN
RENDERING
CALCULATIONS
THERE
ARE
MANY
TRICKS
OF
THE
TRADE
FOR
MITIGATING
THE
EFFECTS
OF
THESE
ERRORS
SOME
YOU
WILL
DISCOVER
ON
YOUR
OWN
OTHERS
ARE
GIVEN
IN
THE
SUGGESTED
READINGS
FOR
THIS
CHAPTER
WE
TURN
TO
RASTERIZATION
ISSUES
IN
CHAPTER
ALTHOUGH
WE
HAVE
SEEN
SOME
OF
THE
WAYS
IN
WHICH
THE
DIFFERENT
MODULES
IN
THE
RENDERING
PIPELINE
FUNCTION
WE
HAVE
NOT
YET
SEEN
THE
DETAILS
AS
WE
DEVELOP
THESE
DETAILS
YOU
WILL
SEE
HOW
THE
PIECES
FIT
TOGETHER
SUCH
THAT
EACH
SUCCESSIVE
STEP
IN
THE
PIPELINE
REQUIRES
ONLY
A
SMALL
INCREMENT
OF
WORK
SUGGESTED
READINGS
THE
USE
OF
LIGHTING
AND
REFLECTION
IN
COMPUTER
GRAPHICS
HAS
FOLLOWED
TWO
PARALLEL
PATHS
THE
PHYSICAL
AND
THE
COMPUTATIONAL
FROM
THE
PHYSICAL
PERSPECTIVE
KAJIYA
RENDERING
EQUATION
DESCRIBES
THE
OVERALL
ENERGY
BALANCE
IN
AN
ENVIRONMENT
AND
REQUIRES
KNOWLEDGE
OF
THE
REFLECTIVITY
FUNCTION
FOR
EACH
SURFACE
REFLECTION
MOD
ELS
SUCH
AS
THE
TORRANCE
SPARROW
MODEL
AND
COOK
TORRANCE
MODEL
ARE
BASED
ON
MODELING
A
SURFACE
WITH
SMALL
PLANAR
FACETS
SEE
HALL
AND
FOLEY
FOR
DISCUSSIONS
OF
SUCH
MODELS
PHONG
IS
CREDITED
WITH
PUTTING
TOGETHER
A
COMPUTATIONAL
MODEL
THAT
IN
CLUDED
AMBIENT
DIFFUSE
AND
SPECULAR
TERMS
THE
USE
OF
THE
HALFWAY
VECTOR
WAS
FIRST
SUGGESTED
BY
BLINN
THE
BASIC
MODEL
OF
TRANSMITTED
LIGHT
WAS
USED
BY
WHIT
TED
IT
WAS
LATER
MODIFIED
BY
HECKBERT
AND
HANRAHAN
GOURAUD
INTRODUCED
INTERPOLATIVE
SHADING
THE
OPENGL
PROGRAMMING
GUIDE
CONTAINS
MANY
GOOD
HINTS
ON
EFFEC
TIVE
USE
OF
OPENGL
RENDERING
CAPABILITIES
AND
DISCUSSES
THE
FIXED
FUNCTION
LIGHTING
PIPELINE
THAT
USES
FUNCTIONS
THAT
HAVE
BEEN
DEPRECATED
IN
SHADER
BASED
OPENGL
EXERCISES
MOST
GRAPHICS
SYSTEMS
AND
APIS
USE
THE
SIMPLE
LIGHTING
AND
REFLECTION
MODELS
THAT
WE
INTRODUCED
FOR
POLYGON
RENDERING
DESCRIBE
THE
WAYS
IN
WHICH
EACH
OF
THESE
MODELS
IS
INCORRECT
FOR
EACH
DEFECT
GIVE
AN
EXAMPLE
OF
A
SCENE
IN
WHICH
YOU
WOULD
NOTICE
THE
PROBLEM
OFTEN
WHEN
A
LARGE
POLYGON
THAT
WE
EXPECT
TO
HAVE
RELATIVELY
UNIFORM
SHADING
IS
SHADED
BY
OPENGL
IT
IS
RENDERED
BRIGHTLY
IN
ONE
AREA
AND
MORE
DIMLY
IN
OTHERS
EXPLAIN
WHY
THE
IMAGE
IS
UNEVEN
DESCRIBE
HOW
YOU
CAN
AVOID
THIS
PROBLEM
IN
THE
DEVELOPMENT
OF
THE
PHONG
REFLECTION
MODEL
WHY
DO
WE
NOT
CONSIDER
LIGHT
SOURCES
BEING
OBSCURED
FROM
THE
SURFACE
BY
OTHER
SURFACES
IN
OUR
REFLEC
TION
MODEL
HOW
SHOULD
THE
DISTANCE
BETWEEN
THE
VIEWER
AND
THE
SURFACE
ENTER
THE
RENDER
ING
CALCULATIONS
WE
HAVE
POSTULATED
AN
RGB
MODEL
FOR
THE
MATERIAL
PROPERTIES
OF
SURFACES
GIVE
AN
ARGUMENT
FOR
USING
A
SUBTRACTIVE
COLOR
MODEL
INSTEAD
FIND
FOUR
POINTS
EQUIDISTANT
FROM
ONE
ANOTHER
ON
A
UNIT
SPHERE
THESE
POINTS
DETERMINE
A
TETRAHEDRON
HINT
YOU
CAN
ARBITRARILY
LET
ONE
OF
THE
POINTS
BE
AT
AND
LET
THE
OTHER
THREE
BE
IN
THE
PLANE
Y
D
FOR
SOME
POSITIVE
VALUE
OF
D
SHOW
THAT
IF
V
LIES
IN
THE
SAME
PLANE
AS
L
N
AND
R
THEN
THE
HALFWAY
ANGLE
SATISFIES
Φ
WHAT
RELATIONSHIP
IS
THERE
BETWEEN
THE
ANGLES
IF
V
IS
NOT
COPLANAR
WITH
THE
OTHER
VECTORS
CONSIDER
ALL
THE
COMBINATIONS
OF
NEAR
OR
FAR
VIEWERS
NEAR
OR
FAR
LIGHT
SOURCES
FLAT
OR
CURVED
SURFACES
AND
DIFFUSE
AND
SPECULAR
REFLECTIONS
FOR
WHICH
CASES
CAN
YOU
SIMPLIFY
THE
SHADING
CALCULATIONS
IN
WHICH
CASES
DOES
THE
USE
OF
THE
HALFWAY
VECTOR
HELP
EXPLAIN
YOUR
ANSWERS
CONSTRUCT
A
DATA
STRUCTURE
FOR
REPRESENTING
THE
SUBDIVIDED
TETRAHEDRON
TRA
VERSE
THE
DATA
STRUCTURE
SUCH
THAT
YOU
CAN
GOURAUD
SHADE
THE
APPROXIMATION
TO
THE
SPHERE
BASED
ON
SUBDIVIDING
THE
TETRAHEDRON
REPEAT
EXERCISE
BUT
START
WITH
AN
ICOSAHEDRON
INSTEAD
OF
A
TETRAHEDRON
CONSTRUCT
A
DATA
STRUCTURE
FOR
REPRESENTING
MESHES
OF
QUADRILATERALS
WRITE
A
PROGRAM
TO
SHADE
THE
MESHES
REPRESENTED
BY
YOUR
DATA
STRUCTURE
WRITE
A
PROGRAM
THAT
DOES
RECURSIVE
SUBDIVISIONS
ON
QUADRILATERALS
AND
QUADRI
LATERAL
MESHES
CONSIDER
TWO
MATERIALS
THAT
MEET
ALONG
A
PLANAR
BOUNDARY
SUPPOSE
THAT
THE
SPEED
OF
LIGHT
IN
THE
TWO
MATERIALS
ARE
AND
SHOW
THAT
SNELL
LAW
IS
A
STATEMENT
THAT
LIGHT
TRAVELS
FROM
A
POINT
IN
ONE
MATERIAL
TO
A
POINT
IN
THE
SECOND
MATERIAL
IN
THE
MINIMUM
TIME
SHOW
THAT
THE
HALFWAY
VECTOR
H
IS
AT
THE
ANGLE
AT
WHICH
A
SURFACE
MUST
BE
ORIENTED
SO
THAT
THE
MAXIMUM
AMOUNT
OF
REFLECTED
LIGHT
REACHES
THE
VIEWER
ALTHOUGH
WE
HAVE
YET
TO
DISCUSS
FRAME
BUFFER
OPERATIONS
YOU
CAN
START
CON
STRUCTING
A
RAY
TRACER
USING
A
SINGLE
ROUTINE
OF
THE
FORM
X
Y
COLOR
THAT
PLACES
THE
VALUE
OF
COLOR
EITHER
AN
RGB
COLOR
OR
AN
INTENSITY
AT
THE
PIXEL
LOCATED
AT
X
Y
IN
THE
FRAME
BUFFER
WRITE
A
PSEUDOCODE
ROUTINE
RAY
THAT
RECURSIVELY
TRACES
A
CAST
RAY
YOU
CAN
ASSUME
THAT
YOU
HAVE
A
FUNCTION
AVAILABLE
THAT
WILL
INTERSECT
A
RAY
WITH
AN
OBJECT
CONSIDER
HOW
TO
LIMIT
HOW
FAR
THE
ORIGINAL
RAY
WILL
BE
TRACED
IF
YOU
HAVE
A
PIXEL
WRITING
ROUTINE
AVAILABLE
ON
YOUR
SYSTEM
WRITE
A
RAY
TRACER
THAT
WILL
RAY
TRACE
A
SCENE
COMPOSED
OF
ONLY
SPHERES
USE
THE
MATHEMATICAL
EQUATIONS
FOR
THE
SPHERES
RATHER
THAN
A
POLYGONAL
APPROXIMATION
ADD
LIGHT
SOURCES
AND
SHADING
TO
THE
MAZE
PROGRAM
IN
EXERCISE
USING
THE
SPHERE
GENERATION
PROGRAM
IN
APPENDIX
A
AS
A
STARTING
POINT
CON
STRUCT
AN
INTERACTIVE
PROGRAM
THAT
WILL
ALLOW
YOU
TO
POSITION
ONE
OR
MORE
LIGHT
SOURCES
AND
TO
ALTER
MATERIAL
PROPERTIES
USE
YOUR
PROGRAM
TO
TRY
TO
GENERATE
IMAGES
OF
SURFACES
THAT
MATCH
FAMILIAR
MATERIALS
SUCH
AS
VARIOUS
METALS
PLAS
TIC
AND
CARBON
AS
GEOMETRIC
DATA
PASS
THROUGH
THE
VIEWING
PIPELINE
A
SEQUENCE
OF
ROTATIONS
TRANSLATIONS
SCALINGS
AND
A
PROJECTION
TRANSFORMATION
IS
APPLIED
TO
THE
VECTORS
THAT
DETERMINE
THE
COSINE
TERMS
IN
THE
PHONG
REFLECTION
MODEL
WHICH
IF
ANY
OF
THESE
OPERATIONS
PRESERVE
THE
ANGLES
BETWEEN
THE
VECTORS
WHAT
ARE
THE
IMPLICATIONS
OF
YOUR
ANSWER
FOR
IMPLEMENTATION
OF
SHADING
ESTIMATE
THE
AMOUNT
OF
EXTRA
CALCULATIONS
REQUIRED
FOR
PHONG
SHADING
AS
COM
PARED
TO
GOURAUD
SHADING
TAKE
INTO
ACCOUNT
THE
RESULTS
OF
EXERCISE
IF
THE
LIGHT
POSITION
IS
ALTERED
BY
AN
AFFINE
TRANSFORMATION
SUCH
AS
A
MODELING
TRANSFORMATION
HOW
MUST
THE
NORMAL
VECTOR
BE
TRANSFORMED
SO
THAT
THE
ANGLE
BETWEEN
THE
NORMAL
AND
THE
LIGHT
VECTOR
REMAINS
UNCHANGED
REDO
THE
IMPLEMENTATION
OF
THE
BLINN
PHONG
SHADING
MODEL
SO
THE
CALCULA
TIONS
ARE
CARRIED
OUT
IN
EYE
COORDINATES
GENERALIZE
THE
SHADOW
GENERATION
ALGORITHM
SECTION
TO
HANDLE
FLAT
SUR
FACES
AT
ARBITRARY
ORIENTATIONS
CONVERT
THE
SHADOW
GENERATION
ALGORITHM
SECTION
TO
AN
ALGORITHM
FOR
DISTANT
SOURCES
HINT
THE
PERSPECTIVE
PROJECTION
SHOULD
BECOME
A
PARALLEL
PROJECTION
COMPARE
THE
SHADOW
GENERATION
ALGORITHM
OF
SECTION
TO
THE
GENERATION
OF
SHADOWS
BY
A
GLOBAL
RENDERING
METHOD
WHAT
TYPES
OF
SHADOWS
CAN
BE
GENERATED
BY
ONE
METHOD
BUT
NOT
THE
OTHER
CONSIDER
A
HIGHLY
REFLECTIVE
SPHERE
CENTERED
AT
THE
ORIGIN
WITH
A
UNIT
RADIUS
IF
A
VIEWER
IS
LOCATED
AT
P
DESCRIBE
THE
POINTS
SHE
WOULD
SEE
REFLECTED
IN
THE
SPHERE
AT
A
POINT
ON
ITS
SURFACE
FROM
VERTICES
TO
FRAGMENTS
CHAPTER
E
NOW
TURN
TO
THE
NEXT
STEPS
IN
THE
PIPELINE
CLIPPING
RASTERIZATION
AND
HIDDEN
SURFACE
REMOVAL
ALTHOUGH
WE
HAVE
YET
TO
CONSIDER
SOME
MAJOR
PARTS
OF
OPENGL
THAT
ARE
AVAILABLE
TO
THE
APPLICATION
PROGRAMMER
INCLUDING
DISCRETE
PRIMITIVES
TEXTURE
MAPPING
AND
CURVES
AND
SURFACES
THERE
ARE
SEVERAL
REASONS
FOR
CONSIDERING
THESE
TOPICS
AT
THIS
POINT
FIRST
YOU
MAY
BE
WONDERING
HOW
YOUR
PRO
GRAMS
ARE
PROCESSED
BY
THE
SYSTEM
THAT
YOU
ARE
USING
HOW
LINES
ARE
DRAWN
ON
THE
SCREEN
HOW
POLYGONS
ARE
FILLED
AND
WHAT
HAPPENS
TO
PRIMITIVES
THAT
LIE
OUTSIDE
THE
VIEWING
VOLUMES
DEFINED
IN
YOUR
PROGRAM
SECOND
OUR
CONTENTION
IS
THAT
IF
WE
ARE
TO
USE
A
GRAPHICS
SYSTEM
EFFICIENTLY
WE
NEED
TO
HAVE
A
DEEPER
UNDERSTANDING
OF
THE
IMPLEMENTATION
PROCESS
WHICH
STEPS
ARE
EASY
AND
WHICH
TAX
OUR
HARDWARE
AND
SOFT
WARE
THIRD
OUR
DISCUSSION
OF
IMPLEMENTATION
WILL
OPEN
THE
DOOR
TO
NEW
CAPABILITIES
THAT
ARE
SUPPORTED
BY
THE
LATEST
HARDWARE
LEARNING
IMPLEMENTATION
INVOLVES
STUDYING
ALGORITHMS
AS
WHEN
WE
STUDY
ANY
ALGORITHM
WE
MUST
BE
CAREFUL
TO
CONSIDER
SUCH
ISSUES
AS
THEORETICAL
VERSUS
PRACTICAL
PERFORMANCE
HARDWARE
VERSUS
SOFTWARE
IMPLEMENTATIONS
AND
THE
SPECIFIC
CHARACTER
ISTICS
OF
AN
APPLICATION
ALTHOUGH
WE
CAN
TEST
WHETHER
AN
OPENGL
IMPLEMENTATION
WORKS
CORRECTLY
IN
THE
SENSE
THAT
IT
PRODUCES
THE
CORRECT
PIXELS
ON
THE
SCREEN
THERE
ARE
MANY
CHOICES
FOR
THE
ALGORITHMS
EMPLOYED
WE
FOCUS
ON
THE
BASIC
OPERATIONS
THAT
ARE
BOTH
NECESSARY
TO
IMPLEMENT
A
STANDARD
API
AND
REQUIRED
WHETHER
THE
RENDERING
IS
DONE
BY
A
PIPELINE
ARCHITECTURE
OR
BY
ANOTHER
METHOD
SUCH
AS
RAY
TRACING
CONSE
QUENTLY
WE
PRESENT
A
VARIETY
OF
THE
BASIC
ALGORITHMS
FOR
EACH
OF
THE
PRINCIPAL
TASKS
IN
AN
IMPLEMENTATION
IN
THIS
CHAPTER
WE
ARE
CONCERNED
WITH
THE
BASIC
ALGORITHMS
THAT
ARE
USED
TO
IM
PLEMENT
THE
RENDERING
PIPELINE
EMPLOYED
BY
OPENGL
WE
SHALL
FOCUS
ON
THREE
ISSUES
CLIPPING
RASTERIZATION
AND
HIDDEN
SURFACE
REMOVAL
CLIPPING
INVOLVES
ELIMINATING
OBJECTS
THAT
LIE
OUTSIDE
THE
VIEWING
VOLUME
AND
THUS
CANNOT
BE
VISIBLE
IN
THE
IMAGE
RASTERIZATION
PRODUCES
FRAGMENTS
FROM
THE
REMAINING
OBJECTS
THESE
FRAGMENTS
CAN
CONTRIBUTE
TO
THE
FINAL
IMAGE
HIDDEN
SURFACE
REMOVAL
DETERMINES
WHICH
FRAGMENTS
CORRESPOND
TO
OBJECTS
THAT
ARE
VISIBLE
NAMELY
THOSE
THAT
ARE
IN
THE
VIEW
VOLUME
AND
ARE
NOT
BLOCKED
FROM
VIEW
BY
OTHER
OBJECTS
CLOSER
TO
THE
CAMERA
VERTICES
PIXELS
FIGURE
HIGH
LEVEL
VIEW
OF
THE
GRAPHICS
PROCESS
BASIC
IMPLEMENTATION
STRATEGIES
LET
US
BEGIN
WITH
A
HIGH
LEVEL
VIEW
OF
THE
IMPLEMENTATION
PROCESS
IN
COMPUTER
GRAPHICS
WE
START
WITH
AN
APPLICATION
PROGRAM
AND
WE
END
WITH
AN
IMAGE
WE
CAN
AGAIN
CONSIDER
THIS
PROCESS
AS
A
BLACK
BOX
FIGURE
WHOSE
INPUTS
ARE
THE
VERTICES
AND
STATES
DEFINED
IN
THE
PROGRAM
GEOMETRIC
OBJECTS
ATTRIBUTES
CAMERA
SPECIFICATIONS
AND
WHOSE
OUTPUT
IS
AN
ARRAY
OF
COLORED
PIXELS
IN
THE
FRAME
BUFFER
WITHIN
THE
BLACK
BOX
WE
MUST
DO
MANY
TASKS
INCLUDING
TRANSFORMATIONS
CLIP
PING
SHADING
HIDDEN
SURFACE
REMOVAL
AND
RASTERIZATION
OF
THE
PRIMITIVES
THAT
CAN
APPEAR
ON
THE
DISPLAY
THESE
TASKS
CAN
BE
ORGANIZED
IN
A
VARIETY
OF
WAYS
BUT
REGARD
LESS
OF
THE
STRATEGY
THAT
WE
ADOPT
WE
MUST
ALWAYS
DO
TWO
THINGS
WE
MUST
PASS
EVERY
GEOMETRIC
OBJECT
THROUGH
THE
SYSTEM
AND
WE
MUST
ASSIGN
A
COLOR
TO
EVERY
PIXEL
IN
THE
COLOR
BUFFER
THAT
IS
DISPLAYED
SUPPOSE
THAT
WE
THINK
OF
WHAT
GOES
INTO
THE
BLACK
BOX
IN
TERMS
OF
A
SINGLE
PROGRAM
THAT
CARRIES
OUT
THE
ENTIRE
PROCESS
THIS
PROGRAM
TAKES
AS
INPUT
A
SET
OF
VERTICES
SPECIFYING
GEOMETRIC
OBJECTS
AND
PRODUCES
AS
OUTPUT
PIXELS
IN
THE
FRAME
BUFFER
BECAUSE
THIS
PROGRAM
MUST
ASSIGN
A
VALUE
TO
EVERY
PIXEL
AND
MUST
PROCESS
EVERY
GEOMETRIC
PRIMITIVE
AND
EVERY
LIGHT
SOURCE
WE
EXPECT
THIS
PROGRAM
TO
CONTAIN
AT
LEAST
TWO
LOOPS
THAT
ITERATE
OVER
THESE
BASIC
VARIABLES
IF
WE
WISH
TO
WRITE
SUCH
A
PROGRAM
THEN
WE
MUST
IMMEDIATELY
ADDRESS
THE
FOLLOWING
QUESTION
WHICH
VARIABLE
CONTROLS
THE
OUTER
LOOP
THE
ANSWER
WE
CHOOSE
DETERMINES
THE
FLOW
OF
THE
ENTIRE
IMPLEMENTATION
PROCESS
THERE
ARE
TWO
FUNDAMENTAL
STRATEGIES
OFTEN
CALLED
THE
IMAGE
ORIENTED
AND
THE
OBJECT
ORIENTED
APPROACHES
IN
THE
OBJECT
ORIENTED
APPROACH
THE
OUTER
LOOP
IS
OVER
THE
OBJECTS
WE
CAN
THINK
OF
THE
PROGRAM
AS
CONTROLLED
BY
A
LOOP
OF
THIS
FORM
FOR
RENDER
OBJECT
A
PIPELINE
RENDERER
FITS
THIS
DESCRIPTION
VERTICES
ARE
DEFINED
BY
THE
PROGRAM
AND
FLOW
THROUGH
A
SEQUENCE
OF
MODULES
THAT
TRANSFORMS
THEM
COLORS
THEM
AND
DETER
MINES
WHETHER
THEY
ARE
VISIBLE
A
POLYGON
MIGHT
FLOW
THROUGH
THE
STEPS
ILLUSTRATED
IN
FIGURE
NOTE
THAT
AFTER
A
POLYGON
PASSES
THROUGH
GEOMETRIC
PROCESSING
THE
RAS
TERIZATION
OF
THIS
POLYGON
CAN
POTENTIALLY
AFFECT
ANY
PIXELS
IN
THE
FRAME
BUFFER
MOST
IMPLEMENTATIONS
THAT
FOLLOW
THIS
APPROACH
ARE
BASED
ON
CONSTRUCTION
OF
A
RENDERING
PIPELINE
CONTAINING
HARDWARE
OR
SOFTWARE
MODULES
FOR
EACH
OF
THE
TASKS
DATA
VER
TICES
FLOW
FORWARD
THROUGH
THE
SYSTEM
IN
THE
PAST
THE
MAJOR
LIMITATIONS
OF
THE
OBJECT
ORIENTED
APPROACH
WERE
THE
LARGE
AMOUNT
OF
MEMORY
REQUIRED
AND
THE
HIGH
COST
OF
PROCESSING
EACH
OBJECT
INDEPEN
Y
Y
Y
PROJECTION
RASTERIZING
X
X
FRAME
BUFFER
Z
Z
FIGURE
OBJECT
ORIENTED
APPROACH
DENTLY
ANY
GEOMETRIC
PRIMITIVE
THAT
EMERGES
FROM
THE
GEOMETRIC
PROCESSING
CAN
PO
TENTIALLY
AFFECT
ANY
SET
OF
PIXELS
IN
THE
FRAME
BUFFER
THUS
THE
ENTIRE
COLOR
BUFFER
AND
VARIOUS
OTHER
BUFFERS
SUCH
AS
THE
DEPTH
BUFFER
USED
FOR
HIDDEN
SURFACE
REMOVAL
MUST
BE
OF
THE
SIZE
OF
THE
DISPLAY
AND
MUST
BE
AVAILABLE
AT
ALL
TIMES
BEFORE
MEMORY
BECAME
BOTH
INEXPENSIVE
AND
DENSE
THIS
REQUIREMENT
WAS
CONSIDERED
TO
BE
A
SERIOUS
PROBLEM
NOW
VARIOUS
PIPELINED
GEOMETRIC
PROCESSORS
ARE
AVAILABLE
THAT
CAN
PROCESS
TENS
OF
MILLIONS
OF
POLYGONS
PER
SECOND
IN
FACT
PRECISELY
BECAUSE
WE
ARE
DOING
THE
SAME
OPERATIONS
ON
EVERY
PRIMITIVE
THE
HARDWARE
TO
BUILD
AN
OBJECT
BASED
SYSTEM
IS
FAST
AND
RELATIVELY
INEXPENSIVE
WITH
MANY
OF
THE
FUNCTIONS
IMPLEMENTED
WITH
SPECIAL
PURPOSE
CHIPS
TODAY
THE
MAIN
LIMITATION
OF
OBJECT
ORIENTED
IMPLEMENTATIONS
IS
THAT
THEY
CAN
NOT
HANDLE
MOST
GLOBAL
CALCULATIONS
BECAUSE
EACH
GEOMETRIC
PRIMITIVE
IS
PROCESSED
INDEPENDENTLY
AND
IN
AN
ARBITRARY
ORDER
COMPLEX
SHADING
EFFECTS
THAT
INVOLVE
MULTIPLE
GEOMETRIC
OBJECTS
SUCH
AS
REFLECTIONS
CANNOT
BE
HANDLED
EXCEPT
BY
APPROX
IMATE
METHODS
THE
MAJOR
EXCEPTION
IS
HIDDEN
SURFACE
REMOVAL
WHERE
THE
Z
BUFFER
IS
USED
TO
STORE
GLOBAL
INFORMATION
IMAGE
ORIENTED
APPROACHES
LOOP
OVER
PIXELS
OR
ROWS
OF
PIXELS
CALLED
SCANLINES
THAT
CONSTITUTE
THE
FRAME
BUFFER
IN
PSEUDOCODE
THE
OUTER
LOOP
OF
SUCH
A
PROGRAM
IS
OF
THE
FOLLOWING
FORM
FOR
PIXEL
FOR
EACH
PIXEL
WE
WORK
BACKWARD
TRYING
TO
DETERMINE
WHICH
GEOMETRIC
PRIM
ITIVES
CAN
CONTRIBUTE
TO
ITS
COLOR
THE
ADVANTAGES
OF
THIS
APPROACH
ARE
THAT
WE
NEED
ONLY
LIMITED
DISPLAY
MEMORY
AT
ANY
TIME
AND
THAT
WE
CAN
HOPE
TO
GENERATE
PIXELS
AT
THE
RATE
AND
IN
THE
ORDER
REQUIRED
TO
REFRESH
THE
DISPLAY
BECAUSE
THE
RESULTS
OF
MOST
CALCULATIONS
DO
NOT
DIFFER
GREATLY
FROM
PIXEL
TO
PIXEL
OR
SCANLINE
TO
SCANLINE
WE
CAN
USE
THIS
COHERENCE
IN
OUR
ALGORITHMS
BY
DEVELOPING
INCREMENTAL
FORMS
FOR
MANY
OF
THE
STEPS
IN
THE
IMPLEMENTATION
THE
MAIN
DISADVANTAGE
OF
THIS
APPROACH
IS
THAT
UNLESS
WE
FIRST
BUILD
A
DATA
STRUCTURE
FROM
THE
GEOMETRIC
DATA
WE
DO
NOT
KNOW
WHICH
PRIMITIVES
AFFECT
WHICH
PIXELS
SUCH
A
DATA
STRUCTURE
CAN
BE
COMPLEX
AND
MAY
IMPLY
THAT
ALL
THE
GEOMETRIC
DATA
MUST
BE
AVAILABLE
AT
ALL
TIMES
DURING
THE
RENDERING
PROCESS
FOR
PROBLEMS
WITH
VERY
LARGE
DATABASES
EVEN
HAVING
A
GOOD
DATA
REPRESENTATION
MAY
FIGURE
IMPLEMENTATION
TASKS
NOT
AVOID
MEMORY
PROBLEMS
HOWEVER
BECAUSE
IMAGE
SPACE
APPROACHES
HAVE
ACCESS
TO
ALL
OBJECTS
FOR
EACH
PIXEL
THEY
ARE
WELL
SUITED
TO
HANDLE
GLOBAL
EFFECTS
SUCH
AS
SHADOWS
AND
REFLECTIONS
RAY
TRACING
CHAPTER
IS
AN
EXAMPLE
OF
THE
IMAGE
BASED
APPROACH
WE
LEAN
TOWARD
THE
OBJECT
BASED
APPROACH
ALTHOUGH
WE
LOOK
AT
EXAMPLES
OF
ALGORITHMS
SUITED
FOR
BOTH
APPROACHES
FOUR
MAJOR
TASKS
WE
START
BY
REVIEWING
THE
BLOCKS
IN
THE
PIPELINE
FOCUSING
ON
THOSE
BLOCKS
THAT
WE
HAVE
YET
TO
DISCUSS
IN
DETAIL
THERE
ARE
FOUR
MAJOR
TASKS
THAT
ANY
GRAPHICS
SYSTEM
MUST
PERFORM
TO
RENDER
A
GEOMETRIC
ENTITY
SUCH
AS
A
THREE
DIMENSIONAL
POLYGON
AS
THAT
ENTITY
PASSES
FROM
DEFINITION
IN
A
USER
PROGRAM
TO
POSSIBLE
DISPLAY
ON
AN
OUTPUT
DEVICE
MODELING
GEOMETRY
PROCESSING
RASTERIZATION
FRAGMENT
PROCESSING
FIGURE
SHOWS
HOW
THESE
TASKS
MIGHT
BE
ORGANIZED
IN
A
PIPELINE
IMPLEMENTATION
REGARDLESS
OF
THE
APPROACH
ALL
FOUR
TASKS
MUST
BE
CARRIED
OUT
MODELING
THE
USUAL
RESULTS
OF
THE
MODELING
PROCESS
ARE
SETS
OF
VERTICES
THAT
SPECIFY
A
GROUP
OF
GEOMETRIC
OBJECTS
SUPPORTED
BY
THE
REST
OF
THE
SYSTEM
WE
HAVE
SEEN
A
FEW
EXAMPLES
THAT
REQUIRED
SOME
MODELING
BY
THE
USER
SUCH
AS
THE
APPROXIMATION
OF
SPHERES
IN
CHAPTER
IN
CHAPTERS
AND
WE
EXPLORE
OTHER
MODELING
TECHNIQUES
WE
CAN
LOOK
AT
THE
MODELER
AS
A
BLACK
BOX
THAT
PRODUCES
GEOMETRIC
OBJECTS
AND
IS
USUALLY
A
USER
PROGRAM
YET
THERE
ARE
OTHER
TASKS
THAT
THE
MODELER
MIGHT
PERFORM
CONSIDER
FOR
EXAMPLE
CLIPPING
THE
PROCESS
OF
ELIMINATING
PARTS
OF
OBJECTS
THAT
CANNOT
APPEAR
ON
THE
DISPLAY
BECAUSE
THEY
LIE
OUTSIDE
THE
VIEWING
VOLUME
A
USER
CAN
GENERATE
GEOMETRIC
OBJECTS
IN
HER
PROGRAM
AND
SHE
CAN
HOPE
THAT
THE
REST
OF
THE
SYSTEM
CAN
PROCESS
THESE
OBJECTS
AT
THE
RATE
AT
WHICH
THEY
ARE
PRODUCED
OR
THE
MODELER
CAN
ATTEMPT
TO
EASE
THE
BURDEN
ON
THE
REST
OF
THE
SYSTEM
BY
MINIMIZING
THE
NUMBER
OF
OBJECTS
THAT
IT
PASSES
ON
THE
LATTER
APPROACH
OFTEN
MEANS
THAT
THE
MODELER
MAY
DO
SOME
OF
THE
SAME
JOBS
AS
THE
REST
OF
THE
SYSTEM
ALBEIT
WITH
DIFFERENT
ALGORITHMS
IN
THE
CASE
OF
CLIPPING
THE
MODELER
KNOWING
MORE
ABOUT
THE
SPECIFICS
OF
THE
APPLICATION
CAN
OFTEN
USE
A
GOOD
HEURISTIC
TO
ELIMINATE
MANY
IF
NOT
MOST
PRIMITIVES
BEFORE
THEY
ARE
SENT
ON
THROUGH
THE
STANDARD
VIEWING
PROCESS
GEOMETRY
PROCESSING
GEOMETRY
PROCESSING
WORKS
WITH
VERTICES
THE
GOALS
OF
THE
GEOMETRY
PROCESSOR
ARE
TO
DETERMINE
WHICH
GEOMETRIC
OBJECTS
CAN
APPEAR
ON
THE
DISPLAY
AND
TO
ASSIGN
SHADES
OR
COLORS
TO
THE
VERTICES
OF
THESE
OBJECTS
FOUR
PROCESSES
ARE
REQUIRED
PROJECTION
PRIMITIVE
ASSEMBLY
CLIPPING
AND
SHADING
USUALLY
THE
FIRST
STEP
IN
GEOMETRY
PROCESSING
IS
TO
CHANGE
REPRESENTATIONS
FROM
OBJECT
COORDINATES
TO
CAMERA
OR
EYE
COORDINATES
USING
THE
MODEL
VIEW
TRANSFORMA
TION
AS
WE
SAW
IN
CHAPTER
THE
CONVERSION
TO
CAMERA
COORDINATES
IS
ONLY
THE
FIRST
PART
OF
THE
VIEWING
PROCESS
THE
SECOND
STEP
IS
TO
TRANSFORM
VERTICES
USING
THE
PRO
JECTION
TRANSFORMATION
TO
A
NORMALIZED
VIEW
VOLUME
IN
WHICH
OBJECTS
THAT
MIGHT
BE
VISIBLE
ARE
CONTAINED
IN
A
CUBE
CENTERED
AT
THE
ORIGIN
VERTICES
ARE
NOW
REPRESENTED
IN
CLIP
COORDINATES
NOT
ONLY
DOES
THIS
NORMALIZATION
CONVERT
BOTH
PARALLEL
AND
ORTHO
GRAPHIC
PROJECTIONS
TO
A
SIMPLE
ORTHOGRAPHIC
PROJECTION
IN
A
SIMPLE
VOLUME
BUT
IN
ADDITION
WE
SIMPLIFY
THE
CLIPPING
PROCESS
AS
WE
SHALL
SEE
IN
SECTION
GEOMETRIC
OBJECTS
ARE
TRANSFORMED
BY
A
SEQUENCE
OF
TRANSFORMATIONS
THAT
MAY
RESHAPE
AND
MOVE
THEM
MODELING
OR
MAY
CHANGE
THEIR
REPRESENTATIONS
VIEWING
EVENTUALLY
ONLY
THOSE
PRIMITIVES
THAT
FIT
WITHIN
A
SPECIFIED
VOLUME
THE
VIEW
VOLUME
CAN
APPEAR
ON
THE
DISPLAY
AFTER
RASTERIZATION
WE
CANNOT
HOWEVER
SIMPLY
ALLOW
ALL
OBJECTS
TO
BE
RASTERIZED
HOPING
THAT
THE
HARDWARE
WILL
TAKE
CARE
OF
PRIMITIVES
THAT
LIE
WHOLLY
OR
PARTIALLY
OUTSIDE
THE
VIEW
VOLUME
THE
IMPLEMENTATION
MUST
CARRY
OUT
THIS
TASK
BEFORE
RASTERIZATION
ONE
REASON
IS
THAT
RASTERIZING
OBJECTS
THAT
LIE
OUTSIDE
THE
VIEW
VOLUME
IS
INEFFICIENT
BECAUSE
SUCH
OBJECTS
CANNOT
BE
VISIBLE
ANOTHER
REASON
IS
THAT
WHEN
VERTICES
REACH
THE
RASTERIZER
THEY
CAN
NO
LONGER
BE
PROCESSED
INDIVIDUALLY
AND
FIRST
MUST
BE
ASSEMBLED
INTO
PRIMITIVES
PRIMITIVES
THAT
LIE
PARTIALLY
IN
THE
VIEWING
VOLUME
CAN
GENERATE
NEW
PRIMITIVES
WITH
NEW
VERTICES
FOR
WHICH
WE
MUST
CARRY
OUT
SHADING
CALCULATIONS
BEFORE
CLIPPING
CAN
TAKE
PLACE
VERTICES
MUST
BE
GROUPED
INTO
OBJECTS
A
PROCESS
KNOWN
AS
PRIMITIVE
ASSEMBLY
NOTE
THAT
EVEN
THOUGH
AN
OBJECT
LIES
INSIDE
THE
VIEW
VOLUME
IT
WILL
NOT
BE
VIS
IBLE
IF
IT
IS
OBSCURED
BY
OTHER
OBJECTS
ALGORITHMS
FOR
HIDDEN
SURFACE
REMOVAL
OR
VISIBLE
SURFACE
DETERMINATION
ARE
BASED
ON
THE
THREE
DIMENSIONAL
SPATIAL
RELATION
SHIPS
AMONG
OBJECTS
THIS
STEP
IS
NORMALLY
CARRIED
OUT
AS
PART
OF
FRAGMENT
PROCESSING
AS
WE
SAW
IN
CHAPTER
COLORS
CAN
BE
DETERMINED
ON
EITHER
A
PER
VERTEX
OR
PER
FRAGMENT
BASIS
IF
THEY
ARE
ASSIGNED
ON
A
PER
VERTEX
BASIS
THEY
CAN
BE
SENT
FROM
THE
APPLICATION
AS
VERTEX
ATTRIBUTES
OR
COMPUTED
IN
THE
VERTEX
SHADER
IF
LIGHTING
IS
ENABLED
VERTEX
COLORS
ARE
COMPUTED
USING
A
LIGHTING
MODEL
THAT
CAN
BE
IMPLEMENTED
IN
THE
APPLICATION
OR
IN
THE
VERTEX
SHADER
AFTER
CLIPPING
TAKES
PLACE
THE
REMAINING
VERTICES
ARE
STILL
IN
FOUR
DIMENSIONAL
HOMOGENEOUS
COORDINATES
PERSPECTIVE
DIVISION
CONVERTS
THEM
TO
THREE
DIMENSIONAL
REPRESENTATION
IN
NORMALIZED
DEVICE
COORDINATES
COLLECTIVELY
THESE
OPERATIONS
CONSTITUTE
WHAT
HAS
BEEN
CALLED
FRONT
END
PROCESS
ING
ALL
INVOLVE
THREE
DIMENSIONAL
CALCULATIONS
AND
ALL
REQUIRE
FLOATING
POINT
ARITH
METIC
ALL
GENERATE
SIMILAR
HARDWARE
AND
SOFTWARE
REQUIREMENTS
ALL
ARE
CARRIED
OUT
ON
A
VERTEX
BY
VERTEX
BASIS
WE
WILL
DISCUSS
CLIPPING
THE
ONLY
GEOMETRIC
STEP
THAT
WE
HAVE
YET
TO
DISCUSS
IN
SECTION
RASTERIZATION
EVEN
AFTER
GEOMETRIC
PROCESSING
HAS
TAKEN
PLACE
WE
STILL
NEED
TO
RETAIN
DEPTH
INFOR
MATION
FOR
HIDDEN
SURFACE
REMOVAL
HOWEVER
ONLY
THE
X
Y
VALUES
OF
THE
VERTICES
ARE
NEEDED
TO
DETERMINE
WHICH
PIXELS
IN
THE
FRAME
BUFFER
CAN
BE
AFFECTED
BY
THE
PRIMITIVE
FOR
EXAMPLE
AFTER
PERSPECTIVE
DIVISION
A
LINE
SEGMENT
THAT
WAS
SPECIFIED
ORIGINALLY
IN
THREE
DIMENSIONS
BY
TWO
VERTICES
BECOMES
A
LINE
SEGMENT
SPECIFIED
BY
A
PAIR
OF
THREE
DIMENSIONAL
VERTICES
IN
NORMALIZED
DEVICE
COORDINATES
TO
GENERATE
A
SET
OF
FRAGMENTS
THAT
GIVE
THE
LOCATIONS
OF
THE
PIXELS
IN
THE
FRAME
BUFFER
CORRESPONDING
TO
THESE
VERTICES
WE
ONLY
NEED
THEIR
X
Y
COMPONENTS
OR
EQUIVALENTLY
THE
RESULTS
OF
THE
ORTHOGONAL
PROJECTION
OF
THESE
VERTICES
WE
DETERMINE
THESE
FRAGMENTS
THROUGH
A
PROCESS
CALLED
RASTERIZATION
OR
SCAN
CONVERSION
FOR
LINE
SEGMENTS
RASTERIZATION
DETERMINES
WHICH
FRAGMENTS
SHOULD
BE
USED
TO
APPROXIMATE
A
LINE
SEGMENT
BETWEEN
THE
PROJECTED
VERTICES
FOR
POLYGONS
RASTERIZATION
DETERMINES
WHICH
PIXELS
LIE
INSIDE
THE
TWO
DIMENSIONAL
POLYGON
DETERMINED
BY
THE
PROJECTED
VERTICES
THE
COLORS
THAT
WE
ASSIGN
TO
THESE
FRAGMENTS
CAN
BE
DETERMINED
BY
THE
VERTEX
AT
TRIBUTES
OR
OBTAINED
BY
INTERPOLATING
THE
SHADES
AT
THE
VERTICES
THAT
ARE
COMPUTED
AS
IN
CHAPTER
OBJECTS
MORE
COMPLEX
THAN
LINE
SEGMENTS
AND
POLYGONS
ARE
USUALLY
AP
PROXIMATED
BY
MULTIPLE
LINE
SEGMENTS
AND
POLYGONS
AND
THUS
MOST
GRAPHICS
SYSTEMS
DO
NOT
HAVE
SPECIAL
RASTERIZATION
ALGORITHMS
FOR
THEM
WE
SHALL
SEE
EXCEPTIONS
TO
THIS
RULE
FOR
SOME
SPECIAL
CURVES
AND
SURFACES
IN
CHAPTER
THE
RASTERIZER
STARTS
WITH
VERTICES
IN
NORMALIZED
DEVICE
COORDINATES
BUT
OUTPUTS
FRAGMENTS
WHOSE
LOCATIONS
ARE
IN
UNITS
OF
THE
DISPLAY
WINDOW
COORDINATES
AS
WE
SAW
IN
CHAPTERS
AND
THE
PROJECTION
OF
THE
CLIPPING
VOLUME
MUST
APPEAR
IN
THE
ASSIGNED
VIEWPORT
IN
OPENGL
THIS
FINAL
TRANSFORMATION
IS
DONE
AFTER
PROJECTION
AND
IS
TWO
DIMENSIONAL
THE
PRECEDING
TRANSFORMATIONS
HAVE
NORMALIZED
THE
VIEW
VOLUME
SUCH
THAT
ITS
SIDES
ARE
OF
LENGTH
AND
LINE
UP
WITH
THE
SIDES
OF
THE
VIEWPORT
FIGURE
SO
THIS
TRANSFORMATION
IS
SIMPLY
XV
X
VMIN
X
X
VMAX
XVMIN
Y
Y
Y
Y
Y
V
Z
Z
VMIN
Z
Z
VMAX
VMIN
Z
V
VMIN
VMAX
VMIN
RECALL
THAT
FOR
PERSPECTIVE
VIEWING
THESE
Z
VALUES
HAVE
BEEN
SCALED
NONLINEARLY
BY
PERSPECTIVE
NORMALIZATION
HOWEVER
THEY
RETAIN
THEIR
ORIGINAL
DEPTH
ORDER
SO
THEY
XMAX
YMAX
XVMAX
YVMAX
X
Y
XMIN
YMIN
XV
YV
XVMIN
YVMIN
FIGURE
VIEWPORT
TRANSFORMATION
CAN
BE
USED
FOR
HIDDEN
SURFACE
REMOVAL
WE
SHALL
USE
THE
TERM
SCREEN
COORDINATES
TO
REFER
TO
THE
TWO
DIMENSIONAL
SYSTEM
THAT
IS
THE
SAME
AS
WINDOW
COORDINATES
BUT
LACKS
THE
DEPTH
COORDINATE
FRAGMENT
PROCESSING
IN
THE
SIMPLEST
SITUATIONS
EACH
FRAGMENT
IS
ASSIGNED
A
COLOR
BY
THE
RASTERIZER
AND
THIS
COLOR
IS
PLACED
IN
THE
FRAME
BUFFER
AT
THE
LOCATIONS
CORRESPONDING
TO
THE
FRAGMENT
LOCATION
HOWEVER
THERE
ARE
MANY
OTHER
POSSIBILITIES
THE
SEPARATE
PIXEL
PIPELINE
CHAPTER
SUPPORTED
BY
ARCHITECTURES
SUCH
AS
OPENGL
MERGES
WITH
THE
RESULTS
OF
THE
GEOMETRIC
PIPELINE
AT
THE
RASTERIZATION
STAGE
CONSIDER
WHAT
HAPPENS
WHEN
A
SHADED
AND
TEXTURE
MAPPED
POLYGON
IS
PROCESSED
VERTEX
LIGHTING
IS
COMPUTED
AS
PART
OF
THE
GEOMETRIC
PROCESSING
THE
TEXTURE
VALUES
ARE
NOT
NEEDED
UNTIL
AFTER
RASTERIZATION
WHEN
THE
RENDERER
HAS
GENERATED
FRAGMENTS
THAT
CORRESPOND
TO
LOCATIONS
INSIDE
A
POLYGON
AT
THIS
POINT
INTERPOLATION
OF
PER
VERTEX
COLORS
AND
TEXTURE
COORDINATES
TAKES
PLACE
AND
THE
TEXTURE
PARAMETERS
DETERMINE
HOW
TO
COMBINE
TEXTURE
COLORS
AND
FRAGMENT
COLORS
TO
DETERMINE
FINAL
COLORS
IN
THE
COLOR
BUFFER
AS
WE
HAVE
NOTED
OBJECTS
THAT
ARE
IN
THE
VIEW
VOLUME
WILL
NOT
BE
VISIBLE
IF
THEY
ARE
BLOCKED
BY
ANY
OPAQUE
OBJECTS
CLOSER
TO
THE
VIEWER
THE
REQUIRED
HIDDEN
SURFACE
REMOVAL
PROCESS
IS
TYPICALLY
CARRIED
OUT
ON
A
FRAGMENT
BY
FRAGMENT
BASIS
UNTIL
NOW
WE
HAVE
ASSUMED
THAT
ALL
OBJECTS
ARE
OPAQUE
AND
THUS
AN
OBJECT
LOCATED
BEHIND
ANOTHER
OBJECT
IS
NOT
VISIBLE
WE
CAN
ALSO
ASSUME
THAT
OBJECTS
ARE
TRANSLUCENT
AND
ALLOW
SOME
LIGHT
TO
PASS
THROUGH
IN
THIS
CASE
FRAGMENT
COLORS
MAY
HAVE
TO
BE
BLENDED
WITH
THE
COLORS
OF
PIXELS
ALREADY
IN
THE
COLOR
BUFFER
WE
CONSIDER
THIS
POSSIBILITY
IN
CHAPTER
IN
MOST
DISPLAYS
THE
PROCESS
OF
TAKING
THE
IMAGE
FROM
THE
FRAME
BUFFER
AND
DISPLAYING
IT
ON
A
MONITOR
HAPPENS
AUTOMATICALLY
AND
IS
NOT
OF
CONCERN
TO
THE
APPLI
CATION
PROGRAM
HOWEVER
THERE
ARE
NUMEROUS
PROBLEMS
WITH
THE
QUALITY
OF
DISPLAY
SUCH
AS
THE
JAGGEDNESS
ASSOCIATED
WITH
IMAGES
ON
RASTER
DISPLAYS
IN
CHAPTER
WE
IN
TRODUCE
ALGORITHMS
FOR
REDUCING
THIS
JAGGEDNESS
OR
ALIASING
AND
WE
DISCUSS
PROBLEMS
WITH
COLOR
REPRODUCTION
ON
DISPLAYS
CLIPPING
WE
CAN
NOW
TURN
TO
CLIPPING
THE
PROCESS
OF
DETERMINING
WHICH
PRIMITIVES
OR
PARTS
OF
PRIMITIVES
FIT
WITHIN
THE
CLIPPING
OR
VIEW
VOLUME
DEFINED
BY
THE
APPLICATION
PROGRAM
CLIPPING
IS
DONE
BEFORE
THE
PERSPECTIVE
DIVISION
THAT
IS
NECESSARY
IF
THE
W
COMPONENT
OF
A
CLIPPED
VERTEX
IS
NOT
EQUAL
TO
THE
PORTIONS
OF
ALL
PRIMITIVES
THAT
CAN
POSSIBLY
BE
DISPLAYED
WE
HAVE
YET
TO
APPLY
HIDDEN
SURFACE
REMOVAL
LIE
WITHIN
THE
CUBE
W
X
W
W
Y
W
W
Z
W
THIS
COORDINATE
SYSTEM
IS
CALLED
NORMALIZED
DEVICE
COORDINATES
BECAUSE
IT
DEPENDS
ON
NEITHER
THE
ORIGINAL
APPLICATION
UNITS
NOR
THE
PARTICULARS
OF
THE
DISPLAY
DEVICE
ALTHOUGH
THE
INFORMATION
TO
PRODUCE
THE
CORRECT
IMAGE
IS
RETAINED
IN
THIS
COORDINATE
SYSTEM
NOTE
ALSO
THAT
PROJECTION
HAS
BEEN
CARRIED
OUT
ONLY
PARTIALLY
WE
STILL
MUST
DO
THE
PERSPECTIVE
DIVISION
AND
THE
FINAL
ORTHOGRAPHIC
PROJECTION
WE
SHALL
CONCENTRATE
ON
CLIPPING
OF
LINE
SEGMENTS
AND
POLYGONS
BECAUSE
THEY
ARE
THE
MOST
COMMON
PRIMITIVES
TO
PASS
DOWN
THE
PIPELINE
ALTHOUGH
THE
OPENGL
PIPELINE
DOES
CLIPPING
ON
THREE
DIMENSIONAL
OBJECTS
THERE
ARE
OTHER
SYSTEMS
IN
WHICH
THE
OBJECTS
ARE
FIRST
PROJECTED
INTO
THE
X
Y
PLANE
FORTUNATELY
MANY
OF
THE
MOST
EFFICIENT
ALGORITHMS
ARE
ALMOST
IDENTICAL
IN
TWO
AND
THREE
DIMENSIONS
AND
WE
WILL
FOCUS
ON
THESE
ALGORITHMS
LINE
SEGMENT
CLIPPING
A
CLIPPER
DECIDES
WHICH
PRIMITIVES
OR
PARTS
OF
PRIMITIVES
CAN
POSSIBLY
APPEAR
ON
THE
DISPLAY
AND
BE
PASSED
ON
TO
THE
RASTERIZER
PRIMITIVES
THAT
FIT
WITHIN
THE
SPECIFIED
VIEW
VOLUME
PASS
THROUGH
THE
CLIPPER
OR
ARE
ACCEPTED
PRIMITIVES
THAT
CANNOT
APPEAR
ON
THE
DISPLAY
ARE
ELIMINATED
OR
REJECTED
OR
CULLED
PRIMITIVES
THAT
ARE
ONLY
PARTIALLY
WITHIN
THE
VIEW
VOLUME
MUST
BE
CLIPPED
SUCH
THAT
ANY
PART
LYING
OUTSIDE
THE
VOLUME
IS
REMOVED
CLIPPING
CAN
OCCUR
AT
ONE
OR
MORE
PLACES
IN
THE
VIEWING
PIPELINE
THE
MODELER
MAY
CLIP
TO
LIMIT
THE
PRIMITIVES
THAT
THE
HARDWARE
MUST
HANDLE
THE
PRIMITIVES
MAY
BE
CLIPPED
AFTER
THEY
HAVE
BEEN
PROJECTED
FROM
THREE
TO
TWO
DIMENSIONAL
OBJECTS
IN
OPENGL
PRIMITIVES
ARE
CLIPPED
AGAINST
A
THREE
DIMENSIONAL
VIEW
VOLUME
BEFORE
RASTERIZATION
WE
SHALL
DEVELOP
A
SEQUENCE
OF
CLIPPERS
FOR
BOTH
PEDAGOGIC
AND
HIS
TORIC
REASONS
WE
START
WITH
TWO
TWO
DIMENSIONAL
LINE
SEGMENT
CLIPPERS
BOTH
EXTEND
DIRECTLY
TO
THREE
DIMENSIONS
AND
TO
CLIPPING
OF
POLYGONS
COHEN
SUTHERLAND
CLIPPING
THE
TWO
DIMENSIONAL
CLIPPING
PROBLEM
FOR
LINE
SEGMENTS
IS
SHOWN
IN
FIGURE
WE
CAN
ASSUME
FOR
NOW
THAT
THIS
PROBLEM
ARISES
AFTER
THREE
DIMENSIONAL
LINE
SEGMENTS
HAVE
BEEN
PROJECTED
ONTO
THE
PROJECTION
PLANE
AND
THAT
THE
WINDOW
IS
PART
OF
THE
D
G
FIGURE
TWO
DIMENSIONAL
CLIPPING
PROJECTION
PLANE
MAPPED
TO
THE
VIEWPORT
ON
THE
DISPLAY
ALL
VALUES
ARE
SPECIFIED
AS
REAL
NUMBERS
WE
CAN
SEE
THAT
THE
ENTIRE
LINE
SEGMENT
AB
APPEARS
ON
THE
DISPLAY
WHEREAS
NONE
OF
CD
APPEARS
EF
AND
GH
HAVE
TO
BE
SHORTENED
BEFORE
BEING
DISPLAYED
ALTHOUGH
A
LINE
SEGMENT
IS
COMPLETELY
DETERMINED
BY
ITS
ENDPOINTS
GH
SHOWS
THAT
EVEN
IF
BOTH
ENDPOINTS
LIE
OUTSIDE
THE
CLIPPING
WINDOW
PART
OF
THE
LINE
SEGMENT
MAY
STILL
APPEAR
ON
THE
DISPLAY
WE
COULD
COMPUTE
THE
INTERSECTIONS
OF
THE
LINES
OF
WHICH
THE
SEGMENTS
ARE
PARTS
WITH
THE
SIDES
OF
THE
WINDOW
AND
COULD
THUS
DETERMINE
THE
NECESSARY
INFORMATION
FOR
CLIPPING
HOWEVER
WE
WANT
TO
AVOID
INTERSECTION
CALCULATIONS
IF
POSSIBLE
BECAUSE
EACH
INTERSECTION
REQUIRES
A
FLOATING
POINT
DIVISION
THE
COHEN
SUTHERLAND
ALGORITHM
WAS
THE
FIRST
TO
SEEK
TO
REPLACE
MOST
OF
THE
EXPENSIVE
FLOATING
POINT
MULTIPLICATIONS
AND
DIVISIONS
WITH
A
COMBINATION
OF
FLOATING
POINT
SUBTRACTIONS
AND
BIT
OPERATIONS
THE
ALGORITHM
STARTS
BY
EXTENDING
THE
SIDES
OF
THE
WINDOW
TO
INFINITY
THUS
BREAK
X
XMIN
X
XMAX
Y
YMAX
Y
YMIN
ING
UP
SPACE
INTO
THE
NINE
REGIONS
SHOWN
IN
FIGURE
EACH
REGION
CAN
BE
ASSIGNED
A
UNIQUE
BIT
BINARY
NUMBER
OR
OUTCODE
AS
FOLLOWS
SUPPOSE
THAT
X
Y
IS
A
POINT
IN
THE
REGION
THEN
FIGURE
BREAKING
UP
OF
SPACE
AND
OUTCODES
B
IF
Y
YMAX
OTHERWISE
LIKEWISE
IF
Y
YMIN
AND
AND
ARE
DETERMINED
BY
THE
RELATIONSHIP
BETWEEN
X
AND
THE
LEFT
AND
RIGHT
SIDES
OF
THE
WINDOW
THE
RESULTING
CODES
ARE
INDICATED
IN
FIGURE
FOR
EACH
ENDPOINT
OF
A
LINE
SEGMENT
WE
FIRST
COMPUTE
THE
ENDPOINT
OUTCODE
A
STEP
THAT
CAN
REQUIRE
EIGHT
FLOATING
POINT
SUBTRACTIONS
PER
LINE
SEGMENT
CONSIDER
A
LINE
SEGMENT
WHOSE
OUTCODES
ARE
GIVEN
BY
OUTCODE
AND
OUTCODE
WE
CAN
NOW
REASON
ON
THE
BASIS
OF
THESE
OUTCODES
THERE
ARE
FOUR
CASES
BOTH
ENDPOINTS
ARE
INSIDE
THE
CLIPPING
WINDOW
AS
IS
TRUE
FOR
SEGMENT
AB
IN
FIGURE
THE
ENTIRE
LINE
SEGMENT
IS
INSIDE
AND
THE
SEGMENT
CAN
BE
SENT
ON
TO
BE
RASTERIZED
OR
VICE
VERSA
ONE
ENDPOINT
IS
INSIDE
THE
CLIPPING
WINDOW
ONE
IS
OUTSIDE
SEE
SEGMENT
CD
IN
FIGURE
THE
LINE
SEGMENT
MUST
BE
SHORTENED
THE
NONZERO
OUTCODE
INDICATES
WHICH
EDGE
OR
EDGES
OF
THE
WINDOW
ARE
CROSSED
BY
THE
SEGMENT
ONE
OR
TWO
INTERSECTIONS
MUST
BE
COMPUTED
NOTE
THAT
AFTER
ONE
INTERSECTION
IS
COMPUTED
WE
CAN
COMPUTE
THE
OUTCODE
OF
THE
H
J
G
B
D
F
I
A
C
E
FIGURE
CASES
OF
OUTCODES
IN
COHEN
SUTHERLAND
ALGORITHM
POINT
OF
INTERSECTION
TO
DETERMINE
WHETHER
ANOTHER
INTERSECTION
CALCULATION
IS
REQUIRED
BY
TAKING
THE
BITWISE
AND
OF
THE
OUTCODES
WE
DETERMINE
WHETHER
OR
NOT
THE
TWO
ENDPOINTS
LIE
ON
THE
SAME
OUTSIDE
SIDE
OF
THE
WINDOW
IF
SO
THE
LINE
SEGMENT
CAN
BE
DISCARDED
SEE
SEGMENT
EF
IN
FIGURE
BOTH
ENDPOINTS
ARE
OUTSIDE
BUT
THEY
ARE
ON
THE
OUTSIDE
OF
DIFFERENT
EDGES
OF
THE
WINDOW
AS
WE
CAN
SEE
FROM
SEGMENTS
GH
AND
IJ
IN
FIGURE
WE
CANNOT
TELL
FROM
JUST
THE
OUTCODES
WHETHER
THE
SEGMENT
CAN
BE
DISCARDED
OR
MUST
BE
SHORTENED
THE
BEST
WE
CAN
DO
IS
TO
INTERSECT
WITH
ONE
OF
THE
SIDES
OF
THE
WINDOW
AND
TO
CHECK
THE
OUTCODE
OF
THE
RESULTING
POINT
ALL
OUR
CHECKING
OF
OUTCODES
REQUIRES
ONLY
BOOLEAN
OPERATIONS
WE
DO
INTERSECTION
CALCULATIONS
ONLY
WHEN
THEY
ARE
NEEDED
AS
IN
THE
SECOND
CASE
OR
WHERE
THE
OUTCODES
DID
NOT
CONTAIN
ENOUGH
INFORMATION
AS
IN
THE
FOURTH
CASE
THE
COHEN
SUTHERLAND
ALGORITHM
WORKS
BEST
WHEN
THERE
ARE
MANY
LINE
SEGMENTS
BUT
FEW
ARE
ACTUALLY
DISPLAYED
IN
THIS
CASE
MOST
OF
THE
LINE
SEGMENTS
LIE
FULLY
OUTSIDE
ONE
OR
TWO
OF
THE
EXTENDED
SIDES
OF
THE
CLIPPING
RECTANGLE
AND
CAN
THUS
BE
ELIMINATED
ON
THE
BASIS
OF
THEIR
OUTCODES
THE
OTHER
ADVANTAGE
IS
THAT
THIS
ALGORITHM
CAN
BE
EXTENDED
TO
THREE
DIMENSIONS
THE
MAIN
DISADVANTAGE
OF
THE
ALGORITHM
IS
THAT
IT
MUST
BE
USED
RECURSIVELY
CONSIDER
LINE
SEGMENT
GH
IN
FIGURE
IT
MUST
BE
CLIPPED
AGAINST
BOTH
THE
LEFT
AND
TOP
SIDES
OF
THE
CLIPPING
WINDOW
GENERALLY
THE
SIMPLEST
WAY
TO
DO
SO
IS
TO
USE
THE
INITIAL
OUTCODES
TO
DETERMINE
THE
FIRST
SIDE
OF
THE
CLIPPING
WINDOW
TO
CLIP
AGAINST
AFTER
THIS
FIRST
SHORTENING
OF
THE
ORIGINAL
LINE
SEGMENT
A
NEW
OUTCODE
IS
COMPUTED
FOR
THE
NEW
ENDPOINT
CREATED
BY
SHORTENING
AND
THE
ALGORITHM
IS
REEXECUTED
WE
HAVE
NOT
DISCUSSED
HOW
TO
COMPUTE
ANY
REQUIRED
INTERSECTIONS
THE
FORM
THIS
CALCULATION
TAKES
DEPENDS
ON
HOW
WE
CHOOSE
TO
REPRESENT
THE
LINE
SEGMENT
ALTHOUGH
ONLY
A
SINGLE
DIVISION
SHOULD
BE
REQUIRED
IN
ANY
CASE
IF
WE
USE
THE
STANDARD
EXPLICIT
FORM
OF
A
LINE
Y
MX
H
WHERE
M
IS
THE
SLOPE
OF
THE
LINE
AND
H
IS
THE
LINE
Y
INTERCEPT
THEN
WE
CAN
COMPUTE
M
AND
H
FROM
THE
ENDPOINTS
HOWEVER
VERTICAL
LINES
CANNOT
BE
REPRESENTED
IN
THIS
FORM
A
CRITICAL
WEAKNESS
OF
THE
EXPLICIT
FORM
IF
WE
WERE
INTERESTED
IN
ONLY
THE
COHEN
SUTHERLAND
ALGORITHM
IT
WOULD
BE
FAIRLY
SIMPLE
TO
PROGRAM
ALL
CASES
DIRECTLY
BECAUSE
THE
SIDES
OF
THE
CLIPPING
RECTANGLE
ARE
PARALLEL
TO
THE
AXES
HOWEVER
WE
ARE
INTERESTED
IN
MORE
THAN
JUST
CLIPPING
CONSEQUENTLY
OTHER
REPRESENTATIONS
OF
THE
LINE
AND
LINE
SEGMENT
ARE
OF
IMPORTANCE
IN
PARTICULAR
PARAMETRIC
REPRESENTATIONS
ARE
ALMOST
ALWAYS
USED
IN
COMPUTER
GRAPHICS
WE
HAVE
ALREADY
SEEN
THE
PARAMETRIC
FORM
OF
THE
LINE
IN
CHAPTER
THE
PARAMETRIC
REPRESENTATION
OF
OTHER
TYPES
OF
CURVES
IS
CONSIDERED
IN
CHAPTER
LIANG
BARSKY
CLIPPING
IF
WE
USE
THE
PARAMETRIC
FORM
FOR
LINES
WE
CAN
APPROACH
THE
CLIPPING
OF
LINE
SEGMENTS
IN
A
DIFFERENT
AND
ULTIMATELY
MORE
EFFICIENT
MANNER
SUPPOSE
THAT
WE
HAVE
A
LINE
SEGMENT
DEFINED
BY
THE
TWO
ENDPOINTS
T
AND
T
WE
CAN
USE
THESE
ENDPOINTS
TO
DEFINE
A
UNIQUE
LINE
THAT
WE
CAN
EXPRESS
PARAMETRICALLY
EITHER
IN
MATRIX
FORM
P
Α
Α
OR
AS
TWO
SCALAR
EQUATIONS
X
Α
Α
Y
Α
Α
NOTE
THAT
THIS
FORM
IS
ROBUST
AND
NEEDS
NO
CHANGES
FOR
HORIZONTAL
OR
VERTICAL
LINES
AS
THE
PARAMETER
Α
VARIES
FROM
TO
WE
MOVE
ALONG
THE
SEGMENT
FROM
TO
NEGATIVE
VALUES
OF
Α
YIELD
POINTS
ON
THE
LINE
ON
THE
OTHER
SIDE
OF
FROM
SIMILARLY
VALUES
OF
Α
GIVE
POINTS
ON
THE
LINE
PAST
GOING
OFF
TO
INFINITY
CONSIDER
A
LINE
SEGMENT
AND
THE
LINE
OF
WHICH
IT
IS
PART
AS
SHOWN
IN
FIGURE
A
AS
LONG
AS
THE
LINE
IS
NOT
PARALLEL
TO
A
SIDE
OF
THE
WINDOW
IF
IT
IS
WE
CAN
HANDLE
THAT
SITUATION
WITH
EASE
THERE
ARE
FOUR
POINTS
WHERE
THE
LINE
INTERSECTS
THE
EXTENDED
SIDES
OF
THE
WINDOW
THESE
POINTS
CORRESPOND
TO
THE
FOUR
VALUES
OF
THE
PARAMETER
AND
ONE
OF
THESE
VALUES
CORRESPONDS
TO
THE
LINE
ENTERING
THE
WINDOW
ANOTHER
CORRESPONDS
TO
THE
LINE
LEAVING
THE
WINDOW
LEAVING
ASIDE
FOR
THE
MOMENT
HOW
WE
A
B
FIGURE
TWO
CASES
OF
A
PARAMETRIC
LINE
AND
A
CLIPPING
WINDOW
COMPUTE
THESE
INTERSECTIONS
WE
CAN
ORDER
THEM
AND
DETERMINE
WHICH
CORRESPOND
TO
INTERSECTIONS
THAT
WE
NEED
FOR
CLIPPING
FOR
THE
GIVEN
EXAMPLE
HENCE
ALL
FOUR
INTERSECTIONS
ARE
INSIDE
THE
ORIGINAL
LINE
SEGMENT
WITH
THE
TWO
IN
NERMOST
AND
DETERMINING
THE
CLIPPED
LINE
SEGMENT
WE
CAN
DISTINGUISH
THIS
CASE
FROM
THE
CASE
IN
FIGURE
B
WHICH
ALSO
HAS
THE
FOUR
INTERSECTIONS
BETWEEN
THE
ENDPOINTS
OF
THE
LINE
SEGMENT
BY
NOTING
THAT
THE
ORDER
FOR
THIS
CASE
IS
THE
LINE
INTERSECTS
BOTH
THE
TOP
AND
THE
BOTTOM
OF
THE
WINDOW
BEFORE
IT
INTERSECTS
EITHER
THE
LEFT
OR
THE
RIGHT
THUS
THE
ENTIRE
LINE
SEGMENT
MUST
BE
REJECTED
OTHER
CASES
OF
THE
ORDERING
OF
THE
POINTS
OF
INTERSECTION
CAN
BE
ARGUED
IN
A
SIMILAR
WAY
EFFICIENT
IMPLEMENTATION
OF
THIS
STRATEGY
REQUIRES
THAT
WE
AVOID
COMPUTING
INTER
SECTIONS
UNTIL
THEY
ARE
NEEDED
MANY
LINES
CAN
BE
REJECTED
BEFORE
ALL
FOUR
INTERSECTIONS
ARE
KNOWN
WE
ALSO
WANT
TO
AVOID
FLOATING
POINT
DIVISIONS
WHERE
POSSIBLE
IF
WE
USE
THE
PARAMETRIC
FORM
TO
DETERMINE
THE
INTERSECTION
WITH
THE
TOP
OF
THE
WINDOW
WE
FIND
THE
INTERSECTION
AT
THE
VALUE
Α
YMAX
SIMILAR
EQUATIONS
HOLD
FOR
THE
OTHER
THREE
SIDES
OF
THE
WINDOW
RATHER
THAN
COM
PUTING
THESE
INTERSECTIONS
AT
THE
COST
OF
A
DIVISION
FOR
EACH
WE
INSTEAD
WRITE
THE
EQUATION
AS
Α
YMAX
ALL
THE
TESTS
REQUIRED
BY
THE
ALGORITHM
CAN
BE
RESTATED
IN
TERMS
OF
AND
SIMILAR
TERMS
CAN
BE
COMPUTED
FOR
THE
OTHER
SIDES
OF
THE
WINDOWS
THUS
ALL
DECISIONS
ABOUT
CLIPPING
CAN
BE
MADE
WITHOUT
FLOATING
POINT
DIVISION
ONLY
IF
AN
INTERSECTION
IS
NEEDED
BECAUSE
A
SEGMENT
HAS
TO
BE
SHORTENED
IS
THE
DIVISION
DONE
THE
EFFICIENCY
OF
THIS
APPROACH
COMPARED
TO
THAT
OF
THE
COHEN
SUTHERLAND
ALGORITHM
IS
THAT
WE
AVOID
MULTIPLE
SHORTENING
OF
LINE
SEGMENTS
AND
THE
RELATED
REEXECUTIONS
OF
THE
CLIPPING
ALGORITHM
WE
FORGO
DISCUSSION
OF
OTHER
EFFICIENT
TWO
DIMENSIONAL
LINE
CLIPPING
AL
GORITHMS
BECAUSE
UNLIKE
THE
COHEN
SUTHERLAND
AND
LIANG
BARSKY
ALGORITHMS
THESE
ALGORITHMS
DO
NOT
EXTEND
TO
THREE
DIMENSIONS
FIGURE
POLYGON
CLIPPING
IN
SHADOW
GENERATION
POLYGON
CLIPPING
POLYGON
CLIPPING
ARISES
IN
A
NUMBER
OF
WAYS
CERTAINLY
WE
WANT
TO
BE
ABLE
TO
CLIP
POLYGONS
AGAINST
RECTANGULAR
WINDOWS
FOR
DISPLAY
HOWEVER
WE
MAY
AT
TIMES
WANT
WINDOWS
THAT
ARE
NOT
RECTANGULAR
OTHER
PARTS
OF
AN
IMPLEMENTATION
SUCH
AS
SHADOW
GENERATION
AND
HIDDEN
SURFACE
REMOVAL
CAN
REQUIRE
CLIPPING
OF
POLYGONS
AGAINST
OTHER
POLYGONS
FOR
EXAMPLE
FIGURE
SHOWS
THE
SHADOW
OF
A
POLYGON
THAT
WE
CREATE
BY
CLIPPING
A
POLYGON
THAT
IS
CLOSER
TO
THE
LIGHT
SOURCE
AGAINST
POLYGONS
THAT
ARE
FARTHER
AWAY
MANY
ANTIALIASING
METHODS
RELY
ON
OUR
ABILITY
TO
CLIP
POLYGONS
AGAINST
OTHER
POLYGONS
WE
CAN
GENERATE
POLYGON
CLIPPING
ALGORITHMS
DIRECTLY
FROM
LINE
CLIPPING
ALGO
RITHMS
BY
CLIPPING
THE
EDGES
OF
THE
POLYGON
SUCCESSIVELY
HOWEVER
WE
MUST
BE
CAREFUL
TO
REMEMBER
THAT
A
POLYGON
IS
A
TWO
DIMENSIONAL
OBJECT
WITH
AN
INTERIOR
AND
DE
PENDING
ON
THE
FORM
OF
THE
POLYGON
WE
CAN
GENERATE
MORE
THAN
ONE
POLYGONAL
OBJECT
BY
CLIPPING
CONSIDER
THE
NONCONVEX
OR
CONCAVE
POLYGON
IN
FIGURE
A
IF
WE
CLIP
IT
AGAINST
A
RECTANGULAR
WINDOW
WE
GET
THE
RESULT
SHOWN
IN
FIGURE
B
MOST
VIEWERS
LOOKING
AT
THIS
FIGURE
WOULD
CONCLUDE
THAT
WE
HAVE
GENERATED
THREE
POLYGONS
BY
CLIPPING
UNFORTUNATELY
IMPLEMENTING
A
CLIPPER
THAT
CAN
INCREASE
THE
NUMBER
OF
OBJECTS
CAN
BE
A
PROBLEM
WE
COULD
TREAT
THE
RESULT
OF
THE
CLIPPER
AS
A
SINGLE
POLYGON
AS
SHOWN
IN
FIGURE
WITH
EDGES
THAT
OVERLAP
ALONG
THE
SIDES
OF
THE
WINDOW
BUT
THIS
CHOICE
MIGHT
CAUSE
DIFFICULTIES
IN
OTHER
PARTS
OF
THE
IMPLEMENTATION
CONVEX
POLYGONS
DO
NOT
PRESENT
SUCH
PROBLEMS
CLIPPING
A
CONVEX
POLYGON
AGAINST
A
RECTANGULAR
WINDOW
CAN
LEAVE
AT
MOST
A
SINGLE
CONVEX
POLYGON
SEE
EXER
CISE
A
GRAPHICS
SYSTEM
MIGHT
THEN
EITHER
FORBID
THE
USE
OF
CONCAVE
POLYGONS
OR
DIVIDE
TESSELLATE
A
GIVEN
POLYGON
INTO
A
SET
OF
CONVEX
POLYGONS
AS
SHOWN
IN
FIG
URE
OPENGL
INCLUDES
TESSELLATION
FUNCTIONS
FOR
RECTANGULAR
CLIPPING
REGIONS
BOTH
THE
COHEN
SUTHERLAND
AND
THE
LIANG
BARSKY
ALGORITHMS
CAN
BE
APPLIED
TO
POLYGONS
ON
AN
EDGE
BY
EDGE
BASIS
THERE
IS
ANOTHER
APPROACH
DEVELOPED
BY
SUTHERLAND
AND
HODGEMAN
THAT
FITS
WELL
WITH
THE
PIPELINE
ARCHITECTURES
THAT
WE
HAVE
DISCUSSED
A
LINE
SEGMENT
CLIPPER
CAN
BE
ENVISIONED
AS
A
BLACK
BOX
WHOSE
INPUT
IS
THE
PAIR
OF
VERTICES
FROM
THE
SEGMENT
TO
BE
TESTED
AND
CLIPPED
AND
WHOSE
OUTPUT
EITHER
IS
A
PAIR
OF
VERTICES
CORRESPONDING
TO
THE
CLIPPED
LINE
SEGMENT
OR
IS
NOTHING
IF
THE
INPUT
LINE
SEGMENT
LIES
OUTSIDE
THE
WINDOW
FIGURE
RATHER
THAN
CONSIDERING
THE
CLIPPING
WINDOW
AS
FOUR
LINE
SEGMENTS
WE
CAN
CON
SIDER
IT
AS
THE
OBJECT
CREATED
BY
THE
INTERSECTION
OF
FOUR
INFINITE
LINES
THAT
DETERMINE
THE
TOP
BOTTOM
RIGHT
AND
LEFT
SIDES
OF
THE
WINDOW
WE
CAN
THEN
SUBDIVIDE
OUR
CLIP
PER
INTO
A
PIPELINE
OF
SIMPLER
CLIPPERS
EACH
OF
WHICH
CLIPS
AGAINST
A
SINGLE
LINE
THAT
IS
THE
EXTENSION
OF
AN
EDGE
OF
THE
WINDOW
WE
CAN
USE
THE
BLACK
BOX
VIEW
ON
EACH
OF
THE
INDIVIDUAL
CLIPPERS
A
B
FIGURE
CLIPPING
OF
A
CONCAVE
POLYGON
A
BEFORE
CLIPPING
B
AFTER
CLIPPING
FIGURE
CREATION
OF
A
SINGLE
POLYGON
FIGURE
TESSELLATION
OF
A
CONCAVE
POLYGON
A
B
FIGURE
TWO
VIEWS
OF
CLIPPING
A
CLIPPING
AGAINST
A
RECTANGLE
B
CLIPPER
AS
A
BLACK
BOX
XI
YMAX
YMAX
A
B
FIGURE
CLIPPING
AGAINST
TOP
A
GRAPHICALLY
B
BLACK
BOX
VIEW
SUPPOSE
THAT
WE
CONSIDER
CLIPPING
AGAINST
ONLY
THE
TOP
OF
THE
WINDOW
WE
CAN
THINK
OF
THIS
OPERATION
AS
A
BLACK
BOX
WHOSE
INPUT
AND
OUTPUT
ARE
PAIRS
OF
VERTICES
WITH
THE
VALUE
OF
YMAX
AS
A
PARAMETER
KNOWN
TO
THE
CLIPPER
FIGURE
USING
THE
SIMILAR
TRIANGLES
IN
FIGURE
WE
SEE
THAT
IF
THERE
IS
AN
INTERSECTION
IT
LIES
AT
Y
MAX
FIGURE
INTERSECTION
WITH
THE
TOP
OF
THE
WINDOW
YMAX
THUS
THE
CLIPPER
RETURNS
ONE
OF
THREE
PAIRS
XI
YMAX
OR
XI
YMAX
WE
CAN
CLIP
AGAINST
THE
BOTTOM
RIGHT
AND
LEFT
LINES
INDEPENDENTLY
USING
THE
SAME
EQUATIONS
WITH
THE
ROLES
OF
X
AND
Y
EXCHANGED
AS
NEC
ESSARY
AND
THE
VALUES
FOR
THE
SIDES
OF
THE
WINDOW
INSERTED
THE
FOUR
CLIPPERS
CAN
NOW
BE
ARRANGED
IN
THE
PIPELINE
OF
FIGURE
IF
WE
BUILD
THIS
CONFIGURATION
IN
HARDWARE
WE
HAVE
A
CLIPPER
THAT
IS
WORKING
ON
FOUR
VERTICES
CONCURRENTLY
FIGURE
SHOWS
A
SIMPLE
EXAMPLE
OF
THE
EFFECT
OF
SUCCESSIVE
CLIPPERS
ON
A
POLYGON
A
Y4
B
FIGURE
PIPELINE
CLIPPING
A
CLIPPING
PROBLEM
B
PIPELINE
CLIPPERS
FIGURE
EXAMPLE
OF
PIPELINE
CLIPPING
CLIPPING
OF
OTHER
PRIMITIVES
OUR
EMPHASIS
IN
CHAPTERS
THROUGH
WAS
ON
WRITING
PROGRAMS
IN
WHICH
THE
OBJECTS
ARE
BUILT
FROM
LINE
SEGMENTS
AND
TRIANGLES
WE
OFTEN
RENDER
THE
CURVED
OBJECTS
THAT
WE
DISCUSS
IN
CHAPTER
BY
SUBDIVIDING
THEM
INTO
SMALL
APPROXIMATELY
FLAT
POLY
GONS
IN
PIPELINE
ARCHITECTURES
WE
USUALLY
FIND
SOME
VARIANT
OF
THE
CLIPPERS
THAT
WE
HAVE
PRESENTED
NEVERTHELESS
THERE
ARE
SITUATIONS
IN
WHICH
WE
WANT
EITHER
TO
CLIP
OB
JECTS
BEFORE
THEY
REACH
THE
HARDWARE
OR
TO
EMPLOY
ALGORITHMS
OPTIMIZED
FOR
OTHER
PRIMITIVES
A
B
FIGURE
USING
BOUNDING
BOXES
A
POLYGON
AND
CLIPPING
WINDOW
B
POLYGON
BOUNDING
BOX
AND
CLIPPING
WINDOW
FIGURE
CLIPPING
WITH
BOUNDING
BOXES
BOUNDING
BOXES
AND
VOLUMES
SUPPOSE
THAT
WE
HAVE
A
MANY
SIDED
POLYGON
AS
SHOWN
IN
FIGURE
A
WE
COULD
APPLY
ONE
OF
OUR
CLIPPING
ALGORITHMS
WHICH
WOULD
CLIP
THE
POLYGON
BY
INDIVIDUALLY
CLIPPING
ALL
THAT
POLYGON
EDGES
HOWEVER
WE
CAN
SEE
THAT
THE
ENTIRE
POLYGON
LIES
OUTSIDE
THE
CLIPPING
WINDOW
WE
CAN
EXPLOIT
THIS
OBSERVATION
THROUGH
THE
USE
OF
THE
AXIS
ALIGNED
BOUNDING
BOX
OR
THE
EXTENT
OF
THE
POLYGON
FIGURE
B
THE
SMALLEST
RECTANGLE
ALIGNED
WITH
THE
WINDOW
THAT
CONTAINS
THE
POLYGON
CALCULATING
THE
BOUNDING
BOX
REQUIRES
MERELY
GOING
THROUGH
THE
VERTICES
OF
THE
POLYGON
TO
FIND
THE
MINIMUM
AND
MAXIMUM
OF
BOTH
THE
X
AND
Y
VALUES
ONCE
WE
HAVE
THE
BOUNDING
BOX
WE
CAN
OFTEN
AVOID
DETAILED
CLIPPING
CONSIDER
THE
THREE
CASES
IN
FIGURE
FOR
THE
POLYGON
ABOVE
THE
WINDOW
NO
CLIPPING
IS
NECESSARY
BECAUSE
THE
MINIMUM
Y
FOR
THE
BOUNDING
BOX
IS
ABOVE
THE
TOP
OF
THE
WINDOW
FOR
THE
POLYGON
INSIDE
THE
WINDOW
WE
CAN
DETERMINE
THAT
IT
IS
INSIDE
BY
COMPARING
THE
BOUNDING
BOX
WITH
THE
WINDOW
ONLY
WHEN
WE
DISCOVER
THAT
THE
BOUNDING
BOX
STRADDLES
THE
WINDOW
DO
WE
HAVE
TO
CARRY
OUT
DETAILED
CLIPPING
USING
ALL
THE
EDGES
OF
THE
POLYGON
THE
USE
OF
EXTENTS
IS
SUCH
A
POWERFUL
TECHNIQUE
IN
BOTH
TWO
AND
THREE
DIMENSIONS
THAT
MODELING
SYSTEMS
OFTEN
COMPUTE
A
BOUNDING
BOX
FOR
EACH
OBJECT
AUTOMATICALLY
AND
STORE
THE
BOUNDING
BOX
WITH
THE
OBJECT
AXIS
ALIGNED
BOUNDING
BOXES
WORK
IN
BOTH
TWO
AND
THREE
DIMENSIONS
IN
THREE
DIMENSIONS
THEY
CAN
BE
USED
IN
THE
APPLICATION
TO
PERFORM
CLIPPING
TO
REDUCE
THE
BURDEN
ON
THE
PIPELINE
OTHER
VOLUMES
SUCH
AS
SPHERES
CAN
ALSO
WORK
WELL
ONE
OF
THE
OTHER
APPLICATIONS
OF
BOUNDING
VOLUMES
IS
IN
COLLISION
DETECTION
CHAPTER
ONE
OF
THE
FUNDAMENTAL
OPERATIONS
IN
ANIMATING
COMPUTER
GAMES
IS
TO
DETERMINE
IF
TWO
MOVING
ENTITIES
HAVE
COLLIDED
FOR
EXAMPLE
CONSIDER
TWO
ANIMATED
CHARACTERS
MOVING
IN
A
SEQUENCE
OF
IMAGES
WE
NEED
TO
KNOW
WHEN
THEY
COLLIDE
SO
THAT
WE
CAN
ALTER
THEIR
PATHS
THIS
PROBLEM
HAS
MANY
SIMILARITIES
TO
THE
CLIPPING
PROBLEM
BECAUSE
WE
WANT
TO
DETERMINE
WHEN
THE
VOLUME
OF
ONE
INTERSECTS
THE
VOLUME
OF
THE
OTHER
THE
COMPLEXITY
OF
THE
OBJECTS
AND
THE
NEED
TO
DO
THESE
CALCULATIONS
VERY
QUICKLY
MAKE
THIS
PROBLEM
DIFFICULT
A
COMMON
APPROACH
IS
TO
PLACE
EACH
OBJECT
IN
A
BOUNDING
VOLUME
EITHER
AN
AXIS
ALIGNED
BOUNDING
BOX
OR
A
SPHERE
AND
TO
DETERMINE
IF
THE
VOLUMES
INTERSECT
IF
THEY
DO
THEN
DETAILED
CALCULATIONS
CAN
BE
DONE
A
B
FIGURE
CURVE
CLIPPING
CURVES
SURFACES
AND
TEXT
THE
VARIETY
OF
CURVES
AND
SURFACES
THAT
WE
CAN
DEFINE
MATHEMATICALLY
MAKES
IT
DIFFICULT
TO
FIND
GENERAL
ALGORITHMS
FOR
PROCESSING
THESE
OBJECTS
THE
POTENTIAL
DIFFICULTIES
CAN
BE
SEEN
FROM
THE
TWO
DIMENSIONAL
CURVES
IN
FIGURE
FOR
A
SIMPLE
CURVE
SUCH
AS
A
QUADRIC
WE
CAN
COMPUTE
INTERSECTIONS
ALTHOUGH
AT
A
COST
HIGHER
THAN
THAT
FOR
LINES
FOR
MORE
COMPLEX
CURVES
SUCH
AS
THE
SPIRAL
NOT
ONLY
MUST
INTERSECTION
CALCULATIONS
BE
COMPUTED
WITH
NUMERICAL
TECHNIQUES
BUT
EVEN
DETERMINING
HOW
MANY
INTERSECTIONS
WE
MUST
COMPUTE
MAY
BE
DIFFICULT
WE
CAN
AVOID
SUCH
PROBLEMS
BY
APPROXIMATING
CURVES
WITH
LINE
SEGMENTS
AND
SURFACES
WITH
PLANAR
POLYGONS
THE
USE
OF
BOUNDING
BOXES
CAN
ALSO
PROVE
HELPFUL
ESPECIALLY
IN
CASES
SUCH
AS
QUADRATICS
WHERE
WE
CAN
COMPUTE
INTERSECTIONS
EXACTLY
BUT
WOULD
PREFER
TO
MAKE
SURE
THAT
THE
CALCULATION
IS
NECESSARY
BEFORE
CARRYING
IT
OUT
THE
HANDLING
OF
TEXT
DIFFERS
FROM
API
TO
API
WITH
MANY
APIS
ALLOWING
THE
USER
TO
SPECIFY
HOW
DETAILED
A
RENDERING
OF
TEXT
IS
REQUIRED
THERE
ARE
TWO
EXTREMES
ON
ONE
END
TEXT
IS
STORED
AS
BIT
PATTERNS
AND
IS
RENDERED
DIRECTLY
BY
THE
HARDWARE
WITHOUT
ANY
GEOMETRIC
PROCESSING
ANY
REQUIRED
CLIPPING
IS
DONE
IN
THE
FRAME
BUFFER
AT
THE
OTHER
EXTREME
TEXT
IS
DEFINED
LIKE
ANY
OTHER
GEOMETRIC
OBJECT
AND
IS
THEN
PROCESSED
THROUGH
THE
STANDARD
VIEWING
PIPELINE
OPENGL
ALLOWS
BOTH
THESE
CASES
BY
NOT
HAVING
A
SEPARATE
TEXT
PRIMITIVE
THE
USER
CAN
CHOOSE
WHICH
MODE
SHE
PREFERS
BY
DEFINING
EITHER
BITMAPPED
CHARACTERS
USING
PIXEL
OPERATIONS
OR
STROKE
CHARACTERS
USING
THE
STANDARD
PRIMITIVES
CLIPPING
IN
THE
FRAME
BUFFER
WE
MIGHT
ALSO
CONSIDER
DELAYING
CLIPPING
UNTIL
AFTER
OBJECTS
HAVE
BEEN
PROJECTED
AND
CONVERTED
INTO
SCREEN
COORDINATES
CLIPPING
CAN
BE
DONE
IN
THE
FRAME
BUFFER
THROUGH
A
TECHNIQUE
CALLED
SCISSORING
HOWEVER
IT
IS
USUALLY
BETTER
TO
CLIP
GEOMETRIC
ENTITIES
BEFORE
THE
VERTICES
REACH
THE
FRAME
BUFFER
THUS
CLIPPING
WITHIN
THE
FRAME
BUFFER
GENERALLY
IS
REQUIRED
ONLY
FOR
RASTER
OBJECTS
SUCH
AS
BLOCKS
OF
PIXELS
CLIPPING
IN
THREE
DIMENSIONS
IN
THREE
DIMENSIONS
WE
CLIP
AGAINST
A
BOUNDED
VOLUME
RATHER
THAN
AGAINST
A
BOUNDED
REGION
IN
THE
PLANE
THE
SIMPLEST
EXTENSION
OF
TWO
DIMENSIONAL
CLIPPING
TO
THREE
XMAX
YMAX
ZMAX
Z
FIGURE
THREE
DIMENSIONAL
CLIPPING
AGAINST
A
RIGHT
PARALLELEPIPED
DIMENSIONS
IS
FOR
THE
RIGHT
PARALLELEPIPED
CLIPPING
REGION
FIGURE
XMIN
X
XMAX
YMIN
Y
YMAX
ZMIN
Z
ZMAX
OR
IN
CLIP
SPACE
W
X
W
W
Y
W
W
Z
W
OUR
THREE
CLIPPING
ALGORITHMS
COHEN
SUTHERLAND
LIANG
BARSKY
AND
SUTHERLAND
HODGEMAN
AND
THE
USE
OF
EXTENTS
CAN
BE
EXTENDED
TO
THREE
DIMENSIONS
FOR
THE
COHEN
SUTHERLAND
ALGORITHM
WE
REPLACE
THE
BIT
OUTCODE
WITH
A
BIT
OUT
CODE
THE
ADDITIONAL
BITS
ARE
SET
IF
THE
POINT
LIES
EITHER
IN
FRONT
OF
OR
BEHIND
THE
CLIPPING
VOLUME
FIGURE
THE
TESTING
STRATEGY
IS
VIRTUALLY
IDENTICAL
FOR
THE
TWO
AND
THREE
DIMENSIONAL
CASES
FOR
THE
LIANG
BARSKY
ALGORITHM
WE
ADD
THE
EQUATION
Z
Α
Α
TO
OBTAIN
A
THREE
DIMENSIONAL
PARAMETRIC
REPRESENTATION
OF
THE
LINE
SEGMENT
WE
HAVE
TO
CONSIDER
SIX
INTERSECTIONS
WITH
THE
SURFACES
THAT
FORM
THE
CLIPPING
VOLUME
BUT
WE
CAN
USE
THE
SAME
LOGIC
AS
WE
DID
IN
THE
TWO
DIMENSIONAL
CASE
PIPELINE
CLIPPERS
ADD
TWO
MODULES
TO
CLIP
AGAINST
THE
FRONT
AND
BACK
OF
THE
CLIPPING
VOLUME
THE
MAJOR
DIFFERENCE
BETWEEN
TWO
AND
THREE
DIMENSIONAL
CLIPPERS
IS
THAT
IN
THREE
DIMENSIONS
WE
ARE
CLIPPING
EITHER
LINES
AGAINST
PLANES
OR
POLYGONS
AGAINST
FIGURE
COHEN
SUTHERLAND
REGIONS
IN
THREE
DIMENSIONS
PLANES
INSTEAD
OF
CLIPPING
LINES
AGAINST
LINES
AS
WE
DO
IN
TWO
DIMENSIONS
CONSE
QUENTLY
OUR
INTERSECTION
CALCULATIONS
MUST
BE
CHANGED
A
TYPICAL
INTERSECTION
CALCU
LATION
CAN
BE
POSED
IN
TERMS
OF
A
PARAMETRIC
LINE
IN
THREE
DIMENSIONS
INTERSECTING
A
PLANE
FIGURE
IF
WE
WRITE
THE
LINE
AND
PLANE
EQUATIONS
IN
MATRIX
FORM
WHERE
N
IS
THE
NORMAL
TO
THE
PLANE
AND
IS
A
POINT
ON
THE
PLANE
WE
MUST
SOLVE
THE
EQUATIONS
N
P
Α
Α
P
P
N
P
Α
FOR
THE
Α
CORRESPONDING
TO
THE
POINT
OF
INTERSECTION
THIS
VALUE
IS
Α
N
N
AND
COMPUTATION
OF
AN
INTERSECTION
REQUIRES
SIX
MULTIPLICATIONS
AND
A
DIVISION
HOW
EVER
IF
WE
LOOK
AT
THE
STANDARD
VIEWING
VOLUMES
WE
SEE
THAT
SIMPLIFICATIONS
ARE
POSSIBLE
FOR
ORTHOGRAPHIC
VIEWING
FIGURE
THE
VIEW
VOLUME
IS
A
RIGHT
PARAL
LELEPIPED
AND
EACH
INTERSECTION
CALCULATION
REDUCES
TO
A
SINGLE
DIVISION
AS
IT
DID
FOR
TWO
DIMENSIONAL
CLIPPING
WHEN
WE
CONSIDER
AN
OBLIQUE
VIEW
FIGURE
WE
SEE
THAT
THE
CLIPPING
VOLUME
NO
LONGER
IS
A
RIGHT
PARALLELEPIPED
ALTHOUGH
YOU
MIGHT
THINK
THAT
WE
HAVE
TO
COMPUTE
DOT
PRODUCTS
TO
CLIP
AGAINST
THE
SIDES
OF
THE
VOLUME
HERE
IS
WHERE
THE
NORMALIZATION
PROCESS
THAT
WE
INTRODUCED
IN
CHAPTER
PAYS
DIVIDENDS
WE
SHOWED
THAT
AN
OBLIQUE
PROJECTION
IS
EQUIVALENT
TO
A
SHEARING
OF
THE
DATA
FOLLOWED
BY
AN
ORTHOGRAPHIC
PROJEC
TION
ALTHOUGH
THE
SHEAR
TRANSFORMATION
DISTORTS
OBJECTS
THEY
ARE
DISTORTED
SUCH
THAT
THEY
PROJECT
CORRECTLY
BY
AN
ORTHOGRAPHIC
PROJECTION
THE
SHEAR
ALSO
DISTORTS
THE
CLIP
PING
VOLUME
FROM
A
GENERAL
PARALLELEPIPED
TO
A
RIGHT
PARALLELEPIPED
FIGURE
A
SHOWS
A
TOP
VIEW
OF
AN
OBLIQUE
VOLUME
WITH
A
CUBE
INSIDE
THE
VOLUME
FIGURE
B
FIGURE
PLANE
LINE
INTER
SECTION
Y
YMAX
X
XMIN
Y
YMIN
X
XMAX
Z
ZMAX
Z
ZMIN
FIGURE
CLIPPING
FOR
ORTHOGRAPHIC
VIEWING
Z
ZMAX
FIGURE
CLIPPING
FOR
OBLIQUE
VIEWING
PROJECTION
PLANE
PROJECTION
PLANE
DISTORTED
OBJECT
NEW
CLIPPING
VOLUME
A
B
FIGURE
DISTORTION
OF
VIEW
VOLUME
BY
SHEAR
A
TOP
VIEW
BEFORE
SHEAR
B
TOP
VIEW
AFTER
SHEAR
SHOWS
THE
VOLUME
AND
OBJECT
AFTER
THEY
HAVE
BEEN
DISTORTED
BY
THE
SHEAR
AS
FAR
AS
PRO
JECTION
IS
CONCERNED
CARRYING
OUT
THE
OBLIQUE
TRANSFORMATION
DIRECTLY
OR
REPLACING
IT
BY
A
SHEAR
TRANSFORMATION
AND
AN
ORTHOGRAPHIC
PROJECTION
REQUIRES
THE
SAME
AMOUNT
OF
COMPUTATION
WHEN
WE
ADD
IN
CLIPPING
IT
IS
CLEAR
THAT
THE
SECOND
APPROACH
HAS
A
DEFINITE
ADVANTAGE
BECAUSE
WE
CAN
CLIP
AGAINST
A
RIGHT
PARALLELEPIPED
THIS
EXAMPLE
ILLUSTRATES
THE
IMPORTANCE
OF
CONSIDERING
THE
INCREMENTAL
NATURE
OF
THE
STEPS
IN
AN
IM
PLEMENTATION
ANALYSIS
OF
EITHER
PROJECTION
OR
CLIPPING
IN
ISOLATION
FAILS
TO
SHOW
THE
IMPORTANCE
OF
THE
NORMALIZATION
PROCESS
FOR
PERSPECTIVE
PROJECTIONS
THE
ARGUMENT
FOR
NORMALIZATION
IS
JUST
AS
STRONG
BY
CARRYING
OUT
THE
PERSPECTIVE
NORMALIZATION
TRANSFORMATION
FROM
CHAPTER
BUT
NOT
THE
ORTHOGRAPHIC
PROJECTION
WE
AGAIN
CREATE
A
RECTANGULAR
CLIPPING
VOLUME
AND
SIMPLIFY
ALL
SUBSEQUENT
INTERSECTION
CALCULATIONS
RASTERIZATION
WE
ARE
NOW
READY
TO
TAKE
THE
FINAL
STEP
IN
THE
JOURNEY
FROM
THE
SPECIFICATION
OF
GEO
METRIC
ENTITIES
IN
AN
APPLICATION
PROGRAM
TO
THE
FORMATION
OF
FRAGMENTS
RASTERIZATION
OF
PRIMITIVES
IN
THIS
CHAPTER
WE
ARE
CONCERNED
WITH
ONLY
LINE
SEGMENTS
AND
POLYGONS
BOTH
OF
WHICH
ARE
DEFINED
BY
VERTICES
WE
CAN
ASSUME
THAT
WE
HAVE
CLIPPED
THE
PRIM
ITIVES
SUCH
THAT
EACH
REMAINING
PRIMITIVE
IS
INSIDE
THE
VIEW
VOLUME
FRAGMENTS
ARE
POTENTIAL
PIXELS
EACH
FRAGMENT
HAS
A
COLOR
ATTRIBUTE
AND
A
LOCATION
IN
SCREEN
COORDINATES
THAT
CORRESPONDS
TO
A
LOCATION
IN
THE
COLOR
BUFFER
FRAGMENTS
ALSO
CARRY
DEPTH
INFORMATION
THAT
CAN
BE
USED
FOR
HIDDEN
SURFACE
REMOVAL
TO
CLARIFY
THE
DISCUSSION
WE
WILL
IGNORE
HIDDEN
SURFACE
REMOVAL
UNTIL
SECTION
AND
THUS
WE
CAN
WORK
DIRECTLY
IN
SCREEN
COORDINATES
BECAUSE
WE
ARE
NOT
CONSIDERING
HIDDEN
SURFACE
REMOVAL
TRANSLUCENT
FRAGMENTS
OR
ANTIALIASING
WE
CAN
DEVELOP
RASTERIZATION
ALGORITHMS
IN
TERMS
OF
THE
PIXELS
THAT
THEY
COLOR
WE
FURTHER
ASSUME
THAT
THE
COLOR
BUFFER
IS
AN
N
M
ARRAY
OF
PIXELS
WITH
CORRESPONDING
TO
THE
LOWER
LEFT
CORNER
PIXELS
CAN
BE
SET
TO
A
GIVEN
COLOR
BY
A
SINGLE
FUNCTION
INSIDE
THE
GRAPHICS
IMPLEMENTATION
OF
THE
FORM
INT
IX
INT
IY
INT
VALUE
THE
ARGUMENT
VALUE
CAN
BE
EITHER
AN
INDEX
IN
COLOR
INDEX
MODE
OR
A
POINTER
TO
AN
RGBA
COLOR
ON
THE
ONE
HAND
A
COLOR
BUFFER
IS
INHERENTLY
DISCRETE
IT
DOES
NOT
MAKE
SENSE
TO
TALK
ABOUT
PIXELS
LOCATED
AT
PLACES
OTHER
THAN
INTEGER
VALUES
OF
IX
AND
IY
ON
THE
OTHER
HAND
SCREEN
COORDINATES
WHICH
RANGE
OVER
THE
SAME
VALUES
AS
DO
IX
AND
IY
ARE
REAL
NUMBERS
FOR
EXAMPLE
WE
CAN
COMPUTE
A
FRAGMENT
LOCATION
SUCH
AS
IN
SCREEN
COORDINATES
BUT
MUST
REALIZE
THAT
THE
NEAREST
PIXEL
IS
CENTERED
EITHER
AT
OR
AT
DEPENDING
ON
WHETHER
PIXELS
ARE
CONSIDERED
TO
BE
CENTERED
AT
WHOLE
OR
HALF
INTEGER
VALUES
PIXELS
HAVE
ATTRIBUTES
THAT
ARE
COLORS
IN
THE
COLOR
BUFFER
PIXELS
CAN
BE
DISPLAYED
IN
MULTIPLE
SHAPES
AND
SIZES
THAT
DEPEND
ON
THE
CHARACTERISTICS
OF
THE
DISPLAY
WE
ADDRESS
THIS
MATTER
IN
SECTION
FOR
NOW
WE
CAN
ASSUME
THAT
A
PIXEL
IS
DISPLAYED
AS
A
SQUARE
WHOSE
CENTER
IS
AT
THE
LOCATION
ASSOCIATED
WITH
THE
PIXEL
AND
WHOSE
SIDE
IS
EQUAL
TO
THE
DISTANCE
BETWEEN
PIXELS
IN
OPENGL
THE
CENTERS
OF
PIXELS
ARE
LOCATED
AT
VALUES
HALFWAY
BETWEEN
INTEGERS
THERE
ARE
SOME
ADVANTAGES
TO
THIS
CHOICE
SEE
EXERCISE
WE
ALSO
ASSUME
THAT
A
CONCURRENT
PROCESS
READS
THE
CONTENTS
OF
THE
COLOR
BUFFER
AND
CREATES
THE
DISPLAY
AT
THE
REQUIRED
RATE
THIS
ASSUMPTION
WHICH
HOLDS
IN
MANY
SYSTEMS
THAT
HAVE
DUAL
PORTED
MEMORY
ALLOWS
US
TO
TREAT
THE
RASTERIZATION
PROCESS
INDEPENDENTLY
OF
THE
DISPLAY
OF
THE
CONTENTS
OF
THE
FRAME
BUFFER
THE
SIMPLEST
SCAN
CONVERSION
ALGORITHM
FOR
LINE
SEGMENTS
HAS
BECOME
KNOWN
AS
THE
DDA
ALGORITHM
AFTER
THE
DIGITAL
DIFFERENTIAL
ANALYZER
AN
EARLY
ELECTROMECHANICAL
DEVICE
FOR
DIGITAL
SIMULATION
OF
DIFFERENTIAL
EQUATIONS
BECAUSE
A
LINE
SATISFIES
THE
DIFFERENTIAL
EQUATION
DY
DX
M
WHERE
M
IS
THE
SLOPE
GENERATING
A
LINE
SEGMENT
IS
EQUIVALENT
TO
SOLVING
A
SIMPLE
DIFFERENTIAL
EQUATION
NUMERICALLY
SUPPOSE
THAT
WE
HAVE
A
LINE
SEGMENT
DEFINED
BY
THE
ENDPOINTS
AND
BECAUSE
WE
ARE
WORKING
IN
A
COLOR
BUFFER
WE
ASSUME
THAT
THESE
VALUES
HAVE
BEEN
ROUNDED
TO
HAVE
INTEGER
VALUES
SO
THE
LINE
SEGMENT
STARTS
AND
ENDS
AT
A
KNOWN
PIXEL
THE
SLOPE
IS
GIVEN
BY
M
FIGURE
LINE
SEGMENT
IN
WE
ASSUME
THAT
M
WINDOW
COORDINATES
FIGURE
PIXELS
GENER
ATED
BY
DDA
ALGORITHM
WE
CAN
HANDLE
OTHER
VALUES
OF
M
USING
SYMMETRY
OUR
ALGORITHM
IS
BASED
ON
WRITING
A
PIXEL
FOR
EACH
VALUE
OF
IX
IN
AS
X
GOES
FROM
TO
IF
WE
ARE
ON
THE
LINE
SEGMENT
AS
SHOWN
IN
FIGURE
FOR
ANY
CHANGE
IN
X
EQUAL
TO
THE
CORRESPONDING
CHANGES
IN
Y
MUST
BE
AS
WE
MOVE
FROM
TO
WE
INCREASE
X
BY
IN
EACH
ITERATION
THUS
WE
MUST
INCREASE
Y
BY
M
ALTHOUGH
EACH
X
IS
AN
INTEGER
EACH
Y
IS
NOT
BECAUSE
M
IS
A
FLOATING
POINT
NUMBER
AND
WE
MUST
ROUND
IT
TO
FIND
THE
APPROPRIATE
PIXEL
AS
SHOWN
IN
FIGURE
OUR
ALGORITHM
IN
PSEUDOCODE
IS
FOR
IX
IX
IX
Y
M
X
ROUND
Y
FIGURE
PIXELS
GENER
ATED
BY
HIGH
AND
LOW
SLOPE
LINES
WHERE
ROUND
IS
A
FUNCTION
THAT
ROUNDS
A
REAL
NUMBER
TO
AN
INTEGER
THE
REASON
THAT
WE
LIMITED
THE
MAXIMUM
SLOPE
TO
CAN
BE
SEEN
FROM
FIGURE
OUR
ALGORITHM
IS
OF
THIS
FORM
FOR
EACH
X
FIND
THE
BEST
Y
FOR
LARGE
SLOPES
THE
SEPARATION
BETWEEN
PIXELS
THAT
ARE
COLORED
CAN
BE
LARGE
GENERATING
AN
UNACCEPTABLE
APPROXIMATION
TO
THE
LINE
SEGMENT
IF
HOWEVER
FOR
SLOPES
GREATER
THAN
WE
SWAP
THE
ROLES
OF
X
AND
Y
THE
ALGORITHM
BECOMES
THIS
FOR
EACH
Y
FIND
THE
BEST
X
FOR
THE
SAME
LINE
SEGMENTS
WE
GET
THE
APPROXIMATIONS
IN
FIGURE
NOTE
THAT
THE
USE
OF
SYMMETRY
REMOVES
ANY
POTENTIAL
PROBLEMS
FROM
EITHER
VERTICAL
OR
HORIZONTAL
LINE
SEGMENTS
YOU
MAY
WANT
TO
DERIVE
THE
PARTS
OF
THE
ALGORITHM
FOR
NEGATIVE
SLOPES
BECAUSE
LINE
SEGMENTS
ARE
DETERMINED
BY
VERTICES
WE
CAN
USE
INTERPOLATION
TO
ASSIGN
A
DIFFERENT
COLOR
TO
EACH
PIXEL
THAT
WE
GENERATE
WE
CAN
ALSO
GENERATE
VARIOUS
FIGURE
PIXELS
GENER
ATED
BY
REVISED
DDA
ALGO
RITHM
THIS
ASSUMPTION
IS
NOT
NECESSARY
TO
DERIVE
AN
ALGORITHM
IF
WE
USE
A
FIXED
POINT
REPRESENTATION
FOR
THE
ENDPOINTS
AND
DO
OUR
CALCULATIONS
USING
FIXED
POINT
ARITHMETIC
THEN
WE
RETAIN
THE
COMPU
TATIONAL
ADVANTAGES
OF
THE
ALGORITHM
AND
PRODUCE
A
MORE
ACCURATE
RASTERIZATION
DASH
AND
DOT
PATTERNS
BY
CHANGING
THE
COLOR
THAT
WE
USE
AS
WE
GENERATE
PIXELS
NEITHER
OF
THESE
EFFECTS
HAS
MUCH
TO
DO
WITH
THE
BASIC
RASTERIZATION
ALGORITHM
AS
THE
LATTER
JOB
IS
TO
DETERMINE
ONLY
WHICH
PIXELS
TO
COLOR
RATHER
THAN
TO
DETERMINE
THE
COLOR
THAT
IS
USED
BRESENHAM
ALGORITHM
THE
DDA
ALGORITHM
APPEARS
EFFICIENT
CERTAINLY
IT
CAN
BE
CODED
EASILY
BUT
IT
RE
QUIRES
A
FLOATING
POINT
ADDITION
FOR
EACH
PIXEL
GENERATED
BRESENHAM
DERIVED
A
LINE
RASTERIZATION
ALGORITHM
THAT
REMARKABLY
AVOIDS
ALL
FLOATING
POINT
CALCULATIONS
AND
HAS
BECOME
THE
STANDARD
ALGORITHM
USED
IN
HARDWARE
AND
SOFTWARE
RASTERIZERS
WE
ASSUME
AS
WE
DID
WITH
THE
DDA
ALGORITHM
THAT
THE
LINE
SEGMENT
GOES
BETWEEN
THE
INTEGER
POINTS
AND
AND
THAT
THE
SLOPE
SATISFIES
M
THIS
SLOPE
CONDITION
IS
CRUCIAL
FOR
THE
ALGORITHM
AS
WE
CAN
SEE
WITH
THE
AID
OF
FIG
URE
SUPPOSE
THAT
WE
ARE
SOMEWHERE
IN
THE
MIDDLE
OF
THE
SCAN
CONVERSION
OF
OUR
LINE
SEGMENT
AND
HAVE
JUST
PLACED
A
PIXEL
AT
I
J
WE
KNOW
THAT
THE
LINE
OF
WHICH
THE
SEGMENT
IS
PART
CAN
BE
REPRESENTED
AS
Y
MX
H
AT
X
I
THIS
LINE
MUST
PASS
WITHIN
ONE
HALF
THE
LENGTH
OF
THE
PIXEL
AT
I
J
OTHERWISE
THE
ROUNDING
OPERATION
WOULD
NOT
HAVE
GENERATED
THIS
PIXEL
IF
WE
MOVE
AHEAD
TO
X
I
THE
SLOPE
CONDITION
INDICATES
THAT
WE
MUST
SET
THE
COLOR
OF
ONE
OF
ONLY
TWO
POSSIBLE
PIXELS
EITHER
THE
PIXEL
AT
I
J
OR
THE
PIXEL
AT
I
J
HAVING
REDUCED
OUR
CHOICES
TO
TWO
PIXELS
WE
CAN
POSE
THE
PROBLEM
ANEW
IN
TERMS
OF
THE
DECISION
VARIABLE
D
A
B
WHERE
A
AND
B
ARE
THE
DISTANCES
BETWEEN
THE
LINE
AND
THE
UPPER
AND
LOWER
CANDIDATE
PIXELS
AT
X
I
AS
SHOWN
IN
FIGURE
IF
D
IS
POSITIVE
THE
LINE
PASSES
CLOSER
TO
THE
LOWER
PIXEL
SO
WE
CHOOSE
THE
PIXEL
AT
I
J
OTHERWISE
WE
CHOOSE
THE
PIXEL
AT
I
J
ALTHOUGH
WE
COULD
COMPUTE
D
BY
COMPUTING
Y
MX
B
WE
HESITATE
TO
DO
SO
BECAUSE
M
IS
A
FLOATING
POINT
NUMBER
WE
OBTAIN
THE
COMPUTATIONAL
ADVANTAGES
OF
BRESENHAM
ALGORITHM
THROUGH
TWO
FURTHER
STEPS
FIRST
WE
REPLACE
FLOATING
POINT
OPERATIONS
WITH
FIXED
POINT
OPERATIONS
SECOND
WE
APPLY
THE
ALGORITHM
INCREMENTALLY
WE
START
BY
REPLACING
D
WITH
THE
NEW
DECISION
VARIABLE
D
A
B
A
B
WE
ARE
ASSUMING
THAT
THE
PIXELS
CENTERS
ARE
LOCATED
HALFWAY
BETWEEN
INTEGERS
J
J
J
I
I
Y
MX
H
FIGURE
CONDITIONS
FOR
BRESENHAM
ALGORITHM
J
J
J
I
I
Y
MX
H
FIGURE
DECISION
VARIABLE
FOR
BRESENHAM
ALGORITHM
A
CHANGE
THAT
CANNOT
AFFECT
WHICH
PIXELS
ARE
DRAWN
BECAUSE
IT
IS
ONLY
THE
SIGN
OF
THE
DECISION
VARIABLE
THAT
MATTERS
IF
WE
SUBSTITUTE
FOR
A
AND
B
USING
THE
EQUATION
OF
THE
LINE
AND
NOTING
THAT
M
H
THEN
WE
CAN
SEE
THAT
D
IS
AN
INTEGER
WE
HAVE
ELIMINATED
FLOATING
POINT
CALCULATIONS
BUT
THE
DIRECT
COMPUTATION
OF
D
REQUIRES
A
FAIR
AMOUNT
OF
FIXED
POINT
ARITHMETIC
LET
US
TAKE
A
SLIGHTLY
DIFFERENT
APPROACH
SUPPOSE
THAT
DK
IS
THE
VALUE
OF
D
AT
X
K
WE
WOULD
LIKE
TO
COMPUTE
DK
INCREMENTALLY
FROM
DK
THERE
ARE
TWO
SITUATIONS
DEPENDING
ON
WHETHER
OR
NOT
WE
INCREMENTED
THE
Y
LOCATION
OF
THE
PIXEL
AT
THE
PREVIOUS
STEP
THESE
SITUATIONS
ARE
SHOWN
IN
FIGURE
BY
OBSERVING
THAT
A
IS
THE
DISTANCE
BETWEEN
THE
LOCATION
OF
THE
UPPER
CANDIDATE
LOCATION
AND
THE
LINE
WE
SEE
THAT
A
INCREASES
BY
M
ONLY
IF
X
WAS
INCREASED
BY
THE
PREVIOUS
DECISION
OTHERWISE
IT
DECREASES
BY
M
LIKEWISE
B
EITHER
DECREASES
BY
M
OR
INCREASES
BY
M
WHEN
WE
INCREMENT
X
MULTIPLYING
BY
WE
FIND
THAT
THE
POSSIBLE
CHANGES
IN
D
ARE
EITHER
OR
WE
CAN
STATE
THIS
RESULT
IN
THE
FORM
J
J
J
I
I
I
J
B
J
J
I
I
M
I
FIGURE
INCREMENTING
OF
THE
VALUES
OF
A
AND
B
DK
DK
IF
DK
OTHERWISE
THE
CALCULATION
OF
EACH
SUCCESSIVE
PIXEL
IN
THE
COLOR
BUFFER
REQUIRES
ONLY
AN
ADDITION
AND
A
SIGN
TEST
THIS
ALGORITHM
IS
SO
EFFICIENT
THAT
IT
HAS
BEEN
INCORPORATED
AS
A
SINGLE
INSTRUCTION
ON
GRAPHICS
CHIPS
SEE
EXERCISE
FOR
CALCULATION
OF
THE
INITIAL
VALUE
POLYGON
RASTERIZATION
ONE
OF
THE
MAJOR
ADVANTAGES
THAT
THE
FIRST
RASTER
SYSTEMS
BROUGHT
TO
USERS
WAS
THE
ABILITY
TO
DISPLAY
FILLED
POLYGONS
AT
THAT
TIME
COLORING
EACH
POINT
IN
THE
INTERIOR
OF
A
POLYGON
WITH
A
DIFFERENT
SHADE
WAS
NOT
POSSIBLE
IN
REAL
TIME
AND
THE
PHRASES
RASTERIZING
POLYGONS
AND
POLYGON
SCAN
CONVERSION
CAME
TO
MEAN
FILLING
A
POLYGON
WITH
A
SINGLE
COLOR
UNLIKE
RASTERIZATION
OF
LINES
WHERE
A
SINGLE
ALGORITHM
DOMINATES
THERE
ARE
MANY
VIABLE
METHODS
FOR
RASTERIZING
POLYGONS
THE
CHOICE
DEPENDS
HEAVILY
ON
THE
IMPLEMENTATION
ARCHITECTURE
WE
CONCENTRATE
ON
METHODS
THAT
FIT
WITH
OUR
PIPELINE
APPROACH
AND
CAN
ALSO
SUPPORT
SHADING
IN
SECTIONS
THROUGH
WE
SURVEY
A
NUMBER
OF
OTHER
APPROACHES
INSIDE
OUTSIDE
TESTING
FLAT
SIMPLE
POLYGONS
HAVE
WELL
DEFINED
INTERIORS
IF
THEY
ARE
ALSO
CONVEX
THEY
ARE
GUARANTEED
TO
BE
RENDERED
CORRECTLY
BY
OPENGL
AND
BY
OTHER
GRAPHICS
SYSTEMS
MORE
GENERAL
POLYGONS
ARISE
IN
PRACTICE
HOWEVER
AND
WE
CAN
RENDER
THEM
IN
MULTIPLE
WAYS
FOR
NONFLAT
POLYGONS
WE
CAN
WORK
WITH
THEIR
PROJECTIONS
SECTION
OR
WE
CAN
USE
THE
FIRST
THREE
VERTICES
TO
DETERMINE
A
PLANE
TO
USE
FOR
THE
INTERIOR
FOR
FLAT
NONSIMPLE
POLYGONS
WE
MUST
DECIDE
HOW
TO
DETERMINE
WHETHER
A
GIVEN
POINT
IS
STRICTLY
SPEAKING
THERE
IS
NO
SUCH
THING
AS
A
NONFLAT
POLYGON
BECAUSE
THE
INTERIOR
IS
NOT
DEFINED
UNLESS
IT
IS
FLAT
HOWEVER
FROM
A
PROGRAMMING
PERSPECTIVE
WE
CAN
DEFINE
A
POLYGON
BY
SIMPLY
GIVING
A
LIST
OF
VERTICES
REGARDLESS
OF
WHETHER
OR
NOT
THEY
LIE
IN
THE
SAME
PLANE
FIGURE
FILLING
WITH
THE
ODD
EVEN
TEST
INSIDE
OR
OUTSIDE
OF
THE
POLYGON
CONCEPTUALLY
THE
PROCESS
OF
FILLING
THE
INSIDE
OF
A
POLYGON
WITH
A
COLOR
OR
PATTERN
IS
EQUIVALENT
TO
DECIDING
WHICH
POINTS
IN
THE
PLANE
OF
THE
POLYGON
ARE
INTERIOR
INSIDE
POINTS
THE
CROSSING
OR
ODD
EVEN
TEST
IS
THE
MOST
WIDELY
USED
TEST
FOR
MAKING
INSIDE
OUTSIDE
DECISIONS
SUPPOSE
THAT
P
IS
A
POINT
INSIDE
A
POLYGON
ANY
RAY
EMANATING
FROM
P
AND
GOING
OFF
TO
INFINITY
MUST
CROSS
AN
ODD
NUMBER
OF
EDGES
ANY
RAY
EMANATING
FROM
A
POINT
OUTSIDE
THE
POLYGON
AND
ENTERING
THE
POLYGON
CROSSES
AN
EVEN
NUMBER
OF
EDGES
BEFORE
REACHING
INFINITY
HENCE
A
POINT
CAN
BE
DEFINED
AS
BEING
INSIDE
IF
AFTER
DRAWING
A
LINE
THROUGH
IT
AND
FOLLOWING
THIS
LINE
STARTING
ON
THE
OUTSIDE
WE
CROSS
AN
ODD
NUMBER
OF
EDGES
BEFORE
REACHING
IT
FOR
THE
STAR
SHAPED
POLYGON
IN
FIGURE
WE
OBTAIN
THE
INSIDE
COLORING
SHOWN
ODD
EVEN
TESTING
IS
EASY
TO
IMPLEMENT
AND
INTE
GRATES
WELL
WITH
THE
STANDARD
RENDERING
ALGORITHMS
USUALLY
WE
REPLACE
RAYS
THROUGH
POINTS
WITH
SCANLINES
AND
WE
COUNT
THE
CROSSING
OF
POLYGON
EDGES
TO
DETERMINE
INSIDE
AND
OUTSIDE
HOWEVER
WE
MIGHT
WANT
OUR
FILL
ALGORITHM
TO
COLOR
THE
STAR
POLYGON
AS
SHOWN
IN
FIGURE
RATHER
THAN
AS
SHOWN
IN
FIGURE
THE
WINDING
TEST
ALLOWS
US
TO
MAKE
THAT
HAPPEN
THIS
TEST
CONSIDERS
THE
POLYGON
AS
A
KNOT
BEING
WRAPPED
AROUND
A
POINT
OR
A
LINE
TO
IMPLEMENT
THE
TEST
WE
CONSIDER
TRAVERSING
THE
EDGES
OF
THE
POLYGON
FROM
ANY
STARTING
VERTEX
AND
GOING
AROUND
THE
EDGE
IN
A
PARTICULAR
DIRECTION
WHICH
DIRECTION
DOES
NOT
MATTER
UNTIL
WE
REACH
THE
STARTING
POINT
WE
ILLUSTRATE
THE
PATH
BY
LABELING
THE
EDGES
AS
SHOWN
IN
FIGURE
B
NEXT
WE
CONSIDER
AN
ARBITRARY
POINT
THE
WINDING
NUMBER
FOR
THIS
POINT
IS
THE
NUMBER
OF
TIMES
IT
IS
ENCIRCLED
BY
THE
EDGES
OF
THE
POLYGON
WE
COUNT
CLOCKWISE
ENCIRCLEMENTS
AS
POSITIVE
AND
COUNTERCLOCKWISE
ENCIRCLEMENTS
AS
NEGATIVE
OR
VICE
VERSA
THUS
POINTS
OUTSIDE
THE
STAR
IN
FIGURE
ARE
NOT
ENCIRCLED
AND
HAVE
A
WINDING
NUMBER
OF
POINTS
THAT
WERE
FILLED
IN
FIGURE
ALL
HAVE
A
WINDING
NUMBER
OF
AND
POINTS
IN
THE
CENTER
THAT
WERE
NOT
FILLED
BY
THE
ODD
EVEN
TEST
HAVE
A
WINDING
NUMBER
OF
IF
WE
CHANGE
OUR
FILL
RULE
TO
BE
THAT
A
POINT
IS
INSIDE
THE
POLYGON
IF
ITS
WINDING
NUMBER
IS
NOT
ZERO
THEN
WE
FILL
THE
INSIDE
OF
THE
POLYGON
AS
SHOWN
IN
FIGURE
A
A
B
FIGURE
FILL
USING
THE
WINDING
NUMBER
TEST
OPENGL
AND
CONCAVE
POLYGONS
BECAUSE
OPENGL
ONLY
RENDERS
TRIANGLES
WHICH
ARE
ALWAYS
FLAT
AND
CONVEX
WE
STILL
HAVE
THE
PROBLEM
OF
WHAT
TO
DO
WITH
MORE
GENERAL
POLYGONS
ONE
APPROACH
IS
TO
WORK
WITH
THE
APPLICATION
TO
ENSURE
THAT
THEY
ONLY
GENERATE
TRIANGLES
ANOTHER
IS
TO
PROVIDE
SOFTWARE
THAT
CAN
TESSELLATE
A
GIVEN
POLYGON
INTO
FLAT
CONVEX
POLYGONS
USUALLY
TRIANGLES
THERE
ARE
MANY
WAYS
TO
DIVIDE
A
GIVEN
POLYGON
INTO
TRIANGLES
A
GOOD
TESSELLATION
SHOULD
NOT
PRODUCE
TRIANGLES
THAT
ARE
LONG
AND
THIN
IT
SHOULD
IF
POSSIBLE
PRODUCE
SETS
OF
TRIANGLES
THAT
CAN
USE
SUPPORTED
FEATURES
SUCH
AS
TRIANGLE
STRIPS
AND
TRIANGLE
FANS
LET
CONSIDER
ONE
APPROACH
TO
TESSELLATING
OR
TRIANGULARIZING
AN
ARBITRARY
SIMPLE
POLYGON
WITH
N
VERTICES
FROM
THE
CONSTRUCTION
IT
WILL
BE
CLEAR
THAT
WE
ALWAYS
OBTAIN
A
TRIANGULARIZATION
USING
EXACTLY
N
TRIANGLES
WE
ASSUME
OUR
POLYGON
IS
SPECIFIED
BY
AN
ORDERED
LIST
OF
VERTICES
VN
THUS
THERE
IS
AN
EDGE
FROM
TO
FROM
TO
AND
FINALLY
FROM
VN
TO
THE
FIRST
STEP
IS
TO
FIND
THE
LEFT
MOST
VERTEX
VI
A
CALCULATION
THAT
REQUIRES
A
SIMPLE
SCAN
OF
THE
X
COMPONENTS
OF
THE
VERTICES
LET
VI
AND
VI
BE
THE
TWO
NEIGHBORS
OF
VI
WHERE
THE
INDICES
ARE
COMPUTED
MODULO
N
THESE
THREE
VERTICES
FORM
THE
TRIANGLE
VI
VI
VI
IF
THE
SITUATION
IS
AS
IN
FIGURE
THEN
WE
CAN
PROCEED
RECURSIVELY
BY
REMOVING
VI
FROM
THE
ORIGINAL
LIST
AND
WE
WILL
HAVE
A
TRIANGLE
AND
A
POLYGON
WITH
N
VERTICES
HOWEVER
BECAUSE
THE
POLYGON
MAY
NOT
BE
CONVEX
THE
LINE
SEGMENT
FROM
VI
TO
VI
CAN
CROSS
OTHER
EDGES
AS
SHOWN
IN
FIGURE
WE
CAN
TEST
FOR
THIS
CASE
BY
CHECKING
IF
ANY
OF
THE
OTHER
VERTICES
LIE
TO
THE
LEFT
OF
THE
LINE
SEGMENT
AND
INSIDE
THE
TRIANGLE
DETERMINED
BY
VI
VI
VI
IF
WE
CONNECT
VI
TO
THE
LEFT
MOST
OF
THESE
VERTICES
WE
SPLIT
THE
ORIGINAL
TRIANGLE
INTO
TWO
POLYGONS
AS
IN
FIGURE
EACH
OF
WHICH
HAS
AT
LEAST
TWO
VERTICES
FEWER
THAN
THE
ORIGINAL
TRIANGLE
USING
THE
LEFTMOST
VERTEX
ENSURES
THAT
THE
TWO
POLYGONS
ARE
SIMPLE
HENCE
WE
CAN
PROCEED
RECURSIVELY
WITH
THESE
TWO
TRIANGLES
KNOWING
THAT
IN
THE
END
WE
WILL
HAVE
ALL
TRIANGLES
NOTE
THAT
THE
WORST
CASE
PERFORMANCE
OF
THIS
METHOD
OCCURS
WHEN
THERE
ARE
NO
VERTICES
IN
THE
TRIANGLE
FORMED
BY
VI
VI
VI
WE
REQUIRE
O
N
TESTS
TO
MAKE
SURE
THAT
THIS
IS
THE
CASE
AND
IF
IT
IS
WE
THEN
REMOVE
ONLY
ONE
VERTEX
FROM
THE
ORIGINAL
POLYGON
CONSEQUENTLY
THE
WORST
CASE
PERFORMANCE
IS
O
HOWEVER
IF
WE
KNOW
IN
ADVANCE
THAT
THE
POLYGON
IS
CONVEX
THESE
TESTS
ARE
NOT
NEEDED
AND
THE
METHOD
IS
O
N
THE
BEST
PERFORMANCE
IN
GENERAL
OCCURS
WHEN
THE
SPLITTING
RESULTS
IN
TWO
POLYGONS
WITH
AN
EQUAL
NUMBER
OF
VERTICES
IF
SUCH
A
SPLIT
OCCURS
ON
EACH
STEP
THE
METHOD
WOULD
BE
O
N
LOG
N
THE
SUGGESTED
READINGS
AT
THE
END
OF
THE
CHAPTER
INCLUDE
METHODS
THAT
ARE
GUARANTEED
TO
BE
O
N
LOG
N
BUT
THEY
ARE
MORE
COMPLEX
THAN
THE
METHOD
OUTLINED
HERE
IN
PRACTICE
WE
RARELY
WORK
WITH
POLYGONS
WITH
SO
MANY
VERTICES
THAT
WE
NEED
THE
MORE
COMPLEX
METHODS
FILL
AND
SORT
A
DIFFERENT
APPROACH
TO
RASTERIZATION
OF
POLYGONS
STARTS
WITH
THE
IDEA
OF
A
POLYGON
PROCESSOR
A
BLACK
BOX
WHOSE
INPUTS
ARE
THE
VERTICES
FOR
A
SET
OF
TWO
DIMENSIONAL
POLYGONS
AND
WHOSE
OUTPUT
IS
A
FRAME
BUFFER
WITH
THE
CORRECT
PIXELS
SET
SUPPOSE
VI
VI
FIGURE
REMOVAL
OF
A
TRIANGLE
FROM
A
POLYGON
VI
VI
FIGURE
VERTEX
INSIDE
TRIANGLE
VI
VI
VI
FIGURE
SPLITTING
INTO
TWO
POLYGONS
THAT
WE
CONSIDER
FILLING
EACH
POLYGON
WITH
A
CONSTANT
COLOR
A
CHOICE
WE
MAKE
ONLY
TO
CLARIFY
THE
DISCUSSION
FIRST
CONSIDER
A
SINGLE
POLYGON
THE
BASIC
RULE
FOR
FILLING
A
POLYGON
IS
AS
FOLLOWS
IF
A
POINT
IS
INSIDE
THE
POLYGON
COLOR
IT
WITH
THE
INSIDE
FILL
COLOR
THIS
CONCEPTUAL
ALGORITHM
INDICATES
THAT
POLYGON
FILL
IS
A
SORTING
PROBLEM
WHERE
WE
SORT
ALL
THE
PIXELS
IN
THE
FRAME
BUFFER
INTO
THOSE
THAT
ARE
INSIDE
THE
POLYGON
AND
THOSE
THAT
ARE
NOT
FROM
THIS
PERSPECTIVE
WE
OBTAIN
DIFFERENT
POLYGON
FILL
ALGORITHMS
USING
DIFFERENT
WAYS
OF
SORTING
THE
POINTS
WE
INTRODUCE
THREE
POSSIBILITIES
FLOOD
FILL
SCANLINE
FILL
ODD
EVEN
FILL
FIGURE
POLYGON
DIS
PLAYED
BY
EDGES
FLOOD
FILL
WE
CAN
DISPLAY
AN
UNFILLED
POLYGON
BY
RASTERIZING
ITS
EDGES
INTO
THE
FRAME
BUFFER
USING
BRESENHAM
ALGORITHM
SUPPOSE
THAT
WE
HAVE
ONLY
TWO
COLORS
A
BACKGROUND
COLOR
WHITE
AND
A
FOREGROUND
OR
DRAWING
COLOR
BLACK
WE
CAN
USE
THE
FOREGROUND
COLOR
TO
RASTERIZE
THE
EDGES
RESULTING
IN
A
FRAME
BUFFER
COLORED
AS
SHOWN
IN
FIGURE
FOR
A
SIMPLE
POLYGON
IF
WE
CAN
FIND
AN
INITIAL
POINT
X
Y
INSIDE
THE
POLYGON
A
SEED
POINT
THEN
WE
CAN
LOOK
AT
ITS
NEIGHBORS
RECURSIVELY
COLORING
THEM
WITH
THE
FOREGROUND
COLOR
IF
THEY
ARE
NOT
EDGE
POINTS
THE
FLOOD
FILL
ALGORITHM
CAN
BE
EXPRESSED
IN
PSEUDOCODE
ASSUMING
THAT
THERE
IS
A
FUNCTION
THAT
RETURNS
THE
COLOR
OF
A
PIXEL
INT
X
INT
Y
IF
X
Y
WHITE
X
Y
BLACK
X
Y
X
Y
X
Y
X
Y
A
WE
CAN
OBTAIN
A
NUMBER
OF
VARIANTS
OF
FLOOD
FILL
BY
REMOVING
THE
RECURSION
ONE
WAY
TO
DO
SO
IS
TO
WORK
ONE
SCANLINE
AT
A
TIME
B
FIGURE
SINGULARITIES
A
ZERO
OR
TWO
EDGE
CROSSINGS
B
ONE
EDGE
CROSSING
SINGULARITIES
WE
CAN
EXTEND
MOST
POLYGON
FILL
ALGORITHMS
TO
OTHER
SHAPES
IF
WE
USE
CARE
SEE
EXER
CISE
POLYGONS
HAVE
THE
DISTINCT
ADVANTAGE
THAT
THE
LOCATIONS
OF
THEIR
EDGES
ARE
KNOWN
EXACTLY
EVEN
POLYGONS
CAN
PRESENT
PROBLEMS
HOWEVER
WHEN
VERTICES
LIE
ON
SCANLINES
CONSIDER
THE
TWO
CASES
IN
FIGURE
IF
WE
ARE
USING
AN
ODD
EVEN
FILL
DEF
INITION
WE
HAVE
TO
TREAT
THESE
TWO
CASES
DIFFERENTLY
FOR
CASE
A
WE
CAN
COUNT
THE
INTERSECTION
OF
THE
SCANLINE
WITH
THE
VERTEX
AS
EITHER
ZERO
OR
TWO
EDGE
CROSSINGS
FOR
CASE
B
THE
VERTEX
SCANLINE
INTERSECTION
MUST
BE
COUNTED
AS
ONE
EDGE
CROSSING
WE
CAN
FIX
OUR
ALGORITHM
IN
ONE
OF
TWO
WAYS
WE
CAN
CHECK
TO
SEE
WHICH
OF
THE
TWO
SITUATIONS
WE
HAVE
AND
THEN
COUNT
THE
EDGE
CROSSINGS
APPROPRIATELY
OR
WE
CAN
PREVENT
THE
SPECIAL
CASE
OF
A
VERTEX
LYING
ON
AN
EDGE
A
SINGULARITY
FROM
EVER
ARISING
WE
RULE
IT
OUT
BY
ENSURING
THAT
NO
VERTEX
HAS
AN
INTEGER
Y
VALUE
IF
WE
FIND
ONE
THAT
DOES
WE
PERTURB
ITS
LOCATION
SLIGHTLY
ANOTHER
METHOD
ONE
THAT
IS
ESPECIALLY
VALUABLE
IF
WE
ARE
WORKING
IN
THE
FRAME
BUFFER
IS
TO
CONSIDER
A
VIRTUAL
FRAME
BUFFER
OF
TWICE
THE
RESOLUTION
OF
THE
REAL
FRAME
BUFFER
IN
THE
VIRTUAL
FRAME
BUFFER
PIXELS
ARE
LOCATED
ONLY
AT
EVEN
VALUES
OF
Y
AND
ALL
VERTICES
ARE
LOCATED
ONLY
AT
ODD
VALUES
OF
Y
PLACING
PIXEL
CENTERS
HALFWAY
BETWEEN
INTEGERS
AS
OPENGL
DOES
IS
EQUIVALENT
TO
USING
THIS
APPROACH
HIDDEN
SURFACE
REMOVAL
ALTHOUGH
EVERY
FRAGMENT
GENERATED
BY
RASTERIZATION
CORRESPONDS
TO
A
LOCATION
IN
A
COLOR
BUFFER
WE
DO
NOT
WANT
TO
DISPLAY
THE
FRAGMENT
BY
COLORING
THE
CORRESPONDING
PIXEL
IF
THE
FRAGMENT
IS
FROM
AN
OBJECT
BEHIND
ANOTHER
OPAQUE
OBJECT
HIDDEN
SURFACE
REMOVAL
OR
VISIBLE
SURFACE
DETERMINATION
IS
DONE
TO
DISCOVER
WHAT
PART
IF
ANY
OF
EACH
OBJECT
IN
THE
VIEW
VOLUME
IS
VISIBLE
TO
THE
VIEWER
OR
IS
OBSCURED
FROM
THE
VIEWER
BY
OTHER
OBJECTS
WE
DESCRIBE
A
NUMBER
OF
TECHNIQUES
FOR
A
SCENE
COMPOSED
PURELY
OF
PLANAR
POLYGONS
BECAUSE
MOST
RENDERERS
WILL
HAVE
SUBDIVIDED
SURFACES
INTO
POLYGONS
AT
THIS
POINT
THIS
CHOICE
IS
APPROPRIATE
LINE
SEGMENTS
CAN
BE
HANDLED
BY
SLIGHT
MODIFICATIONS
SEE
EXERCISE
OBJECT
SPACE
AND
IMAGE
SPACE
APPROACHES
THE
STUDY
OF
HIDDEN
SURFACE
REMOVAL
ALGORITHMS
CLEARLY
ILLUSTRATES
THE
VARIETY
OF
AVAILABLE
ALGORITHMS
THE
DIFFERENCES
BETWEEN
WORKING
WITH
OBJECTS
AND
WORKING
WITH
IMAGES
AND
THE
IMPORTANCE
OF
EVALUATING
THE
INCREMENTAL
EFFECTS
OF
SUCCESSIVE
ALGO
RITHMS
IN
THE
IMPLEMENTATION
PROCESS
CONSIDER
A
SCENE
COMPOSED
OF
K
THREE
DIMENSIONAL
OPAQUE
FLAT
POLYGONS
EACH
OF
WHICH
WE
CAN
CONSIDER
TO
BE
AN
INDIVIDUAL
OBJECT
WE
CAN
DERIVE
A
GENERIC
OBJECT
SPACE
APPROACH
BY
CONSIDERING
THE
OBJECTS
PAIRWISE
AS
SEEN
FROM
THE
CENTER
OF
PROJEC
TION
CONSIDER
TWO
SUCH
POLYGONS
A
AND
B
THERE
ARE
FOUR
POSSIBILITIES
FIGURE
A
COMPLETELY
OBSCURES
B
FROM
THE
CAMERA
WE
DISPLAY
ONLY
A
B
OBSCURES
A
WE
DISPLAY
ONLY
B
A
AND
B
BOTH
ARE
COMPLETELY
VISIBLE
WE
DISPLAY
BOTH
A
AND
B
A
AND
B
PARTIALLY
OBSCURE
EACH
OTHER
WE
MUST
CALCULATE
THE
VISIBLE
PARTS
OF
EACH
POLYGON
FOR
COMPLEXITY
CONSIDERATIONS
WE
CAN
REGARD
THE
DETERMINATION
OF
WHICH
CASE
WE
HAVE
AND
ANY
REQUIRED
CALCULATION
OF
THE
VISIBLE
PART
OF
A
POLYGON
AS
A
SINGLE
OPERA
TION
WE
PROCEED
ITERATIVELY
WE
PICK
ONE
OF
THE
K
POLYGONS
AND
COMPARE
IT
PAIRWISE
A
B
C
D
FIGURE
TWO
POLYGONS
A
B
PARTIALLY
OBSCURES
A
B
A
PARTIALLY
OBSCURES
B
C
BOTH
A
AND
B
ARE
VISIBLE
D
B
TOTALLY
OBSCURES
A
WITH
THE
REMAINING
K
POLYGONS
AFTER
THIS
PROCEDURE
WE
KNOW
WHICH
PART
IF
ANY
OF
THIS
POLYGON
IS
VISIBLE
AND
WE
RENDER
THE
VISIBLE
PART
WE
ARE
NOW
DONE
WITH
THIS
POLYGON
SO
WE
REPEAT
THE
PROCESS
WITH
ANY
OF
THE
OTHER
K
POLYGONS
EACH
STEP
IN
VOLVES
COMPARING
ONE
POLYGON
PAIRWISE
WITH
THE
OTHER
REMAINING
POLYGONS
UNTIL
WE
HAVE
ONLY
TWO
POLYGONS
REMAINING
AND
WE
COMPARE
THESE
TO
EACH
OTHER
WE
CAN
EAS
ILY
DETERMINE
THAT
THE
COMPLEXITY
OF
THIS
CALCULATION
IS
O
THUS
WITHOUT
DERIVING
ANY
OF
THE
DETAILS
OF
ANY
PARTICULAR
OBJECT
SPACE
ALGORITHM
WE
SHOULD
SUSPECT
THAT
THE
OBJECT
SPACE
APPROACH
WORKS
BEST
FOR
SCENES
THAT
CONTAIN
RELATIVELY
FEW
POLYGONS
THE
IMAGE
SPACE
APPROACH
FOLLOWS
OUR
VIEWING
AND
RAY
CASTING
MODEL
AS
SHOWN
IN
FIGURE
CONSIDER
A
RAY
THAT
LEAVES
THE
CENTER
OF
PROJECTION
AND
PASSES
THROUGH
A
PIXEL
WE
CAN
INTERSECT
THIS
RAY
WITH
EACH
OF
THE
PLANES
DETERMINED
BY
OUR
K
POLYGONS
DETERMINE
FOR
WHICH
PLANES
THE
RAY
PASSES
THROUGH
A
POLYGON
AND
FINALLY
FOR
THOSE
RAYS
FIND
THE
INTERSECTION
CLOSEST
TO
THE
CENTER
OF
PROJECTION
WE
COLOR
THIS
PIXEL
WITH
THE
SHADE
OF
THE
POLYGON
AT
THE
POINT
OF
INTERSECTION
OUR
FUNDAMENTAL
OPERATION
IS
THE
INTERSECTION
OF
RAYS
WITH
POLYGONS
FOR
AN
N
M
DISPLAY
WE
HAVE
TO
CARRY
OUT
THIS
OPERATION
NMK
TIMES
GIVING
O
K
COMPLEXITY
AGAIN
WITHOUT
LOOKING
AT
THE
DETAILS
OF
THE
OPERATIONS
WE
WERE
ABLE
TO
GET
AN
UPPER
BOUND
IN
GENERAL
THE
O
K
BOUND
ACCOUNTS
FOR
THE
DOMINANCE
OF
IMAGE
SPACE
METHODS
THE
O
K
BOUND
IS
A
WORST
CASE
BOUND
IN
PRACTICE
IMAGE
SPACE
ALGORITHMS
PERFORM
MUCH
BETTER
SEE
EXERCISE
HOWEVER
BECAUSE
IMAGE
SPACE
APPROACHES
WORK
AT
THE
FRAGMENT
OR
PIXEL
LEVEL
THEIR
ACCURACY
IS
LIMITED
BY
THE
RESOLUTION
OF
THE
FRAME
BUFFER
SORTING
AND
HIDDEN
SURFACE
REMOVAL
THE
O
UPPER
BOUND
FOR
OBJECT
ORIENTED
HIDDEN
SURFACE
REMOVAL
MIGHT
REMIND
YOU
OF
THE
POORER
SORTING
ALGORITHMS
SUCH
AS
BUBBLE
SORT
ANY
METHOD
THAT
INVOLVES
BRUTE
FORCE
COMPARISON
OF
OBJECTS
BY
PAIRS
HAS
O
COMPLEXITY
BUT
THERE
IS
A
MORE
DIRECT
CONNECTION
WHICH
WE
EXPLOITED
IN
THE
OBJECT
ORIENTED
SORTING
ALGORITHMS
IN
SECTION
IF
WE
COULD
ORGANIZE
OBJECTS
BY
THEIR
DISTANCES
FROM
THE
CAMERA
WE
SHOULD
BE
ABLE
TO
COME
UP
WITH
A
DIRECT
METHOD
OF
RENDERING
THEM
BUT
IF
WE
FOLLOW
THE
ANALOGY
WE
KNOW
THAT
THE
COMPLEXITY
OF
GOOD
SORTING
AL
GORITHMS
IS
O
K
LOG
K
WE
SHOULD
EXPECT
THE
SAME
TO
BE
TRUE
FOR
OBJECT
ORIENTED
WE
CAN
USE
MORE
THAN
ONE
RAY
FOR
EACH
PIXEL
TO
INCREASE
THE
ACCURACY
OF
THE
RENDERING
COP
FIGURE
IMAGE
SPACE
HIDDEN
SURFACE
REMOVAL
HIDDEN
SURFACE
REMOVAL
AND
IN
FACT
SUCH
IS
THE
CASE
AS
WITH
SORTING
THERE
ARE
MULTIPLE
ALGORITHMS
THAT
MEET
THESE
BOUNDS
IN
ADDITION
THERE
ARE
RELATED
PROBLEMS
INVOLVING
COMPARISON
OF
OBJECTS
SUCH
AS
COLLISION
DETECTION
THAT
START
OFF
LOOKING
AS
IF
THEY
ARE
O
WHEN
IN
FACT
THEY
CAN
BE
REDUCED
TO
O
K
LOG
K
SCANLINE
ALGORITHMS
THE
ATTRACTION
OF
A
SCANLINE
ALGORITHM
IS
THAT
SUCH
A
METHOD
HAS
THE
POTENTIAL
TO
GENERATE
PIXELS
AS
THEY
ARE
DISPLAYED
CONSIDER
THE
POLYGON
IN
FIGURE
WITH
ONE
SCANLINE
SHOWN
IF
WE
USE
OUR
ODD
EVEN
RULE
FOR
DEFINING
THE
INSIDE
OF
THE
POLYGON
WE
CAN
SEE
THREE
GROUPS
OF
PIXELS
OR
SPANS
ON
THIS
SCANLINE
THAT
ARE
INSIDE
THE
POLYGON
NOTE
THAT
EACH
SPAN
CAN
BE
PROCESSED
INDEPENDENTLY
FOR
LIGHTING
OR
DEPTH
CALCULATIONS
A
STRATEGY
THAT
HAS
BEEN
EMPLOYED
IN
SOME
HARDWARE
THAT
HAS
PARALLEL
SPAN
PROCESSORS
FOR
OUR
SIMPLE
EXAMPLE
OF
CONSTANT
FILL
AFTER
WE
HAVE
IDENTIFIED
THE
SPANS
WE
CAN
COLOR
THE
INTERIOR
PIXELS
OF
EACH
SPAN
WITH
THE
FILL
COLOR
THE
SPANS
ARE
DETERMINED
BY
THE
SET
OF
INTERSECTIONS
OF
POLYGONS
WITH
SCANLINES
THE
VERTICES
CONTAIN
ALL
THE
INFORMATION
THAT
WE
NEED
TO
DETERMINE
THESE
INTERSEC
TIONS
BUT
THE
METHOD
THAT
WE
USE
TO
REPRESENT
THE
POLYGON
DETERMINES
THE
ORDER
IN
WHICH
THESE
INTERSECTIONS
ARE
GENERATED
FOR
EXAMPLE
CONSIDER
THE
POLYGON
IN
FIG
URE
WHICH
HAS
BEEN
REPRESENTED
BY
AN
ORDERED
LIST
OF
VERTICES
THE
MOST
OBVIOUS
WAY
TO
GENERATE
SCANLINE
EDGE
INTERSECTIONS
IS
TO
PROCESS
EDGES
DEFINED
BY
SUCCESSIVE
VERTICES
FIGURE
SHOWS
THESE
INTERSECTIONS
INDEXED
IN
THE
ORDER
IN
WHICH
THIS
METHOD
WOULD
GENERATE
THEM
NOTE
THAT
THIS
CALCULATION
CAN
BE
DONE
INCREMENTALLY
SEE
EXERCISE
HOWEVER
AS
FAR
AS
FILL
IS
CONCERNED
THIS
ORDER
IS
FAR
FROM
THE
ONE
WE
WANT
IF
WE
ARE
TO
FILL
ONE
SCANLINE
AT
A
TIME
WE
WOULD
LIKE
THE
INTERSECTIONS
SORTED
FIRST
BY
SCANLINES
AND
THEN
BY
ORDER
OF
X
ON
EACH
SCANLINE
AS
SHOWN
IN
FIGURE
A
BRUTE
FORCE
APPROACH
MIGHT
BE
TO
SORT
ALL
THE
INTERSECTIONS
INTO
THE
DESIRED
ORDER
HOWEVER
A
LARGE
OR
JAGGED
POLYGON
MIGHT
INTERSECT
SO
MANY
EDGES
THAT
THE
N
INTER
SECTIONS
CAN
BE
LARGE
ENOUGH
THAT
THE
O
N
LOG
N
COMPLEXITY
OF
THE
SORT
MAKES
THE
FIGURE
POLYGON
WITH
SPANS
B
FIGURE
POLYGON
GENER
ATED
BY
VERTEX
LIST
B
C
A
FIGURE
DESIRED
ORDER
OF
VERTICES
FIGURE
DATA
STRUCTURE
FOR
Y
X
ALGORITHM
CALCULATION
TOO
SLOW
FOR
REAL
TIME
IMPLEMENTATIONS
CONSIDER
FOR
EXAMPLE
A
POLYGON
THAT
SPANS
ONE
HALF
OF
THE
SCAN
LINES
A
NUMBER
OF
METHODS
AVOID
THE
GENERAL
SEARCH
ONE
ORIGINALLY
KNOWN
AS
THE
Y
X
ALGORITHM
CREATES
A
BUCKET
FOR
EACH
SCANLINE
AS
EDGES
ARE
PROCESSED
THE
IN
TERSECTIONS
WITH
SCANLINES
ARE
PLACED
IN
THE
PROPER
BUCKETS
WITHIN
EACH
BUCKET
AN
INSERTION
SORT
ORDERS
THE
X
VALUES
ALONG
EACH
SCANLINE
THE
DATA
STRUCTURE
IS
SHOWN
IN
FIGURE
ONCE
AGAIN
WE
SEE
THAT
A
PROPERLY
CHOSEN
DATA
STRUCTURE
CAN
SPEED
UP
THE
ALGORITHM
WE
CAN
GO
EVEN
FURTHER
BY
RECONSIDERING
HOW
TO
REPRESENT
POLYGONS
IF
WE
DO
SO
WE
ARRIVE
AT
THE
SCANLINE
METHOD
THAT
WAS
INTRODUCED
IN
SECTION
FIGURE
BACK
FACE
TEST
BACK
FACE
REMOVAL
IN
CHAPTER
WE
NOTED
THAT
IN
OPENGL
WE
CAN
CHOOSE
TO
RENDER
ONLY
FRONT
FACING
POLYGONS
FOR
SITUATIONS
WHERE
WE
CANNOT
SEE
BACK
FACES
SUCH
AS
SCENES
COMPOSED
OF
CONVEX
POLYHEDRA
WE
CAN
REDUCE
THE
WORK
REQUIRED
FOR
HIDDEN
SURFACE
REMOVAL
BY
ELIMINATING
ALL
BACK
FACING
POLYGONS
BEFORE
WE
APPLY
ANY
OTHER
HIDDEN
SURFACE
REMOVAL
ALGORITHM
THE
TEST
FOR
CULLING
A
BACK
FACING
POLYGON
CAN
BE
DERIVED
FROM
FIGURE
WE
SEE
THE
FRONT
OF
A
POLYGON
IF
THE
NORMAL
WHICH
COMES
OUT
OF
THE
FRONT
FACE
IS
POINTED
TOWARD
THE
VIEWER
IF
Θ
IS
THE
ANGLE
BETWEEN
THE
NORMAL
AND
THE
VIEWER
THEN
THE
POLYGON
IS
FACING
FORWARD
IF
AND
ONLY
IF
Θ
OR
EQUIVALENTLY
COS
Θ
THE
SECOND
CONDITION
IS
MUCH
EASIER
TO
TEST
BECAUSE
INSTEAD
OF
COMPUTING
THE
COSINE
WE
CAN
USE
THE
DOT
PRODUCT
N
V
FIGURE
COMPUTING
THE
AREA
OF
A
POLYGON
WE
CAN
SIMPLIFY
THIS
TEST
EVEN
FURTHER
IF
WE
NOTE
THAT
USUALLY
IT
IS
APPLIED
AFTER
TRANSFOR
MATION
TO
NORMALIZED
DEVICE
COORDINATES
IN
THIS
SYSTEM
ALL
VIEWS
ARE
ORTHOGRAPHIC
WITH
THE
DIRECTION
OF
PROJECTION
ALONG
THE
Z
AXIS
HENCE
IN
HOMOGENEOUS
COORDI
NATES
V
THUS
IF
THE
POLYGON
IS
ON
THE
SURFACE
AX
BY
CZ
D
IN
NORMALIZED
DEVICE
COORDINATES
WE
NEED
ONLY
TO
CHECK
THE
SIGN
OF
C
TO
DETERMINE
WHETHER
WE
HAVE
A
FRONT
OR
BACK
FACING
POLYGON
THIS
TEST
CAN
BE
IMPLEMENTED
EASILY
IN
EITHER
HARDWARE
OR
SOFTWARE
WE
MUST
SIMPLY
BE
CAREFUL
TO
ENSURE
THAT
REMOVING
BACK
FACING
POLYGONS
IS
CORRECT
FOR
OUR
APPLICATION
THERE
IS
ANOTHER
INTERESTING
APPROACH
TO
DETERMINING
BACK
FACES
THE
ALGORITHM
IS
BASED
ON
COMPUTING
THE
AREA
OF
THE
POLYGON
IN
SCREEN
COORDINATES
CONSIDER
THE
POLYGON
IN
FIGURE
WITH
N
VERTICES
ITS
AREA
A
IS
GIVEN
BY
A
Y
I
I
YI
X
I
XI
WHERE
THE
INDICES
ARE
TAKEN
MODULO
N
SEE
EXERCISE
A
NEGATIVE
AREA
INDICATES
A
BACK
FACING
POLYGON
THE
Z
BUFFER
ALGORITHM
THE
Z
BUFFER
ALGORITHM
IS
THE
MOST
WIDELY
USED
HIDDEN
SURFACE
REMOVAL
ALGORITHM
IT
HAS
THE
ADVANTAGES
OF
BEING
EASY
TO
IMPLEMENT
IN
EITHER
HARDWARE
OR
SOFTWARE
AND
OF
BEING
COMPATIBLE
WITH
PIPELINE
ARCHITECTURES
WHERE
IT
CAN
EXECUTE
AT
THE
SPEED
AT
A
Z
FIGURE
THE
Z
BUFFER
ALGORITHM
WHICH
FRAGMENTS
ARE
PASSING
THROUGH
THE
PIPELINE
ALTHOUGH
THE
ALGORITHM
WORKS
IN
IMAGE
SPACE
IT
LOOPS
OVER
THE
POLYGONS
RATHER
THAN
OVER
PIXELS
AND
CAN
BE
REGARDED
AS
PART
OF
THE
SCAN
CONVERSION
PROCESS
THAT
WE
DISCUSSED
IN
SECTION
SUPPOSE
THAT
WE
ARE
IN
THE
PROCESS
OF
RASTERIZING
ONE
OF
THE
TWO
POLYGONS
SHOWN
IN
FIGURE
WE
CAN
COMPUTE
A
COLOR
FOR
EACH
POINT
OF
INTERSECTION
BETWEEN
A
RAY
FROM
THE
CENTER
OF
PROJECTION
AND
A
PIXEL
USING
INTERPOLATED
VALUES
OF
THE
VERTEX
SHADES
COMPUTED
AS
IN
CHAPTER
IN
ADDITION
WE
MUST
CHECK
WHETHER
THIS
POINT
IS
VISIBLE
IT
WILL
BE
VISIBLE
IF
IT
IS
THE
CLOSEST
POINT
OF
INTERSECTION
ALONG
THE
RAY
HENCE
IF
WE
ARE
RASTERIZING
B
ITS
SHADE
WILL
APPEAR
ON
THE
SCREEN
IF
THE
DISTANCE
IS
LESS
THAN
THE
DISTANCE
TO
POLYGON
A
CONVERSELY
IF
WE
ARE
RASTERIZING
A
THE
PIXEL
THAT
CORRESPONDS
TO
THE
POINT
OF
INTERSECTION
WILL
NOT
APPEAR
ON
THE
DISPLAY
BECAUSE
WE
ARE
PROCEEDING
POLYGON
BY
POLYGON
HOWEVER
WE
DO
NOT
HAVE
THE
INFORMATION
ON
ALL
OTHER
POLYGONS
AS
WE
RASTERIZE
ANY
GIVEN
POLYGON
HOWEVER
IF
WE
KEEP
DEPTH
INFORMATION
WITH
EACH
FRAGMENT
THEN
WE
CAN
STORE
AND
UPDATE
DEPTH
INFORMATION
FOR
EACH
LOCATION
IN
THE
FRAME
BUFFER
AS
FRAGMENTS
ARE
PROCESSED
SUPPOSE
THAT
WE
HAVE
A
BUFFER
THE
Z
BUFFER
WITH
THE
SAME
RESOLUTION
AS
THE
FRAME
BUFFER
AND
WITH
DEPTH
CONSISTENT
WITH
THE
RESOLUTION
THAT
WE
WISH
TO
USE
FOR
DISTANCE
FOR
EXAMPLE
IF
WE
HAVE
A
DISPLAY
AND
WE
USE
STANDARD
INTEGERS
FOR
THE
DEPTH
CALCULATION
WE
CAN
USE
A
Z
BUFFER
WITH
BIT
ELEMENTS
INITIALLY
EACH
ELEMENT
IN
THE
DEPTH
BUFFER
IS
INITIALIZED
TO
A
DEPTH
CORRESPONDING
TO
THE
MAXIMUM
DISTANCE
AWAY
FROM
THE
CENTER
OF
PROJECTION
THE
COLOR
BUFFER
IS
INITIALIZED
TO
THE
BACKGROUND
COLOR
AT
ANY
TIME
DURING
RASTERIZATION
AND
FRAGMENT
PROCESSING
IF
WE
HAVE
ALREADY
DONE
PERSPECTIVE
NORMALIZATION
WE
SHOULD
REPLACE
THE
CENTER
OF
PROJECTION
WITH
THE
DIRECTION
OF
PROJECTION
BECAUSE
ALL
RAYS
ARE
PARALLEL
HOWEVER
THIS
CHANGE
DOES
NOT
AFFECT
THE
Z
BUFFER
ALGORITHM
BECAUSE
WE
CAN
MEASURE
DISTANCES
FROM
ANY
ARBITRARY
PLANE
SUCH
AS
THE
PLANE
Z
RATHER
THAN
FROM
THE
COP
EACH
LOCATION
IN
THE
Z
BUFFER
CONTAINS
THE
DISTANCE
ALONG
THE
RAY
CORRESPONDING
TO
THE
LOCATION
OF
THE
CLOSEST
INTERSECTION
POINT
ON
ANY
POLYGON
FOUND
SO
FAR
THE
CALCULATION
PROCEEDS
AS
FOLLOWS
WE
RASTERIZE
POLYGON
BY
POLYGON
USING
ONE
OF
THE
METHODS
FROM
SECTION
FOR
EACH
FRAGMENT
ON
THE
POLYGON
CORRESPOND
ING
TO
THE
INTERSECTION
OF
THE
POLYGON
WITH
A
RAY
THROUGH
A
PIXEL
WE
COMPUTE
THE
DEPTH
FROM
THE
CENTER
OF
PROJECTION
WE
COMPARE
THIS
DEPTH
TO
THE
VALUE
IN
THE
Z
BUFFER
CORRESPONDING
TO
THIS
FRAGMENT
IF
THIS
DEPTH
IS
GREATER
THAN
THE
DEPTH
IN
THE
Z
BUFFER
THEN
WE
HAVE
ALREADY
PROCESSED
A
POLYGON
WITH
A
CORRESPONDING
FRAGMENT
CLOSER
TO
THE
VIEWER
AND
THIS
FRAGMENT
IS
NOT
VISIBLE
IF
THE
DEPTH
IS
LESS
THAN
THE
DEPTH
IN
THE
Z
BUFFER
THEN
WE
HAVE
FOUND
A
FRAGMENT
CLOSER
TO
THE
VIEWER
WE
UP
DATE
THE
DEPTH
IN
THE
Z
BUFFER
AND
PLACE
THE
SHADE
COMPUTED
FOR
THIS
FRAGMENT
AT
THE
CORRESPONDING
LOCATION
IN
THE
COLOR
BUFFER
NOTE
THAT
FOR
PERSPECTIVE
VIEWS
THE
DEPTH
WE
ARE
USING
IN
THE
Z
BUFFER
ALGORITHM
IS
THE
DISTANCE
THAT
HAS
BEEN
ALTERED
BY
THE
NORMALIZATION
TRANSFORMATION
THAT
WE
DISCUSSED
IN
CHAPTER
ALTHOUGH
THIS
TRANS
FORMATION
IS
NONLINEAR
IT
PRESERVES
RELATIVE
DISTANCES
HOWEVER
THIS
NONLINEARITY
CAN
INTRODUCE
NUMERICAL
INACCURACIES
ESPECIALLY
WHEN
THE
DISTANCE
TO
THE
NEAR
CLIPPING
PLANE
IS
SMALL
UNLIKE
OTHER
ASPECTS
OF
RENDERING
WHERE
THE
PARTICULAR
IMPLEMENTATION
ALGO
RITHMS
MAY
BE
UNKNOWN
TO
THE
USER
FOR
HIDDEN
SURFACE
REMOVAL
OPENGL
USES
THE
Z
BUFFER
ALGORITHM
THIS
EXCEPTION
ARISES
BECAUSE
THE
APPLICATION
PROGRAM
MUST
INI
TIALIZE
THE
Z
BUFFER
EXPLICITLY
EVERY
TIME
A
NEW
IMAGE
IS
TO
BE
GENERATED
THE
Z
BUFFER
ALGORITHM
WORKS
WELL
WITH
IMAGE
ORIENTED
APPROACHES
TO
IMPLE
MENTATION
BECAUSE
THE
AMOUNT
OF
INCREMENTAL
WORK
IS
SMALL
SUPPOSE
THAT
WE
ARE
RASTERIZING
A
POLYGON
SCANLINE
BY
SCANLINE
AN
OPTION
WE
EXAMINED
IN
SECTION
THE
POLYGON
IS
PART
OF
A
PLANE
FIGURE
THAT
CAN
BE
REPRESENTED
AS
AX
BY
CZ
D
SUPPOSE
THAT
AND
ARE
TWO
POINTS
ON
THE
POLYGON
AND
THE
PLANE
IF
THEN
THE
EQUATION
FOR
THE
PLANE
CAN
BE
WRITTEN
IN
DIFFERENTIAL
FORM
AS
IN
OPENGL
WE
CAN
USE
THE
FUNCTION
GLDEPTHFUNC
TO
DECIDE
WHAT
TO
DO
WHEN
THE
DISTANCES
ARE
EQUAL
AX
BY
CZ
D
FIGURE
INCREMENTAL
Z
BUFFER
ALGORITHM
THIS
EQUATION
IS
IN
WINDOW
COORDINATES
SO
EACH
SCANLINE
CORRESPONDS
TO
A
LINE
OF
CONSTANT
Y
AND
AS
WE
MOVE
ACROSS
A
SCANLINE
ON
A
SCANLINE
WE
INCREASE
X
IN
UNIT
STEPS
CORRESPONDING
TO
MOVING
ONE
PIXEL
IN
THE
FRAME
BUFFER
AND
IS
CONSTANT
THUS
AS
WE
MOVE
FROM
POINT
TO
POINT
ACROSS
A
SCANLINE
A
C
THIS
VALUE
IS
A
CONSTANT
THAT
NEEDS
TO
BE
COMPUTED
ONLY
ONCE
FOR
EACH
POLYGON
ALTHOUGH
THE
WORST
CASE
PERFORMANCE
OF
AN
IMAGE
SPACE
ALGORITHM
IS
PROPOR
TIONAL
TO
THE
NUMBER
OF
PRIMITIVES
THE
PERFORMANCE
OF
THE
Z
BUFFER
ALGORITHM
IS
PROPORTIONAL
TO
THE
NUMBER
OF
FRAGMENTS
GENERATED
BY
RASTERIZATION
WHICH
DEPENDS
ON
THE
AREA
OF
THE
RASTERIZED
POLYGONS
SCAN
CONVERSION
WITH
THE
Z
BUFFER
WE
HAVE
ALREADY
PRESENTED
MOST
OF
THE
ESSENTIALS
OF
POLYGON
RASTERIZATION
IN
SEC
TION
WE
DISCUSSED
THE
ODD
EVEN
AND
WINDING
TESTS
FOR
DETERMINING
WHETHER
A
POINT
IS
INSIDE
A
POLYGON
IN
CHAPTER
WE
LEARNED
TO
SHADE
POLYGONS
BY
INTERPOLATION
HERE
WE
HAVE
ONLY
TO
PUT
TOGETHER
THE
PIECES
AND
TO
CONSIDER
EFFICIENCY
SUPPOSE
THAT
WE
FOLLOW
THE
PIPELINE
ONCE
MORE
CONCENTRATING
ON
WHAT
HAPPENS
TO
A
SINGLE
POLYGON
THE
VERTICES
AND
NORMALS
PASS
THROUGH
THE
GEOMETRIC
TRANSFORMA
TIONS
ONE
AT
A
TIME
THE
VERTICES
MUST
BE
ASSEMBLED
INTO
A
POLYGON
BEFORE
THE
CLIPPING
STAGE
IF
OUR
POLYGON
IS
NOT
CLIPPED
OUT
ITS
VERTICES
AND
NORMALS
CAN
BE
PASSED
ON
FOR
SHADING
AND
HIDDEN
SURFACE
REMOVAL
AT
THIS
POINT
ALTHOUGH
PROJECTION
NORMALIZA
TION
HAS
TAKEN
PLACE
WE
STILL
HAVE
DEPTH
INFORMATION
IF
WE
WISH
TO
USE
AN
INTERPOLATIVE
SHADING
METHOD
WE
CAN
COMPUTE
THE
LIGHTING
AT
EACH
VERTEX
THREE
TASKS
REMAIN
COMPUTATION
OF
THE
FINAL
ORTHOGRAPHIC
PROJECTION
HIDDEN
SURFACE
REMOVAL
AND
SHADING
CAREFUL
USE
OF
THE
Z
BUFFER
ALGORITHM
CAN
ACCOMPLISH
Y
YS
X
XS
Z
A
B
FIGURE
DUAL
REPRESENTATIONS
OF
A
POLYGON
A
NORMALIZED
DEVICE
COORDINATES
B
SCREEN
COORDINATES
Y
YS
YS
J
X
XS
Z
A
B
FIGURE
DUAL
REPRESENTATIONS
OF
A
SCANLINE
A
IN
NORMALIZED
DEVICE
COORDINATES
B
IN
SCREEN
COORDINATES
ALL
THREE
TASKS
SIMULTANEOUSLY
CONSIDER
THE
DUAL
REPRESENTATIONS
OF
A
POLYGON
ILLUS
TRATED
IN
FIGURE
IN
A
THE
POLYGON
IS
REPRESENTED
IN
THREE
DIMENSIONAL
NORMAL
IZED
DEVICE
COORDINATES
IN
B
IT
IS
SHOWN
AFTER
PROJECTION
IN
SCREEN
COORDINATES
THE
STRATEGY
IS
TO
PROCESS
EACH
POLYGON
ONE
SCANLINE
AT
A
TIME
IF
WE
WORK
AGAIN
IN
TERMS
OF
THESE
DUAL
REPRESENTATIONS
WE
CAN
SEE
THAT
A
SCANLINE
PROJECTED
BACKWARD
FROM
SCREEN
COORDINATES
CORRESPONDS
TO
A
LINE
OF
CONSTANT
Y
IN
NORMALIZED
DEVICE
COORDINATES
FIGURE
SUPPOSE
THAT
WE
SIMULTANEOUSLY
MARCH
ACROSS
THIS
SCAN
LINE
AND
ITS
BACK
PROJECTION
FOR
THE
SCANLINE
IN
SCREEN
COORDINATES
WE
MOVE
ONE
PIXEL
WIDTH
WITH
EACH
STEP
WE
USE
THE
NORMALIZED
DEVICE
COORDINATE
LINE
TO
DETER
MINE
DEPTHS
INCREMENTALLY
AND
TO
SEE
WHETHER
OR
NOT
THE
PIXEL
IN
SCREEN
COORDINATES
CORRESPONDS
TO
A
VISIBLE
POINT
ON
THE
POLYGON
HAVING
COMPUTED
SHADING
FOR
THE
VER
TICES
OF
THE
ORIGINAL
POLYGON
WE
CAN
USE
INTERPOLATION
TO
OBTAIN
THE
CORRECT
COLOR
FOR
VISIBLE
PIXELS
THIS
PROCESS
REQUIRES
LITTLE
EXTRA
EFFORT
OVER
THE
INDIVIDUAL
STEPS
THAT
WE
HAVE
ALREADY
DISCUSSED
IT
IS
CONTROLLED
AND
THUS
LIMITED
BY
THE
RATE
AT
WHICH
WE
CAN
SEND
POLYGONS
THROUGH
THE
PIPELINE
MODIFICATIONS
SUCH
AS
APPLYING
BIT
PATTERNS
CALLED
STIPPLE
PATTERNS
OR
TEXTURE
TO
POLYGONS
REQUIRE
ONLY
SLIGHT
CHANGES
A
B
FIGURE
PAINTER
ALGORITHM
A
TWO
POLYGONS
AND
A
VIEWER
ARE
SHOWN
B
POLYGON
A
PARTIALLY
OBSCURES
B
WHEN
VIEWED
DEPTH
SORT
AND
THE
PAINTER
ALGORITHM
ALTHOUGH
IMAGE
SPACE
METHODS
ARE
DOMINANT
IN
HARDWARE
DUE
TO
THE
EFFICIENCY
AND
EASE
OF
IMPLEMENTATION
OF
THE
Z
BUFFER
ALGORITHM
OFTEN
OBJECT
SPACE
METHODS
ARE
USED
WITHIN
THE
APPLICATION
TO
LOWER
THE
POLYGON
COUNT
DEPTH
SORT
IS
A
DIRECT
IMPLE
MENTATION
OF
THE
OBJECT
SPACE
APPROACH
TO
HIDDEN
SURFACE
REMOVAL
WE
PRESENT
THE
ALGORITHM
FOR
A
SCENE
COMPOSED
OF
PLANAR
POLYGONS
EXTENSIONS
TO
OTHER
CLASSES
OF
OB
JECTS
ARE
POSSIBLE
DEPTH
SORT
IS
A
VARIANT
OF
AN
EVEN
SIMPLER
ALGORITHM
KNOWN
AS
THE
PAINTER
ALGORITHM
SUPPOSE
THAT
WE
HAVE
A
COLLECTION
OF
POLYGONS
THAT
IS
SORTED
BASED
ON
HOW
FAR
FROM
THE
VIEWER
THE
POLYGONS
ARE
FOR
THE
EXAMPLE
IN
FIGURE
A
WE
HAVE
TWO
POLYGONS
TO
A
VIEWER
THEY
APPEAR
AS
SHOWN
IN
FIGURE
B
WITH
THE
POLYGON
IN
FRONT
PARTIALLY
OBSCURING
THE
OTHER
TO
RENDER
THE
SCENE
CORRECTLY
WE
COULD
FIND
THE
PART
OF
THE
REAR
POLYGON
THAT
IS
VISIBLE
AND
RENDER
THAT
PART
INTO
THE
FRAME
BUFFER
A
CALCULATION
THAT
REQUIRES
CLIPPING
ONE
POLYGON
AGAINST
THE
OTHER
OR
WE
COULD
USE
AN
APPROACH
ANALOGOUS
TO
THE
WAY
A
PAINTER
MIGHT
RENDER
THE
SCENE
SHE
PROBABLY
WOULD
PAINT
THE
REAR
POLYGON
IN
ITS
ENTIRETY
AND
THEN
THE
FRONT
POLYGON
PAINTING
OVER
THAT
PART
OF
THE
REAR
POLYGON
NOT
VISIBLE
TO
THE
VIEWER
IN
THE
PROCESS
BOTH
POLYGONS
WOULD
BE
RENDERED
COMPLETELY
WITH
THE
HIDDEN
SURFACE
REMOVAL
BEING
DONE
AS
A
CONSEQUENCE
OF
THE
BACK
TO
FRONT
RENDERING
OF
THE
POLYGONS
THE
TWO
QUESTIONS
RELATED
TO
THIS
ALGORITHM
ARE
HOW
TO
DO
THE
SORT
AND
WHAT
TO
DO
IF
POLYGONS
OVERLAP
DEPTH
SORT
ADDRESSES
BOTH
ALTHOUGH
IN
MANY
APPLICATIONS
MORE
EFFICIENCIES
CAN
BE
FOUND
SEE
FOR
EXAMPLE
EXERCISE
SUPPOSE
WE
HAVE
ALREADY
COMPUTED
THE
EXTENT
OF
EACH
POLYGON
THE
NEXT
STEP
OF
DEPTH
SORT
IS
TO
ORDER
ALL
THE
POLYGONS
BY
HOW
FAR
AWAY
FROM
THE
VIEWER
THEIR
MAXIMUM
Z
VALUE
IS
THIS
STEP
GIVES
THE
ALGORITHM
THE
NAME
DEPTH
SORT
SUPPOSE
THAT
THE
ORDER
IS
AS
SHOWN
IN
FIGURE
WHICH
DEPICTS
THE
Z
EXTENTS
OF
THE
POLYGONS
AFTER
THE
SORT
IF
THE
MINIMUM
DEPTH
THE
Z
VALUE
OF
A
GIVEN
POLYGON
IS
GREATER
THAN
THE
MAXIMUM
DEPTH
OF
THE
POLYGON
BEHIND
THE
ONE
OF
INTEREST
WE
CAN
PAINT
THE
POLYGONS
BACK
TO
FRONT
AND
WE
ARE
DONE
FOR
EXAMPLE
POLYGON
A
IN
FIGURE
IS
BEHIND
ALL
IN
RAY
TRACING
AND
SCIENTIFIC
VISUALIZATION
WE
OFTEN
USE
FRONT
TO
BACK
RENDERING
OF
POLYGONS
POLYGONS
FIGURE
THE
Z
EXTENTS
OF
SORTED
POLYGONS
A
B
FIGURE
TEST
FOR
OVERLAP
IN
X
AND
Y
EXTENTS
A
NONOVERLAPPING
X
EXTENTS
B
NONOVERLAPPING
Y
EXTENTS
THE
OTHER
POLYGONS
AND
CAN
BE
PAINTED
FIRST
HOWEVER
THE
OTHERS
CANNOT
BE
PAINTED
BASED
SOLELY
ON
THE
Z
EXTENTS
IF
THE
Z
EXTENTS
OF
TWO
POLYGONS
OVERLAP
WE
STILL
MAY
BE
ABLE
TO
FIND
AN
ORDER
TO
PAINT
RENDER
THE
POLYGONS
INDIVIDUALLY
AND
YIELD
THE
CORRECT
IMAGE
THE
DEPTH
SORT
ALGORITHM
RUNS
A
NUMBER
OF
INCREASINGLY
MORE
DIFFICULT
TESTS
ATTEMPTING
TO
FIND
SUCH
AN
ORDERING
CONSIDER
A
PAIR
OF
POLYGONS
WHOSE
Z
EXTENTS
OVERLAP
THE
SIMPLEST
TEST
IS
TO
CHECK
THEIR
X
AND
Y
EXTENTS
FIGURE
IF
EITHER
OF
THE
X
OR
Y
EXTENTS
DO
NOT
OVERLAP
NEITHER
POLYGON
CAN
OBSCURE
THE
OTHER
AND
THEY
CAN
BE
PAINTED
IN
EITHER
ORDER
EVEN
IF
THESE
TESTS
FAIL
IT
MAY
STILL
BE
POSSIBLE
TO
FIND
AN
ORDER
IN
WHICH
WE
CAN
PAINT
THE
POLYGONS
INDIVIDUALLY
FIGURE
SHOWS
SUCH
A
CASE
ALL
THE
VERTICES
OF
ONE
POLYGON
LIE
ON
THE
SAME
SIDE
OF
THE
PLANE
DETERMINED
BY
THE
OTHER
WE
CAN
PROCESS
THE
VERTICES
SEE
EXERCISE
OF
THE
TWO
POLYGONS
TO
DETERMINE
WHETHER
THIS
CASE
EXISTS
FIGURE
POLYGONS
WITH
OVERLAPPING
EXTENTS
THE
X
AND
Y
EXTENT
TESTS
APPLY
TO
ONLY
A
PARALLEL
VIEW
HERE
IS
ANOTHER
EXAMPLE
OF
THE
ADVANTAGE
OF
WORKING
IN
NORMALIZED
DEVICE
COORDINATES
AFTER
PERSPECTIVE
NORMALIZATION
FIGURE
CYCLIC
OVERLAP
TWO
TROUBLESOME
SITUATIONS
REMAIN
IF
THREE
OR
MORE
POLYGONS
OVERLAP
CYCLICALLY
AS
SHOWN
IN
FIGURE
THERE
IS
NO
CORRECT
ORDER
FOR
PAINTING
THE
BEST
WE
CAN
DO
IS
TO
DIVIDE
AT
LEAST
ONE
OF
THE
POLYGONS
INTO
TWO
PARTS
AND
ATTEMPT
TO
FIND
AN
ORDER
TO
PAINT
THE
NEW
SET
OF
POLYGONS
THE
SECOND
PROBLEMATIC
CASE
ARISES
IF
A
POLYGON
CAN
PIERCE
ANOTHER
POLYGON
AS
SHOWN
IN
FIGURE
IF
WE
WANT
TO
CONTINUE
WITH
DEPTH
SORT
WE
MUST
DERIVE
THE
DETAILS
OF
THE
INTERSECTION
A
CALCULATION
EQUIVALENT
TO
CLIP
PING
ONE
POLYGON
AGAINST
THE
OTHER
IF
THE
INTERSECTING
POLYGONS
HAVE
MANY
VERTICES
WE
MAY
WANT
TO
TRY
ANOTHER
ALGORITHM
THAT
REQUIRES
LESS
COMPUTATION
A
PERFORMANCE
ANALYSIS
OF
DEPTH
SORT
IS
DIFFICULT
BECAUSE
THE
PARTICULARS
OF
THE
APPLICATION
DETERMINE
HOW
OFTEN
THE
MORE
DIFFICULT
CASES
ARISE
FOR
EXAMPLE
IF
WE
ARE
WORKING
WITH
POLY
GONS
THAT
DESCRIBE
THE
SURFACES
OF
SOLID
OBJECTS
THEN
NO
TWO
POLYGONS
CAN
INTERSECT
NEVERTHELESS
IT
SHOULD
BE
CLEAR
THAT
BECAUSE
OF
THE
INITIAL
SORT
THE
COMPLEXITY
MUST
BE
AT
LEAST
O
K
LOG
K
WHERE
K
IS
THE
NUMBER
OF
OBJECTS
FIGURE
PIERCING
POLY
GONS
FIGURE
IDEAL
RASTER
LINE
ANTIALIASING
RASTERIZED
LINE
SEGMENTS
AND
EDGES
OF
POLYGONS
LOOK
JAGGED
EVEN
ON
A
DISPLAY
DEVICE
THAT
HAS
A
RESOLUTION
AS
HIGH
AS
WE
CAN
NOTICE
THESE
DEFECTS
IN
THE
DISPLAY
THIS
TYPE
OF
ERROR
ARISES
WHENEVER
WE
ATTEMPT
TO
GO
FROM
THE
CONTINUOUS
REPRESENTA
TION
OF
AN
OBJECT
WHICH
HAS
INFINITE
RESOLUTION
TO
A
SAMPLED
APPROXIMATION
WHICH
HAS
LIMITED
RESOLUTION
THE
NAME
ALIASING
HAS
BEEN
GIVEN
TO
THIS
EFFECT
BECAUSE
OF
THE
TIE
WITH
ALIASING
IN
DIGITAL
SIGNAL
PROCESSING
ALIASING
ERRORS
ARE
CAUSED
BY
THREE
RELATED
PROBLEMS
WITH
THE
DISCRETE
NATURE
OF
THE
FRAME
BUFFER
FIRST
IF
WE
HAVE
AN
N
M
FRAME
BUFFER
THE
NUMBER
OF
PIXELS
IS
FIXED
AND
WE
CAN
GENERATE
ONLY
CERTAIN
PATTERNS
TO
APPROXIMATE
A
LINE
SEGMENT
MANY
DIFFERENT
CONTINUOUS
LINE
SEGMENTS
MAY
BE
APPROXIMATED
BY
THE
SAME
PATTERN
OF
PIXELS
WE
CAN
SAY
THAT
ALL
THESE
SEGMENTS
ARE
ALIASED
AS
THE
SAME
SEQUENCE
OF
PIXELS
GIVEN
THE
SEQUENCE
OF
PIXELS
WE
CANNOT
TELL
WHICH
LINE
SEGMENT
GENERATED
THE
SEQUENCE
SECOND
PIXEL
LOCATIONS
ARE
FIXED
ON
A
UNIFORM
GRID
REGARDLESS
OF
WHERE
WE
WOULD
LIKE
TO
PLACE
PIXELS
WE
CANNOT
PLACE
THEM
AT
OTHER
THAN
EVENLY
SPACED
LOCATIONS
THIRD
PIXELS
HAVE
A
FIXED
SIZE
AND
SHAPE
AT
FIRST
GLANCE
IT
MIGHT
APPEAR
THAT
THERE
IS
LITTLE
WE
CAN
DO
ABOUT
SUCH
PROB
LEMS
ALGORITHMS
SUCH
AS
BRESENHAM
ALGORITHM
ARE
OPTIMAL
IN
THAT
THEY
CHOOSE
THE
CLOSEST
SET
OF
PIXELS
TO
APPROXIMATE
LINES
AND
POLYGONS
HOWEVER
IF
WE
HAVE
A
DISPLAY
THAT
SUPPORTS
MORE
THAN
TWO
COLORS
THERE
ARE
OTHER
POSSIBILITIES
ALTHOUGH
MATHE
MATICAL
LINES
ARE
ONE
DIMENSIONAL
ENTITIES
THAT
HAVE
LENGTH
BUT
NOT
WIDTH
RASTERIZED
LINES
MUST
HAVE
A
WIDTH
IN
ORDER
TO
BE
VISIBLE
SUPPOSE
THAT
EACH
PIXEL
IS
DISPLAYED
AS
A
SQUARE
OF
WIDTH
UNIT
AND
CAN
OCCUPY
A
BOX
OF
UNIT
HEIGHT
AND
WIDTH
ON
THE
DIS
PLAY
OUR
BASIC
FRAME
BUFFER
CAN
WORK
ONLY
IN
MULTIPLES
OF
ONE
PIXEL
WE
CAN
THINK
OF
AN
IDEALIZED
LINE
SEGMENT
IN
THE
FRAME
BUFFER
AS
BEING
ONE
PIXEL
WIDE
AS
SHOWN
IN
FIG
URE
OF
COURSE
WE
CANNOT
DRAW
THIS
LINE
BECAUSE
IT
DOES
NOT
CONSIST
OF
OUR
SQUARE
SOME
FRAME
BUFFERS
PERMIT
OPERATIONS
IN
UNITS
OF
LESS
THAN
ONE
PIXEL
THROUGH
MULTISAMPLING
METHODS
A
B
C
D
FIGURE
ALIASED
VERSUS
ANTIALIASED
LINE
SEGMENTS
A
ALIASED
LINE
SEGMENT
B
ANTIALIASED
LINE
SEGMENT
C
MAGNIFIED
ALIASED
LINE
SEGMENT
D
MAGNIFIED
ANTIALIASED
LINE
SEGMENT
PIXELS
WE
CAN
VIEW
BRESENHAM
ALGORITHM
AS
A
METHOD
FOR
APPROXIMATING
THE
IDEAL
ONE
PIXEL
WIDE
LINE
WITH
OUR
REAL
PIXELS
IF
WE
LOOK
AT
THE
IDEAL
ONE
PIXEL
WIDE
LINE
WE
CAN
SEE
THAT
IT
PARTIALLY
COVERS
MANY
PIXEL
SIZED
BOXES
IT
IS
OUR
SCAN
CONVERSION
ALGO
RITHM
THAT
FORCES
US
FOR
LINES
OF
SLOPE
LESS
THAN
TO
CHOOSE
EXACTLY
ONE
PIXEL
VALUE
FOR
EACH
VALUE
OF
X
IF
INSTEAD
WE
SHADE
EACH
BOX
BY
THE
PERCENTAGE
OF
THE
IDEAL
LINE
THAT
CROSSES
IT
WE
GET
THE
SMOOTHER
APPEARING
IMAGE
SHOWN
IN
FIGURE
B
THIS
TECHNIQUE
IS
KNOWN
AS
ANTIALIASING
BY
AREA
AVERAGING
THE
CALCULATION
IS
SIMILAR
TO
POLYGON
CLIPPING
THERE
ARE
OTHER
APPROACHES
TO
ANTIALIASING
AS
WELL
AS
ANTIALIASING
ALGORITHMS
THAT
CAN
BE
APPLIED
TO
OTHER
PRIMITIVES
SUCH
AS
POLYGONS
COLOR
PLATE
SHOWS
ALIASED
AND
ANTIALIASED
VERSIONS
OF
A
SMALL
AREA
OF
THE
OBJECT
IN
COLOR
PLATE
A
RELATED
PROBLEM
ARISES
BECAUSE
OF
THE
SIMPLE
WAY
THAT
WE
ARE
USING
THE
Z
BUFFER
ALGORITHM
AS
WE
HAVE
SPECIFIED
THAT
ALGORITHM
THE
COLOR
OF
A
GIVEN
PIXEL
IS
DETERMINED
BY
THE
SHADE
OF
A
SINGLE
PRIMITIVE
CONSIDER
THE
PIXEL
SHARED
BY
THE
THREE
POLYGONS
SHOWN
IN
FIGURE
IF
EACH
POLYGON
HAS
A
DIFFERENT
COLOR
THE
COLOR
ASSIGNED
TO
THE
PIXEL
IS
THE
ONE
ASSOCIATED
WITH
THE
POLYGON
CLOSEST
TO
THE
VIEWER
WE
COULD
OBTAIN
A
MUCH
MORE
ACCURATE
IMAGE
IF
WE
COULD
ASSIGN
A
COLOR
BASED
ON
AN
AREA
WEIGHTED
AVERAGE
OF
THE
COLORS
OF
THE
THREE
TRIANGLES
SUCH
ALGORITHMS
CAN
BE
IMPLEMENTED
WITH
FRAGMENT
SHADERS
ON
HARDWARE
WITH
FLOATING
POINT
FRAME
BUFFERS
WE
HAVE
DISCUSSED
ONLY
ONE
TYPE
OF
ALIASING
SPATIAL
DOMAIN
ALIASING
WHEN
WE
GENERATE
SEQUENCES
OF
IMAGES
SUCH
AS
FOR
ANIMATIONS
WE
ALSO
MUST
BE
CONCERNED
WITH
TIME
DOMAIN
ALIASING
CONSIDER
A
SMALL
OBJECT
MOVING
IN
FRONT
OF
THE
PROJECTION
PLANE
THAT
HAS
BEEN
RULED
INTO
PIXEL
SIZED
UNITS
AS
SHOWN
IN
FIGURE
IF
OUR
RENDERING
PROCESS
SENDS
A
RAY
THROUGH
THE
CENTER
OF
EACH
PIXEL
AND
DETERMINES
WHAT
IT
HITS
THEN
SOMETIMES
WE
INTERSECT
THE
OBJECT
AND
SOMETIMES
IF
THE
PROJECTION
OF
THE
OBJECT
IS
SMALL
WE
MISS
THE
OBJECT
THE
VIEWER
WILL
HAVE
THE
UNPLEASANT
EXPERIENCE
OF
SEEING
THE
OBJECT
FLASH
ON
AND
OFF
THE
DISPLAY
AS
THE
ANIMATION
PROGRESSES
THERE
ARE
SEVERAL
WAYS
TO
DEAL
WITH
THIS
PROBLEM
FOR
EXAMPLE
WE
CAN
USE
MORE
THAN
ONE
RAY
PER
PIXEL
A
TECHNIQUE
COMMON
IN
RAY
TRACING
WHAT
IS
COMMON
TO
ALL
ANTIALIASING
TECHNIQUES
IS
THAT
THEY
REQUIRE
CONSIDERABLY
MORE
COMPUTATION
THAN
DOES
RENDERING
WITHOUT
ANTIALIASING
IN
PRACTICE
FOR
HIGH
RESOLUTION
IMAGES
ANTIALIASING
IS
DONE
OFF
LINE
AND
ONLY
WHEN
A
FINAL
IMAGE
IS
NEEDED
FIGURE
POLYGONS
THAT
SHARE
A
PIXEL
FIGURE
TIME
DOMAIN
ALIASING
DISPLAY
CONSIDERATIONS
IN
MOST
INTERACTIVE
APPLICATIONS
THE
APPLICATION
PROGRAMMER
NEED
NOT
WORRY
ABOUT
HOW
THE
CONTENTS
OF
THE
FRAME
BUFFER
ARE
DISPLAYED
FROM
THE
APPLICATION
PROGRAM
MER
PERSPECTIVE
AS
LONG
AS
SHE
USES
DOUBLE
BUFFERING
THE
PROCESS
OF
WRITING
INTO
THE
FRAME
BUFFER
IS
DECOUPLED
FROM
THE
PROCESS
OF
READING
THE
FRAME
BUFFER
CONTENTS
FOR
DISPLAY
THE
HARDWARE
REDISPLAYS
THE
PRESENT
CONTENTS
OF
THE
FRAME
BUFFER
AT
A
RATE
SUFFICIENT
TO
AVOID
FLICKER
USUALLY
TO
HZ
AND
THE
APPLICATION
PROGRAMMER
WORRIES
ONLY
ABOUT
WHETHER
OR
NOT
HER
PROGRAM
CAN
EXECUTE
AND
FILL
THE
FRAME
BUFFER
FAST
ENOUGH
AS
WE
SAW
IN
CHAPTER
THE
USE
OF
DOUBLE
BUFFERING
ALLOWS
THE
DISPLAY
TO
CHANGE
SMOOTHLY
EVEN
IF
WE
CANNOT
PUSH
OUR
PRIMITIVES
THROUGH
THE
SYSTEM
AS
FAST
AS
WE
WOULD
LIKE
NUMEROUS
OTHER
PROBLEMS
AFFECT
THE
QUALITY
OF
THE
DISPLAY
AND
OFTEN
CAUSE
USERS
TO
BE
UNHAPPY
WITH
THE
OUTPUT
OF
THEIR
PROGRAMS
FOR
EXAMPLE
THE
DISPLAYS
OF
TWO
MONITORS
MAY
HAVE
THE
SAME
NOMINAL
RESOLUTION
BUT
MAY
DISPLAY
PIXELS
OF
DIFFERENT
SIZES
SEE
EXERCISES
AND
PERHAPS
THE
GREATEST
SOURCE
OF
PROBLEMS
WITH
DISPLAYS
CONCERNS
THE
BASIC
PHYS
ICAL
PROPERTIES
OF
DISPLAYS
THE
RANGE
OF
COLORS
THEY
CAN
DISPLAY
AND
HOW
THEY
MAP
SOFTWARE
DEFINED
COLORS
TO
THE
VALUES
OF
THE
PRIMARIES
FOR
THE
DISPLAY
THE
COLOR
GAMUTS
OF
DIFFERENT
DISPLAYS
CAN
DIFFER
GREATLY
IN
ADDITION
BECAUSE
THE
PRIMARIES
ON
DIFFERENT
SYSTEMS
ARE
DIFFERENT
EVEN
WHEN
TWO
DIFFERENT
MONITORS
CAN
PRODUCE
THE
SAME
VISIBLE
COLOR
THEY
MAY
REQUIRE
DIFFERENT
VALUES
OF
THE
PRIMARIES
TO
BE
SENT
TO
THE
DISPLAYS
FROM
THE
GRAPHICS
SYSTEM
IN
ADDITION
THE
MAPPING
BETWEEN
BRIGHTNESS
VALUES
DEFINED
BY
THE
PROGRAM
AND
WHAT
IS
DISPLAYED
IS
NONLINEAR
OPENGL
DOES
NOT
ADDRESS
THESE
ISSUES
DIRECTLY
BECAUSE
COLORS
ARE
SPECIFIED
AS
RGB
VALUES
THAT
ARE
INDEPENDENT
OF
ANY
DISPLAY
PROPERTIES
IN
ADDITION
BECAUSE
RGB
PRIMARIES
ARE
LIMITED
TO
THE
RANGE
FROM
TO
IT
IS
OFTEN
DIFFICULT
TO
ACCOUNT
FOR
THE
FULL
RANGE
OF
COLOR
AND
BRIGHTNESS
DETECTABLE
BY
THE
HUMAN
VISUAL
SYSTEM
HOWEVER
IF
WE
EXPAND
ON
OUR
DISCUSSION
OF
COLOR
AND
THE
HUMAN
VISUAL
SYSTEM
FROM
CHAPTER
WE
CAN
GAIN
SOME
ADDITIONAL
CONTROL
OVER
COLOR
IN
OPENGL
G
R
B
FIGURE
COLOR
CUBE
COLOR
SYSTEMS
OUR
BASIC
ASSUMPTION
ABOUT
COLOR
SUPPORTED
BY
THE
THREE
COLOR
THEORY
OF
HUMAN
VISION
IS
THAT
THE
THREE
COLOR
VALUES
THAT
WE
DETERMINE
FOR
EACH
PIXEL
CORRESPOND
TO
THE
TRISTIMULUS
VALUES
THAT
WE
INTRODUCED
IN
CHAPTER
THUS
A
GIVEN
COLOR
IS
A
POINT
IN
A
COLOR
CUBE
AS
IN
FIGURE
AND
CAN
BE
WRITTEN
SYMBOLICALLY
AS
C
HOWEVER
THERE
ARE
SIGNIFICANT
DIFFERENCES
ACROSS
RGB
SYSTEMS
FOR
EXAMPLE
SUPPOSE
THAT
WE
HAVE
A
YELLOW
COLOR
THAT
OPENGL
HAS
REPRESENTED
WITH
THE
RGB
TRIPLET
IF
WE
USE
THESE
VALUES
TO
DRIVE
BOTH
A
CRT
AND
A
FILM
IMAGE
RECORDER
WE
WILL
SEE
DIFFERENT
COLORS
EVEN
THOUGH
IN
BOTH
CASES
THE
RED
IS
PERCENT
OF
MAXIMUM
THE
GREEN
IS
PERCENT
OF
MAXIMUM
AND
THERE
IS
NO
BLUE
THE
REASON
IS
THAT
THE
FILM
DYES
AND
THE
CRT
PHOSPHORS
HAVE
DIFFERENT
COLOR
DISTRIBUTIONS
CONSEQUENTLY
THE
RANGE
OF
DISPLAYABLE
COLORS
OR
THE
COLOR
GAMUT
IS
DIFFERENT
FOR
EACH
THE
EMPHASIS
IN
THE
GRAPHICS
COMMUNITY
HAS
BEEN
ON
DEVICE
INDEPENDENT
GRAPHICS
CONSEQUENTLY
THE
REAL
DIFFERENCES
AMONG
DISPLAY
PROPERTIES
ARE
NOT
AD
DRESSED
BY
MOST
APIS
FORTUNATELY
THE
COLORIMETRY
LITERATURE
CONTAINS
THE
INFOR
MATION
WE
NEED
THE
STANDARDS
FOR
MANY
OF
THE
COMMON
COLOR
SYSTEMS
EXIST
FOR
EXAMPLE
CRTS
ARE
BASED
ON
THE
NATIONAL
TELEVISION
SYSTEMS
COMMITTEE
NTSC
RGB
SYSTEM
WE
CAN
LOOK
AT
DIFFERENCES
IN
COLOR
SYSTEMS
AS
BEING
EQUIVALENT
TO
DIFFER
ENT
COORDINATE
SYSTEMS
FOR
REPRESENTING
OUR
TRISTIMULUS
VALUES
IF
T
AND
T
ARE
THE
REPRESENTATIONS
OF
THE
SAME
COLOR
IN
TWO
DIFFERENT
SYSTEMS
THEN
THERE
IS
A
COLOR
CONVERSION
MATRIX
M
SUCH
THAT
WHETHER
WE
DETERMINE
THIS
MATRIX
FROM
THE
LITERATURE
OR
BY
EXPERIMENTATION
IT
ALLOWS
US
TO
PRODUCE
SIMILAR
DISPLAYS
ON
DIFFERENT
OUTPUT
DEVICES
THERE
ARE
NUMEROUS
POTENTIAL
PROBLEMS
EVEN
WITH
THIS
APPROACH
THE
COLOR
GAMUTS
OF
THE
TWO
SYSTEMS
MAY
NOT
BE
THE
SAME
HENCE
EVEN
AFTER
THE
CONVERSION
OF
TRISTIMULUS
VALUES
A
COLOR
MAY
NOT
BE
PRODUCIBLE
ON
ONE
OF
THE
SYSTEMS
SECOND
THE
PRINTING
AND
GRAPHIC
ARTS
INDUSTRIES
USE
A
FOUR
COLOR
SUBTRACTIVE
SYSTEM
CMYK
THAT
ADDS
BLACK
K
AS
A
FOURTH
PRIMARY
CONVERSION
BETWEEN
RGB
AND
CMYK
OFTEN
REQUIRES
A
GREAT
DEAL
OF
HUMAN
EXPERTISE
THIRD
THERE
ARE
LIMITATIONS
TO
OUR
LINEAR
COLOR
THEORY
THE
DISTANCE
BETWEEN
COLORS
IN
THE
COLOR
CUBE
IS
NOT
A
MEASURE
OF
HOW
FAR
APART
THE
COLORS
ARE
PERCEPTUALLY
FOR
EXAMPLE
HUMANS
ARE
PARTICULARLY
SENSITIVE
TO
COLOR
SHIFTS
IN
BLUE
COLOR
SYSTEMS
SUCH
AS
YUV
AND
CIE
LAB
HAVE
BEEN
CREATED
TO
ADDRESS
SUCH
ISSUES
MOST
RGB
COLOR
SYSTEMS
ARE
BASED
ON
THE
PRIMARIES
IN
REAL
SYSTEMS
SUCH
AS
CRT
PHOSPHORS
AND
FILM
DYES
NONE
CAN
PRODUCE
ALL
THE
COLORS
THAT
WE
CAN
SEE
MOST
COLOR
STANDARDS
ARE
BASED
ON
A
THEORETICAL
THREE
PRIMARY
SYSTEM
CALLED
THE
XYZ
COLOR
SYSTEM
HERE
THE
Y
PRIMARY
IS
THE
LUMINANCE
OF
THE
COLOR
IN
THE
XYZ
SYSTEM
ALL
COLORS
CAN
BE
SPECIFIED
WITH
POSITIVE
TRISTIMULUS
VALUES
WE
USE
MATRICES
TO
CONVERT
FROM
AN
XYZ
COLOR
REPRESENTATION
TO
REPRESENTATIONS
IN
THE
STANDARD
SYSTEMS
COLOR
SPECIALISTS
OFTEN
PREFER
TO
WORK
WITH
CHROMATICITY
COORDINATES
RATHER
THAN
TRISTIMULUS
VALUES
THE
CHROMATICITY
OF
A
COLOR
CONSISTS
OF
THE
THREE
FRACTIONS
OF
THE
COLOR
IN
THE
THREE
PRIMARIES
THUS
IF
WE
HAVE
THE
TRISTIMULUS
VALUES
AND
FOR
A
PARTICULAR
RGB
COLOR
ITS
CHROMATICITY
COORDINATES
ARE
T
T
T
ADDING
THE
THREE
EQUATIONS
WE
HAVE
AND
THUS
WE
CAN
WORK
IN
THE
TWO
DIMENSIONAL
SPACE
FINDING
ONLY
WHEN
ITS
VALUE
IS
NEEDED
THE
INFORMATION
THAT
IS
MISSING
FROM
CHROMATICITY
COORDINATES
WHICH
WAS
CONTAINED
IN
THE
ORIGINAL
TRISTIMULUS
VALUES
IS
THE
SUM
A
VALUE
RELATED
TO
THE
INTENSITY
OF
THE
COLOR
WHEN
WORKING
WITH
COLOR
SYSTEMS
THIS
INTENSITY
IS
OFTEN
NOT
IMPORTANT
TO
ISSUES
RELATED
TO
PRODUCING
COLORS
OR
MATCHING
COLORS
ACROSS
DIFFERENT
SYSTEMS
BECAUSE
EACH
COLOR
FRACTION
MUST
BE
NONNEGATIVE
THE
CHROMATICITY
VALUES
ARE
LIMITED
BY
TI
FIGURE
TRIANGLE
OF
PRODUCIBLE
COLORS
IN
CHROMATICITY
COORDINATES
NM
Y
SPECTRAL
COLORS
CRT
COLORS
NM
NM
X
FIGURE
VISIBLE
COLORS
AND
COLOR
GAMUT
OF
A
DISPLAY
ALL
PRODUCIBLE
COLORS
MUST
LIE
INSIDE
THE
TRIANGLE
IN
FIGURE
FIGURE
SHOWS
THIS
TRIANGLE
FOR
THE
XYZ
SYSTEM
AND
A
CURVE
OF
THE
REPRESENTATION
FOR
EACH
VISIBLE
SPECTRAL
LINE
FOR
THE
XYZ
SYSTEM
THIS
CURVE
MUST
LIE
INSIDE
THE
TRIANGLE
FIGURE
ALSO
SHOWS
THE
RANGE
OF
COLORS
IN
X
Y
CHROMATICITY
COORDINATES
THAT
ARE
PRODUCIBLE
ON
A
TYPICAL
COLOR
PRINTER
OR
CRT
IF
WE
COMPARE
THE
TWO
FIGURES
WE
SEE
THAT
THE
COLORS
INSIDE
THE
CURVE
OF
PURE
SPECTRAL
LINES
BUT
OUTSIDE
THE
GAMUT
OF
THE
PHYSICAL
DISPLAY
CANNOT
BE
DISPLAYED
ON
THE
PHYSICAL
DEVICE
ONE
DEFECT
OF
OUR
DEVELOPMENT
OF
COLOR
IS
THAT
RGB
COLOR
IS
BASED
ON
HOW
COLOR
IS
PRODUCED
AND
MEASURED
RATHER
THAN
ON
HOW
WE
PERCEIVE
A
COLOR
WHEN
WE
SEE
A
GIVEN
G
R
B
A
B
FIGURE
HUE
LIGHTNESS
SATURATION
COLOR
A
USING
THE
RGB
COLOR
CUBE
B
USING
A
SINGLE
CONE
COLOR
WE
DESCRIBE
IT
NOT
BY
THREE
PRIMARIES
BUT
BASED
ON
OTHER
PROPERTIES
SUCH
AS
THE
NAME
WE
GIVE
THE
COLOR
AND
HOW
BRIGHT
A
SHADE
WE
SEE
THE
HUE
SATURATION
LIGHTNESS
HLS
SYSTEM
IS
USED
BY
ARTISTS
AND
SOME
DISPLAY
MANUFACTURERS
THE
HUE
IS
THE
NAME
WE
GIVE
TO
A
COLOR
RED
YELLOW
GOLD
THE
LIGHTNESS
IS
HOW
BRIGHT
THE
COLOR
APPEARS
SATURATION
IS
THE
COLOR
ATTRIBUTE
THAT
DISTINGUISHES
A
PURE
SHADE
OF
A
COLOR
FROM
A
SHADE
OF
THE
SAME
HUE
THAT
HAS
BEEN
MIXED
WITH
WHITE
FORMING
A
PASTEL
SHADE
WE
CAN
RELATE
THESE
ATTRIBUTES
TO
A
TYPICAL
RGB
COLOR
AS
SHOWN
IN
FIGURE
A
GIVEN
A
COLOR
IN
THE
COLOR
CUBE
THE
LIGHTNESS
IS
A
MEASURE
OF
HOW
FAR
THE
POINT
IS
FROM
THE
ORIGIN
BLACK
IF
WE
NOTE
THAT
ALL
THE
COLORS
ON
THE
PRINCIPAL
DIAGONAL
OF
THE
CUBE
GOING
FROM
BLACK
TO
WHITE
ARE
SHADES
OF
GRAY
AND
ARE
TOTALLY
UNSATURATED
THEN
THE
SATURATION
IS
A
MEASURE
OF
HOW
FAR
THE
GIVEN
COLOR
IS
FROM
THIS
DIAGONAL
FINALLY
THE
HUE
IS
A
MEASURE
OF
WHERE
THE
COLOR
VECTOR
IS
POINTING
HLS
COLORS
ARE
USUALLY
DESCRIBED
IN
TERMS
OF
A
COLOR
CONE
AS
SHOWN
IN
FIGURE
B
OR
A
DOUBLE
CONE
THAT
ALSO
CONVERGES
AT
THE
TOP
FROM
OUR
PERSPECTIVE
WE
CAN
LOOK
AT
THE
HLS
SYSTEM
AS
PROVIDING
A
REPRESENTATION
OF
AN
RGB
COLOR
IN
POLAR
COORDINATES
THE
COLOR
MATRIX
RGB
COLORS
AND
RGBA
COLORS
CAN
BE
MANIPULATED
AS
ANY
OTHER
VECTOR
TYPE
IN
PAR
TICULAR
WE
CAN
ALTER
THEIR
COMPONENTS
BY
MULTIPLYING
BY
A
MATRIX
WE
CALL
THE
COLOR
MATRIX
FOR
EXAMPLE
IF
WE
USE
AN
RGBA
COLOR
REPRESENTATION
THE
MATRIX
MULTIPLICA
TION
CONVERTS
A
COLOR
RGBA
TOA
NEW
COLOR
RTG
TBTAT
BY
THE
MATRIX
MULTIPLICATION
RT
R
BT
B
THUS
IF
WE
ARE
DEALING
WITH
OPAQUE
SURFACES
FOR
WHICH
A
THE
MATRIX
C
Y
CONVERTS
THE
ADDITIVE
REPRESENTATION
OF
A
COLOR
TO
ITS
SUBTRACTIVE
REPRESENTATION
GAMMA
CORRECTION
IN
CHAPTER
WE
DEFINED
BRIGHTNESS
AS
PERCEIVED
INTENSITY
AND
OBSERVED
THAT
THE
HUMAN
VISUAL
SYSTEM
PERCEIVES
INTENSITY
IN
A
LOGARITHMIC
MANNER
AS
DEPICTED
IN
FIGURE
ONE
CONSEQUENCE
OF
THIS
PROPERTY
IS
THAT
IF
WE
WANT
THE
BRIGHTNESS
STEPS
TO
APPEAR
TO
BE
UNIFORMLY
SPACED
THE
INTENSITIES
THAT
WE
ASSIGN
TO
PIXELS
SHOULD
INCREASE
EXPONENTIALLY
THESE
STEPS
CAN
BE
CALCULATED
FROM
THE
MEASURED
MINIMUM
AND
MAXIMUM
INTENSITIES
THAT
A
DISPLAY
CAN
GENERATE
IN
ADDITION
THE
INTENSITY
I
OF
A
CRT
IS
RELATED
TO
THE
VOLTAGE
V
APPLIED
BY
I
VΓ
OR
LOG
I
Γ
LOG
V
WHERE
THE
CONSTANTS
Γ
AND
ARE
PROPERTIES
OF
THE
PARTICULAR
CRT
ONE
IMPLICATION
OF
THESE
TWO
RESULTS
IS
THAT
TWO
MONITORS
MAY
GENERATE
DIFFERENT
BRIGHTNESSES
FOR
THE
SAME
VALUES
IN
THE
FRAME
BUFFER
ONE
WAY
TO
CORRECT
FOR
THIS
PROBLEM
IS
TO
HAVE
A
LOOKUP
TABLE
IN
THE
DISPLAY
WHOSE
VALUES
CAN
BE
ADJUSTED
FOR
THE
PARTICULAR
CHARACTER
ISTICS
OF
THE
MONITOR
THE
GAMMA
CORRECTION
THERE
IS
AN
ADDITIONAL
PROBLEM
WITH
CRTS
IT
IS
NOT
POSSIBLE
TO
HAVE
A
CRT
WHOSE
DISPLAY
IS
TOTALLY
BLACK
WHEN
NO
SIGNAL
IS
APPLIED
THE
MINIMUM
DISPLAYED
INTENSITY
IS
CALLED
THE
DARK
FIELD
VALUE
AND
CAN
BE
PROBLEMATIC
ESPECIALLY
WHEN
CRT
TECHNOLOGY
IS
USED
TO
PROJECT
IMAGES
THE
CONTRAST
RATIO
OF
A
DISPLAY
IS
THE
RATIO
OF
THE
MAXIMUM
TO
MINIMUM
BRIGHTNESS
NEWER
DISPLAY
TECHNOLOGIES
HAVE
CONTRAST
RATIOS
IN
THE
THOUSANDS
DITHERING
AND
HALFTONING
WE
HAVE
SPECIFIED
A
COLOR
BUFFER
BY
ITS
SPATIAL
RESOLUTION
THE
NUMBER
OF
PIXELS
AND
BY
ITS
PRECISION
THE
NUMBER
OF
COLORS
IT
CAN
DISPLAY
IF
WE
VIEW
THESE
SEPARATE
NUMBERS
AS
FIXED
WE
SAY
THAT
A
HIGH
RESOLUTION
BLACK
AND
WHITE
LASER
PRINTER
CAN
DISPLAY
ONLY
BIT
PIXELS
THIS
ARGUMENT
ALSO
SEEMS
TO
IMPLY
THAT
ANY
BLACK
AND
WHITE
MEDIUM
SUCH
AS
A
BOOK
CANNOT
DISPLAY
IMAGES
WITH
MULTIPLE
SHADES
WE
KNOW
FROM
EXPERIENCE
THAT
THAT
IS
NOT
THE
CASE
THE
TRICK
IS
TO
TRADE
SPATIAL
RESOLUTION
FOR
GRAYSCALE
OR
COLOR
PRECISION
HALFTONING
TECHNIQUES
IN
THE
PRINTING
INDUSTRY
USE
PHOTOGRAPHIC
MEANS
TO
SIMULATE
GRAY
LEVELS
BY
CREATING
PATTERNS
OF
BLACK
DOTS
OF
VARYING
SIZE
THE
X
INTENSITY
FIGURE
LOGARITHMIC
BRIGHTNESS
FIGURE
DIGITAL
HALFTONE
PATTERNS
HUMAN
VISUAL
SYSTEM
TENDS
TO
MERGE
SMALL
DOTS
TOGETHER
AND
SEES
NOT
THE
DOTS
BUT
RATHER
AN
INTENSITY
PROPORTIONAL
TO
THE
RATIO
OF
WHITE
TO
BLACK
IN
A
SMALL
AREA
DIGITAL
HALFTONES
DIFFER
BECAUSE
THE
SIZE
AND
LOCATION
OF
DISPLAYED
PIXELS
ARE
FIXED
CONSIDER
A
GROUP
OF
BIT
PIXELS
AS
SHOWN
IN
FIGURE
IF
WE
LOOK
AT
THIS
PATTERN
FROM
FAR
AWAY
WE
SEE
NOT
THE
INDIVIDUAL
PIXELS
BUT
RATHER
A
GRAY
LEVEL
BASED
ON
THE
NUMBER
OF
BLACK
PIXELS
FOR
OUR
EXAMPLE
ALTHOUGH
THERE
ARE
DIFFERENT
PATTERNS
OF
BLACK
AND
WHITE
PIXELS
THERE
ARE
ONLY
POSSIBLE
SHADES
CORRESPONDING
TO
TO
BLACK
PIXELS
IN
THE
ARRAY
THERE
ARE
MANY
ALGORITHMS
FOR
GENERATING
HALFTONE
OR
DITHER
PATTERNS
THE
SIMPLEST
PICKS
PATTERNS
FOR
OUR
EXAMPLE
AND
USES
THEM
TO
CREATE
A
DISPLAY
WITH
RATHER
THAN
TWO
GRAY
LEVELS
ALTHOUGH
AT
THE
COST
OF
DECREASING
THE
SPATIAL
RESOLUTION
BY
A
FACTOR
OF
THE
SIMPLE
ALGORITHM
ALWAYS
USING
THE
SAME
ARRAY
TO
SIMULATE
A
SHADE
CAN
GENERATE
BEAT
OR
MOIRE
PATTERNS
WHEN
DISPLAYING
ANYTHING
REGULAR
SUCH
PATTERNS
ARISE
WHENEVER
WE
IMAGE
TWO
REGULAR
PHENOMENA
BECAUSE
WE
SEE
THE
SUM
AND
DIF
FERENCES
OF
THEIR
FREQUENCIES
SUCH
EFFECTS
ARE
CLOSELY
RELATED
TO
THE
ALIASING
PROBLEMS
WE
SHALL
DISCUSS
IN
CHAPTER
MANY
DITHERING
TECHNIQUES
ARE
BASED
ON
SIMPLY
RANDOMIZING
THE
LEAST
SIGNIFICANT
BIT
OF
THE
LUMINANCE
OR
OF
EACH
COLOR
COMPONENT
MORE
SOPHISTICATED
DITHER
ALGO
RITHMS
USE
RANDOMIZATION
TO
CREATE
PATTERNS
WITH
THE
CORRECT
AVERAGE
PROPERTIES
BUT
AVOID
THE
REPETITION
THAT
CAN
LEAD
TO
MOIRE
EFFECTS
SEE
EXERCISE
HALFTONING
OR
DITHERING
IS
OFTEN
USED
WITH
COLOR
ESPECIALLY
WITH
HARD
COPY
DIS
PLAYS
SUCH
AS
INK
JET
PRINTERS
THAT
CAN
PRODUCE
ONLY
FULLY
ON
OR
OFF
COLORS
EACH
PRI
MARY
CAN
BE
DITHERED
TO
PRODUCE
MORE
VISUAL
COLORS
OPENGL
SUPPORTS
SUCH
DISPLAYS
AND
ALLOWS
THE
USER
TO
ENABLE
DITHERING
GLENABLE
COLOR
DITHERING
ALLOWS
COLOR
MONITORS
TO
PRODUCE
SMOOTH
COLOR
DISPLAYS
AND
NORMALLY
DITHERING
IS
ENABLED
BECAUSE
DITHERING
IS
SO
EFFECTIVE
DISPLAYS
CAN
WORK
WELL
WITH
A
LIMITED
NUM
BER
OF
BITS
PER
COLOR
ALLOWING
FRAME
BUFFERS
TO
HAVE
A
LIMITED
AMOUNT
OF
MEMORY
IN
MANY
APPLICATIONS
WE
NEED
TO
USE
THE
OPENGL
QUERY
FUNCTION
GLGETINTEGERV
TO
FIND
OUT
HOW
MANY
BITS
ARE
BEING
USED
FOR
EACH
COLOR
SINCE
THIS
INFORMATION
IS
IMPOR
TANT
WHEN
WE
USE
SOME
OF
THE
TECHNIQUES
FROM
CHAPTER
THAT
READ
PIXELS
FROM
THE
FRAME
BUFFER
IF
DITHERING
IS
ENABLED
AND
WE
READ
PIXELS
OUT
OF
THE
FRAME
BUFFER
PIXELS
THAT
WERE
WRITTEN
WITH
THE
SAME
RGB
VALUES
MAY
RETURN
DIFFERENT
VALUES
WHEN
READ
IF
THESE
SMALL
DIFFERENCES
ARE
IMPORTANT
DITHERING
SHOULD
BE
DISABLED
BEFORE
READING
FROM
THE
FRAME
BUFFER
THE
GEOMETRY
ENGINE
THAT
WAS
THE
BASIS
OF
MANY
SILICON
GRAPHICS
WORKSTATIONS
IS
A
VLSI
CHIP
THAT
PERFORMED
GEOMETRIC
TRANSFORMATIONS
AND
CLIPPING
THROUGH
A
HARDWARE
PIPELINE
GL
THE
PREDECESSOR
OF
OPENGL
WAS
DEVELOPED
AS
AN
API
FOR
USERS
OF
THESE
WORKSTATIONS
MUCH
OF
THE
OPENGL
LITERATURE
ALSO
FOLLOWS
THE
PIPELINE
APPROACH
WE
SHOULD
KEEP
IN
MIND
HOWEVER
THAT
OPENGL
IS
AN
API
IT
DOES
NOT
SAY
ANYTHING
ABOUT
THE
UNDERLYING
IMPLEMENTATION
IN
PRINCIPLE
AN
IMAGE
DEFINED
BY
AN
OPENGL
PROGRAM
COULD
BE
OBTAINED
FROM
A
RAY
TRACER
WE
SHOULD
CARRY
AWAY
TWO
LESSONS
FROM
OUR
EMPHASIS
ON
PIPELINE
ARCHITECTURES
FIRST
THIS
ARCHITECTURE
PROVIDES
AN
AID
TO
THE
APPLICATIONS
PROGRAMMER
IN
UNDERSTANDING
THE
PROCESS
OF
CREATING
IMAGES
SECOND
AT
PRESENT
THE
PIPELINE
VIEW
CAN
LEAD
TO
EFFICIENT
HARDWARE
AND
SOFTWARE
IMPLEMENTATIONS
THE
EXAMPLE
OF
THE
Z
BUFFER
ALGORITHM
IS
ILLUSTRATIVE
OF
THE
RELATIONSHIP
BETWEEN
HARDWARE
AND
SOFTWARE
FIFTEEN
YEARS
AGO
MANY
HIDDEN
SURFACE
REMOVAL
ALGORITHMS
WERE
USED
OF
WHICH
THE
Z
BUFFER
ALGORITHM
WAS
ONLY
ONE
THE
AVAILABILITY
OF
FAST
DENSE
INEXPENSIVE
MEMORY
HAS
MADE
THE
Z
BUFFER
ALGORITHM
THE
DOMINANT
METHOD
FOR
HIDDEN
SURFACE
REMOVAL
A
RELATED
EXAMPLE
IS
THAT
OF
WORKSTATION
ARCHITECTURES
WHERE
SPECIAL
PURPOSE
GRAPHICS
CHIPS
HAVE
MADE
REMARKABLE
ADVANCES
IN
JUST
THE
PAST
FEW
YEARS
NOT
ONLY
HAS
GRAPHICS
PERFORMANCE
INCREASED
AT
A
RATE
THAT
EXCEEDS
MOORE
LAW
BUT
MANY
NEW
FEATURES
HAVE
BECOME
AVAILABLE
IN
THE
GRAPHICS
PROCESSORS
THE
WHOLE
APPROACH
WE
HAVE
TAKEN
IN
THIS
BOOK
IS
BASED
ON
THESE
ARCHITECTURES
SO
WHAT
DOES
THE
FUTURE
HOLD
CERTAINLY
GRAPHICS
SYSTEMS
WILL
GET
FASTER
AND
LESS
EXPENSIVE
MORE
THAN
ANY
OTHER
FACTOR
ADVANCES
IN
HARDWARE
PROBABLY
WILL
DICTATE
WHAT
FUTURE
GRAPHICS
SYSTEMS
WILL
LOOK
LIKE
AT
THE
PRESENT
HARDWARE
DEVELOPMENT
IS
BEING
DRIVEN
BY
THE
VIDEO
GAME
INDUSTRY
FOR
LESS
THAN
WE
CAN
PURCHASE
A
GRAPH
ICS
CARD
THAT
EXCEEDS
THE
PERFORMANCE
OF
GRAPHICS
WORKSTATIONS
THAT
A
FEW
YEARS
AGO
WOULD
HAVE
COST
MORE
THAN
THE
FEATURES
AND
PERFORMANCE
OF
THESE
CARDS
ARE
OPTIMIZED
FOR
THE
NEEDS
OF
THE
COMPUTER
GAME
INDUSTRY
THUS
WE
DO
NOT
SEE
UNIFORM
SPEEDUPS
IN
THE
VARIOUS
GRAPHICS
FUNCTIONS
THAT
WE
HAVE
PRESENTED
IN
ADDITION
NEW
HARDWARE
FEATURES
ARE
APPEARING
FAR
FASTER
THAN
THEY
CAN
BE
INCORPORATED
INTO
STAN
DARD
APIS
HOWEVER
THE
SPEED
AT
WHICH
THESE
PROCESSORS
OPERATE
HAS
CHALLENGED
BOTH
THE
GRAPHICS
AND
SCIENTIFIC
COMMUNITIES
TO
DISCOVER
NEW
ALGORITHMS
TO
SOLVE
PROBLEMS
THAT
UNTIL
NOW
HAD
ALWAYS
BEEN
SOLVED
USING
CONVENTIONAL
ARCHITECTURES
ON
THE
SOFTWARE
SIDE
THE
LOW
COST
AND
SPEED
OF
RECENT
HARDWARE
HAS
ENABLED
SOFT
WARE
DEVELOPERS
TO
PRODUCE
RENDERING
SOFTWARE
THAT
ALLOWS
USERS
TO
BALANCE
RENDERING
TIME
AND
QUALITY
OF
RENDERING
HENCE
A
USER
CAN
ADD
SOME
RAY
TRACED
OBJECTS
TO
A
SCENE
THE
NUMBER
DEPENDING
ON
HOW
LONG
SHE
IS
WILLING
TO
WAIT
FOR
THE
RENDERING
THE
FUTURE
OF
STANDARD
APIS
IS
MUCH
LESS
CLEAR
ON
ONE
HAND
USERS
IN
THE
SCIENTIFIC
COMMUNITY
PREFER
STABLE
APIS
SO
THAT
APPLICATION
CODES
WILL
HAVE
A
LONG
LIFETIME
ON
THE
OTHER
HAND
USERS
WANT
TO
EXPLOIT
NEW
HARDWARE
FEATURES
THAT
ARE
NOT
SUPPORTED
ON
ALL
SYSTEMS
OPENGL
HAS
TRIED
TO
TAKE
A
MIDDLE
ROAD
UNTIL
OPENGL
ALL
RELEASES
WERE
BACKWARD
COMPATIBLE
SO
APPLICATIONS
DEVELOPED
ON
EARLIER
VERSIONS
WERE
GUAR
ANTEED
TO
RUN
ON
NEW
RELEASES
OPENGL
AND
LATER
VERSIONS
DEPRECATED
MANY
CORE
FEATURES
OF
EARLIER
VERSIONS
INCLUDING
IMMEDIATE
MODE
RENDERING
AND
MOST
OF
THE
DEFAULT
BEHAVIOR
OF
THE
FIXED
FUNCTION
PIPELINE
THIS
MAJOR
CHANGE
IN
PHILOSOPHY
HAS
ALLOWED
OPENGL
TO
RAPIDLY
INCORPORATE
NEW
HARDWARE
FEATURES
FOR
THOSE
WHO
NEED
TO
RUN
OLDER
CODE
ALMOST
ALL
IMPLEMENTATIONS
SUPPORT
A
COMPATIBILITY
EXTENSION
WITH
ALL
THE
DEPRECATED
FUNCTIONS
NUMEROUS
ADVANCED
ARCHITECTURES
UNDER
EXPLORATION
USE
MASSIVE
PARALLELISM
HOW
PARALLELISM
CAN
BE
EXPLOITED
MOST
EFFECTIVELY
FOR
COMPUTER
GRAPHICS
IS
STILL
AN
OPEN
ISSUE
OUR
TWO
APPROACHES
TO
RENDERING
OBJECT
ORIENTED
AND
IMAGE
ORIENTED
LEAD
TO
TWO
ENTIRELY
DIFFERENT
WAYS
TO
DEVELOP
A
PARALLEL
RENDERER
WHICH
WE
SHALL
EXPLORE
FURTHER
IN
CHAPTER
WE
HAVE
BARELY
SCRATCHED
THE
SURFACE
OF
IMPLEMENTATION
THE
LITERATURE
IS
RICH
WITH
ALGORITHMS
FOR
EVERY
ASPECT
OF
THE
IMPLEMENTATION
PROCESS
THE
REFERENCES
SHOULD
HELP
YOU
TO
EXPLORE
THIS
TOPIC
FURTHER
SUGGESTED
READINGS
THE
BOOKS
BY
ROGERS
AND
BY
FOLEY
AND
COLLEAGUES
CONTAIN
MANY
MORE
ALGORITHMS
THAN
WE
CAN
PRESENT
HERE
ALSO
SEE
THE
SERIES
GRAPHIC
GEMS
AND
GPU
GEMS
BOOKS
SUCH
AS
MO
LLER
AND
HAINES
AND
EBERLY
COVER
THE
INFLUENCE
OF
RECENT
ADVANCES
IN
HARDWARE
THE
COHEN
SUTHERLAND
CLIPPING
ALGORITHM
GOES
BACK
TO
THE
EARLY
YEARS
OF
COMPUTER
GRAPHICS
AS
DOES
BRESENHAM
ALGORITHM
WHICH
WAS
ORIGINALLY
PROPOSED
FOR
PEN
PLOTTERS
SEE
AND
FOR
THE
LIANG
BARSKY
AND
SUTHERLAND
HOGMAN
CLIPPERS
ALGORITHMS
FOR
TRIANGULATION
CAN
BE
FOUND
IN
REFERENCES
ON
COMPUTATIONAL
GE
OMETRY
SEE
FOR
EXAMPLE
DE
BERG
WHICH
ALSO
DISCUSSES
DELAUNAY
TRIANGULA
TION
WHICH
WE
DISCUSS
IN
CHAPTER
THE
Z
BUFFER
ALGORITHM
WAS
DEVELOPED
BY
CATMULL
SEE
SUTHERLAND
FOR
A
DISCUSSION
OF
VARIOUS
APPROACHES
TO
HIDDEN
SURFACE
REMOVAL
OUR
DECISION
TO
AVOID
DETAILS
OF
THE
HARDWARE
DOES
NOT
IMPLY
THAT
THE
HARDWARE
IS
EITHER
SIMPLE
OR
UNINTERESTING
THE
RATE
AT
WHICH
A
MODERN
GRAPHICS
PROCESSOR
CAN
DISPLAY
GRAPHICAL
ENTITIES
REQUIRES
SOPHISTICATED
AND
CLEVER
HARDWARE
DESIGNS
THE
DISCUSSION
BY
MOLNAR
AND
FUCHS
IN
SHOWS
A
VARIETY
OF
APPROACHES
PRATT
PROVIDES
MATRICES
TO
CONVERT
AMONG
VARIOUS
COLOR
SYSTEMS
HALF
TONE
AND
DITHERING
ARE
DISCUSSED
BY
JARVIS
AND
BY
KNUTH
EXERCISES
CONSIDER
TWO
LINE
SEGMENTS
REPRESENTED
IN
PARAMETRIC
FORM
P
Α
Α
Q
Β
Β
FIND
A
PROCEDURE
FOR
DETERMINING
WHETHER
THE
SEGMENTS
INTERSECT
AND
IF
THEY
DO
FOR
FINDING
THE
POINT
OF
INTERSECTION
EXTEND
THE
ARGUMENT
OF
EXERCISE
TO
FIND
A
METHOD
FOR
DETERMINING
WHETHER
TWO
FLAT
POLYGONS
INTERSECT
PROVE
THAT
CLIPPING
A
CONVEX
OBJECT
AGAINST
ANOTHER
CONVEX
OBJECT
RESULTS
IN
AT
MOST
ONE
CONVEX
OBJECT
IN
WHAT
WAYS
CAN
YOU
PARALLELIZE
THE
IMAGE
AND
OBJECT
ORIENTED
APPROACHES
TO
IMPLEMENTATION
BECAUSE
BOTH
NORMALS
AND
VERTICES
CAN
BE
REPRESENTED
IN
HOMOGENEOUS
COOR
DINATES
BOTH
CAN
BE
OPERATED
ON
BY
THE
MODEL
VIEW
TRANSFORMATION
SHOW
THAT
NORMALS
MAY
NOT
BE
PRESERVED
BY
THE
TRANSFORMATION
DERIVE
THE
VIEWPORT
TRANSFORMATION
EXPRESS
IT
IN
TERMS
OF
THE
THREE
DIMENSIONAL
SCALING
AND
TRANSLATION
MATRICES
USED
TO
REPRESENT
AFFINE
TRANS
FORMATIONS
IN
TWO
DIMENSIONS
PRE
RASTER
GRAPHICS
SYSTEMS
WERE
ABLE
TO
DISPLAY
ONLY
LINES
PROGRAMMERS
PRO
DUCED
THREE
DIMENSIONAL
IMAGES
USING
HIDDEN
LINE
REMOVAL
TECHNIQUES
MANY
CURRENT
APIS
ALLOW
US
TO
PRODUCE
WIREFRAME
IMAGES
COMPOSED
OF
ONLY
LINES
IN
WHICH
THE
HIDDEN
LINES
THAT
DEFINE
NONVISIBLE
SURFACES
HAVE
BEEN
REMOVED
HOW
DOES
THIS
PROBLEM
DIFFER
FROM
THAT
OF
THE
POLYGON
HIDDEN
SURFACE
REMOVAL
THAT
WE
HAVE
CONSIDERED
DERIVE
A
HIDDEN
LINE
REMOVAL
ALGORITHM
FOR
OBJECTS
THAT
CONSIST
OF
THE
EDGES
OF
PLANAR
POLYGONS
OFTEN
WE
DISPLAY
FUNCTIONS
OF
THE
FORM
Y
F
X
Z
BY
DISPLAYING
A
RECTANGULAR
MESH
GENERATED
BY
THE
SET
OF
VALUES
F
XI
ZJ
EVALUATED
AT
REGULAR
INTERVALS
IN
X
AND
Z
HIDDEN
SURFACE
REMOVAL
SHOULD
BE
APPLIED
BECAUSE
PARTS
OF
THE
SURFACE
CAN
BE
OBSCURED
FROM
VIEW
BY
OTHER
PARTS
DERIVE
TWO
ALGORITHMS
ONE
USING
HIDDEN
SURFACE
REMOVAL
AND
THE
OTHER
USING
HIDDEN
LINE
REMOVAL
TO
DISPLAY
SUCH
A
MESH
ALTHOUGH
WE
ARGUED
THAT
THE
COMPLEXITY
OF
THE
IMAGE
SPACE
APPROACH
TO
HIDDEN
SURFACE
REMOVAL
IS
PROPORTIONAL
TO
THE
NUMBER
OF
POLYGONS
PERFOR
MANCE
STUDIES
HAVE
SHOWN
ALMOST
CONSTANT
PERFORMANCE
EXPLAIN
THIS
RESULT
CONSIDER
A
SCENE
COMPOSED
OF
ONLY
SOLID
THREE
DIMENSIONAL
POLYHEDRA
CAN
YOU
DEVISE
AN
OBJECT
SPACE
HIDDEN
SURFACE
REMOVAL
ALGORITHM
FOR
THIS
CASE
HOW
MUCH
DOES
IT
HELP
IF
YOU
KNOW
THAT
ALL
THE
POLYHEDRA
ARE
CONVEX
WE
CAN
LOOK
AT
OBJECT
SPACE
APPROACHES
TO
HIDDEN
SURFACE
REMOVAL
AS
ANALO
GOUS
TO
SORTING
ALGORITHMS
HOWEVER
WE
ARGUED
THAT
THE
FORMER
COMPLEXITY
IS
O
WE
KNOW
THAT
ONLY
THE
WORST
PERFORMING
SORTING
ALGORITHMS
HAVE
SUCH
POOR
PERFORMANCE
AND
MOST
ARE
O
K
LOG
K
DOES
IT
FOLLOW
THAT
OBJECT
SPACE
HIDDEN
SURFACE
REMOVAL
ALGORITHMS
HAVE
SIMILAR
COMPLEXITY
EXPLAIN
YOUR
ANSWER
DEVISE
A
METHOD
FOR
TESTING
WHETHER
ONE
PLANAR
POLYGON
IS
FULLY
ON
ONE
SIDE
OF
ANOTHER
PLANAR
POLYGON
WHAT
ARE
THE
DIFFERENCES
BETWEEN
OUR
IMAGE
SPACE
APPROACHES
TO
HIDDEN
SURFACE
REMOVAL
AND
TO
RAY
TRACING
CAN
WE
USE
RAY
TRACING
AS
AN
ALTERNATE
TECHNIQUE
TO
HIDDEN
SURFACE
REMOVAL
WHAT
ARE
THE
ADVANTAGES
AND
DISADVAN
TAGES
OF
SUCH
AN
APPROACH
WRITE
A
PROGRAM
TO
GENERATE
THE
LOCATIONS
OF
PIXELS
ALONG
A
RASTERIZED
LINE
SEGMENT
USING
BRESENHAM
ALGORITHM
CHECK
THAT
YOUR
PROGRAM
WORKS
FOR
ALL
SLOPES
AND
ALL
POSSIBLE
LOCATIONS
OF
THE
ENDPOINTS
WHAT
IS
THE
INITIAL
VALUE
OF
THE
DECISION
VARIABLE
BRESENHAM
ALGORITHM
CAN
BE
EXTENDED
TO
CIRCLES
CONVINCE
YOURSELF
OF
THIS
STATEMENT
BY
CONSIDERING
A
CIRCLE
CENTERED
AT
THE
ORIGIN
WHICH
PARTS
OF
THE
CIRCLE
MUST
BE
GENERATED
BY
AN
ALGORITHM
AND
WHICH
PARTS
CAN
BE
FOUND
BY
SYM
METRY
CAN
YOU
FIND
A
PART
OF
THE
CIRCLE
SUCH
THAT
IF
WE
KNOW
A
POINT
GENERATED
BY
A
SCAN
CONVERSION
ALGORITHM
WE
CAN
REDUCE
THE
NUMBER
OF
CANDIDATES
FOR
THE
NEXT
PIXEL
SHOW
HOW
TO
USE
FLOOD
FILL
TO
GENERATE
A
MAZE
LIKE
THE
ONE
YOU
CREATED
IN
EXERCISE
SUPPOSE
THAT
YOU
TRY
TO
EXTEND
FLOOD
FILL
TO
ARBITRARY
CLOSED
CURVES
BY
SCAN
CONVERTING
THE
CURVE
AND
THEN
APPLYING
THE
SAME
FILL
ALGORITHM
THAT
WE
USED
FOR
POLYGONS
WHAT
PROBLEMS
CAN
ARISE
IF
YOU
USE
THIS
APPROACH
CONSIDER
THE
EDGE
OF
A
POLYGON
BETWEEN
VERTICES
AT
AND
DERIVE
AN
EFFICIENT
ALGORITHM
FOR
COMPUTING
THE
INTERSECTION
OF
ALL
SCAN
LINES
WITH
THIS
EDGE
ASSUME
THAT
YOU
ARE
WORKING
IN
WINDOW
COORDINATES
VERTICAL
AND
HORIZONTAL
EDGES
ARE
POTENTIALLY
PROBLEMATIC
FOR
POLYGON
FILL
AL
GORITHMS
HOW
WOULD
YOU
HANDLE
THESE
CASES
FOR
THE
ALGORITHMS
THAT
WE
HAVE
PRESENTED
IN
TWO
DIMENSIONAL
GRAPHICS
IF
TWO
POLYGONS
OVERLAP
WE
CAN
ENSURE
THAT
THEY
ARE
RENDERED
IN
THE
SAME
ORDER
BY
ALL
IMPLEMENTATIONS
BY
ASSOCIATING
A
PRIORITY
ATTRIBUTE
WITH
EACH
POLYGON
POLYGONS
ARE
RENDERED
IN
REVERSE
PRIORITY
ORDER
THAT
IS
THE
HIGHEST
PRIORITY
POLYGON
IS
RENDERED
LAST
HOW
SHOULD
WE
MODIFY
OUR
POLYGON
FILL
ALGORITHMS
TO
TAKE
PRIORITY
INTO
ACCOUNT
A
STANDARD
ANTIALIASING
TECHNIQUE
USED
IN
RAY
TRACING
IS
TO
CAST
RAYS
NOT
ONLY
THROUGH
THE
CENTER
OF
EACH
PIXEL
BUT
ALSO
THROUGH
THE
PIXEL
FOUR
CORNERS
WHAT
IS
THE
INCREASE
IN
WORK
COMPARED
TO
CASTING
A
SINGLE
RAY
THROUGH
THE
CENTER
ALTHOUGH
AN
IDEAL
PIXEL
IS
A
SQUARE
OF
UNIT
PER
SIDE
MOST
CRT
SYSTEMS
GENERATE
ROUND
PIXELS
THAT
CAN
BE
APPROXIMATED
AS
CIRCLES
OF
UNIFORM
INTENSITY
IF
A
COMPLETELY
FULL
UNIT
SQUARE
HAS
INTENSITY
AND
AN
EMPTY
SQUARE
HAS
INTENSITY
HOW
DOES
THE
INTENSITY
OF
A
DISPLAYED
PIXEL
VARY
WITH
THE
RADIUS
OF
THE
CIRCLE
CONSIDER
A
BILEVEL
DISPLAY
WITH
ROUND
PIXELS
DO
YOU
THINK
IT
IS
WISER
TO
USE
SMALL
CIRCLES
OR
LARGE
CIRCLES
FOR
FOREGROUND
COLORED
PIXELS
EXPLAIN
YOUR
AN
SWER
WHY
IS
DEFOCUSING
THE
BEAM
OF
A
CRT
SOMETIMES
CALLED
THE
POOR
PERSON
ANTIALIASING
SUPPOSE
THAT
A
MONOCHROME
DISPLAY
HAS
A
MINIMUM
INTENSITY
OUTPUT
OF
IMIN
A
CRT
DISPLAY
IS
NEVER
COMPLETELY
BLACK
AND
A
MAXIMUM
OUTPUT
OF
IMAX
GIVEN
THAT
WE
PERCEIVE
INTENSITIES
IN
A
LOGARITHMIC
MANNER
HOW
SHOULD
WE
ASSIGN
K
INTENSITY
LEVELS
SUCH
THAT
THE
STEPS
APPEAR
UNIFORM
GENERATE
A
HALFTONE
ALGORITHM
BASED
ON
THE
FOLLOWING
IDEA
SUPPOSE
THAT
GRAY
LEVELS
VARY
FROM
TO
AND
THAT
WE
HAVE
A
RANDOM
NUMBER
GENERATOR
THAT
PRODUCES
RANDOM
NUMBERS
THAT
ARE
UNIFORMLY
DISTRIBUTED
OVER
THIS
INTERVAL
IF
WE
PICKA
GRAY
LEVEL
G
G
PERCENT
OF
THE
RANDOM
NUMBERS
GENERATED
WILL
BE
LESS
THAN
G
IMAGES
PRODUCED
ON
DISPLAYS
THAT
SUPPORT
ONLY
A
FEW
COLORS
OR
GRAY
LEVELS
TEND
TO
SHOW
CONTOUR
EFFECTS
BECAUSE
THE
VIEWER
CAN
DETECT
THE
DIFFERENCES
BETWEEN
ADJACENT
SHADES
ONE
TECHNIQUE
FOR
AVOIDING
THIS
VISUAL
EFFECT
IS
TO
ADD
A
LITTLE
NOISE
JITTER
TO
THE
PIXEL
VALUES
WHY
DOES
THIS
TECHNIQUE
WORK
HOW
MUCH
NOISE
SHOULD
YOU
ADD
DOES
IT
MAKE
SENSE
TO
CONCLUDE
THAT
THE
DEGRADED
IMAGE
CREATED
BY
THE
ADDITION
OF
NOISE
IS
OF
HIGHER
QUALITY
THAN
THAT
OF
THE
ORIGINAL
IMAGE
SHOW
THAT
THE
AREA
OF
A
TWO
DIMENSIONAL
POLYGON
SPECIFIED
BY
THE
VERTICES
YI
IS
GIVEN
BY
I
YI
YI
XI
XI
WHAT
IS
THE
SIGNIFICANCE
OF
A
NEGATIVE
AREA
HINT
CONSIDER
THE
AREAS
OF
THE
TRAPEZOIDS
FORMED
BY
TWO
SUCCESSIVE
VERTICES
AND
CORRESPONDING
VALUES
ON
THE
X
AXIS
THIS
PAGE
INTENTIONALLY
LEFT
BLANK
HUS
FAR
WE
HAVE
WORKED
DIRECTLY
WITH
GEOMETRIC
OBJECTS
SUCH
AS
LINES
POLYGONS
AND
POLYHEDRA
ALTHOUGH
WE
UNDERSTOOD
THAT
IF
VISIBLE
THESE
ENTITIES
WOULD
EVENTUALLY
BE
RASTERIZED
INTO
PIXELS
IN
THE
FRAME
BUFFER
WE
DID
NOT
HAVE
TO
CONCERN
OURSELVES
WITH
WORKING
WITH
PIXELS
DIRECTLY
OVER
THE
LAST
YEARS
THE
MAJOR
ADVANCES
IN
HARDWARE
AND
SOFTWARE
HAVE
EVOLVED
TO
ALLOW
THE
APPLICATION
PROGRAM
TO
ACCESS
THE
FRAME
BUFFER
BOTH
DIRECTLY
AND
INDIRECTLY
MANY
OF
THE
MOST
EXCITING
METHODS
THAT
HAVE
EVOLVED
OVER
THE
PAST
TWO
DECADES
RELY
ON
INTERACTIONS
BETWEEN
THE
APPLICATION
PROGRAM
AND
VARIOUS
BUFFERS
TEXTURE
MAPPING
ANTIALIASING
COMPOSITING
AND
ALPHA
BLENDING
ARE
ONLY
A
FEW
OF
THE
TECHNIQUES
THAT
BECOME
POSSIBLE
WHEN
THE
API
ALLOWS
US
TO
WORK
WITH
DISCRETE
BUFFERS
AT
THE
SAME
TIME
GPUS
HAVE
EVOLVED
TO
INCLUDE
A
LARGE
AMOUNT
OF
MEMORY
TO
SUPPORT
DISCRETE
TECHNIQUES
THIS
CHAPTER
INTRODUCES
THESE
TECHNIQUES
FOCUSING
ON
THOSE
THAT
ARE
SUPPORTED
BY
OPENGL
AND
BY
SIMILAR
APIS
WE
START
BY
LOOKING
AT
THE
FRAME
BUFFER
IN
MORE
DETAIL
AND
THE
BASIS
FOR
WORKING
WITH
ARRAYS
OF
PIXELS
WE
THEN
CONSIDER
MAPPING
METHODS
THESE
TECHNIQUES
ARE
APPLIED
DURING
THE
RENDERING
PROCESS
AND
THEY
ENABLE
US
TO
GIVE
THE
ILLUSION
OF
A
SURFACE
OF
GREAT
COMPLEXITY
ALTHOUGH
THE
SURFACE
MIGHT
BE
A
SINGLE
POLYGON
ALL
THESE
TECHNIQUES
USE
ARRAYS
OF
PIXELS
TO
DEFINE
HOW
THE
SHADING
PROCESS
THAT
WE
STUDIED
IN
CHAPTER
IS
AUGMENTED
TO
CREATE
THESE
ILLUSIONS
WE
SHALL
THEN
LOOK
AT
SOME
OF
THE
OTHER
BUFFERS
THAT
ARE
SUPPORTED
BY
THE
OPENGL
API
AND
HOW
THESE
BUFFERS
CAN
BE
USED
FOR
NEW
APPLICATIONS
IN
PARTICULAR
WE
EXAMINE
TECHNIQUES
FOR
COMBINING
OR
COMPOSITING
IMAGES
HERE
WE
USE
THE
FOURTH
COLOR
IN
RGBA
MODE
AND
WE
SHALL
SEE
THAT
WE
CAN
USE
THIS
CHANNEL
TO
BLEND
IMAGES
AND
TO
CREATE
EFFECTS
SUCH
AS
TRANSPARENCY
WE
CONCLUDE
WITH
A
DISCUSSION
OF
THE
ALIASING
PROBLEMS
THAT
ARISE
WHENEVER
WE
WORK
WITH
DISCRETE
ELEMENTS
BUFFERS
WE
HAVE
ALREADY
USED
TWO
TYPES
OF
STANDARD
BUFFERS
COLOR
BUFFERS
AND
DEPTH
BUFFERS
THERE
MAY
BE
OTHERS
SUPPORTED
BY
THE
HARDWARE
AND
SOFTWARE
FOR
SPECIAL
PURPOSES
WHAT
ALL
BUFFERS
HAVE
IN
COMMON
IS
THAT
THEY
ARE
INHERENTLY
DISCRETE
THEY
HAVE
M
FIGURE
BUFFER
LIMITED
RESOLUTION
BOTH
SPATIALLY
AND
IN
DEPTH
WE
CAN
DEFINE
A
TWO
DIMENSIONAL
BUFFER
AS
A
BLOCK
OF
MEMORY
WITH
N
M
K
BIT
ELEMENTS
FIGURE
WE
HAVE
USED
THE
TERM
FRAME
BUFFER
TO
MEAN
THE
SET
OF
BUFFERS
THAT
THE
GRAPHICS
SYSTEM
USES
FOR
RENDERING
INCLUDING
THE
FRONT
AND
BACK
COLOR
BUFFERS
THE
DEPTH
BUFFER
AND
OTHER
BUFFERS
THE
HARDWARE
MAY
PROVIDE
THESE
BUFFERS
GENERALLY
RESIDE
ON
THE
GRAPHICS
CARD
LATER
IN
THIS
CHAPTER
WE
WILL
EXTEND
THE
NOTION
OF
A
FRAME
BUFFER
TO
INCLUDE
OTHER
BUFFERS
THAT
A
SYSTEM
MIGHT
PROVIDE
FOR
OFF
SCREEN
RENDERING
OPERATIONS
FOR
NOW
WE
WILL
WORK
WITH
JUST
THE
STANDARD
FRAME
BUFFER
AT
A
GIVEN
SPATIAL
LOCATION
IN
THE
FRAME
BUFFER
THE
K
BITS
CAN
INCLUDE
BIT
RGBA
COLORS
INTEGERS
REPRESENTING
DEPTHS
OR
BITS
THAT
CAN
BE
USED
FOR
MASKS
GROUPS
OF
BITS
CAN
STORE
BYTE
REPRESENTATIONS
OF
COLOR
COMPONENTS
INTEGERS
FOR
DEPTHS
OR
FLOATING
POINT
NUMBERS
FOR
COLORS
OR
DEPTHS
FIGURE
SHOWS
THE
OPENGL
FRAME
BUFFER
AND
SOME
OF
ITS
CONSTITUENT
PARTS
IF
WE
CONSIDER
THE
ENTIRE
FRAME
BUFFER
THE
VALUES
OF
N
AND
M
MATCH
THE
SPATIAL
RESOLUTION
OF
THE
DISPLAY
THE
DEPTH
OF
THE
FRAME
BUFFER
THE
VALUE
OF
K
CAN
EXCEED
A
FEW
HUNDRED
BITS
EVEN
FOR
THE
SIMPLE
CASES
THAT
WE
HAVE
SEEN
SO
FAR
WE
HAVE
BITS
FOR
THE
FRONT
AND
BACK
COLOR
BUFFERS
AND
BITS
FOR
THE
DEPTH
BUFFER
THE
NUMERICAL
ACCURACY
OR
PRECISION
OF
A
GIVEN
BUFFER
IS
DETERMINED
BY
ITS
DEPTH
THUS
IF
A
FRAME
BUFFER
HAS
BITS
EACH
FOR
ITS
FRONT
AND
BACK
COLOR
BUFFERS
EACH
RGBA
COLOR
COMPONENT
IS
STORED
WITH
A
PRECISION
OF
BITS
WHEN
WE
WORK
WITH
THE
FRAME
BUFFER
WE
USUALLY
WORK
WITH
ONE
CONSTITUENT
BUFFER
AT
A
TIME
THUS
WE
SHALL
USE
THE
TERM
BUFFER
IN
WHAT
FOLLOWS
TO
MEAN
A
PARTIC
ULAR
BUFFER
WITHIN
THE
FRAME
BUFFER
EACH
OF
THESE
BUFFERS
IS
N
M
AND
IS
K
BITS
DEEP
HOWEVER
K
CAN
BE
DIFFERENT
FOR
EACH
BUFFER
FOR
A
COLOR
BUFFER
ITS
K
IS
DETERMINED
BY
HOW
MANY
COLORS
THE
SYSTEM
CAN
DISPLAY
USUALLY
FOR
RGB
DISPLAYS
AND
FOR
RGBA
DISPLAYS
FOR
THE
DEPTH
BUFFER
ITS
K
IS
DETERMINED
BY
THE
DEPTH
PRECISION
THAT
THE
SYSTEM
CAN
SUPPORT
OFTEN
BITS
TO
MATCH
THE
SIZE
OF
A
FLOATING
POINT
NUMBER
OR
AN
INTEGER
WE
USE
THE
TERM
BITPLANE
TO
REFER
TO
ANY
OF
THE
K
N
M
PLANES
IN
A
BUFFER
AND
PIXEL
TO
REFER
TO
ALL
K
OF
THE
BITS
AT
A
PARTICULAR
SPATIAL
LOCATION
WITH
THIS
DEFINI
TION
A
PIXEL
CAN
BE
A
BYTE
AN
INTEGER
OR
EVEN
A
FLOATING
POINT
NUMBER
DEPENDING
ON
WHICH
BUFFER
IS
USED
AND
HOW
DATA
ARE
STORED
IN
THE
BUFFER
THE
APPLICATIONS
PROGRAMMER
GENERALLY
WILL
NOT
KNOW
HOW
INFORMATION
IS
STORED
IN
THE
FRAME
BUFFER
BECAUSE
THE
FRAME
BUFFER
IS
INSIDE
THE
IMPLEMENTATION
WHICH
THE
PROGRAMMER
SEES
AS
A
BLACK
BOX
THUS
THE
APPLICATION
PROGRAM
SENDS
WRITES
OR
DRAWS
INFORMATION
INTO
THE
FRAME
BUFFER
OR
OBTAINS
READS
INFORMATION
FROM
THE
FRAME
BUFFER
THROUGH
OPENGL
FUNCTIONS
WHEN
THE
APPLICATION
PROGRAM
READS
OR
WRITES
PIXELS
NOT
ONLY
ARE
DATA
TRANSFERRED
BETWEEN
ORDINARY
PROCESSOR
MEMORY
AND
GRAPHICS
MEMORY
ON
THE
GRAPHICS
CARD
BUT
USUALLY
THESE
DATA
MUST
BE
REFORMATTED
TO
BE
COMPATIBLE
WITH
THE
FRAME
BUFFER
CONSEQUENTLY
WHAT
ARE
ORDINARILY
THOUGHT
OF
AS
DIGITAL
IMAGES
FOR
EXAMPLE
JPEG
PNG
OR
TIFF
IMAGES
EXIST
ONLY
ON
THE
APPLICATION
SIDE
OF
THE
PROCESS
NOT
ONLY
MUST
THE
APPLICATION
PROGRAMMER
WORRY
HOW
TO
DECODE
PARTICULAR
IMAGES
SO
THEY
CAN
BE
SENT
TO
THE
FRAME
BUFFER
THROUGH
OPENGL
FUNCTIONS
BUT
THE
PROGRAMMER
ALSO
MUST
BE
AWARE
OF
THE
TIME
THAT
IS
SPENT
IN
THE
MOVEMENT
WE
CAN
ALSO
HAVE
ONE
THREE
AND
FOUR
DIMENSIONAL
BUFFERS
STENCIL
BUFFER
DEPTH
BUFFER
M
BACK
BUFFER
N
FRONT
BUFFER
FIGURE
OPENGL
FRAME
BUFFER
OF
DIGITAL
DATA
BETWEEN
PROCESSOR
MEMORY
AND
THE
FRAME
BUFFER
IF
THE
APPLICATION
PROGRAMMER
ALSO
KNOWS
THE
INTERNAL
FORMAT
OF
HOW
DATA
ARE
STORED
IN
ANY
OF
THE
BUFFERS
SHE
CAN
OFTEN
WRITE
APPLICATION
PROGRAMS
THAT
EXECUTE
MORE
EFFICIENTLY
DIGITAL
IMAGES
BEFORE
WE
LOOK
AT
HOW
THE
GRAPHICS
SYSTEM
CAN
WORK
WITH
DIGITAL
IMAGES
THROUGH
PIXEL
AND
BIT
OPERATIONS
LET
FIRST
EXAMINE
WHAT
WE
MEAN
BY
A
DIGITAL
IMAGE
WITHIN
OUR
PROGRAMS
WE
GENERALLY
WORK
WITH
IMAGES
THAT
ARE
ARRAYS
OF
PIXELS
THESE
IMAGES
CAN
BE
OF
A
VARIETY
OF
SIZES
AND
DATA
TYPES
DEPENDING
ON
THE
TYPE
OF
IMAGE
WITH
WHICH
WE
ARE
WORKING
FOR
EXAMPLE
IF
WE
ARE
WORKING
WITH
RGB
IMAGES
WE
USUALLY
REPRESENT
EACH
OF
THE
COLOR
COMPONENTS
WITH
BYTE
WHOSE
VALUES
RANGE
FROM
TO
THUS
WE
MIGHT
DECLARE
A
IMAGE
IN
OUR
APPLICATION
PROGRAM
AS
GLUBYTE
MYIMAGE
OR
IF
WE
ARE
USING
A
FLOATING
POINT
REPRESENTATION
TYPEDEF
MYIMAGE
IF
WE
ARE
WORKING
WITH
MONOCHROMATIC
OR
LUMINANCE
IMAGES
EACH
PIXEL
REPRESENTS
A
GRAY
LEVEL
FROM
BLACK
TO
WHITE
SO
WE
WOULD
USE
GLUBYTE
MYIMAGE
MOST
REFERENCES
OFTEN
USE
THE
TERM
IMAGE
INSTEAD
OF
DIGITAL
IMAGE
THIS
TERMINOLOGY
CAN
BE
CONFUSED
WITH
USING
THE
TERM
IMAGE
TO
REFER
TO
THE
RESULT
OF
COMBINING
GEOMETRIC
OBJECTS
AND
A
CAMERA
THROUGH
THE
PROJECTION
PROCESS
TO
OBTAIN
WHAT
WE
HAVE
CALLED
AN
IMAGE
IN
THIS
CHAPTER
THE
CONTEXT
SHOULD
BE
CLEAR
SO
THAT
THERE
SHOULD
NOT
BE
ANY
CONFUSION
ONE
WAY
TO
FORM
DIGITAL
IMAGES
IS
THROUGH
CODE
IN
THE
APPLICATION
PROGRAM
FOR
EXAMPLE
SUPPOSE
THAT
WE
WANT
TO
CREATE
A
IMAGE
THAT
CONSISTS
OF
AN
CHECKERBOARD
OF
ALTERNATING
RED
AND
BLACK
SQUARES
SUCH
AS
WE
MIGHT
USE
FOR
A
GAME
THE
FOLLOWING
CODE
WILL
WORK
CHECK
RED
BLACK
FOR
INT
I
I
I
FOR
INT
J
J
J
CHECK
I
J
I
J
RED
BLACK
USUALLY
WRITING
CODE
TO
FORM
IMAGES
IS
LIMITED
TO
THOSE
THAT
CONTAIN
REGULAR
PATTERNS
MORE
OFTEN
WE
OBTAIN
IMAGES
DIRECTLY
FROM
DATA
FOR
EXAMPLE
IF
WE
HAVE
AN
ARRAY
OF
REAL
NUMBERS
THAT
WE
HAVE
OBTAINED
FROM
AN
EXPERIMENT
OR
A
SIMULATION
WE
CAN
SCALE
THEM
TO
GO
OVER
THE
RANGE
TO
AND
THEN
CONVERT
THESE
DATA
TO
FORM
AN
UNSIGNED
BYTE
LUMINANCE
IMAGE
OR
OVER
TO
FOR
A
FLOATING
POINT
IMAGE
THERE
IS
A
THIRD
METHOD
OF
OBTAINING
IMAGES
THAT
HAS
BECOME
MUCH
MORE
PREVA
LENT
BECAUSE
OF
THE
INFLUENCE
OF
THE
INTERNET
IMAGES
ARE
PRODUCED
BY
SCANNING
CON
TINUOUS
IMAGES
SUCH
AS
PHOTOGRAPHS
OR
PRODUCED
DIRECTLY
USING
DIGITAL
CAMERAS
EACH
IMAGE
IS
IN
ONE
OF
MANY
POSSIBLE
STANDARD
FORMATS
SOME
OF
THE
MOST
POPU
LAR
FORMATS
ARE
GIF
TIFF
PNG
PDF
AND
JPEG
THESE
FORMATS
INCLUDE
DIRECT
CODING
OF
THE
VALUES
IN
SOME
ORDER
COMPRESSED
BUT
LOSSLESS
CODING
AND
COMPRESSED
LOSSY
CODING
EACH
FORMAT
AROSE
FROM
THE
PARTICULAR
NEEDS
OF
A
GROUP
OF
APPLICATIONS
FOR
EXAMPLE
POSTSCRIPT
PS
IMAGES
ARE
DEFINED
BY
THE
POSTSCRIPT
LANGUAGE
USED
TO
CON
TROL
PRINTERS
THESE
IMAGES
ARE
AN
EXACT
ENCODING
OF
THE
IMAGE
DATA
EITHER
RGB
OR
LUMINANCE
INTO
THE
BIT
ASCII
CHARACTER
SET
CONSEQUENTLY
POSTSCRIPT
IMAGES
CAN
BE
UNDERSTOOD
BY
A
LARGE
CLASS
OF
PRINTERS
AND
OTHER
DEVICES
BUT
TEND
TO
BE
VERY
LARGE
ENCAPSULATED
POSTSCRIPT
EPS
ARE
SIMILAR
BUT
INCLUDE
ADDITIONAL
INFORMATION
THAT
IS
USEFUL
FOR
PREVIEWING
IMAGES
GIF
IMAGES
ARE
COLOR
INDEX
IMAGES
AND
THUS
STORE
A
COLOR
TABLE
AND
AN
ARRAY
OF
INDICES
FOR
THE
IMAGE
TIFF
IMAGES
CAN
HAVE
TWO
FORMS
IN
ONE
FORM
ALL
THE
IMAGE
DATA
ARE
CODED
DI
RECTLY
A
HEADER
DESCRIBES
HOW
THE
DATA
ARE
ARRANGED
IN
THE
SECOND
FORM
THE
DATA
ARE
COMPRESSED
COMPRESSION
IS
POSSIBLE
BECAUSE
MOST
IMAGES
CONTAIN
MUCH
REDUNDANT
DATA
FOR
EXAMPLE
LARGE
AREAS
OF
MOST
IMAGES
SHOW
VERY
LITTLE
VARIATION
IN
COLOR
OR
INTENSITY
THIS
REDUNDANCY
CAN
BE
REMOVED
BY
ALGORITHMS
THAT
RESULT
IN
A
COMPRESSED
VERSION
OF
THE
ORIGINAL
IMAGE
THAT
REQUIRES
LESS
STORAGE
COMPRESSED
TIFF
IMAGES
ARE
FORMED
BY
THE
LEMPEL
ZIV
ALGORITHM
THAT
PROVIDES
OPTIMAL
LOSSLESS
COMPRESSION
ALLOWING
THE
ORIGINAL
IMAGE
TO
BE
COMPRESSED
AND
RECOVERED
EXACTLY
JPEG
IMAGES
ARE
COMPRESSED
BY
AN
ALGORITHM
THAT
ALLOWS
SMALL
ERRORS
IN
THE
COMPRESSION
AND
RE
CONSTRUCTION
OF
THE
IMAGE
CONSEQUENTLY
JPEG
IMAGES
HAVE
VERY
HIGH
COMPRESSION
RATIOS
THAT
IS
THE
RATIO
OF
THE
NUMBER
OF
BITS
IN
THE
ORIGINAL
FILE
TO
THE
NUMBER
OF
BITS
IN
THE
COMPRESSED
DATA
FILE
WITH
LITTLE
OR
NO
VISIBLE
DISTORTION
FIGURE
SHOWS
A
B
C
FIGURE
A
ORIGINAL
TIFF
LUMINANCE
IMAGE
B
JPEG
IMAGE
COM
PRESSED
BY
A
FACTOR
OF
C
JPEG
IMAGE
COMPRESSED
BY
A
FACTOR
OF
THREE
VERSIONS
OF
A
SINGLE
LUMINANCE
IMAGE
UNCOMPRESSED
AS
A
TIFF
IMAGE
FIGURE
A
AND
AS
TWO
JPEG
IMAGES
COMPRESSED
WITH
DIFFERENT
RATIOS
FIG
URE
B
AND
FIGURE
C
THE
CORRESPONDING
FILE
SIZES
ARE
AND
BYTES
RESPECTIVELY
THUS
THE
TIFF
IMAGE
HAS
BYTE
FOR
EACH
PIXEL
PLUS
BYTES
OF
HEADER
AND
TRAILER
INFORMATION
FOR
THE
JPEG
IMAGES
THE
COMPRESSION
RA
TIOS
ARE
APPROXIMATELY
AND
EVEN
WITH
THE
HIGHER
COMPRESSION
RATIO
THERE
IS
LITTLE
VISIBLE
DISTORTION
IN
THE
IMAGE
IF
WE
STORE
THE
ORIGINAL
IMAGE
AS
A
POSTSCRIPT
IM
AGE
THE
FILE
WILL
BE
APPROXIMATELY
TWICE
AS
LARGE
AS
THE
TIFF
IMAGE
BECAUSE
EACH
BYTE
WILL
BE
CONVERTED
INTO
TWO
BIT
ASCII
CHARACTERS
EACH
PAIR
REQUIRING
BYTES
OF
STOR
AGE
IF
WE
STORE
THE
IMAGE
AS
A
COMPRESSED
TIFF
FILE
WE
NEED
ONLY
ABOUT
ONE
HALF
OF
THE
STORAGE
USING
A
ZIP
FILE
A
POPULAR
FORMAT
USED
FOR
COMPRESSING
ARBITRARY
FILES
WOULD
GIVE
ABOUT
THE
SAME
RESULT
THIS
AMOUNT
OF
COMPRESSION
IS
IMAGE
DEPENDENT
ALTHOUGH
THIS
COMPRESSION
METHOD
IS
LOSSLESS
THE
COMPRESSION
RATIO
IS
FAR
WORSE
THAN
IS
OBTAINABLE
WITH
LOSSY
JPEG
IMAGES
WHICH
ARE
VISIBLY
ALMOST
INDISTINGUISHABLE
FROM
THE
ORIGINAL
THIS
CLOSENESS
ACCOUNTS
FOR
THE
POPULARITY
OF
THE
JPEG
FORMAT
FOR
SEND
ING
IMAGES
OVER
THE
INTERNET
MOST
DIGITAL
CAMERAS
PRODUCE
IMAGES
IN
JPEG
AND
RAW
FORMATS
THE
RAW
FORMAT
GIVES
THE
UNPROCESSED
RGB
DATA
PLUS
A
LARGE
AMOUNT
OF
HEADER
INFORMATION
INCLUDING
THE
DATE
THE
RESOLUTION
AND
THE
DISTRIBUTION
OF
THE
COLORS
THE
LARGE
NUMBER
OF
IMAGE
FORMATS
POSES
PROBLEMS
FOR
A
GRAPHICS
API
ALTHOUGH
SOME
IMAGE
FORMATS
ARE
SIMPLE
OTHERS
ARE
QUITE
COMPLEX
THE
OPENGL
API
AVOIDS
THE
PROBLEM
BY
SUPPORTING
ONLY
BLOCKS
OF
PIXELS
AS
COMPARED
TO
IMAGES
FORMATTED
FOR
FILES
MOST
OF
THESE
OPENGL
FORMATS
CORRESPOND
TO
INTERNAL
FORMATS
THAT
DIFFER
IN
THE
NUMBER
OF
BITS
FOR
EACH
COLOR
COMPONENT
AND
THE
ORDER
OF
THE
COMPONENTS
IN
MEMORY
THERE
IS
LIMITED
SUPPORT
FOR
COMPRESSED
TEXTURE
IMAGES
BUT
NOT
FOR
THE
STANDARD
FORMATS
SUCH
AS
JPEG
HENCE
ALTHOUGH
OPENGL
CAN
WORK
WITH
IMAGES
THAT
ARE
ARRAYS
OF
STANDARD
DATA
TYPES
IN
MEMORY
IT
IS
THE
APPLICATION
PROGRAMMER
RESPONSIBILITY
TO
READ
ANY
FORMATTED
IMAGES
INTO
PROCESSOR
MEMORY
AND
WRITE
THEM
OUT
AS
FORMATTED
FILES
WE
WILL
NOT
DEAL
WITH
THESE
ISSUES
HERE
AS
ANY
DISCUSSION
WOULD
REQUIRE
US
TO
DISCUSS
THE
DETAILS
OF
PARTICULAR
IMAGE
FORMATS
THE
NECESSARY
INFORMATION
CAN
BE
FOUND
IN
THE
SUGGESTED
READINGS
AT
THE
END
OF
THE
CHAPTER
WE
CAN
ALSO
OBTAIN
DIGITAL
IMAGES
DIRECTLY
FROM
OUR
GRAPHICS
SYSTEM
BY
FORMING
IMAGES
OF
THREE
DIMENSIONAL
SCENES
USING
THE
GEOMETRIC
PIPELINE
AND
THEN
READING
THESE
IMAGES
BACK
WE
WILL
SEE
HOW
TO
DO
THE
REQUIRED
OPERATIONS
LATER
IN
THE
CHAPTER
WRITING
INTO
BUFFERS
IN
A
MODERN
GRAPHICS
SYSTEM
A
USER
PROGRAM
CAN
BOTH
WRITE
INTO
AND
READ
FROM
THE
BUFFERS
THERE
ARE
TWO
FACTORS
THAT
MAKE
THESE
OPERATIONS
DIFFERENT
FROM
THE
USUAL
READING
AND
WRITING
INTO
COMPUTER
MEMORY
FIRST
WE
ONLY
OCCASIONALLY
WANT
TO
READ
OR
WRITE
A
SINGLE
PIXEL
OR
BIT
RATHER
WE
TEND
TO
READ
AND
WRITE
RECTANGULAR
BLOCKS
OF
PIXELS
OR
BITS
KNOWN
AS
BIT
BLOCKS
FOR
EXAMPLE
WE
RASTERIZE
AN
ENTIRE
SCAN
LINE
AT
A
TIME
WHEN
WE
FILL
A
POLYGON
WE
WRITE
A
SMALL
BLOCK
OF
PIXELS
WHEN
WE
DISPLAY
A
RASTER
CHARACTER
WE
CHANGE
THE
VALUES
OF
ALL
PIXELS
IN
A
BUFFER
WHEN
WE
DO
A
CLEAR
OPERATION
HENCE
IT
IS
IMPORTANT
TO
HAVE
BOTH
THE
HARDWARE
AND
SOFTWARE
SUPPORT
A
SET
OF
OPERATIONS
THAT
WORK
ON
RECTANGULAR
BLOCKS
OF
PIXELS
KNOWN
AS
BIT
BLOCK
TRANSFER
BITBLT
OPERATIONS
AS
EFFICIENTLY
AS
POSSIBLE
THESE
OPERATIONS
ARE
ALSO
KNOWN
AS
RASTER
OPERATIONS
RASTER
OPS
SUPPOSE
THAT
WE
WANT
TO
TAKE
AN
N
M
BLOCK
OF
PIXELS
FROM
ONE
OF
OUR
BUFFERS
THE
SOURCE
BUFFER
AND
TO
COPY
IT
INTO
EITHER
THE
SAME
BUFFER
OR
ANOTHER
BUFFER
THE
DESTINATION
BUFFER
THIS
TRANSFER
IS
SHOWN
IN
FIGURE
A
TYPICAL
FORM
FOR
A
BITBLT
WRITE
OPERATION
IS
SOURCE
N
M
X
Y
DESTINATION
U
V
WHERE
SOURCE
AND
DESTINATION
ARE
THE
BUFFERS
THE
OPERATION
WRITES
AN
N
M
SOURCE
BLOCK
WHOSE
LOWER
LEFT
CORNER
IS
AT
X
Y
TO
THE
DESTINATION
BUFFER
STARTING
AT
SOURCE
FIGURE
WRITING
OF
A
BLOCK
A
LOCATION
U
V
ALTHOUGH
THERE
ARE
NUMEROUS
DETAILS
THAT
WE
MUST
CONSIDER
SUCH
AS
WHAT
HAPPENS
IF
THE
SOURCE
BLOCK
GOES
OVER
THE
BOUNDARY
OF
THE
DESTINATION
BLOCK
THE
ESSENCE
OF
BITBLT
IS
THAT
A
SINGLE
FUNCTION
CALL
ALTERS
THE
ENTIRE
DESTINATION
BLOCK
NOTE
THAT
FROM
THE
HARDWARE
PERSPECTIVE
THE
TYPE
OF
PROCESSING
INVOLVED
HAS
NONE
OF
THE
CHARACTERISTICS
OF
THE
PROCESSING
OF
GEOMETRIC
OBJECTS
CONSEQUENTLY
THE
HARDWARE
THAT
OPTIMIZES
BITBLT
OPERATIONS
HAS
A
COMPLETELY
DIFFERENT
ARCHITECTURE
FROM
THE
GE
OMETRIC
PIPELINE
THUS
THE
OPENGL
ARCHITECTURE
CONTAINS
BOTH
A
GEOMETRY
PIPELINE
AND
A
PIXEL
PIPELINE
EACH
OF
WHICH
USUALLY
IS
IMPLEMENTED
SEPARATELY
WRITING
MODES
A
SECOND
DIFFERENCE
BETWEEN
NORMAL
WRITING
INTO
MEMORY
AND
BITBLT
OPERATIONS
IS
THE
VARIETY
OF
WAYS
WE
CAN
WRITE
INTO
THE
BUFFERS
OPENGL
SUPPORTS
DIFFERENT
MODES
WRITING
MODES
FOR
PUTTING
PIXEL
DATA
INTO
A
BUFFER
TO
UNDERSTAND
THE
FULL
RANGE
OF
POSSIBILITIES
LET
CONSIDER
HOW
WE
MIGHT
WRITE
INTO
A
BUFFER
THE
USUAL
CONCEPT
OF
A
WRITE
TO
MEMORY
IS
REPLACEMENT
THE
EXECUTION
OF
A
STATEMENT
INAC
PROGRAM
SUCH
AS
Y
X
RESULTS
IN
THE
VALUE
AT
THE
LOCATION
WHERE
Y
IS
STORED
BEING
REPLACED
WITH
THE
VALUE
AT
THE
LOCATION
OF
X
THERE
ARE
OTHER
POSSIBILITIES
SUPPOSE
THAT
WE
CAN
WORK
ONE
BIT
AT
A
TIME
IN
OUR
BUFFERS
CONSIDER
THE
WRITING
MODEL
IN
FIGURE
THE
BIT
THAT
WE
WISH
TO
PLACE
IN
MEMORY
PERHAPS
IN
AN
ALTERED
FORM
IS
CALLED
THE
SOURCE
BIT
THE
PLACE
IN
MEMORY
WHERE
WE
WANT
TO
PUT
IT
IS
CALLED
THE
DESTINATION
BIT
D
IF
AS
IN
CHAPTER
WE
ARE
ALLOWED
TO
READ
BEFORE
WRITING
AS
DEPICTED
IN
FIGURE
THEN
WRITING
CAN
BE
DESCRIBED
BY
A
REPLACEMENT
FUNCTION
F
SUCH
THAT
D
F
D
FOR
A
BIT
SOURCE
AND
DESTINATION
THERE
ARE
ONLY
POSSIBLE
WAYS
TO
DEFINE
THE
FUNCTION
F
NAMELY
THE
LOGICAL
OPERATIONS
BETWEEN
TWO
BITS
THESE
OPERATIONS
ARE
SHOWN
IN
FIGURE
WHERE
EACH
OF
THE
COLUMNS
ON
THE
RIGHT
CORRESPONDS
TO
ONE
POSSIBLE
F
WE
CAN
USE
THE
BINARY
NUMBER
REPRESENTED
BY
EACH
COLUMN
TO
D
D
FIGURE
WRITING
MODEL
D
FIGURE
WRITING
MODES
DENOTE
A
WRITING
MODE
EQUIVALENTLY
WE
CAN
DENOTE
WRITING
MODES
BY
THE
LOGICAL
OPERATION
DEFINED
BY
THE
COLUMN
SUPPOSE
THAT
WE
THINK
OF
THE
LOGICAL
VALUE
AS
CORRESPONDING
TO
A
BACKGROUND
COLOR
SAY
WHITE
AND
AS
CORRESPONDING
TO
A
FOREGROUND
COLOR
SAY
BLACK
WE
CAN
EXAMINE
THE
EFFECTS
OF
VARIOUS
CHOICES
OF
F
WRITING
MODES
AND
ARE
CLEAR
OPERATIONS
THAT
CHANGE
THE
VALUE
OF
THE
DESTINATION
TO
EITHER
THE
FOREGROUND
OR
THE
BACKGROUND
COLOR
THE
NEW
VALUE
OF
THE
DESTINATION
BIT
IS
INDEPENDENT
OF
BOTH
THE
SOURCE
AND
THE
DESTINATION
VALUES
MODES
AND
ARE
THE
NORMAL
WRITING
MODES
MODE
IS
THE
FUNCTION
D
IT
SIMPLY
REPLACES
THE
VALUE
OF
THE
DESTINATION
BIT
WITH
THE
SOURCE
MODE
IS
THE
LOGICAL
OR
OPERATION
D
D
FIGURE
SHOWS
THAT
THESE
TWO
WRITING
MODES
CAN
HAVE
DIFFERENT
EFFECTS
ON
THE
CONTENTS
OF
THE
FRAME
BUFFER
IN
THIS
EXAMPLE
WE
WRITE
A
DASHED
LINE
INTO
A
FRAME
BUFFER
THAT
ALREADY
HAD
A
BLACK
FOREGROUND
COLORED
RECTANGLE
RENDERED
INTO
IT
BOTH
MODES
WRITE
THE
FOREGROUND
COLOR
OVER
THE
BACKGROUND
COLOR
BUT
THEY
DIFFER
IF
WE
TRY
TO
WRITE
THE
BACKGROUND
COLOR
OVER
THE
FOREGROUND
COLOR
WHICH
MODE
SHOULD
BE
USED
DEPENDS
ON
WHAT
EFFECT
THE
APPLICATION
PROGRAMMER
WISHES
TO
CREATE
MODE
MODE
FIGURE
WRITING
IN
MODES
AND
WRITING
WITH
XOR
MODE
IS
THE
EXCLUSIVE
OR
OPERATION
XOR
DENOTED
BY
IT
IS
THE
MOST
INTERESTING
OF
THE
WRITING
MODES
UNLIKE
MODES
AND
MODE
CANNOT
BE
IMPLEMENTED
WITHOUT
A
READ
OF
THE
DESTINATION
BIT
THE
POWER
OF
THE
XOR
WRITE
MODE
COMES
FROM
THE
PROPERTY
THAT
IF
AND
D
ARE
BINARY
VARIABLES
THEN
D
D
THUS
IF
WE
APPLY
XOR
TWICE
TO
A
BIT
WE
RETURN
THAT
BIT
TO
ITS
ORIGINAL
STATE
THE
MOST
IMPORTANT
APPLICATIONS
OF
THIS
MODE
INVOLVE
INTERACTION
CONSIDER
WHAT
HAPPENS
WHEN
WE
USE
MENUS
IN
AN
INTERACTIVE
APPLICATION
SUCH
AS
IN
A
PAINTING
PROGRAM
IN
RESPONSE
TO
A
MOUSE
CLICK
A
MENU
APPEARS
COVERING
A
PORTION
OF
THE
SCREEN
AFTER
THE
USER
INDICATES
AN
ACTION
FROM
THE
MENU
THE
MENU
DISAPPEARS
AND
THE
AREA
OF
THE
SCREEN
THAT
IT
COVERED
IS
RETURNED
TO
THAT
AREA
ORIGINAL
STATE
WHAT
HAS
TRANSPIRED
INVOLVES
THE
USE
OF
OFF
SCREEN
MEMORY
KNOWN
AS
BACKING
STORE
SUPPOSE
THAT
THE
MENU
HAS
BEEN
STORED
OFF
SCREEN
AS
AN
ARRAY
OF
BITS
M
AND
THAT
THE
AREA
OF
THE
SCREEN
WHERE
THE
MENU
APPEARS
IS
AN
ARRAY
OF
BITS
CONSIDER
THE
SEQUENCE
OF
OPERATIONS
M
M
M
M
WHERE
WE
ASSUME
THAT
THE
XOR
OPERATION
IS
APPLIED
TO
CORRESPONDING
BITS
IN
AND
M
IF
WE
SUBSTITUTE
THE
RESULT
OF
THE
FIRST
EQUATION
IN
THE
SECOND
AND
THE
RESULT
OF
THE
SECOND
IN
THE
THIRD
WE
FIND
THAT
AT
THE
END
OF
THE
THREE
OPERATIONS
THE
MENU
APPEARS
ON
THE
SCREEN
THE
ORIGINAL
CONTENTS
OF
THE
SCREEN
WHERE
THE
MENU
IS
NOW
LOCATED
ARE
NOW
OFF
SCREEN
WHERE
THE
MENU
WAS
ORIGINALLY
WE
HAVE
SWAPPED
THE
MENU
WITH
AN
AREA
OF
THE
SCREEN
USING
THREE
BITBLT
OPERATIONS
THIS
METHOD
OF
SWAPPING
IS
CONSIDERABLY
DIFFERENT
FROM
THE
NORMAL
MODE
OF
SWAPPING
WHICH
USES
REPLACEMENT
MODE
WRITING
BUT
REQUIRES
TEMPORARY
STORAGE
TO
EFFECT
THE
SWAP
THERE
ARE
NUMEROUS
VARIANTS
OF
THIS
TECHNIQUE
ONE
IS
TO
MOVE
A
CURSOR
AROUND
THE
SCREEN
WITHOUT
AFFECTING
THE
AREA
UNDER
IT
ANOTHER
IS
FILLING
POLYGONS
WITH
A
SOLID
COLOR
AS
PART
OF
SCAN
CONVERSION
NOTE
THAT
BECAUSE
MANY
APIS
TRACE
THEIR
BACKGROUNDS
TO
THE
DAYS
BEFORE
RASTER
DISPLAYS
BECAME
THE
NORM
THE
XOR
WRITE
MODE
WAS
NOT
ALWAYS
AVAILABLE
IN
OPENGL
THE
STANDARD
MODE
OF
WRITING
INTO
THE
FRAME
BUFFER
IS
MODE
FRAGMENTS
ARE
COPIED
INTO
THE
FRAME
BUFFER
WE
CAN
CHANGE
THE
MODE
BY
ENABLING
LOGIC
OPERATIONS
GLLOGICOP
MODE
GLENABLE
WHERE
MODE
CAN
BE
ANY
OF
THE
MODES
THE
USUAL
ONES
ARE
THE
THE
DEFAULT
AND
MAPPING
METHODS
ONE
OF
THE
MOST
POWERFUL
USES
OF
DISCRETE
DATA
IS
FOR
SURFACE
RENDERING
THE
PROCESS
OF
MODELING
AN
OBJECT
BY
A
SET
OF
GEOMETRIC
PRIMITIVES
AND
THEN
RENDERING
THESE
PRIMITIVES
HAS
ITS
LIMITATIONS
CONSIDER
FOR
EXAMPLE
THE
TASK
OF
CREATING
A
VIRTUAL
ORANGE
BY
COMPUTER
OUR
FIRST
ATTEMPT
MIGHT
BE
TO
START
WITH
A
SPHERE
FROM
OUR
DISCUSSION
IN
CHAPTER
WE
KNOW
THAT
WE
CAN
BUILD
AN
APPROXIMATION
TO
A
SPHERE
OUT
OF
TRIANGLES
AND
CAN
RENDER
THESE
TRIANGLES
USING
MATERIAL
PROPERTIES
THAT
MATCH
THOSE
OF
A
REAL
ORANGE
UNFORTUNATELY
SUCH
A
RENDERING
WOULD
BE
FAR
TOO
REGULAR
TO
LOOK
MUCH
LIKE
AN
ORANGE
WE
COULD
INSTEAD
FOLLOW
THE
PATH
THAT
WE
SHALL
EXPLORE
IN
CHAPTER
WE
COULD
TRY
TO
MODEL
THE
ORANGE
WITH
SOME
SORT
OF
CURVED
SURFACE
AND
THEN
RENDER
THE
SURFACE
THIS
PROCEDURE
WOULD
GIVE
US
MORE
CONTROL
OVER
THE
SHAPE
OF
OUR
VIRTUAL
ORANGE
BUT
THE
IMAGE
THAT
WE
WOULD
PRODUCE
STILL
WOULD
NOT
LOOK
RIGHT
ALTHOUGH
IT
MIGHT
HAVE
THE
CORRECT
OVERALL
PROPERTIES
SUCH
AS
SHAPE
AND
COLOR
IT
WOULD
LACK
THE
FINE
SURFACE
DETAIL
OF
THE
REAL
ORANGE
IF
WE
ATTEMPT
TO
ADD
THIS
DETAIL
BY
ADDING
MORE
POLYGONS
TO
OUR
MODEL
EVEN
WITH
HARDWARE
CAPABLE
OF
RENDERING
TENS
OF
MILLIONS
OF
POLYGONS
PER
SECOND
WE
CAN
STILL
OVERWHELM
THE
PIPELINE
AN
ALTERNATIVE
IS
NOT
TO
ATTEMPT
TO
BUILD
INCREASINGLY
MORE
COMPLEX
MODELS
BUT
RATHER
TO
BUILD
A
SIMPLE
MODEL
AND
TO
ADD
DETAIL
AS
PART
OF
THE
RENDERING
PROCESS
AS
WE
SAW
IN
CHAPTER
AS
THE
IMPLEMENTATION
RENDERS
A
SURFACE
BE
IT
A
POLYGON
OR
A
CURVED
SURFACE
IT
GENERATES
SETS
OF
FRAGMENTS
EACH
OF
WHICH
CORRESPONDS
TO
A
PIXEL
IN
THE
FRAME
BUFFER
FRAGMENTS
CARRY
COLOR
DEPTH
AND
OTHER
INFORMATION
THAT
CAN
BE
USED
TO
DETERMINE
HOW
THEY
CONTRIBUTE
TO
THE
PIXELS
TO
WHICH
THEY
CORRESPOND
AS
PART
OF
THE
RASTERIZATION
PROCESS
WE
MUST
ASSIGN
A
SHADE
OR
COLOR
TO
EACH
FRAGMENT
WE
STARTED
IN
CHAPTER
BY
USING
THE
MODIFIED
PHONG
MODEL
TO
DETERMINE
VERTEX
COLORS
THAT
COULD
BE
INTERPOLATED
ACROSS
SURFACES
HOWEVER
THESE
COLORS
CAN
BE
MODIFIED
DUR
ING
FRAGMENT
PROCESSING
AFTER
RASTERIZATION
THE
MAPPING
ALGORITHMS
CAN
BE
THOUGHT
OF
AS
EITHER
MODIFYING
THE
SHADING
ALGORITHM
BASED
ON
A
TWO
DIMENSIONAL
ARRAY
THE
MAP
OR
AS
MODIFYING
THE
SHADING
BY
USING
THE
MAP
TO
ALTER
SURFACE
PARAMETERS
SUCH
AS
MATERIAL
PROPERTIES
AND
NORMALS
THERE
ARE
THREE
MAJOR
TECHNIQUES
FIGURE
TEXTURE
MAPPING
A
PATTERN
TO
A
SURFACE
TEXTURE
MAPPING
BUMP
MAPPING
ENVIRONMENT
MAPPING
TEXTURE
MAPPING
USES
AN
IMAGE
OR
TEXTURE
TO
INFLUENCE
THE
COLOR
OF
A
FRAGMENT
TEXTURES
CAN
BE
SPECIFIED
USING
A
FIXED
PATTERN
SUCH
AS
THE
REGULAR
PATTERNS
OFTEN
USED
TO
FILL
POLYGONS
BY
A
PROCEDURAL
TEXTURE
GENERATION
METHOD
OR
THROUGH
A
DIGITIZED
IMAGE
IN
ALL
CASES
WE
CAN
CHARACTERIZE
THE
RESULTING
IMAGE
AS
THE
MAPPING
OF
A
TEXTURE
TO
A
SURFACE
AS
SHOWN
IN
FIGURE
AS
PART
OF
THE
RENDERING
OF
THE
SURFACE
WHEREAS
TEXTURE
MAPS
GIVE
DETAIL
BY
PAINTING
PATTERNS
ONTO
SMOOTH
SURFACES
BUMP
MAPS
DISTORT
THE
NORMAL
VECTORS
DURING
THE
SHADING
PROCESS
TO
MAKE
THE
SUR
FACE
APPEAR
TO
HAVE
SMALL
VARIATIONS
IN
SHAPE
SUCH
AS
THE
BUMPS
ON
A
REAL
ORANGE
REFLECTION
MAPS
OR
ENVIRONMENT
MAPS
ALLOW
US
TO
CREATE
IMAGES
THAT
HAVE
THE
AP
PEARANCE
OF
REFLECTED
MATERIALS
WITHOUT
OUR
HAVING
TO
TRACE
REFLECTED
RAYS
IN
THIS
TECHNIQUE
AN
IMAGE
OF
THE
ENVIRONMENT
IS
PAINTED
ONTO
THE
SURFACE
AS
THAT
SURFACE
IS
BEING
RENDERED
THE
THREE
METHODS
HAVE
MUCH
IN
COMMON
ALL
THREE
ALTER
THE
SHADING
OF
INDI
VIDUAL
FRAGMENTS
AS
PART
OF
FRAGMENT
PROCESSING
ALL
RELY
ON
THE
MAP
BEING
STORED
AS
A
ONE
TWO
OR
THREE
DIMENSIONAL
DIGITAL
IMAGE
ALL
KEEP
THE
GEOMETRIC
COMPLEXITY
LOW
WHILE
CREATING
THE
ILLUSION
OF
COMPLEX
GEOMETRY
HOWEVER
ALL
ARE
ALSO
SUBJECT
TO
ALIASING
ERRORS
THERE
ARE
VARIOUS
EXAMPLES
OF
TWO
DIMENSIONAL
MAPPINGS
IN
THE
COLOR
PLATES
COLOR
PLATE
WAS
CREATED
USING
AN
OPENGL
ENVIRONMENT
MAP
AND
SHOWS
HOW
A
SINGLE
TEXTURE
MAP
CAN
CREATE
THE
ILLUSION
OF
A
HIGHLY
REFLECTIVE
SURFACE
WHILE
AVOIDING
GLOBAL
CALCULATIONS
COLOR
PLATE
USES
A
TEXTURE
MAP
FOR
THE
SURFACE
OF
THE
TABLE
COLOR
PLATE
USES
TEXTURE
MAPPING
TO
CREATE
A
BRICK
PATTERN
IN
VIRTUAL
REALITY
VISUALIZATION
SIMULATIONS
AND
INTERACTIVE
GAMES
REAL
TIME
PERFORMANCE
IS
REQUIRED
HARDWARE
SUPPORT
FOR
TEXTURE
MAPPING
IN
MODERN
SYSTEMS
ALLOWS
THE
DETAIL
TO
BE
ADDED
WITHOUT
SIGNIFICANTLY
DEGRADING
THE
RENDERING
TIME
HOWEVER
IN
TERMS
OF
THE
STANDARD
PIPELINE
THERE
ARE
SIGNIFICANT
DIFFERENCES
AMONG
THE
THREE
TECHNIQUES
STANDARD
TEXTURE
MAPPING
IS
SUPPORTED
BY
THE
BASIC
OPENGL
PIPELINE
AND
MAKES
USE
OF
BOTH
THE
GEOMETRIC
AND
PIXEL
PIPELINES
ENVIRON
MENT
MAPS
ARE
A
SPECIAL
CASE
OF
STANDARD
TEXTURE
MAPPING
BUT
CAN
BE
ALTERED
TO
CREATE
A
VARIETY
OF
NEW
EFFECTS
IF
WE
CAN
ALTER
FRAGMENT
PROCESSING
BUMP
MAPPING
REQUIRES
US
TO
PROCESS
EACH
FRAGMENT
INDEPENDENTLY
SOMETHING
WE
CAN
DO
WITH
A
FRAGMENT
SHADER
TEXTURE
MAPPING
TEXTURES
ARE
PATTERNS
THEY
CAN
RANGE
FROM
REGULAR
PATTERNS
SUCH
AS
STRIPES
AND
CHECKERBOARDS
TO
THE
COMPLEX
PATTERNS
THAT
CHARACTERIZE
NATURAL
MATERIALS
IN
THE
REAL
WORLD
WE
CAN
DISTINGUISH
AMONG
OBJECTS
OF
SIMILAR
SIZE
AND
SHAPE
BY
THEIR
TEXTURES
THUS
IF
WE
WANT
TO
CREATE
DETAILED
VIRTUAL
OBJECTS
WE
CAN
EXTEND
OUR
PRESENT
CAPABIL
ITIES
BY
MAPPING
A
TEXTURE
TO
THE
OBJECTS
THAT
WE
CREATE
TEXTURES
CAN
BE
ONE
TWO
THREE
OR
FOUR
DIMENSIONAL
FOR
EXAMPLE
A
ONE
DIMENSIONAL
TEXTURE
MIGHT
BE
USED
TO
CREATE
A
PATTERN
FOR
COLORING
A
CURVE
A
THREE
DIMENSIONAL
TEXTURE
MIGHT
DESCRIBE
A
SOLID
BLOCK
OF
MATERIAL
FROM
WHICH
WE
COULD
SCULPT
AN
OBJECT
BECAUSE
THE
USE
OF
SURFACES
IS
SO
IMPORTANT
IN
COMPUTER
GRAPHICS
MAPPING
TWO
DIMENSIONAL
TEXTURES
TO
SURFACES
IS
BY
FAR
THE
MOST
COMMON
USE
OF
TEX
TURE
MAPPING
AND
WILL
BE
THE
ONLY
FORM
OF
TEXTURE
MAPPING
THAT
WE
SHALL
CONSIDER
IN
DETAIL
HOWEVER
THE
PROCESSES
BY
WHICH
WE
MAP
THESE
ENTITIES
IS
MUCH
THE
SAME
REGARDLESS
OF
THE
DIMENSIONALITY
OF
THE
TEXTURE
AND
WE
LOSE
LITTLE
BY
CONCENTRATING
ON
TWO
DIMENSIONAL
TEXTURE
MAPPING
TWO
DIMENSIONAL
TEXTURE
MAPPING
ALTHOUGH
THERE
ARE
MULTIPLE
APPROACHES
TO
TEXTURE
MAPPING
ALL
REQUIRE
A
SEQUENCE
OF
STEPS
THAT
INVOLVE
MAPPINGS
AMONG
THREE
OR
FOUR
DIFFERENT
COORDINATE
SYSTEMS
AT
VAR
IOUS
STAGES
IN
THE
PROCESS
WE
SHALL
BE
WORKING
WITH
SCREEN
COORDINATES
WHERE
THE
FINAL
IMAGE
IS
PRODUCED
OBJECT
COORDINATES
WHERE
WE
DESCRIBE
THE
OBJECTS
UPON
WHICH
THE
TEXTURES
WILL
BE
MAPPED
TEXTURE
COORDINATES
WHICH
WE
USE
TO
LOCATE
POSITIONS
IN
THE
TEXTURE
AND
PARAMETRIC
COORDINATES
WHICH
WE
USE
TO
HELP
US
DEFINE
CURVED
SURFACES
METHODS
DIFFER
ACCORDING
TO
THE
TYPES
OF
SURFACES
WE
ARE
USING
AND
THE
TYPE
OF
RENDER
ING
ARCHITECTURE
WE
HAVE
OUR
APPROACH
WILL
BE
TO
START
WITH
A
FAIRLY
GENERAL
DISCUSSION
OF
TEXTURE
INTRODUCING
THE
VARIOUS
MAPPINGS
AND
THEN
TO
SHOW
HOW
TEXTURE
MAPPING
IS
HANDLED
BY
A
REAL
TIME
PIPELINE
ARCHITECTURE
SUCH
AS
THAT
EMPLOYED
BY
OPENGL
IN
MOST
APPLICATIONS
TEXTURES
START
OUT
AS
TWO
DIMENSIONAL
IMAGES
OF
THE
SORTS
WE
INTRODUCED
IN
SECTION
THUS
THEY
MIGHT
BE
FORMED
BY
APPLICATION
PROGRAMS
OR
SCANNED
IN
FROM
A
PHOTOGRAPH
BUT
REGARDLESS
OF
THEIR
ORIGIN
THEY
ARE
EVENTU
ALLY
BROUGHT
INTO
PROCESSOR
MEMORY
AS
ARRAYS
WE
CALL
THE
ELEMENTS
OF
THESE
ARRAYS
TEXELS
OR
TEXTURE
ELEMENTS
RATHER
THAN
PIXELS
TO
EMPHASIZE
HOW
THEY
WILL
BE
USED
HOWEVER
AT
THIS
POINT
WE
PREFER
TO
THINK
OF
THIS
ARRAY
AS
A
CONTINUOUS
RECTANGU
LAR
TWO
DIMENSIONAL
TEXTURE
PATTERN
T
T
THE
INDEPENDENT
VARIABLES
AND
T
ARE
KNOWN
AS
TEXTURE
COORDINATES
WITH
NO
LOSS
OF
GENERALITY
WE
CAN
SCALE
OUR
TEXTURE
COORDINATES
TO
VARY
OVER
THE
INTERVAL
IN
FOUR
DIMENSIONS
THE
COORDINATES
ARE
IN
T
R
Q
SPACE
A
TEXTURE
MAP
ASSOCIATES
A
TEXEL
WITH
EACH
POINT
ON
A
GEOMETRIC
OBJECT
THAT
IS
ITSELF
MAPPED
TO
SCREEN
COORDINATES
FOR
DISPLAY
IF
THE
OBJECT
IS
REPRESENTED
IN
HOMOGENEOUS
OR
X
Y
Z
W
COORDINATES
THEN
THERE
ARE
FUNCTIONS
SUCH
THAT
X
X
T
Y
Y
T
Z
Z
T
W
W
T
ONE
OF
THE
DIFFICULTIES
WE
MUST
CONFRONT
IS
THAT
ALTHOUGH
THESE
FUNCTIONS
EXIST
CON
CEPTUALLY
FINDING
THEM
MAY
NOT
BE
POSSIBLE
IN
PRACTICE
IN
ADDITION
WE
ARE
WORRIED
ABOUT
THE
INVERSE
PROBLEM
HAVING
BEEN
GIVEN
A
POINT
X
Y
Z
OR
X
Y
Z
W
ON
AN
OBJECT
HOW
DO
WE
FIND
THE
CORRESPONDING
TEXTURE
COORDINATES
OR
EQUIVALENTLY
HOW
DO
WE
FIND
THE
INVERSE
FUNCTIONS
X
Y
Z
W
T
T
X
Y
Z
W
TO
USE
TO
FIND
THE
TEXEL
T
T
IF
WE
DEFINE
THE
GEOMETRIC
OBJECT
USING
PARAMETRIC
U
V
SURFACES
SUCH
AS
WE
DID
FOR
THE
SPHERE
IN
SECTION
THERE
IS
AN
ADDITIONAL
MAPPING
FUNCTION
THAT
GIVES
OBJECT
COORDINATE
VALUES
X
Y
Z
OR
X
Y
Z
W
IN
TERMS
OF
U
AND
V
ALTHOUGH
THIS
MAPPING
IS
KNOWN
FOR
SIMPLE
SURFACES
SUCH
AS
SPHERES
AND
TRIANGLES
AND
FOR
THE
SURFACES
THAT
WE
SHALL
DISCUSS
IN
CHAPTER
WE
ALSO
NEED
THE
MAPPING
FROM
PARAMETRIC
COORDINATES
U
V
TO
TEXTURE
COORDINATES
AND
SOMETIMES
THE
INVERSE
MAPPING
FROM
TEXTURE
COORDINATES
TO
PARAMETRIC
COORDINATES
WE
ALSO
HAVE
TO
CONSIDER
THE
PROJECTION
PROCESS
THAT
TAKE
US
FROM
OBJECT
COOR
DINATES
TO
SCREEN
COORDINATES
GOING
THROUGH
EYE
COORDINATES
CLIP
COORDINATES
AND
WINDOW
COORDINATES
ALONG
THE
WAY
WE
CAN
ABSTRACT
THIS
PROCESS
THROUGH
A
FUNCTION
THAT
TAKES
A
TEXTURE
COORDINATE
PAIR
T
AND
TELLS
US
WHERE
IN
THE
COLOR
BUFFER
THE
CORRESPONDING
VALUE
OF
T
T
WILL
MAKE
ITS
CONTRIBUTION
TO
THE
FINAL
IMAGE
THUS
THERE
IS
A
MAPPING
OF
THE
FORM
XS
XS
T
YS
YS
T
INTO
COORDINATES
WHERE
XS
YS
IS
A
LOCATION
IN
THE
COLOR
BUFFER
DEPENDING
ON
THE
ALGORITHM
AND
THE
RENDERING
ARCHITECTURE
WE
MIGHT
ALSO
WANT
THE
FUNCTION
THAT
TAKES
US
FROM
A
PIXEL
IN
THE
COLOR
BUFFER
TO
THE
TEXEL
THAT
MAKES
A
CONTRIBUTION
TO
THE
COLOR
OF
THAT
PIXEL
ONE
WAY
TO
THINK
ABOUT
TEXTURE
MAPPING
IS
IN
TERMS
OF
TWO
CONCURRENT
MAP
PINGS
THE
FIRST
FROM
TEXTURE
COORDINATES
TO
OBJECT
COORDINATES
AND
THE
SECOND
FROM
PARAMETRIC
COORDINATES
TO
OBJECT
COORDINATES
AS
SHOWN
IN
FIGURE
A
THIRD
MAP
PING
TAKES
US
FROM
OBJECT
COORDINATES
TO
SCREEN
COORDINATES
V
U
Y
XS
T
Z
FIGURE
TEXTURE
MAPS
FOR
A
PARAMETRIC
SURFACE
CONCEPTUALLY
THE
TEXTURE
MAPPING
PROCESS
IS
SIMPLE
A
SMALL
AREA
OF
THE
TEXTURE
PATTERN
MAPS
TO
THE
AREA
OF
THE
GEOMETRIC
SURFACE
CORRESPONDING
TO
A
PIXEL
IN
THE
FINAL
IMAGE
IF
WE
ASSUME
THAT
THE
VALUES
OF
T
ARE
RGB
COLOR
VALUES
WE
CAN
USE
THESE
VALUES
EITHER
TO
MODIFY
THE
COLOR
OF
THE
SURFACE
THAT
MIGHT
HAVE
BEEN
DETERMINED
BY
A
LIGHTING
MODEL
OR
TO
ASSIGN
A
COLOR
TO
THE
SURFACE
BASED
ON
ONLY
THE
TEXTURE
VALUE
THIS
COLOR
ASSIGNMENT
IS
CARRIED
OUT
AS
PART
OF
THE
ASSIGNMENT
OF
FRAGMENT
COLORS
ON
CLOSER
EXAMINATION
WE
FACE
A
NUMBER
OF
DIFFICULTIES
FIRST
WE
MUST
DETERMINE
THE
MAP
FROM
TEXTURE
COORDINATES
TO
OBJECT
COORDINATES
A
TWO
DIMENSIONAL
TEXTURE
USUALLY
IS
DEFINED
OVER
A
RECTANGULAR
REGION
IN
TEXTURE
SPACE
THE
MAPPING
FROM
THIS
RECTANGLE
TO
AN
ARBITRARY
REGION
IN
THREE
DIMENSIONAL
SPACE
MAY
BE
A
COMPLEX
FUNC
TION
OR
MAY
HAVE
UNDESIRABLE
PROPERTIES
FOR
EXAMPLE
IF
WE
WISH
TO
MAP
A
RECTANGLE
TO
A
SPHERE
WE
CANNOT
DO
SO
WITHOUT
DISTORTION
OF
SHAPES
AND
DISTANCES
SECOND
OWING
TO
THE
NATURE
OF
THE
RENDERING
PROCESS
WHICH
WORKS
ON
A
PIXEL
BY
PIXEL
BASIS
WE
ARE
MORE
INTERESTED
IN
THE
INVERSE
MAP
FROM
SCREEN
COORDINATES
TO
TEXTURE
COORDINATES
IT
IS
WHEN
WE
ARE
DETERMINING
THE
SHADE
OF
A
PIXEL
THAT
WE
MUST
DETERMINE
WHAT
POINT
IN
THE
TEXTURE
IMAGE
TO
USE
A
CALCULATION
THAT
REQUIRES
US
TO
GO
FROM
SCREEN
COORDINATES
TO
TEXTURE
COORDINATES
THIRD
BECAUSE
EACH
PIXEL
CORRESPONDS
TO
A
SMALL
RECTANGLE
ON
THE
DISPLAY
WE
ARE
INTERESTED
IN
MAPPING
NOT
POINTS
TO
POINTS
BUT
RATHER
AREAS
TO
AR
EAS
HERE
AGAIN
IS
A
POTENTIAL
ALIASING
PROBLEM
THAT
WE
MUST
TREAT
CAREFULLY
IF
WE
ARE
TO
AVOID
ARTIFACTS
SUCH
AS
WAVY
SINUSOIDAL
OR
MOIRE
PATTERNS
FIGURE
SHOWS
SEVERAL
OF
THE
DIFFICULTIES
SUPPOSE
THAT
WE
ARE
COMPUTING
A
COLOR
FOR
THE
SQUARE
PIXEL
CENTERED
AT
SCREEN
COORDINATES
XS
YS
THE
CENTER
XS
YS
CORRESPONDS
TO
A
POINT
X
Y
Z
IN
OBJECT
SPACE
BUT
IF
THE
OBJECT
IS
CURVED
THE
PROJECTION
OF
THE
CORNERS
OF
THE
PIXEL
BACKWARD
INTO
OBJECT
SPACE
YIELDS
A
CURVED
Y
XS
T
X
YS
Z
FIGURE
PREIMAGES
OF
A
PIXEL
T
V
U
FIGURE
ALIASING
IN
TEXTURE
GENERATION
PREIMAGE
OF
THE
PIXEL
IN
TERMS
OF
THE
TEXTURE
IMAGE
T
T
PROJECTING
THE
PIXEL
BACK
YIELDS
A
PREIMAGE
IN
TEXTURE
SPACE
THAT
IS
THE
AREA
OF
THE
TEXTURE
THAT
IDEALLY
SHOULD
CONTRIBUTE
TO
THE
SHADING
OF
THE
PIXEL
LET
PUT
ASIDE
FOR
A
MOMENT
THE
PROBLEM
OF
HOW
WE
FIND
THE
INVERSE
MAP
AND
LET
US
LOOK
AT
THE
DETERMINATION
OF
COLORS
ONE
POSSIBILITY
IS
TO
USE
THE
LOCATION
THAT
WE
GET
BY
BACK
PROJECTION
OF
THE
PIXEL
CENTER
TO
FIND
A
TEXTURE
VALUE
ALTHOUGH
THIS
TECHNIQUE
IS
SIMPLE
IT
IS
SUBJECT
TO
SERIOUS
ALIASING
PROBLEMS
WHICH
ARE
ESPECIALLY
VISIBLE
IF
THE
TEXTURE
IS
PERIODIC
FIGURE
ILLUSTRATES
THE
ALIASING
PROBLEM
HERE
WE
HAVE
A
REPEATED
TEXTURE
AND
A
FLAT
SURFACE
THE
BACK
PROJECTION
OF
THE
CENTER
OF
EACH
PIXEL
HAPPENS
TO
FALL
IN
BETWEEN
THE
DARK
LINES
AND
THE
TEXTURE
VALUE
IS
ALWAYS
THE
LIGHTER
COLOR
MORE
GENERALLY
NOT
TAKING
INTO
ACCOUNT
THE
FINITE
SIZE
OF
A
PIXEL
CAN
LEAD
TO
MOIRE
PATTERNS
IN
THE
IMAGE
A
BETTER
STRATEGY
BUT
ONE
MORE
DIFFICULT
TO
IMPLEMENT
IS
TO
ASSIGN
A
TEXTURE
VALUE
BASED
ON
AVERAGING
OF
THE
TEXTURE
MAP
OVER
THE
PREIMAGE
NOTE
THAT
THIS
METHOD
IS
IMPERFECT
TOO
FOR
THE
EXAMPLE
IN
FIGURE
WE
WOULD
ASSIGN
AN
AVERAGE
SHADE
BUT
WE
WOULD
STILL
NOT
GET
THE
STRIPED
PATTERN
OF
THE
TEXTURE
ULTIMATELY
WE
STILL
HAVE
ALIASING
DEFECTS
DUE
TO
THE
LIMITED
RESOLUTION
OF
BOTH
THE
FRAME
BUFFER
AND
THE
TEXTURE
MAP
THESE
PROBLEMS
ARE
MOST
VISIBLE
WHEN
THERE
ARE
REGULAR
HIGH
FREQUENCY
COMPONENTS
IN
THE
TEXTURE
NOW
WE
CAN
TURN
TO
THE
MAPPING
PROBLEM
IN
COMPUTER
GRAPHICS
MOST
CURVED
SURFACES
ARE
REPRESENTED
PARAMETRICALLY
A
POINT
P
ON
THE
SURFACE
IS
A
FUNCTION
OF
TWO
T
XS
SMAX
TMAX
SMIN
TMIN
UMAX
VMAX
UMIN
VMIN
YS
FIGURE
LINEAR
TEXTURE
MAPPING
PARAMETERS
U
AND
V
FOR
EACH
PAIR
OF
VALUES
WE
GENERATE
THE
POINT
X
U
V
Z
U
V
IN
CHAPTER
WE
STUDY
IN
DETAIL
THE
DERIVATION
OF
SUCH
SURFACES
GIVEN
A
PARAMETRIC
SURFACE
WE
CAN
OFTEN
MAP
A
POINT
IN
THE
TEXTURE
MAP
T
T
TO
A
POINT
ON
THE
SURFACE
P
U
V
BY
A
LINEAR
MAP
OF
THE
FORM
U
AS
BT
C
V
DS
ET
F
AS
LONG
AS
AE
BD
THIS
MAPPING
IS
INVERTIBLE
LINEAR
MAPPING
MAKES
IT
EASY
TO
MAP
A
TEXTURE
TO
A
GROUP
OF
PARAMETRIC
SURFACE
PATCHES
FOR
EXAMPLE
IF
AS
SHOWN
IN
FIGURE
THE
PATCH
DETERMINED
BY
THE
CORNERS
SMIN
TMIN
AND
SMAX
TMAX
CORRESPONDS
TO
THE
SURFACE
PATCH
WITH
CORNERS
UMIN
VMIN
AND
UMAX
VMAX
THEN
THE
MAPPING
IS
U
U
MIN
SMIN
SMAX
SMIN
UMAX
UMIN
V
V
MIN
T
TMIN
TMAX
TMIN
VMAX
VMIN
THIS
MAPPING
IS
EASY
TO
APPLY
BUT
IT
DOES
NOT
TAKE
INTO
ACCOUNT
THE
CURVATURE
OF
THE
SURFACE
EQUAL
SIZED
TEXTURE
PATCHES
MUST
BE
STRETCHED
TO
FIT
OVER
THE
SURFACE
PATCH
ANOTHER
APPROACH
TO
THE
MAPPING
PROBLEM
IS
TO
USE
A
TWO
PART
MAPPING
THE
FIRST
STEP
MAPS
THE
TEXTURE
TO
A
SIMPLE
THREE
DIMENSIONAL
INTERMEDIATE
SURFACE
SUCH
AS
A
SPHERE
CYLINDER
OR
CUBE
IN
THE
SECOND
STEP
THE
INTERMEDIATE
SURFACE
CONTAINING
THE
MAPPED
TEXTURE
IS
MAPPED
TO
THE
SURFACE
BEING
RENDERED
THIS
TWO
STEP
MAPPING
PROCESS
CAN
BE
APPLIED
TO
SURFACES
DEFINED
IN
EITHER
GEOMETRIC
OR
PARAMETRIC
COORDI
NATES
THE
FOLLOWING
EXAMPLE
IS
ESSENTIALLY
THE
SAME
IN
EITHER
SYSTEM
SUPPOSE
THAT
OUR
TEXTURE
COORDINATES
VARY
OVER
THE
UNIT
SQUARE
AND
THAT
WE
USE
THE
SURFACE
OF
A
CYLINDER
OF
HEIGHT
H
AND
RADIUS
R
AS
OUR
INTERMEDIATE
OBJECT
AS
SHOWN
T
FIGURE
TEXTURE
MAPPING
WITH
A
CYLINDER
IN
FIGURE
POINTS
ON
THE
CYLINDER
ARE
GIVEN
BY
THE
PARAMETRIC
EQUATIONS
X
R
COS
U
Y
R
SIN
Z
V
H
AS
U
AND
V
VARY
OVER
HENCE
WE
CAN
USE
THE
MAPPING
U
T
V
BY
USING
ONLY
THE
CURVED
PART
OF
THE
CYLINDER
AND
NOT
THE
TOP
AND
BOTTOM
WE
WERE
ABLE
TO
MAP
THE
TEXTURE
WITHOUT
DISTORTING
ITS
SHAPE
HOWEVER
IF
WE
MAP
TO
A
CLOSED
OBJECT
SUCH
AS
A
SPHERE
WE
MUST
INTRODUCE
SHAPE
DISTORTION
THIS
PROBLEM
IS
SIMILAR
TO
THE
PROBLEM
OF
CREATING
A
TWO
DIMENSIONAL
IMAGE
OF
THE
EARTH
FOR
A
MAP
IF
YOU
LOOK
AT
THE
VARIOUS
MAPS
OF
THE
EARTH
IN
AN
ATLAS
ALL
DISTORT
SHAPES
AND
DISTANCES
BOTH
TEXTURE
MAPPING
AND
MAP
DESIGN
TECHNIQUES
MUST
CHOOSE
AMONG
A
VARIETY
OF
REPRESENTATIONS
BASED
ON
WHERE
WE
WISH
TO
PLACE
THE
DISTORTION
FOR
EXAMPLE
THE
FAMILIAR
MERCATOR
PROJECTION
PUTS
THE
MOST
DISTORTION
AT
THE
POLES
IF
WE
USE
A
SPHERE
OF
RADIUS
R
AS
THE
INTERMEDIATE
SURFACE
A
POSSIBLE
MAPPING
IS
X
R
COS
U
Y
R
SIN
COS
V
Z
R
SIN
SIN
WE
CAN
ALSO
USE
A
RECTANGULAR
BOX
AS
SHOWN
IN
FIGURE
HERE
WE
MAP
THE
TEXTURE
TO
A
BOX
THAT
CAN
BE
UNRAVELED
LIKE
A
CARDBOARD
PACKING
BOX
THIS
MAPPING
OFTEN
IS
USED
WITH
ENVIRONMENT
MAPS
SECTION
THE
SECOND
STEP
IS
TO
MAP
THE
TEXTURE
VALUES
ON
THE
INTERMEDIATE
OBJECT
TO
THE
DESIRED
SURFACE
FIGURE
SHOWS
THREE
POSSIBLE
STRATEGIES
IN
FIGURE
A
WE
TAKE
THE
TEXTURE
VALUE
AT
A
POINT
ON
THE
INTERMEDIATE
OBJECT
GO
FROM
THIS
POINT
IN
THE
DIRECTION
OF
THE
NORMAL
UNTIL
WE
INTERSECT
THE
OBJECT
AND
THEN
PLACE
THE
TEXTURE
VALUE
AT
THE
POINT
OF
INTERSECTION
WE
COULD
ALSO
REVERSE
THIS
METHOD
STARTING
AT
A
POINT
ON
THE
SURFACE
OF
THE
OBJECT
AND
GOING
IN
THE
DIRECTION
OF
THE
NORMAL
AT
THIS
POINT
UNTIL
T
FIGURE
TEXTURE
MAPPING
WITH
A
BOX
INTERMEDIATE
OBJECT
A
B
C
FIGURE
SECOND
MAPPING
A
USING
THE
NORMAL
FROM
THE
INTERME
DIATE
SURFACE
B
USING
THE
NORMAL
FROM
THE
OBJECT
SURFACE
C
USING
THE
CENTER
OF
THE
OBJECT
WE
INTERSECT
THE
INTERMEDIATE
OBJECT
WHERE
WE
OBTAIN
THE
TEXTURE
VALUE
AS
SHOWN
IN
FIGURE
B
A
THIRD
OPTION
IF
WE
KNOW
THE
CENTER
OF
THE
OBJECT
IS
TO
DRAW
A
LINE
FROM
THE
CENTER
THROUGH
A
POINT
ON
THE
OBJECT
AND
TO
CALCULATE
THE
INTERSECTION
OF
THIS
LINE
WITH
THE
INTERMEDIATE
SURFACE
AS
SHOWN
IN
FIGURE
C
THE
TEXTURE
AT
THE
POINT
OF
INTERSECTION
WITH
THE
INTERMEDIATE
OBJECT
IS
ASSIGNED
TO
THE
CORRESPONDING
POINT
ON
THE
DESIRED
OBJECT
TEXTURE
MAPPING
IN
OPENGL
OPENGL
SUPPORTS
A
VARIETY
OF
TEXTURE
MAPPING
OPTIONS
THE
FIRST
VERSION
OF
OPENGL
CONTAINED
THE
FUNCTIONALITY
TO
MAP
ONE
AND
TWO
DIMENSIONAL
TEXTURES
TO
ONE
THROUGH
FOUR
DIMENSIONAL
GRAPHICAL
OBJECTS
MAPPING
OF
THREE
DIMENSIONAL
TEXTURES
NOW
IS
PART
OF
OPENGL
AND
IS
SUPPORTED
BY
MOST
HARDWARE
WE
WILL
FOCUS
ON
MAPPING
TWO
DIMENSIONAL
TEXTURES
TO
SURFACES
OPENGL
TEXTURE
MAPS
RELY
ON
ITS
PIPELINE
ARCHITECTURE
WE
HAVE
SEEN
THAT
THERE
ARE
ACTUALLY
TWO
PARALLEL
PIPELINES
THE
GEOMETRIC
PIPELINE
AND
THE
PIXEL
PIPELINE
FOR
TEXTURE
MAPPING
THE
PIXEL
PIPELINE
MERGES
WITH
FRAGMENT
PROCESSING
AFTER
RASTER
IZATION
AS
SHOWN
IN
FIGURE
THIS
ARCHITECTURE
DETERMINES
THE
TYPE
OF
TEXTURE
MAPPING
THAT
IS
SUPPORTED
IN
PARTICULAR
TEXTURE
MAPPING
IS
DONE
AS
PART
OF
FRAG
MENT
PROCESSING
EACH
FRAGMENT
THAT
IS
GENERATED
IS
THEN
TESTED
FOR
VISIBILITY
WITH
THE
Z
BUFFER
WE
CAN
THINK
OF
TEXTURE
MAPPING
AS
A
PART
OF
THE
SHADING
PROCESS
BUT
A
PART
VERTICES
PIXELS
FIGURE
PIXEL
AND
GEOMETRY
PIPELINES
THAT
IS
DONE
ON
A
FRAGMENT
BY
FRAGMENT
BASIS
TEXTURE
COORDINATES
ARE
HANDLED
MUCH
LIKE
NORMALS
AND
COLORS
THEY
ARE
ASSOCIATED
WITH
VERTICES
THROUGH
THE
OPENGL
STATE
AND
THE
REQUIRED
TEXTURE
VALUES
CAN
THEN
BE
OBTAINED
BY
INTERPOLATING
THE
TEXTURE
CO
ORDINATES
AT
THE
VERTICES
ACROSS
POLYGONS
TWO
DIMENSIONAL
TEXTURE
MAPPING
TEXTURE
MAPPING
REQUIRES
INTERACTION
AMONG
THE
APPLICATION
PROGRAM
THE
VERTEX
SHADER
AND
THE
FRAGMENT
SHADER
THERE
ARE
THREE
BASIC
STEPS
FIRST
WE
MUST
FORM
A
TEXTURE
IMAGE
AND
PLACE
IT
IN
TEXTURE
MEMORY
ON
THE
GPU
SECOND
WE
MUST
ASSIGN
TEXTURE
COORDINATES
TO
EACH
FRAGMENT
FINALLY
WE
MUST
APPLY
THE
TEXTURE
TO
EACH
FRAGMENT
EACH
OF
THESE
STEPS
CAN
BE
ACCOMPLISHED
IN
MULTIPLE
WAYS
AND
THERE
ARE
MANY
PARAMETERS
THAT
WE
CAN
USE
TO
CONTROL
THE
PROCESS
AS
TEXTURE
MAPPING
HAS
BECOME
MORE
IMPORTANT
AND
GPUS
HAVE
EVOLVED
TO
SUPPORT
MORE
TEXTURE
MAPPING
OPTIONS
APIS
HAVE
ADDED
MORE
AND
MORE
TEXTURE
MAPPING
FUNCTIONS
TEXTURE
OBJECTS
IN
EARLY
VERSIONS
OF
OPENGL
THERE
WAS
ONLY
A
SINGLE
TEXTURE
THE
CURRENT
TEXTURE
THAT
EXISTED
AT
ANY
TIME
EACH
TIME
THAT
A
DIFFERENT
TEXTURE
WAS
NEEDED
FOR
EXAMPLE
IF
WE
WANTED
TO
APPLY
DIFFERENT
TEXTURES
TO
DIFFERENT
SURFACES
IN
THE
SAME
SCENE
WE
HAD
TO
SET
UP
A
NEW
TEXTURE
MAP
THIS
PROCESS
WAS
VERY
INEFFICIENT
EACH
TIME
ANOTHER
TEXTURE
IMAGE
WAS
NEEDED
IT
HAD
TO
BE
LOADED
INTO
TEXTURE
MEMORY
REPLACING
THE
TEXELS
THAT
WERE
ALREADY
THERE
IN
A
MANNER
ANALOGOUS
TO
HAVING
MULTIPLE
PROGRAM
OBJECTS
TEXTUREOBJECTS
ALLOW
THE
APPLICATION
PROGRAM
TO
DEFINE
OBJECTS
THAT
CONSIST
OF
THE
TEXTURE
ARRAY
AND
THE
VARIOUS
TEXTURE
PARAMETERS
THAT
CONTROL
ITS
APPLICATION
TO
SURFACES
AS
LONG
AS
THERE
IS
SUFFICIENT
MEMORY
TO
RETAIN
THEM
THESE
OBJECTS
RESIDE
IN
TEXTURE
MEMORY
WE
CREATE
A
TWO
DIMENSIONAL
TEXTURE
OBJECT
BY
FIRST
GETTING
SOME
UNUSED
IDEN
TIFIERS
BY
CALLING
GLGENTEXTURES
FOR
A
SINGLE
TEXTURE
WE
COULD
USE
THE
FOLLOWING
CODE
GLUINT
MYTEX
GLGENTEXTURES
MYTEX
WE
START
FORMING
A
NEW
TEXTURE
OBJECT
WITH
THE
FUNCTION
GLBINDTEXTURE
AS
IN
THE
FOLLOWING
CODE
GLBINDTEXTURE
MYTEX
SUBSEQUENT
TEXTURE
FUNCTIONS
SPECIFY
THE
TEXTURE
IMAGE
AND
ITS
PARAMETERS
WHICH
BECOME
PART
OF
THE
TEXTURE
OBJECT
ANOTHER
CALL
TO
GLBINDTEXTURE
WITH
A
NEW
NAME
STARTS
A
NEW
TEXTURE
OBJECT
A
LATER
EXECUTION
OF
GLBINDTEXTURE
WITH
AN
EXISTING
NAME
MAKES
THAT
TEXTURE
OBJECT
THE
CURRENT
TEXTURE
OBJECT
WE
CAN
DELETE
UNUSED
TEXTURE
OBJECTS
BY
GLDELETETEXTURES
THE
TEXTURE
ARRAY
TWO
DIMENSIONAL
TEXTURE
MAPPING
STARTS
WITH
AN
ARRAY
OF
TEXELS
WHICH
IS
A
TWO
DIMENSIONAL
PIXEL
RECTANGLE
SUPPOSE
THAT
WE
HAVE
A
IMAGE
THAT
WAS
GENERATED
BY
OUR
PROGRAM
OR
PERHAPS
WAS
READ
IN
FROM
A
FILE
INTO
AN
ARRAY
GLUBYTE
WE
SPECIFY
THAT
THIS
ARRAY
IS
TO
BE
USED
AS
A
TWO
DIMENSIONAL
TEXTURE
AFTER
A
CALL
TO
GLBINDTEXTURE
BY
MORE
GENERALLY
TWO
DIMENSIONAL
TEXTURES
ARE
SPECIFIED
THROUGH
THE
FUNCTIONS
GLENUM
TARGET
GLINT
LEVEL
GLINT
IFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
GLINT
BORDER
GLENUM
FORMAT
GLENUM
TYPE
GLVOID
TARRAY
THE
TARGET
PARAMETER
LETS
US
CHOOSE
A
SINGLE
IMAGE
AS
IN
OUR
EXAMPLE
SET
UP
A
CUBE
MAP
SECTION
OR
TEST
IF
THERE
IS
SUFFICIENT
TEXTURE
MEMORY
FOR
A
TEXTURE
IMAGE
THE
LEVEL
PARAMETER
IS
USED
FOR
MIPMAPPING
SECTION
WHERE
DENOTES
THE
HIGHEST
LEVEL
OR
RESOLUTION
OR
THAT
WE
ARE
NOT
USING
MIPMAPPING
THE
THIRD
PARAM
ETER
SPECIFIES
HOW
WE
WOULD
LIKE
THE
TEXTURE
STORED
IN
TEXTURE
MEMORY
THE
FOURTH
AND
FIFTH
PARAMETERS
WIDTH
AND
HEIGHT
SPECIFY
THE
SIZE
OF
THE
IMAGE
IN
MEMORY
THE
BORDER
PARAMETER
IS
NO
LONGER
USED
AND
SHOULD
BE
SET
TO
THE
FORMAT
AND
TYPE
PARAMETERS
DESCRIBE
HOW
THE
PIXELS
IN
THE
IMAGE
IN
PROCESSOR
MEMORY
ARE
STORED
SO
THAT
OPENGL
CAN
READ
THOSE
PIXELS
AND
STORE
THEM
IN
TEXTURE
MEMORY
TEXTURE
COORDINATES
AND
SAMPLERS
THE
KEY
ELEMENT
IN
APPLYING
A
TEXTURE
IN
THE
FRAGMENT
SHADER
IS
THE
MAPPING
BETWEEN
THE
LOCATION
OF
A
FRAGMENT
AND
THE
CORRESPONDING
LOCATION
WITHIN
THE
TEXTURE
IMAGE
WHERE
WE
WILL
GET
THE
TEXTURE
COLOR
FOR
THAT
FRAGMENT
BECAUSE
EACH
FRAGMENT
HAS
A
T
FIGURE
MAPPING
TO
TEXTURE
COORDINATES
LOCATION
IN
THE
FRAME
BUFFER
THAT
IS
ONE
OF
ITS
ATTRIBUTES
WE
NEED
NOT
REFER
TO
THIS
POSITION
EXPLICITLY
IN
THE
FRAGMENT
SHADER
THE
POTENTIAL
DIFFICULTY
IS
IDENTIFYING
THE
DESIRED
LOCATION
IN
THE
TEXTURE
IMAGE
IN
MANY
APPLICATIONS
WE
COULD
COMPUTE
THIS
LOCATION
FROM
A
MATHEMATICAL
MODEL
OF
THE
OBJECTS
IN
OTHERS
WE
MIGHT
USE
SOME
SORT
OF
APPROXIMATION
OPENGL
DOES
NOT
HAVE
ANY
PREFERRED
METHOD
AND
SIMPLY
REQUIRES
THAT
WE
PROVIDE
THE
LOCATION
TO
THE
FRAGMENT
SHADER
OR
COMPUTE
IT
WITHIN
THE
SHADER
RATHER
THAN
HAVING
TO
USE
INTEGER
TEXEL
LOCATIONS
THAT
DEPEND
ON
THE
DIMENSIONS
OF
THE
TEXTURE
IMAGE
WE
USE
TWO
FLOATING
POINT
TEXTURE
COORDINATES
AND
T
BOTH
OF
WHICH
RANGE
OVER
THE
INTERVAL
AS
WE
TRAVERSE
THE
TEXTURE
IMAGE
FOR
OUR
EXAMPLE
OF
A
512
TWO
DIMENSIONAL
TEXTURE
IMAGE
THE
VALUE
CORRESPONDS
TO
THE
TEXEL
AND
CORRESPONDS
TO
THE
TEXEL
AS
SHOWN
IN
FIGURE
ANY
VALUES
OF
AND
T
IN
THE
UNIT
INTERVAL
CORRESPOND
TO
A
UNIQUE
TEXEL
IT
IS
UP
TO
THE
APPLICATION
AND
THE
SHADERS
TO
DETERMINE
THE
APPROPRIATE
TEXTURE
COORDINATES
FOR
A
FRAGMENT
THE
MOST
COMMON
METHOD
IS
TO
TREAT
TEXTURE
COORDINATES
AS
A
VERTEX
ATTRIBUTE
THUS
WE
COULD
PROVIDE
TEXTURE
COORDINATES
JUST
AS
WE
PROVIDE
VERTEX
COLORS
IN
THE
APPLICATION
WE
THEN
WOULD
PASS
THESE
COORDINATES
TO
THE
VERTEX
SHADER
AND
LET
THE
RASTERIZER
INTERPOLATE
THE
VERTEX
TEXTURE
COORDINATES
TO
FRAGMENT
TEXTURE
COORDINATES
LET
CONSIDER
A
SIMPLE
EXAMPLE
OF
USING
OUR
CHECKERBOARD
TEXTURE
IMAGE
FOR
EACH
SIDE
OF
THE
CUBE
EXAMPLE
THE
EXAMPLE
IS
PARTICULARLY
SIMPLE
BECAUSE
WE
HAVE
AN
OBVIOUS
MAPPING
BETWEEN
EACH
FACE
OF
THE
CUBE
AND
THE
TEXTURE
COORDINATES
FOR
EACH
VERTEX
NAMELY
WE
ASSIGN
TEXTURE
COORDINATES
AND
TO
THE
FOUR
CORNERS
OF
EACH
FACE
RECALL
THAT
WE
FORM
TRIANGLES
FOR
THE
SIX
FACES
WE
ADD
AN
ARRAY
TO
HOLD
THE
TEXTURE
COORDINATES
DEFINE
N
GLFLOAT
N
HERE
IS
THE
CODE
OF
THE
QUAD
FUNCTION
TYPEDEF
VOID
QUAD
INT
A
INT
B
INT
C
INT
D
STATIC
INT
I
VERTEX
AND
COLOR
INDEX
I
COLORS
A
POINTS
I
VERTICES
A
I
I
I
COLORS
A
POINTS
I
VERTICES
B
I
I
I
COLORS
A
POINTS
I
VERTICES
C
I
I
I
COLORS
A
POINTS
I
VERTICES
A
I
I
I
COLORS
A
POINTS
I
VERTICES
C
I
I
I
COLORS
A
POINTS
I
VERTICES
D
I
I
WE
ALSO
NEED
TO
DO
OUR
INITIALIZATION
SO
WE
CAN
PASS
THE
TEXTURE
COORDINATES
AS
A
VERTEX
ATTRIBUTE
WITH
THE
IDENTIFIER
TEXCOORD
IN
THE
VERTEX
SHADER
GLUINT
GLGETATTRIBLOCATION
PROGRAM
TEXCOORD
GLENABLEVERTEXATTRIBARRAY
GLVERTEXATTRIBPOINTER
NEXT
WE
NEED
TO
INITIALIZE
THE
BUFFER
OBJECT
TO
STORE
ALL
OF
THE
DATA
SINCE
WE
HAVE
THREE
SEPARATE
ARRAYS
OF
DATA
WE
WILL
NEED
TO
LOAD
THEM
INTO
AN
APPROPRIATELY
SIZED
BUFFER
IN
THREE
OPERATIONS
USING
GLBUFFERSUBDATA
GLINTPTR
OFFSET
GLSIZEIPTR
SIZE
SIZEOF
POINTS
SIZEOF
SIZEOF
GLGENBUFFERS
BUFFER
GLBINDBUFFER
BUFFERS
GLBUFFERDATA
SIZE
NULL
OFFSET
GLBUFFERDATA
OFFSET
SIZEOF
POINTS
POINTS
OFFSET
SIZEOF
POINTS
GLBUFFERDATA
OFFSET
SIZEOF
OFFSET
SIZEOF
GLBUFFERDATA
OFFSET
SIZEOF
TURNING
TO
THE
VERTEX
SHADER
WE
ADD
THE
TEXTURE
COORDINATE
ATTRIBUTE
AND
OUTPUT
THE
TEXTURE
COORDINATES
HERE
IS
THE
VERTEX
SHADER
FOR
THE
ROTATING
CUBE
WITH
TEXTURE
COORDINATES
IN
TEXCOORD
IN
VPOSITION
IN
VCOLOR
OUT
COLOR
OUT
ST
UNIFORM
THETA
VOID
MAIN
RX
RY
RZ
C
COS
THETA
SIN
THETA
RZ
C
Z
Z
Z
C
Z
RY
C
Y
Y
Y
C
Y
RX
C
X
X
X
C
X
RZ
RY
RX
VPOSITION
COLOR
VCOLOR
ST
TEXCOORD
THE
OUTPUT
TEXTURE
COORDINATES
ST
ARE
INTERPOLATED
BY
THE
RASTERIZER
AND
CAN
BE
INPUTS
TO
THE
FRAGMENT
SHADER
NOTE
THAT
THE
VERTEX
SHADER
IS
ONLY
CONCERNED
WITH
THE
TEXTURE
COORDINATES
AND
HAS
NOTHING
TO
DO
WITH
THE
TEXTURE
OBJECT
WE
CREATED
EARLIER
WE
SHOULD
NOT
BE
SUR
PRISED
BECAUSE
THE
TEXTURE
ITSELF
IS
NOT
NEEDED
UNTIL
WE
ARE
READY
TO
ASSIGN
A
COLOR
TO
A
FRAGMENT
THAT
IS
IN
THE
FRAGMENT
SHADER
NOTE
ALSO
THAT
MANY
OF
THE
COMPLEXITIES
OF
HOW
WE
CAN
APPLY
THE
TEXTURE
MANY
OF
WHICH
WE
HAVE
YET
TO
DISCUSS
ARE
INSIDE
THE
TEXTURE
OBJECT
AND
THUS
WILL
ALLOW
US
TO
USE
VERY
SIMPLE
FRAGMENT
SHADERS
THE
KEY
TO
PUTTING
EVERYTHING
TOGETHER
IS
A
NEW
TYPE
OF
VARIABLE
CALLED
A
SAMPLER
WHICH
MOST
OFTEN
APPEARS
ONLY
IN
A
FRAGMENT
SHADER
A
SAMPLER
VARIABLE
PROVIDES
ACCESS
TO
A
TEXTURE
OBJECT
INCLUDING
ALL
ITS
PARAMETERS
THERE
ARE
SAMPLER
VARIABLES
FOR
THE
TYPES
OF
TEXTURES
SUPPORTED
BY
OPENGL
INCLUDING
ONE
DIMENSIONAL
SAM
TWO
DIMENSIONAL
AND
THREE
DIMENSIONAL
TEX
TURES
AND
SPECIAL
TYPES
SUCH
AS
CUBE
MAPS
SAMPLERCUBE
WE
LINK
THE
TEXTURE
OBJECT
MYTEX
WE
CREATED
IN
THE
APPLICATION
WITH
THE
SHADER
USING
A
UNIFORM
VARIABLE
GLUINT
GLGETUNIFORMLOCATION
PROGRAM
TEXMAP
WHERE
TEXMAP
IS
THE
NAME
OF
THE
SAMPLER
IN
THE
FRAGMENT
SHADER
AND
THE
SECOND
PARAMETER
IN
REFERS
TO
THE
DEFAULT
TEXTURE
UNIT
WE
WILL
DISCUSS
MUTLIPLE
TEXTURE
UNITS
IN
SECTION
THE
FRAGMENT
SHADER
IS
ALMOST
TRIVIAL
THE
INTERPOLATED
VERTEX
COLORS
AND
THE
TEXTURE
COORDINATES
ARE
INPUT
VARIABLES
IF
WE
WANT
THE
TEXTURE
VALUES
TO
MULTIPLY
THE
COLORS
AS
IF
WE
WERE
USING
THE
CHECKERBOARD
TEXTURE
TO
SIMULATE
GLASS
THAT
ALTERNATES
BETWEEN
CLEAR
AND
OPAQUE
WE
COULD
MULTIPLY
THE
COLORS
FROM
THE
APPLICATION
BY
THE
VALUES
IN
THE
TEXTURE
IMAGE
AS
IN
THE
FOLLOWING
FRAGMENT
SHADER
IN
ST
IN
COLOR
UNIFORM
TEXMAP
VOID
MAIN
COLOR
TEXMAP
ST
IN
THE
EXAMPLE
SHOWN
IN
FIGURE
A
WE
USE
THE
WHOLE
TEXTURE
ON
A
RECTANGLE
IF
WE
USED
ONLY
PART
OF
THE
RANGE
OF
AND
T
FOR
EXAMPLE
WE
WOULD
USE
ONLY
PART
OF
FOR
THE
TEXTURE
MAP
AND
WOULD
GET
AN
IMAGE
LIKE
THAT
IN
FIGURE
B
OPENGL
INTERPOLATES
AND
T
ACROSS
THE
QUADRILATERAL
THEN
MAPS
THESE
VALUES
BACK
TO
THE
APPROPRIATE
TEXEL
IN
THE
QUADRILATERAL
EXAMPLE
IS
SIMPLE
BECAUSE
THERE
IS
AN
OBVIOUS
MAPPING
OF
TEXTURE
COORDINATES
TO
VERTICES
FOR
GENERAL
POLYGONS
THE
APPLICATION
PROGRAMMER
MUST
DECIDE
HOW
TO
ASSIGN
THE
TEXTURE
A
B
FIGURE
MAPPING
OF
A
CHECKERBOARD
TEXTURE
TO
A
QUADRILATERAL
A
USING
THE
ENTIRE
TEXEL
ARRAY
B
USING
PART
OF
THE
TEXEL
ARRAY
A
B
C
FIGURE
MAPPING
OF
TEXTURE
TO
POLYGONS
A
AND
B
MAPPING
OF
A
CHECKERBOARD
TEXTURE
TO
A
TRIANGLE
C
MAPPING
OF
A
CHECKERBOARD
TEXTURE
TO
A
TRAPEZOID
COORDINATES
FIGURE
SHOWS
A
FEW
OF
THE
POSSIBILITIES
WITH
THE
SAME
TEXTURE
MAP
FIGURES
A
AND
B
USE
THE
SAME
TRIANGLE
BUT
DIFFERENT
TEXTURE
COORDINATES
NOTE
THE
ARTIFACTS
OF
THE
INTERPOLATION
AND
HOW
QUADRILATERALS
ARE
TREATED
AS
TWO
TRIANGLES
AS
THEY
ARE
RENDERED
IN
FIGURE
C
THE
BASICS
OF
OPENGL
TEXTURE
MAPPING
ARE
SIMPLE
SPECIFY
AN
ARRAY
OF
COLORS
FOR
THE
TEXTURE
VALUES
THEN
ASSIGN
TEXTURE
COORDINATES
UNFORTUNATELY
THERE
ARE
A
FEW
NASTY
DETAILS
THAT
WE
MUST
DISCUSS
BEFORE
WE
CAN
USE
TEXTURE
EFFECTIVELY
SOLVING
THE
RESULTING
PROBLEMS
INVOLVES
MAKING
TRADE
OFFS
BETWEEN
QUALITY
OF
THE
IMAGES
AND
EFFICIENCY
ONE
PROBLEM
IS
HOW
TO
INTERPRET
A
VALUE
OF
OR
T
OUTSIDE
OF
THE
RANGE
GENERALLY
WE
WANT
THE
TEXTURE
EITHER
TO
REPEAT
IF
WE
SPECIFY
VALUES
OUTSIDE
THIS
RANGE
OR
TO
CLAMP
THE
VALUES
TO
OR
THAT
IS
WE
WANT
TO
USE
THE
VALUES
AT
AND
FOR
VALUES
BELOW
AND
ABOVE
THE
INTERVAL
RESPECTIVELY
FOR
REPEATED
TEXTURES
WE
SET
THESE
PARAMETERS
VIA
GLTEXPARAMETERI
FOR
T
WE
USE
FOR
CLAMPING
WE
USE
BY
EXECUTING
THESE
FUNCTIONS
AFTER
THE
GLBINDTEXTURE
THE
PARAMETERS
BECOME
PART
OF
THE
TEXTURE
OBJECT
POINT
SAMPLE
FIGURE
TEXELS
USED
WITH
LINEAR
FILTERING
TEXTURE
SAMPLING
ALIASING
OF
TEXTURES
IS
A
MAJOR
PROBLEM
WHEN
WE
MAP
TEXTURE
COORDINATES
TO
THE
ARRAY
OF
TEXELS
WE
RARELY
GET
A
POINT
THAT
CORRESPONDS
TO
THE
CENTER
OF
A
TEXEL
ONE
OPTION
IS
TO
USE
THE
VALUE
OF
THE
TEXEL
THAT
IS
CLOSEST
TO
THE
TEXTURE
COORDINATE
OUTPUT
BY
THE
RASTERIZER
THIS
OPTION
IS
KNOWN
AS
POINT
SAMPLING
BUT
IT
IS
THE
ONE
MOST
SUBJECT
TO
VISIBLE
ALIASING
ERRORS
A
BETTER
STRATEGY
ALTHOUGH
ONE
THAT
REQUIRES
MORE
WORK
IS
TO
USE
A
WEIGHTED
AVERAGE
OF
A
GROUP
OF
TEXELS
IN
THE
NEIGHBORHOOD
OF
THE
TEXEL
DETERMINED
BY
POINT
SAMPLING
THIS
OPTION
IS
KNOWN
AS
LINEAR
FILTERING
THUS
IN
FIGURE
WE
SEE
THE
LOCATION
WITHIN
A
TEXEL
THAT
IS
GIVEN
BY
BILINEAR
INTERPOLATION
FROM
THE
TEXTURE
COORDINATES
AT
THE
VERTICES
AND
THE
FOUR
TEXELS
THAT
WOULD
BE
USED
TO
OBTAIN
A
SMOOTHER
VALUE
IF
WE
ARE
USING
LINEAR
FILTERING
THERE
IS
A
PROBLEM
AT
THE
EDGES
OF
THE
TEXEL
ARRAY
AS
WE
NEED
ADDITIONAL
TEXEL
VALUES
OUTSIDE
THE
ARRAY
THERE
IS
A
FURTHER
COMPLICATION
HOWEVER
IN
DECIDING
HOW
TO
USE
THE
TEXEL
VALUES
TO
OBTAIN
A
TEXTURE
VALUE
THE
SIZE
OF
THE
PIXEL
THAT
WE
ARE
TRYING
TO
COLOR
ON
THE
SCREEN
MAY
BE
SMALLER
OR
LARGER
THAN
ONE
TEXEL
AS
SHOWN
IN
FIGURE
IN
THE
FIRST
CASE
THE
TEXEL
IS
LARGER
THAN
ONE
PIXEL
MAGNIFICATION
IN
THE
SECOND
IT
IS
SMALLER
MINIFICATION
IN
BOTH
CASES
THE
FASTEST
STRATEGY
IS
TO
USE
THE
VALUE
OF
THE
NEAREST
POINT
SAMPLING
WE
CAN
SPECIFY
THIS
OPTION
FOR
BOTH
MAGNIFICATION
AND
MINIFICATION
OF
TEXTURES
AS
FOLLOWS
GLTEXPARAMETERI
GLTEXPARAMETERI
ALTERNATIVELY
WE
CAN
USE
FILTERING
TO
OBTAIN
A
SMOOTHER
LESS
ALIASED
IMAGE
IF
WE
SPECIFY
INSTEAD
OF
OPENGL
HAS
ANOTHER
WAY
TO
DEAL
WITH
THE
MINIFICATION
PROBLEM
IT
IS
CALLED
MIPMAPPING
FOR
OBJECTS
THAT
PROJECT
TO
AN
AREA
OF
SCREEN
SPACE
THAT
IS
SMALL
COM
PARED
WITH
THE
SIZE
OF
THE
TEXEL
ARRAY
WE
DO
NOT
NEED
THE
RESOLUTION
OF
THE
ORIGINAL
T
XS
T
XS
YS
A
YS
B
FIGURE
MAPPING
TEXELS
TO
PIXELS
A
MINIFICATION
B
MAGNIFICATION
TEXEL
ARRAY
OPENGL
ALLOWS
US
TO
CREATE
A
SERIES
OF
TEXTURE
ARRAYS
AT
REDUCED
SIZES
IT
WILL
THEN
AUTOMATICALLY
USE
THE
APPROPRIATE
SIZE
FOR
A
ORIGINAL
ARRAY
WE
CAN
SET
UP
AND
ARRAYS
FOR
THE
CURRENT
TEXTURE
OBJECT
BY
EXECUTING
THE
FUNCTION
CALL
GLGENERATEMIPMAP
WE
CAN
ALSO
SET
UP
THE
MAPS
DIRECTLY
USING
THE
LEVEL
PARAMETER
IN
GLTEXIM
THIS
PARAMETER
IS
THE
LEVEL
IN
THE
MIPMAP
HIERARCHY
FOR
THE
SPECIFIED
TEXTURE
ARRAY
THUS
LEVEL
REFERS
TO
THE
ORIGINAL
IMAGE
LEVEL
TO
THE
IMAGE
AT
HALF
RESOLUTION
AND
SO
ON
HOWEVER
WE
CAN
GIVE
A
POINTER
TO
ANY
IMAGE
IN
DIFFERENT
CALLS
TO
GLTEX
AND
THUS
CAN
HAVE
ENTIRELY
DIFFERENT
IMAGES
USED
AT
DIFFERENT
LEVELS
OF
THE
MIPMAP
HIERARCHY
THESE
MIPMAPS
ARE
INVOKED
AUTOMATICALLY
IF
WE
SPECIFY
GLTEXPARAMETERI
THIS
OPTION
ASKS
OPENGL
TO
USE
POINT
SAMPLING
WITH
THE
BEST
MIPMAP
WE
CAN
ALSO
DO
FILTERING
WITHIN
THE
BEST
MIPMAP
POINT
SAMPLING
USING
LINEAR
FILTERING
BETWEEN
MIPMAPS
OR
BOTH
FILTERS
FIGURE
SHOWS
THE
DIFFERENCES
IN
MAPPING
A
TEXTURE
USING
THE
NEAREST
TEXEL
LINEAR
FILTERING
AND
MIPMAPPING
BOTH
WITH
USING
THE
NEAREST
TEXEL
AND
WITH
LINEAR
FILTERING
THE
OBJECT
IS
A
QUADRILATERAL
THAT
APPEARS
ALMOST
AS
A
TRIANGLE
WHEN
SHOWN
IN
PERSPECTIVE
THE
TEXTURE
IS
A
SERIES
OF
BLACK
AND
WHITE
LINES
THAT
IS
APPLIED
SO
THAT
THE
LINES
CONVERGE
AT
THE
FAR
SIDE
OF
THE
QUADRILATERAL
NOTE
THAT
THIS
TEXTURE
MAP
BECAUSE
OF
ITS
REGULARITY
SHOWS
DRAMATIC
ALIASING
EFFECTS
THE
USE
OF
THE
NEAREST
TEXEL
SHOWS
MOIRE
PATTERNS
AND
JAGGEDNESS
IN
THE
LINES
USING
LINEAR
FILTERING
MAKES
THE
LINES
SMOOTHER
BUT
THERE
ARE
STILL
CLEAR
MOIRE
PATTERNS
THE
TEXELS
BETWEEN
THE
BLACK
AND
WHITE
STRIPES
ARE
GRAY
BECAUSE
OF
THE
FILTERING
MIPMAPPING
ALSO
REPLACES
MANY
OF
THE
BLACKS
AND
WHITES
OF
THE
TWO
COLOR
PATTERNS
WITH
GRAYS
THAT
ARE
THE
AVERAGE
OF
THE
TWO
COLOR
VALUES
FOR
THE
PARTS
OF
THE
OBJECT
THAT
ARE
FARTHEST
FROM
THE
VIEWER
THE
TEXELS
ARE
GRAY
AND
BLEND
WITH
THE
BACKGROUND
THE
MIPMAPPED
TEXTURE
USING
THE
NEAREST
TEXEL
IN
THE
PROPER
MIPMAP
STILL
SHOWS
THE
JAGGEDNESS
THAT
IS
SMOOTHED
OUT
WHEN
WE
USE
LINEAR
FILTERING
WITH
THE
MIPMAP
ADVANCES
IN
THE
SPEED
OF
GRAPHICS
PROCESSORS
GPUS
AND
THE
INCLUSION
OF
LARGE
AMOUNTS
OF
TEXTURE
MEMORY
IN
THESE
GPUS
OFTEN
ALLOWS
APPLICATIONS
TO
USE
FILTERING
AND
MIPMAPPING
WITHOUT
A
PERFORMANCE
PENALTY
A
FINAL
ISSUE
IN
USING
TEXTURES
IN
OPENGL
IS
THE
INTERACTION
BETWEEN
TEXTURE
AND
SHADING
FOR
RGB
COLORS
THERE
ARE
MULTIPLE
OPTIONS
THE
TEXTURE
CAN
MODULATE
THE
SHADE
THAT
WE
WOULD
HAVE
ASSIGNED
WITHOUT
TEXTURE
MAPPING
BY
MULTIPLYING
THE
COLOR
COMPONENTS
OF
THE
TEXTURE
BY
THE
COLOR
COMPONENTS
FROM
THE
SHADER
WE
COULD
LET
THE
COLOR
OF
THE
TEXTURE
TOTALLY
DETERMINE
THE
COLOR
OF
A
FRAGMENT
A
TECHNIQUE
CALLED
DECALING
THESE
AND
OTHER
OPTIONS
ARE
EASILY
IMPLEMENTED
IN
THE
FRAGMENT
SHADER
A
B
C
D
FIGURE
TEXTURE
MAPPING
TO
A
QUADRILATERAL
A
POINT
SAMPLING
B
LINEAR
FILTERING
C
MIPMAPPING
POINT
SAMPLING
D
MIPMAPPING
LINEAR
FILTERING
WORKING
WITH
TEXTURE
COORDINATES
OUR
EXAMPLES
SO
FAR
HAVE
ASSUMED
IMPLICITLY
THAT
WE
KNOW
HOW
TO
ASSIGN
TEXTURE
COORDINATES
IF
WE
WORK
WITH
RECTANGULAR
POLYGONS
OF
THE
SAME
SIZE
THEN
IT
IS
FAIRLY
EASY
TO
ASSIGN
COORDINATES
WE
CAN
ALSO
USE
THE
FACT
THAT
TEXTURE
COORDINATES
CAN
BE
STORED
AS
ONE
TWO
THREE
OR
FOUR
DIMENSIONAL
ARRAYS
JUST
AS
ARE
VERTICES
THUS
TEXTURE
COORDINATES
CAN
BE
TRANSFORMED
BY
MATRICES
AND
MANIPULATED
IN
THE
SAME
MANNER
AS
WE
TRANSFORMED
POSITIONS
WITH
THE
MODEL
VIEW
AND
PROJECTION
MATRICES
WE
CAN
USE
A
TEXTURE
MATRIX
TO
SCALE
AND
ORIENT
TEXTURES
AND
TO
CREATE
EFFECTS
IN
WHICH
THE
TEXTURE
MOVES
WITH
THE
OBJECT
THE
CAMERA
OR
THE
LIGHTS
HOWEVER
IF
THE
SET
OF
POLYGONS
IS
AN
APPROXIMATION
TO
A
CURVED
OBJECT
THEN
AS
SIGNING
TEXTURE
COORDINATES
IS
FAR
MORE
DIFFICULT
CONSIDER
THE
POLYGONAL
APPROXIMA
FIGURE
POLYGONAL
MODEL
OF
UTAH
TEAPOT
FIGURE
TEXTURE
MAPPED
UTAH
TEAPOT
TION
OF
THE
UTAH
IN
FIGURE
ALTHOUGH
THE
MODEL
USES
ONLY
QUADRILATERALS
THESE
QUADRILATERALS
DIFFER
IN
SIZE
WITH
SMALLER
QUADRILATERALS
IN
AREAS
WHERE
THE
OB
JECT
HAS
HIGHER
CURVATURE
AND
LARGER
QUADRILATERALS
IN
FLATTER
AREAS
FIGURE
SHOWS
OUR
CHECKERBOARD
TEXTURE
MAPPED
TO
THE
TEAPOT
WITHOUT
MAKING
ANY
ADJUSTMENT
FOR
THE
DIFFERENT
SIZES
OF
THE
POLYGONS
AS
WE
CAN
SEE
BY
ASSIGNING
THE
SAME
SET
OF
TEXTURE
COORDINATES
TO
EACH
POLYGON
THE
TEXTURE
MAPPING
PROCESS
ADJUSTS
TO
THE
INDIVIDUAL
SIZES
OF
THE
POLYGONS
BY
SCALING
THE
TEXTURE
MAP
AS
NEEDED
HENCE
IN
AREAS
SUCH
AS
THE
HANDLE
WHERE
MANY
SMALL
POLYGONS
ARE
NEEDED
TO
GIVE
A
GOOD
APPROXIMATION
TO
THE
CURVED
SURFACE
THE
BLACK
AND
WHITE
BOXES
ARE
SMALL
COMPARED
TO
THOSE
ON
THE
BODY
OF
THE
TEAPOT
IN
SOME
APPLICATIONS
THESE
PATTERNS
ARE
ACCEPTABLE
HOWEVER
IF
ALL
SURFACES
OF
THE
TEAPOT
WERE
MADE
FROM
THE
SAME
MATERIAL
WE
WOULD
EXPECT
TO
SEE
THE
SAME
PATTERN
ON
ALL
ITS
PARTS
IN
PRINCIPLE
WE
COULD
USE
THE
TEXTURE
MATRIX
TO
SCALE
TEXTURE
COORDINATES
TO
ACHIEVE
THE
DESIRED
DISPLAY
HOWEVER
IN
PRACTICE
IT
IS
ALMOST
IMPOSSIBLE
TO
DETERMINE
THE
NECESSARY
INFORMATION
FROM
THE
MODEL
TO
FORM
THE
MATRIX
ONE
SOLUTION
TO
THIS
PROBLEM
IS
TO
GENERATE
TEXTURE
COORDINATES
FOR
EACH
VERTEX
IN
TERMS
OF
THE
DISTANCE
FROM
A
PLANE
IN
EITHER
EYE
COORDINATES
OR
OBJECT
COORDINATES
MATHEMATICALLY
EACH
TEXTURE
COORDINATE
IS
GIVEN
AS
A
LINEAR
COMBINATION
OF
THE
HO
MOGENEOUS
COORDINATE
VALUES
THUS
FOR
AND
T
WE
SHALL
DISCUSS
THE
UTAH
TEAPOT
IN
DETAIL
IN
CHAPTER
A
B
FIGURE
TEAPOT
USING
TEXTURE
COORDINATE
GENERATION
A
IN
OBJECT
COORDINATES
B
IN
EYE
COORDINATES
ASX
BSY
CSZ
DSW
T
ATX
BTY
CTZ
DTW
FIGURE
A
SHOWS
THE
TEAPOT
WITH
TEXTURE
COORDINATE
GENERATION
IN
OBJECT
SPACE
FIGURE
B
USES
THE
SAME
EQUATIONS
BUT
WITH
THE
CALCULATIONS
IN
EYE
SPACE
BY
DOING
THE
CALCULATION
IN
OBJECT
SPACE
THE
TEXTURE
IS
FIXED
TO
THE
OBJECT
AND
THUS
WILL
ROTATE
WITH
THE
OBJECT
USING
EYE
SPACE
THE
TEXTURE
PATTERN
CHANGES
AS
WE
APPLY
TRANSFORMATIONS
TO
THE
OBJECT
AND
GIVE
THE
ILLUSION
OF
THE
OBJECT
MOVING
THROUGH
A
TEXTURE
FIELD
ONE
OF
THE
IMPORTANT
APPLICATIONS
OF
THIS
TECHNIQUE
IS
IN
TERRAIN
GENERATION
AND
MAPPING
WE
CAN
MAP
SURFACE
FEATURES
AS
TEXTURES
DIRECTLY
ONTO
A
THREE
DIMENSIONAL
MESH
MULTITEXTURING
THUS
FAR
WE
HAVE
LOOKED
AT
APPLYING
A
SINGLE
TEXTURE
TO
AN
OBJECT
HOWEVER
THERE
ARE
MANY
SURFACE
RENDERING
EFFECTS
THAT
CAN
BEST
BE
IMPLEMENTED
BY
MORE
THAN
A
SINGLE
APPLICATION
OF
A
TEXTURE
FOR
EXAMPLE
SUPPOSE
THAT
WE
WANT
TO
APPLY
A
SHADOW
TO
AN
OBJECT
WHOSE
SURFACE
SHADES
ARE
THEMSELVES
DETERMINED
BY
A
TEXTURE
MAP
WE
COULD
USE
A
TEXTURE
MAP
FOR
THE
SHADOW
BUT
IF
THERE
WERE
ONLY
A
SINGLE
TEXTURE
APPLICATION
THIS
METHOD
WOULD
NOT
WORK
FRAGMENT
FIGURE
SEQUENCE
OF
TEXTURE
UNITS
IF
INSTEAD
WE
HAVE
MULTIPLE
TEXTURE
UNITS
AS
IN
FIGURE
THEN
WE
CAN
ACCOM
PLISH
THIS
TASK
EACH
UNIT
ACTS
AS
AN
INDEPENDENT
TEXTURING
STAGE
STARTING
WITH
THE
RESULTS
OF
THE
PREVIOUS
STAGE
THIS
FACILITY
IS
SUPPORTED
IN
RECENT
VERSIONS
OF
OPENGL
SUPPOSE
THAT
WE
WANT
TO
USE
TWO
TEXTURE
UNITS
WE
CAN
DEFINE
TWO
TEXTURE
OBJECTS
AS
PART
OF
OUR
INITIALIZATION
WE
THEN
ACTIVATE
EACH
IN
TURN
AND
DECIDE
HOW
ITS
TEXTURE
SHOULD
BE
APPLIED
THE
USUAL
CODE
IS
OF
THE
FORM
GLACTIVETEXTURE
UNIT
GLBINDTEXTURE
HOW
TO
APPLY
TEXTURE
GLACTIVETEXTURE
UNIT
GLBINDTEXTURE
HOW
TO
APPLY
TEXTURE
EACH
TEXTURE
UNIT
CAN
USE
DIFFERENT
TEXTURE
COORDINATES
AND
THE
APPLICATION
NEEDS
TO
PROVIDE
THOSE
TEXTURE
COORDINATES
FOR
EACH
UNIT
FRAME
BUFFER
TEXTURE
GENERATION
ONE
OF
THE
MOST
POWERFUL
USES
OF
TEXTURE
MAPPING
IS
TO
PROVIDE
DETAIL
WITHOUT
GENERATING
NUMEROUS
GEOMETRIC
OBJECTS
HIGH
END
GRAPHICS
SYSTEMS
CAN
DO
TWO
DIMENSIONAL
TEXTURE
MAPPING
IN
REAL
TIME
FOR
EVERY
FRAME
THE
TEXTURE
IS
MAPPED
TO
OBJECTS
AS
PART
OF
THE
RENDERING
PROCESS
AT
ALMOST
THE
SAME
RATE
AS
NON
TEXTURE
MAPPED
OBJECTS
ARE
PROCESSED
GRAPHICS
BOARDS
FOR
PERSONAL
COMPUTERS
NOW
CONTAIN
A
SIGNIFICANT
AMOUNT
OF
TEXTURE
MEMORY
AND
ALLOW
GAME
DEVELOPERS
TO
USE
TEXTURE
MAPPING
TO
CREATE
COMPLEX
ANIMATED
ENVIRONMENTS
IF
FOR
EXAMPLE
WE
WANT
TO
SIMULATE
GRASS
IN
A
SCENE
WE
CAN
TEXTURE
MAP
AN
IMAGE
OF
GRASS
THAT
WE
MIGHT
HAVE
OBTAINED
BY
SAY
SCANNING
A
PHOTOGRAPH
FASTER
THAN
WE
CAN
GENERATE
TWO
OR
THREE
DIMENSIONAL
OBJECTS
THAT
LOOK
LIKE
GRASS
IN
MAPPING
APPLICATIONS
RATHER
THAN
GENERATING
REALISTIC
SURFACE
DETAIL
FOR
TERRAIN
WE
CAN
DIGITIZE
A
REAL
MAP
AND
PAINT
IT
ON
A
THREE
DIMENSIONAL
SURFACE
MODEL
BY
TEXTURE
MAPPING
WE
CAN
ALSO
LOOK
FOR
PROCEDURAL
METHODS
FOR
DETERMINING
TEXTURE
PATTERNS
OF
PARTICULAR
INTEREST
ARE
PATTERNS
THAT
WE
SEE
IN
NATURE
SUCH
AS
THE
TEXTURES
OF
SAND
GRASS
OR
MINERALS
THESE
TEXTURES
SHOW
BOTH
STRUCTURE
REGULAR
PATTERNS
AND
CONSID
ERABLE
RANDOMNESS
MOST
APPROACHES
TO
GENERATING
SUCH
TEXTURES
ALGORITHMICALLY
START
WITH
A
RANDOM
NUMBER
GENERATOR
AND
PROCESS
ITS
OUTPUT
AS
SHOWN
IN
FIGURE
WE
SHALL
STUDY
PROCEDURAL
NOISE
IN
DETAIL
IN
CHAPTER
NOISE
TEXTURE
FIGURE
TEXTURE
GENERATION
THE
GENERATION
OF
A
THREE
DIMENSIONAL
TEXTURE
FIELD
T
T
R
IS
A
DIRECT
EXTENSION
OF
TWO
DIMENSIONAL
TEXTURE
GENERATION
TECHNIQUES
THERE
ARE
SOME
PRACTICAL
ADVAN
TAGES
TO
USING
THREE
DIMENSIONAL
TEXTURES
MOST
IMPORTANT
IS
THAT
BY
ASSOCIATING
EACH
T
R
VALUE
DIRECTLY
WITH
AN
X
Y
Z
POINT
WE
CAN
AVOID
THE
MAPPING
PROBLEM
EN
TIRELY
THE
USER
NEEDS
ONLY
TO
DEFINE
A
FUNCTION
T
T
R
WITH
THE
DESIRED
PROPERTIES
CONCEPTUALLY
THIS
PROCESS
IS
SIMILAR
TO
SCULPTING
THE
THREE
DIMENSIONAL
OBJECT
FROM
A
SOLID
BLOCK
WHOSE
VOLUME
IS
COLORED
BY
THE
SPECIFIED
TEXTURE
THIS
TECHNIQUE
HAS
BEEN
USED
TO
GENERATE
OBJECTS
THAT
LOOK
AS
IF
THEY
HAVE
BEEN
CARVED
FROM
SOLID
ROCK
THE
TEXTURE
GENERATION
PROCESS
DEFINES
A
FUNCTION
T
T
R
THAT
DISPLAYS
THE
GRAININESS
WE
ASSOCIATE
WITH
MATERIALS
SUCH
AS
MARBLE
AND
GRANITE
THERE
ARE
OTHER
ADVANTAGES
TO
USING
THREE
DIMENSIONAL
TEXTURES
SUPPOSE
THAT
WE
HAVE
A
TWO
DIMENSIONAL
TEXTURE
THAT
WE
OBTAINED
BY
PHOTOGRAPHING
OR
MODELING
SOME
NATURAL
MATERIAL
SUCH
AS
STONE
NOW
SUPPOSE
THAT
WE
WANT
TO
CREATE
A
CUBE
THAT
LOOKS
LIKE
IT
WAS
FORMED
FROM
THIS
STONE
IF
WE
USE
TWO
DIMENSIONAL
TEXTURE
MAPPING
WE
HAVE
TO
MAP
THE
SAME
PATTERN
TO
THE
SIX
SIDES
OF
THE
CUBE
TO
MAKE
THE
CUBE
LOOK
REAL
WE
MUST
TRY
TO
MAKE
THE
TEXTURE
MAP
APPEAR
CONTINUOUS
AT
THE
EDGES
OF
THE
CUBE
WHERE
TWO
TEXTURE
MAPS
MEET
WHEN
WE
WORK
WITH
NATURAL
PATTERNS
IT
IS
VIRTUALLY
IMPOSSIBLE
TO
ENSURE
THAT
WE
CAN
DO
THIS
MATCHING
NOTE
THAT
THE
PROBLEM
IS
EVEN
MORE
SERIOUS
AT
THE
VERTICES
OF
THE
CUBE
WHERE
THREE
TEXTURE
MAPS
MEET
SEE
EXERCISE
OFTEN
WE
CAN
USE
FILTERING
AND
TEXTURE
BORDERS
TO
GIVE
VISUALLY
ACCEPTABLE
RESULTS
HOWEVER
IF
WE
USE
THREE
DIMENSIONAL
TEXTURES
THIS
PROBLEM
DOES
NOT
ARISE
ENVIRONMENT
MAPS
HIGHLY
REFLECTIVE
SURFACES
ARE
CHARACTERIZED
BY
SPECULAR
REFLECTIONS
THAT
MIRROR
THE
EN
VIRONMENT
CONSIDER
FOR
EXAMPLE
A
SHINY
METAL
BALL
IN
THE
MIDDLE
OF
A
ROOM
WE
CAN
SEE
THE
CONTENTS
OF
THE
ROOM
IN
A
DISTORTED
FORM
ON
THE
SURFACE
OF
THE
BALL
OBVIOUSLY
THIS
EFFECT
REQUIRES
GLOBAL
INFORMATION
AS
WE
CANNOT
SHADE
THE
BALL
CORRECTLY
WITHOUT
KNOWING
ABOUT
THE
REST
OF
THE
SCENE
A
PHYSICALLY
BASED
RENDERING
METHOD
SUCH
AS
A
RAY
TRACER
CAN
PRODUCE
THIS
KIND
OF
IMAGE
ALTHOUGH
IN
PRACTICE
RAY
TRACING
CALCULA
TIONS
USUALLY
ARE
TOO
TIME
CONSUMING
TO
BE
PRACTICAL
FOR
REAL
TIME
APPLICATIONS
WE
CAN
HOWEVER
USE
VARIANTS
OF
TEXTURE
MAPPING
THAT
CAN
GIVE
APPROXIMATE
RESULTS
THAT
ARE
VISUALLY
ACCEPTABLE
THROUGH
ENVIRONMENT
MAPS
OR
REFLECTION
MAPS
THE
BASIC
IDEA
IS
SIMPLE
CONSIDER
THE
MIRROR
IN
FIGURE
WHICH
WE
CAN
LOOK
AT
AS
A
POLYGON
WHOSE
SURFACE
IS
A
HIGHLY
SPECULAR
MATERIAL
FROM
THE
POINT
OF
VIEW
OF
A
RENDERER
THE
POSITION
OF
THE
VIEWER
AND
THE
NORMAL
TO
THE
POLYGON
ARE
KNOWN
SO
THAT
THE
ANGLE
OF
REFLECTION
IS
DETERMINED
AS
IN
CHAPTER
IF
WE
FOLLOW
ALONG
THIS
FIGURE
SCENE
WITH
A
MIRROR
ANGLE
UNTIL
WE
INTERSECT
THE
ENVIRONMENT
WE
OBTAIN
THE
SHADE
THAT
IS
REFLECTED
IN
THE
MIRROR
OF
COURSE
THIS
SHADE
IS
THE
RESULT
OF
A
SHADING
PROCESS
THAT
INVOLVES
THE
LIGHT
SOURCES
AND
MATERIALS
IN
THE
SCENE
WE
CAN
OBTAIN
AN
APPROXIMATELY
CORRECT
VALUE
OF
THIS
SHADE
AS
PART
OF
A
TWO
STEP
RENDERING
PASS
SIMILAR
IN
SOME
RESPECTS
TO
THE
TWO
STEP
TEXTURE
MAPPING
PROCESS
THAT
WE
OUTLINED
IN
SECTION
IN
THE
FIRST
PASS
WE
RENDER
THE
SCENE
WITHOUT
THE
MIRROR
POLYGON
WITH
THE
CAMERA
PLACED
AT
THE
CENTER
OF
THE
MIRROR
POINTED
IN
THE
DIRECTION
OF
THE
NORMAL
OF
THE
MIRROR
THUS
WE
OBTAIN
AN
IMAGE
OF
THE
OBJECTS
IN
THE
ENVIRONMENT
AS
SEEN
BY
THE
MIRROR
THIS
IMAGE
IS
NOT
QUITE
CORRECT
EXERCISE
BUT
IS
USUALLY
GOOD
ENOUGH
WE
CAN
THEN
USE
THIS
IMAGE
TO
OBTAIN
THE
SHADES
TEXTURE
VALUES
TO
PLACE
ON
THE
MIRROR
POLYGON
FOR
THE
SECOND
NORMAL
RENDERING
WITH
THE
MIRROR
PLACED
BACK
IN
THE
SCENE
THERE
ARE
TWO
DIFFICULTIES
WITH
THIS
APPROACH
FIRST
THE
IMAGES
THAT
WE
OBTAIN
IN
THE
FIRST
PASS
ARE
NOT
QUITE
CORRECT
BECAUSE
THEY
HAVE
BEEN
FORMED
WITHOUT
ONE
OF
THE
OBJECTS
THE
MIRROR
IN
THE
ENVIRONMENT
SECOND
WE
MUST
CONFRONT
THE
MAPPING
ISSUE
ONTO
WHAT
SURFACE
SHOULD
WE
PROJECT
THE
SCENE
IN
THE
FIRST
PASS
AND
WHERE
SHOULD
WE
PLACE
THE
CAMERA
POTENTIALLY
WE
WANT
ALL
THE
INFORMATION
IN
THE
SCENE
AS
WE
MAY
WANT
TO
DO
SOMETHING
LIKE
HAVE
OUR
MIRROR
MOVE
SO
THAT
WE
SHOULD
SEE
DIFFERENT
PARTS
OF
THE
ENVIRONMENT
ON
SUCCESSIVE
FRAMES
AND
THUS
A
SIMPLE
PROJECTION
WILL
NOT
SUFFICE
THERE
HAVE
BEEN
A
VARIETY
OF
APPROACHES
TO
THIS
PROJECTION
PROBLEM
THE
CLAS
SIC
APPROACH
IS
TO
PROJECT
THE
ENVIRONMENT
ONTO
A
SPHERE
CENTERED
AT
THE
CENTER
OF
PROJECTION
IN
FIGURE
WE
SEE
SOME
POLYGONS
THAT
ARE
OUTSIDE
THE
SPHERE
AND
THEIR
PROJECTIONS
ON
THE
SPHERE
NOTE
THAT
A
VIEWER
LOCATED
AT
THE
CENTER
OF
THE
SPHERE
CANNOT
TELL
WHETHER
SHE
IS
SEEING
THE
POLYGONS
IN
THEIR
ORIGINAL
POSITIONS
OR
THEIR
PRO
JECTIONS
ON
THE
SPHERE
THIS
ILLUSION
IS
SIMILAR
TO
WHAT
WE
SEE
IN
A
PLANETARIUM
THE
STARS
THAT
APPEAR
TO
BE
AN
INFINITE
DISTANCE
AWAY
ARE
ACTUALLY
THE
PROJECTION
OF
LIGHTS
ONTO
THE
HEMISPHERE
WHICH
ENCLOSES
THE
AUDIENCE
IN
THE
ORIGINAL
VERSION
OF
ENVIRONMENT
MAPPING
THE
SURFACE
OF
THE
SPHERE
WAS
THEN
CONVERTED
TO
A
RECTANGLE
USING
LINES
OF
LONGITUDE
AND
LATITUDE
FOR
THE
MAPPING
ALTHOUGH
CONCEPTUALLY
SIMPLE
THERE
ARE
PROBLEMS
AT
THE
POLES
WHERE
THE
SHAPE
DIS
TORTION
BECOMES
INFINITE
COMPUTATIONALLY
THIS
MAPPING
DOES
NOT
PRESERVE
AREAS
VERY
WELL
AND
REQUIRES
EVALUATING
A
LARGE
NUMBER
OF
TRIGONOMETRIC
FUNCTIONS
OBJECT
IN
ENVIRONMENT
INTERMEDIATE
SURFACE
PROJECTED
OBJECT
FIGURE
MAPPING
OF
THE
ENVIRONMENT
X
FIGURE
REFLECTION
MAP
OPENGL
SUPPORTS
A
VARIATION
OF
THIS
METHOD
CALLED
SPHERE
MAPPING
THE
APPLI
CATION
PROGRAM
SUPPLIES
A
CIRCULAR
IMAGE
THAT
IS
THE
ORTHOGRAPHIC
PROJECTION
OF
THE
SPHERE
ONTO
WHICH
THE
ENVIRONMENT
HAS
BEEN
MAPPED
THE
ADVANTAGE
OF
THIS
METHOD
IS
THAT
THE
MAPPING
FROM
THE
REFLECTION
VECTOR
TO
TWO
DIMENSIONAL
TEXTURE
COORDI
NATES
ON
THIS
CIRCLE
IS
SIMPLE
AND
CAN
BE
IMPLEMENTED
IN
EITHER
HARDWARE
OR
SOFTWARE
THE
DIFFICULT
PART
IS
OBTAINING
THE
REQUIRED
CIRCULAR
IMAGE
IT
CAN
BE
APPROXIMATED
BY
TAKING
A
PERSPECTIVE
PROJECTION
WITH
A
VERY
WIDE
ANGLE
LENS
OR
BY
REMAPPING
SOME
OTHER
TYPE
OF
PROJECTION
SUCH
AS
THE
CUBE
PROJECTION
THAT
WE
DISCUSS
NEXT
WE
LOAD
THE
TEXTURE
IMAGE
IN
TEXTURE
MEMORY
THROUGH
THE
EQUATIONS
FOR
GENERATING
THE
TEXTURE
COORDINATES
CAN
BE
UNDERSTOOD
WITH
THE
HELP
OF
FIGURE
IT
IS
PROBABLY
EASIEST
IF
WE
WORK
BACKWARD
FROM
THE
VIEWER
TO
THE
IMAGE
SUPPOSE
THAT
THE
TEXTURE
MAP
IS
IN
THE
PLANE
Z
D
WHERE
D
IS
POSITIVE
AND
WE
PROJECT
BACKWARD
ORTHOGONALLY
TOWARD
A
UNIT
SPHERE
CENTERED
AT
THE
ORIGIN
THUS
IF
THE
TEXTU
RE
COORDINATES
IN
THE
PLANE
ARE
T
THEN
THE
PROJECTOR
INTERSECTS
THE
SPHERE
AT
T
FOR
THE
UNIT
SPHERE
CENTERED
AT
THE
ORIGIN
THE
COORDINATES
OF
ANY
POINT
ON
THE
SPHERE
ARE
ALSO
THE
COMPONENTS
OF
THE
UNIT
NORMAL
AT
THAT
POINT
WE
CAN
THEN
COMPUTE
THE
DIRECTION
OF
REFLECTION
AS
IN
CHAPTER
BY
R
N
V
N
V
WHERE
N
T
THE
VECTOR
R
POINTS
INTO
THE
ENVIRONMENT
THUS
ANY
OBJECT
THAT
R
INTERSECTS
HAS
TEXTURE
COORDINATES
T
HOWEVER
THIS
ARGUMENT
IS
BACKWARD
BECAUSE
WE
START
WITH
AN
OBJECT
DEFINED
BY
VERTICES
GIVEN
R
WE
CAN
SOLVE
FOR
AND
T
AND
FIND
THAT
IF
RX
RZ
THEN
RX
F
RY
T
F
WHERE
F
R
IF
WE
PUT
EVERYTHING
INTO
EYE
COORDINATES
WE
COMPUTE
R
USING
THE
UNIT
VECTOR
FROM
THE
ORIGIN
TO
THE
VERTEX
FOR
V
AND
THE
VERTEX
NORMAL
FOR
N
THIS
PROCESS
REVEALS
SOME
ISSUES
THAT
SHOW
THAT
THIS
METHOD
IS
ONLY
APPROXIMATE
THE
REFLECTION
MAP
IS
ONLY
CORRECT
FOR
THE
VERTEX
AT
THE
ORIGIN
IN
PRINCIPLE
EACH
VERTEX
SHOULD
HAVE
ITS
OWN
REFLECTION
MAP
ACTUALLY
EACH
POINT
ON
THE
OBJECT
SHOULD
HAVE
ITS
OWN
MAP
AND
NOT
AN
APPROXIMATE
VALUE
COMPUTED
BY
INTERPOLATION
THE
ERRORS
ARE
MOST
SIGNIFICANT
THE
FARTHER
THE
OBJECT
IS
FROM
THE
ORIGIN
NEVERTHELESS
REFLECTION
REFLECTIVE
OBJECT
V
FIGURE
REFLECTIVE
CUBE
MAP
MAPPING
GIVES
VISUALLY
ACCEPTABLE
RESULTS
IN
MOST
SITUATIONS
ESPECIALLY
WHEN
THERE
IS
ANIMATION
AS
IN
FILMS
AND
GAMES
IF
WE
WANT
TO
COMPUTE
AN
ENVIRONMENT
MAP
USING
THE
GRAPHICS
SYSTEM
WE
PREFER
TO
USE
THE
STANDARD
PROJECTIONS
THAT
ARE
SUPPORTED
BY
THE
GRAPHICS
SYSTEMS
FOR
AN
ENVIRONMENT
SUCH
AS
A
ROOM
THE
NATURAL
INTERMEDIATE
OBJECT
IS
A
BOX
WE
COMPUTE
SIX
PROJECTIONS
CORRESPONDING
TO
THE
WALLS
FLOOR
AND
CEILING
USING
SIX
VIRTUAL
CAMERAS
LOCATED
AT
THE
CENTER
OF
THE
BOX
EACH
POINTING
IN
A
DIFFERENT
DIRECTION
AT
THIS
POINT
WE
CAN
TREAT
THE
SIX
IMAGES
AS
A
SINGLE
ENVIRONMENT
MAP
AND
DERIVE
THE
TEXTURES
FROM
IT
AS
IN
FIGURE
COLOR
PLATE
SHOWS
ONE
FRAME
FROM
PIXAR
ANIMATION
STUDIO
GERI
GAME
A
REFLECTION
MAP
WAS
COMPUTED
ON
A
BOX
COLOR
PLATE
AND
THEN
MAPPED
TO
GERI
GLASSES
WE
COULD
ALSO
COMPUTE
THE
SIX
IMAGES
IN
OUR
PROGRAM
AND
USE
THEM
TO
COMPUTE
THE
CIRCULAR
IMAGE
REQUIRED
BY
OPENGL
SPHERICAL
MAPS
NOTE
THAT
ALL
THESE
METHODS
CAN
SUFFER
FROM
GEOMETRIC
DISTORTIONS
AND
ALIASING
PROBLEMS
IN
ADDITION
UNLESS
THE
APPLICATION
RECOMPUTES
THE
ENVIRONMENT
MAPS
THEY
ARE
NOT
CORRECT
IF
THE
VIEWER
MOVES
REGARDLESS
OF
HOW
THE
IMAGES
ARE
COMPUTING
ONCE
WE
HAVE
THEM
WE
CAN
SPECIFY
A
CUBE
MAP
IN
OPENGL
WITH
SIX
FUNCTION
CALLS
ONE
FOR
EACH
FACE
OF
A
CUBE
CENTERED
AT
THE
ORIGIN
THUS
IF
WE
HAVE
A
512
512
RGBA
IMAGE
IMAGEXP
FOR
THE
POSITIVE
X
FACE
WE
HAVE
THE
FOLLOWING
512
512
IMAGEXP
FOR
REFLECTION
MAPS
THE
CALCULATION
OF
TEXTURE
COORDINATES
CAN
BE
DONE
AUTO
MATICALLY
HOWEVER
CUBE
MAPS
ARE
FUNDAMENTALLY
DIFFERENT
FROM
SPHERE
MAPS
WHICH
ARE
MUCH
LIKE
STANDARD
TWO
DIMENSIONAL
TEXTURE
MAPS
WITH
SPECIAL
COORDINATE
CAL
CULATIONS
HERE
WE
MUST
USE
THREE
DIMENSIONAL
TEXTURE
COORDINATES
WHICH
ARE
OFTEN
COMPUTED
IN
THE
SHADER
THESE
TECHNIQUES
ARE
EXAMPLES
OF
MULTIPASS
RENDERING
OR
MULTIRENDERING
WHERE
IN
ORDER
TO
COMPUTE
A
SINGLE
IMAGE
WE
COMPUTE
MULTIPLE
IMAGES
EACH
USING
THE
RENDERING
PIPELINE
MULTIPASS
METHODS
ARE
BECOMING
INCREASINGLY
MORE
IMPOR
TANT
AS
THE
POWER
OF
GRAPHICS
CARDS
HAS
INCREASED
TO
THE
POINT
THAT
WE
CAN
RENDER
A
SCENE
MULTIPLE
TIMES
FROM
DIFFERENT
PERSPECTIVES
IN
LESS
TIME
THAN
IS
NEEDED
FOR
REA
SONABLE
REFRESH
RATES
EQUIVALENTLY
MOST
OF
THESE
TECHNIQUES
CAN
BE
DONE
WITHIN
THE
FRAGMENT
SHADER
REFLECTION
MAP
EXAMPLE
LET
LOOK
AT
A
SIMPLE
EXAMPLE
OF
A
REFLECTION
MAP
BASED
ON
OUR
ROTATING
CUBE
EXAMPLE
IN
THIS
EXAMPLE
WE
WILL
USE
A
CUBE
MAP
IN
WHICH
EACH
OF
THE
SIX
TEXTURE
MAPS
IS
A
SINGLE
TEXEL
OUR
ROTATING
CUBE
WILL
BE
TOTALLY
REFLECTIVE
AND
PLACED
INSIDE
A
BOX
EACH
OF
WHOSE
SIDES
IS
ONE
OF
THE
SIX
COLORS
RED
GREEN
BLUE
CYAN
MAGENTA
AND
YELLOW
HERE
HOW
WE
CAN
SET
UP
THE
CUBE
MAP
AS
PART
OF
INITIALIZATION
USING
TEXTURE
UNIT
GLUINT
TEX
GLUBYTE
RED
GLUBYTE
GREEN
GLUBYTE
BLUE
GLUBYTE
CYAN
GLUBYTE
MAGENTA
GLUBYTE
YELLOW
GLACTIVETEXTURE
GLGENTEXTURES
TEX
GLBINDTEXTURE
TEX
RED
GREEN
BLUE
CYAN
MAGENTA
YELLOW
GLTEXPARAMETERI
FIGURE
REFLECTION
CUBE
MAP
THE
TEXTURE
MAP
WILL
BE
APPLIED
USING
A
SAMPLER
IN
THE
FRAGMENT
SHADER
WE
SET
UP
THE
REQUIRED
UNIFORM
VARIABLES
AS
IN
OUR
OTHER
EXAMPLES
GLUINT
TEXMAPLOCATION
TEXMAPLOCATION
GLGETUNIFORMLOCATION
PROGRAM
TEXMAP
TEXMAPLOCATION
CORRESPONDING
TO
UNIT
NOW
THAT
WE
HAVE
SET
UP
THE
CUBE
MAP
WE
CAN
TURN
TO
THE
DETERMINATION
OF
THE
TEXTURE
COORDINATES
THE
REQUIRED
COMPUTATIONS
FOR
A
REFLECTION
OR
ENVIRONMENT
MAP
ARE
SHOWN
IN
FIGURE
WE
ASSUME
THAT
THE
ENVIRONMENT
HAS
ALREADY
BEEN
MAPPED
TO
THE
CUBE
THE
DIFFERENCE
BETWEEN
A
REFLECTION
MAP
AND
A
SIMPLE
CUBE
TEXTURE
MAP
IS
THAT
WE
USE
THE
REFLECTION
VECTOR
TO
ACCESS
THE
TEXTURE
FOR
A
REFLECTION
MAP
RATHER
THAN
THE
VIEW
VECTOR
WE
CAN
COMPUTE
THE
REFLECTION
VECTOR
AT
EACH
VERTEX
IN
OUR
VERTEX
PROGRAM
AND
THEN
LET
THE
FRAGMENT
PROGRAM
INTERPOLATE
THESE
VALUES
OVER
THE
PRIMITIVE
HOWEVER
TO
COMPUTE
THE
REFLECTION
VECTOR
WE
NEED
THE
NORMAL
TO
EACH
SIDE
OF
THE
ROTATING
CUBE
WE
CAN
COMPUTE
NORMALS
IN
THE
APPLICATION
AND
SEND
THEM
TO
THE
VERTEX
SHADER
AS
A
VERTEX
ATTRIBUTE
THROUGH
THE
QUAD
FUNCTION
NORMALS
N
NORMAL
VOID
QUAD
INT
A
INT
B
INT
C
INT
D
STATIC
INT
I
NORMAL
NORMALIZE
CROSS
VERTICES
B
VERTICES
A
VERTICES
C
VERTICES
B
NORMALS
I
NORMAL
POINTS
I
VERTICES
A
I
NORMALS
I
NORMAL
POINTS
I
VERTICES
B
I
NORMALS
I
NORMAL
POINTS
I
VERTICES
C
I
NORMALS
I
NORMAL
POINTS
I
VERTICES
A
I
NORMALS
I
NORMAL
POINTS
I
VERTICES
C
I
NORMALS
I
NORMAL
POINTS
I
VERTICES
D
I
AND
COMBINING
THE
NORMAL
DATA
IN
A
VERTEX
ARRAY
GLBINDBUFFER
BUFFER
GLBUFFERDATA
SIZEOF
POINTS
SIZEOF
NORMALS
NULL
GLBUFFERSUBDATA
SIZEOF
POINTS
POINTS
GLBUFFERSUBDATA
SIZEOF
POINTS
SIZEOF
NORMALS
NORMALS
THAT
IS
ALIGNED
WITH
THE
SHADER
GLGETATTRIBLOCATION
PROGRAM
NORMAL
GLENABLEVERTEXATTRIBARRAY
WE
WILL
ASSUME
THAT
THE
ROTATION
TO
THE
CUBE
IS
APPLIED
IN
THE
APPLICATION
AND
ITS
EFFECT
IS
INCORPORATED
IN
THE
MODEL
VIEW
MATRIX
WE
ALSO
ASSUME
THAT
THE
CAMERA
LOCATION
IS
FIXED
THE
NORMALS
MUST
THEN
BE
ROTATED
IN
THE
VERTEX
SHADER
BEFORE
WE
CAN
USE
THE
REFLECT
FUNCTION
TO
COMPUTE
THE
DIRECTION
OF
REFLECTION
OUR
VERTEX
SHADER
IS
IN
VPOSITION
IN
NORMAL
OUT
R
UNIFORM
MODELVIEW
UNIFORM
PROJECTION
VOID
MAIN
PROJECTION
MODELVIEW
VPOSITION
EYEPOS
VPOSITION
XYZ
NN
MODELVIEW
NORMAL
N
NORMALIZE
NN
XYZ
R
REFLECT
EYEPOS
N
IT
COMPUTES
THE
REFLECTION
VECTOR
IN
EYE
COORDINATES
AS
A
VARYING
VARIABLE
IF
WE
WANT
THE
COLOR
TO
BE
TOTALLY
DETERMINED
BY
THE
TEXTURE
THE
FRAGMENT
SHADER
IS
SIMPLY
AS
FOLLOWS
IN
R
UNIFORM
SAMPLERCUBE
TEXMAP
VOID
MAIN
TEXCOLOR
TEXTURECUBE
TEXMAP
R
TEXCOLOR
WE
CAN
CREATE
MORE
COMPLEX
LIGHTING
BY
HAVING
THE
COLOR
DETERMINED
IN
PART
BY
THE
SPECULAR
DIFFUSE
AND
AMBIENT
LIGHTING
AS
WE
DID
FOR
THE
MODIFIED
PHONG
LIGHTING
MODEL
HOWEVER
WE
MUST
BE
CAREFUL
AS
TO
WHICH
FRAME
WE
WANT
TO
USE
IN
OUR
SHADERS
THE
DIFFERENCE
BETWEEN
THIS
EXAMPLE
AND
PREVIOUS
ONES
IS
THAT
THE
ENVIRONMENT
MAP
USUALLY
IS
COMPUTED
IN
WORLD
COORDINATES
OBJECT
POSITIONS
AND
NORMALS
ARE
SPECIFIED
IN
OBJECT
COORDINATES
AND
ARE
BROUGHT
INTO
THE
WORLD
FRAME
BY
MODELING
TRANSFORMA
TIONS
IN
THE
APPLICATION
WE
USUALLY
NEVER
SEE
THE
OBJECT
COORDINATE
REPRESENTATION
OF
OBJECTS
BECAUSE
THE
MODEL
VIEW
TRANSFORMATION
CONVERTS
OBJECT
COORDINATES
DIRECTLY
TO
EYE
COORDINATES
IN
MANY
APPLICATIONS
WE
DEFINE
OUR
OBJECTS
DIRECTLY
WITHOUT
MOD
ELING
TRANSFORMATIONS
SO
THAT
MODEL
AND
OBJECT
COORDINATES
ARE
THE
SAME
HOWEVER
WE
WANT
TO
WRITE
OUR
PROGRAM
IN
A
MANNER
THAT
ALLOWS
FOR
MODELING
TRANSFORMATIONS
WHEN
WE
DO
REFLECTION
MAPPING
ONE
WAY
TO
ACCOMPLISH
THIS
TASK
IS
TO
COMPUTE
THE
MODELING
MATRIX
IN
THE
APPLICATION
AND
PASS
IT
TO
THE
FRAGMENT
PROGRAM
AS
A
UNI
FORM
VARIABLE
ALSO
NOTE
THAT
WE
NEED
THE
INVERSE
TRANSPOSE
OF
THE
MODELING
MATRIX
TO
TRANSFORM
THE
NORMAL
HOWEVER
IF
WE
PASS
IN
THE
INVERSE
MATRIX
AS
ANOTHER
UNI
FORM
VARIABLE
WE
CAN
POSTMULTIPLY
THE
NORMAL
TO
OBTAIN
THE
DESIRED
RESULT
COLOR
PLATE
SHOWS
THE
USE
OF
A
REFLECTION
MAP
TO
DETERMINE
THE
COLORS
ON
THE
TEAPOT
THE
TEAPOT
IS
SET
INSIDE
A
CUBE
EACH
OF
WHOSE
SIDES
IS
ONE
OF
THE
COLORS
RED
GREEN
BLUE
CYAN
MAGENTA
OR
YELLOW
BUMP
MAPPING
BUMP
MAPPING
IS
A
TEXTURE
MAPPING
TECHNIQUE
THAT
CAN
GIVE
THE
APPEARANCE
OF
GREAT
COMPLEXITY
IN
AN
IMAGE
WITHOUT
INCREASING
THE
GEOMETRIC
COMPLEXITY
UNLIKE
SIMPLE
TEXTURE
MAPPING
BUMP
MAPPING
WILL
SHOW
CHANGES
IN
SHADING
AS
THE
LIGHT
SOURCE
OR
OBJECT
MOVES
MAKING
THE
OBJECT
APPEAR
TO
HAVE
VARIATIONS
IN
SURFACE
SMOOTHNESS
LET
START
BY
RETURNING
TO
OUR
EXAMPLE
OF
CREATING
AN
IMAGE
OF
AN
ORANGE
IF
WE
TAKE
A
PHOTOGRAPH
OF
A
REAL
ORANGE
WE
CAN
APPLY
THIS
IMAGE
AS
A
TEXTURE
MAP
TO
A
SURFACE
HOWEVER
IF
WE
MOVE
THE
LIGHTS
OR
ROTATE
THE
OBJECT
WE
IMMEDIATELY
NOTICE
THAT
WE
HAVE
THE
IMAGE
OF
A
MODEL
OF
AN
ORANGE
RATHER
THAN
THE
IMAGE
OF
A
REAL
ORANGE
THE
PROBLEM
IS
THAT
A
REAL
ORANGE
IS
CHARACTERIZED
PRIMARILY
BY
SMALL
VARIATIONS
IN
ITS
SURFACE
RATHER
THAN
BY
VARIATIONS
IN
ITS
COLOR
AND
THE
FORMER
ARE
NOT
CAPTURED
BY
TEXTURE
MAPPING
THE
TECHNIQUE
OF
BUMP
MAPPING
VARIES
THE
APPARENT
SHAPE
OF
THE
SURFACE
BY
PERTURBING
THE
NORMAL
VECTORS
AS
THE
SURFACE
IS
RENDERED
THE
COLORS
THAT
ARE
GENERATED
BY
SHADING
THEN
SHOW
A
VARIATION
IN
THE
SURFACE
PROPERTIES
UNLIKE
TECHNIQUES
SUCH
AS
ENVIRONMENT
MAPPING
THAT
CAN
BE
IMPLEMENTED
WITHOUT
PROGRAMMABLE
SHADERS
BUMP
MAPPING
CANNOT
BE
DONE
IN
REAL
TIME
WITHOUT
THEM
FINDING
BUMP
MAPS
WE
START
WITH
THE
OBSERVATION
THAT
THE
NORMAL
AT
ANY
POINT
ON
A
SURFACE
CHARACTERIZES
THE
ORIENTATION
OF
THE
SURFACE
AT
THAT
POINT
IF
WE
PERTURB
THE
NORMAL
AT
EACH
POINT
ON
THE
SURFACE
BY
A
SMALL
AMOUNT
THEN
WE
CREATE
A
SURFACE
WITH
SMALL
VARIATIONS
IN
ITS
SHAPE
IF
THIS
PERTURBATION
TO
THE
NORMAL
CAN
BE
APPLIED
ONLY
DURING
THE
SHADING
PROCESS
WE
CAN
USE
A
SMOOTH
MODEL
OF
THE
SURFACE
WHICH
MUST
HAVE
A
SMOOTH
NORMAL
BUT
WE
CAN
SHADE
IT
IN
A
WAY
THAT
GIVES
THE
APPEARANCE
OF
A
COMPLEX
SURFACE
BECAUSE
THE
PERTURBATIONS
ARE
TO
THE
NORMAL
VECTORS
THE
RENDERING
CALCULATIONS
ARE
CORRECT
FOR
THE
ALTERED
SURFACE
EVEN
THOUGH
THE
MORE
COMPLEX
SURFACE
DEFINED
BY
THE
PERTURBED
NORMALS
NEED
NEVER
BE
CREATED
WE
CAN
PERTURB
THE
NORMALS
IN
MANY
WAYS
THE
FOLLOWING
PROCEDURE
FOR
PARA
METRIC
SURFACES
IS
AN
EFFICIENT
ONE
LET
P
U
V
BE
A
POINT
ON
A
PARAMETRIC
SURFACE
THE
PARTIAL
DERIVATIVES
AT
THE
POINT
X
X
U
V
PU
Y
PV
Y
LIE
IN
THE
PLANE
TANGENT
TO
THE
SURFACE
AT
THE
POINT
THEIR
CROSS
PRODUCT
CAN
BE
NOR
MALIZED
TO
GIVE
THE
UNIT
NORMAL
AT
THAT
POINT
N
PU
PV
PU
PV
SUPPOSE
THAT
WE
DISPLACE
THE
SURFACE
IN
THE
NORMAL
DIRECTION
BY
A
FUNCTION
CALLED
THE
BUMP
OR
DISPLACEMENT
FUNCTION
D
U
V
WHICH
WE
CAN
ASSUME
IS
KNOWN
AND
SMALL
D
U
V
THE
DISPLACED
SURFACE
IS
GIVEN
BY
PT
P
D
U
V
N
WE
WOULD
PREFER
NOT
TO
CREATE
THE
DISPLACED
SURFACE
BECAUSE
SUCH
A
SURFACE
WOULD
HAVE
A
HIGHER
GEOMETRIC
COMPLEXITY
THAN
THE
UNDISPLACED
SURFACE
AND
WOULD
THUS
SLOW
DOWN
THE
RENDERING
PROCESS
WE
JUST
WANT
TO
MAKE
IT
LOOK
AS
THOUGH
WE
HAVE
DISPLACED
THE
ORIGINAL
SURFACE
WE
CAN
ACHIEVE
THE
DESIRED
LOOK
BY
ALTERING
THE
NORMAL
N
INSTEAD
OF
P
AND
USING
THE
PERTURBED
NORMAL
IN
OUR
SHADING
CALCULATIONS
THE
NORMAL
AT
THE
PERTURBED
POINT
PT
IS
GIVEN
BY
THE
CROSS
PRODUCT
NT
PTU
PTV
WE
CAN
COMPUTE
THE
TWO
PARTIAL
DERIVATIVES
BY
DIFFERENTIATING
THE
EQUATION
FOR
PT
OBTAINING
PT
P
D
N
D
U
V
N
U
U
U
U
PT
P
D
N
D
U
V
N
V
V
V
V
IF
D
IS
SMALL
WE
CAN
NEGLECT
THE
TERM
ON
THE
RIGHT
OF
THESE
TWO
EQUATIONS
AND
TAKE
THEIR
CROSS
PRODUCT
NOTING
THAT
N
N
TO
OBTAIN
THE
APPROXIMATE
PERTURBED
NORMAL
NT
N
D
N
P
D
N
P
U
V
V
U
THE
TWO
TERMS
ON
THE
RIGHT
ARE
THE
DISPLACEMENT
THE
DIFFERENCE
BETWEEN
THE
ORIGINAL
AND
PERTURBED
NORMALS
THE
CROSS
PRODUCT
OF
TWO
VECTORS
IS
ORTHOGONAL
TO
BOTH
OF
THEM
CONSEQUENTLY
BOTH
CROSS
PRODUCTS
YIELD
VECTORS
THAT
LIE
IN
THE
TANGENT
PLANE
AT
P
AND
THEIR
SUM
MUST
ALSO
BE
IN
THE
TANGENT
PLANE
ALTHOUGH
PTU
AND
PTV
LIE
IN
THE
TANGENT
PLANE
PERPENDICULAR
TO
NT
THEY
ARE
NOT
NECESSARILY
ORTHOGONAL
TO
EACH
OTHER
WE
CAN
OBTAIN
AN
ORTHOGONAL
BASIS
AND
A
CORRESPONDING
ROTATION
MATRIX
USING
THE
CROSS
PRODUCT
FIRST
WE
NORMALIZE
NT
AND
PTU
OBTAINING
THE
VECTORS
M
NT
NT
T
PTU
PTU
WE
OBTAIN
THE
THIRD
ORTHOGONAL
VECTOR
B
BY
B
M
T
THE
VECTOR
T
IS
CALLED
THE
TANGENT
VECTOR
AT
P
AND
B
IS
CALLED
THE
BINORMAL
VECTOR
AT
P
THE
MATRIX
M
T
B
M
T
IS
THE
ROTATION
MATRIX
THAT
WILL
CONVERT
REPRESENTATIONS
IN
THE
ORIGINAL
SPACE
TO
REPRE
SENTATIONS
IN
TERMS
OF
THE
THREE
VECTORS
THE
NEW
SPACE
IS
SOMETIMES
CALLED
TANGENT
SPACE
BECAUSE
THE
TANGENT
AND
BINORMAL
VECTORS
CAN
CHANGE
FOR
EACH
POINT
ON
THE
SURFACE
TANGENT
SPACE
IS
A
LOCAL
COORDINATE
SYSTEM
TO
BETTER
UNDERSTAND
THE
IMPLICATION
OF
HAVING
INTRODUCED
ANOTHER
FRAME
ONE
THAT
IS
LOCAL
TO
THE
POINT
ON
THE
SURFACE
LET
CONSIDER
A
BUMP
FROM
THE
PLANE
Z
THE
SURFACE
CAN
BE
WRITTEN
IN
IMPLICIT
FORM
AS
F
X
Y
AX
BY
C
IF
WE
LET
U
X
AND
V
Y
THEN
IF
A
WE
HAVE
U
C
P
U
V
AV
A
THE
VECTORS
P
U
AND
P
V
CAN
BE
NORMALIZED
TO
GIVE
THE
ORTHOGONAL
VECTORS
PTU
PTU
PTV
PTV
T
T
BECAUSE
THESE
VECTORS
TURNED
OUT
TO
BE
ORTHOGONAL
THEY
SERVE
AS
THE
TANGENT
BINORMAL
VECTORS
THE
UNIT
NORMAL
IS
N
T
FOR
THIS
CASE
THE
DISPLACEMENT
FUNCTION
IS
A
FUNCTION
D
X
Y
TO
SPECIFY
THE
BUMP
MAP
WE
NEED
TWO
FUNCTIONS
THAT
GIVE
THE
VALUES
OF
D
X
AND
D
Y
IF
THESE
FUNCTIONS
ARE
KNOWN
ANALYTICALLY
WE
CAN
EVALUATE
THEM
EITHER
IN
THE
APPLICATION
OR
IN
THE
SHADER
MORE
OFTEN
HOWEVER
WE
HAVE
A
SAMPLED
VERSION
OF
D
X
Y
AS
AN
ARRAY
OF
PIXELS
D
DIJ
THE
REQUIRED
PARTIAL
DERIVATIVES
CAN
BE
APPROXIMATED
BY
THE
DIFFERENCE
BETWEEN
ADJACENT
ELEMENTS
IN
THE
FOLLOWING
ARRAY
D
X
DIJ
DI
J
D
Y
DIJ
DI
J
THESE
ARRAYS
CAN
BE
PRECOMPUTED
IN
THE
APPLICATION
AND
STORED
AS
A
TEXTURE
CALLED
A
NORMAL
MAP
THE
FRAGMENT
SHADER
CAN
OBTAIN
THE
VALUES
USING
A
SAMPLER
BEFORE
WE
DEVELOP
THE
NECESSARY
SHADERS
CONSIDER
WHAT
IS
DIFFERENT
FOR
THE
GEN
ERAL
CASE
WHEN
THE
SURFACE
IS
NOT
DESCRIBED
BY
THE
PLANE
Z
IN
OUR
SIMPLE
CASE
THE
TANGENT
SPACE
AXES
ALIGNED
WITH
THE
OBJECT
OR
WORLD
AXES
IN
GENERAL
THE
NORMAL
FROM
A
SURFACE
WILL
NOT
POINT
IN
THE
Z
DIRECTION
NOR
ALONG
ANY
PARTICULAR
AXIS
IN
AD
DITION
THE
TANGENT
AND
BINORMAL
VECTORS
ALTHOUGH
ORTHOGONAL
TO
EACH
OTHER
AND
THE
NORMAL
WILL
HAVE
NO
PARTICULAR
ORIENTATION
WITH
RESPECT
TO
THE
WORLD
OR
OBJECT
AXES
THE
DISPLACEMENT
FUNCTION
IS
MEASURED
ALONG
THE
NORMAL
SO
ITS
PARTIAL
DERIVATIVES
ARE
IN
AN
ARBITRARY
PLANE
HOWEVER
IN
TANGENT
SPACE
THIS
DISPLACEMENT
IS
ALONG
THE
Z
COORDINATE
AXIS
HENCE
THE
IMPORTANCE
OF
THE
MATRIX
M
COMPOSED
OF
THE
NORMAL
TANGENT
AND
BINORMAL
VECTORS
IS
THAT
IT
ALLOWS
US
TO
GO
TO
THE
LOCAL
COORDINATE
SYSTEM
IN
WHICH
THE
BUMP
MAP
CALCULATIONS
MATCH
WHAT
WE
JUST
DID
THE
USUAL
IMPLEMEN
TATION
OF
BUMP
MAPPING
IS
TO
FIND
THIS
MATRIX
AND
TRANSFORM
OBJECT
SPACE
VECTORS
INTO
VECTORS
IN
A
TANGENT
SPACE
LOCAL
COORDINATE
SYSTEM
BECAUSE
TANGENT
SPACE
IS
LO
CAL
THE
CHANGE
IN
REPRESENTATION
CAN
BE
DIFFERENT
FOR
EVERY
FRAGMENT
WITH
POLYGONAL
MESHES
THE
CALCULATION
CAN
BE
SIMPLER
IF
WE
USE
THE
SAME
NORMAL
ACROSS
EACH
POLYGON
AND
THE
APPLICATION
CAN
SEND
THE
TANGENT
AND
BINORMAL
TO
THE
VERTEX
SHADER
ONCE
FOR
EACH
POLYGON
WE
ARE
ALMOST
READY
TO
WRITE
VERTEX
AND
FRAGMENT
SHADERS
FOR
BUMP
MAPPING
THE
ENTITIES
THAT
WE
NEED
FOR
LIGHTING
THE
SURFACE
NORMAL
THE
LIGHT
VECTOR
THE
HALF
ANGLE
VECTOR
THE
VERTEX
LOCATION
ARE
USUALLY
IN
EYE
OR
OBJECT
COORDINATES
AT
THE
POINT
IN
THE
PROCESS
WHEN
WE
DO
LIGHTING
WHETHER
WE
USE
A
NORMAL
MAP
OR
COMPUTE
THE
PERTURBATION
OF
THE
NORMAL
PROCEDURALLY
IN
A
FRAGMENT
SHADER
THE
DISPLACEMENTS
ARE
IN
TEXTURE
SPACE
COORDINATES
FOR
CORRECT
SHADING
WE
HAVE
TO
CONVERT
EITHER
THE
NORMAL
MAP
TO
OBJECT
SPACE
COORDINATES
OR
THE
OBJECT
SPACE
COORDINATES
TO
TEXTURE
SPACE
COORDINATES
IN
GENERAL
THE
LATTER
REQUIRES
LESS
WORK
BECAUSE
IT
CAN
BE
CARRIED
OUT
ON
A
PER
VERTEX
BASIS
IN
THE
VERTEX
SHADER
RATHER
THAN
ON
A
PER
FRAGMENT
BASIS
AS
WE
HAVE
SEEN
THE
MATRIX
NEEDED
TO
CONVERT
FROM
OBJECT
SPACE
TO
TEXTURE
SPACE
IS
PRECISELY
THE
MATRIX
COMPOSED
OF
THE
NORMAL
TANGENT
AND
BINORMAL
WE
CAN
SEND
THE
NORMAL
TO
THE
VERTEX
SHADER
AS
A
VERTEX
ATTRIBUTE
IF
IT
CHANGES
AT
EACH
VERTEX
OR
IF
WE
ARE
WORKING
WITH
A
SINGLE
FLAT
POLYGON
AT
A
TIME
WE
CAN
USE
A
UNIFORM
VARIABLE
THE
APPLICATION
CAN
ALSO
PROVIDE
TANGENT
VECTORS
IN
A
SIMILAR
MANNER
THE
BINORMAL
CAN
THEN
BE
COMPUTED
IN
THE
SHADER
USING
THE
CROSS
PRODUCT
FUNCTION
THESE
COMPUTATIONS
ARE
DONE
IN
THE
VERTEX
SHADER
WHICH
PRODUCES
A
LIGHT
VECTOR
AND
VIEW
VECTOR
IN
TANGENT
COORDINATES
FOR
USE
IN
THE
FRAGMENT
SHADER
BECAUSE
THE
NORMAL
VECTOR
IN
TANGENT
COORDINATES
ALWAYS
POINTS
IN
THE
POSITIVE
Z
DIRECTION
THE
VIEW
AND
LIGHT
VECTORS
ARE
SUFFICIENT
FOR
DOING
LIGHTING
IN
TANGENT
SPACE
BUMP
MAP
EXAMPLE
OUR
EXAMPLE
IS
A
SINGLE
SQUARE
IN
THE
PLANE
Y
WITH
A
LIGHT
SOURCE
ABOVE
THE
PLANE
THAT
ROTATES
IN
THE
PLANE
Y
WE
WILL
INCLUDE
ONLY
DIFFUSE
LIGHTING
TO
MINIMIZE
THE
AMOUNT
OF
CODE
WE
NEED
OUR
DISPLACEMENT
IS
A
SMALL
SQUARE
IN
THE
CENTER
OF
THE
ORIGINAL
SQUARE
BEFORE
DEVELOPING
THE
CODE
THE
OUTPUT
IS
SHOWN
IN
FIGURE
THE
IMAGE
ON
THE
LEFT
IS
WITH
THE
LIGHT
SOURCE
IN
ITS
ORIGINAL
POSITION
THE
IMAGE
ON
THE
LEFT
IS
WITH
THE
LIGHT
SOURCE
ROTATED
DEGREES
IN
THE
X
Z
PLANE
AT
THE
SAME
HEIGHT
ABOVE
THE
SURFACE
FIRST
LET
LOOK
AT
THE
APPLICATION
PROGRAM
WE
WILL
USE
TWO
TRIANGLES
FOR
THE
SQUARE
POLYGON
AND
EACH
OF
THE
SIX
VERTICES
WILL
HAVE
A
TEXTURE
SO
THAT
PART
OF
THE
CODE
WILL
BE
MUCH
AS
IN
PREVIOUS
EXAMPLES
FIGURE
BUMP
MAPPING
OF
A
SQUARE
DISPLACEMENT
POINTS
VOID
MESH
VERTICES
POINT4
POINTS
VERTICES
POINTS
VERTICES
POINTS
VERTICES
POINTS
VERTICES
POINTS
VERTICES
POINT2
POINTS
VERTICES
POINT2
WE
SEND
THESE
DATA
TO
THE
GPU
AS
VERTEX
ATTRIBUTES
THE
DISPLACEMENT
MAP
IS
GENERATED
AS
AN
ARRAY
IN
THE
APPLICATION
THE
DISPLACE
MENT
DATA
ARE
IN
THE
ARRAY
DATA
THE
NORMAL
MAP
IS
COMPUTING
BY
TAKING
THE
DIFFER
ENCES
TO
APPROXIMATE
THE
PARTIAL
DERIVATIVES
FOR
TWO
OF
THE
COMPONENTS
AND
USING
FOR
THE
THIRD
TO
FORM
THE
ARRAY
NORMALS
BECAUSE
THESE
VALUES
ARE
STORED
AS
COLORS
IN
A
TEXTURE
IMAGE
THE
COMPONENTS
ARE
SCALED
TO
THE
INTERVAL
CONST
INT
N
FLOAT
DATA
N
N
NORMALS
N
N
FOR
INT
I
I
N
I
FOR
INT
J
J
N
J
DATA
I
J
FOR
INT
I
N
I
N
I
FOR
INT
J
N
J
N
J
DATA
I
J
FOR
INT
I
I
N
I
FOR
INT
J
J
N
J
N
DATA
I
J
DATA
I
J
DATA
I
J
DATA
I
J
NORMALS
I
J
NORMALIZE
N
THE
ARRAY
NORMALS
IS
THEN
SENT
TO
THE
GPU
BY
BUILDING
A
TEXTURE
OBJECT
WE
SEND
A
PROJECTION
MATRIX
A
MODEL
VIEW
MATRIX
THE
LIGHT
POSITION
AND
THE
DIFFUSE
LIGHTING
PARAMETERS
TO
THE
SHADERS
AS
UNIFORM
VARIABLES
BECAUSE
THE
SURFACE
IS
FLAT
THE
NORMAL
IS
CONSTANT
AND
CAN
BE
SENT
TO
THE
SHADER
AS
A
UNIFORM
VARIABLE
LIKEWISE
THE
TANGENT
VECTOR
IS
CONSTANT
AND
CAN
BE
ANY
VECTOR
IN
THE
SAME
PLANE
AS
THE
POLYGON
AND
CAN
ALSO
BE
SENT
TO
THE
VERTEX
SHADER
AS
A
UNIFORM
VARIABLE
WE
NOW
TURN
TO
THE
VERTEX
SHADER
IN
THIS
SIMPLE
EXAMPLE
WE
WANT
TO
DO
THE
CALCULATIONS
IN
TEXTURE
SPACE
HENCE
WE
MUST
TRANSFORM
BOTH
THE
LIGHT
VECTOR
AND
EYE
VECTOR
TO
THIS
SPACE
THE
REQUIRED
TRANSFORMATION
MATRIX
IS
COMPOSED
OF
THE
NORMAL
TANGENT
AND
BINORMAL
VECTORS
THE
NORMAL
AND
TANGENT
ARE
SPECIFIED
IN
OBJECT
COORDINATES
AND
MUST
FIRST
BE
CONVERTED
TO
EYE
COORDINATES
THE
REQUIRED
TRANSFORMATION
MATRIX
IS
THE
NORMAL
MATRIX
WHICH
IS
THE
INVERSE
TRANSPOSE
OF
THE
UPPER
LEFT
SUBMATRIX
OF
THE
MODEL
VIEW
MATRIX
SEE
EXERCISE
WE
ASSUME
THIS
MATRIX
IS
COMPUTED
IN
THE
APPLICATION
AND
SENT
TO
THE
SHADER
AS
ANOTHER
UNIFORM
VARIABLE
WE
CAN
THEN
USE
THE
TRANSFORMED
NORMAL
AND
TANGENT
TO
GIVE
THE
BINORMAL
IN
EYE
COORDINATES
FINALLY
WE
USE
THESE
THREE
VECTORS
TO
TRANSFORM
THE
VIEW
VECTOR
AND
LIGHT
VECTOR
TO
TEXTURE
SPACE
HERE
IS
THE
VERTEX
SHADER
BUMP
MAP
VERTEX
SHADER
OUT
L
LIGHT
VECTOR
IN
TEXTURE
SPACE
COORDINATES
OUT
V
VIEW
VECTOR
IN
TEXTURE
SPACE
COORDINATES
OUT
ST
TEXTURE
COORDINATES
IN
TEXCOORD
IN
VPOSITION
UNIFORM
NORMAL
UNIFORM
LIGHTPOSITION
UNIFORM
MODELVIEW
UNIFORM
PROJECTION
UNIFORM
NORMALMATRIX
UNIFORM
OBJTANGENT
VOID
MAIN
PROJECTION
MODELVIEW
VPOSITION
ST
TEXCOORD
EYEPOSITION
MODELVIEW
VPOSITION
EYELIGHTPOS
LIGHTPOSITION
XYZ
NORMAL
TANGENT
AND
BINORMAL
IN
EYE
COORDINATES
N
NORMALIZE
NORMALMATRIX
NORMAL
T
NORMALIZE
NORMALMATRIX
OBJTANGENT
B
CROSS
N
T
LIGHT
VECTOR
IN
TEXTURE
SPACE
L
X
DOT
T
EYELIGHTPOS
EYEPOSITION
L
Y
DOT
B
EYELIGHTPOS
EYEPOSITION
L
Z
DOT
N
EYELIGHTPOS
EYEPOSITION
L
NORMALIZE
L
VIEW
VECTOR
IN
TEXTURE
SPACE
V
X
DOT
T
EYEPOSITION
V
Y
DOT
B
EYEPOSITION
V
Z
DOT
N
EYEPOSITION
V
NORMALIZE
V
OUR
STRATEGY
FOR
THE
FRAGMENT
SHADER
IS
TO
PROVIDE
THE
NORMALIZED
PERTURBED
NORMALS
AS
A
TEXTURE
MAP
FROM
THE
APPLICATION
AS
A
NORMAL
MAP
THE
FRAGMENT
SHADER
IS
GIVEN
BY
THE
FOLLOWING
CODE
IN
L
IN
V
IN
ST
UNIFORM
DIFFUSEPRODUCT
UNIFORM
TEXMAP
VOID
MAIN
N
TEXMAP
ST
NN
NORMALIZE
N
XYZ
LL
NORMALIZE
L
FLOAT
KD
MAX
DOT
NN
XYZ
LL
KD
DIFFUSEPRODUCT
THE
VALUES
IN
THE
TEXTURE
MAP
ARE
SCALED
BACK
TO
THE
INTERVAL
THE
DIFFUSE
PRODUCT
IS
A
VECTOR
COMPUTED
IN
THE
APPLICATION
EACH
OF
WHOSE
COMPONENTS
IS
THE
PRODUCT
OF
A
DIFFUSE
LIGHT
COMPONENT
AND
A
DIFFUSE
MATERIAL
COMPONENT
NOTE
THAT
THIS
EXAMPLE
DOES
NOT
USE
THE
TEXTURE
SPACE
VIEW
VECTORS
COMPUTED
IN
THE
VERTEX
SHADER
THESE
VECTORS
WOULD
BE
NECESSARY
IF
WE
WANTED
TO
ADD
A
SPECULAR
TERM
WE
HAVE
ONLY
TOUCHED
THE
SURFACE
SO
TO
SPEAK
OF
BUMP
MAPPING
MANY
OF
ITS
MOST
POWERFUL
APPLICATIONS
ARE
WHEN
IT
IS
COMBINED
WITH
PROCEDURAL
TEXTURE
GENERATION
WHICH
WE
EXPLORE
FURTHER
IN
CHAPTER
COMPOSITING
TECHNIQUES
THUS
FAR
WE
HAVE
ASSUMED
THAT
WE
WANT
TO
FORM
A
SINGLE
IMAGE
AND
THAT
THE
OB
JECTS
THAT
FORM
THIS
IMAGE
HAVE
SURFACES
THAT
ARE
OPAQUE
OPENGL
PROVIDES
A
MECHA
NISM
THROUGH
ALPHA
Α
BLENDING
THAT
CAN
AMONG
OTHER
EFFECTS
CREATE
IMAGES
WITH
TRANSLUCENT
OBJECTS
THE
ALPHA
CHANNEL
IS
THE
FOURTH
COLOR
IN
RGBA
OR
RGBΑ
COLOR
MODE
LIKE
THE
OTHER
COLORS
THE
APPLICATION
PROGRAM
CAN
CONTROL
THE
VALUE
OF
A
OR
Α
FOR
EACH
PIXEL
HOWEVER
IN
RGBA
MODE
IF
BLENDING
IS
ENABLED
THE
VALUE
OF
Α
CON
TROLS
HOW
THE
RGB
VALUES
ARE
WRITTEN
INTO
THE
FRAME
BUFFER
BECAUSE
FRAGMENTS
FROM
MULTIPLE
OBJECTS
CAN
CONTRIBUTE
TO
THE
COLOR
OF
THE
SAME
PIXEL
WE
SAY
THAT
THESE
OB
JECTS
ARE
BLENDED
OR
COMPOSITED
TOGETHER
WE
CAN
USE
A
SIMILAR
MECHANISM
TO
BLEND
TOGETHER
IMAGES
OPACITY
AND
BLENDING
THE
OPACITY
OF
A
SURFACE
IS
A
MEASURE
OF
HOW
MUCH
LIGHT
PENETRATES
THROUGH
THAT
SURFACE
AN
OPACITY
OF
Α
CORRESPONDS
TO
A
COMPLETELY
OPAQUE
SURFACE
THAT
BLOCKS
ALL
LIGHT
INCIDENT
ON
IT
A
SURFACE
WITH
AN
OPACITY
OF
IS
TRANSPARENT
ALL
LIGHT
PASSES
THROUGH
IT
THE
TRANSPARENCY
OR
TRANSLUCENCY
OF
A
SURFACE
WITH
OPACITY
Α
IS
GIVEN
Α
CONSIDER
THE
THREE
UNIFORMLY
LIT
POLYGONS
SHOWN
IN
FIGURE
ASSUME
THAT
THE
MIDDLE
POLYGON
IS
OPAQUE
AND
THE
FRONT
POLYGON
NEAREST
TO
THE
VIEWER
IS
TRANS
PARENT
IF
THE
FRONT
POLYGON
WERE
PERFECTLY
TRANSPARENT
THE
VIEWER
WOULD
SEE
ONLY
THE
MIDDLE
POLYGON
HOWEVER
IF
THE
FRONT
POLYGON
IS
ONLY
PARTIALLY
OPAQUE
PARTIALLY
TRANSPARENT
SIMILAR
TO
COLORED
GLASS
THE
COLOR
THAT
VIEWER
SEES
IS
A
BLENDING
OF
THE
COLORS
OF
THE
FRONT
AND
MIDDLE
POLYGON
BECAUSE
THE
MIDDLE
POLYGON
IS
OPAQUE
THE
FIGURE
TRANSLUCENT
AND
OPAQUE
POLYGONS
VIEWER
DOES
NOT
SEE
THE
BACK
POLYGON
IF
THE
FRONT
POLYGON
IS
RED
AND
THE
MIDDLE
IS
BLUE
SHE
SEES
MAGENTA
DUE
TO
THE
BLENDING
OF
THE
COLORS
IF
WE
LET
THE
MIDDLE
POLYGON
BE
ONLY
PARTIALLY
OPAQUE
SHE
SEES
THE
BLENDING
OF
THE
COLORS
OF
ALL
THREE
POLYGONS
IN
COMPUTER
GRAPHICS
WE
USUALLY
RENDER
POLYGONS
ONE
AT
A
TIME
INTO
THE
FRAME
BUFFER
CONSEQUENTLY
IF
WE
WANT
TO
USE
BLENDING
OR
COMPOSITING
WE
NEED
A
WAY
TO
APPLY
OPACITY
AS
PART
OF
FRAGMENT
PROCESSING
WE
CAN
USE
THE
NOTION
OF
SOURCE
AND
DESTINATION
PIXELS
JUST
AS
WE
USED
SOURCE
AND
DESTINATION
BITS
IN
SECTION
AS
A
POLYGON
IS
PROCESSED
PIXEL
SIZED
FRAGMENTS
ARE
COMPUTED
AND
IF
THEY
ARE
VISIBLE
ARE
ASSIGNED
COLORS
BASED
ON
THE
SHADING
MODEL
IN
USE
UNTIL
NOW
WE
HAVE
USED
THE
COLOR
OF
A
FRAGMENT
AS
COMPUTED
BY
THE
SHADING
MODEL
AND
BY
ANY
MAPPING
TECHNIQUES
TO
DETERMINE
THE
COLOR
OF
THE
PIXEL
IN
THE
FRAME
BUFFER
AT
THE
LOCATION
IN
SCREEN
COORDINATES
OF
THE
FRAGMENT
IF
WE
REGARD
THE
FRAGMENT
AS
THE
SOURCE
PIXEL
AND
THE
FRAME
BUFFER
PIXEL
AS
THE
DESTINATION
WE
CAN
COMBINE
THESE
VALUES
IN
VARIOUS
WAYS
USING
Α
VALUES
IS
ONE
WAY
OF
CONTROLLING
THE
BLENDING
ON
A
FRAGMENT
BY
FRAGMENT
BASIS
COMBINING
THE
COLORS
OF
POLYGONS
IS
SIMILAR
TO
JOINING
TWO
PIECES
OF
COLORED
GLASS
INTO
A
SINGLE
PIECE
OF
GLASS
THAT
HAS
A
HIGHER
OPACITY
AND
A
COLOR
DIFFERENT
FROM
EITHER
OF
THE
ORIGINAL
PIECES
IF
WE
REPRESENT
THE
SOURCE
AND
DESTINATION
PIXELS
WITH
THE
FOUR
ELEMENT
RGBΑ
ARRAYS
SR
SG
SB
SA
D
DR
DG
DB
DA
THEN
A
COMPOSITING
OPERATION
REPLACES
D
WITH
DT
BRSR
CRDR
BGSG
CGDG
BBSB
CBDB
BASA
CADA
THE
ARRAYS
OF
CONSTANTS
B
BR
BG
BB
BA
AND
C
CR
CG
CB
CA
ARE
THE
SOURCE
AND
DESTINATION
BLENDING
FACTORS
RESPECTIVELY
AS
OCCURS
WITH
RGB
COLORS
A
VALUE
OF
Α
OVER
IS
LIMITED
OR
CLAMPED
TO
THE
MAXIMUM
OF
AND
NEGATIVE
VALUES
ARE
CLAMPED
TO
WE
CAN
CHOOSE
BOTH
THE
VALUES
OF
Α
AND
THE
METHOD
OF
COMBINING
SOURCE
AND
DESTINATION
VALUES
TO
ACHIEVE
A
VARIETY
OF
EFFECTS
IMAGE
COMPOSITING
THE
MOST
STRAIGHTFORWARD
USE
OF
Α
BLENDING
IS
TO
COMBINE
AND
DISPLAY
SEVERAL
IMAGES
THAT
EXIST
AS
PIXEL
MAPS
OR
EQUIVALENTLY
AS
SETS
OF
DATA
THAT
HAVE
BEEN
RENDERED
INDE
PENDENTLY
IN
THIS
CASE
WE
CAN
REGARD
EACH
IMAGE
AS
A
RADIANT
OBJECT
THAT
CONTRIBUTES
EQUALLY
TO
THE
FINAL
IMAGE
USUALLY
WE
WISH
TO
KEEP
OUR
RGB
COLORS
BETWEEN
AND
IN
THE
FINAL
IMAGE
WITHOUT
HAVING
TO
CLAMP
THOSE
VALUES
GREATER
THAN
HENCE
WE
CAN
EITHER
SCALE
THE
VALUES
OF
EACH
IMAGE
OR
USE
THE
SOURCE
AND
DESTINATION
BLENDING
FACTORS
SUPPOSE
THAT
WE
HAVE
N
IMAGES
THAT
SHOULD
CONTRIBUTE
EQUALLY
TO
THE
FINAL
DISPLAY
AT
A
GIVEN
PIXEL
IMAGE
I
HAS
COMPONENTS
CIΑI
HERE
WE
ARE
USING
CI
TO
DENOTE
THE
COLOR
TRIPLET
RI
GI
BI
IF
WE
REPLACE
CI
BY
AND
ΑI
BY
THEN
WE
CAN
SIMPLY
ADD
N
N
EACH
IMAGE
INTO
THE
FRAME
BUFFER
ASSUMING
THE
FRAME
BUFFER
IS
INITIALIZED
TO
BLACK
WITH
AN
Α
ALTERNATELY
WE
CAN
USE
A
SOURCE
BLENDING
FACTOR
OF
BY
SETTING
THE
Α
VALUE
FOR
EACH
PIXEL
IN
EACH
IMAGE
TO
BE
AND
USING
FOR
THE
DESTINATION
BLENDING
FACTOR
AND
Α
FOR
THE
SOURCE
BLENDING
FACTOR
ALTHOUGH
THESE
TWO
METHODS
PRODUCE
THE
SAME
IMAGE
IF
THE
HARDWARE
SUPPORTS
COMPOSITING
THE
SECOND
MAY
BE
MORE
EFFICIENT
NOTE
THAT
IF
N
IS
LARGE
BLENDING
FACTORS
OF
THE
FORM
CAN
LEAD
TO
SIGNIFICANT
LOSS
OF
COLOR
RESOLUTION
RECENT
FRAME
BUFFERS
SUPPORT
FLOATING
POINT
ARITHMETIC
AND
THUS
CAN
AVOID
THIS
PROBLEM
BLENDING
AND
COMPOSITING
IN
OPENGL
THE
MECHANICS
OF
BLENDING
IN
OPENGL
ARE
STRAIGHTFORWARD
WE
ENABLE
BLENDING
BY
GLENABLE
THEN
WE
SET
UP
THE
DESIRED
SOURCE
AND
DESTINATION
FACTORS
BY
GLBLENDFUNC
OPENGL
HAS
A
NUMBER
OF
BLENDING
FACTORS
DEFINED
INCLUDING
THE
VALUES
AND
THE
SOURCE
Α
AND
Α
AND
AND
THE
DESTINATION
Α
AND
Α
AND
THE
APPLICATION
PROGRAM
SPECIFIES
THE
DESIRED
OP
TIONS
AND
THEN
USES
RGBA
COLOR
THE
MAJOR
DIFFICULTY
WITH
COMPOSITING
IS
THAT
FOR
MOST
CHOICES
OF
THE
BLENDING
FACTORS
THE
ORDER
IN
WHICH
WE
RENDER
THE
POLYGONS
AFFECTS
THE
FINAL
IMAGE
FOR
EXAMPLE
MANY
APPLICATIONS
USE
THE
SOURCE
Α
AS
THE
SOURCE
BLENDING
FACTOR
AND
Α
FOR
THE
DESTINATION
FACTOR
THE
RESULTING
COLOR
AND
OPACITY
ARE
RDT
GDT
BDT
ΑDT
ΑSRS
ΑS
RD
ΑSG
ΑS
GD
ΑSBS
ΑS
BD
ΑSΑD
ΑS
ΑD
THIS
FORMULA
ENSURES
THAT
NEITHER
COLORS
NOR
OPACITIES
CAN
SATURATE
HOWEVER
THE
RESULTING
COLOR
AND
Α
VALUES
DEPEND
ON
THE
ORDER
IN
WHICH
THE
POLYGONS
ARE
RENDERED
CONSEQUENTLY
UNLIKE
IN
MOST
OPENGL
PROGRAMS
WHERE
THE
USER
DOES
NOT
HAVE
TO
WORRY
ABOUT
THE
ORDER
IN
WHICH
POLYGONS
ARE
RASTERIZED
TO
GET
A
DESIRED
EFFECT
WE
MUST
NOW
CONTROL
THIS
ORDER
WITHIN
THE
APPLICATION
A
MORE
SUBTLE
BUT
VISIBLY
APPARENT
PROBLEM
OCCURS
WHEN
WE
COMBINE
OPAQUE
AND
TRANSLUCENT
OBJECTS
IN
A
SCENE
NORMALLY
WHEN
WE
USE
BLENDING
WE
DO
NOT
EN
ABLE
HIDDEN
SURFACE
REMOVAL
BECAUSE
POLYGONS
BEHIND
ANY
POLYGON
ALREADY
RENDERED
WOULD
NOT
BE
RASTERIZED
AND
THUS
WOULD
NOT
CONTRIBUTE
TO
THE
FINAL
IMAGE
IN
A
SCENE
WITH
BOTH
OPAQUE
AND
TRANSPARENT
POLYGONS
ANY
POLYGON
BEHIND
AN
OPAQUE
POLYGON
SHOULD
NOT
BE
RENDERED
BUT
TRANSLUCENT
POLYGONS
IN
FRONT
OF
OPAQUE
POLYGONS
SHOULD
BE
COMPOSITED
THERE
IS
A
SIMPLE
SOLUTION
TO
THIS
PROBLEM
THAT
DOES
NOT
REQUIRE
THE
APPLICATION
PROGRAM
TO
ORDER
THE
POLYGONS
WE
CAN
ENABLE
HIDDEN
SURFACE
REMOVAL
AS
USUAL
AND
CAN
MAKE
THE
Z
BUFFER
READ
ONLY
FOR
ANY
POLYGON
THAT
IS
TRANSLUCENT
WE
DO
SO
BY
CALLING
GLDEPTHMASK
WHEN
THE
DEPTH
BUFFER
IS
READ
ONLY
A
TRANSLUCENT
POLYGON
THAT
LIES
BEHIND
ANY
OPAQUE
POLYGON
ALREADY
RENDERED
IS
DISCARDED
A
TRANSLUCENT
POLYGON
THAT
LIES
IN
FRONT
OF
ANY
POLYGON
THAT
HAS
ALREADY
BEEN
RENDERED
IS
BLENDED
WITH
THE
COLOR
OF
THE
POLYGONS
IT
IS
IN
FRONT
OF
HOWEVER
BECAUSE
THE
Z
BUFFER
IS
READ
ONLY
FOR
THIS
POLYGON
THE
DEPTH
VALUES
IN
THE
BUFFER
ARE
UNCHANGED
OPAQUE
POLYGONS
SET
THE
DEPTH
MASK
TO
TRUE
AND
ARE
RENDERED
NORMALLY
NOTE
THAT
BECAUSE
THE
RESULT
OF
COMPOSITING
DEPENDS
ON
THE
ORDER
IN
WHICH
WE
COMPOSITE
INDIVIDUAL
ELEMENTS
WE
MAY
NOTICE
DEFECTS
IN
IMAGES
IN
WHICH
WE
RENDER
TRANSLUCENT
POLYGONS
IN
AN
ARBITRARY
ORDER
IF
WE
ARE
WILLING
TO
SORT
THE
TRANSLUCENT
POLYGONS
THEN
WE
CAN
RENDER
ALL
THE
OPAQUE
POLYGONS
FIRST
AND
THEN
RENDER
THE
TRANSLUCENT
POLYGONS
IN
A
BACK
TO
FRONT
ORDER
WITH
THE
Z
BUFFER
IN
A
READ
ONLY
MODE
ANTIALIASING
REVISITED
ONE
OF
THE
MAJOR
USES
OF
THE
Α
CHANNEL
IS
FOR
ANTIALIASING
BECAUSE
A
LINE
MUST
HAVE
A
FINITE
WIDTH
TO
BE
VISIBLE
THE
DEFAULT
WIDTH
OF
A
LINE
THAT
IS
RENDERED
SHOULD
BE
ONE
PIXEL
WIDE
WE
CANNOT
PRODUCE
A
THINNER
LINE
UNLESS
THE
LINE
IS
HORIZONTAL
OR
VERTICAL
SUCH
A
LINE
PARTIALLY
COVERS
A
NUMBER
OF
PIXELS
IN
THE
FRAME
BUFFER
AS
SHOWN
IN
FIGURE
SUPPOSE
THAT
AS
PART
OF
THE
GEOMETRIC
PROCESSING
STAGE
OF
THE
RENDERING
PROCESS
AS
WE
PROCESS
A
FRAGMENT
WE
SET
THE
Α
VALUE
FOR
THE
CORRESPONDING
PIXEL
TO
BE
A
NUMBER
BETWEEN
AND
THAT
IS
THE
AMOUNT
OF
THAT
PIXEL
COVERED
BY
THE
FRAGMENT
WE
CAN
THEN
USE
THIS
Α
VALUE
TO
MODULATE
THE
COLOR
AS
WE
RENDER
THE
FRAGMENT
TO
THE
FRAME
BUFFER
WE
CAN
USE
A
DESTINATION
BLENDING
FACTOR
OF
Α
AND
A
SOURCE
DESTINATION
FACTOR
OF
Α
HOWEVER
IF
THERE
IS
OVERLAP
OF
FRAGMENTS
WITHIN
A
PIXEL
THEN
THERE
ARE
NUMEROUS
POSSIBILITIES
AS
WE
CAN
SEE
FROM
FIGURE
IN
FIGURE
A
THE
FRAGMENTS
DO
NOT
OVERLAP
IN
FIGURE
B
THEY
DO
OVERLAP
CONSIDER
THE
PROBLEM
FROM
THE
PERSPECTIVE
OF
A
RENDERER
THAT
WORKS
ONE
POLYGON
A
TIME
FOR
OUR
SIMPLE
EXAMPLE
SUPPOSE
THAT
WE
START
WITH
AN
OPAQUE
BACKGROUND
AND
THAT
THE
FRAME
BUFFER
STARTS
WITH
THE
BACKGROUND
COLOR
WE
CAN
SET
BECAUSE
NO
PART
OF
THE
PIXEL
FIGURE
RASTER
LINE
A
B
FIGURE
FRAGMENTS
A
NONOVERLAPPING
B
OVERLAPPING
HAS
YET
BEEN
COVERED
WITH
FRAGMENTS
FROM
POLYGONS
THE
FIRST
POLYGON
IS
RENDERED
THE
COLOR
OF
THE
DESTINATION
PIXEL
IS
SET
TO
CD
AND
ITS
Α
VALUE
IS
SET
TO
ΑD
THUS
A
FRAGMENT
THAT
COVERS
THE
ENTIRE
PIXEL
WILL
HAVE
ITS
COLOR
ASSIGNED
TO
THE
DESTINATION
PIXEL
AND
THE
DESTINATION
PIXEL
WILL
BE
OPAQUE
IF
THE
BACKGROUND
IS
BLACK
THE
DESTINATION
COLOR
WILL
BE
NOW
CONSIDER
THE
FRAGMENT
FROM
THE
SECOND
POLYGON
THAT
SUBTENDS
THE
SAME
PIXEL
HOW
WE
ADD
IN
ITS
COLOR
AND
Α
VALUE
DEPENDS
ON
HOW
WE
WISH
TO
INTERPRET
THE
OVERLAP
IF
THERE
IS
NO
OVERLAP
WE
CAN
ASSIGN
THE
NEW
COLOR
BY
BLENDING
THE
COLOR
OF
THE
DESTINATION
WITH
THE
COLOR
OF
THE
FRAGMENT
RESULTING
IN
THE
COLOR
AND
Α
CD
ΑD
THIS
COLOR
IS
A
BLENDING
OF
THE
TWO
COLORS
AND
DOES
NOT
NEED
TO
BE
CLAMPED
THE
RESULTING
VALUE
OF
Α
REPRESENTS
THE
NEW
FRACTION
OF
THE
PIXEL
THAT
IS
COVERED
HOWEVER
THE
RESULTING
COLOR
IS
AFFECTED
BY
THE
ORDER
IN
WHICH
THE
POLYGONS
ARE
RENDERED
THE
MORE
DIFFICULT
QUESTIONS
ARE
WHAT
TO
DO
IF
THE
FRAGMENTS
OVERLAP
AND
HOW
TO
TELL
WHETHER
THERE
IS
AN
OVERLAP
ONE
TACTIC
IS
TO
TAKE
A
PROBABILISTIC
VIEW
IF
FRAGMENT
OCCUPIES
A
FRACTION
OF
THE
PIXEL
FRAGMENT
OCCUPIES
A
FRACTION
OF
THE
SAME
PIXEL
AND
WE
HAVE
NO
OTHER
INFORMATION
ABOUT
THE
LOCATION
OF
THE
FRAGMENTS
WITHIN
THE
PIXEL
THEN
THE
AVERAGE
AREA
OF
OVERLAP
IS
WE
CAN
REPRESENT
THE
AVERAGE
CASE
AS
SHOWN
IN
FIGURE
HENCE
THE
NEW
DESTINATION
Α
SHOULD
BE
ΑD
E
Z
DISTANCE
FIGURE
AVERAGE
OVERLAP
HOW
WE
SHOULD
ASSIGN
THE
COLOR
IS
A
MORE
COMPLEX
PROBLEM
BECAUSE
WE
HAVE
TO
DECIDE
WHETHER
THE
SECOND
FRAGMENT
IS
IN
FRONT
OF
THE
FIRST
OR
THE
FIRST
IS
IN
FRONT
OF
THE
SECOND
OR
EVEN
WHETHER
THE
TWO
SHOULD
BE
BLENDED
WE
CAN
DEFINE
AN
APPRO
PRIATE
BLENDING
FOR
WHICHEVER
ASSUMPTION
WE
WISH
TO
MAKE
NOTE
THAT
IN
A
PIPELINE
RENDERER
POLYGONS
CAN
BE
GENERATED
IN
AN
ORDER
THAT
HAS
NOTHING
TO
DO
WITH
THEIR
DISTANCES
FROM
THE
VIEWER
HOWEVER
IF
WE
COUPLE
Α
BLENDING
WITH
HIDDEN
SURFACE
RE
MOVAL
WE
CAN
USE
THE
DEPTH
INFORMATION
TO
MAKE
FRONT
VERSUS
BACK
DECISIONS
IN
OPENGL
WE
CAN
INVOKE
ANTIALIASING
WITHOUT
HAVING
THE
USER
PROGRAM
COM
BINE
Α
VALUES
EXPLICITLY
IF
WE
ENABLE
BLENDING
AND
SMOOTHING
FOR
LINES
OR
POLYGONS
FOR
EXAMPLE
WE
CAN
USE
GLENABLE
GLENABLE
GLENABLE
GLBLENDFUNC
TO
ENABLE
ANTIALIASING
THERE
MAY
BE
A
CONSIDERABLE
PERFORMANCE
PENALTY
ASSOCIATED
WITH
ANTIALIASING
COLOR
PLATE
SHOWS
OPENGL
ANTIALIASING
OF
POLYGONS
BACK
TO
FRONT
AND
FRONT
TO
BACK
RENDERING
ALTHOUGH
USING
THE
Α
CHANNEL
GIVES
US
A
WAY
OF
CREATING
THE
APPEARANCE
OF
TRANSLU
CENCY
IT
IS
DIFFICULT
TO
HANDLE
TRANSPARENCY
IN
A
PHYSICALLY
CORRECT
MANNER
WITHOUT
TAKING
INTO
ACCOUNT
HOW
AN
OBJECT
IS
LIT
AND
WHAT
HAPPENS
TO
RAYS
AND
PROJECTORS
THAT
PASS
THROUGH
TRANSLUCENT
OBJECTS
IN
FIGURE
WE
CAN
SEE
SEVERAL
OF
THE
DIFFICUL
TIES
WE
IGNORE
REFRACTION
OF
LIGHT
THROUGH
TRANSLUCENT
SURFACES
AN
EFFECT
THAN
CANNOT
BE
HANDLED
EASILY
WITH
A
PIPELINE
POLYGON
RENDERER
SUPPOSE
THAT
THE
REAR
POLYGON
IS
OPAQUE
BUT
REFLECTIVE
AND
THAT
THE
TWO
POLYGONS
CLOSER
TO
THE
VIEWER
ARE
TRANSLUCENT
BY
FOLLOWING
VARIOUS
RAYS
FROM
THE
LIGHT
SOURCE
WE
CAN
SEE
A
NUMBER
OF
POSSIBILI
TIES
SOME
RAYS
STRIKE
THE
REAR
POLYGON
AND
THE
CORRESPONDING
PIXELS
CAN
BE
COLORED
WITH
THE
SHADE
AT
THE
INTERSECTION
OF
THE
PROJECTOR
AND
THE
POLYGON
FOR
THESE
RAYS
WE
FIGURE
SCENE
WITH
TRANSLUCENT
OBJECTS
SHOULD
ALSO
DISTINGUISH
BETWEEN
POINTS
ILLUMINATED
DIRECTLY
BY
THE
LIGHT
SOURCE
AND
POINTS
FOR
WHICH
THE
INCIDENT
LIGHT
PASSES
THROUGH
ONE
OR
BOTH
TRANSLUCENT
POLYGONS
FOR
RAYS
THAT
PASS
THROUGH
ONLY
ONE
TRANSLUCENT
SURFACE
WE
HAVE
TO
ADJUST
THE
COLOR
BASED
ON
THE
COLOR
AND
OPACITY
OF
THE
POLYGON
WE
SHOULD
ALSO
ADD
A
TERM
THAT
AC
COUNTS
FOR
THE
LIGHT
STRIKING
THE
FRONT
POLYGON
THAT
IS
REFLECTED
TOWARD
THE
VIEWER
FOR
RAYS
PASSING
THROUGH
BOTH
TRANSLUCENT
POLYGONS
WE
HAVE
TO
CONSIDER
THEIR
COMBINED
EFFECT
FOR
A
PIPELINE
RENDERER
THE
TASK
IS
EVEN
MORE
DIFFICULT
IF
NOT
IMPOSSIBLE
BECAUSE
WE
HAVE
TO
DETERMINE
THE
CONTRIBUTION
THAT
EACH
POLYGON
MAKES
AS
IT
IS
PASSED
THROUGH
THE
PIPELINE
RATHER
THAN
CONSIDERING
THE
CONTRIBUTIONS
OF
ALL
POLYGONS
TO
A
GIVEN
PIXEL
AT
THE
SAME
TIME
IN
APPLICATIONS
WHERE
HANDLING
OF
TRANSLUCENCY
MUST
BE
DONE
IN
A
CONSISTENT
AND
REALISTIC
MANNER
WE
OFTEN
MUST
SORT
THE
POLYGONS
FROM
FRONT
TO
BACK
WITHIN
THE
APPLICATION
THEN
DEPENDING
ON
THE
APPLICATION
WE
CAN
DO
A
FRONT
TO
BACK
OR
BACK
TO
FRONT
RENDERING
USING
OPENGL
BLENDING
FUNCTIONALITY
SEE
EXERCISE
SCENE
ANTIALIASING
AND
MULTISAMPLING
RATHER
THAN
ANTIALIASING
INDIVIDUAL
LINES
AND
POLYGONS
AS
WE
DISCUSSED
IN
SEC
TION
WE
CAN
ANTIALIAS
THE
ENTIRE
SCENE
USING
A
TECHNIQUE
CALLED
MULTISAMPLING
IN
THIS
MODE
EVERY
PIXEL
IN
THE
FRAME
BUFFER
CONTAINS
A
NUMBER
OF
SAMPLES
EACH
SAMPLE
IS
CAPABLE
OF
STORING
A
COLOR
DEPTH
AND
OTHER
VALUES
WHEN
A
SCENE
IS
REN
DERED
IT
IS
AS
IF
THE
SCENE
IS
RENDERED
AT
AN
ENHANCED
RESOLUTION
HOWEVER
WHEN
THE
IMAGE
MUST
BE
DISPLAYED
IN
THE
FRAME
BUFFER
ALL
OF
THE
SAMPLES
FOR
EACH
PIXEL
ARE
COMBINED
TO
PRODUCE
THE
FINAL
PIXEL
COLOR
IN
OPENGL
THE
NUMBER
OF
SAMPLES
PER
PIXEL
IS
A
FUNCTION
OF
HOW
THE
FRAME
BUFFER
IS
CREATED
WHEN
THE
APPLICATION
INITIALIZES
IN
OUR
PROGRAMS
SINCE
WE
USE
GLUT
YOU
WOULD
ADD
THE
ADDITIONAL
OPTION
TO
THE
GLUTINITDIS
PLAYMODE
THIS
WILL
REQUEST
THAT
THE
PIXELS
IN
THE
FRAME
BUFFER
HAVE
MULTIPLE
SAMPLES
JUST
AS
LINE
AND
POLYGON
ANTIALIASING
CAN
BE
ENABLED
AND
DISABLED
DURING
THE
REN
DERING
OF
A
FRAME
SO
TOO
WITH
MULTISAMPLING
TO
TURN
ON
MULTISAMPLING
AND
BEGIN
ANTIALIASING
ALL
OF
THE
PRIMITIVES
RENDERED
IN
THE
FRAME
SIMPLY
CALL
GLENABLE
MULTISAMPLE
LIKEWISE
CALLING
GLDISABLE
WILL
STOP
THE
MULTISAMPLED
RENDERING
GENERALLY
SPEAKING
AN
APPLICATION
WILL
ALMOST
ALWAYS
EITHER
MULTISAMPLE
ALL
THE
TIME
OR
NEVER
AIJ
FIGURE
FILTERING
AND
CONVOLUTION
IMAGE
PROCESSING
WE
CAN
USE
PIXEL
MAPPING
TO
PERFORM
VARIOUS
IMAGE
PROCESSING
OPERATIONS
SUPPOSE
THAT
WE
START
WITH
A
DISCRETE
IMAGE
PERHAPS
THIS
IMAGE
WAS
GENERATED
BY
A
RENDERING
OR
PERHAPS
WE
OBTAINED
IT
BY
DIGITIZING
A
CONTINUOUS
IMAGE
USING
A
SCANNER
WE
CAN
REPRESENT
THE
IMAGE
WITH
AN
N
M
MATRIX
A
AIJ
OF
SCALAR
LEVELS
IF
WE
PROCESS
EACH
COLOR
COMPONENT
OF
A
COLOR
IMAGE
INDEPENDENTLY
WE
CAN
REGARD
THE
ENTRIES
IN
A
AS
EITHER
INDIVIDUAL
COLOR
COMPONENTS
OR
GRAY
LUMI
NANCE
LEVELS
A
LINEAR
FILTER
PRODUCES
A
FILTERED
MATRIX
B
WHOSE
ELEMENTS
ARE
BIJ
HKL
AI
K
J
L
K
M
L
N
WE
SAY
THAT
B
IS
THE
RESULT
OF
CONVOLVING
A
WITH
A
FILTER
MATRIX
H
IN
GENERAL
THE
VALUES
OF
M
AND
N
ARE
SMALL
AND
WE
CAN
REPRESENT
H
BY
A
SMALL
CONVOLUTION
MATRIX
WE
CAN
VIEW
THE
FILTERING
OPERATION
AS
SHOWN
IN
FIGURE
FOR
M
N
FOR
EACH
PIXEL
IN
A
WE
PLACE
THE
CONVOLUTION
MATRIX
OVER
AIJ
AND
TAKE
A
WEIGHTED
AVERAGE
OF
THE
SURROUNDING
POINTS
THE
VALUES
IN
THE
MATRIX
ARE
THE
WEIGHTS
FOR
EXAMPLE
FOR
N
M
WE
CAN
AVERAGE
EACH
PIXEL
WITH
ITS
FOUR
SURROUNDING
NEIGHBORS
USING
THE
MATRIX
THIS
FILTER
CAN
BE
USED
FOR
ANTIALIASING
WE
CAN
USE
MORE
POINTS
AND
CAN
WEIGHT
THE
CENTER
MORE
HEAVILY
WITH
H
NOTE
THAT
WE
MUST
DEFINE
A
BORDER
AROUND
A
IF
WE
WANT
B
TO
HAVE
THE
SAME
DIMEN
SIONS
OTHER
OPERATIONS
ARE
POSSIBLE
WITH
SMALL
MATRICES
FOR
EXAMPLE
WE
CAN
USE
THE
MATRIX
H
TO
DETECT
CHANGES
IN
VALUE
OR
EDGES
IN
THE
IMAGE
IF
THE
MATRIX
H
IS
K
K
WE
CAN
IMPLEMENT
A
FILTER
BY
ACCUMULATING
IMAGES
IN
THE
FRAME
BUFFER
EACH
TIME
ADDING
IN
A
SHIFTED
VERSION
OF
A
OTHER
MULTIPASS
METHODS
WE
CAN
ALSO
USE
BLENDING
FOR
FILTERING
IN
TIME
AND
DEPTH
FOR
EXAMPLE
IF
WE
JITTER
AN
OBJECT
AND
RENDER
IT
MULTIPLE
TIMES
LEAVING
THE
POSITIONS
OF
THE
OTHER
OBJECTS
UNCHANGED
WE
GET
DIMMER
COPIES
OF
THE
JITTERED
OBJECT
IN
THE
FINAL
IMAGE
IF
THE
OBJECT
IS
MOVED
ALONG
A
PATH
RATHER
THAN
RANDOMLY
JITTERED
WE
SEE
THE
TRAIL
OF
THE
OBJECT
THIS
MOTION
BLUR
EFFECT
IS
SIMILAR
TO
THE
RESULT
OF
TAKING
A
PHOTOGRAPH
OF
A
MOVING
OBJECT
USING
A
LONG
EXPOSURE
TIME
WE
CAN
ADJUST
THE
OBJECT
Α
VALUE
SO
AS
TO
RENDER
THE
FINAL
POSITION
OF
THE
OBJECT
WITH
GREATER
OPACITY
OR
TO
CREATE
THE
IMPRESSION
OF
SPEED
DIFFERENCES
WE
CAN
USE
FILTERING
IN
DEPTH
TO
CREATE
FOCUSING
EFFECTS
A
REAL
CAMERA
CANNOT
PRODUCE
AN
IMAGE
WITH
ALL
OBJECTS
IN
FOCUS
OBJECTS
WITHIN
A
CERTAIN
DISTANCE
FROM
THE
CAMERA
THE
CAMERA
DEPTH
OF
FIELD
ARE
IN
FOCUS
OBJECTS
OUTSIDE
IT
ARE
OUT
OF
FO
CUS
AND
APPEAR
BLURRED
COMPUTER
GRAPHICS
PRODUCES
IMAGES
WITH
AN
INFINITE
DEPTH
OF
FIELD
BECAUSE
WE
DO
NOT
HAVE
TO
WORRY
ABOUT
THE
LIMITATIONS
OF
REAL
LENSES
OCCA
SIONALLY
HOWEVER
WE
WANT
TO
CREATE
AN
IMAGE
THAT
LOOKS
AS
THOUGH
IT
WERE
PRODUCED
BY
A
REAL
CAMERA
OR
TO
DEFOCUS
PART
OF
A
SCENE
SO
AS
TO
EMPHASIZE
THE
OBJECTS
WITHIN
A
DESIRED
DEPTH
OF
FIELD
THIS
TIME
THE
TRICK
IS
TO
MOVE
THE
VIEWER
IN
A
MANNER
THAT
LEAVES
A
PARTICULAR
PLANE
FIXED
AS
SHOWN
IN
FIGURE
SUPPOSE
THAT
WE
WISH
TO
KEEP
THE
PLANE
AT
Z
ZF
IN
FOCUS
AND
TO
LEAVE
THE
NEAR
Z
ZMIN
AND
FAR
Z
ZMAX
CLIP
PING
DISTANCES
UNCHANGED
IF
WE
USE
FRUSTUM
WE
SPECIFY
THE
NEAR
CLIPPING
RECTANGLE
XMIN
XMAX
YMIN
YMAX
IF
WE
MOVE
THE
VIEWER
FROM
THE
ORIGIN
IN
THE
X
DIRECTION
BY
XMIN
YMIN
ZMIN
Z
ZMAX
ZF
I
X
FIGURE
DEPTH
OF
FIELD
JITTER
WE
MUST
CHANGE
XMIN
TO
XMT
IN
XMIN
Z
ZF
ZNEAR
SIMILAR
EQUATIONS
HOLD
FOR
XMAX
YMIN
AND
YMAX
AS
WE
INCREASE
AND
WE
CREATE
A
NARROWER
DEPTH
OF
FIELD
SAMPLING
AND
ALIASING
WE
HAVE
SEEN
A
VARIETY
OF
APPLICATIONS
IN
WHICH
THE
CONVERSION
FROM
A
CONTINUOUS
REPRESENTATION
OF
AN
ENTITY
TO
A
DISCRETE
APPROXIMATION
OF
THAT
ENTITY
LEADS
TO
VISIBLE
ERRORS
IN
THE
DISPLAY
WE
HAVE
USED
THE
TERM
ALIASING
TO
CHARACTERIZE
THESE
ERRORS
WHEN
WE
WORK
WITH
BUFFERS
WE
ARE
ALWAYS
WORKING
WITH
DIGITAL
IMAGES
AND
IF
WE
ARE
NOT
CAREFUL
THESE
ERRORS
CAN
BE
EXTREME
IN
THIS
SECTION
WE
EXAMINE
THE
NATURE
OF
DIGITAL
IMAGES
AND
GATHER
FACTS
THAT
WILL
HELP
US
TO
UNDERSTAND
WHERE
ALIASING
ERRORS
ARISE
AND
HOW
THE
EFFECTS
OF
THESE
ERRORS
CAN
BE
MITIGATED
WE
START
WITH
A
CONTINUOUS
TWO
DIMENSIONAL
IMAGE
F
X
Y
WE
CAN
REGARD
THE
VALUE
OF
F
AS
EITHER
A
GRAY
LEVEL
IN
A
MONOCHROMATIC
IMAGE
OR
THE
VALUE
OF
ONE
OF
THE
PRIMARIES
IN
A
COLOR
IMAGE
IN
THE
COMPUTER
WE
WORK
WITH
A
DIGITAL
IMAGE
THAT
IS
AN
ARRAY
OF
NM
PIXELS
ARRANGED
AS
N
ROWS
OF
M
PIXELS
EACH
PIXEL
HAS
K
BITS
THERE
ARE
TWO
PROCESSES
INVOLVED
IN
GOING
FROM
A
CONTINUOUS
IMAGE
TO
A
DISCRETE
IMAGE
FIRST
WE
MUST
SAMPLE
THE
CONTINUOUS
IMAGE
AT
NM
POINTS
ON
SOME
GRID
TO
OBTAIN
A
SET
OF
VALUES
FIJ
EACH
OF
THESE
SAMPLES
OF
THE
CONTINUOUS
IMAGE
IS
THE
VALUE
OF
F
MEASURED
OVER
A
SMALL
AREA
IN
THE
CONTINUOUS
IMAGE
THEN
WE
MUST
CONVERT
EACH
OF
THESE
SAMPLES
INTO
A
K
BIT
PIXEL
BY
A
PROCESS
KNOWN
AS
QUANTIZATION
SAMPLING
THEORY
SUPPOSE
THAT
WE
HAVE
A
RECTANGULAR
GRID
OF
LOCATIONS
WHERE
WE
WISH
TO
OBTAIN
OUR
SAMPLES
OF
F
AS
IN
FIGURE
IF
WE
ASSUME
THAT
THE
GRID
IS
EQUALLY
SPACED
THEN
AN
IDEAL
SAMPLER
WOULD
PRODUCE
A
VALUE
FIJ
F
IHX
JHY
Y
HY
F
HX
X
FIGURE
SAMPLING
GRID
A
B
FIGURE
ONE
DIMENSIONAL
DECOMPOSITION
A
FUNCTION
B
COMPONENTS
WHERE
HX
AND
HY
ARE
THE
DISTANCES
BETWEEN
THE
GRID
POINTS
IN
THE
X
AND
Y
DIRECTIONS
RESPECTIVELY
LEAVING
ASIDE
FOR
NOW
THE
FACT
THAT
NO
REAL
SAMPLER
CAN
MAKE
SUCH
A
PRECISE
MEASUREMENT
THERE
ARE
TWO
IMPORTANT
QUESTIONS
FIRST
WHAT
ERRORS
HAVE
WE
MADE
IN
THIS
IDEALIZED
SAMPLING
PROCESS
THAT
IS
HOW
MUCH
OF
THE
INFORMATION
IN
THE
ORIGINAL
IMAGE
IS
INCLUDED
IN
THE
SAMPLED
IMAGE
SECOND
CAN
WE
GO
BACK
FROM
THE
DIGITAL
IMAGE
TO
A
CONTINUOUS
IMAGE
WITHOUT
INCURRING
ADDITIONAL
ERRORS
THIS
LATTER
STEP
IS
CALLED
RECONSTRUCTION
AND
DESCRIBES
DISPLAY
PROCESSES
SUCH
AS
ARE
REQUIRED
IN
DISPLAYING
THE
CONTENTS
OF
A
FRAME
BUFFER
ON
A
MONITOR
THE
MATHEMATICAL
ANALYSIS
OF
THESE
ISSUES
USES
FOURIER
ANALYSIS
A
BRANCH
OF
AP
PLIED
MATHEMATICS
PARTICULARLY
WELL
SUITED
FOR
EXPLAINING
PROBLEMS
OF
DIGITAL
SIGNAL
PROCESSING
THE
ESSENCE
OF
FOURIER
THEORY
IS
THAT
A
FUNCTION
OF
EITHER
SPACE
OR
TIME
CAN
BE
DECOMPOSED
INTO
A
SET
OF
SINUSOIDS
AT
POSSIBLY
AN
INFINITE
NUMBER
OF
FRE
QUENCIES
THIS
CONCEPT
IS
MOST
FAMILIAR
WITH
SOUND
WHERE
WE
ROUTINELY
THINK
OF
A
PARTICULAR
SOUND
IN
TERMS
OF
ITS
FREQUENCY
COMPONENTS
OR
SPECTRUM
FOR
A
TWO
DIMENSIONAL
IMAGE
WE
CAN
THINK
OF
IT
AS
BEING
COMPOSED
OF
SINUSOIDAL
PATTERNS
IN
TWO
SPATIAL
FREQUENCIES
THAT
WHEN
ADDED
TOGETHER
PRODUCE
THE
IMAGE
FIGURE
A
SHOWS
A
ONE
DIMENSIONAL
FUNCTION
FIGURE
B
SHOWS
THE
TWO
SINUSOIDS
THAT
FORM
IT
FIG
URE
SHOWS
TWO
DIMENSIONAL
PERIODIC
FUNCTIONS
THUS
EVERY
TWO
DIMENSIONAL
SPATIAL
FUNCTION
F
X
Y
HAS
TWO
EQUIVALENT
REPRESENTATIONS
ONE
IS
ITS
SPATIAL
FORM
F
X
Y
THE
OTHER
IS
A
REPRESENTATION
IN
TERMS
OF
ITS
SPECTRUM
THE
FREQUENCY
DOMAIN
REPRESENTATION
G
Ξ
Η
THE
VALUE
OF
G
IS
THE
CONTRIBUTION
TO
F
AT
THE
TWO
DIMENSIONAL
SPATIAL
FREQUENCY
Ξ
Η
BY
USING
THESE
ALTERNATE
REPRESENTATIONS
OF
FUNCTIONS
WE
FIND
THAT
MANY
PHENOMENA
INCLUDING
SAMPLING
CAN
BE
EXPLAINED
MUCH
MORE
EASILY
IN
THE
FREQUENCY
DOMAIN
WE
CAN
EXPLAIN
THE
CONSEQUENCES
OF
SAMPLING
WITHOUT
BEING
OVERWHELMED
BY
THE
MATHEMATICS
IF
WE
ACCEPT
WITHOUT
PROOF
THE
FUNDAMENTAL
THEOREM
KNOWN
AS
THE
NYQUIST
SAMPLING
THEOREM
THERE
ARE
TWO
PARTS
TO
THE
THEOREM
THE
FIRST
ALLOWS
US
TO
DISCUSS
SAMPLING
ERRORS
WHEREAS
THE
SECOND
GOVERNS
RECONSTRUCTION
WE
EXAMINE
THE
SECOND
IN
SECTION
A
FIGURE
TWO
DIMENSIONAL
PERIODIC
FUNCTIONS
B
NYQUIST
SAMPLING
THEOREM
PART
THE
IDEAL
SAMPLES
OF
A
CONTINUOUS
FUNCTION
CONTAIN
ALL
THE
INFORMATION
IN
THE
ORIGINAL
FUNCTION
IF
AND
ONLY
IF
THE
CONTINUOUS
FUNCTION
IS
SAMPLED
AT
A
FREQUENCY
GREATER
THAN
TWICE
THE
HIGHEST
FREQUENCY
IN
THE
FUNCTION
THUS
IF
WE
ARE
TO
HAVE
ANY
CHANCE
OF
NOT
LOSING
INFORMATION
WE
MUST
RESTRICT
OURSELVES
TO
FUNCTIONS
THAT
ARE
ZERO
IN
THE
FREQUENCY
DOMAIN
EXCEPT
IN
A
WINDOW
OF
WIDTH
LESS
THAN
THE
SAMPLING
FREQUENCY
CENTERED
AT
THE
ORIGIN
THE
LOWEST
FRE
QUENCY
THAT
CANNOT
BE
IN
THE
DATA
SO
AS
TO
AVOID
ALIASING
ONE
HALF
OF
THE
SAMPLING
FREQUENCY
IS
CALLED
THE
NYQUIST
FREQUENCY
FUNCTIONS
WHOSE
SPECTRA
ARE
ZERO
OUT
SIDE
OF
SOME
WINDOW
ARE
KNOWN
AS
BAND
LIMITED
FUNCTIONS
FOR
A
TWO
DIMENSIONAL
IMAGE
THE
SAMPLING
FREQUENCIES
ARE
DETERMINED
BY
THE
SPACING
OF
A
TWO
DIMENSIONAL
GRID
WITH
X
AND
Y
SPACING
OF
HX
AND
HY
RESPECTIVELY
THE
THEOREM
ASSUMES
AN
IDEAL
SAMPLING
PROCESS
THAT
GATHERS
AN
INFINITE
NUMBER
OF
SAMPLES
EACH
OF
WHICH
IS
THE
EXACT
VALUE
AT
THE
GRID
POINT
IN
PRACTICE
WE
CAN
TAKE
ONLY
A
FINITE
NUMBER
OF
SAMPLES
THE
NUMBER
MATCHING
THE
RESOLUTION
OF
OUR
BUFFER
CONSEQUENTLY
WE
CAN
NOT
PRODUCE
A
TRULY
BAND
LIMITED
FUNCTION
ALTHOUGH
THIS
RESULT
IS
A
MATHEMATICAL
CONSEQUENCE
OF
FOURIER
THEORY
WE
CAN
OBSERVE
THAT
THERE
WILL
ALWAYS
BE
SOME
AM
BIGUITY
INHERENT
IN
A
FINITE
COLLECTION
OF
SAMPLED
POINTS
SIMPLY
BECAUSE
WE
DO
NOT
KNOW
THE
FUNCTION
OUTSIDE
THE
REGION
FROM
WHICH
WE
OBTAINED
THE
SAMPLES
THE
CONSEQUENCES
OF
VIOLATING
THE
NYQUIST
CRITERIA
ARE
ALIASING
ERRORS
WE
CAN
SEE
FROM
WHERE
THE
NAME
ALIASING
COMES
BY
CONSIDERING
AN
IDEAL
SAMPLING
PROCESS
BOTH
THE
ORIGINAL
FUNCTION
AND
ITS
SET
OF
SAMPLES
HAVE
FREQUENCY
DOMAIN
REPRESENTA
TIONS
THE
SPECTRAL
COMPONENTS
OF
THE
SAMPLED
FUNCTION
ARE
REPLICAS
OF
THE
SPECTRUM
OF
THE
ORIGINAL
FUNCTION
WITH
THEIR
CENTERS
SEPARATED
BY
THE
SAMPLING
FREQUENCY
CON
SIDER
THE
ONE
DIMENSIONAL
FUNCTION
IN
FIGURE
A
WITH
THE
SAMPLES
INDICATED
FIGURE
B
SHOWS
ITS
SPECTRUM
IN
FIGURE
C
WE
HAVE
THE
SPECTRUM
OF
THE
SAMPLED
FUNCTION
SHOWING
THE
REPLICATIONS
OF
THE
SPECTRUM
IN
FIGURE
B
BE
CAUSE
WE
HAVE
SAMPLED
AT
A
RATE
HIGHER
THAN
THE
NYQUIST
FREQUENCY
THERE
IS
A
SEPARA
TION
BETWEEN
THE
REPLICAS
NOW
CONSIDER
THE
CASE
IN
FIGURE
HERE
WE
HAVE
VIOLATED
THE
NYQUIST
CRITE
RION
AND
THE
REPLICAS
OVERLAP
CONSIDER
THE
CENTRAL
PART
OF
THE
PLOT
WHICH
IS
MAGNI
FIED
IN
FIGURE
AND
SHOWS
ONLY
THE
CENTRAL
REPLICA
CENTERED
AT
THE
ORIGIN
AND
THE
REPLICA
TO
ITS
RIGHT
CENTERED
AT
ΞS
THE
FREQUENCY
IS
ABOVE
THE
NYQUIST
FREQUENCY
ΞS
THERE
IS
HOWEVER
A
REPLICA
OF
GENERATED
BY
THE
SAMPLING
PROCESS
FROM
THE
REPLICA
ON
THE
RIGHT
AT
ΞS
A
FREQUENCY
LESS
THAN
THE
NYQUIST
FREQUENCY
THE
EN
ERGY
AT
THIS
FREQUENCY
CAN
BE
HEARD
IF
WE
ARE
DEALING
WITH
DIGITAL
SOUND
OR
SEEN
IF
WE
ARE
CONSIDERING
TWO
DIMENSIONAL
IMAGES
WE
SAY
THAT
THE
FREQUENCY
HAS
AN
ALIAS
AT
THIS
STATEMENT
ASSUMES
NO
KNOWLEDGE
OF
THE
UNDERLYING
FUNCTION
F
OTHER
THAN
A
SET
OF
ITS
SAMPLES
IF
WE
HAVE
ADDITIONAL
INFORMATION
SUCH
AS
KNOWLEDGE
THAT
THE
FUNCTION
IS
PERIODIC
KNOWLEDGE
OF
THE
FUNCTION
OVER
A
FINITE
INTERVAL
CAN
BE
SUFFICIENT
TO
DETERMINE
THE
ENTIRE
FUNCTION
WE
SHOW
THE
MAGNITUDE
OF
THE
SPECTRUM
BECAUSE
THE
FOURIER
TRANSFORM
PRODUCES
COMPLEX
NUM
BERS
FOR
THE
FREQUENCY
DOMAIN
COMPONENTS
F
X
G
GS
X
A
B
C
FIGURE
BAND
LIMITED
FUNCTION
A
FUNCTION
AND
ITS
SAMPLES
IN
THE
SPATIAL
DOMAIN
B
SPECTRUM
OF
THE
FUNCTION
C
SPECTRUM
OF
THE
SAMPLES
G
FIGURE
OVERLAPPING
REPLICAS
G
FIGURE
ALIASING
ΞS
NOTE
THAT
ONCE
ALIASING
HAS
OCCURRED
WE
CANNOT
DISTINGUISH
BETWEEN
INFOR
MATION
THAT
WAS
AT
A
FREQUENCY
IN
THE
ORIGINAL
DATA
AND
INFORMATION
THAT
WAS
PLACED
AT
THIS
FREQUENCY
BY
THE
SAMPLING
PROCESS
WE
CAN
DEMONSTRATE
ALIASING
AND
AMBIGUITY
WITHOUT
USING
FOURIER
ANALYSIS
BY
LOOKING
AT
A
SINGLE
SINUSOID
AS
SHOWN
IN
FIGURE
IF
WE
SAMPLE
THIS
SINUSOID
AT
TWICE
ITS
FREQUENCY
WE
CAN
RECOVER
IT
FROM
TWO
SAMPLES
HOWEVER
THESE
SAME
TWO
SAMPLES
ARE
SAMPLES
OF
A
SINUSOID
OF
TWICE
THIS
FREQUENCY
AND
THEY
CAN
ALSO
BE
SAMPLES
OF
SINUSOIDS
OF
OTHER
MULTIPLES
OF
THE
BASIC
FREQUENCY
ALL
THESE
FREQUENCIES
ARE
ALIASES
OF
THE
SAME
ORIGINAL
FREQUENCY
IF
WE
KNOW
THAT
THE
DATA
WERE
BAND
LIMITED
HOWEVER
THEN
THE
SAMPLES
CAN
DESCRIBE
ONLY
THE
ORIGINAL
SINUSOID
IF
WE
WERE
TO
DO
AN
ANALYSIS
OF
THE
FREQUENCY
CONTENT
OF
REAL
WORLD
IMAGES
WE
WOULD
FIND
THAT
THE
SPECTRAL
COMPONENTS
OF
MOST
IMAGES
ARE
CONCENTRATED
IN
THE
LOWER
FREQUENCIES
CONSEQUENTLY
ALTHOUGH
IT
IS
IMPOSSIBLE
TO
CONSTRUCT
A
FINITE
SIZED
IMAGE
THAT
IS
BAND
LIMITED
THE
ALIASING
ERRORS
OFTEN
ARE
MINIMAL
BECAUSE
THERE
IS
LITTLE
CONTENT
IN
FREQUENCIES
ABOVE
THE
NYQUIST
FREQUENCY
AND
LITTLE
CONTENT
IS
ALIASED
INTO
FIGURE
ALIASING
OF
SINUSOID
F
X
Y
A
FIGURE
SCANNING
OF
AN
IMAGE
B
A
POINT
SAMPLING
B
AREA
AVERAGING
FREQUENCIES
BELOW
THE
NYQUIST
FREQUENCY
THE
EXCEPTIONS
TO
THIS
STATEMENT
ARISE
WHEN
THERE
IS
REGULAR
PERIODIC
INFORMATION
IN
THE
CONTINUOUS
IMAGE
IN
THE
FREQUENCY
REPRESENTATION
REGULARITY
PLACES
MOST
OF
THE
INFORMATION
AT
A
FEW
FREQUENCIES
IF
ANY
OF
THESE
FREQUENCIES
IS
ABOVE
THE
NYQUIST
LIMIT
THE
ALIASING
EFFECT
IS
NOTICEABLE
AS
BEAT
OR
MOIRE
PATTERNS
EXAMPLES
THAT
YOU
MIGHT
HAVE
NOTICED
INCLUDE
THE
PATTERNS
THAT
APPEAR
ON
VIDEO
DISPLAYS
WHEN
PEOPLE
IN
THE
IMAGES
WEAR
STRIPED
SHIRTS
OR
PLAID
TIES
AND
WAVY
PATTERNS
THAT
ARISE
BOTH
IN
PRINTED
HALFTONED
FIGURES
DERIVED
FROM
COMPUTER
DISPLAYS
AND
IN
DIGITAL
IMAGES
OF
FARMLAND
WITH
PLOWED
FIELDS
OFTEN
WE
CAN
MINIMIZE
ALIASING
BY
PREFILTERING
BEFORE
WE
SCAN
AN
IMAGE
OR
BY
CONTROLLING
THE
AREA
OF
THE
DATA
THAT
THE
SCANNER
USES
TO
MEASURE
A
SAMPLE
FIGURE
SHOWS
TWO
POSSIBLE
WAYS
TO
SCAN
AN
IMAGE
IN
FIGURE
A
WE
SEE
AN
IDEAL
SCANNER
IT
MEASURES
THE
VALUE
OF
A
CONTINUOUS
IMAGE
AT
A
POINT
SO
THE
SAMPLES
ARE
GIVEN
BY
FIJ
F
XI
YI
IN
FIGURE
B
WE
HAVE
A
MORE
REALISTIC
SCANNER
THAT
OBTAINS
SAMPLES
BY
TAKING
A
WEIGHTED
AVERAGE
OVER
A
SMALL
INTERVAL
TO
PRODUCE
SAMPLES
OF
THE
FORM
FIJ
XI
YI
F
X
Y
W
X
Y
DYDX
FIGURE
SINC
FUNCTION
BY
SELECTING
THE
SIZE
OF
THE
WINDOW
AND
THE
WEIGHTING
FUNCTION
W
WE
CAN
ATTENUATE
HIGH
FREQUENCY
COMPONENTS
IN
THE
IMAGE
AND
THUS
WE
CAN
REDUCE
ALIASING
FORTU
NATELY
REAL
SCANNERS
MUST
TAKE
MEASUREMENTS
OVER
A
FINITE
REGION
CALLED
THE
SAMPLING
APERTURE
THUS
SOME
ANTIALIASING
TAKES
PLACE
EVEN
IF
THE
USER
HAS
NO
UNDERSTANDING
OF
THE
ALIASING
PROBLEM
RECONSTRUCTION
SUPPOSE
THAT
WE
HAVE
AN
INFINITE
SET
OF
SAMPLES
THE
MEMBERS
OF
WHICH
HAVE
BEEN
SAMPLED
AT
A
RATE
GREATER
THAN
THE
NYQUIST
FREQUENCY
THE
RECONSTRUCTION
OF
A
CONTIN
UOUS
FUNCTION
FROM
THE
SAMPLES
IS
BASED
ON
PART
OF
THE
NYQUIST
SAMPLING
THEOREM
NYQUIST
SAMPLING
THEOREM
PART
WE
CAN
RECONSTRUCT
A
CONTINUOUS
FUNCTION
F
X
FROM
ITS
SAMPLES
FI
BY
THE
FORMULA
F
X
I
FI
SINC
X
XI
THE
FUNCTION
SINC
X
SEE
FIGURE
IS
DEFINED
AS
SINC
X
SIN
ΠX
ΠX
THE
TWO
DIMENSIONAL
VERSION
OF
THE
RECONSTRUCTION
FORMULA
FOR
A
FUNCTION
F
X
Y
WITH
IDEAL
SAMPLES
FIJ
IS
F
X
Y
FIJSINC
X
XI
SINC
Y
YJ
I
J
THESE
FORMULAS
FOLLOW
FROM
THE
FACT
THAT
WE
CAN
RECOVER
AN
UNALIASED
FUNC
TION
IN
THE
FREQUENCY
DOMAIN
BY
USING
A
FILTER
THAT
IS
ZERO
EXCEPT
IN
THE
INTERVAL
ΞS
ΞS
A
LOW
PASS
FILTER
TO
OBTAIN
A
SINGLE
REPLICA
FROM
THE
INFINITE
NUMBER
F
FIGURE
ONE
DIMENSIONAL
RECONSTRUCTION
FIGURE
TWO
DIMENSIONAL
SINC
FUNCTION
OF
REPLICAS
GENERATED
BY
THE
SAMPLING
PROCESS
SHOWN
IN
FIGURE
THE
RECONSTRUC
TION
OF
A
ONE
DIMENSIONAL
FUNCTION
IS
SHOWN
IN
FIGURE
IN
TWO
DIMENSIONS
THE
RECONSTRUCTION
INVOLVES
USE
OF
A
TWO
DIMENSIONAL
SINC
AS
SHOWN
IN
FIGURE
UN
FORTUNATELY
THE
SINC
FUNCTION
CANNOT
BE
PRODUCED
IN
A
PHYSICAL
DISPLAY
BECAUSE
OF
ITS
NEGATIVE
SIDE
LOBES
CONSIDER
THE
DISPLAY
PROBLEM
FOR
A
CRT
DISPLAY
WE
START
WITH
A
DIGITAL
IMAGE
THAT
IS
A
SET
OF
SAMPLES
FOR
EACH
SAMPLE
WE
CAN
PLACE
A
SPOT
OF
LIGHT
CENTERED
AT
A
GRID
POINT
ON
THE
DISPLAY
SURFACE
AS
SHOWN
IN
FIGURE
THE
VALUE
OF
THE
SAMPLE
CONTROLS
THE
INTENSITY
OF
THE
SPOT
OR
MODULATES
THE
BEAM
WE
CAN
CONTROL
THE
SHAPE
OF
THE
SPOT
BY
USING
TECHNIQUES
SUCH
AS
FOCUSING
THE
BEAM
THE
RECONSTRUC
TION
FORMULA
TELLS
US
THAT
THE
BEAM
SHOULD
HAVE
THE
SHAPE
OF
A
TWO
DIMENSIONAL
SINC
BUT
BECAUSE
THE
BEAM
PUTS
OUT
ENERGY
THE
SPOT
MUST
BE
NONNEGATIVE
AT
ALL
POINTS
CONSEQUENTLY
THE
DISPLAY
PROCESS
MUST
MAKE
ERRORS
WE
CAN
EVALUATE
A
REAL
DISPLAY
BY
CONSIDERING
HOW
WELL
ITS
SPOT
APPROXIMATES
THE
DESIRED
SINC
FIGURE
SHOWS
THE
SINC
AND
SEVERAL
ONE
DIMENSIONAL
APPROXIMATIONS
THE
GAUSSIAN
SHAPED
SPOT
CORRE
SPONDS
TO
THE
SHAPE
OF
MANY
CRT
SPOTS
WHEREAS
THE
RECTANGULAR
SPOT
MIGHT
CORRE
FIGURE
DISPLAY
OF
A
POINT
ON
CRT
A
B
C
D
FIGURE
DISPLAY
SPOTS
A
IDEAL
SPOT
B
RECTANGULAR
APPROXIMA
TION
C
PIECEWISE
LINEAR
APPROXIMATION
D
GAUSSIAN
APPROXIMATION
Q
G
G
FIGURE
QUANTIZER
SPOND
TO
AN
LCD
DISPLAY
WITH
SQUARE
PIXELS
NOTE
THAT
WE
CAN
MAKE
EITHER
APPROXI
MATION
WIDER
OR
NARROWER
IF
WE
ANALYZE
THE
SPOT
PROFILES
IN
THE
FREQUENCY
DOMAIN
WE
FIND
THAT
THE
WIDER
SPOTS
ARE
MORE
ACCURATE
AT
LOW
FREQUENCIES
BUT
ARE
LESS
ACCURATE
AT
HIGHER
FREQUENCIES
IN
PRACTICE
THE
SPOT
SIZE
THAT
WE
CHOOSE
IS
A
COMPROMISE
VISIBLE
DIFFERENCES
ACROSS
MONITORS
OFTEN
CAN
BE
TRACED
TO
DIFFERENT
SPOT
PROFILES
QUANTIZATION
THE
MATHEMATICAL
ANALYSIS
OF
SAMPLING
EXPLAINS
A
NUMBER
OF
IMPORTANT
EFFECTS
HOW
EVER
WE
HAVE
NOT
INCLUDED
THE
EFFECT
OF
EACH
SAMPLE
BEING
QUANTIZED
INTO
K
DISCRETE
LEVELS
GIVEN
A
SCALAR
FUNCTION
G
WITH
VALUES
IN
THE
RANGE
GMIN
G
GMAX
A
QUANTIZER
IS
A
FUNCTION
Q
SUCH
THAT
IF
GI
G
GI
Q
G
QI
THUS
FOR
EACH
VALUE
OF
G
WE
ASSIGN
IT
ONE
OF
K
VALUES
AS
SHOWN
IN
FIGURE
IN
GENERAL
DESIGNING
A
QUANTIZER
INVOLVES
CHOOSING
THE
QI
THE
QUANTIZATION
LEVELS
AND
THE
GI
THE
THRESHOLD
VALUES
IF
WE
KNOW
THE
PROBABILITY
DISTRIBUTION
FOR
G
P
G
WE
CAN
SOLVE
FOR
THE
VALUES
THAT
MINIMIZE
THE
MEAN
SQUARE
ERROR
E
R
G
Q
G
G
DG
HOWEVER
WE
OFTEN
DESIGN
QUANTIZERS
BASED
ON
THE
PERCEPTUAL
ISSUES
THAT
WE
DISCUSSED
IN
CHAPTER
A
SIMPLE
RULE
OF
THUMB
IS
THAT
WE
SHOULD
NOT
BE
ABLE
TO
DETECT
ONE
LEVEL
CHANGES
BUT
SHOULD
BE
ABLE
TO
DETECT
ALL
TWO
LEVEL
CHANGES
GIVEN
THE
THRESHOLD
FOR
THE
VISUAL
SYSTEM
TO
DETECT
A
CHANGE
IN
LUMINANCE
WE
USUALLY
NEED
AT
LEAST
OR
BITS
OR
TO
LEVELS
WE
SHOULD
ALSO
CONSIDER
THE
LOGARITHMIC
INTENSITY
BRIGHTNESS
RESPONSE
OF
HUMANS
TO
DO
SO
WE
USUALLY
DISTRIBUTE
THE
LEVELS
EXPONENTIALLY
TO
GIVE
APPROXIMATELY
EQUAL
PERCEPTUAL
ERRORS
AS
WE
GO
FROM
ONE
LEVEL
TO
THE
NEXT
SUMMARY
AND
NOTES
IN
THE
EARLY
DAYS
OF
COMPUTER
GRAPHICS
PRACTITIONERS
WORKED
WITH
ONLY
TWO
AND
THREE
DIMENSIONAL
GEOMETRIC
OBJECTS
WHEREAS
THOSE
PRACTITIONERS
WHO
WERE
INVOLVED
WITH
ONLY
TWO
DIMENSIONAL
IMAGES
WERE
CONSIDERED
TO
BE
WORKING
IN
IMAGE
PROCESS
ING
ADVANCES
IN
HARDWARE
HAVE
MADE
GRAPHICS
AND
IMAGE
PROCESSING
SYSTEMS
PRACTI
CALLY
INDISTINGUISHABLE
FOR
THOSE
PRACTITIONERS
INVOLVED
WITH
SYNTHESIZING
IMAGES
CERTAINLY
A
MAJOR
PART
OF
COMPUTER
GRAPHICS
THIS
MERGING
OF
FIELDS
HAS
BROUGHT
FORTH
A
MULTITUDE
OF
NEW
TECHNIQUES
THE
IDEA
THAT
A
TWO
DIMENSIONAL
IMAGE
OR
TEXTURE
CAN
BE
MAPPED
TO
A
THREE
DIMENSIONAL
SURFACE
IN
NO
MORE
TIME
THAN
IT
TAKES
TO
RENDER
THE
SURFACE
WITH
CONSTANT
SHADING
WOULD
HAVE
BEEN
UNTHINKABLE
YEARS
AGO
NOW
THESE
TECHNIQUES
ARE
ROUTINE
TECHNIQUES
SUCH
AS
TEXTURE
MAPPING
HAVE
HAD
AN
ENORMOUS
EFFECT
ON
REAL
TIME
GRAPHICS
IN
FIELDS
SUCH
AS
ANIMATION
VIRTUAL
REALITY
AND
SCIENTIFIC
VISUALIZATION
WE
USE
HARDWARE
TEXTURE
MAPPING
TO
ADD
DETAIL
TO
IMAGES
WITHOUT
BURDENING
THE
GEO
METRIC
PIPELINE
THE
USE
OF
COMPOSITING
TECHNIQUES
THROUGH
THE
ALPHA
CHANNEL
ALLOWS
THE
APPLICATION
PROGRAMMER
TO
PERFORM
TASKS
SUCH
AS
ANTIALIASING
AND
TO
CREATE
EF
FECTS
SUCH
AS
FOG
AND
DEPTH
OF
FIELD
THAT
UNTIL
RECENTLY
WERE
DONE
ON
DIFFERENT
TYPES
OF
ARCHITECTURES
AFTER
THE
GRAPHICS
HAD
BEEN
CREATED
MAPPING
METHODS
PROVIDE
SOME
OF
THE
BEST
EXAMPLES
OF
THE
INTERACTIONS
AMONG
GRAPHICS
HARDWARE
SOFTWARE
AND
APPLICATIONS
CONSIDER
TEXTURE
MAPPING
ALTHOUGH
IT
WAS
FIRST
DESCRIBED
AND
IMPLEMENTED
PURELY
AS
A
SOFTWARE
ALGORITHM
ONCE
PEOPLE
SAW
ITS
ABILITY
TO
CREATE
SCENES
WITH
GREAT
VISUAL
COMPLEXITY
HARDWARE
DEVELOPERS
STARTED
PUTTING
LARGE
AMOUNTS
OF
TEXTURE
MEMORY
IN
GRAPHICS
SYSTEMS
ONCE
TEXTURE
MAPPING
WAS
IMPLEMENTED
IN
HARDWARE
IT
COULD
BE
DONE
IN
REAL
TIME
A
DEVELOPMENT
THAT
LED
TO
THE
REDESIGN
OF
MANY
APPLICATIONS
NOTABLY
COMPUTER
GAMES
RECENT
ADVANCES
IN
GPUS
PROVIDE
MANY
NEW
POSSIBILITIES
ONE
IS
THAT
THE
PIPELINE
IS
NOW
PROGRAMMABLE
THE
PROGRAMMABILITY
OF
THE
FRAGMENT
PROCESSOR
MAKES
POSSI
BLE
MANY
NEW
TEXTURE
MANIPULATION
TECHNIQUES
WHILE
PRESERVING
INTERACTIVE
SPEEDS
SECOND
THE
INCLUSION
OF
LARGE
AMOUNTS
OF
MEMORY
ON
THE
GPU
REMOVES
ONE
OF
THE
MAJOR
BOTTLENECKS
IN
DISCRETE
METHODS
NAMELY
MANY
OF
THE
TRANSFERS
OF
IMAGE
DATA
BETWEEN
PROCESSOR
MEMORY
AND
THE
GPU
THIRD
GPU
ARCHITECTURES
ARE
DESIGNED
FOR
RAPID
PROCESSING
OF
DISCRETE
DATA
BY
INCORPORATING
A
HIGH
DEGREE
OF
PARALLELISM
FOR
FRAGMENT
PROCESSING
FINALLY
THE
AVAILABILITY
OF
FLOATING
POINT
FRAME
BUFFERS
ELIMI
NATES
MANY
OF
THE
PRECISION
ISSUES
THAT
PLAGUED
TECHNIQUES
THAT
MANIPULATED
IMAGE
DATA
IN
THIS
CHAPTER
WE
HAVE
CONCENTRATED
ON
TECHNIQUES
THAT
ARE
SUPPORTED
BY
RE
CENTLY
AVAILABLE
HARDWARE
AND
APIS
MANY
OF
THE
TECHNIQUES
INTRODUCED
HERE
ARE
RECENT
MANY
MORE
HAVE
APPEARED
IN
THE
RECENT
LITERATURE
AND
ARE
AVAILABLE
ONLY
FOR
PROGRAMMABLE
PROCESSORS
SUGGESTED
READINGS
ENVIRONMENT
MAPPING
WAS
DEVELOPED
BY
BLINN
AND
NEWELL
TEXTURE
MAPPING
WAS
FIRST
USED
BY
CATMULL
SEE
THE
REVIEW
BY
HECKBERT
HARDWARE
SUPPORT
FOR
TEXTURE
MAPPING
CAME
WITH
THE
SGI
REALITY
ENGINE
SEE
AKELEY
PERLIN
AND
HOFFERT
DESIGNED
A
NOISE
FUNCTION
TO
GENERATE
TWO
AND
THREE
DIMENSIONAL
TEXTURE
MAPS
MANY
TEXTURE
SYNTHESIS
TECHNIQUES
ARE
DISCUSSED
IN
EBERT
ET
AL
THE
ALIASING
PROBLEM
IN
COMPUTER
GRAPHICS
HAS
BEEN
OF
IMPORTANCE
SINCE
THE
ADVENT
OF
RASTER
GRAPHICS
SEE
CROW
THE
FIRST
CONCERNS
WERE
WITH
RASTERI
ZATION
OF
LINES
BUT
LATER
OTHER
FORMS
OF
ALIASING
AROSE
WITH
ANIMATIONS
AND
RAY
TRACING
THE
IMAGE
PROCESSING
BOOKS
PROVIDE
AN
INTRODUCTION
TO
SIGNAL
PROCESSING
AND
ALIASING
IN
TWO
DIMENSIONS
THE
BOOKS
BY
GLASS
NER
AND
WATT
AND
POLICARPO
ARE
AIMED
AT
PRACTITIONERS
OF
COMPUTER
GRAPHICS
MANY
OF
THE
COMPOSITING
TECHNIQUES
INCLUDING
USE
OF
THE
Α
CHANNEL
WERE
SUG
GESTED
BY
PORTER
AND
DUFF
THE
OPENGL
PROGRAMMING
GUIDE
CONTAINS
MANY
EXAMPLES
OF
HOW
BUFFERS
CAN
BE
USED
THE
RECENT
LITERATURE
INCLUDES
MANY
NEW
EXAMPLES
OF
THE
USE
OF
BUFFERS
SEE
THE
RECENT
ISSUES
OF
THE
JOURNALS
COMPUTER
GRAPHICS
AND
IEEE
COMPUTER
GRAPHICS
AND
APPLICATIONS
TECHNICAL
DETAILS
ON
MOST
OF
THE
STANDARD
IMAGE
FORMATS
CAN
BE
FOUND
IN
EXERCISES
SHOW
HOW
YOU
CAN
USE
THE
XOR
WRITING
MODE
TO
IMPLEMENT
AN
ODD
EVEN
FILL
ALGORITHM
WHAT
ARE
THE
VISUAL
EFFECTS
OF
USING
XOR
TO
MOVE
A
CURSOR
AROUND
ON
THE
SCREEN
HOW
IS
AN
IMAGE
PRODUCED
WITH
AN
ENVIRONMENT
MAP
DIFFERENT
FROM
A
RAY
TRACED
IMAGE
OF
THE
SAME
SCENE
IN
THE
MOVIES
AND
TELEVISION
THE
WHEELS
OF
CARS
AND
WAGONS
OFTEN
APPEAR
TO
BE
SPINNING
IN
THE
WRONG
DIRECTION
WHAT
CAUSES
THE
EFFECT
CAN
ANYTHING
BE
DONE
TO
FIX
THIS
PROBLEM
EXPLAIN
YOUR
ANSWER
WE
CAN
ATTEMPT
TO
DISPLAY
SAMPLED
DATA
BY
SIMPLY
PLOTTING
THE
POINTS
AND
LETTING
THE
HUMAN
VISUAL
SYSTEM
MERGE
THE
POINTS
INTO
SHAPES
WHY
IS
THIS
TECHNIQUE
DANGEROUS
IF
THE
DATA
ARE
CLOSE
TO
THE
NYQUIST
LIMIT
WHY
DO
THE
PATTERNS
OF
STRIPED
SHIRTS
AND
TIES
CHANGE
AS
AN
ACTOR
MOVES
ACROSS
THE
SCREEN
OF
YOUR
TELEVISION
WHY
SHOULD
WE
DO
ANTIALIASING
BY
PREPROCESSING
THE
DATA
RATHER
THAN
BY
POST
PROCESSING
THEM
SUPPOSE
THAT
WE
HAVE
TWO
TRANSLUCENT
SURFACES
CHARACTERIZED
BY
OPACITIES
AND
WHAT
IS
THE
OPACITY
OF
THE
TRANSLUCENT
MATERIAL
THAT
WE
CREATE
BY
USING
THE
TWO
IN
SERIES
GIVE
AN
EXPRESSION
FOR
THE
TRANSPARENCY
OF
THE
COMBINED
MATERIAL
ASSUME
THAT
WE
VIEW
TRANSLUCENT
SURFACES
AS
FILTERS
OF
THE
LIGHT
PASSING
THROUGH
THEM
DEVELOP
A
BLENDING
MODEL
BASED
ON
THE
COMPLEMENTARY
COLORS
CMY
IN
SECTION
WE
USED
Α
AND
Α
FOR
THE
DESTINATION
AND
SOURCE
BLENDING
FACTORS
RESPECTIVELY
WHAT
WOULD
BE
THE
VISUAL
DIFFERENCE
IF
WE
USED
FOR
THE
DESTINATION
FACTOR
AND
KEPT
Α
FOR
THE
SOURCE
FACTOR
CREATE
INTERACTIVE
PAINTBRUSHES
THAT
ADD
COLOR
GRADUALLY
TO
IMAGE
ALSO
USE
BLENDING
TO
ADD
ERASERS
THAT
GRADUALLY
REMOVE
IMAGES
FROM
THE
SCREEN
DEVISE
A
METHOD
OF
USING
TEXTURE
MAPPING
FOR
THE
DISPLAY
OF
ARRAYS
OF
THREE
DIMENSIONAL
PIXELS
VOXELS
SHOW
HOW
TO
USE
THE
LUMINANCE
HISTOGRAM
OF
AN
IMAGE
TO
DERIVE
A
LOOKUP
TABLE
THAT
WILL
MAKE
THE
ALTERED
IMAGE
HAVE
A
FLAT
HISTOGRAM
WHEN
WE
SUPERSAMPLE
A
SCENE
USING
JITTER
WHY
SHOULD
WE
USE
A
RANDOM
JITTER
PATTERN
SUPPOSE
THAT
A
SET
OF
OBJECTS
IS
TEXTURE
MAPPED
WITH
REGULAR
PATTERNS
SUCH
AS
STRIPES
AND
CHECKERBOARDS
WHAT
IS
THE
DIFFERENCE
IN
ALIASING
PATTERNS
THAT
WE
WOULD
SEE
WHEN
WE
SWITCH
FROM
PARALLEL
TO
PERSPECTIVE
VIEWS
CONSIDER
A
SCENE
COMPOSED
OF
SIMPLE
OBJECTS
SUCH
AS
PARALLELEPIPEDS
THAT
ARE
INSTANCED
AT
DIFFERENT
SIZES
SUPPOSE
THAT
YOU
HAVE
A
SINGLE
TEXTURE
MAP
AND
YOU
ARE
ASKED
TO
MAP
THIS
TEXTURE
TO
ALL
THE
OBJECTS
HOW
WOULD
YOU
MAP
THE
TEXTURE
SO
THAT
THE
PATTERN
WOULD
BE
THE
SAME
SIZE
ON
EACH
FACE
OF
EACH
OBJECT
WRITE
A
PROGRAM
USING
MIPMAPS
IN
WHICH
EACH
MIPMAP
IS
CONSTRUCTED
FROM
A
DIFFERENT
IMAGE
IS
THERE
A
PRACTICAL
APPLICATION
FOR
SUCH
A
PROGRAM
USING
EITHER
YOUR
OWN
IMAGE
PROCESSING
CODE
FOR
CONVOLUTION
OR
THE
IMAGING
EXTENSIONS
OF
OPENGL
IMPLEMENT
A
GENERAL
FILTERING
PROGRAM
FOR
LUMI
NANCE
IMAGES
TAKE
AN
IMAGE
FROM
A
DIGITAL
CAMERA
OR
FROM
SOME
OTHER
SOURCE
AND
APPLY
SMOOTHING
AND
SHARPENING
FILTERS
REPETITIVELY
PAY
SPECIAL
ATTENTION
TO
WHAT
HAPPENS
AT
THE
EDGES
OF
THE
FILTERED
IMAGES
REPEAT
EXERCISE
BUT
FIRST
ADD
A
SMALL
AMOUNT
OF
RANDOM
NOISE
TO
THE
IMAGE
DESCRIBE
THE
DIFFERENCES
BETWEEN
THE
RESULTS
OF
THE
TWO
EXERCISES
IF
YOUR
SYSTEM
SUPPORTS
THE
IMAGING
EXTENSIONS
COMPARE
THE
PERFORMANCE
OF
FILTERING
USING
THE
EXTENSIONS
WITH
FILTERING
DONE
BY
YOUR
OWN
CODE
USING
PROCESSOR
MEMORY
ONE
OF
THE
MOST
EFFECTIVE
METHODS
OF
ALTERING
THE
CONTRAST
OF
AN
IMAGE
IS
TO
ALLOW
THE
USER
TO
DESIGN
A
LOOKUP
INTERACTIVELY
CONSIDER
A
GRAPH
IN
WHICH
A
CURVE
IS
APPROXIMATED
WITH
THREE
CONNECTED
LINE
SEGMENTS
WRITE
A
PROGRAM
THAT
DISPLAYS
AN
IMAGE
ALLOWS
THE
USER
TO
SPECIFY
THE
LINE
SEGMENTS
INTERACTIVELY
AND
SHOWS
THE
IMAGE
AFTER
IT
HAS
BEEN
ALTERED
BY
THE
CURVE
IN
A
SIMILAR
VEIN
TO
EXERCISE
WRITE
AN
INTERACTIVE
PROGRAM
THAT
ALLOWS
USERS
TO
DESIGN
PSEUDOCOLOR
MAPS
DEVISE
A
METHOD
TO
CONVERT
THE
VALUES
OBTAINED
FROM
A
CUBE
MAP
TO
VALUES
FOR
A
SPHERICAL
MAP
WRITE
AN
INTERACTIVE
PROGRAM
THAT
WILL
RETURN
THE
COLORS
OF
PIXELS
ON
THE
DISPLAY
SUPPOSE
WE
WANT
TO
CREATE
A
CUBE
THAT
HAS
A
BLACK
AND
WHITE
CHECKERBOARD
PATTERN
TEXTURE
MAPPED
TO
ITS
FACES
CAN
WE
TEXTURE
MAP
THE
CUBE
SO
THAT
THE
COLORS
ALTERNATE
AS
WE
TRAVERSE
THE
CUBE
FROM
FACE
TO
FACE
IN
WHAT
TYPES
OF
APPLICATIONS
MIGHT
YOU
PREFER
A
FRONT
TO
BACK
RENDERING
IN
STEAD
OF
A
BACK
TO
FRONT
RENDERING
THE
COLOR
GAMUT
IN
CHROMATICITY
COORDINATES
IS
EQUIVALENT
TO
THE
TRIANGLE
IN
RGB
SPACE
THAT
IS
DEFINED
BY
THE
PRIMARIES
WRITE
A
PROGRAM
THAT
WILL
DISPLAY
THIS
TRIANGLE
AND
THE
EDGES
OF
THE
CUBE
IN
WHICH
IT
LIES
EACH
POINT
ON
THE
TRIANGLE
SHOULD
HAVE
THE
COLOR
DETERMINED
BY
ITS
COORDINATES
IN
RGB
SPACE
THIS
TRIANGLE
IS
CALLED
THE
MAXWELL
TRIANGLE
FIND
THE
MATRIX
THAT
CONVERTS
NTSC
RGB
AND
USE
IT
TO
REDISPLAY
THE
COLOR
GAMUT
OF
YOUR
DISPLAY
IN
XY
CHROMATICITY
COORDINATES
SHOW
THAT
THE
NORMAL
MATRIX
IS
THE
INVERSE
TRANSPOSE
OF
THE
UPPER
LEFT
SUBMATRIX
OF
THE
MODEL
VIEW
MATRIX
MODELING
AND
HIERARCHY
CHAPTER
ODELS
ARE
ABSTRACTIONS
OF
THE
WORLD
BOTH
OF
THE
REAL
WORLD
IN
WHICH
WE
LIVE
AND
OF
VIRTUAL
WORLDS
THAT
WE
CREATE
WITH
COMPUTERS
WE
ARE
ALL
FAMILIAR
WITH
MATHEMATICAL
MODELS
THAT
ARE
USED
IN
ALL
AREAS
OF
SCIENCE
AND
ENGINEERING
THESE
MODELS
USE
EQUATIONS
TO
MODEL
THE
PHYSICAL
PHENOMENA
THAT
WE
WISH
TO
STUDY
IN
COMPUTER
SCIENCE
WE
USE
ABSTRACT
DATA
TYPES
TO
MODEL
ORGANIZATIONS
OF
OBJECTS
IN
COMPUTER
GRAPHICS
WE
MODEL
OUR
WORLDS
WITH
GEOMETRIC
OBJECTS
WHEN
WE
BUILD
A
MATHEMATICAL
MODEL
WE
MUST
CHOOSE
CAREFULLY
WHICH
TYPE
OF
MATHEMATICS
FITS
THE
PHENOMENA
THAT
WE
WISH
TO
MODEL
ALTHOUGH
ORDINARY
DIFFERENTIAL
EQUATIONS
MAY
BE
APPROPRIATE
FOR
MODELING
THE
DYNAMIC
BEHAVIOR
OF
A
SYSTEM
OF
SPRINGS
AND
MASSES
WE
WOULD
PROBABLY
USE
PARTIAL
DIFFERENTIAL
EQUATIONS
TO
MODEL
TURBULENT
FLUID
FLOW
WE
GO
THROUGH
ANALOGOUS
PROCESSES
IN
COMPUTER
GRAPHICS
CHOOSING
WHICH
PRIMITIVES
TO
USE
IN
OUR
MODELS
AND
HOW
TO
SHOW
RELATIONSHIPS
AMONG
THEM
OFTEN
AS
IS
TRUE
OF
CHOOSING
A
MATHEMATICAL
MODEL
THERE
ARE
MULTIPLE
APPROACHES
SO
WE
SEEK
MODELS
THAT
CAN
TAKE
ADVANTAGE
OF
THE
CAPABILITIES
OF
OUR
GRAPHICS
SYSTEMS
IN
THIS
CHAPTER
WE
EXPLORE
MULTIPLE
APPROACHES
TO
DEVELOPING
AND
WORKING
WITH
MODELS
OF
GEOMETRIC
OBJECTS
WE
CONSIDER
MODELS
THAT
USE
AS
BUILDING
BLOCKS
A
SET
OF
SIMPLE
GEOMETRIC
OBJECTS
EITHER
THE
PRIMITIVES
SUPPORTED
BY
OUR
GRAPHICS
SYSTEMS
OR
A
SET
OF
USER
DEFINED
OBJECTS
BUILT
FROM
THESE
PRIMITIVES
WE
EXTEND
THE
USE
OF
TRANS
FORMATIONS
FROM
CHAPTER
TO
INCLUDE
HIERARCHICAL
RELATIONSHIPS
AMONG
THE
OBJECTS
THE
TECHNIQUES
THAT
WE
DEVELOP
ARE
APPROPRIATE
FOR
APPLICATIONS
SUCH
AS
ROBOTICS
AND
FIGURE
ANIMATION
WHERE
THE
DYNAMIC
BEHAVIOR
OF
THE
OBJECTS
IS
CHARACTERIZED
BY
RELA
TIONSHIPS
AMONG
THE
PARTS
OF
THE
MODEL
THE
NOTION
OF
HIERARCHY
IS
A
POWERFUL
ONE
AND
IS
AN
INTEGRAL
PART
OF
OBJECT
ORIENTED
METHODOLOGIES
WE
EXTEND
OUR
HIERARCHICAL
MODELS
OF
OBJECTS
TO
HIERARCHICAL
MODELS
OF
WHOLE
SCENES
INCLUDING
CAMERAS
LIGHTS
AND
MATERIAL
PROPERTIES
SUCH
MODELS
ALLOW
US
TO
EXTEND
OUR
GRAPHICS
APIS
TO
MORE
OBJECT
ORIENTED
SYSTEMS
AND
ALSO
GIVE
US
INSIGHT
INTO
USING
GRAPHICS
OVER
NETWORKS
AND
DISTRIBUTED
ENVIRONMENTS
SUCH
AS
THE
WORLD
WIDE
WEB
SYMBOLS
AND
INSTANCES
OUR
FIRST
CONCERN
IS
HOW
WE
CAN
STORE
A
MODEL
THAT
MAY
INCLUDE
MANY
SOPHISTICATED
OBJECTS
THERE
ARE
TWO
IMMEDIATE
ISSUES
HOW
WE
DEFINE
AN
OBJECT
MORE
COMPLEX
THAN
THE
ONES
WE
HAVE
DEALT
WITH
UNTIL
NOW
AND
HOW
WE
REPRESENT
A
COLLECTION
OF
THESE
Y
OBJECTS
MOST
APIS
TAKE
A
MINIMALIST
ATTITUDE
TOWARD
PRIMITIVES
THEY
CONTAIN
ONLY
A
FEW
PRIMITIVES
LEAVING
IT
TO
THE
USER
TO
CONSTRUCT
MORE
COMPLEX
OBJECTS
FROM
THESE
PRIMITIVES
SOMETIMES
ADDITIONAL
LIBRARIES
PROVIDE
OBJECTS
BUILT
ON
TOP
OF
THE
BASIC
PRIMITIVES
WE
ASSUME
THAT
WE
HAVE
AVAILABLE
A
COLLECTION
OF
BASIC
THREE
DIMENSIONAL
OBJECTS
PROVIDED
BY
THESE
OPTIONS
X
WE
CAN
TAKE
A
NONHIERARCHICAL
APPROACH
TO
MODELING
BY
REGARDING
THESE
OBJECTS
AS
SYMBOLS
AND
BY
MODELING
OUR
WORLD
AS
A
COLLECTION
OF
SYMBOLS
SYMBOLS
CAN
INCLUDE
GEOMETRIC
OBJECTS
FONTS
AND
APPLICATION
SPECIFIC
SETS
OF
GRAPHICAL
OBJECTS
Z
SYMBOLS
ARE
USUALLY
REPRESENTED
AT
A
CONVENIENT
SIZE
AND
ORIENTATION
FOR
EXAMPLE
A
FIGURE
CYLINDER
SYMBOL
CYLINDER
IS
USUALLY
ORIENTED
PARALLEL
TO
ONE
OF
THE
AXES
AS
SHOWN
IN
FIGURE
OFTEN
WITH
A
UNIT
HEIGHT
A
UNIT
RADIUS
AND
ITS
BOTTOM
CENTERED
AT
THE
ORIGIN
MOST
APIS
INCLUDING
OPENGL
MAKE
A
DISTINCTION
BETWEEN
THE
FRAME
IN
WHICH
THE
SYMBOL
IS
DEFINED
SOMETIMES
CALLED
THE
MODEL
FRAME
AND
THE
OBJECT
OR
WORLD
FRAME
THIS
DISTINCTION
CAN
BE
HELPFUL
WHEN
THE
SYMBOLS
ARE
PURELY
SHAPES
SUCH
AS
THE
SYMBOLS
THAT
WE
MIGHT
USE
FOR
CIRCUIT
ELEMENTS
IN
A
CAD
APPLICATION
AND
HAVE
NO
PHYSICAL
UNITS
ASSOCIATED
WITH
THEM
IN
OPENGL
WE
HAVE
TO
SET
UP
THE
TRANSFORMATION
FROM
THE
FRAME
OF
THE
SYMBOL
TO
THE
OBJECT
COORDINATE
FRAME
WITHIN
THE
APPLICATION
THUS
THE
MODEL
VIEW
MATRIX
FOR
A
GIVEN
SYMBOL
IS
THE
CONCATENATION
OF
AN
INSTANCE
TRANSFORMATION
THAT
BRINGS
THE
SYMBOL
INTO
OBJECT
COORDINATES
AND
A
MATRIX
THAT
BRINGS
THE
SYMBOL
INTO
THE
EYE
FRAME
THE
INSTANCE
TRANSFORMATION
THAT
WE
INTRODUCED
IN
CHAPTER
ALLOWS
US
TO
PLACE
INSTANCES
OF
EACH
SYMBOL
IN
THE
MODEL
AT
THE
DESIRED
SIZE
ORIENTATION
AND
LOCATION
THUS
THE
INSTANCE
TRANSFORMATION
M
TRS
IS
A
CONCATENATION
OF
A
TRANSLATION
A
ROTATION
AND
A
SCALE
AND
POSSIBLY
A
SHEAR
AS
SHOWN
IN
FIGURE
CONSEQUENTLY
OPENGL
PROGRAMS
OFTEN
CONTAIN
REPETITIONS
OF
CODE
IN
THE
FOLLOWING
FORM
INSTANCE
INSTANCE
TRANSLATE
DX
DY
DZ
ROTATEZ
RZ
ROTATEY
RY
ROTATEX
RX
SCALE
SX
SY
SZ
INSTANCE
CYLINDER
OR
SOME
OTHER
SYMBOL
IN
THIS
EXAMPLE
THE
INSTANCE
MATRIX
IS
COMPUTED
AND
ALTERS
THE
MODEL
VIEW
MATRIX
THE
RESULTING
MODEL
VIEW
MATRIX
IS
SENT
TO
THE
VERTEX
SHADER
USING
GLUNIFORM
THE
Y
Y
Y
Y
X
X
X
Z
Z
Z
Z
FIGURE
INSTANCE
TRANSFORMATION
SYMBOL
SCALE
ROTATE
TRANSLATE
SX
SY
SZ
EX
EY
EZ
DX
DY
DZ
FIGURE
SYMBOL
INSTANCE
TRANSFORMATION
TABLE
CODE
FOR
CYLINDER
GENERATES
VERTICES
AND
CAN
SEND
THEM
TO
THE
VERTEX
SHADER
USING
GLDRAWARRAYS
ALTERNATELY
WE
CAN
APPLY
THE
MODEL
VIEW
MATRIX
IN
THE
APPLICATION
AS
WE
GENERATE
THE
VERTICES
WE
CAN
ALSO
THINK
OF
SUCH
A
MODEL
IN
THE
FORM
OF
A
TABLE
AS
SHOWN
IN
FIGURE
HERE
EACH
SYMBOL
IS
ASSUMED
TO
HAVE
A
UNIQUE
NUMERICAL
IDENTIFIER
THE
TABLE
STORES
THIS
IDENTIFIER
AND
THE
PARAMETERS
NECESSARY
TO
BUILD
THE
INSTANCE
TRANSFORMATION
MATRIX
THE
TABLE
SHOWS
THAT
THIS
MODELING
TECHNIQUE
CONTAINS
NO
INFORMATION
ABOUT
RELATIONSHIPS
AMONG
OBJECTS
HOWEVER
THE
TABLE
CONTAINS
ALL
THE
INFORMATION
THAT
WE
REQUIRE
TO
DRAW
THE
OBJECTS
AND
IS
THUS
A
SIMPLE
DATA
STRUCTURE
OR
MODEL
FOR
A
GROUP
OF
GEOMETRIC
OBJECTS
WE
COULD
SEARCH
THE
TABLE
FOR
AN
OBJECT
CHANGE
THE
INSTANCE
TRANSFORMATION
FOR
AN
OBJECT
AND
ADD
OR
DELETE
OBJECTS
HOWEVER
THE
FLATNESS
OF
THE
REPRESENTATION
LIMITS
US
HIERARCHICAL
MODELS
SUPPOSE
THAT
WE
WISH
TO
BUILD
A
MODEL
OF
AN
AUTOMOBILE
THAT
WE
CAN
ANIMATE
WE
CAN
COMPOSE
THE
MODEL
FROM
FIVE
PARTS
THE
CHASSIS
AND
THE
FOUR
WHEELS
FIGURE
EACH
OF
WHICH
WE
CAN
DESCRIBE
BY
USING
OUR
STANDARD
GRAPHICS
PRIMITIVES
TWO
FRAMES
OF
A
SIMPLE
ANIMATION
OF
THE
MODEL
ARE
SHOWN
IN
FIGURE
WE
COULD
WRITE
A
PROGRAM
FIGURE
AUTOMOBILE
MODEL
FIGURE
TWO
FRAMES
OF
ANIMATION
TO
GENERATE
THIS
ANIMATION
BY
NOTING
THAT
IF
EACH
WHEEL
HAS
A
RADIUS
R
THEN
A
DEGREE
ROTATION
OF
A
WHEEL
MUST
CORRESPOND
TO
THE
CAR
MOVING
FORWARD
OR
BACKWARD
A
DISTANCE
OF
THE
PROGRAM
COULD
THEN
CONTAIN
ONE
FUNCTION
TO
GENERATE
EACH
WHEEL
AND
ANOTHER
TO
GENERATE
THE
CHASSIS
ALL
THESE
FUNCTIONS
COULD
USE
THE
SAME
INPUT
SUCH
AS
THE
DESIRED
SPEED
AND
DIRECTION
OF
THE
AUTOMOBILE
IN
PSEUDOCODE
OUR
PROGRAM
MIGHT
LOOK
LIKE
THIS
FLOAT
SPEED
FLOAT
D
DIRECTION
FLOAT
T
TIME
DETERMINE
SPEED
AND
DIRECTION
AT
TIME
T
D
D
D
D
D
THIS
PROGRAM
IS
JUST
THE
KIND
THAT
WE
DO
NOT
WANT
TO
WRITE
IT
IS
LINEAR
AND
SHOWS
NONE
OF
THE
RELATIONSHIPS
AMONG
THE
COMPONENTS
OF
THE
AUTOMOBILE
THERE
ARE
TWO
TYPES
OF
RELATIONSHIPS
THAT
WE
WOULD
LIKE
TO
EXPLOIT
FIRST
WE
CANNOT
SEPARATE
THE
MOVEMENT
OF
THE
CAR
FROM
THE
MOVEMENT
OF
THE
WHEELS
IF
THE
CAR
MOVES
FORWARD
THE
WHEELS
MUST
TURN
SECOND
WE
WOULD
LIKE
TO
USE
THE
FACT
THAT
ALL
THE
WHEELS
OF
THE
AUTOMOBILE
ARE
IDENTICAL
THEY
ARE
MERELY
LOCATED
IN
DIFFERENT
PLACES
WITH
DIFFERENT
ORIENTATIONS
WE
CAN
REPRESENT
THE
RELATIONSHIPS
AMONG
PARTS
OF
THE
MODELS
BOTH
ABSTRACTLY
AND
VISUALLY
WITH
GRAPHS
MATHEMATICALLY
A
GRAPH
CONSISTS
OF
A
SET
OF
NODES
OR
VERTICES
AND
A
SET
OF
EDGES
EDGES
CONNECT
PAIRS
OF
NODES
OR
POSSIBLY
CONNECT
A
NODE
TO
ITSELF
EDGES
CAN
HAVE
A
DIRECTION
ASSOCIATED
WITH
THEM
THE
GRAPHS
WE
USE
HERE
ARE
ALL
DIRECTED
GRAPHS
WHICH
ARE
GRAPHS
THAT
HAVE
THEIR
EDGES
LEAVING
ONE
NODE
AND
ENTERING
ANOTHER
IT
IS
NOT
CLEAR
WHETHER
WE
SHOULD
SAY
THE
WHEELS
MOVE
THE
CHASSIS
OR
THE
CHASSIS
MOVES
THE
WHEELS
FROM
A
GRAPHICS
PERSPECTIVE
THE
LATTER
VIEW
IS
PROBABLY
MORE
USEFUL
FIGURE
TREE
STRUCTURE
FOR
AN
AUTOMOBILE
THE
MOST
IMPORTANT
TYPE
OF
GRAPH
WE
USE
IS
A
TREE
A
CONNECTED
TREE
IS
A
DIRECTED
GRAPH
WITHOUT
CLOSED
PATHS
OR
LOOPS
IN
ADDITION
EACH
NODE
BUT
ONE
THE
ROOT
NODE
HAS
ONE
EDGE
ENTERING
IT
THUS
EVERY
NODE
EXCEPT
THE
ROOT
HAS
A
PARENT
NODE
THE
NODE
FROM
WHICH
AN
EDGE
ENTERS
AND
CAN
HAVE
ONE
OR
MORE
CHILD
NODES
NODES
TO
WHICH
EDGES
ARE
CONNECTED
A
NODE
WITHOUT
CHILDREN
IS
CALLED
A
TERMINAL
NODE
OR
LEAF
FIGURE
SHOWS
A
TREE
THAT
REPRESENTS
THE
RELATIONSHIPS
IN
OUR
CAR
MODEL
THE
CHASSIS
IS
THE
ROOT
NODE
AND
ALL
FOUR
WHEELS
ARE
ITS
CHILDREN
ALTHOUGH
THE
MATHEMATICAL
GRAPH
IS
A
COLLECTION
OF
SET
ELEMENTS
IN
PRACTICE
BOTH
THE
EDGES
AND
NODES
CAN
CONTAIN
ADDITIONAL
INFORMATION
FOR
OUR
CAR
EXAMPLE
EACH
NODE
CAN
CONTAIN
INFORMATION
DEFINING
THE
GEOMETRIC
OBJECTS
ASSOCIATED
WITH
IT
THE
INFORMATION
ABOUT
THE
LOCATION
AND
ORIENTATION
OF
THE
WHEELS
CAN
BE
STORED
EITHER
IN
THEIR
NODES
OR
IN
THE
EDGES
CONNECTING
THEM
WITH
THEIR
PARENT
IN
MOST
CARS
THE
FOUR
WHEELS
ARE
IDENTICAL
SO
STORING
THE
SAME
INFORMATION
ON
HOW
TO
DRAW
EACH
ONE
AT
FOUR
NODES
IS
INEFFICIENT
WE
CAN
USE
THE
IDEAS
BEHIND
THE
INSTANCE
TRANSFORMATION
TO
ALLOW
US
TO
USE
A
SINGLE
PROTOTYPE
WHEEL
IN
OUR
MODEL
IF
WE
DO
SO
WE
CAN
REPLACE
THE
TREE
STRUCTURE
BY
THE
DIRECTED
ACYCLIC
GRAPH
DAG
IN
FIGURE
IN
A
DAG
ALTHOUGH
THERE
ARE
LOOPS
WE
CANNOT
FOLLOW
DIRECTED
EDGES
AROUND
ANY
LOOP
THUS
IF
WE
FOLLOW
ANY
PATH
OF
DIRECTED
EDGES
FROM
A
NODE
THE
PATH
TERMINATES
AT
ANOTHER
NODE
AND
IN
PRACTICE
WORKING
WITH
DAGS
IS
NO
MORE
DIFFICULT
THAN
WORKING
WITH
TREES
FOR
OUR
CAR
WE
CAN
STORE
THE
INFORMATION
THAT
POSITIONS
EACH
INSTANCE
OF
THE
SINGLE
PROTOTYPE
WHEEL
IN
THE
CHASSIS
NODE
IN
THE
WHEEL
NODE
OR
WITH
THE
EDGES
BOTH
FORMS
TREES
AND
DAGS
ARE
HIERARCHICAL
METHODS
OF
EXPRESSING
THE
RE
LATIONSHIPS
IN
THE
PHYSICAL
MODEL
IN
EACH
FORM
VARIOUS
ELEMENTS
OF
A
MODEL
CAN
BE
RELATED
TO
OTHER
PARTS
THEIR
PARENTS
AND
THEIR
CHILDREN
WE
WILL
EXPLORE
HOW
TO
EX
PRESS
THESE
HIERARCHIES
IN
A
GRAPHICS
PROGRAM
FIGURE
DIRECTED
ACYCLIC
GRAPH
DAG
MODEL
OF
AN
AUTO
MOBILE
A
ROBOT
ARM
ROBOTICS
PROVIDES
MANY
OPPORTUNITIES
FOR
DEVELOPING
HIERARCHICAL
MODELS
CONSIDER
THE
SIMPLE
ROBOT
ARM
ILLUSTRATED
IN
FIGURE
A
WE
CAN
MODEL
IT
WITH
THREE
SIMPLE
OBJECTS
OR
SYMBOLS
PERHAPS
USING
ONLY
TWO
PARALLELEPIPEDS
AND
A
CYLINDER
EACH
OF
THE
SYMBOLS
CAN
BE
BUILT
UP
FROM
OUR
BASIC
PRIMITIVES
Y
Z
A
Y
X
X
X
Z
Z
B
FIGURE
ROBOT
ARM
A
TOTAL
MODEL
B
COMPONENTS
FIGURE
MOVEMENT
OF
ROBOT
COMPONENTS
AND
FRAMES
THE
ROBOT
ARM
CONSISTS
OF
THE
THREE
PARTS
SHOWN
IN
FIGURE
B
THE
MECHANISM
HAS
THREE
DEGREES
OF
FREEDOM
TWO
OF
WHICH
CAN
BE
DESCRIBED
BY
JOINT
ANGLES
BETWEEN
COMPONENTS
AND
THE
THIRD
BY
THE
ANGLE
THE
BASE
MAKES
WITH
RESPECT
TO
A
FIXED
POINT
ON
THE
GROUND
IN
OUR
MODEL
EACH
JOINT
ANGLE
DETERMINES
HOW
TO
POSITION
A
COMPONENT
WITH
RESPECT
TO
THE
COMPONENT
TO
WHICH
IT
IS
ATTACHED
OR
IN
THE
CASE
OF
THE
BASE
THE
JOINT
ANGLE
POSITIONS
IT
RELATIVE
TO
THE
SURROUNDING
ENVIRONMENT
EACH
JOINT
ANGLE
IS
MEASURED
IN
EACH
COMPONENT
OWN
FRAME
WE
CAN
ROTATE
THE
BASE
ABOUT
ITS
VERTICAL
AXIS
BY
AN
ANGLE
Θ
THIS
ANGLE
IS
MEASURED
FROM
THE
X
AXIS
TO
SOME
FIXED
POINT
ON
THE
BOTTOM
OF
THE
BASE
THE
LOWER
ARM
OF
THE
ROBOT
IS
ATTACHED
TO
THE
BASE
BY
A
JOINT
THAT
ALLOWS
THE
ARM
TO
ROTATE
IN
THE
PLANE
Z
IN
THE
ARM
FRAME
THIS
ROTATION
IS
SPECIFIED
BY
AN
ANGLE
Φ
THAT
IS
MEASURED
FROM
THE
X
AXIS
TO
THE
ARM
THE
UPPER
ARM
IS
ATTACHED
TO
THE
LOWER
ARM
BY
A
SIMILAR
JOINT
AND
IT
CAN
ROTATE
BY
AN
ANGLE
Ψ
MEASURED
LIKE
THAT
FOR
THE
LOWER
ARM
IN
ITS
OWN
FRAME
AS
THE
ANGLES
VARY
WE
CAN
THINK
OF
THE
FRAMES
OF
THE
UPPER
AND
LOWER
ARMS
AS
MOVING
RELATIVE
TO
THE
BASE
BY
CONTROLLING
THE
THREE
ANGLES
WE
CAN
POSITION
THE
TIP
OF
THE
UPPER
ARM
IN
THREE
DIMENSIONS
SUPPOSE
THAT
WE
WISH
TO
WRITE
A
PROGRAM
TO
RENDER
OUR
SIMPLE
ROBOT
MODEL
RATHER
THAN
SPECIFYING
EACH
PART
OF
THE
ROBOT
AND
ITS
MOTION
INDEPENDENTLY
WE
TAKE
AN
INCREMENTAL
APPROACH
THE
BASE
OF
THE
ROBOT
CAN
ROTATE
ABOUT
THE
Y
AXIS
IN
ITS
FRAME
BY
THE
ANGLE
Θ
THUS
WE
CAN
DESCRIBE
THE
MOTION
OF
ANY
POINT
P
ON
THE
BASE
BY
APPLYING
A
ROTATION
MATRIX
RY
Θ
TO
IT
THE
LOWER
ARM
IS
ROTATED
ABOUT
THE
Z
AXIS
IN
ITS
OWN
FRAME
BUT
THIS
FRAME
MUST
BE
SHIFTED
TO
THE
TOP
OF
THE
BASE
BY
A
TRANSLATION
MATRIX
T
WHERE
IS
THE
HEIGHT
ABOVE
THE
BASE
TO
THE
POINT
WHERE
THE
JOINT
BETWEEN
THE
BASE
AND
THE
LOWER
ARM
IS
LOCATED
HOWEVER
IF
THE
BASE
HAS
ROTATED
THEN
WE
MUST
ALSO
ROTATE
THE
LOWER
ARM
USING
RY
Θ
WE
CAN
ACCOMPLISH
THE
POSITIONING
OF
THE
LOWER
ARM
BY
APPLYING
RY
Θ
T
RZ
Φ
TO
THE
ARM
VERTICES
WE
CAN
INTERPRET
THE
MATRIX
RY
Θ
T
AS
THE
MATRIX
THAT
POSITIONS
THE
LOWER
ARM
RELATIVE
TO
THE
OBJECT
OR
WORLD
FRAME
AND
RZ
Φ
AS
THE
MATRIX
THAT
POSITIONS
THE
LOWER
ARM
RELATIVE
TO
THE
BASE
EQUIVALENTLY
WE
CAN
INTERPRET
THESE
MATRICES
AS
POSITIONING
THE
FRAMES
OF
THE
LOWER
ARM
AND
BASE
RELATIVE
TO
SOME
WORLD
FRAME
AS
SHOWN
IN
FIGURE
WHEN
WE
APPLY
SIMILAR
REASONING
TO
THE
UPPER
ARM
WE
FIND
THAT
THIS
ARM
HAS
TO
BE
TRANSLATED
BY
A
MATRIX
T
RELATIVE
TO
THE
LOWER
ARM
AND
THEN
ROTATED
BY
RZ
Ψ
THE
MATRIX
THAT
CONTROLS
THE
UPPER
ARM
IS
THUS
RY
Θ
T
RZ
Φ
T
RZ
Ψ
THE
FORM
OF
THE
DISPLAY
FUNCTION
FOR
AN
OPENGL
PROGRAM
TO
DISPLAY
THE
ROBOT
AS
A
FUNCTION
OF
THE
JOINT
ANGLES
USING
THE
ARRAY
THETA
FOR
Θ
Φ
AND
Ψ
SHOWS
HOW
WE
CAN
ALTER
THE
MODEL
VIEW
MATRIX
INCREMENTALLY
TO
DISPLAY
THE
VARIOUS
PARTS
OF
THE
MODEL
EFFICIENTLY
VOID
DISPLAY
GLCLEAR
ROTATEY
THETA
BASE
TRANSLATE
ROTATEZ
THETA
TRANSLATE
ROTATEZ
THETA
GLUTSWAPBUFFERS
NOTE
THAT
WE
HAVE
DESCRIBED
THE
POSITIONING
OF
THE
ARM
INDEPENDENTLY
OF
THE
DETAILS
OF
THE
INDIVIDUAL
PARTS
AS
LONG
AS
THE
POSITIONS
OF
THE
JOINTS
DO
NOT
CHANGE
WE
CAN
ALTER
THE
FORM
OF
THE
ROBOT
BY
CHANGING
ONLY
THE
FUNCTIONS
THAT
DRAW
THE
THREE
PARTS
THIS
SEPARATION
MAKES
IT
POSSIBLE
TO
WRITE
SEPARATE
FUNCTIONS
TO
DESCRIBE
THE
COMPONENTS
AND
TO
ANIMATE
THE
ROBOT
FIGURE
SHOWS
THE
RELATIONSHIPS
AMONG
THE
PARTS
OF
THE
ROBOT
ARM
AS
A
TREE
THE
COMPLETE
PROGRAM
IMPLEMENTS
THE
STRUCTURE
AND
USES
THE
MOUSE
TO
ANIMATE
THE
ROBOT
THROUGH
A
MENU
IT
USES
THREE
PARALLELEPIPEDS
FOR
THE
BASE
AND
ARMS
IF
WE
USE
OUR
CUBE
CODE
FROM
CHAPTER
WITH
AN
INSTANCE
TRANSFORMATION
FOR
THE
PARTS
THEN
THE
ROBOT
IS
RENDERED
BY
THE
CODE
INSTANCE
VOID
BASE
FIGURE
TREE
STRUCTURE
FOR
THE
ROBOT
ARM
IN
FIGURE
INSTANCE
TRANSLATE
SCALE
INSTANCE
GLDRAWARRAYS
N
VOID
INSTANCE
TRANSLATE
SCALE
INSTANCE
GLDRAWARRAYS
N
VOID
INSTANCE
TRANSLATE
SCALE
INSTANCE
GLDRAWARRAYS
N
FIGURE
NODE
REPRESENTATION
IN
EACH
CASE
THE
INSTANCE
TRANSFORMATION
MUST
SCALE
THE
CUBE
TO
THE
DESIRED
SIZE
AND
BECAUSE
THE
CUBE
VERTICES
ARE
CENTERED
AT
THE
ORIGIN
EACH
CUBE
MUST
BE
RAISED
TO
HAVE
ITS
BOTTOM
IN
THE
PLACE
Y
THE
PRODUCT
OF
THE
MODEL
VIEW
AND
INSTANCE
TRANSFORMATIONS
IS
SENT
TO
THE
VERTEX
SHADER
FOLLOWED
BY
THE
VERTICES
AND
COLORS
IF
DESIRED
FOR
EACH
PART
OF
THE
ROBOT
BECAUSE
THE
MODEL
VIEW
MATRIX
IS
DIFFERENT
FOR
EACH
PART
OF
THE
ROBOT
WE
RENDER
EACH
PART
ONCE
ITS
DATA
HAVE
BEEN
SENT
TO
THE
GPU
NOTE
THAT
IN
THIS
EXAMPLE
BECAUSE
WE
ARE
USING
CUBES
FOR
ALL
THE
PARTS
WE
NEED
TO
SEND
THE
POINTS
TO
THE
GPU
ONLY
ONCE
HOWEVER
IF
THE
PARTS
WERE
USING
DIFFERENT
SYMBOLS
THEN
WE
WOULD
NEED
TO
USE
GLDRAWARRAYS
IN
EACH
DRAWING
FUNCTION
RETURNING
TO
THE
TREE
IN
FIGURE
WE
CAN
LOOK
AT
IT
AS
A
TREE
DATA
STRUCTURE
OF
NODES
AND
EDGES
AS
A
GRAPH
IF
WE
STORE
ALL
THE
NECESSARY
INFORMATION
IN
THE
NODES
RATHER
THAN
IN
THE
EDGES
THEN
EACH
NODE
FIGURE
MUST
STORE
AT
LEAST
THREE
ITEMS
A
POINTER
TO
A
FUNCTION
THAT
DRAWS
THE
OBJECT
REPRESENTED
BY
THE
NODE
A
HOMOGENEOUS
COORDINATE
MATRIX
THAT
POSITIONS
SCALES
AND
ORIENTS
THIS
NODE
AND
ITS
CHILDREN
RELATIVE
TO
THE
NODE
PARENT
POINTERS
TO
CHILDREN
OF
THE
NODE
CERTAINLY
WE
CAN
INCLUDE
OTHER
INFORMATION
IN
A
NODE
SUCH
AS
A
SET
OF
ATTRIBUTES
COLOR
TEXTURE
MATERIAL
PROPERTIES
THAT
APPLIES
TO
THE
NODE
DRAWING
AN
OBJECT
DESCRIBED
BY
SUCH
A
TREE
REQUIRES
PERFORMING
A
TREE
TRAVERSAL
THAT
IS
WE
MUST
VISIT
EVERY
NODE
AT
EACH
NODE
WE
MUST
COMPUTE
THE
MATRIX
THAT
APPLIES
TO
THE
PRIMITIVES
POINTED
TO
BY
THE
NODE
AND
MUST
DISPLAY
THESE
PRIMITIVES
OUR
OPENGL
PROGRAM
SHOWS
AN
INCREMENTAL
APPROACH
TO
THIS
TRAVERSAL
THIS
EXAMPLE
IS
A
SIMPLE
ONE
THERE
IS
ONLY
A
SINGLE
CHILD
FOR
EACH
OF
THE
PARENT
NODES
IN
THE
TREE
THE
NEXT
EXAMPLE
SHOWS
HOW
WE
HANDLE
MORE
COMPLEX
MODELS
FIGURE
A
HUMANOID
FIGURE
TREES
AND
TRAVERSAL
FIGURE
SHOWS
A
BOXLIKE
REPRESENTATION
OF
A
HUMANOID
THAT
MIGHT
BE
USED
FOR
A
ROBOT
MODEL
OR
IN
A
VIRTUAL
REALITY
APPLICATION
IF
WE
TAKE
THE
TORSO
AS
THE
ROOT
ELEMENT
WE
CAN
REPRESENT
THIS
FIGURE
WITH
THE
TREE
SHOWN
IN
FIGURE
ONCE
WE
HAVE
POSITIONED
THE
TORSO
THE
POSITION
AND
ORIENTATION
OF
THE
OTHER
PARTS
OF
THE
MODEL
ARE
DETERMINED
BY
THE
SET
OF
JOINT
ANGLES
WE
CAN
ANIMATE
THE
FIGURE
BY
DEFINING
THE
MOTION
OF
ITS
JOINTS
IN
A
BASIC
MODEL
THE
KNEE
AND
ELBOW
JOINTS
MIGHT
EACH
HAVE
ONLY
FIGURE
TREE
REPRESENTATION
OF
FIGURE
A
SINGLE
DEGREE
OF
FREEDOM
LIKE
THE
ROBOT
ARM
WHEREAS
THE
JOINT
AT
THE
NECK
MIGHT
HAVE
TWO
OR
THREE
DEGREES
OF
FREEDOM
LET
ASSUME
THAT
WE
HAVE
FUNCTIONS
SUCH
AS
HEAD
AND
THAT
DRAW
THE
INDIVIDUAL
PARTS
SYMBOLS
IN
THEIR
OWN
FRAMES
WE
CAN
NOW
BUILD
A
SET
OF
NODES
FOR
OUR
TREE
BY
DEFINING
MATRICES
THAT
POSITION
EACH
PART
RELATIVE
TO
ITS
PARENT
EXACTLY
AS
WE
DID
FOR
THE
ROBOT
ARM
IF
WE
ASSUME
THAT
EACH
BODY
PART
HAS
BEEN
DEFINED
AT
THE
DESIRED
SIZE
EACH
OF
THESE
MATRICES
IS
THE
CONCATENATION
OF
A
TRANSLATION
MATRIX
WITH
A
ROTATION
MATRIX
WE
CAN
SHOW
THESE
MATRICES
AS
WE
DO
IN
FIGURE
BY
USING
THE
MATRICES
TO
LABEL
THE
EDGES
OF
THE
TREE
REMEMBER
THAT
EACH
MATRIX
REPRESENTS
THE
INCREMENTAL
CHANGE
WHEN
WE
GO
FROM
THE
PARENT
TO
THE
CHILD
THE
INTERESTING
PART
OF
THIS
EXAMPLE
IS
HOW
WE
DO
THE
TRAVERSAL
OF
THE
TREE
TO
DRAW
THE
FIGURE
IN
PRINCIPLE
WE
COULD
USE
ANY
TREE
TRAVERSAL
ALGORITHM
SUCH
AS
A
DEPTH
FIRST
OR
BREADTH
FIRST
SEARCH
ALTHOUGH
IN
MANY
APPLICATIONS
IT
IS
INSIGNIFICANT
WHICH
TRAVERSAL
ALGORITHM
IS
USED
WE
WILL
SEE
THAT
THERE
ARE
GOOD
REASONS
FOR
ALWAYS
USING
THE
SAME
ALGORITHM
FOR
TRAVERSING
OUR
GRAPHS
WE
WILL
ALWAYS
TRAVERSE
OUR
TREES
LEFT
TO
RIGHT
DEPTH
FIRST
THAT
IS
WE
START
WITH
THE
LEFT
BRANCH
FOLLOW
IT
TO
THE
LEFT
AS
DEEP
MH
MLLA
MRLA
MLLL
MRLL
FIGURE
TREE
WITH
MATRICES
AS
WE
CAN
GO
THEN
GO
BACK
UP
TO
THE
FIRST
RIGHT
BRANCH
AND
PROCEED
RECURSIVELY
THIS
ORDER
OF
TRAVERSAL
IS
CALLED
A
PRE
ORDER
TRAVERSAL
WE
CAN
WRITE
A
TREE
TRAVERSAL
FUNCTION
IN
ONE
OF
TWO
WAYS
WE
CAN
DO
THE
TRAVERSAL
EXPLICITLY
IN
THE
APPLICATION
CODE
USING
STACKS
TO
STORE
THE
REQUIRED
MATRICES
AND
ATTRIBUTES
AS
WE
MOVE
THROUGH
THE
TREE
WE
CAN
ALSO
DO
THE
TRAVERSAL
RECURSIVELY
IN
THIS
SECOND
APPROACH
THE
CODE
IS
SIMPLER
BECAUSE
THE
STORAGE
OF
MATRICES
AND
ATTRIBUTES
IS
DONE
IMPLICITLY
WE
DEVELOP
BOTH
APPROACHES
BECAUSE
BOTH
ARE
USEFUL
AND
BECAUSE
THEIR
DEVELOPMENT
YIELDS
FURTHER
INSIGHTS
INTO
HOW
WE
CAN
BUILD
GRAPHICS
SYSTEMS
A
STACK
BASED
TRAVERSAL
CONSIDER
THE
DRAWING
OF
THE
FIGURE
BY
A
FUNCTION
FIGURE
THIS
FUNCTION
MIGHT
BE
CALLED
FROM
THE
DISPLAY
CALLBACK
OR
FROM
A
MOUSE
CALLBACK
IN
AN
ANIMATION
THAT
USES
THE
MOUSE
TO
CONTROL
THE
JOINT
ANGLES
THE
MODEL
VIEW
MATRIX
M
IN
EFFECT
WHEN
THIS
FUNCTION
IS
INVOKED
DETERMINES
THE
POSITION
OF
THE
FIGURE
RELATIVE
TO
THE
REST
OF
THE
SCENE
AND
TO
THE
CAMERA
THE
FIRST
NODE
THAT
WE
ENCOUNTER
RESULTS
IN
THE
TORSO
BEING
DRAWN
WITH
M
APPLIED
TO
ALL
THE
TORSO
PRIMITIVES
WE
THEN
TRACE
THE
LEFTMOST
BRANCH
OF
THE
TREE
TO
THE
NODE
FOR
THE
HEAD
THERE
WE
INVOKE
THE
FUNCTION
HEAD
WITH
THE
MODEL
VIEW
MATRIX
UPDATED
TO
MMH
NEXT
WE
BACK
UP
TO
THE
TORSO
NODE
THEN
GO
DOWN
THE
SUBTREE
DEFINING
THE
LEFT
ARM
THIS
PART
LOOKS
JUST
LIKE
THE
CODE
FOR
THE
ROBOT
ARM
WE
DRAW
THE
LEFT
UPPER
ARM
WITH
THE
MATRIX
MMLUA
AND
THE
LEFT
LOWER
ARM
WITH
MATRIX
MMLUAMLLA
THEN
WE
MOVE
ON
TO
THE
RIGHT
ARM
LEFT
LEG
AND
RIGHT
LEG
EACH
TIME
WE
SWITCH
LIMBS
WE
MUST
BACK
UP
TO
THE
ROOT
AND
RECOVER
M
IT
IS
PROBABLY
EASIEST
TO
THINK
IN
TERMS
OF
THE
CURRENT
TRANSFORMATION
MATRIX
OF
CHAPTER
THE
MODEL
VIEW
MATRIX
C
THAT
IS
APPLIED
TO
THE
PRIMITIVES
DEFINED
AT
A
NODE
THE
MATRIX
C
STARTS
OUT
AS
M
IS
UPDATED
TO
MMH
FOR
THE
HEAD
AND
LATER
TO
MMLULMLLL
AND
SO
ON
THE
APPLICATION
PROGRAM
MUST
MANIPULATE
C
BEFORE
EACH
CALL
TO
A
FUNCTION
DEFINING
A
PART
OF
THE
FIGURE
NOTE
THAT
AS
WE
BACK
UP
THE
TREE
TO
START
THE
RIGHT
UPPER
ARM
WE
NEED
M
AGAIN
RATHER
THAN
REFORMING
IT
OR
ANY
OTHER
MATRIX
WE
MIGHT
NEED
TO
REUSE
IN
A
MORE
COMPLEX
MODEL
WE
CAN
STORE
PUSH
IT
ON
A
STACK
AND
RECOVER
IT
WITH
POP
HERE
IS
A
SIMPLE
STACK
CLASS
WITH
A
CAPACITY
OF
MATRICES
CLASS
PUBLIC
STATIC
CONST
INT
MAX
INDEX
VOID
PUSH
CONST
MATRIX
POP
PRIVATE
MATRICES
MAX
INT
INDEX
WE
CAN
IGNORE
THE
PROJECTION
MATRIX
FOR
NOW
VOID
PUSH
CONST
MATRIX
MATRICES
INDEX
MATRIX
INDEX
POP
INDEX
RETURN
MATRICES
INDEX
OUR
TRAVERSAL
CODE
WILL
HAVE
TRANSLATIONS
AND
ROTATIONS
INTERMIXED
WITH
PUSHES
AND
POPS
OF
THE
MODEL
VIEW
MATRIX
CONSIDER
THE
CODE
WITHOUT
PARAMETER
VALUES
FOR
THE
BEGINNING
OF
THE
FUNCTION
FIGURE
MVSTACK
FIGURE
MVSTACK
PUSH
TORSO
TRANSLATE
ROTATE
HEAD
MVSTACK
POP
MVSTACK
PUSH
TRANSLATE
ROTATE
MVSTACK
POP
MVSTACK
PUSH
TRANSLATE
ROTATE
MVSTACK
POP
MVSTACK
PUSH
TRANSLATE
ROTATE
MVSTACK
POP
MVSTACK
PUSH
THE
FIRST
PUSH
DUPLICATES
THE
CURRENT
MODEL
VIEW
MATRIX
PUTTING
THE
COPY
ON
THE
TOP
OF
THE
MODEL
VIEW
MATRIX
STACK
THIS
METHOD
OF
PUSHING
ALLOWS
US
TO
WORK
IMMEDI
ATELY
WITH
THE
OTHER
TRANSFORMATIONS
THAT
ALTER
THE
MODEL
VIEW
MATRIX
KNOWING
THAT
WE
HAVE
PRESERVED
A
COPY
ON
THE
STACK
THE
FOLLOWING
CALLS
TO
TRANSLATE
AND
RO
TATE
DETERMINE
MH
AND
CONCATENATE
IT
WITH
THE
INITIAL
MODEL
VIEW
MATRIX
WE
CAN
THEN
GENERATE
THE
PRIMITIVES
FOR
THE
HEAD
THE
SUBSEQUENT
POP
RECOVERS
THE
ORIGINAL
MODEL
VIEW
MATRIX
NOTE
THAT
WE
MUST
DO
ANOTHER
PUSH
TO
LEAVE
A
COPY
OF
THE
ORIGINAL
MODEL
VIEW
MATRIX
THAT
WE
CAN
RECOVER
WHEN
WE
COME
BACK
TO
DRAW
THE
RIGHT
LEG
THE
FUNCTIONS
FOR
THE
INDIVIDUAL
PARTS
ARE
SIMILAR
TO
THE
PREVIOUS
EXAMPLE
HERE
IS
THE
TORSO
FUNCTION
VOID
TORSO
MVSTACK
PUSH
INSTANCE
TRANSLATE
SCALE
INSTANCE
COLORCUBE
GLDRAWARRAYS
N
MVSTACK
POP
NOTE
THE
USE
OF
A
PUSH
AT
THE
BEGINNING
AND
A
POP
AT
THE
END
OF
THE
FUNCTION
THESE
SERVE
TO
ISOLATE
THE
CODE
AND
PROTECT
OTHER
PARTS
OF
THE
PROGRAM
FROM
BEING
AFFECTED
BY
STATE
CHANGES
IN
THIS
FUNCTION
YOU
SHOULD
BE
ABLE
TO
COMPLETE
THIS
FUNCTION
BY
CONTINUING
IN
A
SIMILAR
MANNER
APPENDIX
A
CONTAINS
A
COMPLETE
PROGRAM
THAT
IMPLEMENTS
THIS
FIGURE
WITH
A
MENU
THAT
WILL
ALLOW
YOU
TO
CHANGE
THE
VARIOUS
JOINT
ANGLES
THE
INDIVIDUAL
PARTS
ARE
IMPLEMENTED
USING
PARALLELEPIPEDS
AND
THE
ENTIRE
MODEL
CAN
BE
SHADED
AS
WE
DISCUSSED
IN
CHAPTER
WE
HAVE
NOT
CONSIDERED
HOW
ATTRIBUTES
SUCH
AS
COLOR
AND
MATERIAL
PROPERTIES
ARE
HANDLED
BY
OUR
TRAVERSAL
OF
A
HIERARCHICAL
MODEL
ATTRIBUTES
ARE
STATE
VARIABLES
ONCE
SET
THEY
REMAIN
IN
PLACE
UNTIL
CHANGED
AGAIN
HENCE
WE
MUST
BE
CAREFUL
AS
WE
TRAVERSE
OUR
TREE
FOR
EXAMPLE
SUPPOSE
THAT
WITHIN
THE
CODE
FOR
TORSO
WE
SET
THE
COLOR
TO
RED
AND
THEN
WITHIN
THE
CODE
FOR
HEAD
SET
THE
COLOR
TO
BLUE
IF
THERE
ARE
NO
OTHER
COLOR
CHANGES
THE
COLOR
WILL
STILL
BE
BLUE
AS
WE
TRAVERSE
THE
REST
OF
THE
TREE
AND
MAY
REMAIN
BLUE
AFTER
WE
LEAVE
THE
CODE
FOR
FIGURE
HERE
IS
AN
EXAMPLE
IN
WHICH
THE
PARTICULAR
TRAVERSAL
ALGORITHM
CAN
MAKE
A
DIFFERENCE
BECAUSE
THE
CURRENT
STATE
CAN
BE
AFFECTED
DIFFERENTLY
DEPENDING
ON
THE
ORDER
IN
WHICH
THE
NODES
ARE
VISITED
THIS
SITUATION
MAY
BE
DISCONCERTING
BUT
THERE
IS
A
SOLUTION
WE
CAN
CREATE
OTHER
STACKS
THAT
ALLOW
US
TO
DEAL
WITH
ATTRIBUTES
IN
A
MANNER
SIMILAR
TO
OUR
USE
OF
THE
MODEL
VIEW
MATRIX
IF
WE
PUSH
THE
ATTRIBUTES
ON
THE
ATTRIBUTE
STACK
ON
ENTRANCE
TO
THE
FUNCTION
FIGURE
AND
POP
ON
EXIT
WE
HAVE
RESTORED
THE
ATTRIBUTES
TO
THEIR
ORIGINAL
STATE
MOREOVER
WE
CAN
USE
ADDITIONAL
PUSHES
AND
POPS
WITHIN
FIGURE
TO
CONTROL
HOW
ATTRIBUTES
ARE
HANDLED
IN
GREATER
DETAIL
IN
A
MORE
COMPLEX
MODEL
WE
CAN
APPLY
THESE
IDEAS
RECURSIVELY
IF
FOR
EXAMPLE
WE
WANT
TO
USE
A
MORE
DETAILED
MODEL
OF
THE
HEAD
ONE
INCORPORATING
EYES
EARS
A
NOSE
AND
A
MOUTH
THEN
WE
COULD
MODEL
THESE
PARTS
SEPARATELY
THE
HEAD
WOULD
THEN
ITSELF
BE
MODELED
HIERARCHICALLY
AND
ITS
CODE
WOULD
INCLUDE
THE
PUSHING
AND
POPPING
OF
MATRICES
AND
ATTRIBUTES
ALTHOUGH
WE
HAVE
DISCUSSED
ONLY
TREES
IF
TWO
OR
MORE
NODES
CALL
THE
SAME
FUNCTION
WE
REALLY
HAVE
A
DAG
BUT
DAGS
PRESENT
NO
ADDITIONAL
DIFFICULTIES
COLOR
PLATES
AND
SHOW
HIERARCHICAL
MODELS
OF
ROBOTS
AND
FIGURES
USED
IN
SIMULATIONS
THESE
OBJECTS
WERE
CREATED
WITH
HIGH
LEVEL
INTERACTIVE
SOFTWARE
THAT
RELIES
ON
OUR
ABILITY
TO
TRAVERSE
HIERARCHICAL
STRUCTURES
TO
RENDER
THE
MODELS
THE
APPROACH
THAT
WE
USED
TO
DESCRIBE
HIERARCHICAL
OBJECTS
IS
WORKABLE
BUT
HAS
LIMITATIONS
THE
CODE
IS
EXPLICIT
AND
RELIES
ON
THE
APPLICATION
PROGRAMMER
TO
PUSH
AND
POP
THE
REQUIRED
MATRICES
AND
ATTRIBUTES
IN
REALITY
WE
IMPLEMENTED
A
STACK
BASED
REPRESENTATION
OF
A
TREE
THE
CODE
WAS
HARDWIRED
FOR
THE
PARTICULAR
EXAMPLE
AND
THUS
WOULD
BE
DIFFICULT
TO
EXTEND
OR
USE
DYNAMICALLY
THE
CODE
ALSO
DOES
NOT
MAKE
A
CLEAR
DISTINCTION
BETWEEN
BUILDING
A
MODEL
AND
RENDERING
IT
ALTHOUGH
MANY
APPLICATION
PROGRAMMERS
WRITE
CODE
IN
THIS
FORM
WE
PREFER
TO
USE
IT
PRIMARILY
TO
ILLUSTRATE
THE
FLOW
OF
AN
OPENGL
PROGRAM
THAT
IMPLEMENTS
TREE
HIERARCHIES
WE
NOW
TURN
TO
A
MORE
GENERAL
AND
POWERFUL
APPROACH
TO
WORKING
WITH
TREE
STRUCTURED
HIERARCHIES
USE
OF
TREE
DATA
STRUCTURES
OUR
SECOND
APPROACH
IS
TO
USE
A
STANDARD
TREE
DATA
STRUCTURE
TO
REPRESENT
OUR
HIERAR
CHY
AND
THEN
TO
RENDER
IT
WITH
A
TRAVERSAL
ALGORITHM
THAT
IS
INDEPENDENT
OF
THE
MODEL
WE
USE
A
LEFT
CHILD
RIGHT
SIBLING
STRUCTURE
CONSIDER
THE
ALTERNATE
REPRESENTATION
OF
A
TREE
IN
FIGURE
IT
IS
ARRANGED
SUCH
THAT
ALL
THE
ELEMENTS
AT
THE
SAME
LEVEL
ARE
LINKED
LEFT
TO
RIGHT
THE
CHILDREN
OF
A
GIVEN
NODE
ARE
REPRESENTED
AS
A
SECOND
LIST
ARRANGED
FROM
THE
LEFTMOST
CHILD
TO
THE
RIGHTMOST
THIS
SECOND
LIST
POINTS
DOWNWARD
IN
FIGURE
THIS
REPRESENTATION
DESCRIBES
THE
STRUCTURE
OF
OUR
HIERARCHICAL
FIGURE
BUT
THE
STRUCTURE
STILL
LACKS
THE
GRAPHICAL
INFORMATION
AT
EACH
NODE
WE
MUST
STORE
THE
INFORMATION
NECESSARY
TO
DRAW
THE
OBJECT
A
FUNC
TION
THAT
DEFINES
THE
OBJECT
AND
THE
HOMOGENEOUS
COORDINATE
MATRIX
THAT
POSITIONS
THE
OBJECT
RELATIVE
TO
ITS
PARENT
CONSIDER
THE
FOLLOWING
NODE
STRUCTURE
TYPEDEF
STRUCT
TREENODE
ROOT
A
B
SIBLINGS
MAT
M
VOID
F
STRUCT
TREENODE
SIBLING
STRUCT
TREENODE
CHILD
TREENODE
FIGURE
A
TREE
B
LEFT
CHILD
RIGHT
SIBLING
REPRESENTATION
THE
ARRAY
M
STORES
A
HOMOGENEOUS
COORDINATE
MATRIX
WHEN
WE
RENDER
THE
NODE
THIS
MATRIX
MUST
FIRST
MULTIPLY
THE
CURRENT
MODEL
VIEW
MATRIX
THEN
THE
FUNC
TION
F
WHICH
INCLUDES
THE
GRAPHICS
PRIMITIVES
IS
EXECUTED
WE
ALSO
STORE
A
POINTER
TO
THE
SIBLING
NODE
ON
THE
RIGHT
AND
A
POINTER
TO
THE
LEFTMOST
CHILD
IF
ONE
OR
THE
OTHER
DOES
NOT
EXIST
THEN
WE
STORE
THE
NULL
POINTER
NULL
FOR
OUR
FIGURE
WE
SPECIFY
NODES
CORRESPONDING
TO
THE
PARTS
OF
OUR
MODEL
TREENODE
WE
CAN
SPECIFY
THE
NODES
EITHER
IN
THE
MAIN
FUNCTION
OR
IN
MYINIT
FOR
EXAMPLE
CONSIDER
THE
ROOT
OF
THE
FIGURE
TREE
THE
TORSO
NODE
IT
CAN
BE
ORIENTED
BY
A
ROTATION
ABOUT
THE
Y
AXIS
WE
CAN
FORM
THE
REQUIRED
ROTATION
MATRIX
USING
OUR
MATRIX
FUNC
TIONS
AND
THE
FUNCTION
TO
BE
EXECUTED
AFTER
FORMING
THE
MATRIX
IS
TORSO
THE
TORSO
NODE
HAS
NO
SIBLINGS
AND
ITS
LEFTMOST
CHILD
IS
THE
HEAD
NODE
SO
THE
TORSO
NODE
IS
GIVEN
AS
FOLLOWS
M
ROTATEY
THETA
F
TORSO
SIBLING
NULL
CHILD
IF
WE
USE
A
CUBE
AS
THE
BASIS
FOR
THE
TORSO
THE
DRAWING
FUNCTION
MIGHT
LOOK
AS
FOLLOWS
VOID
TORSO
MVSTACK
PUSH
INSTANCE
TRANSLATE
SCALE
INSTANCE
COLORCUBE
GLDRAWARRAYS
N
MVSTACK
POP
THE
INSTANCE
TRANSFORMATION
FIRST
SCALES
THE
CUBE
TO
THE
DESIRED
SIZE
AND
THEN
TRANS
LATES
IT
SO
ITS
BOTTOM
LIES
IN
THE
PLANE
Y
THE
TORSO
IS
THE
ROOT
NODE
OF
THE
FIGURE
SO
ITS
CODE
IS
A
LITTLE
DIFFERENT
FROM
THE
OTHER
NODES
CONSIDER
THE
SPECIFICATION
FOR
THE
LEFT
UPPER
ARM
NODE
M
TRANSLATE
ROTATEX
THETA
F
SIBLING
CHILD
AND
THE
FUNCTION
VOID
MVSTACK
PUSH
INSTANCE
TRANSLATE
SCALE
INSTANCE
COLORCUBE
GLDRAWARRAYS
N
MVSTACK
POP
THE
UPPER
ARM
MUST
BE
TRANSLATED
RELATIVE
TO
THE
TORSO
AND
ITS
OWN
WIDTH
TO
GET
THE
CENTER
OF
ROTATION
IN
THE
CORRECT
PLACE
THE
NODE
FOR
THE
UPPER
ARM
HAS
BOTH
A
SIBLING
THE
UPPER
RIGHT
ARM
AND
A
CHILD
THE
LOWER
LEFT
ARM
TO
RENDER
THE
LEFT
UPPER
ARM
WE
FIRST
COMPUTE
AN
INSTANCE
TRANSFORMATION
THAT
GIVES
IT
THE
DESIRED
SIZE
AND
POSITIONS
SO
ITS
BOTTOM
IS
ALSO
ON
THE
PLANE
Y
THIS
INSTANCE
MATRIX
IS
CONCATENATED
WITH
THE
CURRENT
MODEL
VIEW
MATRIX
TO
POSITION
THE
UPPER
LEFT
ARM
CORRECTLY
IN
OBJECT
COORDINATES
THE
OTHER
NODES
ARE
SPECIFIED
IN
A
SIMILAR
MANNER
TRAVERSING
THE
TREE
IN
THE
SAME
ORDER
PREORDER
TRAVERSAL
AS
IN
SECTION
CAN
BE
ACCOMPLISHED
BY
THE
RECURSIVE
CODE
AS
FOLLOWS
VOID
TRAVERSE
TREENODE
ROOT
IF
ROOT
NULL
RETURN
MVSTACK
PUSH
ROOT
M
ROOT
F
IF
ROOT
CHILD
NULL
TRAVERSE
ROOT
CHILD
MVSTACK
POP
IF
ROOT
SIBLING
NULL
TRAVERSE
ROOT
SIBLING
TO
RENDER
A
NONNULL
NODE
WE
FIRST
SAVE
THE
GRAPHICS
STATE
WITH
MVPUSH
VIEW
WE
THEN
USE
THE
MATRIX
AT
THE
NODE
TO
MODIFY
THE
MODEL
VIEW
MATRIX
WE
THEN
DRAW
THE
OBJECTS
AT
THE
NODE
WITH
THE
FUNCTION
POINTED
TO
BY
F
FINALLY
WE
TRAVERSE
ALL
THE
CHILDREN
RECURSIVELY
NOTE
THAT
BECAUSE
WE
HAVE
MULTIPLIED
THE
MODEL
VIEW
MATRIX
BY
THE
LOCAL
MATRIX
WE
ARE
PASSING
THIS
ALTERED
MATRIX
TO
THE
CHILDREN
FOR
THE
SIBLINGS
HOWEVER
WE
DO
NOT
WANT
TO
USE
THIS
MATRIX
BECAUSE
EACH
HAS
ITS
OWN
LOCAL
MATRIX
HENCE
WE
MUST
RETURN
TO
THE
ORIGINAL
STATE
MVSTACK
POP
BEFORE
TRAVERSING
THE
CHILDREN
IF
WE
ARE
CHANGING
ATTRIBUTES
WITHIN
NODES
EITHER
WE
CAN
PUSH
AND
POP
ATTRIBUTES
WITHIN
THE
RENDERING
FUNCTIONS
OR
WE
CAN
PUSH
THE
ATTRIBUTES
WHEN
WE
PUSH
THE
MODEL
VIEW
MATRIX
ONE
OF
THE
NICE
ASPECTS
OF
THIS
TRAVERSAL
METHOD
IS
THAT
IT
IS
COMPLETELY
INDEPEN
DENT
OF
THE
PARTICULAR
TREE
THUS
WE
CAN
USE
A
GENERIC
DISPLAY
CALLBACK
SUCH
AS
THE
FOLLOWING
VOID
DISPLAY
VOID
GLCLEAR
TRAVERSE
GLUTSWAPBUFFERS
WE
AGAIN
ANIMATE
THE
FIGURE
BY
CONTROLLING
INDIVIDUAL
JOINT
ANGLES
WHICH
ARE
SELECTED
FROM
A
MENU
AND
ARE
INCREMENTED
AND
DECREMENTED
THROUGH
THE
MOUSE
BUTTONS
THUS
THE
DYNAMICS
OF
THE
PROGRAM
ARE
IN
THE
MOUSE
CALLBACK
WHICH
CHANGES
AN
ANGLE
RECOMPUTES
THE
APPROPRIATE
NODE
MATRIX
AND
THEN
POSTS
A
REDISPLAY
MYMOUSE
INT
BUTTON
INT
STATE
INT
X
INT
Y
IF
BUTTON
STATE
THETA
ANGLE
IF
THETA
ANGLE
THETA
ANGLE
IF
BUTTON
STATE
THETA
ANGLE
IF
THETA
ANGLE
THETA
ANGLE
MVSTACK
PUSH
SWITCH
ANGLE
CASE
M
ROTATEY
THETA
BREAK
CASE
CASE
M
TRANSLATE
ROTATEX
THETA
ROTATEY
THETA
TRANSLATE
BREAK
REST
OF
CASES
THERE
IS
ONE
MORE
FEATURE
THAT
WE
CAN
ADD
TO
SHOW
THE
FLEXIBILITY
OF
THIS
APPROACH
AS
THE
PROGRAM
EXECUTES
WE
CAN
ADD
OR
REMOVE
DYNAMIC
NODES
RATHER
THAN
STATIC
NODES
WE
CAN
CREATE
DYNAMIC
NODES
WITH
THE
FOLLOWING
CODE
TYPEDEF
TREENODE
NEW
TREENODE
NODES
ARE
DEFINED
AS
BEFORE
FOR
EXAMPLE
M
TRANSLATE
TORSO_HEIGHT
ROTATEX
THETA
F
SIBLING
CHILD
WITH
THE
TRAVERSAL
BY
TRAVERSE
FOR
OUR
FIGURE
EXAMPLE
THERE
IS
NO
PARTICULAR
ADVANTAGE
TO
THE
DYNAMIC
AP
PROACH
IN
A
MORE
GENERAL
SETTING
HOWEVER
WE
CAN
USE
THE
DYNAMIC
APPROACH
TO
CREATE
STRUCTURES
THAT
CHANGE
INTERACTIVELY
FOR
EXAMPLE
WE
CAN
USE
THIS
FORM
TO
WRITE
AN
APPLICATION
THAT
WILL
LET
US
EDIT
FIGURES
ADDING
AND
REMOVING
PARTS
AS
DESIRED
THIS
TYPE
OF
IMPLEMENTATION
IS
THE
BASIS
FOR
THE
SCENE
TREES
THAT
WE
DISCUSS
IN
SECTION
COLOR
PLATE
SHOWS
ONE
FRAME
OF
AN
ANIMATION
WITH
THE
FIGURE
USING
CYLINDERS
FOR
MOST
OF
THE
PARTS
AND
ADDING
LIGHTING
NOTE
THAT
AS
WE
HAVE
CODED
OUR
EXAMPLES
THERE
IS
A
FIXED
TRAVERSAL
ORDER
FOR
THE
GRAPH
IF
WE
HAD
APPLIED
SOME
OTHER
TRAVERSAL
ALGORITHM
WE
COULD
HAVE
PRODUCED
A
DIFFERENT
IMAGE
IF
WE
MADE
ANY
STATE
CHANGES
WITHIN
THE
GRAPH
SUCH
AS
CHANGING
TRANSFORMATIONS
OR
ATTRIBUTES
WE
CAN
AVOID
SOME
OF
THESE
POTENTIAL
PROBLEMS
IF
WE
ARE
CAREFUL
TO
ISOLATE
PARTS
OF
OUR
CODE
BY
PUSHING
AND
POPPING
ATTRIBUTES
AND
MATRICES
IN
EACH
NODE
ALTHOUGH
THERE
IS
A
PERFORMANCE
PENALTY
FOR
DOING
SO
TOO
OFTEN
ANIMATION
THE
MODELS
THAT
WE
DEVELOPED
FOR
OUR
TWO
EXAMPLES
THE
ROBOT
ARM
AND
THE
FIGURE
ARE
ARTICULATED
THE
MODELS
CONSIST
OF
RIGID
PARTS
CONNECTED
BY
JOINTS
WE
CAN
MAKE
SUCH
MODELS
CHANGE
THEIR
POSITIONS
IN
TIME
ANIMATE
THEM
BY
ALTERING
THE
VALUES
OF
A
SMALL
SET
OF
PARAMETERS
HIERARCHICAL
MODELS
ALLOW
US
TO
MODEL
THE
COMPOUND
MOTIONS
INCORPORATING
THE
PHYSICAL
RELATIONSHIPS
AMONG
THE
PARTS
OF
THE
MODEL
WHAT
WE
HAVE
NOT
DISCUSSED
IS
HOW
TO
ALTER
THE
PARAMETERS
OVER
TIME
SO
AS
TO
ACHIEVE
THE
DESIRED
MOTION
OF
THE
MANY
APPROACHES
TO
ANIMATION
A
FEW
BASIC
TECHNIQUES
ARE
OF
PARTICULAR
IMPORTANCE
WHEN
WE
WORK
WITH
ARTICULATED
FIGURES
THESE
TECHNIQUES
ARISE
BOTH
FROM
TRADITIONAL
HAND
ANIMATION
AND
FROM
ROBOTICS
IN
THE
CASE
OF
OUR
ROBOT
MODEL
CONSIDER
THE
PROBLEM
OF
MOVING
THE
TIP
OF
THE
UPPER
ARM
FROM
ONE
POSITION
TO
ANOTHER
THE
MODEL
HAS
THREE
DEGREES
OF
FREEDOM
THE
THREE
ANGLES
THAT
WE
CAN
SPECIFY
ALTHOUGH
EACH
SET
OF
ANGLES
HAS
A
UNIQUE
POSITION
FOR
THE
TIP
THE
CONVERSE
IS
NOT
TRUE
GIVEN
A
DESIRED
POSITION
OF
THE
TIP
OF
THE
ARM
THERE
MAY
BE
NO
SET
OF
ANGLES
THAT
PLACE
THE
TIP
AS
DESIRED
A
SINGLE
SET
OF
ANGLES
THAT
YIELDS
THE
SPECIFIED
POSITION
OR
MULTIPLE
SETS
OF
ANGLES
THAT
PLACE
THE
TIP
AT
THE
DESIRED
POSITION
STUDYING
KINEMATICS
INVOLVES
DESCRIBING
THE
POSITION
OF
THE
PARTS
OF
THE
MODEL
BASED
ON
ONLY
THE
JOINT
ANGLES
WE
CAN
USE
OUR
HIERARCHICAL
MODELING
METHODS
EITHER
TO
DETERMINE
POSITIONS
NUMERICALLY
OR
TO
FIND
EXPLICIT
EQUATIONS
THAT
GIVE
THE
POSITION
OF
ANY
DESIRED
SET
OF
POINTS
IN
THE
MODEL
IN
TERMS
OF
THE
JOINT
ANGLES
THUS
IF
Θ
IS
AN
ARRAY
OF
THE
JOINT
ANGLES
AND
P
IS
AN
ARRAY
WHOSE
ELEMENTS
ARE
THE
VERTICES
IN
OUR
MODEL
A
KINEMATIC
MODEL
IS
OF
THE
FORM
P
F
Θ
LIKEWISE
IF
WE
SPECIFY
THE
RATES
OF
CHANGE
OF
THE
JOINT
ANGLES
THE
JOINT
VELOCITIES
THEN
WE
CAN
OBTAIN
VELOCITIES
OF
POINTS
ON
THE
MODEL
THE
KINEMATIC
MODEL
NEGLECTS
MATTERS
SUCH
AS
THE
EFFECTS
OF
INERTIA
AND
FRICTION
WE
COULD
DERIVE
MORE
COMPLEX
DIFFERENTIAL
EQUATIONS
THAT
DESCRIBE
THE
DYNAMIC
BE
HAVIOR
OF
THE
MODEL
IN
TERMS
OF
APPLIED
FORCES
A
TOPIC
THAT
IS
STUDIED
IN
ROBOTICS
WHEREAS
BOTH
KINEMATICS
AND
DYNAMICS
ARE
WAYS
OF
DESCRIBING
THE
FORWARD
BE
HAVIOR
OF
THE
MODEL
IN
ANIMATION
WE
ARE
MORE
CONCERNED
WITH
INVERSE
KINEMATICS
AND
INVERSE
DYNAMICS
GIVEN
A
DESIRED
STATE
OF
THE
MODEL
HOW
CAN
WE
ADJUST
THE
JOINT
ANGLES
SO
AS
TO
ACHIEVE
THIS
POSITION
THERE
ARE
TWO
MAJOR
CONCERNS
FIRST
GIVEN
AN
EN
VIRONMENT
INCLUDING
THE
ROBOT
AND
OTHER
OBJECTS
WE
MUST
DETERMINE
WHETHER
THERE
EXISTS
A
SEQUENCE
OF
ANGLES
THAT
ACHIEVES
THE
DESIRED
STATE
THERE
MAY
BE
NO
SINGLE
VALUED
FUNCTION
OF
THE
FORM
Θ
F
P
FOR
A
GIVEN
P
IN
GENERAL
WE
CANNOT
TELL
IF
THERE
IS
ANY
Θ
THAT
CORRESPONDS
TO
THIS
POSITION
OR
IF
THERE
ARE
MULTIPLE
VALUES
OF
Θ
THAT
SATISFY
THE
EQUATION
EVEN
IF
WE
CAN
FIND
A
SEQUENCE
OF
JOINT
ANGLES
WE
MUST
ENSURE
THAT
AS
WE
GO
THROUGH
THIS
SEQUENCE
OUR
MODEL
DOES
NOT
HIT
ANY
OBSTACLES
OR
VIOLATE
ANY
PHYSICAL
CONSTRAINTS
ALTHOUGH
FOR
A
MODEL
AS
SIMPLE
AS
OUR
ROBOT
WE
MIGHT
BE
ABLE
TO
FIND
EQUATIONS
THAT
GIVE
THE
JOINT
ANGLES
IN
TERMS
OF
THE
POSITION
WE
CANNOT
DO
SO
IN
GENERAL
BECAUSE
THE
FORWARD
EQUATIONS
DO
NOT
HAVE
UNIQUE
INVERSES
THE
FIGURE
MODEL
WHICH
HAS
DEGREES
OF
FREEDOM
SHOULD
GIVE
YOU
AN
IDEA
OF
HOW
DIFFICULT
IT
IS
TO
SOLVE
THIS
PROBLEM
A
BASIC
APPROACH
TO
OVERCOMING
THESE
DIFFICULTIES
COMES
FROM
TRADITIONAL
HAND
ANIMATION
TECHNIQUES
IN
KEY
FRAME
ANIMATION
THE
ANIMATOR
POSITIONS
THE
OBJECTS
AT
A
SET
OF
TIMES
THE
KEY
FRAMES
IN
HAND
ANIMATION
ANIMATORS
THEN
CAN
FILL
IN
THE
REMAINING
FRAMES
A
PROCESS
CALLED
IN
BETWEENING
IN
COMPUTER
GRAPHICS
WE
CAN
AUTOMATE
IN
BETWEENING
BY
INTERPOLATING
THE
JOINT
ANGLES
BETWEEN
THE
KEY
FRAMES
OR
EQUIVALENTLY
USING
SIMPLE
APPROXIMATIONS
TO
OBTAIN
THE
REQUIRED
DYNAMIC
EQUATIONS
BETWEEN
KEY
FRAMES
USING
GPUS
MUCH
OF
THE
WORK
REQUIRED
FOR
IN
BETWEENING
CAN
NOW
BE
AUTOMATED
AS
PART
OF
THE
PIPELINE
OFTEN
USING
THE
PROGRAMMABILITY
OF
RECENT
GPUS
WE
CAN
ALSO
USE
THE
SPLINE
CURVES
THAT
WE
DEVELOP
IN
CHAPTER
TO
GIVE
SMOOTH
METHODS
OF
GOING
BETWEEN
KEY
FRAMES
ALTHOUGH
WE
CAN
DEVELOP
CODE
FOR
THE
INTERPOLATION
BOTH
A
SKILLFUL
HUMAN
ANIMATOR
AND
GOOD
INTERACTIVE
METHODS
ARE
CRUCIAL
IF
WE
ARE
TO
CHOOSE
THE
KEY
FRAMES
AND
THE
POSITIONS
OF
OBJECTS
IN
THESE
FRAMES
GRAPHICAL
OBJECTS
ALTHOUGH
WE
HAVE
INTRODUCED
MULTIPLE
GRAPHICS
PARADIGMS
OUR
DEVELOPMENT
HAS
BEEN
HEAVILY
BASED
ON
A
PIPELINE
IMPLEMENTATION
OF
THE
SYNTHETIC
CAMERA
MODEL
WE
MADE
THIS
CHOICE
BECAUSE
WE
WANT
TO
SUPPORT
INTERACTIVE
THREE
DIMENSIONAL
AP
PLICATIONS
WITH
CURRENTLY
AVAILABLE
HARDWARE
AND
SOFTWARE
CONSEQUENTLY
WE
HAVE
EMPHASIZED
A
MODE
OF
GRAPHICS
IN
WHICH
GEOMETRIC
DATA
ARE
PLACED
ON
THE
GPU
AND
RENDERED
TO
THE
SCREEN
ALMOST
IMMEDIATELY
AFTERWARD
WE
HAVE
NOT
MADE
FULL
USE
OF
THE
FACT
THAT
ONCE
DATA
ARE
ON
THE
GPU
THEY
CAN
BE
REUSED
WITHOUT
REGENERATING
THEM
IN
THE
APPLICATION
IN
ADDITION
OUR
DESIRE
TO
PRESENT
THE
BASICS
OF
IMPLEMENTATION
HAS
LED
US
TO
DE
VELOP
GRAPHICS
IN
A
MANNER
THAT
WAS
NEVER
FAR
FROM
THE
DETAILS
OF
THE
IMPLEMENTATION
FOR
ALL
ITS
BENEFITS
THIS
APPROACH
HAS
NOT
LET
US
EXPLOIT
MANY
HIGH
LEVEL
ALTERNATIVES
TO
DEVELOPING
GRAPHICAL
APPLICATIONS
NOW
WE
MOVE
TO
A
HIGHER
LEVEL
OF
ABSTRACTION
AND
INTRODUCE
TWO
MAJOR
CONCEPTS
FIRST
WE
EXPAND
OUR
NOTION
OF
OBJECTS
FROM
GEOMETRIC
OBJECTS
SUCH
AS
POLYGONS
AND
VECTORS
TO
INCLUDE
MOST
OF
THE
ELEMENTS
WITHIN
A
GRAPHICS
PROGRAM
SUCH
AS
VIEWERS
LIGHTS
AND
MATERIAL
PROPERTIES
SECOND
WE
FOCUS
ON
OBJECTS
THAT
EXIST
EVEN
AFTER
THEIR
IMAGES
HAVE
BEEN
DRAWN
AND
EVEN
IF
WE
NEVER
DISPLAY
THEM
WE
INVESTIGATE
OTHER
APPROACHES
SUCH
AS
THE
USE
OF
CLASSES
IN
C
OR
STRUCTURES
IN
C
ALTHOUGH
THE
OPENGL
API
DOES
NOT
SUPPORT
THIS
APPROACH
DIRECTLY
WE
DO
NOT
HAVE
TO
ABANDON
OPENGL
WE
STILL
USE
OPENGL
FOR
RENDERING
AND
WE
REGARD
WHAT
WE
DEVELOP
AS
A
SOFTWARE
LAYER
ON
TOP
OF
OPENGL
METHODS
ATTRIBUTES
AND
MESSAGES
OUR
PROGRAMS
MANIPULATE
DATA
THE
DATA
MAY
BE
IN
MANY
FORMS
RANGING
FROM
NUMBERS
TO
STRINGS
TO
THE
GEOMETRIC
ENTITIES
THAT
WE
BUILD
IN
OUR
APPLICATIONS
IN
TRADITIONAL
IMPERATIVE
PROGRAMMING
THE
PROGRAMMER
WRITES
CODE
TO
MANIPULATE
THE
DATA
USUALLY
THROUGH
FUNCTIONS
THE
DATA
ARE
PASSED
TO
A
FUNCTION
THROUGH
THE
FUNCTION
PARAMETERS
DATA
ARE
RETURNED
IN
A
SIMILAR
MANNER
TO
MANIPULATE
THE
DATA
SENT
TO
IT
THE
FUNCTION
MUST
BE
AWARE
OF
HOW
THOSE
DATA
ARE
ORGANIZED
CONSIDER
FOR
EXAMPLE
THE
CUBE
THAT
WE
HAVE
USED
IN
MANY
OF
OUR
PREVIOUS
EXAMPLES
WE
HAVE
SEEN
THAT
WE
CAN
MODEL
IT
IN
VARIOUS
WAYS
INCLUDING
WITH
VERTEX
POINTERS
EDGE
LISTS
AND
LISTS
OF
POLYGON
VERTICES
THE
APPLICATION
PROGRAMMER
MAY
CARE
LITTLE
ABOUT
WHICH
MODEL
IS
USED
AND
MAY
PREFER
TO
REGARD
THE
CUBE
AS
AN
ATOMIC
ENTITY
OR
AN
OBJECT
IN
ADDITION
SHE
MAY
CARE
LITTLE
ABOUT
THE
DETAILS
OF
HOW
THE
CUBE
IS
RENDERED
TO
THE
SCREEN
WHICH
SHADING
MODEL
OR
WHICH
POLYGON
FILL
ALGORITHM
IS
USED
SHE
CAN
ASSUME
THAT
THE
CUBE
KNOWS
HOW
TO
RENDER
ITSELF
AND
THAT
CONCEPTUALLY
THE
RENDERING
ALGORITHM
IS
TIED
TO
THE
OBJECT
ITSELF
IN
SOME
WAYS
OPENGL
SUPPORTS
THIS
VIEW
BY
USING
THE
STATE
OF
THE
GRAPHICS
SYSTEM
TO
CONTROL
RENDERING
FOR
EXAMPLE
THE
COLOR
OF
THE
CUBE
ITS
ORIENTATION
AND
THE
LIGHTS
THAT
ARE
APPLIED
TO
ITS
SURFACES
CAN
ALL
BE
PART
OF
THE
STATE
OF
THE
GRAPHICS
SYSTEM
AND
MAY
NOT
DEPEND
ON
HOW
THE
CUBE
IS
MODELED
FIGURE
IMPERATIVE
PROGRAMMING
PARADIGM
FIGURE
OBJECT
ORIENTED
PARADIGM
HOWEVER
IF
WE
ARE
WORKING
WITH
A
PHYSICAL
CUBE
WE
MIGHT
FIND
THIS
VIEW
A
BIT
STRANGE
THE
LOCATION
OF
A
PHYSICAL
CUBE
IS
TIED
TO
THE
PHYSICAL
OBJECT
AS
ARE
ITS
COLOR
SIZE
AND
ORIENTATION
ALTHOUGH
WE
COULD
USE
OPENGL
TO
TIE
SOME
PROPERTIES
TO
A
VIRTUAL
CUBE
THROUGH
PUSHING
AND
POPPING
VARIOUS
ATTRIBUTES
AND
MATRICES
THE
UNDERLYING
PROGRAMMING
MODEL
DOES
NOT
SUPPORT
THESE
IDEAS
WELL
FOR
EXAMPLE
A
FUNCTION
THAT
TRANSFORMS
THE
CUBE
WOULD
HAVE
TO
KNOW
EXACTLY
HOW
THE
CUBE
IS
REPRESENTED
AND
WOULD
WORK
AS
SHOWN
IN
FIGURE
THE
APPLICATION
PROGRAMMER
WOULD
WRITE
A
FUNCTION
THAT
WOULD
TAKE
AS
ITS
INPUTS
A
POINTER
TO
THE
CUBE
DATA
AND
THE
PARAMETERS
OF
THE
TRANSFORMATION
IT
WOULD
THEN
MANIPULATE
THE
DATA
FOR
THE
CUBE
AND
RETURN
CONTROL
TO
THE
APPLICATION
PROGRAM
PERHAPS
ALSO
RETURNING
SOME
VALUES
OBJECT
ORIENTED
DESIGN
AND
OBJECT
ORIENTED
PROGRAMMING
LOOK
AT
MANIPULATION
OF
OBJECTS
IN
A
FUNDAMENTALLY
DIFFERENT
MANNER
EVEN
IN
THE
EARLY
DAYS
OF
OBJECT
ORIENTED
PROGRAMMING
LANGUAGES
SUCH
AS
SMALLTALK
RECOGNIZED
THAT
COMPUTER
GRAPH
ICS
PROVIDES
EXCELLENT
EXAMPLES
OF
THE
POWER
OF
THE
OBJECT
ORIENTED
APPROACH
RECENT
TRENDS
WITHIN
THE
SOFTWARE
COMMUNITY
INDICATE
THAT
WE
CAN
COMBINE
OUR
PIPELINE
ORIENTATION
WITH
AN
OBJECT
ORIENTATION
TO
BUILD
EVEN
MORE
EXPRESSIVE
AND
HIGH
PERFORMANCE
GRAPHICS
SYSTEMS
OBJECT
ORIENTED
PROGRAMMING
LANGUAGES
DEFINE
OBJECTS
AS
MODULES
WITH
WHICH
WE
BUILD
PROGRAMS
THESE
MODULES
INCLUDE
THE
DATA
THAT
DEFINE
THE
MODULE
SUCH
AS
THE
VERTICES
FOR
OUR
CUBE
PROPERTIES
OF
THE
MODULE
ATTRIBUTES
AND
THE
FUNCTIONS
METHODS
THAT
MANIPULATE
THE
MODULE
AND
ITS
ATTRIBUTES
WE
SEND
MESSAGES
TO
OBJECTS
TO
INVOKE
A
METHOD
THIS
MODEL
IS
SHOWN
IN
FIGURE
THE
ADVANTAGE
TO
THE
WRITER
OF
THE
APPLICATION
PROGRAM
IS
THAT
SHE
NOW
DOES
NOT
NEED
TO
KNOW
HOW
THE
CUBE
IS
REPRESENTED
SHE
NEEDS
TO
KNOW
ONLY
WHAT
FUNCTIONALITY
THE
CUBE
OBJECT
SUPPORTS
WHAT
MESSAGES
SHE
CAN
SEND
TO
IT
ALTHOUGH
THE
C
STRUCT
HAS
SOME
OF
THE
PROPERTIES
OF
OBJECTS
THE
C
LANGUAGE
DOES
NOT
SUPPORT
THE
FULL
POWER
OF
AN
OBJECT
ORIENTED
APPROACH
IN
C
THE
STRUCT
IS
REPLACED
WITH
THE
CLASS
C
CLASSES
HAVE
TWO
IMPORTANT
PROPERTIES
THAT
WE
CAN
EXPLOIT
TO
GET
THE
FLAVOR
OF
THE
OBJECT
ORIENTED
APPROACH
C
PROGRAMMERS
SHOULD
HAVE
NO
TROUBLE
UNDERSTANDING
THESE
CONCEPTS
A
CUBE
OBJECT
SUPPOSE
THAT
WE
WISH
TO
CREATE
A
CUBE
OBJECT
IN
C
THAT
HAS
A
COLOR
ATTRIBUTE
AND
A
HOMOGENEOUS
COORDINATE
TRANSFORMATION
ASSOCIATED
WITH
IT
IN
C
WE
COULD
USE
A
STRUCT
OF
THE
FOLLOWING
FORM
STRUCT
CUBE
FLOAT
COLOR
FLOAT
MATRIX
IMPLEMENTATION
GOES
HERE
THE
IMPLEMENTATION
PART
OF
THE
STRUCTURE
CONTAINS
THE
INFORMATION
ON
HOW
A
CUBE
IS
ACTUALLY
REPRESENTED
TYPICALLY
AN
APPLICATION
PROGRAMMER
DOES
NOT
NEED
THIS
INFORMATION
AND
NEEDS
TO
CHANGE
ONLY
THE
COLOR
OR
MATRIX
ASSOCIATED
WITH
THE
CUBE
ONCE
THE
STRUCT
HAS
BEEN
DEFINED
INSTANCES
OF
THE
CUBE
OBJECT
CAN
BE
CREATED
AS
ARE
OTHER
BASIC
DATA
TYPES
CUBE
A
B
ATTRIBUTES
THAT
ARE
PART
OF
THE
CLASS
DEFINITION
CAN
BE
CHANGED
FOR
EACH
INSTANCE
OF
THE
CUBE
THUS
WE
CAN
SET
THE
COLOR
OF
CUBE
A
TO
RED
AS
FOLLOWS
A
COLOR
A
COLOR
A
COLOR
IT
SHOULD
BE
CLEAR
HOW
SUCH
A
STRUCT
CAN
BE
IMPLEMENTED
WITHIN
AN
OPENGL
SYSTEM
ALTHOUGH
WE
HAVE
CREATED
A
RETAINED
CUBE
OBJECT
WE
ARE
LIMITED
IN
HOW
WE
CAN
MANIPULATE
IT
OR
RENDER
IT
WE
COULD
WRITE
A
FUNCTION
THAT
WOULD
RENDER
THE
CUBE
THROUGH
CODE
SUCH
AS
A
OR
WE
COULD
ROTATE
THE
CUBE
BY
INVOKING
THE
METHOD
A
THETA
D
WHERE
D
IS
THE
VECTOR
ABOUT
WHICH
WE
WISH
TO
ROTATE
THIS
APPROACH
IS
WORKABLE
BUT
HAS
LIMITATIONS
ONE
IS
THAT
WE
NEED
SEPARATE
RENDERING
AND
ROTATION
FUNCTIONS
FOR
EACH
TYPE
OF
OBJECT
A
SECOND
IS
THAT
THE
IMPLE
MENTATION
PART
OF
THE
CODE
IS
ACCESSIBLE
TO
APPLICATION
PROGRAMS
C
CLASSES
SOLVE
BOTH
OF
THESE
PROBLEMS
A
C
CLASS
CAN
HAVE
PUBLIC
PRIVATE
AND
PROTECTED
MEM
BERS
THE
PUBLIC
MEMBERS
ARE
SIMILAR
TO
THE
MEMBERS
OF
C
STRUCT
AND
CAN
BE
ALTERED
BY
ANY
FUNCTION
THE
PRIVATE
MEMBERS
NEITHER
ARE
VISIBLE
TO
NOR
CAN
BE
ALTERED
BY
A
FUNCTION
THAT
USES
THE
CLASS
THE
PROTECTED
MEMBERS
ARE
VISIBLE
TO
CLASSES
WITHIN
THE
SAME
HIERARCHY
A
PROGRAMMER
CAN
ALSO
DECLARE
CLASSES
TO
BE
FRIENDS
TO
GIVE
ACCESS
TO
SPECIFIC
CLASSES
THUS
IN
C
WE
DEFINE
THE
CUBE
AS
CLASS
CUBE
PUBLIC
COLOR
MODEL
PRIVATE
IMPLEMENTATION
GOES
HERE
THEREBY
PROTECTING
AND
HIDING
THE
DETAILS
OF
THE
IMPLEMENTATION
FURTHERMORE
C
CLASSES
ALLOW
US
TO
HAVE
MEMBERS
THAT
ARE
FUNCTIONS
OR
METHODS
ONCE
WE
ADD
SUCH
FUNCTIONS
THE
OBJECT
ORIENTATION
BECOMES
CLEARER
SUPPOSE
THAT
WE
ADD
MEMBER
FUNCTIONS
TO
THE
PUBLIC
PART
OF
THE
CUBE
CLASS
AS
FOLLOWS
VOID
RENDER
VOID
TRANSLATE
FLOAT
X
FLOAT
Y
FLOAT
Z
VOID
ROTATE
FLOAT
THETA
FLOAT
FLOAT
FLOAT
NOW
AN
APPLICATION
PROGRAM
COULD
CREATE
TRANSLATE
ROTATE
AND
RENDER
A
CUBE
THROUGH
THE
FOLLOWING
CODE
CUBE
A
A
ROTATE
A
TRANSLATE
A
RENDER
CONCEPTUALLY
THIS
CODE
ASSUMES
THAT
AN
INSTANCE
OF
THE
CUBE
KNOWS
HOW
TO
ROTATE
ITSELF
AND
THAT
BY
EXECUTING
THE
CODE
A
ROTATE
WE
ARE
SENDING
A
MESSAGE
TO
A
CUBE
OBJECT
THAT
WE
WOULD
LIKE
IT
TO
CARRY
OUT
SUCH
A
ROTATION
WE
COULD
EASILY
WRITE
AN
IMPLEMENTATION
OF
THE
ROTATION
AND
TRANSLATION
METHODS
THAT
WOULD
USE
OUR
ROTATION
AND
TRANSLATION
FUNCTIONS
TO
CHANGE
THE
MATRIX
MEMBER
OF
THE
CUBE
OBJECT
IT
IS
LESS
CLEAR
WHAT
A
FUNCTION
CALL
SUCH
AS
A
RENDER
REALLY
DOES
EACH
INSTANCE
OF
AN
OBJECT
PERSISTS
AND
CAN
BE
ALTERED
BY
FURTHER
CODE
IN
THE
APPLICATION
PROGRAM
WHAT
IS
MOST
IMPORTANT
IS
THAT
WE
HAVE
CREATED
AN
OBJECT
THAT
CONTINUES
TO
EXIST
SOMEWHERE
IN
OUR
SYSTEM
IN
A
FORM
THAT
IS
NOT
VISIBLE
TO
THE
APPLICATION
PROGRAM
THE
ATTRIBUTES
OF
THE
OBJECT
ARE
ALSO
IN
THE
SYSTEM
AND
CAN
BE
ALTERED
BY
FUNCTIONS
SUCH
AS
ROTATE
THE
RENDER
FUNCTION
CAUSES
THE
OBJECT
TO
BE
REDRAWN
USING
THE
OBJECT
STATE
RATHER
THAN
THE
SYSTEM
CURRENT
STATE
HENCE
THE
RENDER
STEP
INVOLVES
SENDING
DATA
TO
THE
GPU
WITH
THE
NECESSARY
VERTEX
ATTRIBUTE
DATA
COMING
FROM
THE
IMPLEMENTATION
PART
OF
THE
OBJECT
AND
USING
A
FUNCTION
SUCH
AS
GLDRAWARRAYS
TO
DISPLAY
THE
OBJECT
IMPLEMENTING
THE
CUBE
OBJECT
AS
AN
EXAMPLE
OF
THE
CHOICES
THAT
GO
INTO
DEVELOPING
THE
PRIVATE
PART
OF
AN
OBJECT
LET
CONSIDER
THE
CUBE
ONE
BASIC
IMPLEMENTATION
WOULD
BE
SIMILAR
TO
WHAT
WE
DID
FOR
OUR
ROTATING
CUBE
EXAMPLES
WE
LOOK
AT
THE
CUBE
AS
COMPRISED
OF
SIX
FACES
EACH
OF
WHICH
CONSISTS
OF
TWO
TRIANGLES
THUS
THE
PRIVATE
PART
OF
THE
CUBE
MIGHT
BE
OF
THE
FORM
PRIVATE
POINTS
COLORS
NOTE
THAT
WE
ARE
ALLOWING
FOR
DIFFERENT
COLORS
AT
EACH
VERTEX
THE
CONSTRUCTOR
FOR
A
CUBE
WOULD
SET
VALUES
FOR
THE
POINTS
WITH
A
DEFAULT
OF
A
UNIT
CUBE
WE
CAN
DO
FAR
BETTER
IF
WE
INCLUDE
MORE
INFORMATION
IN
THE
IMPLEMENTATION
OF
PARTICULAR
INTEREST
IS
INFORMATION
THAT
MIGHT
HELP
IN
THE
RENDERING
THUS
WHEREAS
OPENGL
WILL
DO
HIDDEN
SURFACE
REMOVAL
CORRECTLY
THROUGH
THE
Z
BUFFER
ALGORITHM
WE
CAN
OFTEN
DO
MUCH
BETTER
BY
ELIMINATING
OBJECTS
EARLIER
THROUGH
A
SEPARATE
VISIBILITY
TEST
AS
WE
WILL
DISCUSS
IN
SECTION
TO
SUPPORT
THIS
FUNCTIONALITY
WE
MIGHT
WANT
TO
INCLUDE
INFORMATION
THAT
DETERMINES
A
BOUNDING
VOLUME
FOR
THE
OBJECT
FOR
EXAMPLE
WE
CAN
INCLUDE
THE
AXIS
ALIGNED
BOUNDING
BOX
FOR
OBJECTS
WITHIN
THE
PRIVATE
PART
OF
THE
CODE
FOR
POLYGONAL
OBJECTS
WE
NEED
SIMPLY
SAVE
THE
MINIMUM
AND
MAXIMUM
OF
THE
X
Y
AND
Z
OF
THE
VERTICES
AFTER
THEY
HAVE
BEEN
TRANSFORMED
BY
ANY
TRANSFORMATION
MATRIX
STORED
WITH
THE
OBJECT
OBJECTS
AND
HIERARCHY
ONE
OF
THE
MAJOR
ADVANTAGES
OF
OBJECT
ORIENTED
DESIGN
IS
THE
ABILITY
TO
REUSE
CODE
AND
TO
BUILD
MORE
SOPHISTICATED
OBJECTS
FROM
A
SMALL
SET
OF
SIMPLE
OBJECTS
AS
IN
SECTION
WE
CAN
BUILD
A
FIGURE
OBJECT
FROM
CUBES
AND
HAVE
MULTIPLE
INSTANCES
OF
THIS
NEW
OBJECT
EACH
WITH
ITS
OWN
COLOR
SIZE
LOCATION
AND
ORIENTATION
A
CLASS
FOR
THE
HUMANOID
FIGURE
COULD
REFER
TO
THE
CLASSES
FOR
ARMS
AND
LEGS
THE
CLASS
FOR
A
CAR
COULD
REFER
TO
CLASSES
FOR
WHEELS
AND
A
CHASSIS
THUS
WE
WOULD
ONCE
MORE
HAVE
TREE
LIKE
REPRESENTATIONS
SIMILAR
TO
THOSE
THAT
WE
DEVELOPED
IN
SECTION
OFTEN
IN
OBJECT
ORIENTED
DESIGN
WE
WANT
THE
REPRESENTATIONS
TO
SHOW
RELATION
SHIPS
MORE
COMPLEX
THAN
THE
PARENT
CHILD
RELATIONSHIP
THAT
CHARACTERIZES
TREES
AS
WE
HAVE
USED
TREES
THE
STRUCTURE
IS
SUCH
THAT
THE
HIGHEST
LEVEL
OF
COMPLEXITY
IS
AT
THE
ROOT
AND
THE
RELATIONSHIP
BETWEEN
A
PARENT
AND
CHILD
IS
A
HAS
A
RELATIONSHIP
THUS
THE
STICK
FIGURE
HAS
TWO
ARMS
AND
TWO
LEGS
WHEREAS
THE
CAR
HAS
FOUR
WHEELS
AND
A
CHASSIS
WE
CAN
LOOK
AT
HIERARCHY
IN
A
DIFFERENT
MANNER
WITH
THE
SIMPLEST
OBJECTS
BEING
THE
TOP
OF
THE
HIERARCHY
AND
THE
RELATIONSHIP
BETWEEN
PARENTS
AND
CHILDREN
BEING
AN
IS
A
RELATIONSHIP
THIS
TYPE
OF
HIERARCHY
IS
TYPICAL
OF
TAXONOMIES
A
MAMMAL
IS
AN
ANIMAL
A
HUMAN
IS
A
MAMMAL
WE
USED
THIS
RELATIONSHIP
IN
DESCRIBING
PROJECTIONS
A
PARALLEL
PROJECTION
IS
A
PLANAR
GEOMETRIC
PROJECTION
AN
OBLIQUE
PROJECTION
IS
A
PARALLEL
PROJECTION
HAS
A
RELATIONSHIPS
ALLOW
US
TO
DEFINE
MULTIPLE
COMPLEX
OBJECTS
FROM
SIMPLER
OBJECTS
AND
ALSO
ALLOW
THE
MORE
COMPLEX
OBJECT
TO
INHERIT
PROPERTIES
FROM
THE
SIMPLER
OBJECT
THUS
IF
WE
WRITE
THE
CODE
FOR
A
PARALLEL
PROJECTION
THE
OBLIQUE
PROJECTION
CODE
CAN
USE
THIS
CODE
AND
REFINE
ONLY
THE
PARTS
THAT
ARE
NECESSARY
TO
CONVERT
THE
GENERAL
PARALLEL
PROJECTION
TO
AN
OBLIQUE
ONE
FOR
GEOMETRIC
OBJECTS
WE
CAN
DEFINE
BASE
OBJECTS
WITH
A
DEFAULT
SET
OF
PROPERTIES
SUCH
AS
THEIR
COLOR
AND
MATERIAL
PROPERTIES
AN
APPLICATION
PROGRAMMER
COULD
THEN
USE
THESE
PROPERTIES
OR
CHANGE
THEM
IN
SUBOBJECTS
THESE
CONCEPTS
ARE
SUPPORTED
BY
LANGUAGES
SUCH
AS
C
THAT
ALLOW
FOR
SUBCLASSES
AND
INHERITANCE
GEOMETRIC
OBJECTS
SUPPOSE
THAT
WE
NOW
WANT
TO
BUILD
AN
OBJECT
ORIENTED
GRAPHICS
SYSTEM
WHAT
OBJECTS
SHOULD
WE
INCLUDE
ALTHOUGH
IT
IS
CLEAR
THAT
WE
WANT
TO
HAVE
OBJECTS
SUCH
AS
POINTS
VECTORS
POLYGONS
RECTANGLES
AND
TRIANGLES
POSSIBLY
USING
SUBCLASSES
IT
IS
LESS
CLEAR
HOW
WE
SHOULD
DEAL
WITH
ATTRIBUTES
LIGHT
SOURCES
AND
VIEWERS
FOR
EXAMPLE
SHOULD
A
MATERIAL
PROPERTY
BE
ASSOCIATED
WITH
AN
OBJECT
SUCH
AS
A
CUBE
OR
IS
IT
A
SEPARATE
OBJECT
THE
ANSWER
CAN
BE
EITHER
OR
BOTH
WE
COULD
CREATE
A
CUBE
CLASS
IN
WHICH
THERE
IS
A
MEMBER
FOR
EACH
OF
THE
AMBIENT
DIFFUSE
AND
SPECULAR
MATERIAL
PROPERTIES
THAT
WE
INTRODUCED
WITH
THE
PHONG
MODEL
IN
CHAPTER
WE
COULD
ALSO
DEFINE
A
MATERIAL
CLASS
USING
CODE
SUCH
AS
THE
FOLLOWING
CLASS
MATERIAL
PUBLIC
SPECULAR
FLOAT
SHININESS
DIFFUSE
AMBIENT
WE
COULD
THEN
ASSIGN
THE
MATERIAL
TO
A
GEOMETRIC
OBJECT
THROUGH
A
MEMBER
FUNCTION
OF
THE
CUBE
CLASS
AS
FOLLOWS
CUBE
A
MATERIAL
B
A
SETMATERIAL
B
LIGHT
SOURCES
ARE
GEOMETRIC
OBJECTS
THEY
HAVE
POSITION
AND
ORIENTATION
AMONG
THEIR
FEATURES
AND
WE
CAN
EASILY
ADD
A
LIGHT
SOURCE
OBJECT
CLASS
LIGHT
PUBLIC
BOOLEAN
TYPE
BOOLEAN
NEAR
POSITION
ORIENTATION
SPECULAR
DIFFUSE
AMBIENT
ONCE
WE
HAVE
BUILT
UP
A
COLLECTION
OF
GEOMETRIC
OBJECTS
WE
CAN
USE
IT
TO
DESCRIBE
A
SCENE
TO
TAKE
ADVANTAGE
OF
THE
HIERARCHICAL
RELATIONSHIPS
THAT
WE
HAVE
INTRODUCED
WE
DEVELOP
A
NEW
TREE
STRUCTURE
CALLED
A
SCENE
GRAPH
SCENE
GRAPHS
IF
WE
THINK
ABOUT
WHAT
GOES
INTO
DESCRIBING
A
SCENE
WE
CAN
SEE
THAT
IN
ADDITION
TO
OUR
GRAPHICAL
PRIMITIVES
AND
GEOMETRIC
OBJECTS
DERIVED
FROM
THESE
PRIMITIVES
WE
HAVE
OTHER
OBJECTS
SUCH
AS
LIGHTS
AND
A
CAMERA
THESE
OBJECTS
MAY
ALSO
BE
DEFINED
BY
VERTICES
AND
VECTORS
AND
MAY
HAVE
ATTRIBUTES
SUCH
AS
COLOR
THAT
ARE
SIMILAR
TO
THE
ATTRIBUTES
ASSOCIATED
WITH
GEOMETRIC
PRIMITIVES
IT
IS
THE
TOTALITY
OF
THESE
OBJECTS
THAT
DESCRIBES
A
SCENE
AND
THERE
MAY
BE
HIERARCHICAL
RELATIONSHIPS
AMONG
THESE
OBJECTS
FOR
EXAMPLE
WHEN
A
PRIMITIVE
IS
DEFINED
IN
A
PROGRAM
THE
CAMERA
PARAMETERS
THAT
EXIST
AT
THAT
TIME
ARE
USED
TO
FORM
THE
IMAGE
IF
WE
ALTER
THE
CAMERA
LENS
BETWEEN
THE
DEFINITION
OF
TWO
GEOMETRIC
OBJECTS
WE
MAY
PRODUCE
AN
IMAGE
IN
WHICH
EACH
OBJECT
IS
VIEWED
DIFFERENTLY
ALTHOUGH
WE
CANNOT
CREATE
SUCH
AN
IMAGE
WITH
A
REAL
CAMERA
THE
EXAMPLE
POINTS
OUT
THE
POWER
OF
OUR
GRAPHICS
SYSTEMS
WE
CAN
EXTEND
OUR
USE
OF
TREE
DATA
STRUCTURES
TO
DESCRIBE
THESE
RELATIONSHIPS
AMONG
GEOMETRIC
OBJECTS
CAMERAS
LIGHTS
AND
ATTRIBUTES
KNOWING
THAT
WE
CAN
WRITE
A
GRAPHICAL
APPLICATION
PROGRAM
TO
TRAVERSE
A
GRAPH
WE
CAN
EXPAND
OUR
NOTION
OF
THE
CONTENTS
OF
A
GRAPH
TO
DESCRIBE
AN
ENTIRE
SCENE
ONE
POSSIBILITY
IS
TO
USE
A
TREE
DATA
STRUCTURE
AND
TO
INCLUDE
VARIOUS
ATTRIBUTES
AT
EACH
NODE
IN
ADDITION
TO
THE
INSTANCE
MATRIX
AND
A
POINTER
TO
THE
DRAWING
FUNCTION
ANOTHER
POSSIBILITY
IS
TO
ALLOW
NEW
TYPES
OF
NODES
SUCH
AS
ATTRIBUTE
DEFINITION
NODES
AND
MATRIX
TRANSFORMATION
NODES
CONSIDER
THE
TREE
IN
FIGURE
HERE
WE
HAVE
SET
UP
INDIVIDUAL
NODES
FOR
THE
COLORS
AND
FOR
THE
MODEL
VIEW
MATRICES
THE
PLACE
WHERE
THERE
ARE
BRANCHES
AT
THE
TOP
CAN
BE
CONSIDERED
A
SPECIAL
TYPE
OF
NODE
A
GROUP
NODE
WHOSE
FUNCTION
IS
TO
ISOLATE
THE
TWO
CHILDREN
THE
GROUP
NODE
ALLOWS
US
TO
PRESERVE
THE
STATE
THAT
EXISTS
AT
THE
TIME
THAT
WE
ENTER
A
NODE
AND
THUS
ISOLATES
THE
STATE
OF
THE
SUBTREE
BEGINNING
AT
A
GROUP
NODE
FROM
THE
REST
OF
THE
TREE
USING
OUR
PREORDER
TRAVERSAL
ALGORITHM
THE
CORRESPONDING
APPLICATION
CODE
IS
OF
THE
FOLLOWING
FORM
FIGURE
SCENE
TREE
PUSHATTRIB
PUSHMATRIX
COLOR
TRANSLATE
ROTATE
TRANSLATE
POPMATRIX
PUSHMATRIX
TRANSLATE
ROTATE
POPMATRIX
POPATTRIB
THE
GROUP
NODES
CORRESPOND
TO
THE
OPENGL
PUSH
AND
POP
FUNCTIONS
THIS
CODE
PRESERVES
AND
RESTORES
BOTH
THE
ATTRIBUTES
AND
THE
MODEL
VIEW
MATRIX
BEFORE
EXITING
IT
SETS
A
DRAWING
COLOR
THAT
APPLIES
TO
THE
REST
OF
THE
TREE
AND
TRAVERSES
THE
TREE
IN
A
MANNER
SIMILAR
TO
THE
FIGURE
EXAMPLE
WE
CAN
GO
FURTHER
AND
NOTE
THAT
WE
CAN
USE
THE
ATTRIBUTE
AND
MATRIX
STACKS
TO
STORE
THE
VIEWING
CONDITIONS
THUS
WE
CAN
CREATE
A
CAMERA
NODE
IN
THE
TREE
ALTHOUGH
WE
PROBABLY
DO
NOT
WANT
A
SCENE
IN
WHICH
INDIVIDUAL
OBJECTS
ARE
VIEWED
WITH
DIFFERENT
CAMERAS
WE
MAY
WANT
TO
VIEW
THE
SAME
SET
OF
OBJECTS
WITH
MULTIPLE
CAMERAS
PRODUC
ING
FOR
EXAMPLE
THE
MULTIVIEW
ORTHOGRAPHIC
PROJECTIONS
AND
ISOMETRIC
VIEW
THAT
ARE
USED
BY
ARCHITECTS
AND
ENGINEERS
SUCH
IMAGES
CAN
BE
CREATED
WITH
A
SCENE
GRAPH
THAT
HAS
MULTIPLE
CAMERAS
THE
SCENE
GRAPH
WE
HAVE
JUST
DESCRIBED
IS
EQUIVALENT
TO
AN
OPENGL
PROGRAM
IN
THE
SENSE
THAT
WE
CAN
USE
THE
TREE
TO
GENERATE
THE
PROGRAM
IN
A
TOTALLY
MECHANICAL
FASHION
THIS
APPROACH
WAS
TAKEN
BY
OPEN
INVENTOR
AND
LATER
BY
OPEN
SCENE
GRAPH
OSG
BOTH
OBJECT
ORIENTED
APIS
THAT
WERE
BUILT
ON
TOP
OF
OPENGL
OPEN
INVENTOR
AND
OSG
PROGRAMS
BUILD
MANIPULATE
AND
RENDER
A
SCENE
GRAPH
EXECUTION
OF
A
PRO
GRAM
CAUSES
TRAVERSAL
OF
THE
SCENE
GRAPH
WHICH
IN
TURN
EXECUTES
GRAPHICS
FUNCTIONS
THAT
ARE
IMPLEMENTED
IN
OPENGL
THE
NOTION
OF
SCENE
GRAPHS
COUPLES
NICELY
WITH
THE
OBJECT
ORIENTED
PARADIGM
INTRODUCED
IN
SECTION
WE
CAN
REGARD
ALL
PRIMITIVES
ATTRIBUTES
AND
TRANSFORMA
TIONS
AS
SOFTWARE
OBJECTS
AND
WE
CAN
DEFINE
CLASSES
TO
MANIPULATE
THESE
ENTITIES
FROM
THIS
PERSPECTIVE
WE
CAN
MAKE
USE
OF
CONCEPTS
SUCH
AS
DATA
ENCAPSULATION
TO
BUILD
UP
SCENES
OF
GREAT
COMPLEXITY
WITH
SIMPLE
PROGRAMS
THAT
USE
PREDEFINED
SOFTWARE
OB
JECTS
WE
CAN
EVEN
SUPPORT
ANIMATIONS
THROUGH
SOFTWARE
OBJECTS
THAT
APPEAR
AS
NODES
IN
THE
SCENE
GRAPH
BUT
CAUSE
PARAMETERS
TO
CHANGE
AND
THE
SCENE
TO
BE
REDISPLAYED
ALTHOUGH
IN
OPEN
INVENTOR
THE
SOFTWARE
OBJECTS
ARE
RENDERED
USING
OPENGL
THE
SCENE
GRAPH
ITSELF
IS
A
DATABASE
THAT
INCLUDES
ALL
THE
ELEMENTS
OF
THE
SCENE
OPENGL
IS
THE
RENDERING
ENGINE
THAT
ALLOWS
THE
DATABASE
TO
BE
CONVERTED
TO
AN
IMAGE
BUT
IT
IS
NOT
USED
IN
THE
SPECIFICATION
OF
THE
SCENE
GAME
ENGINES
EMPLOY
A
SIMILAR
STRATEGY
IN
WHICH
THE
GAME
PLAY
MODIFIES
A
SCENE
GRAPH
THAT
CAN
BE
TRAVERSED
AND
RENDERED
AT
AN
INTERACTIVE
RATE
GRAPHICS
SOFTWARE
SYSTEMS
ARE
EVOLVING
TO
THE
CONFIGURATION
SHOWN
IN
FIG
URE
OPENGL
IS
THE
RENDERING
ENGINE
IT
USUALLY
SITS
ON
TOP
OF
ANOTHER
LAYER
KNOWN
AS
THE
HARDWARE
ABSTRACTION
LAYER
HAL
WHICH
IS
A
VIRTUAL
MACHINE
THAT
COMMUNICATES
WITH
THE
PHYSICAL
HARDWARE
ABOVE
OPENGL
IS
AN
OBJECT
ORIENTED
LAYER
THAT
SUPPORTS
SCENE
GRAPHS
AND
A
STORAGE
MECHANISM
USER
PROGRAMS
CAN
BE
WRITTEN
FOR
ANY
OF
THE
LAYERS
DEPENDING
ON
WHAT
FACILITIES
ARE
REQUIRED
BY
THE
APPLICATION
FIGURE
MODERN
GRAPHICS
ARCHITECTURE
OPEN
SCENE
GRAPH
OPEN
SCENE
GRAPH
IS
PROBABLY
THE
MOST
POPULAR
OF
THE
FULL
SCENE
GRAPH
APIS
AND
PROVIDES
MUCH
OF
THE
FUNCTIONALITY
LACKING
IN
OUR
EXAMPLE
IN
ADDITION
TO
SUPPORTING
A
WIDER
VARIETY
OF
NODES
THERE
ARE
TWO
ADDITIONAL
CONCEPTS
THAT
ARE
KEY
TO
OSG
FIRST
ONE
OF
THE
BENEFITS
OF
A
HIGHER
LEVEL
OF
SOFTWARE
THAN
OPENGL
IS
THAT
SUCH
SOFTWARE
CAN
BALANCE
THE
WORKLOAD
BETWEEN
THE
CPU
AND
THE
GRAPHICS
PROCESSOR
CONSIDER
HOW
WE
PROCESS
GEOMETRY
IN
OPENGL
AN
APPLICATION
PRODUCES
PRIMITIVES
THAT
ARE
SPECIFIED
THROUGH
SETS
OF
VERTICES
AS
WE
HAVE
SEEN
OPENGL
MAIN
CONCERN
IS
RENDERING
ALL
GEOMETRIC
PRIMITIVES
PASS
DOWN
AT
LEAST
PART
OF
THE
PIPELINE
IT
IS
ONLY
AT
THE
END
OF
VERTEX
PROCESSING
THAT
PRIMITIVES
THAT
LIE
OUTSIDE
THE
VIEW
VOLUME
ARE
CLIPPED
OUT
IF
A
PRIMITIVE
IS
BLOCKED
FROM
THE
VIEWER
BY
ANOTHER
OPAQUE
GEOMETRIC
OBJECT
AND
CANNOT
APPEAR
IN
THE
FINAL
IMAGE
IT
NEVERTHELESS
PASSES
THROUGH
MOST
OF
THE
PIPELINE
AND
ONLY
DURING
HIDDEN
SURFACE
REMOVAL
WILL
IT
BE
ELIMINATED
ALTHOUGH
PRESENT
GPUS
CAN
PROCESS
MILLIONS
OF
VERTICES
PER
SECOND
MANY
APPLICATIONS
HAVE
SUCH
COMPLEX
GEOMETRY
THAT
EVEN
THESE
GPUS
CANNOT
RENDER
THE
GEOMETRY
AT
A
SUFFI
CIENTLY
HIGH
FRAME
RATE
OSG
USES
TWO
STRATEGIES
OCCLUSION
CULLING
AND
LEVEL
OF
DETAIL
RENDERING
TO
LOWER
THE
RENDERING
LOAD
OCCLUSION
CULLING
SEEKS
TO
ELIMINATE
OBJECTS
THAT
CANNOT
BE
VISIBLE
BECAUSE
THEY
ARE
BLOCKED
BY
OTHER
OBJECTS
BEFORE
THEY
ENTER
THE
RENDERING
PIPELINE
IN
FIGURE
REGION
OCCLUDED
BY
SQUARE
VIEW
VOLUME
FIGURE
OCCLUSION
WE
SEE
THAT
THE
SQUARE
LIES
IN
THE
VIEW
VOLUME
AND
BLOCKS
THE
TRIANGLE
FROM
VIEW
ALTHOUGH
THE
Z
BUFFER
ALGORITHM
WOULD
YIELD
A
CORRECT
RENDERING
BECAUSE
OPENGL
PROCESSES
EACH
OBJECT
INDEPENDENTLY
IT
CANNOT
DISCOVER
THE
OCCLUSION
HOWEVER
ALL
THE
GEOMETRY
IS
STORED
IN
THE
OSG
SCENE
GRAPH
AS
IS
THE
INFORMATION
ON
THE
VIEWER
HENCE
OSG
CAN
USE
ONE
OF
MANY
ALGORITHMS
TO
GO
THROUGH
THE
SCENE
GRAPH
AND
CULL
OBJECTS
WE
WILL
EXAMINE
AN
APPROACH
TO
OCCLUSION
CULLING
THAT
USES
BINARY
SPATIAL
PARTITIONING
IN
SECTION
THE
SECOND
STRATEGY
IS
BASED
ON
AN
ARGUMENT
SIMILAR
TO
THE
ONE
THAT
WE
USED
TO
JUSTIFY
MIPMAPS
FOR
TEXTURE
MAPPING
IF
WE
CAN
TELL
THAT
A
GEOMETRIC
OBJECT
WILL
RENDER
TO
A
SMALL
AREA
OF
THE
DISPLAY
WE
DO
NOT
NEED
TO
RENDER
ALL
THE
DETAIL
THAT
MIGHT
BE
ITS
GEOMETRY
ONCE
MORE
THE
NECESSARY
INFORMATION
CAN
BE
PLACED
IN
THE
SCENE
GRAPH
OSG
HAS
A
LEVEL
OF
DETAIL
NODE
WHOSE
CHILDREN
ARE
THE
MODELS
OF
AN
OBJECT
WITH
DIFFERENT
LEVELS
OF
GEOMETRIC
COMPLEXITY
THE
APPLICATION
PROGRAM
SETS
UP
THESE
NODES
DURING
THE
TRAVERSAL
OF
THE
SCENE
GRAPH
OSG
DETERMINES
WHICH
LEVEL
OF
DETAIL
TO
USE
LEVEL
OF
DETAIL
RENDERING
IS
IMPORTANT
NOT
ONLY
TO
OSG
BUT
ALSO
TO
REAL
TIME
AP
PLICATIONS
SUCH
AS
INTERACTIVE
GAMES
THAT
ARE
BUILT
USING
PROPRIETARY
GAME
ENGINES
GAME
ENGINES
ARE
VERY
LARGE
COMPLEX
SOFTWARE
OBJECTS
THAT
MAY
COMPRISE
MILLIONS
OF
LINES
OF
CODE
ALTHOUGH
A
GAME
ENGINE
MAY
USE
OPENGL
OR
DIRECTX
TO
RENDER
THE
GRAPHICS
AND
MAKE
EXTENSIVE
USE
OF
PROGRAMMABLE
SHADERS
A
GAME
ENGINE
ALSO
HAS
TO
HANDLE
THE
GAME
PLAY
AND
MANAGE
COMPLEX
INTERACTIONS
THAT
MIGHT
INVOLVE
MULTI
PLE
PLAYERS
GAME
ENGINES
USE
SCENE
GRAPHS
TO
MAINTAIN
ALL
THE
NEEDED
INFORMATION
INCLUDING
THE
GEOMETRY
AND
TEXTURE
MAPS
AND
USE
LEVEL
OF
DETAIL
EXTENSIVELY
IN
PRO
CESSING
THEIR
SCENE
GRAPHS
IN
THE
NEXT
SECTION
WE
WILL
EXAMINE
SOME
RELATED
ISSUES
INVOLVING
GRAPHICS
OVER
THE
INTERNET
THE
SECOND
MAJOR
CONCEPT
IS
HOW
THE
SCENE
GRAPH
IS
PROCESSED
FOR
EACH
FRAME
OSG
USES
THREE
TRAVERSALS
RATHER
THAN
THE
SINGLE
TRAVERSAL
IN
OUR
SIMPLE
SCENE
GRAPH
THE
GOAL
OF
THE
TRAVERSAL
PROCESS
IS
TO
CREATE
A
LIST
OF
THE
GEOMETRY
THAT
CAN
BE
RENDERED
THIS
LIST
CONTAINS
THE
GEOMETRY
AT
THE
BEST
LEVEL
OF
DETAIL
AND
ONLY
THE
GEOMETRY
THAT
HAS
SURVIVED
OCCLUSION
CULLING
IN
ADDITION
THE
GEOMETRY
HAS
BEEN
SORTED
SO
THAT
TRANSLUCENT
SURFACES
WILL
BE
RENDERED
CORRECTLY
THE
FIRST
TRAVERSAL
DEALS
WITH
UPDATES
TO
THE
SCENE
GRAPH
THAT
MIGHT
BE
GENERATED
BY
CALLBACKS
THAT
HANDLE
INTERACTION
OR
CHANGES
TO
THE
GEOMETRY
FROM
THE
APPLICATION
PROGRAM
THE
SECOND
TRAVERSAL
BUILDS
A
LIST
OF
THE
GEOMETRY
THAT
HAS
TO
BE
RENDERED
THIS
TRAVERSAL
USES
OCCLUSION
CULLING
TRANSLUCENCY
LEVEL
OF
DETAIL
AND
BOUNDING
VOL
UMES
THE
FINAL
TRAVERSAL
GOES
THROUGH
THE
GEOMETRY
LIST
AND
ISSUES
THE
NECESSARY
OPENGL
CALLS
TO
RENDER
THE
GEOMETRY
GRAPHICS
AND
THE
INTERNET
BEFORE
LEAVING
THE
SUBJECT
OF
SCENE
GRAPHS
WE
CONSIDER
SOME
OF
THE
ISSUES
THAT
GOVERN
HOW
GRAPHICS
CAN
BE
CONVEYED
OVER
THE
INTERNET
OF
PARTICULAR
INTEREST
ARE
MULTIPLAYER
GAMES
THAT
CAN
INVOLVE
THOUSANDS
OF
CONCURRENT
PARTICIPANTS
EACH
OF
WHOM
POTEN
TIALLY
CAN
AFFECT
THE
SCENE
GRAPH
OF
ANY
OTHER
PARTICIPANT
AND
APPLICATIONS
WITH
LARGE
MODELS
THAT
MAY
BE
DISTRIBUTED
OVER
MULTIPLE
SITES
THE
INTERNET
HAS
HAD
AN
ENORMOUS
EFFECT
ON
VIRTUALLY
ALL
COMMUNICATIONS
AND
COMPUTER
APPLICATIONS
IT
ALLOWS
US
TO
COMMUNICATE
INFORMATION
IN
A
MULTITUDE
OF
FORMS
AND
MAKES
POSSIBLE
NEW
METHODS
OF
INTERACTION
IN
ORDER
TO
USE
THE
INTERNET
TO
ITS
FULL
POTENTIAL
WE
NEED
TO
MOVE
GRAPHICAL
INFORMATION
EFFICIENTLY
TO
BUILD
AP
PLICATIONS
THAT
ARE
VIEWABLE
FROM
MANY
LOCATIONS
AND
TO
ACCESS
RESOURCES
DISTRIBUTED
OVER
MANY
SITES
OPENGL
AND
ITS
EXTENSIONS
HAVE
HAD
A
MAJOR
INFLUENCE
ON
THE
DE
VELOPMENT
OF
NET
BASED
THREE
DIMENSIONAL
APPLICATIONS
AND
STANDARDS
WE
WILL
TAKE
A
GRAPHICS
ORIENTED
APPROACH
AND
SEE
WHAT
EXTENSIONS
WE
NEED
TO
DEVELOP
INTERNET
APPLICATIONS
SOME
OF
THE
CONCEPTS
WILL
BE
FAMILIAR
WE
USE
THE
CLIENT
SERVER
MODEL
TO
ALLOW
EFFICIENT
RENDERING
WE
ALSO
LOOK
AT
HOW
WE
CAN
IMPLEMENT
GRAPHICAL
APPLICA
TIONS
THAT
ARE
INDEPENDENT
OF
THE
API
HYPERMEDIA
AND
HTML
AS
THE
INTERNET
EVOLVED
A
SERIES
OF
STANDARD
HIGH
LEVEL
PROTOCOLS
BECAME
WIDELY
ACCEPTED
FOR
TRANSFERRING
MAIL
FILES
AND
OTHER
TYPES
OF
INFORMATION
SYSTEMS
SUCH
AS
THE
X
WINDOW
SYSTEM
ALLOWED
USERS
TO
OPEN
WINDOWS
ON
REMOTE
SYSTEMS
AND
TO
TRANSFER
BASIC
GRAPHICAL
INFORMATION
AS
THE
INTERNET
GREW
HOWEVER
MORE
AND
MORE
INFORMATION
BECAME
PUBLICLY
AVAILABLE
AND
USERS
NEEDED
MORE
SOPHISTICATED
METHODS
TO
SHARE
INFORMATION
THAT
WAS
STORED
IN
A
DISTRIBUTED
WAY
IN
DIVERSE
FORMATS
THERE
ARE
THREE
KEY
ELEMENTS
NECESSARY
FOR
SHARING
SUCH
INFORMATION
AN
ADDRESSING
SCHEME
THAT
ALLOWS
USERS
TO
IDENTIFY
RESOURCES
OVER
THE
NETWORK
A
METHOD
OF
ENCODING
INFORMATION
IN
ADDITION
TO
SIMPLE
TEXT
SUCH
AS
PICTURES
AND
REFERENCES
OR
LINKS
TO
OTHER
RESOURCES
AND
A
METHOD
OF
SEARCHING
FOR
RESOURCES
INTERACTIVELY
THE
FIRST
TWO
NEEDS
WERE
ADDRESSED
BY
RESEARCHERS
AT
THE
EUROPEAN
PARTICLE
PHYS
ICS
CENTER
CERN
WHO
CREATED
THE
WORLD
WIDE
WEB
WHICH
IS
ESSENTIALLY
A
NET
WORKED
HYPERTEXT
SYSTEM
RESOURCES
FILES
ARE
IDENTIFIED
BY
A
UNIQUE
UNIFORM
RE
SOURCE
LOCATOR
URL
THAT
CONSISTS
OF
THREE
PARTS
THE
PROTOCOL
FOR
TRANSFERRING
THE
DOCUMENT
THE
SERVER
WHERE
THE
DOCUMENT
IS
LOCATED
AND
THE
LOCATION
ON
THE
SERVER
WHERE
THE
DOCUMENT
IS
TO
BE
FOUND
FOR
EXAMPLE
THE
URL
FOR
SUPPORT
FOR
THIS
TEXT
CAN
BE
FOUND
AT
HTTP
WWW
CS
UNM
EDU
ANGEL
BOOK
THE
FIRST
PART
HTTP
INDI
CATES
THAT
THE
INFORMATION
WILL
BE
TRANSFERRED
USING
THE
HYPERTEXT
TRANSFER
PROTOCOL
HTTP
THE
SECOND
PART
WWW
CS
UNM
EDU
IDENTIFIES
THE
SERVER
AS
THE
WORLD
WIDE
WEB
SITE
OF
THE
COMPUTER
SCIENCE
DEPARTMENT
AT
THE
UNIVERSITY
OF
NEW
MEXICO
THE
FINAL
PART
INDICATES
THAT
THE
INFORMATION
IS
STORED
IN
USER
ACCOUNT
ANGEL
UNDER
THE
DIRECTORY
BOOK
BECAUSE
NO
DOCUMENT
IS
INDICATED
A
DEFAULT
DOCUMENT
THE
HOME
PAGE
WILL
BE
DISPLAYED
THE
SECOND
CONTRIBUTION
OF
CERN
WAS
THE
HYPERTEXT
MARKUP
LANGUAGE
HTML
WHICH
PROVIDED
A
SIMPLE
WAY
TO
DESCRIBE
A
DOCUMENT
CONSISTING
OF
TEXT
REFERENCES
TO
OTHER
DOCUMENTS
LINKS
AND
IMAGES
HTML
DOCUMENTS
ARE
TEXT
DOCU
MENTS
TYPICALLY
IN
ASCII
CODE
OR
ONE
OF
THE
STANDARD
EXTENDED
CHARACTER
SETS
THE
COMBINATION
OF
URL
ADDRESSING
AND
HTML
DOCUMENTS
PROVIDED
A
WAY
OF
MAKING
RESOURCES
AVAILABLE
BUT
UNTIL
THE
NATIONAL
CENTER
FOR
SUPERCOMPUTER
APPLICATIONS
NCSA
CAME
UP
WITH
ITS
BROWSER
MOSAIC
IT
WAS
NOT
EASY
FOR
A
USER
TO
FIND
RESOURCES
AND
TO
SEARCH
THE
WEB
BROWSERS
ARE
INTERACTIVE
PROGRAMS
THAT
ALLOW
THE
USER
TO
SEARCH
FOR
AND
DOWNLOAD
DOCUMENTS
ON
THE
WEB
MOSAIC
AND
LATER
NETSCAPE
NAVIGATOR
OPENED
THE
DOOR
TO
SURFING
THE
WEB
JAVA
AND
APPLETS
ONE
ISSUE
WITH
INTERACTIVE
COMPUTER
GRAPHICS
ON
THE
INTERNET
IS
THE
HETEROGENOUS
COLLECTION
OF
COMPUTER
HARDWARE
AND
OPERATING
SYSTEMS
AN
APPLICATION
PROGRAMMER
CANNOT
CREATE
AN
APPLICATION
THAT
WILL
EXECUTE
ON
ANY
MACHINE
CONNECTED
TO
THE
WEB
EVEN
IF
THEY
USE
AN
INDUSTRY
STANDARD
API
LIKE
OPENGL
JAVA
SOLVES
A
PORTION
OF
THIS
PROBLEM
BY
CREATING
A
MACHINE
IN
SOFTWARE
THAT
CAN
BE
IMPLEMENTED
ON
ANY
COMPUTER
JAVA
PROGRAMS
ARE
COMPILED
INTO
BYTE
CODE
THAT
CAN
BE
RUN
ON
ANY
JAVA
MACHINE
REGARDLESS
OF
WHAT
THE
UNDERLYING
HARDWARE
IS
THUS
THE
CLIENT
AND
SERVER
EXCHANGE
BYTE
CODE
OVER
THE
WEB
SMALL
PROGRAMS
IN
BYTE
CODE
CALLED
APPLETS
ARE
UNDERSTOOD
BY
THE
STANDARD
WEB
BROWSERS
AND
HAVE
ADDED
A
TREMENDOUS
AMOUNT
OF
DYNAMIC
BEHAVIOR
TO
THE
WEB
INTERACTIVE
GRAPHICS
AND
THE
WEB
WHILE
HTML
IS
USEFUL
FOR
STRUCTURING
INFORMATION
FOR
LAYOUT
ON
A
RENDERED
WEB
PAGE
UNTIL
HTML
VERSION
IT
LACKED
ANY
RENDERING
CAPABILITIES
MOST
OFTEN
ANY
INTERACTIVE
RENDERING
THAT
WAS
DONE
IN
A
BROWSER
WAS
ORIGINALLY
DONE
USING
A
JAVA
APPLET
HOWEVER
THE
REQUIREMENT
OF
DOWNLOADING
AN
APPLET
COMBINED
WITH
SUPPORT
OF
JAVA
VIRTUAL
MA
CHINES
DIMISHED
JAVA
PROMISE
OF
APPLICATION
PORTABILITY
PARTICULARLY
WHEN
RELATED
TO
THREE
DIMENSIONAL
COMPUTER
GRAPHICS
AS
WEB
BROWSERS
BECAME
MORE
CAPABLE
OF
SUPPORTING
VARIOUS
FORMATS
OTHER
TECHNOLOGIES
EVOLVED
ADOBE
FLASH
TECHNOLOGY
USES
A
PLUGIN
TO
A
WEB
BROWSER
TO
PROVIDE
INTERACTIVITY
BUT
IT
LACKS
AT
THE
TIME
OF
THIS
WRITING
A
COMPREHENSIVE
SOLU
TION
FOR
DOING
THREE
DIMENSIONAL
GRAPHICS
WITH
MOST
OF
ITS
FOCUS
ON
RENDERING
VIDEO
OR
SIMPLE
USER
INTERFACES
ANOTHER
TECHNOLOGY
THAT
EVOLVED
WAS
JAVASCRIPT
JAVASCRIPT
IS
A
DERIVATIVE
LAN
GUAGE
OF
JAVA
THAT
IS
INTERPRETED
AND
EXECUTED
BY
THE
WEB
BROWSER
AS
COMPARED
TO
A
VIRTUAL
MACHINE
PLUGIN
THIS
ALLOWS
TIGHTER
INTEGRATION
OF
NORMAL
WEB
PAGE
REN
DERING
AS
INTERACTIVE
USER
CONTROLLED
RENDERING
ONCE
AGAIN
HOWEVER
JAVASCRIPT
RENDERING
CAPABILITIES
WERE
MOSTLY
FOCUSED
ON
TWO
DIMENSIONAL
OPERATIONS
AND
MOST
THREE
DIMENSIONAL
RENDERINGS
WERE
DONE
THROUGH
SOFTWARE
RENDERERS
IMPLEMENTED
IN
JAVASCRIPT
UNTIL
RECENTLY
THERE
WASN
T
A
WIDELY
ADOPTED
STANDARD
FOR
INTERACTIVE
THREE
DIMENSIONAL
GRAPHICS
WEBGL
WEBGL
IS
A
DERIVATIVE
OF
OPENGL
OR
MORE
SPECIFICALLY
OPENGL
ES
VERSION
THE
EMBEDDED
SYSTEM
VERSION
OF
OPENGL
IT
PROVIDES
JAVASCRIPT
BINDINGS
FOR
OPENGL
FUNCTIONS
AND
ALLOWS
AN
HTML
PAGE
USING
WEBGL
TO
RENDER
USING
ANY
GPU
RESOURCES
AVAILABLE
IN
THE
SYSTEM
WHERE
THE
WEB
BROWSER
IS
RUNNING
WEBGL
IS
CURRENTLY
UNDER
DEVELOPMENT
BY
THE
KHRONOS
GROUP
THE
SAME
INDUS
TRY
CONSORTIUM
THAT
DEVELOPS
OPENGL
AT
THE
TIME
OF
THIS
WRITING
IT
INTEGRATES
THE
RENDERING
CAPABILITIES
OF
CANVAS
ELEMENT
AS
WITH
MODERN
OPENGL
APPLI
CATIONS
ALL
RENDERING
IS
CONTROLLED
BY
VERTEX
AND
FRAGMENT
SHADERS
OTHER
TREE
STRUCTURES
TREE
AND
DAG
STRUCTURES
PROVIDE
POWERFUL
TOOLS
TO
DESCRIBE
SCENES
TREES
ARE
ALSO
USED
IN
A
VARIETY
OF
OTHER
WAYS
IN
COMPUTER
GRAPHICS
OF
WHICH
WE
CONSIDER
THREE
THE
FIRST
IS
THE
USE
OF
EXPRESSION
TREES
TO
DESCRIBE
AN
OBJECT
HIERARCHY
FOR
SOLID
OBJECTS
THE
OTHER
TWO
DESCRIBE
SPATIAL
HIERARCHIES
THAT
WE
CAN
USE
TO
INCREASE
THE
EFFICIENCY
OF
MANY
RENDERING
ALGORITHMS
CSG
TREES
THE
POLYGONAL
REPRESENTATION
OF
OBJECTS
THAT
WE
HAVE
USED
HAS
MANY
STRENGTHS
AND
A
FEW
WEAKNESSES
THE
MOST
SERIOUS
WEAKNESS
IS
THAT
POLYGONS
DESCRIBE
ONLY
THE
SURFACES
THAT
ENCLOSE
THE
INTERIOR
OF
A
THREE
DIMENSIONAL
OBJECT
SUCH
AS
A
POLYHEDRON
IN
CAD
APPLICATIONS
THIS
LIMITATION
CAUSES
DIFFICULTIES
WHENEVER
WE
MUST
EMPLOY
ANY
VOLU
METRIC
PROPERTIES
OF
THE
GRAPHICAL
OBJECT
SUCH
AS
ITS
WEIGHT
OR
ITS
MOMENT
OF
INERTIA
IN
ADDITION
BECAUSE
WE
DISPLAY
AN
OBJECT
BY
DRAWING
ITS
EDGES
OR
SURFACES
THERE
CAN
BE
AMBIGUITIES
IN
THE
DISPLAY
FOR
EXAMPLE
THE
WIREFRAME
SHOWN
IN
FIGURE
CAN
BE
INTERPRETED
EITHER
AS
A
CUBE
WITH
A
HOLE
THROUGH
IT
CREATED
BY
REMOVAL
OF
A
CYLINDER
OR
AS
A
SOLID
CUBE
COMPOSED
OF
TWO
DIFFERENT
MATERIALS
CONSTRUCTIVE
SOLID
GEOMETRY
CSG
ADDRESSES
THESE
DIFFICULTIES
ASSUME
THAT
WE
START
WITH
A
SET
OF
ATOMIC
SOLID
GEOMETRIC
ENTITIES
SUCH
AS
PARALLELEPIPEDS
CYLINDERS
AND
SPHERES
THE
ATTRIBUTES
OF
THESE
OBJECTS
CAN
INCLUDE
SURFACE
PROPERTIES
SUCH
AS
COLOR
OR
REFLECTIVITY
BUT
ALSO
VOLUMETRIC
PROPERTIES
SUCH
AS
SIZE
AND
DENSITY
IN
DESCRIBING
SCENES
OF
SUCH
OBJECTS
WE
CONSIDER
THOSE
POINTS
IN
SPACE
THAT
CONSTITUTE
EACH
OBJECT
EQUIVALENTLY
EACH
OBJECT
IS
A
SET
OF
POINTS
AND
WE
CAN
USE
SET
ALGEBRA
TO
FORM
NEW
OBJECTS
FROM
THESE
SOLID
PRIMITIVES
FIGURE
WIREFRAME
THAT
HAS
TWO
POSSIBLE
INTERPRETA
TIONS
A
B
A
B
A
B
A
B
FIGURE
SET
OPERATIONS
A
B
C
D
A
B
C
D
FIGURE
CSG
OBJECT
CSG
MODELING
USES
THREE
SET
OPERATIONS
UNION
INTERSECTION
AND
SET
DIFFERENCE
THE
UNION
OF
TWO
SETS
A
AND
B
WRITTEN
A
B
CONSISTS
OF
ALL
POINTS
THAT
ARE
EITHER
IN
A
OR
IN
B
THE
INTERSECTION
OF
A
AND
B
A
B
IS
THE
SET
OF
ALL
POINTS
THAT
ARE
IN
BOTH
A
AND
B
THE
SET
DIFFERENCE
A
B
IS
THE
SET
OF
POINTS
THAT
ARE
IN
A
AND
ARE
NOT
IN
B
FIGURE
SHOWS
TWO
OBJECTS
AND
POSSIBLE
OBJECTS
CREATED
BY
THE
THREE
SET
OPERATIONS
OBJECTS
ARE
DESCRIBED
BY
ALGEBRAIC
EXPRESSIONS
THE
EXPRESSION
A
B
C
D
MIGHT
DESCRIBE
AN
OBJECT
SUCH
AS
THE
ONE
ILLUSTRATED
IN
FIGURE
TYPICALLY
WE
STORE
AND
PARSE
ALGEBRAIC
EXPRESSIONS
USING
EXPRESSION
TREES
WHERE
INTERNAL
NODES
STORE
OPERATIONS
AND
TERMINAL
NODES
STORE
OPERANDS
FOR
EXAMPLE
THE
TREE
IN
FIGURE
IS
A
CSG
TREE
THAT
REPRESENTS
THE
OBJECT
A
B
C
D
IN
FIGURE
WE
CAN
EVALUATE
OR
RENDER
THE
CSG
TREE
BY
A
POSTORDER
TRAVERSAL
THAT
IS
WE
RECURSIVELY
EVALUATE
THE
TREE
TO
THE
LEFT
OF
A
NODE
AND
THE
TREE
ON
THE
RIGHT
OF
THE
NODE
AND
FINALLY
USE
THESE
VALUES
TO
EVALUATE
THE
NODE
ITSELF
RENDERING
OF
OBJECTS
IN
CSG
OFTEN
IS
DONE
WITH
A
VARIANT
OF
RAY
TRACING
SEE
EXERCISE
AND
CHAPTER
FIGURE
CSG
TREE
FIGURE
COLLECTION
OF
POLYGONS
AND
A
VIEWER
BSP
TREES
SCENE
GRAPHS
AND
CSG
TREES
DESCRIBE
HIERARCHICAL
RELATIONSHIPS
AMONG
THE
PARTS
OF
AN
OBJECT
WE
CAN
ALSO
USE
TREES
TO
DESCRIBE
THE
WORLD
OBJECT
SPACE
AND
ENCAPSULATE
THE
SPATIAL
RELATIONSHIPS
AMONG
GROUPS
OF
OBJECTS
THESE
RELATIONSHIPS
CAN
LEAD
TO
FAST
METHODS
OF
VISIBILITY
TESTING
TO
DETERMINE
WHICH
OBJECTS
MIGHT
BE
SEEN
BY
A
CAMERA
THUS
AVOIDING
PROCESSING
ALL
OBJECTS
WITH
TESTS
SUCH
AS
THE
Z
BUFFER
ALGORITHM
THESE
TECHNIQUES
HAVE
BECOME
VERY
IMPORTANT
IN
REAL
TIME
ANIMATIONS
FOR
COMPUTER
GAMES
ONE
APPROACH
TO
SPATIAL
HIERARCHY
STARTS
WITH
THE
OBSERVATION
THAT
A
PLANE
DIVIDES
OR
PARTITIONS
THREE
DIMENSIONAL
SPACE
INTO
TWO
PARTS
HALF
SPACES
SUCCESSIVE
PLANES
SUBDIVIDE
SPACE
INTO
INCREASINGLY
SMALLER
PARTITIONS
IN
TWO
DIMENSIONS
WE
CAN
USE
LINES
TO
PARTITION
SPACE
CONSIDER
THE
POLYGONS
SHOWN
IN
FIGURE
WITH
THE
VIEWER
LOCATED
AS
INDICATED
ARGUING
AS
WE
DID
IN
CHAPTER
THERE
IS
AN
ORDER
IN
WHICH
TO
PAINT
THESE
POLYGONS
SO
THAT
THE
IMAGE
WILL
BE
CORRECT
RATHER
THAN
USING
A
METHOD
SUCH
AS
DEPTH
SORT
EACH
TIME
WE
WANT
TO
RENDER
THESE
POLYGONS
WE
CAN
STORE
THE
RELATIVE
POSITIONING
INFORMATION
IN
A
TREE
WE
START
THE
CONSTRUCTION
OF
THE
TREE
USING
THE
PLANE
OF
ONE
POLYGON
TO
SEPARATE
GROUPS
OF
POLYGONS
THAT
ARE
IN
FRONT
OF
IT
FROM
THOSE
THAT
ARE
BEHIND
IT
FOR
EXAMPLE
CONSIDER
A
SIMPLE
WORLD
IN
WHICH
ALL
THE
POLYGONS
ARE
PARALLEL
AND
ARE
ORIENTED
WITH
THEIR
NORMALS
PARALLEL
TO
THE
Z
AXIS
THIS
ASSUMPTION
MAKES
IT
EASIER
TO
ILLUSTRATE
THE
ALGORITHM
BUT
DOES
NOT
AFFECT
THE
ALGORITHM
AS
LONG
AS
THE
PLANE
FIGURE
TOP
VIEW
OF
POLYGONS
FIGURE
BINARY
SPACE
PARTITIONING
BSP
TREE
OF
ANY
POLYGON
SEPARATES
THE
OTHER
POLYGONS
INTO
TWO
GROUPS
IN
THIS
WORLD
THE
VIEW
FROM
THE
Z
DIRECTION
IS
AS
SHOWN
IN
FIGURE
PLANE
A
SEPARATES
THE
POLYGONS
INTO
TWO
GROUPS
ONE
CONTAINING
B
AND
C
WHICH
ARE
IN
FRONT
OF
A
AND
THE
SECOND
CONTAINING
D
E
AND
F
WHICH
ARE
BEHIND
A
WE
USE
THIS
PLANE
TO
START
A
BINARY
SPACE
PARTITIONING
TREE
BSP
TREE
THAT
STORES
THE
SEPARATING
PLANES
AND
THE
ORDER
IN
WHICH
THEY
ARE
APPLIED
THUS
IN
THE
BSP
TREE
IN
FIGURE
A
IS
AT
THE
ROOT
B
AND
C
ARE
IN
THE
LEFT
SUBTREE
AND
D
E
AND
F
ARE
IN
THE
RIGHT
SUBTREE
PROCEEDING
RECURSIVELY
C
IS
BEHIND
THE
PLANE
OF
B
SO
WE
CAN
COMPLETE
THE
LEFT
SUBTREE
THE
PLANE
OF
D
SEPARATES
E
AND
F
THUS
COMPLETING
THE
RIGHT
SUBTREE
NOTE
THAT
FOR
A
GIVEN
SET
OF
POLYGONS
THERE
ARE
MULTIPLE
POSSIBLE
BSP
TREES
CORRESPONDING
TO
THE
ORDER
IN
WHICH
WE
CHOOSE
TO
MAKE
OUR
PARTITIONS
IN
THE
GENERAL
CASE
IF
A
SEPARATING
PLANE
INTERSECTS
A
POLYGON
THEN
WE
CAN
BREAK
UP
THE
POLYGON
INTO
TWO
POLYGONS
ONE
IN
FRONT
OF
THE
PLANE
AND
ONE
BEHIND
IT
SIMILAR
TO
WHAT
WE
DID
WITH
OVERLAPPING
POLYGONS
IN
THE
DEPTH
SORT
ALGORITHM
IN
CHAPTER
FIGURE
MOVEMENT
OF
THE
VIEWER
TO
BACK
WE
CAN
USE
THIS
TREE
TO
PAINT
THE
POLYGONS
BY
DOING
A
BACKWARD
IN
ORDER
TRAVER
SAL
THAT
IS
WE
TRAVERSE
THE
TREE
RECURSIVELY
DRAWING
THE
RIGHT
SUBTREE
FIRST
FOLLOWED
BY
THE
ROOT
AND
FINALLY
BY
THE
LEFT
SUBTREE
ONE
OF
THE
ADVANTAGES
OF
BSP
TREES
IS
THAT
WE
CAN
USE
THE
SAME
TREE
EVEN
IF
THE
VIEWER
MOVES
BY
CHANGING
THE
TRAVERSAL
ALGO
RITHM
IF
THE
VIEWER
MOVES
TO
THE
BACK
AS
SHOWN
IN
FIGURE
THEN
WE
CAN
PAINT
THE
POLYGONS
USING
A
STANDARD
IN
ORDER
TRAVERSAL
LEFT
SUBTREE
ROOT
RIGHT
SUBTREE
ALSO
NOTE
THAT
WE
CAN
USE
THE
ALGORITHM
RECURSIVELY
WHEREVER
PLANES
SEPARATE
SETS
OF
POLY
GONS
OR
OTHER
OBJECTS
INTO
GROUPS
CALLED
CLUSTERS
THUS
WE
MIGHT
GROUP
POLYGONS
INTO
POLYHEDRAL
OBJECTS
THEN
GROUP
THESE
POLYHEDRA
INTO
CLUSTERS
WE
CAN
THEN
AP
PLY
THE
ALGORITHM
WITHIN
EACH
CLUSTER
IN
APPLICATIONS
SUCH
AS
FLIGHT
SIMULATORS
WHERE
THE
WORLD
MODEL
DOES
NOT
CHANGE
BUT
THE
VIEWER
POSITION
DOES
THE
USE
OF
BSP
TREES
CAN
BE
EFFICIENT
FOR
DOING
VISIBLE
SURFACE
DETERMINATION
DURING
RENDERING
THE
TREE
CONTAINS
ALL
THE
REQUIRED
INFORMATION
TO
PAINT
THE
POLYGONS
THE
VIEWER
POSITION
DE
TERMINES
THE
TRAVERSAL
ALGORITHM
BSP
TREES
ARE
BUT
ONE
FORM
OF
HIERARCHY
TO
DIVIDE
SPACE
ANOTHER
IS
THE
USE
OF
BOUNDING
VOLUMES
SUCH
AS
SPHERES
THE
ROOT
OF
A
TREE
OF
BOUNDING
SPHERES
WOULD
BE
THE
SPHERE
THAT
CONTAINS
ALL
THE
OBJECTS
IN
A
SCENE
SUBTREES
WOULD
THEN
CORRESPOND
TO
GROUPS
OF
OBJECTS
WITHIN
THE
LARGER
SPHERE
AND
THE
ROOT
NODES
WOULD
BE
THE
BOUNDING
SPHERES
FOR
EACH
OBJECT
WE
COULD
USE
THE
SAME
IDEA
WITH
OTHER
TYPES
OF
BOUNDING
VOLUMES
SUCH
AS
THE
BOUNDING
BOXES
THAT
WE
DISCUSSED
IN
CHAPTER
SPHERES
ARE
PARTICULARLY
GOOD
FOR
INTERACTIVE
GAMES
BECAUSE
WE
CAN
QUICKLY
DETERMINE
IF
AN
OBJECT
IS
POTENTIALLY
VISIBLE
OR
WHETHER
TWO
OBJECTS
MIGHT
COLLIDE
QUADTREES
AND
OCTREES
ONE
LIMITATION
OF
BSP
TREES
IS
THAT
THE
PLANES
THAT
SEPARATE
POLYGONS
CAN
HAVE
AN
ARBITRARY
ORIENTATION
SO
THAT
CONSTRUCTION
OF
THE
TREE
CAN
BE
COSTLY
INVOLVING
ORDERING
AND
OFTEN
SPLITTING
OF
POLYGONS
OCTREES
AND
QUADTREES
AVOID
THIS
PROBLEM
BY
USING
SEPARATING
PLANES
AND
LINES
PARALLEL
TO
THE
COORDINATE
AXES
CONSIDER
THE
TWO
DIMENSIONAL
PICTURE
IN
FIGURE
WE
ASSUME
THAT
THIS
PIC
TURE
IS
COMPOSED
OF
BLACK
AND
WHITE
PIXELS
PERHAPS
FORMED
BY
THE
RENDERING
OF
A
THREE
DIMENSIONAL
SCENE
IF
WE
WISH
TO
STORE
THE
SCENE
WE
CAN
SAVE
IT
AS
A
BINARY
ARRAY
BUT
NOTICE
THE
GREAT
DEAL
OF
COHERENCE
IN
THE
PICTURE
PIXELS
OF
EACH
COLOR
ARE
CLUSTERED
FIGURE
TWO
DIMENSIONAL
SPACE
OF
PIXELS
FIGURE
FIRST
SUBDIVISION
OF
SPACE
TOGETHER
WE
CAN
DRAW
TWO
LINES
AS
IN
FIGURE
DIVIDING
THE
REGION
INTO
QUADRANTS
NOTING
THAT
ONE
QUADRANT
IS
ALL
WHITE
WE
CAN
ASSIGN
A
SINGLE
COLOR
TO
IT
FOR
THE
OTHER
THREE
WE
CAN
SUBDIVIDE
AGAIN
AND
CONTINUE
SUBDIVIDING
ANY
QUADRANT
THAT
CONTAINS
PIXELS
OF
MORE
THAN
A
SINGLE
COLOR
THIS
INFORMATION
CAN
BE
STORED
IN
A
TREE
CALLED
A
QUADTREE
IN
WHICH
EACH
LEVEL
CORRESPONDS
TO
A
SUBDIVISION
AND
EACH
NODE
HAS
FOUR
CHILDREN
THUS
THE
QUADTREE
FOR
OUR
ORIGINAL
SIMPLE
PICTURE
IS
AS
SHOWN
IN
FIGURE
BECAUSE
WE
CONSTRUCT
THE
QUADTREE
BY
SUBDIVIDING
SPACE
WITH
LINES
PARALLEL
TO
THE
COORDINATE
AXES
FORMATION
AND
TRAVERSAL
OF
THE
TREE
ARE
SIMPLER
THAN
ARE
THE
CORRESPONDING
OPERATIONS
FOR
A
BSP
TREE
ONE
OF
THE
MOST
IMPORTANT
ADVANTAGES
OF
QUADTREES
IS
THAT
THEY
CAN
REDUCE
THE
AMOUNT
OF
MEMORY
NEEDED
TO
STORE
IMAGES
QUADTREES
PARTITION
TWO
DIMENSIONAL
SPACE
THEY
CAN
ALSO
BE
USED
TO
PARTITION
OBJECT
SPACE
IN
A
MANNER
SIMILAR
TO
BSP
TREES
AND
THUS
CAN
BE
TRAVERSED
IN
AN
ORDER
DEPENDING
ON
THE
POSITION
OF
THE
VIEWER
SO
AS
TO
RENDER
CORRECTLY
THE
OBJECTS
IN
EACH
REGION
IN
THREE
DIMENSIONS
QUADTREES
EXTEND
TO
OCTREES
THE
PARTITIONING
IS
DONE
BY
PLANES
PARALLEL
TO
THE
COORDINATE
AXES
AND
EACH
STEP
OF
THE
PARTITIONING
SUBDIVIDES
SPACE
INTO
EIGHT
OCTANTS
AS
SHOWN
IN
FIGURE
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
CHAPTER
OBJECTIVES
AFTER
READING
THIS
CHAPTER
YOU
LL
BE
ABLE
TO
DO
THE
FOLLOWING
VIEW
A
THREE
DIMENSIONAL
GEOMETRIC
MODEL
BY
TRANSFORMING
IT
TO
HAVE
ANY
SIZE
ORIENTATION
AND
PERSPECTIVE
UNDERSTAND
A
VARIETY
OF
USEFUL
COORDINATE
SYSTEMS
WHICH
ONES
ARE
REQUIRED
BY
OPENGL
AND
HOW
TO
TRANSFORM
FROM
ONE
TO
THE
NEXT
TRANSFORM
SURFACE
NORMALS
CLIP
YOUR
GEOMETRIC
MODEL
AGAINST
ARBITRARY
PLANES
CAPTURE
THE
GEOMETRIC
RESULT
OF
THESE
TRANSFORMS
BEFORE
DISPLAYING
THEM
PREVIOUS
CHAPTERS
HINTED
AT
HOW
TO
MANIPULATE
YOUR
GEOMETRY
TO
FIT
INTO
THE
VIEWING
AREA
ON
THE
SCREEN
BUT
WE
LL
GIVE
A
COMPLETE
TREATMENT
IN
THIS
CHAPTER
THIS
INCLUDES
FEEDBACK
THE
ABILITY
TO
SEND
IT
BACK
TO
THE
APPLICATION
AS
WELL
AS
CLIPPING
THE
INTERSECTION
OF
YOUR
GEOMETRY
WITH
PLANES
EITHER
BY
OPENGL
OR
BY
YOU
TYPICALLY
YOU
LL
HAVE
MANY
OBJECTS
WITH
INDEPENDENTLY
SPECIFIED
GEOMETRIC
COORDINATES
THESE
NEED
TO
BE
TRANSFORMED
MOVED
SCALED
AND
ORIENTED
INTO
THE
SCENE
THEN
THE
SCENE
ITSELF
NEEDS
TO
BE
VIEWED
FROM
A
PARTICULAR
LOCATION
DIRECTION
SCALING
AND
ORIENTATION
THIS
CHAPTER
CONTAINS
THE
FOLLOWING
MAJOR
SECTIONS
VIEWING
PROVIDES
AN
OVERVIEW
OF
HOW
COMPUTER
GRAPHICS
SIMULATES
THE
THREE
DIMENSIONAL
WORLD
ON
A
TWO
DIMENSIONAL
DISPLAY
USER
TRANSFORMATIONS
CHARACTERIZE
THE
VARIOUS
TYPES
OF
TRANSFORMATIONS
THAT
YOU
CAN
EMPLOY
IN
SHADERS
TO
MANIPULATE
VERTEX
DATA
OPENGL
TRANSFORMATIONS
ARE
THE
TRANSFORMATIONS
OPENGL
IMPLEMENTS
TRANSFORM
FEEDBACK
DESCRIBES
PROCESSING
AND
STORING
VERTEX
DATA
USING
VERTEX
TRANSFORMING
SHADERS
TO
OPTIMIZE
RENDERING
PERFORMANCE
VIEWING
IF
WE
DISPLAY
A
TYPICAL
GEOMETRIC
MODEL
COORDINATES
DIRECTLY
ONTO
THE
DISPLAY
DEVICE
WE
PROBABLY
WON
T
SEE
MUCH
THE
RANGE
OF
COORDINATES
IN
THE
MODEL
E
G
TO
METERS
WILL
NOT
MATCH
THE
RANGE
OF
COORDINATES
CONSUMED
BY
THE
DISPLAY
DEVICE
E
G
TO
PIXELS
AND
IT
IS
CUMBERSOME
TO
RESTRICT
OURSELVES
TO
COORDINATES
THAT
WOULD
MATCH
IN
ADDITION
WE
WANT
TO
VIEW
THE
MODEL
FROM
DIFFERENT
LOCATIONS
DIRECTIONS
AND
PERSPECTIVES
HOW
DO
WE
COMPENSATE
FOR
THIS
FUNDAMENTALLY
THE
DISPLAY
IS
A
FLAT
FIXED
TWO
DIMENSIONAL
RECTANGLE
WHILE
OUR
MODEL
CONTAINS
EXTENDED
THREE
DIMENSIONAL
GEOMETRY
THIS
CHAPTER
WILL
SHOW
HOW
TO
PROJECT
OUR
MODEL
THREE
DIMENSIONAL
COORDINATES
ONTO
THE
FIXED
TWO
DIMENSIONAL
SCREEN
COORDINATES
THE
KEY
TOOLS
FOR
PROJECTING
THREE
DIMENSIONS
DOWN
TO
TWO
ARE
A
VIEWING
MODEL
USE
OF
HOMOGENEOUS
COORDINATES
APPLICATION
OF
LINEAR
TRANSFORMATIONS
BY
MATRIX
MULTIPLICATION
AND
SETTING
UP
A
VIEWPORTMAPPING
THESE
TOOLS
ARE
EACH
DISCUSSED
IN
DETAIL
BELOW
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
VIEWING
MODEL
FOR
THE
TIME
BEING
IT
IS
IMPORTANT
TO
KEEP
THINKING
IN
TERMS
OF
THREE
DIMENSIONAL
COORDINATES
WHILE
MAKING
MANY
OF
THE
DECISIONS
THAT
DETERMINE
WHAT
IS
DRAWN
ON
THE
SCREEN
IT
IS
TOO
EARLY
TO
START
THINKING
ABOUT
WHICH
PIXELS
NEED
TO
BE
DRAWN
INSTEAD
TRY
TO
VISUALIZE
THREE
DIMENSIONAL
SPACE
IT
IS
LATER
AFTER
THE
VIEWING
TRANSFORMATIONS
ARE
COMPLETED
AFTER
THE
SUBJECTS
OF
THIS
CHAPTER
THAT
PIXELS
WILL
ENTER
THE
DISCUSSION
CAMERA
MODEL
THE
COMMON
TRANSFORMATION
PROCESS
FOR
PRODUCING
THE
DESIRED
VIEW
IS
ANALOGOUS
TO
TAKING
A
PHOTOGRAPH
WITH
A
CAMERA
AS
SHOWN
IN
FIGURE
THE
STEPS
WITH
A
CAMERA
OR
A
COMPUTER
MIGHT
BE
THE
FOLLOWING
FIGURE
STEPS
IN
CONFIGURING
AND
POSITIONING
THE
VIEWING
FRUSTUM
MOVE
YOUR
CAMERA
TO
THE
LOCATION
YOU
WANT
TO
SHOOT
FROM
AND
POINT
THE
CAMERA
THE
DESIRED
DIRECTION
VIEWING
TRANSFORMATION
MOVE
THE
SUBJECT
TO
BE
PHOTOGRAPHED
INTO
THE
DESIRED
LOCATION
IN
THE
SCENE
MODELING
TRANSFORMATION
CHOOSE
A
CAMERA
LENS
OR
ADJUST
THE
ZOOM
PROJECTION
TRANSFORMATION
TAKE
THE
PICTURE
APPLY
THE
TRANSFORMATIONS
VIEWING
STRETCH
OR
SHRINK
THE
RESULTING
IMAGE
TO
THE
DESIRED
PICTURE
SIZE
VIEWPORT
TRANSFORMATION
FOR
GRAPHICS
THIS
ALSO
INCLUDES
STRETCHING
OR
SHRINKING
THE
DEPTH
DEPTH
RANGE
SCALING
THIS
IS
NOT
TO
BE
CONFUSED
WITH
STEP
WHICH
SELECTED
HOW
MUCH
OF
THE
SCENE
TO
CAPTURE
NOT
HOW
MUCH
TO
STRETCH
THE
RESULT
NOTICE
THAT
STEPS
AND
CAN
BE
CONSIDERED
DOING
THE
SAME
THING
BUT
IN
OPPOSITE
DIRECTIONS
YOU
CAN
LEAVE
THE
CAMERA
WHERE
YOU
FOUND
IT
AND
BRING
THE
SUBJECT
IN
FRONT
OF
IT
OR
LEAVE
THE
SUBJECT
WHERE
IT
IS
AND
MOVE
THE
CAMERA
TOWARD
THE
SUBJECT
MOVING
THE
CAMERA
TO
THE
LEFT
IS
THE
SAME
AS
MOVING
THE
SUBJECT
TO
THE
RIGHT
TWISTING
THE
CAMERA
CLOCKWISE
IS
THE
SAME
AS
TWISTING
THE
SUBJECT
COUNTERCLOCKWISE
IT
IS
REALLY
UP
TO
YOU
WHICH
MOVEMENTS
YOU
PERFORM
AS
PART
OF
STEP
WITH
THE
REMAINDER
BELONGING
TO
STEP
BECAUSE
OF
THIS
THESE
TWO
STEPS
ARE
NORMALLY
LUMPED
TOGETHER
AS
THE
MODEL
VIEW
TRANSFORM
IT
WILL
THOUGH
ALWAYS
CONSIST
OF
SOME
SEQUENCE
OF
MOVEMENTS
TRANSLATIONS
ROTATIONS
AND
SCALINGS
THE
DEFINING
CHARACTERISTIC
OF
THIS
COMBINATION
IS
IN
MAKING
A
SINGLE
UNIFIED
SPACE
FOR
ALL
THE
OBJECTS
ASSEMBLED
INTO
ONE
SCENE
TO
VIEW
OR
EYE
SPACE
IN
OPENGL
YOU
ARE
RESPONSIBLE
FOR
DOING
STEPS
THROUGH
ABOVE
IN
YOUR
SHADERS
THAT
IS
YOU
LL
BE
REQUIRED
TO
HAND
OPENGL
COORDINATES
WITH
THE
MODEL
VIEW
AND
PROJECTIVE
TRANSFORMATIONS
ALREADY
DONE
YOU
ARE
ALSO
RESPONSIBLE
FOR
TELLING
OPENGL
HOW
TO
DO
THE
VIEWPORT
TRANSFORMATION
FOR
STEP
BUT
THE
FIXED
RENDERING
PIPELINE
WILL
DO
THAT
TRANSFORMATION
FOR
YOU
AS
DESCRIBED
IN
OPENGL
TRANSFORMATIONS
ON
PAGE
FIGURE
SUMMARIZES
THE
COORDINATE
SYSTEMS
REQUIRED
BY
OPENGL
FOR
THE
FULL
PROCESS
SO
FAR
WE
HAVE
DISCUSSED
THE
SECOND
BOX
USER
TRANSFORMS
BUT
ARE
SHOWING
THE
REST
TO
SET
THE
CONTEXT
FOR
THE
WHOLE
VIEWING
STACK
FINISHING
WITH
HOW
YOU
SPECIFY
YOUR
VIEWPORT
AND
DEPTH
RANGE
TO
OPENGL
THE
FINAL
COORDINATES
HANDED
TO
OPENGL
FOR
CLIPPING
AND
RASTERIZATION
ARE
NORMALIZED
HOMOGENEOUS
COORDINATES
THAT
IS
THE
COORDINATES
TO
BE
DRAWN
WILL
BE
IN
THE
RANGE
UNTIL
OPENGL
SCALES
THEM
TO
FIT
THE
VIEWPORT
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
YOUR
STARTING
COORDINATES
YOU
NEED
THESE
IN
ORDER
TO
TRANSLATE
AND
PROJECT
OPENGL
REQUIRED
INPUT
SCALED
BY
OPENGL
TO
YOUR
VIEWPORT
AND
DEPTH
RANGE
OBJECT
UNITS
COULD
BE
METERS
INCHES
ETC
SAME
UNITS
UNITS
NORMALIZED
SUCH
THAT
DIVIDE
BY
W
LEAVES
VISIBLE
POINTS
BETWEEN
TO
RANGE
OF
TO
FOR
X
AND
Y
AND
TO
FOR
Z
X
Y
ARE
WINDOW
COORDINATES
Z
IS
DEPTH
COORDINATE
X
Y
UNITS
ARE
IN
PIXELS
WITH
FRACTIONS
Z
IS
IN
RANGE
OF
TO
OR
DEPTH
RANGE
RASTERIZATION
FIGURE
COORDINATE
SYSTEMS
REQUIRED
BY
OPENGL
THE
COORDINATE
SYSTEMS
ARE
THE
BOXES
ON
THE
LEFT
THE
CENTRAL
BOXES
TRANSFORM
FROM
ONE
COORDINATE
SYSTEM
TO
THE
NEXT
UNITS
ARE
DESCRIBED
TO
THE
RIGHT
IT
WILL
BE
USEFUL
TO
NAME
ADDITIONAL
COORDINATE
SYSTEMS
LYING
WITHIN
THE
VIEW
MODEL
AND
PROJECTION
TRANSFORMS
THESE
ARE
NO
LONGER
PART
OF
THE
OPENGL
MODEL
BUT
STILL
HIGHLY
USEFUL
AND
CONVENTIONAL
WHEN
USING
SHADERS
TO
ASSEMBLE
A
SCENE
OR
CALCULATE
LIGHTING
FIGURE
SHOWS
AN
EXPANSION
OF
THE
USER
TRANSFORMS
BOX
FROM
FIGURE
IN
PARTICULAR
MOST
LIGHTING
CALCULATIONS
DONE
IN
SHADERS
WILL
BE
DONE
IN
EYE
SPACE
EXAMPLES
MAKING
FULL
USE
OF
EYE
SPACE
ARE
PROVIDED
IN
CHAPTER
LIGHT
AND
SHADOW
VIEWING
FIGURE
USER
COORDINATE
SYSTEMS
UNSEEN
BY
OPENGL
THESE
COORDINATE
SYSTEMS
WHILE
NOT
USED
BY
OPENGL
ARE
STILL
VITAL
FOR
LIGHTING
AND
OTHER
SHADER
OPERATIONS
VIEWING
FRUSTUM
STEP
IN
OUR
CAMERA
ANALOGY
CHOSE
A
LENS
OR
ZOOM
AMOUNT
THIS
SELECTS
HOW
NARROW
OR
WIDE
OF
A
RECTANGULAR
CONE
THROUGH
THE
SCENE
THE
CAMERA
WILL
CAPTURE
ONLY
GEOMETRY
FALLING
WITHIN
THIS
CONE
WILL
BE
IN
THE
FINAL
PICTURE
AT
THE
SAME
TIME
STEP
WILL
ALSO
PRODUCE
THE
INFORMATION
NEEDED
IN
THE
HOMOGENEOUS
FOURTH
COORDINATE
W
TO
LATER
CREATE
THE
FORESHORTENING
EFFECT
OF
PERSPECTIVE
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
FIGURE
A
VIEW
FRUSTUM
OPENGL
WILL
ADDITIONALLY
EXCLUDE
GEOMETRY
THAT
IS
TOO
CLOSE
OR
TOO
FAR
AWAY
THAT
IS
THOSE
IN
FRONT
OF
A
NEAR
PLANE
OR
THOSE
BEHIND
A
FAR
PLANE
THERE
IS
NO
COUNTERPART
TO
THIS
IN
THE
CAMERA
ANALOGY
OTHER
THAN
CLEANING
FOREIGN
OBJECTS
FROM
INSIDE
YOUR
LENS
BUT
IS
HELPFUL
IN
A
VARIETY
OF
WAYS
MOST
IMPORTANTLY
OBJECTS
APPROACHING
THE
CONE
APEX
APPEAR
INFINITELY
LARGE
WHICH
CAUSES
PROBLEMS
ESPECIALLY
IF
THEY
SHOULD
REACH
THE
APEX
AT
THE
OTHER
END
OF
THIS
SPECTRUM
OBJECTS
TOO
FAR
AWAY
TO
BE
DRAWN
IN
THE
SCENE
ARE
BEST
EXCLUDED
FOR
PERFORMANCE
REASONS
AND
SOME
DEPTH
PRECISION
REASONS
AS
WELL
IF
DEPTH
MUST
SPAN
TOO
LARGE
A
DISTANCE
THUS
WE
HAVE
TWO
ADDITIONAL
PLANES
INTERSECTING
THE
FOUR
PLANES
OF
THE
RECTANGULAR
VIEWING
CONE
AS
SHOWN
IN
FIGURE
THESE
SIX
PLANES
DEFINE
A
FRUSTUM
SHAPED
VIEWING
VOLUME
FRUSTUM
CLIPPING
ANY
PRIMITIVE
FALLING
OUTSIDE
THE
FOUR
PLANES
FORMING
THE
RECTANGULAR
VIEWING
CONE
WILL
NOT
GET
DRAWN
CULLED
AS
IT
WOULD
FALL
OUTSIDE
OUR
RECTANGULAR
DISPLAY
FURTHER
ANYTHING
IN
FRONT
OF
THE
NEAR
PLANE
OR
BEHIND
THE
FAR
PLANE
WILL
ALSO
BE
CULLED
WHAT
ABOUT
A
PRIMITIVE
THAT
SPANS
BOTH
SIDES
OF
ONE
OF
THESE
PLANES
OPENGL
WILL
CLIP
SUCH
PRIMITIVES
THAT
IS
IT
WILL
COMPUTE
THE
INTERSECTION
OF
THEIR
GEOMETRY
WITH
THE
PLANE
AND
FORM
NEW
GEOMETRY
FOR
JUST
THE
SHAPE
THAT
FALLS
WITHIN
THE
FRUSTUM
VIEWING
BECAUSE
OPENGL
HAS
TO
PERFORM
THIS
CLIPPING
TO
DRAW
CORRECTLY
THE
APPLICATION
MUST
TELL
OPENGL
WHERE
THIS
FRUSTUM
IS
THIS
IS
PART
OF
STEP
OF
THE
CAMERA
ANALOGY
WHERE
THE
SHADER
MUST
APPLY
THE
TRANSFORMATIONS
BUT
OPENGL
MUST
KNOW
ABOUT
IT
FOR
CLIPPING
THERE
ARE
WAYS
SHADERS
CAN
CLIP
AGAINST
ADDITIONAL
USER
PLANES
DISCUSSED
LATER
BUT
THE
SIX
FRUSTUM
PLANES
ARE
AN
INTRINSIC
PART
OF
OPENGL
ORTHOGRAPHIC
VIEWING
MODEL
SOMETIMES
A
PERSPECTIVE
VIEW
IS
NOT
DESIRED
AND
AN
ORTHOGRAPHIC
VIEW
IS
USED
INSTEAD
THIS
TYPE
OF
PROJECTION
IS
USED
BY
APPLICATIONS
FOR
ARCHITECTURAL
BLUEPRINTS
AND
COMPUTER
AIDED
DESIGN
WHERE
IT
CRUCIAL
TO
MAINTAIN
THE
ACTUAL
SIZES
OF
OBJECTS
AND
THE
ANGLES
BETWEEN
THEM
AS
THEY
RE
PROJECTED
THIS
COULD
BE
DONE
SIMPLY
BY
IGNORING
ONE
OF
THE
X
Y
OR
Z
COORDINATES
LETTING
THE
OTHER
TWO
COORDINATES
GIVE
TWO
DIMENSIONAL
LOCATIONS
YOU
WOULD
DO
THAT
OF
COURSE
AFTER
ORIENTING
THE
OBJECTS
AND
THE
SCENE
WITH
MODEL
VIEW
TRANSFORMATIONS
AS
WITH
THE
CAMERA
MODEL
BUT
IN
THE
END
YOU
WILL
STILL
NEED
TO
LOCATE
AND
SCALE
THE
RESULTING
MODEL
FOR
DISPLAY
IN
NORMALIZED
DEVICE
COORDINATES
THE
TRANSFORMATION
FOR
THIS
IS
THE
LAST
ONE
GIVEN
IN
THE
NEXT
SECTION
USER
TRANSFORMATIONS
INITIAL
MODEL
COORDINATES
STAGES
THAT
TRANSFORM
COORDINATES
TO
OPENGL
REQUIRED
FORM
TRANSFORM
FEEDBACK
COORDINATES
OPENGL
CAN
MAP
TO
A
WINDOW
CLIP
COORDINATES
RASTERIZER
FIGURE
PIPELINE
SUBSET
FOR
USER
SHADER
PART
OF
TRANSFORMING
COORDINATES
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
THE
STAGES
OF
THE
RENDERING
PIPELINE
THAT
TRANSFORM
THREE
DIMENSIONAL
COORDINATES
FOR
OPENGL
VIEWING
ARE
SHOWN
IN
FIGURE
ESSENTIALLY
THEY
ARE
THE
PROGRAMMABLE
STAGES
APPEARING
BEFORE
RASTERIZATION
BECAUSE
THESE
STAGES
ARE
PROGRAMMABLE
YOU
HAVE
A
LOT
OF
FLEXIBILITY
IN
THE
INITIAL
FORM
OF
YOUR
COORDINATES
AND
IN
HOW
YOU
TRANSFORM
THEM
HOWEVER
YOU
ARE
CONSTRAINED
TO
END
WITH
THE
FORM
THE
SUBSEQUENT
FIXED
NONPROGRAMMABLE
STAGES
NEED
THAT
IS
WE
LL
NEED
TO
MAKE
HOMOGENEOUS
COORDINATES
THAT
ARE
READY
FOR
PERSPECTIVE
DIVISION
ALSO
REFERRED
TO
AS
CLIP
COORDINATES
WHAT
THAT
MEANS
AND
HOW
TO
DO
IT
ARE
THE
SUBJECTS
OF
THE
FOLLOWING
SECTIONS
EACH
OF
THE
VIEWING
MODEL
STEPS
ABOVE
WAS
CALLED
OUT
AS
A
TRANSFORMATION
THEY
ARE
ALL
LINEAR
TRANSFORMATIONS
THAT
CAN
BE
ACCOMPLISHED
THROUGH
MATRIX
MULTIPLICATION
ON
HOMOGENEOUS
COORDINATES
THE
UPCOMING
MATRIX
MULTIPLICATION
AND
HOMOGENOUS
COORDINATE
SECTIONS
GIVE
REFRESHERS
ON
THESE
TOPICS
UNDERSTANDING
THEM
IS
THE
KEY
TO
TRULY
UNDERSTANDING
HOW
OPENGL
TRANSFORMATIONS
WORK
IN
A
SHADER
TRANSFORMING
A
VERTEX
BY
A
MATRIX
LOOKS
LIKE
THIS
VERSION
CORE
UNIFORM
TRANSFORM
STAYS
THE
SAME
FOR
MANY
VERTICES
PRIMITIVE
GRANULARITY
IN
VERTEX
PER
VERTEX
DATA
SENT
EACH
TIME
THIS
SHADER
IS
RUN
VOID
MAIN
TRANSFORM
VERTEX
LINEAR
TRANSFORMATIONS
ARE
COMPOSABLE
SO
JUST
BECAUSE
OUR
CAMERA
ANALOGY
NEEDED
FOUR
TRANSFORMATION
STEPS
DOES
NOT
MEAN
WE
HAVE
TO
TRANSFORM
OUR
DATA
FOUR
TIMES
RATHER
ALL
THOSE
TRANSFORMATIONS
CAN
BE
COMPOSED
INTO
A
SINGLE
TRANSFORMATION
IF
WE
WANT
TO
TRANSFORM
OUR
MODEL
FIRST
BY
TRANSFORMATION
MATRIX
A
FOLLOWED
BY
TRANSFORMATION
MATRIX
B
WE
WILL
SEE
WE
CAN
DO
SO
WITH
TRANSFORMATION
MATRIX
C
WHERE
C
BA
BECAUSE
WE
ARE
SHOWING
EXAMPLES
OF
MATRIX
MULTIPLICATION
WITH
THE
VERTEX
ON
THE
RIGHT
AND
THE
MATRIX
ON
THE
LEFT
COMPOSING
TRANSFORMS
SHOW
UP
IN
REVERSE
ORDER
B
IS
APPLIED
TO
THE
RESULT
OF
APPLYING
A
TO
A
VERTEX
THE
DETAILS
BEHIND
THIS
ARE
EXPLAINED
IN
THE
UPCOMING
REFRESHER
SO
THE
GOOD
NEWS
IS
WE
CAN
COLLAPSE
ANY
NUMBER
OF
LINEAR
TRANSFORMATIONS
INTO
A
SINGLE
MATRIX
MULTIPLY
ALLOWING
THE
FREEDOM
TO
THINK
IN
TERMS
OF
WHATEVER
STEPS
ARE
MOST
CONVENIENT
USER
TRANSFORMATIONS
MATRIX
MULTIPLY
REFRESHER
FOR
OUR
USE
MATRICES
AND
MATRIX
MULTIPLICATION
ARE
NOTHING
MORE
THAN
A
CONVENIENT
MECHANISM
FOR
EXPRESSING
LINEAR
TRANSFORMATIONS
WHICH
IN
TURN
ARE
A
USEFUL
WAY
TO
DO
THE
COORDINATE
MANIPULATIONS
NEEDED
FOR
DISPLAYING
MODELS
THE
VITAL
MATRIX
MECHANISM
IS
EXPLAINED
HERE
WHILE
INTERESTING
USES
FOR
IT
WILL
COME
UP
IN
NUMEROUS
PLACES
IN
SUBSEQUENT
DISCUSSIONS
FIRST
A
DEFINITION
A
MATRIX
TAKES
A
FOUR
COMPONENT
VECTOR
TO
ANOTHER
FOUR
COMPONENT
VECTOR
THROUGH
MULTIPLICATION
BY
THE
FOLLOWING
RULE
A
B
C
D
X
AX
BY
CZ
DW
I
J
K
L
Z
IX
JY
KZ
LW
M
N
O
P
W
NOW
SOME
OBSERVATIONS
MX
NY
OZ
PW
EACH
COMPONENT
OF
THE
NEW
VECTOR
IS
A
LINEAR
FUNCTION
OF
ALL
THE
COMPONENTS
OF
THE
OLD
VECTOR
HENCE
THE
NEED
FOR
VALUES
IN
THE
MATRIX
THE
MULTIPLICATION
ALWAYS
TAKES
THE
VECTOR
TO
THIS
IS
CHARACTERISTIC
OF
LINEAR
TRANSFORMATIONS
AND
SHOWS
THAT
IF
THIS
WAS
A
MATRIX
TIMES
A
THREE
COMPONENT
VECTOR
WHY
TRANSLATION
MOVING
CAN
T
BE
DONE
WITH
A
MATRIX
MULTIPLY
WE
LL
SEE
HOW
TRANSLATING
A
THREE
COMPONENT
VECTOR
BECOMES
POSSIBLE
WITH
A
MATRIX
AND
HOMOGENEOUS
COORDINATES
IN
OUR
VIEWING
MODELS
WE
WILL
WANT
TO
TAKE
A
VECTOR
THROUGH
MULTIPLE
TRANSFORMATIONS
HERE
EXPRESSED
AS
MATRIX
MULTIPLICATIONS
BY
MATRICES
A
AND
THEN
B
VI
AV
VII
BVI
B
AV
BA
V
AND
WE
LL
WANT
TO
DO
THIS
EFFICIENTLY
BY
FINDING
A
MATRIX
C
SUCH
THAT
VII
CV
WHERE
C
BA
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
BEING
ABLE
TO
COMPOSE
THE
B
TRANSFORM
AND
THE
A
TRANSFORM
INTO
A
SINGLE
TRANSFORM
C
IS
A
BENEFIT
WE
GET
BY
STICKING
TO
LINEAR
TRANSFORMATIONS
THE
FOLLOWING
DEFINITION
OF
MATRIX
MULTIPLICATION
MAKES
ALL
OF
THIS
WORK
OUT
B34
WHERE
CIJ
THAT
IS
MATRIX
MULTIPLICATION
IS
NONCOMMUTATIVE
GENERALLY
SPEAKING
WHEN
MULTIPLYING
MATRICES
AND
A
AND
B
AB
BA
AND
GENERALLY
WHEN
MULTIPLYING
MATRIX
A
AND
VECTOR
V
AV
VA
SO
CARE
IS
NEEDED
TO
MULTIPLY
IN
THE
CORRECT
ORDER
MATRIX
MULTIPLICATION
IS
FORTUNATELY
ASSOCIATIVE
C
BA
CB
A
CBA
THAT
USEFUL
AS
ACCUMULATED
MATRIX
MULTIPLIES
ON
A
VECTOR
CAN
BE
RE
ASSOCIATED
C
B
AV
CBA
V
THIS
IS
A
KEY
RESULT
WE
WILL
TAKE
ADVANTAGE
OF
TO
IMPROVE
PERFORMANCE
HOMOGENEOUS
COORDINATES
THE
GEOMETRY
WE
WANT
TO
TRANSFORM
IS
INNATELY
THREE
DIMENSIONAL
HOWEVER
WE
WILL
GAIN
TWO
KEY
ADVANTAGES
BY
MOVING
FROM
USER
TRANSFORMATIONS
THREE
COMPONENT
CARTESIAN
COORDINATES
TO
FOUR
COMPONENT
HOMOGENEOUS
COORDINATES
THESE
ARE
THE
ABILITY
TO
APPLY
PERSPECTIVE
AND
THE
ABILITY
TO
TRANSLATE
MOVE
THE
MODEL
USING
ONLY
A
LINEAR
TRANSFORM
THAT
IS
WE
WILL
BE
ABLE
TO
GET
ALL
THE
ROTATIONS
TRANSLATIONS
SCALING
AND
PROJECTIVE
TRANSFORMATIONS
WE
NEED
BY
DOING
MATRIX
MULTIPLICATION
IF
WE
FIRST
MOVE
TO
A
FOUR
COORDINATE
SYSTEM
MORE
ACCURATELY
THE
PROJECTIVE
TRANSFORMATION
IS
A
KEY
STEP
IN
CREATING
PERSPECTIVE
AND
IT
IS
THE
STEP
WE
MUST
PERFORM
IN
OUR
SHADERS
THE
FINAL
STEP
IS
PERFORMED
BY
THE
SYSTEM
WHEN
IT
ELIMINATES
THIS
NEW
FOURTH
COORDINATE
IF
YOU
WANT
TO
UNDERSTAND
THIS
AND
HOMOGENEOUS
COORDINATES
MORE
DEEPLY
READ
THE
NEXT
SECTION
IF
YOU
JUST
WANT
TO
GO
ON
SOME
FAITH
AND
GRAB
MATRICES
THAT
WILL
GET
THE
JOB
DONE
YOU
CAN
SKIP
TO
THE
NEXT
SECTION
ADVANCED
WHAT
ARE
HOMOGENEOUS
COORDINATES
THREE
DIMENSIONAL
DATA
CAN
BE
SCALED
AND
ROTATED
WITH
LINEAR
TRANSFORMATIONS
OF
THREE
COMPONENT
VECTORS
BY
MULTIPLYING
BY
MATRICES
UNFORTUNATELY
TRANSLATING
MOVING
SLIDING
OVER
THREE
DIMENSIONAL
CARTESIAN
COORDINATES
CANNOT
BE
DONE
BY
MULTIPLYING
WITH
A
MATRIX
IT
REQUIRES
AN
EXTRA
VECTOR
ADDITION
TO
MOVE
THE
POINT
SOMEWHERE
ELSE
THIS
IS
A
CALLED
AN
AFFINE
TRANSFORMATION
WHICH
IS
NOT
A
LINEAR
TRANSFORMATION
RECALL
THAT
ANY
LINEAR
TRANSFORMATION
MAPS
TO
INCLUDING
THAT
ADDITION
MEANS
THE
LOSS
OF
THE
BENEFITS
OF
LINEAR
TRANSFORMATIONS
LIKE
THE
ABILITY
TO
COMPOSE
MULTIPLE
TRANSFORMATIONS
INTO
A
SINGLE
TRANSFORMATION
SO
WE
WANT
TO
FIND
A
WAY
TO
TRANSLATE
WITH
A
LINEAR
TRANSFORMATION
FORTUNATELY
BY
EMBEDDING
OUR
DATA
IN
A
FOUR
COORDINATE
SPACE
AFFINE
TRANSFORMATIONS
TURN
BACK
INTO
A
SIMPLE
LINEAR
TRANSFORM
MEANING
YOU
CAN
MOVE
YOUR
MODEL
LATERALLY
USING
ONLY
MULTIPLICATION
BY
A
MATRIX
FOR
EXAMPLE
TO
MOVE
DATA
BY
IN
THE
Y
DIRECTION
ASSUMING
A
FOURTH
VECTOR
COORDINATE
OF
X
X
Z
Z
AT
THE
SAME
TIME
WE
ACQUIRE
THE
EXTRA
COMPONENT
NEEDED
TO
DO
PERSPECTIVE
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
A
HOMOGENEOUS
COORDINATE
HAS
ONE
EXTRA
COMPONENT
AND
DOES
NOT
CHANGE
THE
POINT
IT
REPRESENTS
WHEN
ALL
ITS
COMPONENTS
ARE
SCALED
BY
THE
SAME
AMOUNT
FOR
EXAMPLE
ALL
THESE
COORDINATES
REPRESENT
THE
SAME
POINT
IN
THIS
WAY
HOMOGENEOUS
COORDINATES
ACT
AS
DIRECTIONS
INSTEAD
OF
LOCATIONS
SCALING
A
DIRECTION
LEAVES
IT
POINTING
IN
THE
SAME
DIRECTION
THIS
IS
SHOWN
IN
FIGURE
STANDING
AT
THE
HOMOGENEOUS
POINTS
AND
OTHERS
ALONG
THAT
LINE
APPEAR
IN
THE
SAME
PLACE
WHEN
PROJECTED
ONTO
THE
SPACE
THEY
ALL
BECOME
THE
POINT
MANY
TWO
COMPONENT
HOMOGENEOUS
Y
COORDINATES
FOR
THE
NUMBER
FIGURE
ONE
DIMENSIONAL
HOMOGENEOUS
SPACE
SHOWS
HOW
TO
EMBED
THE
SPACE
INTO
TWO
DIMENSIONS
AT
THE
LOCATION
Y
TO
GET
HOMOGENEOUS
COORDINATES
SKEWING
IS
A
LINEAR
TRANSFORMATION
SKEWING
FIGURE
CAN
TRANSLATE
THE
EMBEDDED
SPACE
AS
SHOW
IN
FIGURE
WHILE
PRESERVING
THE
LOCATION
OF
IN
THE
SPACE
ALL
LINEAR
TRANSFORMS
KEEP
FIXED
USER
TRANSFORMATIONS
FIGURE
TRANSLATING
BY
SKEWING
THE
DESIRE
IS
TO
TRANSLATE
POINTS
IN
THE
SPACE
WITH
A
LINEAR
TRANSFORM
THIS
IS
IMPOSSIBLE
WITHIN
THE
SPACE
AS
THE
POINT
NEEDS
TO
MOVE
SOMETHING
LINEAR
TRANSFORMATIONS
CANNOT
DO
HOWEVER
THE
SKEWING
TRANSFORMATION
IS
LINEAR
AND
ACCOMPLISHES
THE
GOAL
OF
TRANSLATING
THE
SPACE
IF
THE
LAST
COMPONENT
OF
AN
HOMOGENEOUS
COORDINATE
IS
IT
IMPLIES
A
POINT
AT
INFINITY
THE
SPACE
HAS
ONLY
TWO
SUCH
POINTS
AT
INFINITY
ONE
IN
THE
POSITIVE
DIRECTION
AND
ONE
IN
THE
NEGATIVE
DIRECTION
HOWEVER
THE
SPACE
EMBEDDED
IN
A
FOUR
COORDINATE
HOMOGENEOUS
SPACE
HAS
A
POINT
AT
INFINITY
FOR
ANY
DIRECTION
YOU
CAN
POINT
THESE
POINTS
CAN
MODEL
THE
PERSPECTIVE
POINT
WHERE
TWO
PARALLEL
LINES
E
G
SIDES
OF
A
BUILDING
OR
RAILROAD
TRACKS
WOULD
APPEAR
TO
MEET
THE
PERSPECTIVE
EFFECTS
WE
CARE
ABOUT
THOUGH
WILL
BECOME
VISIBLE
WITHOUT
NEEDING
TO
SPECIFICALLY
THINK
ABOUT
THIS
WE
WILL
MOVE
TO
HOMOGENEOUS
COORDINATES
BY
ADDING
A
FOURTH
W
COMPONENT
OF
AND
LATER
GO
BACK
TO
CARTESIAN
COORDINATES
BY
DIVIDING
ALL
COMPONENTS
BY
THE
FOURTH
COMPONENT
AND
DROPPING
THE
FOURTH
COMPONENT
DIVIDE
BY
W
DROP
W
PERSPECTIVE
TRANSFORMS
MODIFY
W
COMPONENTS
TO
VALUES
OTHER
THAN
MAKING
W
LARGER
CAN
MAKE
COORDINATES
APPEAR
FURTHER
AWAY
WHEN
IT
TIME
TO
DISPLAY
GEOMETRY
OPENGL
WILL
TRANSFORM
HOMOGENEOUS
COORDINATES
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
BACK
TO
THE
THREE
DIMENSIONAL
CARTESIAN
COORDINATES
BY
DIVIDING
THEIR
FIRST
THREE
COMPONENTS
BY
THE
LAST
COMPONENT
THIS
WILL
MAKE
THE
OBJECTS
FARTHER
AWAY
NOW
HAVING
A
LARGER
W
HAVE
SMALLER
CARTESIAN
COORDINATES
HENCE
GETTING
DRAWN
ON
A
SMALLER
SCALE
A
W
OF
IMPLIES
X
Y
COORDINATES
AT
INFINITY
THE
OBJECT
GOT
SO
CLOSE
TO
THE
VIEWPOINT
THAT
ITS
PERSPECTIVE
VIEW
GOT
INFINITELY
LARGE
THIS
CAN
LEAD
TO
UNDEFINED
RESULTS
THERE
IS
NOTHING
FUNDAMENTALLY
WRONG
WITH
A
NEGATIVE
W
THE
FOLLOWING
COORDINATES
REPRESENT
THE
SAME
POINT
BUT
NEGATIVE
W
CAN
STIR
UP
TROUBLE
IN
SOME
PARTS
OF
THE
GRAPHICS
PIPELINE
ESPECIALLY
IF
IT
EVER
GETS
INTERPOLATED
TOWARD
A
POSITIVE
W
AS
THAT
CAN
MAKE
IT
LAND
ON
OR
VERY
NEAR
THE
SIMPLEST
WAY
TO
AVOID
PROBLEMS
IS
TO
KEEP
YOUR
W
COMPONENTS
POSITIVE
LINEAR
TRANSFORMATIONS
AND
MATRICES
WE
START
OUR
TASK
OF
MAPPING
INTO
DEVICE
COORDINATES
BY
ADDING
A
FOURTH
COMPONENT
TO
OUR
THREE
DIMENSIONAL
CARTESIAN
COORDINATES
WITH
A
VALUE
OF
TO
MAKE
HOMOGENEOUS
COORDINATES
THESE
COORDINATES
ARE
THEN
READY
TO
BE
MULTIPLIED
BY
ONE
OR
MORE
MATRICES
THAT
ROTATE
SCALE
TRANSLATE
AND
APPLY
PERSPECTIVE
EXAMPLES
OF
HOW
TO
USE
EACH
OF
THESE
TRANSFORMS
ARE
GIVEN
BELOW
THE
SUMMARY
IS
THAT
EACH
OF
THESE
TRANSFORMATIONS
CAN
BE
MADE
THROUGH
MULTIPLICATION
BY
A
MATRIX
AND
A
SERIES
OF
SUCH
TRANSFORMATIONS
CAN
BE
COMPOSED
INTO
A
SINGLE
MATRIX
ONCE
THAT
CAN
THEN
BE
USED
ON
MULTIPLE
VERTICES
TRANSLATION
TRANSLATING
AN
OBJECT
TAKES
ADVANTAGE
OF
THE
FOURTH
COMPONENT
WE
JUST
ADDED
TO
OUR
MODEL
COORDINATES
AND
OF
THE
FOURTH
COLUMN
OF
A
TRANSFORMATION
MATRIX
WE
WANT
A
MATRIX
T
TO
MULTIPLY
ALL
OUR
OBJECT
VERTICES
V
BY
TO
GET
TRANSLATED
VERTICES
VI
VI
TV
EACH
COMPONENT
CAN
BE
TRANSLATED
BY
A
DIFFERENT
AMOUNT
BY
PUTTING
THOSE
AMOUNTS
IN
THE
FOURTH
COLUMN
OF
T
FOR
EXAMPLE
TO
TRANSLATE
BY
IN
THE
POSITIVE
X
DIRECTION
AND
NOT
AT
ALL
IN
THE
Y
OR
Z
DIRECTIONS
USER
TRANSFORMATIONS
AND
MULTIPLYING
BY
A
VECTOR
V
X
Y
Z
GIVES
X
X
Y
Y
Z
Z
THIS
IS
DEMONSTRATED
IN
FIGURE
Y
X
FIGURE
TRANSLATING
AN
OBJECT
IN
THE
X
DIRECTION
OF
COURSE
YOU
LL
WANT
SUCH
MATRIX
OPERATIONS
ENCAPSULATED
THERE
ARE
NUMEROUS
UTILITIES
AVAILABLE
FOR
THIS
AND
ONE
IS
INCLUDED
IN
THE
ACCOMPANYING
VMATH
H
WE
ALREADY
USED
IT
IN
CHAPTER
DRAWING
WITH
OPENGL
TO
CREATE
A
TRANSLATION
MATRIX
USING
THIS
UTILITY
CALL
THE
FOLLOWING
LISTING
SHOWS
A
USE
OF
THIS
APPLICATION
C
CODE
INCLUDE
VMATH
H
MAKE
A
TRANSFORMATION
MATRIX
THAT
TRANSLATES
COORDINATES
BY
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
VMATH
TRANSLATIONMATRIX
VMATH
TRANSLATE
SET
THIS
MATRIX
INTO
THE
CURRENT
PROGRAM
TRANSLATIONMATRIX
AFTER
GOING
THROUGH
THE
NEXT
TYPE
OF
TRANSFORMATION
WE
LL
SHOW
A
CODE
EXAMPLE
FOR
COMBINING
TRANSFORMATIONS
WITH
THIS
UTILITY
SCALING
GROW
OR
SHRINK
AN
OBJECT
AS
IN
FIGURE
BY
PUTTING
THE
DESIRED
SCALING
FACTOR
ON
THE
FIRST
THREE
DIAGONAL
COMPONENTS
OF
THE
MATRIX
MAKING
A
SCALING
MATRIX
WHICH
APPLIED
TO
ALL
VERTICES
V
IN
AN
OBJECT
WOULD
CHANGE
ITS
SIZE
X
FIGURE
SCALING
AN
OBJECT
TO
THREE
TIMES
ITS
SIZE
NOTE
THAT
IF
THE
OBJECT
IS
OFF
CENTER
THIS
ALSO
MOVES
ITS
CENTER
THREE
TIMES
FURTHER
FROM
USER
TRANSFORMATIONS
THE
FOLLOWING
EXAMPLE
MAKES
GEOMETRY
TIMES
LARGER
X
Z
NOTE
THAT
NONISOMORPHIC
SCALING
IS
EASILY
DONE
AS
THE
SCALING
IS
PER
COMPONENT
BUT
IT
WOULD
BE
RARE
TO
DO
SO
WHEN
SETTING
UP
YOUR
VIEW
AND
MODEL
TRANSFORMS
IF
YOU
WANT
TO
STRETCH
RESULTS
VERTICALLY
OR
HORIZONTALLY
DO
THAT
AT
THE
END
WITH
THE
VIEWPORT
TRANSFORMATION
DOING
IT
TOO
EARLY
WOULD
MAKE
SHAPES
CHANGE
WHEN
THEY
ROTATE
NOTE
THAT
WHEN
SCALING
WE
DIDN
T
SCALE
THE
W
COMPONENT
AS
THAT
WOULD
RESULT
IN
NO
NET
CHANGE
TO
THE
POINT
REPRESENTED
BY
THE
HOMOGENEOUS
COORDINATE
SINCE
IN
THE
END
ALL
COMPONENTS
ARE
DIVIDED
BY
W
IF
THE
OBJECT
BEING
SCALED
IS
NOT
CENTERED
AT
THE
SIMPLE
MATRIX
ABOVE
WILL
ALSO
MOVE
IT
FURTHER
OR
CLOSER
TO
BY
THE
SCALING
AMOUNT
USUALLY
IT
IS
EASIER
TO
UNDERSTAND
WHAT
HAPPENS
WHEN
SCALING
IF
YOU
FIRST
CENTER
THE
OBJECT
AROUND
THEN
SCALING
LEAVES
IT
IN
THE
SAME
PLACE
WHILE
CHANGING
ITS
SIZE
IF
YOU
WANT
TO
CHANGE
THE
SIZE
OF
AN
OFF
CENTER
OBJECT
WITHOUT
MOVING
IT
FIRST
TRANSLATE
ITS
CENTER
TO
THEN
SCALE
IT
AND
FINALLY
TRANSLATE
IT
BACK
THIS
IS
SHOWN
IN
FIGURE
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
Y
Y
X
X
FIGURE
SCALING
AN
OBJECT
IN
PLACE
SCALE
IN
PLACE
BY
MOVING
TO
SCALING
AND
THEN
MOVING
IT
BACK
THIS
WOULD
USE
THREE
MATRICES
T
S
AND
T
FOR
TRANSLATE
TO
SCALE
AND
TRANSLATE
BACK
RESPECTIVELY
WHEN
EACH
VERTEX
V
OF
THE
OBJECT
IS
MULTIPLIED
BY
EACH
OF
THESE
MATRICES
IN
TURN
THE
FINAL
EFFECT
IS
THAT
THE
OBJECT
WOULD
CHANGE
SIZE
IN
PLACE
YIELDING
A
NEW
SET
OF
VERTICES
VI
VI
T
S
TV
OR
VI
T
V
WHICH
ALLOWS
FOR
PRE
MULTIPLICATION
OF
THE
THREE
MATRICES
INTO
A
SINGLE
MATRIX
M
T
VI
MV
M
NOW
DOES
THE
COMPLETE
JOB
OF
SCALING
AN
OFF
CENTER
OBJECT
TO
CREATE
A
SCALING
TRANSFORMATION
WITH
THE
INCLUDED
UTILITY
YOU
CAN
USE
USER
TRANSFORMATIONS
THE
RESULTING
MATRIX
CAN
BE
DIRECTLY
MULTIPLIED
BY
ANOTHER
SUCH
TRANSFORMATION
MATRIX
TO
COMPOSE
THEM
INTO
A
SINGLE
MATRIX
THAT
PERFORMS
BOTH
TRANSFORMATIONS
APPLICATION
C
CODE
INCLUDE
VMATH
H
COMPOSE
TRANSLATION
AND
SCALING
TRANSFORMS
VMATH
TRANSLATEMATRIX
VMATH
TRANSLATE
VMATH
SCALEMATRIX
VMATH
SCALE
VMATH
SCALETRANSLATEMATRIX
SCALEMATRIX
TRANSLATEMATRIX
ANY
SEQUENCE
OF
TRANSFORMATIONS
CAN
BE
COMBINED
INTO
A
SINGLE
MATRIX
THIS
WAY
ROTATION
ROTATING
AN
OBJECT
FOLLOWS
A
SIMILAR
SCHEME
WE
WANT
A
MATRIX
R
THAT
WHEN
APPLIED
TO
ALL
VERTICES
V
IN
AN
OBJECT
WILL
ROTATE
IT
THE
FOLLOWING
EXAMPLE
SHOWN
IN
FIGURE
ROTATES
DEGREES
COUNTERCLOCKWISE
AROUND
THE
Z
AXIS
FIGURE
SHOWS
HOW
TO
ROTATE
AN
OBJECT
WITHOUT
MOVING
ITS
CENTER
INSTEAD
OF
ALSO
REVOLVING
IT
AROUND
THE
Z
AXIS
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
Y
X
FIGURE
ROTATION
ROTATING
AN
OBJECT
DEGREES
IN
THE
XY
PLANE
AROUND
THE
Z
AXIS
NOTE
IF
THE
OBJECT
IS
OFF
CENTER
IT
ALSO
REVOLVES
THE
OBJECT
AROUND
THE
POINT
Y
Y
X
X
FIGURE
ROTATING
IN
PLACE
ROTATING
AN
OBJECT
IN
PLACE
BY
MOVING
IT
TO
ROTATING
AND
THEN
MOVING
IT
BACK
USER
TRANSFORMATIONS
COS
SIN
COS
X
SIN
Y
COS
SIN
X
Z
Z
WHEN
ROTATING
AROUND
THE
Z
AXIS
ABOVE
THE
VERTICES
IN
THE
OBJECT
KEEP
THEIR
Z
VALUES
THE
SAME
ROTATING
IN
THE
XY
PLANE
TO
ROTATE
INSTEAD
AROUND
THE
X
AXIS
BY
AN
AMOUNT
Θ
RX
SIN
Θ
COS
Θ
AND
AROUND
THE
Y
AXIS
COS
Θ
SIN
Θ
SIN
Θ
COS
Θ
IN
ALL
CASES
THE
ROTATION
IS
IN
THE
DIRECTION
OF
THE
FIRST
AXIS
TOWARD
THE
SECOND
AXIS
THAT
IS
FROM
THE
ROW
WITH
THE
COS
SIN
PATTERN
TO
THE
ROW
WITH
THE
SIN
COS
PATTERN
FOR
THE
POSITIVE
AXES
CORRESPONDING
TO
THESE
ROWS
IF
THE
OBJECT
BEING
ROTATED
IS
NOT
CENTERED
AT
THE
MATRICES
ABOVE
WILL
ALSO
ROTATE
THE
WHOLE
OBJECT
AROUND
CHANGING
ITS
LOCATION
AGAIN
AS
WITH
SCALING
IT
LL
BE
EASIER
TO
FIRST
CENTER
THE
OBJECT
AROUND
SO
AGAIN
TRANSLATE
IT
TO
TRANSFORM
IT
AND
THEN
TRANSLATE
IT
BACK
THIS
COULD
USE
THREE
MATRICES
T
R
AND
T
TO
TRANSLATE
TO
ROTATE
AND
TRANSLATE
BACK
VI
T
R
TV
OR
VI
T
V
WHICH
AGAIN
ALLOWS
FOR
THE
PRE
MULTIPLICATION
INTO
A
SINGLE
MATRIX
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
TO
CREATE
A
ROTATION
TRANSFORMATION
WITH
THE
INCLUDED
UTILITY
YOU
CAN
USE
PERSPECTIVE
PROJECTION
THIS
ONE
IS
A
BIT
TOUGHER
WE
NOW
ASSUME
VIEWING
AND
MODELING
TRANSFORMATIONS
ARE
COMPLETED
WITH
LARGER
Z
VALUES
MEANING
OBJECTS
ARE
FURTHER
AWAY
WE
WILL
CONSIDER
THE
FOLLOWING
TWO
CASES
SYMMETRIC
CENTERED
FRUSTUM
WHERE
THE
Z
AXIS
IS
CENTERED
IN
THE
CONE
ASYMMETRIC
FRUSTUM
LIKE
SEEING
WHAT
THROUGH
A
WINDOW
WHEN
YOU
LOOKING
NEAR
IT
BUT
NOT
TOWARD
ITS
MIDDLE
FOR
ALL
THE
VIEWPOINT
IS
NOW
AT
LOOKING
GENERALLY
TOWARD
THE
POSITIVE
Z
DIRECTION
FIRST
HOWEVER
LET
CONSIDER
AN
OVER
SIMPLIFIED
HYPOTHETICAL
PERSPECTIVE
PROJECTION
X
X
Z
Z
NOTE
THE
LAST
MATRIX
ROW
REPLACES
THE
W
FOURTH
COORDINATE
WITH
THE
Z
COORDINATE
THIS
WILL
MAKE
OBJECTS
WITH
A
LARGER
Z
FURTHER
AWAY
APPEAR
SMALLER
WHEN
THE
DIVISION
BY
W
OCCURS
CREATING
A
PERSPECTIVE
EFFECT
HOWEVER
THIS
PARTICULAR
METHOD
HAS
SOME
SHORTCOMINGS
FOR
ONE
ALL
Z
VALUES
WILL
END
UP
AT
LOSING
INFORMATION
ABOUT
DEPTH
WE
ALSO
DIDN
T
HAVE
MUCH
CONTROL
OVER
THE
CONE
WE
ARE
PROJECTING
AND
THE
RECTANGLE
WE
ARE
PROJECTING
ONTO
FINALLY
WE
DIDN
T
SCALE
THE
RESULT
TO
THE
RANGE
EXPECTED
BY
THE
VIEWPORT
TRANSFORM
THE
REMAINING
EXAMPLES
TAKE
ALL
THIS
INTO
ACCOUNT
SO
WE
CONSIDER
NOW
A
FULLER
EXAMPLE
FOR
OPENGL
USING
A
SYMMETRIC
CENTERED
FRUSTUM
WE
REFER
BACK
TO
OUR
VIEW
FRUSTUM
SHOWN
AGAIN
WITH
THE
SIZE
OF
THE
NEAR
PLANE
LABELED
IN
FIGURE
USER
TRANSFORMATIONS
FIGURE
FRUSTUM
PROJECTION
FRUSTUM
WITH
THE
NEAR
PLANE
AND
HALF
ITS
WIDTH
AND
HEIGHT
LABELED
WE
WANT
TO
PROJECT
POINTS
IN
THE
FRUSTUM
ONTO
THE
NEAR
PLANE
DIRECTED
ALONG
STRAIGHT
LINES
GOING
TOWARD
ANY
STRAIGHT
LINE
EMANATING
FROM
KEEPS
THE
RATIO
IF
Z
TO
X
THE
SAME
FOR
ALL
ITS
POINTS
AND
SIMILARLY
FOR
THE
RATIO
OF
Z
TO
Y
THUS
THE
XPROJ
YPROJ
VALUE
OF
THE
PROJECTION
ON
THE
NEAR
PLANE
WILL
KEEP
THE
RATIOS
OF
ZNEAR
XPROJ
AND
ZNEAR
YPROJ
WE
KNOW
Z
X
Z
Y
THERE
IS
AN
UPCOMING
DIVISION
BY
DEPTH
TO
ELIMINATE
HOMOGENEOUS
COORDINATES
SO
SOLVING
FOR
XPROJ
WHILE
STILL
IN
THE
HOMOGENEOUS
SPACE
SIMPLY
GIVES
XPROJ
X
ZNEAR
SIMILARLY
YPROJ
Y
ZNEAR
IF
WE
THEN
INCLUDE
A
DIVIDE
BY
THE
SIZE
OF
THE
NEAR
PLANE
TO
SCALE
THE
NEAR
PLANE
TO
THE
RANGE
OF
WE
END
UP
WITH
THE
REQUISITE
FIRST
TWO
DIAGONAL
ELEMENTS
SHOWN
IN
THE
PROJECTION
TRANSFORMATION
MATRIX
ZNEAR
WIDTH
ZNEAR
HEIGHT
ZFAR
ZNEAR
THIS
COULD
ALSO
BE
COMPUTED
FROM
THE
ANGLE
OF
THE
VIEWING
CONE
IF
SO
DESIRED
FINALLY
WE
CONSIDER
THE
SECOND
PERSPECTIVE
PROJECTION
CASE
THE
ASYMMETRIC
FRUSTUM
THIS
IS
THE
FULLY
GENERAL
FRUSTUM
WHEN
THE
NEAR
PLANE
MIGHT
NOT
BE
CENTERED
ON
THE
Z
AXIS
THE
Z
AXIS
COULD
EVEN
BE
COMPLETELY
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
OUTSIDE
IT
AS
MENTIONED
EARLIER
WHEN
LOOKING
AT
AN
INTERIOR
WALL
NEXT
TO
A
WINDOW
YOUR
DIRECTION
OF
VIEW
IS
THE
POSITIVE
Z
AXIS
WHICH
IS
NOT
GOING
THROUGH
THE
WINDOW
YOU
SEE
THE
WINDOW
OFF
TO
THE
SIDE
WITH
AN
ASYMMETRIC
PERSPECTIVE
VIEW
OF
WHAT
OUTSIDE
THE
WINDOW
IN
THIS
CASE
POINTS
ON
THE
NEAR
PLANE
ARE
ALREADY
IN
THE
CORRECT
LOCATION
BUT
THOSE
FURTHER
AWAY
NEED
TO
BE
ADJUSTED
FOR
THE
FACT
THAT
THE
PROJECTION
IN
THE
NEAR
PLANE
IS
OFF
CENTER
YOU
CAN
SEE
THIS
ADJUSTMENT
IN
THE
THIRD
COLUMN
OF
THE
MATRIX
WHICH
MOVES
THE
POINTS
AN
AMOUNT
BASED
ON
HOW
OFF
CENTER
THE
NEAR
PLANE
PROJECTION
IS
SCALED
BY
HOW
FAR
AWAY
THE
POINTS
ARE
BECAUSE
THIS
COLUMN
MULTIPLIES
BY
Z
ZNEAR
WIDTH
LEFT
RIGHT
WIDTH
ZNEAR
HEIGHT
TOP
BOTTOM
HEIGHT
ZFAR
ZNEAR
ALL
THE
ABOVE
STEPS
ROTATE
SCALE
TRANSLATE
PROJECT
AND
POSSIBLY
OTHERS
WILL
MAKE
MATRICES
THAT
CAN
BE
MULTIPLIED
TOGETHER
INTO
A
SINGLE
MATRIX
NOW
WITH
ONE
MULTIPLICATION
BY
THIS
NEW
MATRIX
WE
CAN
SIMULTANEOUSLY
SCALE
TRANSLATE
ROTATE
AND
APPLY
THE
PERSPECTIVE
PROJECTION
TO
CREATE
A
PERSPECTIVE
PROJECTION
TRANSFORMATION
WITH
THE
INCLUDED
UTILITY
THERE
ARE
A
COUPLE
OF
CHOICES
YOU
CAN
HAVE
FULL
CONTROL
AS
ABOVE
USING
A
FRUSTUM
CALL
OR
YOU
CAN
MORE
CASUALLY
AND
INTUITIVELY
CREATE
ONE
WITH
THE
LOOKAT
CALL
USER
TRANSFORMATIONS
THE
RESULTING
VECTORS
STILL
HAVING
FOUR
COORDINATES
ARE
THE
HOMOGENEOUS
COORDINATES
EXPECTED
BY
THE
OPENGL
PIPELINE
THE
FINAL
STEP
IN
PROJECTING
THE
PERSPECTIVE
VIEW
ONTO
THE
SCREEN
IS
TO
DIVIDE
THE
X
Y
Z
COORDINATES
IN
VI
BY
THE
W
COORDINATE
IN
VI
FOR
EVERY
VERTEX
HOWEVER
THIS
IS
DONE
INTERNALLY
BY
OPENGL
IT
IS
NOT
SOMETHING
YOU
DO
IN
YOUR
SHADERS
ORTHOGRAPHIC
PROJECTION
WITH
AN
ORTHOGRAPHIC
PROJECTION
THE
VIEWING
VOLUME
IS
A
RECTANGULAR
PARALLELPIPED
OR
MORE
INFORMALLY
A
BOX
SEE
FIGURE
UNLIKE
PERSPECTIVE
PROJECTION
THE
SIZE
OF
THE
VIEWING
VOLUME
DOESN
T
CHANGE
FROM
ONE
END
TO
THE
OTHER
SO
DISTANCE
FROM
THE
CAMERA
DOESN
T
AFFECT
HOW
LARGE
AN
OBJECT
APPEARS
FIGURE
ORTHOGRAPHIC
PROJECTION
STARTS
WITH
STRAIGHTFORWARD
PROJECTION
OF
THE
PARALLELPIPED
ONTO
THE
FRONT
PLANE
X
Y
AND
Z
WILL
NEED
TO
BE
SCALED
TO
FIT
INTO
AND
RESPECTIVELY
THIS
WILL
BE
DONE
BY
DIVIDING
BY
THE
SIZES
OF
THE
WIDTH
HEIGHT
AND
DEPTH
IN
THE
MODEL
THIS
IS
DONE
AFTER
ALL
THE
TRANSLATION
SCALING
AND
ROTATION
IS
DONE
TO
LOOK
IN
THE
POSITIVE
Z
DIRECTION
TO
SEE
THE
MODEL
TO
VIEW
WITH
NO
PERSPECTIVE
WE
WILL
KEEP
THE
W
AS
IT
IS
ACCOMPLISHED
BY
MAKING
THE
BOTTOM
ROW
OF
THE
TRANSFORMATION
MATRIX
WE
WILL
STILL
SCALE
Z
TO
LIE
WITHIN
SO
Z
BUFFERING
CAN
HIDE
OBSCURED
OBJECTS
BUT
NEITHER
Z
NOR
W
WILL
HAVE
ANY
EFFECT
ON
THE
SCREEN
LOCATION
THAT
LEAVES
SCALING
X
FROM
THE
WIDTH
OF
THE
MODEL
TO
AND
SIMILARLY
FOR
Y
FOR
A
SYMMETRIC
VOLUME
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
POSITIVE
Z
GOING
DOWN
THE
MIDDLE
OF
THE
PARALLELPIPED
THIS
CAN
BE
DONE
WITH
THE
FOLLOWING
MATRIX
WIDTH
HEIGHT
ZFAR
ZNEAR
FOR
THE
CASE
OF
THE
POSITIVE
Z
NOT
GOING
DOWN
THE
MIDDLE
OF
THE
VIEW
BUT
STILL
LOOKING
PARALLEL
TO
THE
Z
AXIS
TO
SEE
THE
MODEL
THE
MATRIX
IS
JUST
SLIGHTLY
MORE
COMPLEX
WE
USE
THE
DIAGONAL
TO
SCALE
AND
THE
FOURTH
COLUMN
TO
CENTER
RIGHT
LEFT
RIGHT
LEFT
RIGHT
LEFT
TOP
BOTTOM
TOP
BOTTOM
TOP
BOTTOM
NEAR
NEAR
TO
CREATE
AN
ORTHOGRAPHIC
PROJECTION
TRANSFORMATION
WITH
THE
INCLUDED
UTILITY
YOU
CAN
USE
THE
FOLLOWING
TRANSFORMING
NORMALS
IN
ADDITION
TO
TRANSFORMING
VERTICES
WE
WILL
HAVE
NEED
TO
TRANSFORM
SURFACE
NORMALS
THAT
IS
VECTORS
THAT
POINT
IN
THE
DIRECTION
PERPENDICULAR
TO
A
SURFACE
AT
SOME
POINT
IN
PERHAPS
ONE
OF
THE
MOST
CONFUSING
TWISTS
OF
TERMINOLOGY
NORMALS
ARE
OFTEN
REQUIRED
TO
BE
NORMALIZED
THAT
IS
OF
LENGTH
HOWEVER
THE
NORMAL
MEANING
PERPENDICULAR
AND
THE
NORMAL
IN
NORMALIZE
ARE
COMPLETELY
UNRELATED
AND
WE
WILL
COME
UPON
NEEDS
FOR
NORMALIZED
NORMALS
WHEN
COMPUTING
LIGHTING
TYPICALLY
WHEN
COMPUTING
LIGHTING
A
VERTEX
WILL
HAVE
A
NORMAL
ASSOCIATED
WITH
IT
SO
THE
LIGHTING
CALCULATION
KNOWS
WHAT
DIRECTION
THE
SURFACE
REFLECTS
LIGHT
SHADERS
DOING
THESE
CALCULATIONS
APPEAR
IN
CHAPTER
LIGHT
AND
SHADOW
HERE
THOUGH
WE
WILL
DISCUSS
THE
FUNDAMANTALS
OF
TRANSFORMING
THEM
BY
TAKING
THEM
THROUGH
ROTATIONS
SCALING
AND
SO
ON
ALONG
WITH
THE
VERTICES
IN
A
MODEL
USER
TRANSFORMATIONS
NORMAL
VECTORS
ARE
TYPICALLY
ONLY
THREE
COMPONENT
VECTORS
NOT
USING
HOMOGENEOUS
COORDINATES
FOR
ONE
THING
TRANSLATING
A
SURFACE
DOES
NOT
CHANGE
ITS
NORMAL
SO
NORMALS
DON
T
CARE
ABOUT
TRANSLATION
REMOVING
ONE
OF
THE
REASONS
WE
USED
HOMOGENEOUS
COORDINATES
SINCE
NORMALS
ARE
MOSTLY
USED
FOR
LIGHTING
WHICH
WE
COMPLETE
IN
A
PRE
PERSPECTIVE
SPACE
WE
REMOVE
THE
OTHER
REASON
WE
USE
HOMOGENEOUS
COORDINATES
PROJECTION
PERHAPS
COUNTERINTUITIVELY
NORMAL
VECTORS
AREN
T
TRANSFORMED
IN
THE
SAME
WAY
AS
VERTICES
OR
POSITION
VECTORS
ARE
IMAGINE
A
SURFACE
AT
AN
ANGLE
THAT
GETS
STRETCHED
BY
A
TRANSFORMATION
STRETCHING
MAKES
THE
ANGLE
OF
THE
SURFACE
SHALLOWER
WHICH
CHANGES
THE
PERPENDICULAR
DIRECTION
IN
THE
OPPOSITE
WAY
THAN
APPLYING
THE
SAME
STRETCHING
TO
THE
NORMAL
WOULD
THIS
WOULD
HAPPEN
FOR
EXAMPLE
IF
YOU
STRETCH
A
SPHERE
TO
MAKE
AN
ELLIPSE
WE
NEED
TO
COME
UP
WITH
A
DIFFERENT
TRANSFORMATION
MATRIX
TO
TRANSFORM
NORMALS
THAN
THE
ONE
WE
USED
FOR
VERTICES
SO
HOW
DO
WE
TRANSFORM
NORMALS
TO
START
LET
M
BE
THE
MATRIX
THAT
HAS
ALL
THE
ROTATIONS
AND
SCALING
NEEDED
TO
TRANSFORM
YOUR
OBJECT
FROM
MODEL
COORDINATES
TO
EYE
COORDINATES
BEFORE
TRANSFORMING
FOR
PERSPECTIVE
THIS
WOULD
BE
THE
UPPER
BLOCK
IN
YOUR
TRANSFORMATION
MATRIX
BEFORE
COMPOUNDING
TRANSLATION
OR
PROJECTION
TRANSFORMATIONS
INTO
IT
THEN
TO
TRANSFORM
NORMALS
USE
THE
FOLLOWING
EQUATION
NI
M
THAT
IS
TAKE
THE
TRANSPOSE
OF
THE
INVERSE
OF
M
AND
USE
THAT
TO
TRANSFORM
YOUR
NORMALS
IF
ALL
YOU
DID
WAS
ROTATION
AND
ISOMETRIC
NONSHAPE
CHANGING
SCALING
YOU
COULD
TRANSFORM
DIRECTIONS
WITH
JUST
M
THEY
D
BE
SCALED
BY
A
DIFFERENT
AMOUNT
BUT
WILL
NO
DOUBT
HAVE
A
NORMALIZE
CALL
IN
THEIR
FUTURE
THAT
WILL
EVEN
THAT
OUT
OPENGL
MATRICES
WHILE
SHADERS
KNOW
HOW
TO
MULTIPLY
MATRICES
THE
API
IN
THE
OPENGL
CORE
PROFILE
DOES
NOT
MANIPULATE
MATRICES
BEYOND
SETTING
THEM
POSSIBLY
TRANS
POSED
INTO
UNIFORM
AND
PER
VERTEX
DATA
TO
BE
USED
BY
YOUR
SHADERS
IT
IS
UP
TO
YOU
TO
BUILD
UP
THE
MATRICES
YOU
WANT
TO
USE
IN
YOUR
SHADER
WHICH
YOU
CAN
DO
WITH
THE
INCLUDED
HELPER
ROUTINES
AS
DESCRIBED
IN
THE
PREVIOUS
SECTION
YOU
WILL
WANT
TO
BE
MULTIPLYING
MATRICES
IN
YOUR
APPLICATION
BEFORE
SENDING
THEM
TO
YOUR
SHADERS
FOR
A
PERFORMANCE
BENEFIT
FOR
EXAMPLE
LET
SAY
YOU
NEED
MATRICES
TO
DO
THE
FOLLOWING
TRANSFORMATIONS
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
MOVE
THE
CAMERA
TO
THE
RIGHT
VIEW
TRANSLATE
AND
ROTATE
MOVE
THE
MODEL
INTO
VIEW
TRANSLATE
ROTATE
AND
SCALE
APPLY
PERSPECTIVE
PROJECTION
THAT
A
TOTAL
OF
SIX
MATRICES
YOU
CAN
USE
A
VERTEX
SHADER
TO
DO
ALL
THIS
MATH
AS
IN
EXAMPLE
EXAMPLE
MULTIPLYING
MULTIPLE
MATRICES
IN
A
VERTEX
SHADER
VERSION
CORE
UNIFORM
VIEWT
VIEWR
MODELT
MODELR
MODELS
PROJECT
IN
VERTEX
VOID
MAIN
PROJECT
MODELS
MODELR
MODELT
VIEWR
VIEWT
VERTEX
HOWEVER
THAT
A
LOT
OF
ARITHMETIC
TO
DO
FOR
EACH
VERTEX
FORTUNATELY
THE
INTERMEDIATE
RESULTS
FOR
MANY
VERTICES
WILL
BE
THE
SAME
EACH
TIME
TO
THE
EXTENT
CONSECUTIVE
TRANSFORMS
MATRICES
ARE
STAYING
THE
SAME
FOR
A
LARGE
NUMBER
OF
VERTICES
YOU
LL
WANT
TO
INSTEAD
PRE
COMPUTE
THEIR
COMPOSITION
PRODUCT
IN
YOUR
APPLICATION
AND
SEND
THE
SINGLE
RESULTING
MATRIX
TO
YOUR
SHADER
APPLICATION
C
CODE
INCLUDE
VMATH
H
VMATH
VIEWT
VMATH
ROTATE
VMATH
VIEWR
VMATH
TRANSLATE
VMATH
VIEW
VIEWR
VIEWT
VMATH
MODELS
VMATH
SCALE
VMATH
MODELR
VMATH
ROTATE
VMATH
MODELT
VMATH
TRANSLATE
VMATH
MODEL
MODELS
MODELR
MODELT
VMATH
PROJECT
VMATH
FRUSTUM
VMATH
MODELVIEWPROJECT
PROJECT
MODEL
VIEW
AN
INTERMEDIATE
SITUATION
MIGHT
BE
TO
HAVE
A
SINGLE
VIEW
TRANSFORMATION
AND
A
SINGLE
PERSPECTIVE
PROJECTION
BUT
MULTIPLE
MODEL
TRANSFORMATIONS
YOU
MIGHT
DO
THIS
IF
YOU
REUSE
THE
SAME
MODEL
TO
MAKE
MANY
INSTANCES
OF
AN
OBJECT
IN
THE
SAME
VIEW
USER
TRANSFORMATIONS
VERSION
CORE
UNIFORM
VIEW
MODEL
PROJECT
IN
VERTEX
VOID
MAIN
VIEW
MODEL
PROJECT
VERTEX
IN
THIS
SITUATION
THE
APPLICATION
WOULD
CHANGE
THE
MODEL
MATRIX
MORE
FREQUENTLY
THAN
THE
OTHERS
THIS
WILL
BE
ECONOMICAL
IF
ENOUGH
VERTICES
ARE
DRAWN
PER
CHANGE
OF
THE
MATRIX
MODEL
IF
ONLY
A
FEW
VERTICES
ARE
DRAWN
PER
INSTANCE
IT
WILL
BE
FASTER
TO
SEND
THE
MODEL
MATRIX
AS
A
VERTEX
ATTRIBUTE
VERSION
CORE
UNIFORM
VIEW
PROJECT
IN
VERTEX
IN
MODEL
A
TRANSFORM
SENT
PER
VERTEX
VOID
MAIN
VIEW
MODEL
PROJECT
VERTEX
ANOTHER
ALTERNATIVE
FOR
CREATING
MULTIPLE
INSTANCES
IS
TO
CONSTRUCT
THE
MODEL
TRANSFORMATION
WITHIN
THE
VERTEX
SHADER
BASED
ON
THE
BUILT
IN
VARIABLE
THIS
WAS
DESCRIBED
IN
DETAIL
IN
CHAPTER
DRAWING
WITH
OPENGL
OF
COURSE
WHEN
YOU
CAN
DRAW
A
LARGE
NUMBER
OF
VERTICES
ALL
WITH
THE
SAME
CUMULATIVE
TRANSFORMATION
YOU
LL
WANT
TO
DO
ONLY
ONE
MULTIPLY
IN
YOUR
SHADER
VERSION
CORE
UNIFORM
MODELVIEWPROJECT
IN
VERTEX
VOID
MAIN
MODELVIEWPROJECT
VERTEX
MATRIX
ROWS
AND
COLUMNS
IN
OPENGL
THE
NOTATION
USED
IN
THIS
BOOK
CORRESPONDS
TO
THE
BROADLY
USED
TRADITIONAL
MATRIX
NOTATION
WE
STAY
TRUE
TO
THIS
NOTATION
REGARDLESS
OF
HOW
DATA
IS
SET
INTO
A
MATRIX
A
COLUMN
WILL
ALWAYS
MEAN
A
VERTICAL
SLICE
OF
A
MATRIX
WHEN
WRITTEN
IN
THIS
TRADITIONAL
NOTATION
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
BEYOND
NOTATION
MATRICES
HAVE
SEMANTICS
FOR
SETTING
AND
ACCESSING
PARTS
OF
A
MATRIX
AND
THESE
SEMANTICS
ARE
ALWAYS
COLUMN
ORIENTED
IN
A
SHADER
USING
ARRAY
SYNTAX
ON
A
MATRIX
YIELDS
A
VECTOR
WITH
VALUES
COMING
FROM
A
COLUMN
OF
THE
MATRIX
M
COLUMNS
ROWS
V
M
V
IS
INITIALIZED
TO
THE
SECOND
COLUMN
OF
M
NOTE
NEITHER
THE
NOTATION
WE
USE
NOR
THESE
COLUMN
ORIENTED
SEMANTICS
ARE
TO
BE
CONFUSED
WITH
COLUMN
MAJOR
ORDER
AND
ROW
MAJOR
ORDER
WHICH
REFER
STRICTLY
TO
MEMORY
LAYOUT
OF
THE
DATA
BEHIND
A
MATRIX
THE
MEMORY
LAYOUT
HAS
NOTHING
TO
DO
WITH
OUR
NOTATION
IN
THIS
BOOK
AND
NOTHING
TO
DO
WITH
THE
LANGUAGE
SEMANTICS
OF
GLSL
YOU
WILL
PROBABLY
NOT
KNOW
WHETHER
INTERNALLY
A
MATRIX
IS
STORED
IN
COLUMN
MAJOR
OR
ROW
MAJOR
ORDER
CARING
ABOUT
COLUMN
MAJOR
OR
ROW
MAJOR
MEMORY
ORDER
WILL
ONLY
COME
UP
WHEN
YOU
ARE
IN
FACT
LAYING
OUT
THE
MEMORY
BACKING
A
GLSL
MATRIX
YOURSELF
THIS
IS
DONE
WHEN
SETTING
MATRICES
IN
A
UNIFORM
BLOCK
AS
WAS
SHOWN
IN
CHAPTER
SHADER
FUNDAMENTALS
WHEN
DISCUSSING
UNIFORM
BLOCKS
YOU
USE
LAYOUT
QUALIFIERS
AND
TO
CONTROL
HOW
GLSL
WILL
LOAD
THE
MATRIX
FROM
THIS
MEMORY
SINCE
OPENGL
IS
NOT
CREATING
OR
INTERPRETING
YOUR
MATRICES
YOU
CAN
TREAT
THEM
AS
YOU
WISH
IF
YOU
WANT
TO
TRANSFORM
A
VERTEX
BY
MATRIX
MULTIPLICATION
WITH
THE
MATRIX
ON
THE
RIGHT
VERSION
CORE
UNIFORM
M
IN
VERTEX
VOID
MAIN
VERTEX
M
NONTRADITIONAL
ORDER
OF
MULTIPLICATION
THEN
AS
EXPECTED
X
WILL
BE
FORMED
BY
THE
DOT
PRODUCT
OF
VERTEX
AND
THE
FIRST
COLUMN
OF
MATRIX
M
AND
SO
ON
FOR
Y
Z
AND
W
COMPONENTS
TRANSFORMED
BY
THE
SECOND
THIRD
AND
FOURTH
COLUMNS
HOWEVER
WE
LL
STICK
TO
THE
TRADITION
OF
KEEPING
THE
MATRIX
ON
THE
LEFT
AND
THE
VERTICES
ON
THE
RIGHT
NOTE
GLSL
VECTORS
AUTOMATICALLY
ADAPT
TO
BEING
EITHER
ROW
VECTORS
OR
COLUMN
VECTORS
DEPENDING
ON
WHETHER
THEY
ARE
ON
THE
LEFT
SIDE
OR
RIGHT
SIDE
OF
A
MATRIX
MULTIPLY
RESPECTIVELY
IN
THIS
WAY
THEY
ARE
DIFFERENT
THAN
A
ONE
COLUMN
OR
ONE
ROW
MATRIX
USER
TRANSFORMATIONS
OPENGL
TRANSFORMATIONS
TO
TELL
OPENGL
WHERE
YOU
WANT
THE
NEAR
AND
FAR
PLANES
USE
THE
GLDEPTHRANGE
COMMANDS
VIEWPORT
TO
TELL
OPENGL
WHERE
TO
DISPLAY
THE
RECTANGULAR
VIEWING
CONE
USE
THE
UNDERLYING
WINDOWING
SYSTEM
OF
YOUR
PLATFORM
NOT
OPENGL
IS
RESPONSIBLE
FOR
OPENING
A
WINDOW
ON
THE
SCREEN
HOWEVER
BY
DEFAULT
THE
VIEWPORT
IS
SET
TO
THE
ENTIRE
PIXEL
RECTANGLE
OF
THE
WINDOW
THAT
OPENED
YOU
USE
GLVIEWPORT
TO
CHOOSE
A
SMALLER
DRAWING
REGION
FOR
EXAMPLE
YOU
CAN
SUBDIVIDE
THE
WINDOW
TO
CREATE
A
SPLIT
SCREEN
EFFECT
FOR
MULTIPLE
VIEWS
IN
THE
SAME
WINDOW
MULTIPLE
VIEWPORTS
YOU
WILL
SOMETIMES
WANT
TO
RENDER
A
SCENE
THROUGH
MULTIPLE
VIEWPORTS
OPENGL
HAS
COMMANDS
TO
SUPPORT
DOING
THIS
AND
THE
GEOMETRY
SHADING
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
STAGE
CAN
SELECT
WHICH
VIEWPORT
SUBSEQUENT
RENDERING
WILL
TARGET
MORE
DETAILS
AND
AN
EXAMPLE
ARE
GIVEN
IN
MULTIPLE
VIEWPORTS
AND
LAYERED
RENDERING
ON
PAGE
ADVANCED
Z
PRECISION
ONE
BIZARRE
EFFECT
OF
THESE
TRANSFORMATIONS
IS
Z
FIGHTING
THE
HARDWARE
FLOATING
POINT
NUMBERS
USED
TO
DO
THE
COMPUTATION
HAVE
LIMITED
PRECISION
HENCE
DEPTH
COORDINATES
THAT
ARE
MATHEMATICALLY
DISTINCT
END
UP
HAVING
THE
SAME
OR
EVEN
REVERSED
ACTUAL
FLOATING
POINT
Z
VALUES
THIS
IN
TURN
CAUSES
INCORRECTLY
HIDDEN
OBJECTS
IN
THE
DEPTH
BUFFER
THE
EFFECT
VARIES
PER
PIXEL
AND
CAN
CAUSE
DISTURBING
FLICKERING
INTERSECTIONS
OF
NEARBY
OBJECTS
PRECISION
OF
Z
IS
MADE
EVEN
WORSE
WITH
PERSPECTIVE
DIVISION
WHICH
IS
APPLIED
TO
THE
DEPTH
COORDINATE
ALONG
WITH
ALL
THE
OTHER
COORDINATES
AS
THE
TRANSFORMED
DEPTH
COORDINATE
MOVES
FARTHER
AWAY
FROM
THE
NEAR
CLIPPING
PLANE
ITS
LOCATION
BECOMES
INCREASINGLY
LESS
PRECISE
AS
SHOWN
IN
FIGURE
Y
Z
PRE
DIVIDE
Z
VALUES
THAT
WILL
BE
DISTINCT
POST
DIVIDE
X
FIGURE
Z
PRECISION
AN
EXAGGERATED
SHOWING
OF
ADJACENT
DISTINCTLY
REPRESENTABLE
DEPTHS
ASSUMING
AN
UPCOMING
PERSPECTIVE
DIVISION
EVEN
WITHOUT
PERSPECTIVE
DIVISION
THERE
IS
A
FINITE
GRANULARITY
TO
FLOATING
POINT
NUMBERS
BUT
THE
DIVIDE
MAKES
IT
WORSE
AND
NONLINEAR
RESULTING
IN
MORE
SEVERE
PROBLEMS
AT
GREATER
DEPTHS
THE
BOTTOM
LINE
IS
IT
IS
POSSIBLE
TO
ASK
FOR
TOO
MUCH
OF
TOO
SMALL
A
RANGE
OF
Z
VALUES
TO
AVOID
THIS
TAKE
CARE
TO
KEEP
THE
FAR
PLANE
AS
CLOSE
TO
THE
NEAR
PLANE
AS
POSSIBLE
AND
DON
T
COMPRESS
THE
Z
VALUES
INTO
A
NARROWER
RANGE
THAN
NECESSARY
OPENGL
TRANSFORMATIONS
ADVANCED
USER
CLIPPING
OPENGL
AUTOMATICALLY
CLIPS
GEOMETRY
AGAINST
THE
NEAR
AND
FAR
PLANES
AS
WELL
AS
THE
VIEWPORT
USER
CLIPPING
REFERS
TO
ADDING
ADDITIONAL
CLIP
PLANES
AT
ARBITRARY
ORIENTATIONS
INTERSECTING
YOUR
GEOMETRY
SUCH
THAT
THE
DISPLAY
SEES
THE
GEOMETRY
ON
ONE
SIDE
OF
THE
PLANE
BUT
NOT
ON
THE
OTHER
SIDE
YOU
MIGHT
USE
ONE
FOR
EXAMPLE
TO
SHOW
A
CUT
AWAY
OF
A
COMPLEX
OBJECT
OPENGL
USER
CLIPPING
IS
A
JOINT
EFFORT
BETWEEN
OPENGL
AND
A
SPECIAL
BUILT
IN
VERTEX
SHADER
ARRAY
WHICH
YOU
ARE
RESPONSIBLE
FOR
SETTING
THIS
VARIABLE
LETS
YOU
CONTROL
WHERE
VERTICES
ARE
IN
RELATION
TO
A
PLANE
NORMAL
INTERPOLATION
THEN
ASSIGNS
DISTANCES
TO
THE
FRAGMENTS
BETWEEN
THE
VERTICES
EXAMPLE
SHOWS
A
STRAIGHT
FORWARD
USE
OF
THIS
BUILT
IN
VARIABLE
EXAMPLE
SIMPLE
USE
OF
VERSION
CORE
UNIFORM
PLANE
A
B
C
AND
D
FOR
AX
BY
CZ
D
IN
VERTEX
W
FLOAT
DECLARE
USE
OF
CLIP
PLANE
VOID
MAIN
EVALUATE
PLANE
EQUATION
DOT
VERTEX
PLANE
THE
CONVENTION
IS
THAT
A
DISTANCE
OF
MEANS
THE
VERTEX
IS
ON
THE
PLANE
A
POSITIVE
DISTANCE
MEANS
THE
VERTEX
IS
INSIDE
THE
KEEP
IT
SIDE
OF
THE
CLIP
PLANE
AND
A
NEGATIVE
DISTANCE
MEANS
THE
POINT
IS
OUTSIDE
THE
CULL
IT
SIDE
OF
THE
CLIP
PLANE
THE
CLIP
DISTANCES
WILL
BE
LINEARLY
INTERPOLATED
ACROSS
THE
PRIMITIVE
AND
OPENGL
WILL
CULL
FRAGMENTS
WHOSE
INTERPOLATED
DISTANCE
IS
LESS
THAN
EACH
ELEMENT
OF
THE
ARRAY
IS
SET
UP
TO
REPRESENT
ONE
PLANE
THERE
ARE
A
LIMITED
NUMBER
OF
CLIP
PLANES
LIKELY
AROUND
EIGHT
OR
MORE
THE
BUILT
IN
IS
DECLARED
WITH
NO
SIZE
YOU
EITHER
NEED
TO
REDECLARE
IT
WITH
A
SPECIFIC
SIZE
OR
ONLY
ACCESS
IT
WITH
COMPILE
TIME
CONSTANTS
ALL
SHADERS
IN
ALL
STAGES
THAT
DECLARE
OR
USE
SHOULD
MAKE
THE
ARRAY
THE
SAME
SIZE
THE
CONSTANT
LETS
YOUR
SHADER
KNOW
THE
MAXIMUM
ARRAY
SIZE
ON
THE
CURRENT
OPENGL
IMPLEMENTATION
THIS
SIZE
NEEDS
TO
INCLUDE
ALL
THE
CLIP
PLANES
THAT
ARE
ENABLED
VIA
THE
OPENGL
API
IF
THE
SIZE
DOES
NOT
INCLUDE
ALL
ENABLED
PLANES
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
RESULTS
ARE
UNDEFINED
TO
ENABLE
OPENGL
CLIPPING
OF
THE
CLIP
PLANE
WRITTEN
TO
IN
EXAMPLE
ENABLE
THE
FOLLOWING
ENUMERANT
IN
YOUR
APPLICATION
GLENABLE
THERE
ARE
ALSO
OTHER
ENUMERATES
LIKE
THESE
ENUMERANTS
ARE
ORGANIZED
SEQUENTIALLY
SO
THAT
IS
EQUAL
TO
I
THIS
ALLOWS
PROGRAMMATIC
SELECTION
OF
WHICH
AND
HOW
MANY
USER
CLIP
PLANES
TO
USE
YOUR
SHADERS
SHOULD
WRITE
TO
ALL
THE
ENABLED
PLANES
OR
YOU
LL
END
UP
WITH
ODD
SYSTEM
CLIPPING
BEHAVIOR
THE
BUILT
IN
IS
ALSO
AVAILABLE
IN
A
FRAGMENT
SHADER
ALLOWING
NONCLIPPED
FRAGMENTS
TO
READ
THEIR
INTERPOLATED
DISTANCES
FROM
EACH
CLIP
PLANE
TRANSFORM
FEEDBACK
TRANSFORM
FEEDBACK
CAN
BE
CONSIDERED
A
STAGE
OF
THE
OPENGL
PIPELINE
THAT
SITS
AFTER
ALL
OF
THE
VERTEX
PROCESSING
STAGES
AND
DIRECTLY
BEFORE
PRIMITIVE
ASSEMBLY
AND
RASTERIZATION
TRANSFORM
FEEDBACK
CAPTURES
VERTICES
AS
THEY
ARE
ASSEMBLED
INTO
PRIMITIVES
POINTS
LINES
OR
TRIANGLES
AND
ALLOWS
SOME
OR
ALL
OF
THEIR
ATTRIBUTES
TO
BE
RECORDED
INTO
BUFFER
OBJECTS
IN
FACT
THE
MINIMAL
OPENGL
PIPELINE
THAT
PRODUCES
USEFUL
WORK
IS
A
VERTEX
SHADER
WITH
TRANSFORM
FEEDBACK
ENABLED
NO
FRAGMENT
SHADER
IS
NECESSARY
EACH
TIME
A
VERTEX
PASSES
THROUGH
PRIMITIVE
ASSEMBLY
THOSE
ATTRIBUTES
THAT
HAVE
BEEN
MARKED
FOR
CAPTURE
ARE
RECORDED
INTO
ONE
OR
MORE
BUFFER
OBJECTS
THOSE
BUFFER
OBJECTS
CAN
THEN
BE
READ
BACK
BY
THE
APPLICATION
OR
THEIR
CONTENTS
USED
IN
SUBSEQUENT
RENDERING
PASSES
BY
OPENGL
TRANSFORM
FEEDBACK
OBJECTS
THE
STATE
REQUIRED
TO
REPRESENT
TRANSFORM
FEEDBACK
IS
ENCAPSULATED
INTO
A
TRANSFORM
FEEDBACK
OBJECT
THIS
STATE
INCLUDES
THE
BUFFER
OBJECTS
THAT
WILL
BE
USED
FOR
RECORDING
THE
CAPTURED
VERTEX
DATA
COUNTERS
INDICATING
HOW
FULL
EACH
BUFFER
OBJECT
IS
AND
STATE
INDICATING
WHETHER
TRANSFORM
FEEDBACK
IS
CURRENTLY
ACTIVE
A
TRANSFORM
FEEDBACK
OBJECT
IS
CREATED
BY
RESERVING
A
TRANSFORM
FEEDBACK
OBJECT
NAME
AND
THEN
BINDING
IT
TO
THE
TRANSFORM
FEEDBACK
OBJECT
BINDING
POINT
ON
THE
CURRENT
CONTEXT
TO
RESERVE
TRANSFORM
FEEDBACK
OBJECT
NAMES
CALL
TO
BE
MORE
EXACT
TRANSFORM
FEEDBACK
IS
TIGHTLY
INTEGRATED
INTO
THE
PRIMITIVE
ASSEMBLY
PROCESS
AS
WHOLE
PRIMITIVES
ARE
CAPTURED
INTO
BUFFER
OBJECTS
THIS
IS
SEEN
AS
BUFFERS
RUN
OUT
OF
SPACE
AND
PARTIAL
PRIMITIVES
ARE
DISCARDED
FOR
THIS
TO
OCCUR
SOME
KNOWLEDGE
OF
THE
CURRENT
PRIMITIVE
TYPE
IS
REQUIRED
IN
THE
TRANSFORM
FEEDBACK
STAGE
TRANSFORM
FEEDBACK
THE
PARAMETER
N
SPECIFIES
HOW
MANY
TRANSFORM
FEEDBACK
OBJECT
NAMES
ARE
TO
BE
RESERVED
AND
IDS
SPECIFIES
THE
ADDRESS
OF
AN
ARRAY
WHERE
THE
RESERVED
NAMES
WILL
BE
PLACED
IF
YOU
WANT
ONLY
ONE
NAME
YOU
CAN
SET
N
TO
ONE
AND
PASS
THE
ADDRESS
OF
A
GLUINT
VARIABLE
IN
IDS
ONCE
YOU
HAVE
RESERVED
A
NAME
FOR
A
TRANSFORM
FEEDBACK
OBJECT
THE
OBJECT
DOESN
T
ACTUALLY
EXIST
UNTIL
THE
FIRST
TIME
IT
IS
BOUND
AT
WHICH
POINT
IT
IS
CREATED
TO
BIND
A
TRANSFORM
FEEDBACK
OBJECT
TO
THE
CONTEXT
CALL
THIS
BINDS
THE
TRANSFORM
FEEDBACK
OBJECT
NAMED
ID
TO
THE
BINDING
ON
THE
CONTEXT
INDICATED
BY
TARGET
WHICH
IN
THIS
CASE
MUST
BE
IF
THIS
IS
THE
FIRST
TIME
THIS
NAME
HAS
BEEN
BOUND
A
NEW
TRANSFORM
FEEDBACK
OBJECT
IS
CREATED
AND
INITIALIZED
WITH
THE
DEFAULT
STATE
OTHERWISE
THE
EXISTING
STATE
OF
THAT
OBJECT
AGAIN
BECOMES
CURRENT
TO
DETERMINE
WHETHER
A
PARTICULAR
VALUE
IS
THE
NAME
OF
A
TRANSFORM
FEEDBACK
OBJECT
YOU
CAN
CALL
GLISTRANSFORMFEEDBACK
WHOSE
PROTOTYPE
IS
AS
FOLLOWS
ONCE
A
TRANSFORM
FEEDBACK
OBJECT
IS
BOUND
ALL
COMMANDS
AFFECTING
TRANSFORM
FEEDBACK
STATE
AFFECT
THAT
TRANSFORM
FEEDBACK
OBJECT
IT
NOT
NECESSARY
TO
HAVE
A
TRANSFORM
FEEDBACK
OBJECT
BOUND
IN
ORDER
TO
USE
TRANSFORM
FEEDBACK
FUNCTIONALITY
AS
THERE
IS
A
DEFAULT
TRANSFORM
FEEDBACK
OBJECT
THE
DEFAULT
TRANSFORM
FEEDBACK
OBJECT
ASSUMES
THE
ID
ZERO
AND
SO
PASSING
ZERO
AS
THE
ID
PARAMETER
TO
GLBINDTRANSFORMFEEDBACK
RETURNS
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
THE
CONTEXT
TO
USE
THE
DEFAULT
TRANSFORM
FEEDBACK
OBJECT
UNBINDING
ANY
PREVIOUSLY
BOUND
TRANSFORM
FEEDBACK
OBJECT
IN
THE
PROCESS
HOWEVER
AS
MORE
COMPLEX
USES
OF
TRANSFORM
FEEDBACK
ARE
INTRODUCED
IT
BECOMES
CONVENIENT
TO
ENCAPSULATE
THE
STATE
OF
TRANSFORM
FEEDBACK
INTO
TRANSFORM
FEEDBACK
OBJECTS
THEREFORE
IT
GOOD
PRACTICE
TO
CREATE
AND
BIND
A
TRANSFORM
FEEDBACK
OBJECT
EVEN
IF
YOU
INTEND
TO
USE
ONLY
ONE
ONCE
A
TRANSFORM
FEEDBACK
OBJECT
IS
NO
LONGER
NEEDED
IT
SHOULD
BE
DELETED
BY
CALLING
THIS
FUNCTION
DELETES
THE
N
TRANSFORM
FEEDBACK
OBJECTS
WHOSE
NAMES
ARE
STORED
IN
THE
ARRAY
WHOSE
ADDRESS
IS
PASSED
IN
IDS
DELETION
OF
THE
OBJECT
IS
DEFERRED
UNTIL
IT
IS
NO
LONGER
IN
USE
THAT
IS
IF
THE
TRANSFORM
FEEDBACK
OBJECT
IS
ACTIVE
WHEN
GLDELETETRANSFORMFEEDBACKS
IS
CALLED
IT
IS
NOT
DELETED
UNTIL
TRANSFORM
FEEDBACK
IS
ENDED
TRANSFORM
FEEDBACK
BUFFERS
TRANSFORM
FEEDBACK
OBJECTS
ARE
PRIMARILY
RESPONSIBLE
FOR
MANAGING
THE
STATE
REPRESENTING
CAPTURE
OF
VERTICES
INTO
BUFFER
OBJECTS
THIS
STATE
INCLUDES
WHICH
BUFFERS
ARE
BOUND
TO
THE
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
MULTIPLE
BUFFERS
CAN
BE
BOUND
SIMULTANEOUSLY
FOR
TRANSFORM
FEEDBACK
AND
SUBSECTIONS
OF
BUFFER
OBJECTS
CAN
ALSO
BE
BOUND
IT
IS
EVEN
POSSIBLE
TO
BIND
DIFFERENT
SUBSECTIONS
OF
THE
SAME
BUFFER
OBJECT
TO
DIFFERENT
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
SIMULTANEOUSLY
TO
BIND
AN
ENTIRE
BUFFER
OBJECT
TO
ONE
OF
THE
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
CALL
TRANSFORM
FEEDBACK
THE
TARGET
PARAMETER
SHOULD
BE
SET
TO
AND
INDEX
SHOULD
BE
SET
TO
THE
INDEX
OF
THE
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINT
IN
THE
CURRENTLY
BOUND
TRANSFORM
FEEDBACK
OBJECT
THE
NAME
OF
THE
BUFFER
TO
BIND
IS
PASSED
IN
BUFFER
THE
TOTAL
NUMBER
OF
BINDING
POINTS
IS
AN
IMPLEMENTATION
DEPENDENT
CONSTANT
THAT
CAN
BE
DISCOVERED
BY
QUERYING
THE
VALUE
OF
AND
INDEX
MUST
BE
LESS
THAN
THIS
VALUE
ALL
OPENGL
IMPLEMENTATIONS
MUST
SUPPORT
AT
LEAST
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
IT
ALSO
POSSIBLE
TO
BIND
A
RANGE
OF
A
BUFFER
OBJECT
TO
ONE
OF
THE
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
BY
CALLING
AGAIN
TARGET
SHOULD
BE
INDEX
SHOULD
BE
BETWEEN
ZERO
AND
ONE
LESS
THAN
THE
VALUE
OF
AND
BUFFER
CONTAINS
THE
NAME
OF
THE
BUFFER
OBJECT
TO
BIND
THE
OFFSET
AND
SIZE
PARAMETERS
DEFINE
WHICH
SECTION
OF
THE
BUFFER
OBJECT
TO
BIND
THIS
FUNCTIONALITY
CAN
BE
USED
TO
BIND
DIFFERENT
RANGES
OF
THE
SAME
BUFFER
OBJECT
TO
DIFFERENT
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
CARE
SHOULD
BE
TAKEN
THAT
THE
RANGES
DO
NOT
OVERLAP
ATTEMPTING
TO
PERFORM
TRANSFORM
FEEDBACK
INTO
MULTIPLE
OVERLAPPING
SECTIONS
OF
THE
SAME
BUFFER
OBJECT
WILL
RESULT
IN
UNDEFINED
BEHAVIOR
POSSIBLY
INCLUDING
DATA
CORRUPTION
OR
WORSE
IN
ADDITION
TO
BINDING
BUFFERS
OR
SECTIONS
OF
BUFFERS
TO
THE
INDEXED
BINDING
POINTS
GLBINDBUFFERBASE
AND
GLBINDBUFFERRANGE
ALSO
BIND
THE
BUFFER
OBJECT
TO
THE
GENERIC
BUFFER
BINDING
POINT
INDICATED
BY
TARGET
THIS
IS
USEFUL
BECAUSE
IT
ALLOWS
OTHER
COMMANDS
THAT
OPERATE
ON
BUFFER
OBJECTS
SUCH
AS
GLBUFFERDATA
GLBUFFERSUBDATA
AND
GLGETBUFFERSUBDATA
TO
OPERATE
ON
THE
BUFFER
OBJECT
MOST
RECENTLY
BOUND
TO
ONE
OF
THE
INDEXED
BUFFER
BINDING
POINTS
NOTE
THOUGH
THAT
NEITHER
GLBINDBUFFERBASE
NOR
GLBINDBUFFERRANGE
CREATE
BUFFER
OBJECTS
UNLIKE
GLBINDBUFFER
AND
SO
YOU
CAN
T
USE
A
GLBINDBUFFERBASE
GLBUFFERDATA
SEQUENCE
TO
CREATE
AND
ALLOCATE
SPACE
FOR
A
TRANSFORM
FEEDBACK
BUFFER
IN
ORDER
TO
ALLOCATE
A
TRANSFORM
FEEDBACK
BUFFER
CODE
SUCH
AS
IN
THAT
SHOWN
IN
EXAMPLE
SHOULD
BE
USED
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
EXAMPLE
EXAMPLE
INITIALIZATION
OF
A
TRANSFORM
FEEDBACK
BUFFER
GENERATE
THE
NAME
OF
A
BUFFER
OBJECT
GLUINT
BUFFER
GLGENBUFFERS
BUFFER
BIND
IT
TO
THE
BINDING
TO
CREATE
IT
GLBINDBUFFER
BUFFER
CALL
GLBUFFERDATA
TO
ALLOCATE
OF
SPACE
GLBUFFERDATA
TARGET
MB
NULL
NO
INITIAL
DATA
USAGE
NOW
WE
CAN
BIND
IT
TO
INDEXED
BUFFER
BINDING
POINTS
GLBINDBUFFERRANGE
TARGET
INDEX
BUFFER
BUFFER
NAME
START
OF
RANGE
FIRST
HALF
OF
BUFFER
GLBINDBUFFERRANGE
TARGET
INDEX
BUFFER
SAME
BUFFER
START
HALF
WAY
SECOND
HALF
NOTICE
HOW
IN
EXAMPLE
THE
NEWLY
RESERVED
BUFFER
OBJECT
NAME
IS
FIRST
BOUND
TO
THE
TARGET
AND
THEN
GLBUFFERDATA
IS
CALLED
TO
ALLOCATE
SPACE
THE
DATA
PARAMETER
TO
GLBUFFERDATA
IS
SET
TO
NULL
TO
INDICATE
THAT
WE
WISH
TO
SIMPLY
ALLOCATE
SPACE
BUT
DO
NOT
WISH
TO
PROVIDE
INITIAL
DATA
FOR
THE
BUFFER
IN
THIS
CASE
THE
BUFFER
CONTENTS
WILL
INITIALLY
BE
UNDEFINED
ALSO
IS
USED
AS
THE
USAGE
PARAMETER
THIS
PROVIDES
A
HINT
TO
THE
OPENGL
IMPLEMENTATION
OF
THE
INTENDED
USE
FOR
THE
BUFFER
OBJECT
THE
DYNAMIC
PART
OF
THE
TOKEN
IMPLIES
THAT
THE
DATA
IN
THE
BUFFER
WILL
BE
CHANGED
OFTEN
AND
THE
COPY
PART
OF
THE
TOKEN
INDICATES
THAT
WE
WILL
BE
USING
OPENGL
NORMALLY
A
GPU
TO
PRODUCE
DATA
TO
BE
WRITTEN
INTO
THE
BUFFER
THIS
TOGETHER
WITH
THE
FACT
THAT
THE
BUFFER
IS
BOUND
TO
THE
BINDING
POINT
SHOULD
GIVE
THE
IMPLEMENTATION
ENOUGH
INFORMATION
TO
INTELLIGENTLY
ALLOCATE
MEMORY
FOR
THE
BUFFER
OBJECT
IN
AN
OPTIMAL
MANNER
FOR
IT
TO
BE
USED
FOR
TRANSFORM
FEEDBACK
ONCE
THE
BUFFER
HAS
BEEN
BOUND
TO
THE
GENERIC
TARGET
AND
SPACE
HAS
BEEN
ALLOCATED
FOR
IT
SECTIONS
OF
IT
ARE
THEN
BOUND
TO
THE
INDEXED
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINTS
BY
CALLING
GLBINDBUFFERRANGE
TWICE
ONCE
TO
BIND
TRANSFORM
FEEDBACK
THE
FIRST
HALF
OF
THE
BUFFER
TO
THE
FIRST
BINDING
POINT
AND
AGAIN
TO
BIND
THE
SECOND
HALF
OF
THE
BUFFER
TO
THE
SECOND
BINDING
POINT
THIS
DEMONSTRATES
WHY
THE
BUFFER
NEEDS
TO
BE
CREATED
AND
ALLOCATED
FIRST
BEFORE
USING
IT
WITH
GLBINDBUFFERRANGE
GLBINDBUFFERRANGE
TAKES
AN
OFFSET
SIZE
PARAMETERS
DESCRIBING
A
RANGE
OF
THE
BUFFER
OBJECT
THAT
MUST
LIE
WITHIN
THE
BUFFER
OBJECT
THIS
CANNOT
BE
DETERMINED
IF
THE
OBJECT
DOES
NOT
YET
EXIST
CONFIGURING
TRANSFORM
FEEDBACK
VARYINGS
WHILE
THE
BUFFER
BINDINGS
USED
FOR
TRANSFORM
FEEDBACK
ARE
ASSOCIATED
WITH
A
TRANSFORM
FEEDBACK
OBJECT
THE
CONFIGURATION
OF
WHICH
OUTPUTS
OF
THE
VERTEX
OR
GEOMETRY
SHADER
ARE
TO
BE
RECORDED
INTO
THOSE
BUFFERS
IS
STORED
IN
THE
ACTIVE
PROGRAM
OBJECT
TO
SPECIFY
WHICH
VARYINGS
WILL
BE
RECORDED
DURING
TRANSFORM
FEEDBACK
CALL
IN
THIS
FUNCTION
PROGRAM
SPECIFIES
THE
PROGRAM
OBJECT
THAT
WILL
BE
USED
FOR
TRANSFORM
FEEDBACK
VARYINGS
CONTAINS
AN
ARRAY
OF
STRINGS
THAT
REPRESENT
THE
NAMES
OF
VARYING
VARIABLES
THAT
ARE
OUTPUTS
OF
THE
FRAGMENT
OR
GEOMETRY
SHADER
THAT
ARE
TO
BE
CAPTURED
BY
TRANSFORM
FEEDBACK
COUNT
IS
THE
NUMBER
OF
STRINGS
IN
VARYINGS
BUFFERMODE
IS
A
TOKEN
INDICATING
HOW
THE
CAPTURED
VARYINGS
SHOULD
BE
ALLOCATED
TO
TRANSFORM
FEEDBACK
BUFFERS
IF
BUFFERMODE
IS
SET
TO
ALL
OF
THE
VARYINGS
WILL
BE
RECORDED
ONE
AFTER
ANOTHER
INTO
THE
BUFFER
OBJECT
BOUND
TO
THE
FIRST
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINT
ON
THE
CURRENT
TRANSFORM
FEEDBACK
OBJECT
IF
BUFFERMODE
IS
EACH
VARYING
WILL
BE
CAPTURED
INTO
ITS
OWN
BUFFER
OBJECT
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
AN
EXAMPLE
OF
THE
USE
OF
GLTRANSFORMFEEDBACKVARYINGS
IS
SHOWN
IN
EXAMPLE
BELOW
EXAMPLE
EXAMPLE
SPECIFICATION
OF
TRANSFORM
FEEDBACK
VARYINGS
CREATE
AN
ARRAY
CONTAINING
THE
NAMES
OF
VARYINGS
TO
RECORD
STATIC
CONST
CHAR
CONST
VARS
FOO
BAR
BAZ
CALL
GLTRANSFORMFEEDBACKVARYINGS
GLTRANSFORMFEEDBACKVARYINGS
PROG
SIZEOF
VARS
SIZEOF
VARS
VARYINGS
NOW
THE
PROGRAM
OBJECT
IS
SET
UP
TO
RECORD
VARYINGS
SQUASHED
TOGETHER
IN
THE
SAME
BUFFER
OBJECT
ALTERNATIVELY
WE
COULD
CALL
GLTRANSFORMFEEDBACKVARYINGS
PROG
SIZEOF
VARS
SIZEOF
VARS
VARYINGS
THIS
SETS
UP
THE
VARYINGS
TO
BE
RECORDED
INTO
SEPARATE
BUFFERS
NOW
THIS
IS
IMPORTANT
LINK
THE
PROGRAM
OBJECT
EVEN
IF
IT
ALREADY
BEEN
LINKED
BEFORE
GLLINKPROGRAM
PROG
NOTICE
IN
EXAMPLE
THAT
THERE
IS
A
CALL
TO
GLLINKPROGRAM
DIRECTLY
AFTER
THE
CALL
TO
GLTRANSFORMFEEDBACKVARYINGS
THIS
IS
BECAUSE
THE
SELECTION
OF
VARYINGS
SPECIFIED
IN
THE
CALL
TO
GLTRANSFORMFEEDBACKVARYINGS
DOES
NOT
TAKE
EFFECT
UNTIL
THE
NEXT
TIME
THE
PROGRAM
OBJECT
IS
LINKED
IF
THE
PROGRAM
HAS
PREVIOUSLY
BEEN
LINKED
AND
IS
THEN
USED
WITHOUT
BEING
RE
LINKED
NO
ERRORS
WILL
OCCUR
BUT
NOTHING
WILL
BE
CAPTURED
DURING
TRANSFORM
FEEDBACK
AFTER
THE
CODE
IN
EXAMPLE
HAS
BEEN
EXECUTED
WHENEVER
PROG
IS
IN
USE
WHILE
TRANSFORM
FEEDBACK
IS
ACTIVE
THE
VALUES
WRITTEN
TO
FOO
BAR
AND
BAZ
WILL
BE
RECORDED
INTO
THE
TRANSFORM
FEEDBACK
BUFFERS
BOUND
TO
THE
CURRENT
TRANSFORM
FEEDBACK
OBJECT
IN
THE
CASE
WHERE
THE
BUFFERMODE
PARAMETER
IS
SET
TO
THE
VALUES
OF
FOO
BAR
AND
BAZ
WILL
BE
TIGHTLY
PACKED
INTO
THE
BUFFER
BOUND
TO
THE
FIRST
TRANSFORM
FEEDBACK
BUFFER
BINDING
POINT
AS
SHOWN
IN
FIGURE
CALLING
GLTRANSFORMFEEDBACKVARYINGS
AFTER
A
PROGRAM
OBJECT
HAS
ALREADY
BEEN
LINKED
AND
THEN
NOT
LINKING
IT
AGAIN
IS
A
COMMON
ERROR
MADE
EVEN
BY
EXPERIENCED
OPENGL
PROGRAMMERS
TRANSFORM
FEEDBACK
VERTEX
VERTEX
FIGURE
TRANSFORM
FEEDBACK
VARYINGS
PACKED
IN
A
SINGLE
BUFFER
HOWEVER
IF
BUFFERMODE
IS
THEN
EACH
OF
FOO
BAR
AND
BAZ
WILL
BE
PACKED
TIGHTLY
INTO
ITS
OWN
BUFFER
OBJECT
AS
SHOWN
IN
FIGURE
VERTEX
VERTEX
VERTEX
VERTEX
BUFFER
VERTEX
VERTEX
VERTEX
VERTEX
BUFFER
VERTEX
VERTEX
VERTEX
VERTEX
BUFFER
FIGURE
TRANSFORM
FEEDBACK
VARYINGS
PACKED
IN
SEPARATE
BUFFERS
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
IN
BOTH
CASES
THE
ATTRIBUTES
WILL
BE
TIGHTLY
PACKED
TOGETHER
THE
AMOUNT
OF
SPACE
IN
THE
BUFFER
OBJECT
THAT
EACH
VARYING
CONSUMES
IS
DETERMINED
BY
ITS
TYPE
IN
THE
VERTEX
SHADER
THAT
IS
IF
FOO
IS
DECLARED
AS
A
IN
THE
VERTEX
SHADER
IT
WILL
CONSUME
EXACTLY
THREE
FLOATS
IN
THE
BUFFER
OBJECT
IN
THE
CASE
WHERE
BUFFERMODE
IS
THE
VALUE
OF
BAR
WILL
BE
WRITTEN
IMMEDIATELY
AFTER
THE
VALUE
OF
FOO
IN
THE
CASE
WHERE
BUFFERMODE
IS
THE
VALUES
OF
FOO
WILL
BE
TIGHTLY
PACKED
INTO
ONE
BUFFER
WITH
NO
GAPS
BETWEEN
THEM
AS
WILL
THE
VALUES
OF
BAR
AND
BAZ
THIS
SEEMS
RATHER
RIGID
THERE
ARE
CASES
WHERE
YOU
MAY
WISH
TO
ALIGN
THE
DATA
WRITTEN
INTO
THE
TRANSFORM
FEEDBACK
BUFFER
DIFFERENTLY
FROM
DEFAULT
LEAVING
UNWRITTEN
GAPS
IN
THE
BUFFER
THERE
MAY
ALSO
BE
CASES
WHERE
YOU
WOULD
WANT
TO
RECORD
MORE
THAN
ONE
VARIABLE
INTO
ONE
BUFFER
BUT
RECORD
OTHER
VARIABLES
INTO
ANOTHER
FOR
EXAMPLE
YOU
MAY
WISH
TO
RECORD
FOO
AND
BAR
INTO
ONE
BUFFER
WHILE
RECORDING
BAZ
INTO
ANOTHER
IN
ORDER
TO
INCREASE
THE
FLEXIBILITY
OF
TRANSFORM
FEEDBACK
VARYING
SETUP
AND
ALLOW
THIS
KIND
OF
USAGE
THERE
ARE
SOME
SPECIAL
VARIABLE
NAMES
RESERVED
BY
OPENGL
THAT
SIGNAL
TO
THE
TRANSFORM
FEEDBACK
SUBSYSTEM
THAT
YOU
WISH
TO
LEAVE
GAPS
IN
THE
OUTPUT
BUFFER
OR
TO
MOVE
BETWEEN
BUFFERS
THESE
ARE
AND
WHEN
ANY
OF
THE
VARIANTS
IS
ENCOUNTERED
OPENGL
WILL
LEAVE
A
GAP
FOR
THE
NUMBER
OF
COMPONENTS
SPECIFIED
OR
IN
THE
TRANSFORM
FEEDBACK
BUFFER
THESE
VARIABLE
NAMES
CAN
ONLY
BE
USED
WHEN
BUFFERMODE
IS
AN
EXAMPLE
OF
USING
THIS
IS
SHOWN
IN
EXAMPLE
EXAMPLE
LEAVING
GAPS
IN
A
TRANSFORM
FEEDBACK
BUFFER
DECLARE
THE
TRANSFORM
FEEDBACK
VARYING
NAMES
STATIC
CONST
CHAR
CONST
VARS
FOO
BAR
BAZ
SET
THE
VARYINGS
GLTRANSFORMFEEDBACKVARYINGS
PROG
SIZEOF
VARS
SIZEOF
VARS
VARYINGS
REMEMBER
TO
LINK
THE
PROGRAM
OBJECT
GLLINKPROGRAM
PROG
TRANSFORM
FEEDBACK
WHEN
THE
OTHER
SPECIAL
VARIABLE
NAME
NAME
IS
ENCOUNTERED
OPENGL
WILL
START
ALLOCATING
VARYINGS
INTO
THE
BUFFER
BOUND
TO
THE
NEXT
TRANSFORM
FEEDBACK
BUFFER
THIS
ALLOWS
MULTIPLE
VARYINGS
TO
BE
RECORDED
INTO
A
SINGLE
BUFFER
OBJECT
ADDITIONALLY
IF
IS
ENCOUNTERED
WHEN
BUFFERMODE
IS
OR
IF
TWO
OR
MORE
INSTANCES
OF
ARE
ENCOUNTERED
IN
A
ROW
IN
IT
ALLOWS
A
WHOLE
BINDING
POINT
TO
BE
SKIPPED
AND
NOTHING
RECORDED
INTO
THE
BUFFER
BOUND
THERE
AN
EXAMPLE
OF
IS
SHOWN
IN
EXAMPLE
EXAMPLE
ASSIGNING
TRANSFORM
FEEDBACK
OUTPUTS
TO
DIFFERENT
BUFFERS
DECLARE
THE
TRANSFORM
FEEDBACK
VARYING
NAMES
STATIC
CONST
CHAR
CONST
VARS
FOO
BAR
VARIABLES
TO
RECORD
INTO
BUFFER
MOVE
TO
BINDING
POINT
BAZ
VARIABLE
TO
RECORD
INTO
BUFFER
SET
THE
VARYINGS
GLTRANSFORMFEEDBACKVARYINGS
PROG
SIZEOF
VARS
SIZEOF
VARS
VARYINGS
REMEMBER
TO
LINK
THE
PROGRAM
OBJECT
GLLINKPROGRAM
PROG
THE
SPECIAL
VARIABLES
NAMES
AND
CAN
BE
COMBINED
TO
ALLOW
VERY
FLEXIBLE
VERTEX
LAYOUTS
TO
BE
CREATED
IF
IT
IS
NECESSARY
TO
SKIP
OVER
MORE
THAN
FOUR
COMPONENTS
MULTIPLE
INSTANCES
OF
MAY
BE
USED
BACK
TO
BACK
CARE
SHOULD
BE
TAKEN
WITH
AGGRESSIVE
USE
OF
THOUGH
BECAUSE
SKIPPED
COMPONENTS
STILL
CONTRIBUTE
TOWARD
THE
COUNT
OF
THE
COUNT
OF
THE
NUMBER
OF
COMPONENTS
CAPTURED
DURING
TRANSFORM
FEEDBACK
EVEN
THOUGH
NO
DATA
IS
ACTUALLY
WRITTEN
THIS
MAY
CAUSE
A
REDUCTION
IN
PERFORMANCE
OR
EVEN
A
FAILURE
TO
LINK
A
PROGRAM
IF
THERE
IS
A
LOT
OF
UNCHANGED
STATIC
DATA
IN
A
BUFFER
IT
MAY
BE
PREFERABLE
TO
SEPARATE
THE
DATA
INTO
STATIC
AND
DYNAMIC
PARTS
AND
LEAVE
THE
STATIC
DATA
IN
ITS
OWN
BUFFER
OBJECT
ALLOWING
THE
DYNAMIC
DATA
TO
BE
MORE
TIGHTLY
PACKED
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
FINALLY
EXAMPLE
SHOWS
AN
ALBEIT
RATHER
CONTRIVED
EXAMPLE
OF
THE
COMBINED
USE
OF
AND
AND
FIGURE
SHOWS
HOW
THE
DATA
ENDS
UP
LAID
OUT
IN
THE
TRANSFORM
FEEDBACK
BUFFERS
EXAMPLE
ASSIGNING
TRANSFORM
FEEDBACK
OUTPUTS
TO
DIFFERENT
BUFFERS
DECLARE
THE
TRANSFORM
FEEDBACK
VARYING
NAMES
STATIC
CONST
CHAR
CONST
VARS
RECORD
FOO
A
GAP
OF
FLOAT
BAR
AND
THEN
TWO
FLOATS
FOO
BAR
MOVE
TO
BINDING
POINT
LEAVE
A
GAP
OF
FLOATS
THEN
RECORD
BAZ
THEN
LEAVE
ANOTHER
GAP
OF
FLOATS
BAZ
MOVE
TO
BINDING
POINT
MOVE
DIRECTLY
TO
BINDING
POINT
WITHOUT
DIRECTING
ANYTHING
TO
BINDING
POINT
RECORD
IRON
AND
COPPER
WITH
A
COMPONENT
GAP
BETWEEN
THEM
IRON
COPPER
SET
THE
VARYINGS
GLTRANSFORMFEEDBACKVARYINGS
PROG
SIZEOF
VARS
SIZEOF
VARS
VARYINGS
REMEMBER
TO
LINK
THE
PROGRAM
OBJECT
GLLINKPROGRAM
PROG
AS
YOU
CAN
SEE
IN
EXAMPLE
CAN
COME
BETWEEN
VARYINGS
OR
AT
THE
START
OR
END
OF
THE
LIST
OF
VARYINGS
TO
RECORD
INTO
A
SINGLE
BUFFER
PUTTING
A
VARIANT
FIRST
IN
THE
LIST
OF
VARYINGS
TO
CAPTURE
WILL
RESULT
IN
OPENGL
LEAVING
A
GAP
AT
THE
FRONT
OF
THE
BUFFER
BEFORE
IT
RECORDS
DATA
AND
THEN
A
GAP
BETWEEN
EACH
SEQUENCE
OF
VARYINGS
ALSO
MULTIPLE
VARIABLES
CAN
COME
BACK
TO
BACK
CAUSING
A
BUFFER
BINDING
POINT
TO
BE
ENTIRELY
PASSED
OVER
AND
NOTHING
RECORDED
INTO
THAT
BUFFER
THE
RESULTING
OUTPUT
LAYOUT
IS
SHOWN
IN
FIGURE
TRANSFORM
FEEDBACK
VERTEX
VERTEX
BUFFER
BUFFER
BUFFER
FIGURE
TRANSFORM
FEEDBACK
VARYINGS
PACKED
INTO
MULTIPLE
BUFFERS
STARTING
AND
STOPPING
TRANSFORM
FEEDBACK
TRANSFORM
FEEDBACK
CAN
BE
STARTED
AND
STOPPED
AND
EVEN
PAUSED
AS
MIGHT
BE
EXPECTED
STARTING
TRANSFORM
FEEDBACK
WHEN
IT
IS
NOT
PAUSED
CAUSES
IT
TO
START
RECORDING
INTO
THE
BOUND
TRANSFORM
FEEDBACK
BUFFERS
FROM
THE
BEGIN
NING
HOWEVER
STARTING
TRANSFORM
FEEDBACK
WHEN
IT
IS
ALREADY
PAUSED
CAUSES
IT
TO
CONTINUE
RECORDING
FROM
WHEREVER
IT
LEFT
OFF
THIS
IS
USEFUL
TO
ALLOW
MUL
TIPLE
COMPONENTS
OF
A
SCENE
TO
BE
RECORDED
INTO
TRANSFORM
FEEDBACK
BUFFERS
WITH
OTHER
COMPONENTS
RENDERED
IN
BETWEEN
THAT
ARE
NOT
TO
BE
RECORDED
TO
START
TRANSFORM
FEEDBACK
CALL
GLBEGINTRANSFORMFEEDBACK
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
THE
GLBEGINTRANSFORMFEEDBACK
FUNCTION
STARTS
TRANSFORM
FEEDBACK
ON
THE
CURRENTLY
BOUND
TRANSFORM
FEEDBACK
OBJECT
THE
PRIMITIVEMODE
PARAMETER
MUST
BE
OR
AND
MUST
MATCH
THE
PRIMITIVE
TYPE
EXPECTED
TO
ARRIVE
AT
PRIMITIVE
ASSEMBLY
NOTE
THAT
IT
DOES
NOT
NEED
TO
MATCH
THE
PRIMITIVE
MODE
USED
IN
SUBSEQUENT
DRAW
COMMANDS
IF
TESSELLATION
OR
A
GEOMETRY
SHADER
IS
ACTIVE
BECAUSE
THOSE
STAGES
MIGHT
CHANGE
THE
PRIMITIVE
TYPE
MID
PIPELINE
THAT
WILL
BE
COVERED
IN
CHAPTERS
AND
FOR
THE
MOMENT
JUST
SET
THE
PRIMITIVEMODE
TO
MATCH
THE
PRIMITIVE
TYPE
YOU
PLAN
TO
DRAW
WITH
TABLE
SHOWS
THE
ALLOWED
COMBINATIONS
OF
PRIMITIVEMODE
AND
DRAW
COMMAND
MODES
TABLE
DRAWING
MODES
ALLOWED
DURING
TRANSFORM
FEEDBACK
TRANSFORM
FEEDBACK
PRIMITIVEMODE
ALLOWED
DRAWING
TYPES
ONCE
TRANSFORM
FEEDBACK
IS
STARTED
IT
IS
CONSIDERED
TO
BE
ACTIVE
IT
MAY
BE
PAUSED
BY
CALLING
GLPAUSETRANSFORMFEEDBACK
WHEN
TRANSFORM
FEEDBACK
IS
PAUSED
IT
IS
STILL
CONSIDERED
ACTIVE
BUT
WILL
NOT
RECORD
ANY
DATA
INTO
THE
TRANSFORM
FEEDBACK
BUFFERS
THERE
ARE
ALSO
SEVERAL
RESTRICTIONS
ABOUT
CHANGING
STATE
RELATED
TO
TRANSFORM
FEEDBACK
WHILE
TRANSFORM
FEEDBACK
IS
ACTIVE
BUT
PAUSED
THE
CURRENTLY
BOUND
TRANSFORM
FEEDBACK
OBJECT
MAY
NOT
BE
CHANGED
IT
IS
NOT
POSSIBLE
TO
BIND
DIFFERENT
BUFFERS
TO
THE
BINDING
POINTS
THE
CURRENT
PROGRAM
OBJECT
CANNOT
BE
CHANGED
ACTUALLY
IT
IS
POSSIBLE
TO
CHANGE
THE
CURRENT
PROGRAM
OBJECT
BUT
AN
ERROR
WILL
BE
GENERATED
BY
GLRESUMETRANSFORMFEEDBACK
IF
THE
PROGRAM
OBJECT
THAT
WAS
CURRENT
WHEN
GLBEGINTRANS
FORMFEEDBACK
WAS
CALLED
IS
NO
LONGER
CURRENT
SO
BE
SURE
TO
PUT
THE
ORIGINAL
PROGRAM
OBJECT
BACK
BEFORE
CALLING
GLRESUMETRANSFORMFEEDBACK
TRANSFORM
FEEDBACK
GLPAUSETRANSFORMFEEDBACK
WILL
GENERATE
AN
ERROR
IF
TRANSFORM
FEEDBACK
IS
NOT
ACTIVE
OR
IF
IT
IS
ALREADY
PAUSED
TO
RESTART
TRANSFORM
FEEDBACK
WHILE
IT
IS
PAUSED
GLRESUMETRANSFORMFEEDBACK
MUST
BE
USED
NOT
GLBEGINTRANSFORMFEEDBACK
LIKEWISE
GLRESUMETRANSFORMFEEDBACK
WILL
GENERATE
AN
ERROR
IF
IT
IS
CALLED
WHEN
TRANSFORM
FEEDBACK
IS
NOT
ACTIVE
OR
IF
IT
IS
ACTIVE
BUT
NOT
PAUSED
WHEN
YOU
VE
COMPLETED
RENDERING
ALL
OF
THE
PRIMITIVES
FOR
TRANSFORM
FEEDBACK
YOU
CHANGE
BACK
TO
NORMAL
RENDERING
MODE
BY
CALLING
GLENDTRANSFORMFEEDBACK
TRANSFORM
FEEDBACK
EXAMPLE
PARTICLE
SYSTEM
THIS
SECTION
CONTAINS
THE
DESCRIPTION
OF
A
MODERATELY
COMPLEX
USE
OF
TRANSFORM
FEEDBACK
THE
APPLICATION
USES
TRANSFORM
FEEDBACK
IN
TWO
WAYS
TO
IMPLEMENT
A
PARTICLE
SYSTEM
ON
A
FIRST
PASS
TRANSFORM
FEEDBACK
IS
USED
TO
CAPTURE
GEOMETRY
AS
IT
PASSES
THROUGH
THE
OPENGL
PIPELINE
THE
CAPTURED
GEOMETRY
IS
THEN
USED
IN
A
SECOND
PASS
ALONG
WITH
ANOTHER
INSTANCE
OF
TRANSFORM
FEEDBACK
IN
ORDER
TO
IMPLEMENT
A
PARTICLE
SYSTEM
THAT
USES
THE
VERTEX
SHADER
TO
PERFORM
COLLISION
DETECTION
BETWEEN
PARTICLES
AND
THE
RENDERED
GEOMETRY
A
SCHEMATIC
OF
THE
SYSTEM
IS
SHOWN
IN
FIGURE
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
OBJECT
SPACE
VERTICES
GENERATES
VIEW
AND
WORLD
SPACE
VERTICES
DOUBLE
BUFFER
POSITION
AND
VELOCITY
DATA
VIEW
SPACE
GEOMETRY
RENDERED
AS
NORMAL
FIGURE
SCHEMATIC
OF
THE
PARTICLE
SYSTEM
SIMULATOR
IN
THIS
APPLICATION
THE
PARTICLE
SYSTEM
IS
SIMULATED
IN
WORLD
SPACE
IN
A
FIRST
PASS
A
VERTEX
SHADER
IS
USED
TO
TRANSFORM
OBJECT
SPACE
GEOMETRY
INTO
BOTH
WORLD
SPACE
FOR
LATER
USE
IN
THE
PARTICLE
SYSTEM
SIMULATION
AND
INTO
EYE
SPACE
FOR
RENDERING
THE
WORLD
SPACE
RESULTS
ARE
CAPTURED
INTO
A
BUFFER
USING
TRANSFORM
FEEDBACK
WHILE
THE
EYE
SPACE
GEOMETRY
IS
PASSED
THROUGH
TO
THE
RASTERIZER
THE
BUFFER
CONTAINING
THE
CAPTURED
WORLD
SPACE
GEOMETRY
IS
ATTACHED
TO
A
TEXTURE
BUFFER
OBJECT
TBO
SO
THAT
IT
CAN
BE
RANDOMLY
ACCESSED
IN
THE
VERTEX
SHADER
THAT
IS
USED
TO
IMPLEMENT
COLLISION
DETECTION
IN
THE
SECOND
SIMULATION
PASS
USING
THIS
MECHANISM
ANY
OBJECT
THAT
WOULD
NORMALLY
BE
RENDERED
CAN
BE
CAPTURED
SO
LONG
AS
THE
VERTEX
OR
GEOMETRY
SHADER
PRODUCES
WORLD
SPACE
VERTICES
IN
ADDITION
TO
EYE
SPACE
VERTICES
THIS
ALLOWS
THE
PARTICLE
SYSTEM
TO
INTERACT
WITH
MULTIPLE
OBJECTS
POTENTIALLY
WITH
EACH
RENDERED
USING
A
DIFFERENT
SET
OF
SHADERS
PERHAPS
EVEN
WITH
TESSELLATION
ENABLED
OR
OTHER
PROCEDURALLY
GENERATED
GEOMETRY
THE
SECOND
PASS
IS
WHERE
THE
PARTICLE
SYSTEM
SIMULATION
OCCURS
PARTICLE
POSITION
AND
VELOCITY
VECTORS
ARE
STORED
IN
A
PAIR
OF
BUFFERS
TWO
BUFFERS
ARE
USED
SO
THAT
DATA
CAN
BE
DOUBLE
BUFFERED
AS
IT
NOT
POSSIBLE
TO
UPDATE
VERTEX
DATA
IN
PLACE
EACH
VERTEX
IN
THE
BUFFER
REPRESENTS
A
SINGLE
PARTICLE
IN
THE
SYSTEM
EACH
INSTANCE
OF
THE
VERTEX
SHADER
PERFORMS
COLLISION
DETECTION
BETWEEN
THE
PARTICLE
USING
ITS
VELOCITY
TO
COMPUTE
WHERE
IT
WILL
MOVE
TO
DURING
THE
TIME
STEP
AND
ALL
OF
THE
GEOMETRY
CAPTURED
DURING
THE
FIRST
PASS
IT
CALCULATES
NEW
POSITION
AND
VELOCITY
VECTORS
WHICH
ARE
CAPTURED
USING
TRANSFORM
FEEDBACK
AND
WRITTEN
INTO
A
BUFFER
OBJECT
READY
FOR
THE
NEXT
STEP
IN
THE
SIMULATION
CARE
SHOULD
BE
TAKEN
HERE
TESSELLATION
CAN
GENERATE
A
VERY
LARGE
AMOUNT
OF
GEOMETRY
ALL
OF
WHICH
THE
SIMULATED
PARTICLES
MUST
BE
TESTED
AGAINST
WHICH
COULD
SEVERELY
AFFECT
PERFORMANCE
AND
INCREASE
STORAGE
REQUIREMENTS
FOR
THE
INTERMEDIATE
GEOMETRY
TRANSFORM
FEEDBACK
EXAMPLE
CONTAINS
THE
SOURCE
OF
THE
VERTEX
SHADER
USED
TO
TRANSFORM
THE
INCOMING
GEOMETRY
INTO
BOTH
WORLD
AND
EYE
SPACE
AND
EXAMPLE
SHOWS
HOW
TRANSFORM
FEEDBACK
IS
CONFIGURED
TO
CAPTURE
THE
RESULTING
WORLD
SPACE
GEOMETRY
EXAMPLE
VERTEX
SHADER
USED
IN
GEOMETRY
PASS
OF
PARTICLE
SYSTEM
SIMULATOR
VERSION
CORE
UNIFORM
UNIFORM
LAYOUT
LOCATION
IN
POSITION
LAYOUT
LOCATION
IN
NORMAL
OUT
OUT
VOID
MAIN
VOID
POS
POSITION
POS
NORMALIZE
NORMAL
XYZ
POS
EXAMPLE
CONFIGURING
THE
GEOMETRY
PASS
OF
THE
PARTICLE
SYSTEM
SIMULATOR
STATIC
CONST
CHAR
GLTRANSFORMFEEDBACKVARYINGS
GLLINKPROGRAM
DURING
THE
FIRST
GEOMETRY
PASS
THE
CODE
IN
EXAPLES
AND
WILL
CAUSE
THE
WORLD
SPACE
GEOMETRY
TO
BE
CAPTURED
INTO
A
BUFFER
OBJECT
EACH
TRIANGLE
IN
THE
BUFFER
IS
REPRESENTED
BY
THREE
THAT
ARE
READ
THREE
AT
A
TIME
DURING
THE
SECOND
PASS
INTO
THE
VERTEX
SHADER
AND
USED
TO
PERFORM
LINE
SEGMENT
AGAINST
TRIANGLE
INTERSECTION
TEST
A
TBO
IS
USED
TO
ACCESS
THE
DATA
IN
THE
INTERMEDIATE
BUFFER
SO
THAT
THE
THREE
VERTICES
CAN
BE
READ
IN
A
SIMPLE
ONLY
TRIANGLES
ARE
USED
HERE
IT
NOT
POSSIBLE
TO
PERFORM
A
MEANINGFUL
PHYSICAL
COLLISION
DETECTION
BETWEEN
A
LINE
SEGMENT
AND
ANOTHER
LINE
SEGMENT
OR
A
POINT
ALSO
INDIVIDUAL
TRIAN
GLES
ARE
REQUIRED
FOR
THIS
TO
WORK
IF
STRIPS
OR
FANS
ARE
PRESENT
IN
THE
INPUT
GEOMETRY
IT
MAY
BE
NECESSARY
TO
INCLUDE
A
GEOMETRY
SHADER
IN
ORDER
TO
CONVERT
THE
CONNECTED
TRIANGLES
INTO
INDEPENDENT
TRIANGLES
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
FOR
LOOP
THE
LINE
SEGMENT
IS
FORMED
BY
TAKING
THE
PARTICLE
CURRENT
POSITION
AND
USING
ITS
VELOCITY
TO
CALCULATE
WHERE
IT
WILL
BE
AT
THE
END
OF
THE
TIME
STEP
THIS
IS
PERFORMED
FOR
EVERY
CAPTURED
TRIANGLE
IF
A
COLLISION
IS
FOUND
THE
POINT
NEW
POSITION
IS
REFLECTED
ABOUT
THE
PLANE
OF
THE
TRIANGLE
TO
MAKE
IT
BOUNCE
OFF
THE
GEOMETRY
EXAMPLE
CONTAINS
THE
CODE
OF
THE
VERTEX
SHADER
USED
TO
PERFORM
COLLISION
DETECTION
IN
THE
SIMULATION
PASS
EXAMPLE
VERTEX
SHADER
USED
IN
SIMULATION
PASS
OF
PARTICLE
SYSTEM
SIMULATOR
VERSION
CORE
UNIFORM
UNIFORM
UNIFORM
INT
LAYOUT
LOCATION
IN
POSITION
LAYOUT
LOCATION
IN
VELOCITY
OUT
OUT
UNIFORM
SAMPLERBUFFER
UNIFORM
FLOAT
BOOL
INTERSECT
ORIGIN
DIRECTION
OUT
POINT
U
V
N
W
FLOAT
R
A
B
U
V
N
CROSS
U
V
ORIGIN
A
DOT
N
B
DOT
N
DIRECTION
R
A
B
IF
R
R
RETURN
FALSE
POINT
ORIGIN
R
DIRECTION
FLOAT
UU
UV
VV
WU
WV
D
UU
DOT
U
U
UV
DOT
U
V
VV
DOT
V
V
W
POINT
TRANSFORM
FEEDBACK
WU
DOT
W
U
WV
DOT
W
V
D
UV
UV
UU
VV
FLOAT
T
UV
WV
VV
WU
D
IF
RETURN
FALSE
T
UV
WU
UU
WV
D
IF
T
T
RETURN
FALSE
RETURN
TRUE
V
N
RETURN
V
DOT
V
N
N
VOID
MAIN
VOID
ACCELERATION
VELOCITY
ACCELERATION
POSITION
POINT
INT
I
FOR
I
I
I
TEXELFETCH
I
XYZ
TEXELFETCH
I
XYZ
TEXELFETCH
I
XYZ
IF
INTERSECT
POSITION
XYZ
POSITION
XYZ
XYZ
POINT
N
NORMALIZE
CROSS
POINT
XYZ
POINT
N
N
IF
Y
X
POSITION
Y
POSITION
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
THE
CODE
TO
SET
UP
TRANSFORM
FEEDBACK
TO
CAPTURE
THE
UPDATED
PARTICLE
POSITION
AND
VELOCITY
VECTORS
IS
SHOWN
IN
EXAMPLE
EXAMPLE
CONFIGURING
THE
SIMULATION
PASS
OF
THE
PARTICLE
SYSTEM
SIMULATOR
STATIC
CONST
CHAR
VARYINGS
GLTRANSFORMFEEDBACKVARYINGS
VARYINGS
GLLINKPROGRAM
THE
INNER
RENDERING
LOOP
OF
THE
APPLICATION
IS
QUITE
SIMPLE
FIRST
THE
PROGRAM
OBJECT
USED
FOR
RENDERING
THE
GEOMETRY
IS
BOUND
AS
IS
A
TRANSFORM
FEEDBACK
OBJECT
REPRESENTING
THE
STATE
REQUIRED
TO
CAPTURE
THE
WORLD
SPACE
GEOMETRY
THEN
ALL
OF
THE
SOLID
OBJECTS
IN
THE
SCENE
ARE
RENDERED
CAUSING
THE
INTERMEDIATE
BUFFER
TO
BE
FILLED
WITH
WORLD
SPACE
GEOMETRY
NEXT
THE
PROGRAM
OBJECT
USED
FOR
UPDATING
PARTICLE
POSITIONS
IS
MADE
CURRENT
AS
IS
THE
TRANSFORM
FEEDBACK
OBJECT
USED
FOR
CAPTURING
POSITION
AND
VELOCITY
DATA
FOR
THE
PARTICLE
SYSTEM
FINALLY
THE
PARTICLES
ARE
RENDERED
THE
CODE
FOR
THIS
INNER
LOOP
IS
SHOWN
IN
EXAMPLE
EXAMPLE
MAIN
RENDERING
LOOP
OF
THE
PARTICLE
SYSTEM
SIMULATOR
GLUSEPROGRAM
GLBINDVERTEXARRAY
GLBINDBUFFERBASE
GLBEGINTRANSFORMFEEDBACK
OBJECT
RENDER
GLENDTRANSFORMFEEDBACK
GLUSEPROGRAM
OBJECT
GETVERTEXCOUNT
IF
GLBINDVERTEXARRAY
VAO
GLBINDBUFFERBASE
VBO
TRANSFORM
FEEDBACK
ELSE
GLBINDVERTEXARRAY
VAO
GLBINDBUFFERBASE
VBO
GLBEGINTRANSFORMFEEDBACK
GLDRAWARRAYS
MIN
GLENDTRANSFORMFEEDBACK
GLBINDVERTEXARRAY
THE
RESULT
OF
THE
PROGRAM
IS
SHOWN
IN
FIGURE
FIGURE
RESULT
OF
THE
PARTICLE
SYSTEM
SIMULATOR
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
CHAPTER
TEXTURES
CHAPTER
OBJECTIVES
AFTER
READING
THIS
CHAPTER
YOU
LL
BE
ABLE
TO
DO
THE
FOLLOWING
UNDERSTAND
WHAT
TEXTURE
MAPPING
CAN
ADD
TO
YOUR
SCENE
SUPPLY
TEXTURE
IMAGES
IN
COMPRESSED
AND
UNCOMPRESSED
FORMATS
CONTROL
HOW
A
TEXTURE
IMAGE
IS
FILTERED
AS
IT
IS
APPLIED
TO
A
FRAGMENT
CREATE
AND
MANAGE
TEXTURE
IMAGES
IN
TEXTURE
OBJECTS
SUPPLY
TEXTURE
COORDINATES
DESCRIBING
WHAT
PART
OF
THE
TEXTURE
IMAGE
SHOULD
BE
MAPPED
ONTO
OBJECTS
IN
YOUR
SCENE
PERFORM
COMPLEX
TEXTURE
OPERATIONS
USING
MULTIPLE
TEXTURES
IN
A
SINGLE
SHADER
SPECIFY
TEXTURES
TO
BE
USED
FOR
PROCESSING
POINT
SPRITES
THE
GOAL
OF
COMPUTER
GRAPHICS
GENERALLY
SPEAKING
IS
TO
DETERMINE
THE
COLORS
THAT
MAKE
UP
EACH
PART
OF
AN
IMAGE
WHILE
IT
IS
POSSIBLE
TO
CALCULATE
THE
COLOR
OF
A
PIXEL
USING
AN
ADVANCED
SHADING
ALGORITHM
OFTEN
THE
COM
PLEXITY
OF
SUCH
A
SHADER
IS
SO
GREAT
THAT
IT
IS
NOT
PRACTICAL
TO
IMPLEMENT
SUCH
APPROACHES
INSTEAD
WE
RELY
ON
TEXTURES
LARGE
CHUNKS
OF
IMAGE
DATA
THAT
CAN
BE
USED
TO
PAINT
THE
SURFACES
OF
OBJECTS
TO
MAKE
THEM
APPEAR
MORE
REALISTIC
THIS
CHAPTER
DISCUSSES
VARIOUS
APPROACHES
AND
TECHNIQUES
TO
APPLY
TEXTURES
USING
SHADERS
IN
YOUR
APPLICATION
THIS
CHAPTER
HAS
THE
FOLLOWING
MAJOR
SECTIONS
TEXTURE
MAPPING
PROVIDES
AN
OVERVIEW
THE
THE
PROCESS
OF
TEXTURE
MAPPING
BASIC
TEXTURE
TYPES
PROVIDES
AN
OUTLINE
OF
THE
TYPES
OF
TEXTURE
THAT
ARE
AVAILABLE
IN
OPENGL
CREATING
AND
INITIALIZING
TEXTURES
EXPLAINS
HOW
TO
CREATE
AND
SET
UP
A
TEXTURE
FOR
USE
IN
YOUR
APPLICATION
PROXY
TEXTURES
INTRODUCES
THE
PROXY
TEXTURE
TARGETS
WHICH
PROVIDE
A
MECHANISM
TO
PROBE
THE
CAPABILITIES
OF
THE
OPENGL
IMPLEMENTATION
SPECIFYING
TEXTURE
DATA
PROVIDES
A
DESCRIPTION
OF
THE
FORMATTING
OF
TEXTURE
DATA
IN
OPENGL
AND
HOW
YOU
GET
THAT
DATA
INTO
YOUR
TEXTURE
OBJECTS
SAMPLER
OBJECTS
SHOWS
HOW
SAMPLER
OBJECTS
CAN
BE
USED
TO
CONTROL
THE
WAY
THAT
OPENGL
READS
DATA
FROM
TEXTURES
INTO
YOUR
SHADERS
USING
TEXTURES
DELVES
INTO
THE
WAYS
THAT
YOU
CAN
MAKE
BEST
USE
OF
TEXTURES
IN
YOUR
SHADERS
COMPLEX
TEXTURE
TYPES
DESCRIBES
SOME
OF
THE
MORE
ADVANCED
TEXTURE
TYPES
THAT
ARE
AVAILABLE
IN
OPENGL
INCLUDING
ARRAY
TEXTURES
CUBE
MAPS
DEPTH
AND
BUFFER
TEXTURES
TEXTURE
VIEWS
DESCRIBES
HOW
TO
SHARE
ONE
TEXTURE
DATA
WITH
ONE
OR
MORE
OTHER
TEXTURES
AND
TO
INTERPRET
IT
IN
DIFFERENT
WAYS
COMPRESSED
TEXTURES
EXPLORES
METHODS
TO
USE
COMPRESSED
TEXTURE
DATA
IN
YOUR
APPLICATION
IN
ORDER
TO
SAVE
MEMORY
AND
BANDWIDTH
WHICH
ARE
BOTH
IMPORTANT
PERFORMANCE
CONSIDERATIONS
FILTERING
OUTLINES
THE
VARIOUS
WAYS
IN
WHICH
MULTIPLE
TEXELS
MAY
BE
COMBINED
IN
ORDER
TO
REDUCE
ARTIFACTS
AND
TO
IMPROVE
THE
QUALITY
OF
YOUR
RENDERED
IMAGES
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
TAKES
A
CLOSER
LOOK
AT
SOME
OF
THE
MORE
ADVANCED
FUNCTIONS
AVAILABLE
IN
GLSL
THAT
CAN
BE
USED
TO
READ
DATA
FROM
TEXTURES
WITH
MORE
CONTROL
CHAPTER
TEXTURES
POINT
SPRITES
DESCRIBES
A
FEATURE
OF
OPENGL
THAT
PROVIDES
TEXTURE
COORDINATES
AUTOMATICALLY
FOR
GEOMETRY
RENDERED
AS
POINTS
ALLOWING
YOUR
APPLICATION
TO
VERY
QUICKLY
RENDER
SMALL
BITMAPS
TO
THE
DISPLAY
RENDERING
TO
TEXTURE
MAPS
EXPLAINS
HOW
TO
RENDER
DIRECTLY
INTO
A
TEXTURE
MAP
BY
USING
FRAMEBUFFER
OBJECTS
TEXTURE
MAPPING
IN
THE
PHYSICAL
WORLD
COLORS
WITHIN
YOUR
FIELD
OF
VIEW
CAN
CHANGE
RAPIDLY
ODDS
ARE
YOU
RE
READING
THIS
BOOK
INSIDE
OF
A
BUILDING
LOOK
AT
THE
WALLS
CEILING
FLOORS
AND
OBJECTS
IN
THE
ROOM
UNLESS
YOU
VE
FURNISHED
YOUR
HOME
ENTIRELY
AT
IKEA
IT
LIKELY
SOME
SURFACE
IN
THE
ROOM
WILL
HAVE
DETAIL
WHERE
THE
COLORS
CHANGE
RAPIDLY
ACROSS
A
SMALL
AREA
CAPTURING
COLOR
CHANGES
WITH
THAT
AMOUNT
OF
DETAIL
IS
BOTH
TOILSOME
AND
DATA
INTENSIVE
EFFECTIVELY
YOU
NEED
TO
SPECIFY
A
TRIANGLE
FOR
EACH
REGION
OF
LINEAR
COLOR
CHANGE
IT
WOULD
BE
MUCH
SIMPLER
TO
BE
ABLE
TO
USE
A
PICTURE
AND
GLUE
IT
ONTO
THE
SURFACE
LIKE
WALLPAPER
ENTER
TEXTURE
MAPPING
THIS
TECHNIQUE
ALLOWS
YOU
TO
LOOK
UP
VALUES
LIKE
COLORS
FROM
A
SHADER
IN
A
SPECIAL
TYPE
OF
TABLE
WHILE
TEXTURE
MAPPING
IS
AVAILABLE
IN
ALL
OF
OPENGL
SHADING
STAGES
WE
LL
FIRST
DISCUSS
IT
IN
THE
CONTEXT
OF
PROCESSING
FRAGMENTS
BECAUSE
THAT
WHERE
IT
USED
MOST
OFTEN
OFTEN
A
TEXTURE
MAP
OR
JUST
TEXTURE
FOR
SHORT
IS
AN
IMAGE
CAPTURED
BY
A
CAMERA
OR
PAINTED
BY
AN
ARTIST
BUT
THERE
NO
REQUIREMENT
THAT
BE
THE
CASE
IT
POSSIBLE
THAT
THE
IMAGE
IS
PROCEDURALLY
GENERATED
SEE
CHAPTER
PROCEDURAL
TEXTURING
OR
EVEN
RENDERED
BY
OPENGL
TARGETING
A
TEXTURE
INSTEAD
OF
THE
DISPLAY
DEVICE
TEXTURES
OF
THIS
NATURE
WOULD
BE
TWO
DIMENSIONAL
BUT
OPENGL
SUPPORTS
MANY
OTHER
TYPES
OF
TEXTURES
AS
WELL
ONE
AND
THREE
DIMENSIONAL
TEXTURES
CUBE
MAP
TEXTURES
AND
BUFFER
TEXTURES
ARRAY
TEXTURES
ARE
ALSO
SUPPORTED
WHICH
ARE
TREATED
AS
A
SET
OF
SLICES
OF
SIMILAR
DIMENSION
AND
FORMAT
WRAPPED
UP
IN
A
SINGLE
TEXTURE
OBJECT
ALL
OF
THESE
WILL
BE
DISCUSSED
IN
DETAIL
BELOW
TEXTURES
ARE
COMPOSED
OF
TEXELS
WHICH
WILL
OFTEN
CONTAIN
COLOR
VALUES
HOWEVER
THERE
A
LOT
OF
UTILITY
IN
MERELY
CONSIDERING
A
TEXTURE
AS
A
TABLE
OF
VALUES
THAT
YOU
CAN
QUERY
IN
A
SHADER
AND
USE
FOR
ANY
PURPOSE
YOU
DESIRE
IN
ORDER
TO
USE
TEXTURE
MAPPING
IN
YOUR
APPLICATION
YOU
WILL
NEED
TO
DO
THE
FOLLOWING
STEPS
CREATE
A
TEXTURE
OBJECT
AND
LOAD
TEXEL
DATA
INTO
IT
INCLUDE
TEXTURE
COORDINATES
WITH
YOUR
VERTICES
WE
APPLAUD
YOU
IF
THAT
NOT
TRUE
EXCEPT
IF
YOU
RE
CURRENTLY
OPERATING
A
MOVING
VEHICLE
TEXTURE
MAPPING
ASSOCIATE
A
TEXTURE
SAMPLER
WITH
EACH
TEXTURE
MAP
YOU
INTEND
TO
USE
IN
YOUR
SHADER
RETRIEVE
THE
TEXEL
VALUES
THROUGH
THE
TEXTURE
SAMPLER
FROM
YOUR
SHADER
WE
LL
DISCUSS
EACH
OF
THOSE
STEPS
IN
THE
FOLLOWING
SECTIONS
BASIC
TEXTURE
TYPES
OPENGL
SUPPORTS
MANY
TYPES
OF
TEXTURE
OBJECT
OF
VARYING
DIMENSIONA
LITIES
AND
LAYOUT
EACH
TEXTURE
OBJECT
REPRESENTS
A
SET
OF
IMAGES
THAT
MAKE
UP
THE
COMPLETE
TEXTURE
EACH
IMAGE
IS
A
OR
ARRAY
OF
TEXELS
AND
MANY
IMAGES
MAY
BE
STACKED
ONE
ON
TOP
OF
ANOTHER
TO
FORM
WHAT
IS
KNOWN
AS
A
MIPMAP
PYRAMID
MORE
INFORMATION
ABOUT
MIPMAPS
HOW
THEY
AFFECT
TEXTURING
AND
HOW
TO
CREATE
THEM
IS
COVERED
IN
USING
AND
GENERATING
MIPMAPS
ON
PAGE
FURTHERMORE
TEXTURES
MAY
CONTAIN
ARRAYS
OF
OR
SLICES
SUCH
TEXTURES
ARE
KNOWN
AS
ARRAY
TEXTURES
AND
EACH
ELEMENT
OF
THE
ARRAY
IS
KNOWN
AS
A
SLICE
A
CUBE
MAP
IS
A
SPECIAL
CASE
OF
AN
ARRAY
TEXTURE
THAT
HAS
A
MULTIPLE
OF
SIX
SLICES
A
SINGLE
CUBE
MAP
TEXTURE
HAS
EXACTLY
SIX
FACES
WHEREAS
A
CUBE
MAP
ARRAY
REPRESENTS
AN
ARRAY
OF
CUBE
MAP
TEXTURES
ALWAYS
HAVING
AN
INTEGER
MULTIPLE
OF
SIX
FACES
TEXTURES
MAY
BE
USED
TO
REPRESENT
MULTISAMPLED
SURFACES
BY
USING
THE
MULTISAMPLED
TEXTURE
TYPES
FOR
AND
ARRAY
TEXTURES
MULTISAMPLING
IS
A
TERM
THAT
REFERS
TO
AN
IMPLEMENTATION
OF
ANTIALIASING
WHERE
EACH
TEXEL
OR
PIXEL
IS
ASSIGNED
MULTIPLE
INDEPENDENT
COLORS
AND
THOSE
COLORS
MAY
BE
MERGED
TOGETHER
LATER
IN
THE
RENDERING
PROCESS
TO
PRODUCE
THE
FINAL
OUTPUT
COLOR
A
MULTISAMPLED
TEXTURE
HAS
SEVERAL
SAMPLES
TYPICALLY
BETWEEN
TWO
AND
EIGHT
FOR
EACH
TEXEL
TEXTURES
ARE
BOUND
TO
THE
OPENGL
CONTEXT
VIA
TEXTURE
UNITS
WHICH
ARE
REPRESENTED
AS
BINDING
POINTS
NAMED
THROUGH
WHERE
I
IS
ONE
LESS
THAN
THE
NUMBER
OF
TEXTURE
UNITS
SUPPORTED
BY
THE
IMPLEMENTATION
MANY
TEXTURES
MAY
BE
BOUND
TO
THE
SAME
CONTEXT
CONCURRENTLY
AS
THE
CONTEXT
SUPPORTS
MANY
TEXTURE
UNITS
ONCE
A
TEXTURE
HAS
BEEN
BOUND
TO
A
CONTEXT
IT
MAY
BE
ACCESSED
IN
SHADERS
USING
SAMPLER
VARIABLES
WHICH
WERE
DECLARED
WITH
DIMENSIONALITY
THAT
MATCHES
THE
TEXTURE
TABLE
GIVES
A
LIST
OF
THE
AVAILABLE
TEXTURE
DIMENSIONALITIES
KNOWN
AS
TEXTURE
TARGETS
AND
THE
CORRESPONDING
SAMPLER
TYPE
THAT
MUST
BE
USED
IN
SHADERS
TO
ACCESS
THE
TEXELS
IN
THE
TEXTURE
CHAPTER
TEXTURES
TABLE
TEXTURE
TARGETS
AND
CORRESPONDING
SAMPLER
TYPES
TARGET
SAMPLER
TYPE
DIMENSIONALITY
ARRAY
ARRAY
MULTISAMPLE
MULTISAMPLE
ARRAY
CUBE
SAMPLERCUBE
CUBE
MAP
TEXTURE
ARRAY
SAMPLERCUBEARRAY
CUBE
MAP
ARRAY
RECTANGLE
SAMPLERRECT
RECTANGLE
BUFFER
SAMPLERBUFFER
BUFFER
IN
TABLE
A
NUMBER
OF
SPECIAL
TEXTURE
TARGETS
ARE
LISTED
FIRST
THE
RECTANGLE
TEXTURE
TARGET
IS
A
SPECIAL
CASE
OF
TEXTURE
THAT
REPRESENTS
A
SIMPLE
RECTANGLE
OF
TEXELS
IT
CANNOT
HAVE
MIPMAPS
AND
IT
CANNOT
BE
USED
TO
REPRESENT
A
TEXTURE
ARRAY
ALSO
SOME
OF
THE
TEXTURE
WRAPPING
MODES
ARE
NOT
SUPPORTED
FOR
RECTANGLE
TEXTURES
SECOND
THE
BUFFER
TEXTURE
WHICH
REPRESENTS
ARBITRARY
ARRAYS
OF
TEXELS
LIKE
RECTANGLE
TEXTURES
THEY
DO
NOT
HAVE
MIPMAPS
AND
CANNOT
BE
AGGREGATED
INTO
ARRAYS
FURTHERMORE
THE
STORAGE
I
E
MEMORY
FOR
BUFFER
TEXTURES
IS
ACTUALLY
REPRESENTED
USING
A
BUFFER
OBJECT
BECAUSE
OF
THIS
THE
UPPER
BOUND
ON
THE
SIZE
OF
A
BUFFER
TEXTURE
IS
MUCH
LARGER
THAN
A
NORMAL
ONE
DIMENSIONAL
TEXTURE
BUFFER
TEXTURES
MAKE
IT
POSSIBLE
TO
ACCESS
THINGS
LIKE
VERTEX
DATA
FROM
ANY
SHADER
STAGE
WITHOUT
NEEDING
TO
COPY
IT
INTO
A
TEXTURE
IMAGE
IN
THE
FIRST
FEW
SECTIONS
OF
THIS
CHAPTER
WE
WILL
COVER
BASIC
TEXTURING
USING
SINGLE
TEXTURES
WHICH
WILL
BE
SUFFICIENT
TO
DESCRIBE
HOW
TO
CREATE
INITIALIZE
AND
ACCESS
TEXTURES
IN
SHADERS
LATER
IN
THE
CHAPTER
BEGINNING
IN
COMPLEX
TEXTURE
TYPES
ON
PAGE
WE
WILL
DISCUSS
MORE
ADVANCED
TEXTURE
TYPES
SUCH
AS
VOLUME
TEXTURES
BUFFER
TEXTURES
AND
TEXTURE
ARRAYS
FIRST
WE
WILL
CONTINUE
OUR
INTRODUCTION
TO
TEXTURING
USING
TEXTURES
AND
THEN
RETURN
TO
EACH
OF
THE
SPECIAL
TYPES
IN
DETAIL
ONCE
THE
BASICS
HAVE
BEEN
COVERED
CREATING
AND
INITIALIZING
TEXTURES
THE
FIRST
STEP
IN
USING
TEXTURES
IN
OPENGL
IS
TO
RESERVE
NAMES
FOR
TEXTURE
OBJECTS
AND
BIND
THEM
TO
THE
CONTEXT
TEXTURE
UNITS
TO
CREATE
A
TEXTURE
AS
WITH
MANY
OTHER
OBJECTS
IN
OPENGL
NAMES
ARE
RESERVED
AND
THEN
BOUND
CREATING
AND
INITIALIZING
TEXTURES
TO
THEIR
APPROPRIATE
TARGET
TO
RESERVE
NAMES
FOR
TEXTURE
OBJECTS
CALL
GLGENTEXTURES
SPECIFYING
THE
NUMBER
OF
NAMES
TO
RESERVE
AND
THE
ADDRESS
OF
AN
ARRAY
INTO
WHICH
TO
DEPOSIT
THE
NAMES
AFTER
TEXTURE
OBJECT
NAMES
HAVE
FIRST
BEEN
RESERVED
THEY
DON
T
YET
REPRESENT
TEXTURES
AND
SO
THEY
DON
T
HAVE
ANY
DIMENSIONALITY
OR
TYPE
A
TEXTURE
OBJECT
IS
CREATED
WITH
THE
RESERVED
NAME
THE
FIRST
TIME
IT
IS
BOUND
TO
A
TEXTURE
TARGET
USING
GLBINDTEXTURE
THE
TARGET
USED
FOR
THIS
INITIAL
BINDING
DETERMINES
WHAT
TYPE
OF
TEXTURE
IS
CREATED
FROM
THEN
ON
THE
TEXTURE
MAY
ONLY
BE
BOUND
TO
THAT
UNTIL
IT
IS
DESTROYED
OR
TARGETS
THAT
ARE
COMPATIBLE
WITH
THAT
TYPE
OF
TEXTURE
CHAPTER
TEXTURES
AS
ALREADY
DESCRIBED
THE
OPENGL
CONTEXT
SUPPORTS
MULTIPLE
TEXTURE
UNITS
CALLING
GLBINDTEXTURE
BINDS
A
TEXTURE
OBJECT
TO
THE
ACTIVE
TEXTURE
UNIT
WITH
THE
DIMENSIONALITY
SPECIFIED
BY
TARGET
THE
ACTIVE
TEXTURE
UNIT
IS
INFERRED
FROM
A
SELECTOR
WHICH
MAY
BE
CHANGED
BY
CALLING
THE
GLACTIVETEXTURE
FUNCTION
A
SINGLE
TEXTURE
MAY
BE
BOUND
TO
MULTIPLE
TEXTURE
UNITS
SIMULTANEOUSLY
THIS
CAUSES
THE
SAME
TEXTURE
DATA
TO
BE
READ
THROUGH
DIFFERENT
SAMPLERS
REPRESENTING
THE
TEXTURE
UNITS
TO
WHICH
THE
TEXTURE
IS
BOUND
THE
MAXIMUM
NUMBER
OF
TEXTURE
UNITS
SUPPORTED
BY
OPENGL
CAN
BE
DETERMINED
BY
RETRIEVING
THE
VALUE
OF
THE
CONSTANT
WHICH
IS
GUARANTEED
TO
BE
AT
LEAST
AS
OF
OPENGL
ONCE
A
TEXTURE
HAS
BEEN
BOUND
TO
A
TEXTURE
UNIT
FOR
THE
FIRST
TIME
IT
IS
INITIALIZED
WITH
DEFAULT
AND
BECOMES
A
TEXTURE
OBJECT
UNTIL
THIS
POINT
THE
RESERVED
NAME
IS
REALLY
JUST
A
PLACEHOLDER
AND
IS
NOT
YET
A
TEXTURE
OBJECT
TO
DETERMINE
WHETHER
A
RESERVED
NAME
REFERS
TO
A
TEXTURE
OBJECT
YOU
MAY
CALL
GLISTEXTURE
THE
DEFAULT
STATE
OF
TEXTURE
OBJECTS
MAY
BE
FOUND
IN
THE
STATE
TABLES
IN
THE
OPENGL
SPECIFICATION
CREATING
AND
INITIALIZING
TEXTURES
ONCE
A
TEXTURE
OBJECT
HAS
REACHED
THE
END
OF
ITS
USEFUL
LIFE
IT
SHOULD
BE
DELETED
THE
FUNCTION
FOR
DELETING
TEXTURES
IS
GLDELETETEXTURES
AND
IT
WORKS
SIMILARLY
TO
GLGENTEXTURES
IN
THAT
IT
TAKES
A
NUMBER
OF
TEXTURE
OBJECTS
TO
DELETE
AND
THE
ADDRESS
OF
AN
ARRAY
CONTAINING
THE
NAMES
OF
THOSE
TEXTURES
ANY
REFERENCE
TO
THE
UNDERLYING
STORAGE
ASSOCIATED
WITH
THE
TEXTURES
IS
REMOVED
AND
THAT
STORAGE
WILL
EVENTUALLY
BE
RELEASED
BY
OPENGL
WHEN
IT
IS
NO
LONGER
NEEDED
ONCE
A
TEXTURE
OBJECT
HAS
BEEN
DELETED
USING
GLDELETETEXTURES
ITS
NAME
BECOMES
UNUSED
AGAIN
AND
MAY
BE
RETURNED
FROM
A
SUBSEQUENT
CALL
TO
GLGENTEXTURES
ONCE
WE
HAVE
CREATED
SOME
TEXTURE
OBJECTS
WE
MUST
SPECIFY
STORAGE
AND
ULTIMATELY
DATA
FOR
THEM
EACH
DIMENSIONALITY
OF
TEXTURE
OBJECT
HAS
AN
ASSOCIATED
STORAGE
FUNCTION
THAT
DEFINES
THE
BOUNDS
OF
THE
TEXTURE
THESE
ARE
AND
WHICH
DEFINE
THE
STORAGE
FOR
AND
TEXTURES
RESPECTIVELY
FOR
ARRAY
TEXTURES
THE
NEXT
HIGHER
DIMENSION
IS
USED
TO
SPECIFY
THE
SIZE
OF
THE
ARRAY
FOR
EXAMPLE
IS
USED
TO
INITIALIZE
STORAGE
FOR
ARRAY
TEXTURES
AND
IS
USED
TO
INITIALIZE
STORAGE
FOR
ARRAY
TEXTURES
AND
CUBE
MAP
ARRAY
TEXTURES
ARRAY
TEXTURES
WILL
BE
COVERED
IN
MORE
DETAIL
IN
ARRAY
TEXTURES
ON
PAGE
CHAPTER
TEXTURES
VOID
GLENUM
TARGET
GLSIZEI
LEVELS
GLENUM
INTERNALFORMAT
GLSIZEI
WIDTH
VOID
GLENUM
TARGET
GLSIZEI
LEVELS
GLENUM
INTERNALFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
VOID
GLENUM
TARGET
GLSIZEI
LEVELS
GLENUM
INTERNALFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
GLSIZEI
DEPTH
SPECIFY
IMMUTABLE
TEXTURE
STORAGE
FOR
THE
TEXTURE
OBJECT
CURRENTLY
BOUND
TO
TARGET
MAY
BE
USED
TO
SPECIFY
STORAGE
FOR
TEXTURES
AND
FOR
THIS
FUNCTION
TARGET
MUST
BE
IS
USED
TO
SPECIFY
STORAGE
FOR
ARRAY
TEXTURES
WHEN
TARGET
IS
AND
FOR
TEXTURES
WHEN
TARGET
IS
FOR
ARRAY
TEXTURES
WIDTH
SPECIFIES
THE
EXTENT
OF
THE
TEXTURE
AND
HEIGHT
SPECIFIES
THE
NUMBER
OF
SLICES
IN
THE
ARRAY
FOR
TEXTURES
WIDTH
AND
HEIGHT
SPECIFY
THE
DIMENSIONS
OF
THE
TEXTURE
IS
USED
TO
SPECIFY
STORAGE
FOR
ARRAY
TEXTURES
WHEN
TARGET
IS
AND
FOR
TEXTURES
WHEN
TARGET
IS
FOR
ARRAY
TEXTURES
WIDTH
AND
HEIGHT
SPECIFY
THE
DIMENSIONS
OF
EACH
SLICE
AND
DEPTH
SPECIFIES
THE
NUMBER
OF
SLICES
IN
THE
ARRAY
FOR
TEXTURES
WIDTH
HEIGHT
AND
DEPTH
SPECIFY
THE
DIMENSIONS
OF
THE
TEXEL
ARRAY
THE
THROUGH
ARE
USED
TO
CREATE
IMMUTABLE
STORAGE
FOR
TEXTURES
THE
ATTRIBUTES
OF
THE
STORAGE
FOR
THE
TEXTURE
INCLUDE
THE
AMOUNT
OF
MEMORY
REQUIRED
TO
STORE
ALL
OF
THE
TEXELS
IN
ALL
OF
THE
MIPMAP
LEVELS
FOR
THE
TEXTURE
IN
THE
CHOSEN
INTERNAL
FORMAT
AT
THE
SPECIFIED
RESOLUTION
ONCE
ALLOCATED
WITH
ONE
OF
THESE
FUNCTIONS
THE
STORAGE
MAY
NOT
BE
REDEFINED
THIS
IS
GENERALLY
CONSIDERED
BEST
PRACTICE
IN
OPENGL
AS
ONCE
DEFINED
THE
OPENGL
IMPLEMENTATION
CAN
MAKE
ASSUMPTIONS
THAT
THE
DIMENSIONS
AND
FORMAT
OF
THE
TEXTURE
OBJECT
WILL
NOT
CHANGE
OVER
ITS
LIFETIME
AND
THUS
CAN
STOP
TRACKING
CERTAIN
ASPECTS
OF
THE
TEXTURE
OBJECT
NOTE
THAT
IT
ONLY
THE
ATTRIBUTES
OF
THE
STORAGE
THAT
CANNOT
CHANGE
ONCE
A
TEXTURE
HAS
BEEN
DESIGNATED
AS
IMMUTABLE
THE
CONTENTS
OF
THE
TEXTURE
MAY
BE
CHANGED
USING
FUNCTIONS
SUCH
AS
AS
EXPLAINED
IN
SPECIFYING
TEXTURE
DATA
ON
PAGE
THE
FUNCTIONS
AND
ONLY
ALLOW
THE
CREATION
OF
STORAGE
FOR
SINGLE
SAMPLED
TEXTURES
IF
A
MULTISAMPLED
TEXTURE
IS
BEING
USED
YOU
MAY
CALL
OR
TO
CREATE
STORAGE
FOR
THE
TEXTURES
CREATING
AND
INITIALIZING
TEXTURES
VOID
GLENUM
TARGET
GLSIZEI
SAMPLES
GLENUM
INTERNALFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
GLBOOLEAN
FIXEDSAMPLELOCATIONS
VOID
GLENUM
TARGET
GLSIZEI
SAMPLES
GLENUM
INTERNALFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
GLSIZEI
DEPTH
GLBOOLEAN
FIXEDSAMPLELOCATIONS
SPECIFY
IMMUTABLE
TEXTURE
STORAGE
FOR
THE
MULTISAMPLE
TEXTURE
OBJECT
CURRENTLY
BOUND
TO
TARGET
FOR
TARGET
MUST
BE
AND
IT
IS
USED
TO
SPECIFY
STORAGE
MULTISAMPLE
TEXTURES
WIDTH
AND
HEIGHT
SPECIFY
THE
DIMENSIONS
OF
THE
TEXTURE
IS
USED
TO
SPECIFY
STORAGE
FOR
MULTISAMPLE
ARRAY
TEXTURES
TARGET
MUST
BE
FOR
MULTISAMPLE
ARRAY
TEXTURES
WIDTH
AND
HEIGHT
SPECIFY
THE
DIMENSIONS
OF
EACH
SLICE
AND
DEPTH
SPECIFIES
THE
NUMBER
OF
SLICES
IN
THE
ARRAY
IN
BOTH
FUNCTIONS
SAMPLES
SPECIFIES
THE
NUMBER
OF
SAMPLES
REPRESENTED
BY
THE
TEXTURE
IF
FIXEDSAMPLELOCATIONS
IS
THEN
OPENGL
WILL
USE
THE
SAME
SUB
TEXEL
POSITION
FOR
THE
SAME
SAMPLE
IN
EACH
TEXEL
OF
THE
TEXTURE
IF
FIXEDSAMPLELOCATIONS
IS
THEN
OPENGL
MAY
CHOOSE
A
SPATIALLY
VARYING
LOCATION
FOR
A
GIVEN
SAMPLE
IN
EACH
TEXEL
ALTHOUGH
IT
IS
BEST
PRACTICE
TO
DECLARE
TEXTURE
STORAGE
AS
IMMUTABLE
IT
MAY
BE
DESIRABLE
TO
ALLOW
TEXTURE
OBJECTS
TO
BE
REDEFINED
TO
BE
RESIZED
OR
HAVE
THEIR
FORMAT
CHANGED
FOR
EXAMPLE
IF
IMMUTABLE
STORAGE
IS
NOT
DESIRED
ONE
OF
THE
MUTABLE
TEXTURE
ALLOCATION
FUNCTIONS
MAY
BE
USED
THE
MUTABLE
TEXTURE
IMAGE
SPECIFICATION
COMMANDS
INCLUDE
AND
OR
THEIR
MULTISAMPLE
VARIANTS
AND
CHAPTER
TEXTURES
VOID
GLENUM
TARGET
GLINT
LEVEL
GLINT
INTERNALFORMAT
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
GLSIZEI
DEPTH
GLINT
BORDER
GLENUM
FORMAT
GLENUM
TYPE
CONST
VOID
DATA
THE
FUNCTIONS
AND
ARE
USED
TO
SPECIFY
MUTABLE
STORAGE
AND
TO
OPTIONALLY
PROVIDE
INITIAL
IMAGE
DATA
FOR
A
SINGLE
MIPMAP
LEVEL
OF
A
OR
TEXTURE
RESPEC
TIVELY
IN
ADDITION
AND
MAY
BE
USED
TO
SPECIFY
STORAGE
AND
IMAGE
DATA
FOR
A
SINGLE
MIPMAP
LEVEL
OF
A
OR
ARRAY
TEXTURE
THE
PARAMETERS
WIDTH
HEIGHT
AND
DEPTH
IF
PRESENT
SPECIFY
THE
WIDTH
HEIGHT
AND
DEPTH
OF
THE
RESULTING
TEXEL
ARRAY
IN
TEXELS
FOR
ARRAY
TEXTURE
SPECIFICATION
HEIGHT
SPECIFIES
THE
NUMBER
OF
SLICES
IN
A
ARRAY
TEXTURE
AND
DEPTH
SPECIFIES
THE
NUMBER
OF
SLICES
IN
A
ARRAY
TEXTURE
INTERNALFORMAT
SPECIFIES
THE
FORMAT
WITH
WHICH
OPENGL
SHOULD
STORE
THE
TEXELS
IN
THE
TEXTURE
DATA
SPECIFIES
THE
LOCATION
OF
THE
INITIAL
TEXEL
DATA
IN
MEMORY
IF
A
BUFFER
IS
BOUND
TO
THE
BINDING
POINT
TEXEL
DATA
IS
READ
FROM
THAT
BUFFER
OBJECT
AND
DATA
IS
INTERPRETED
AS
AN
OFFSET
INTO
THAT
BUFFER
OBJECT
FROM
WHICH
TO
READ
THE
DATA
IF
NO
BUFFER
IS
BOUND
TO
THEN
DATA
IS
INTERPRETED
AS
A
DIRECT
POINTER
TO
THE
DATA
IN
APPLICATION
MEMORY
UNLESS
IT
IS
NULL
IN
WHICH
CASE
THE
INITIAL
CONTENTS
OF
THE
TEXTURE
ARE
UNDEFINED
THE
FORMAT
OF
THE
INITIAL
TEXEL
DATA
IS
GIVEN
BY
THE
COMBINATION
OF
FORMAT
AND
TYPE
OPENGL
WILL
CONVERT
THE
SPECIFIED
DATA
FROM
THIS
FORMAT
INTO
THE
INTERNAL
FORMAT
SPECIFIED
BY
INTERNALFORMAT
CREATING
AND
INITIALIZING
TEXTURES
BECAUSE
INITIAL
DATA
CANNOT
BE
SPECIFIED
FOR
MULTISAMPLE
TEXTURES
AND
FUNCTIONS
SUCH
AS
CANNOT
BE
USED
TO
UPDATE
THE
CONTENTS
OF
MULTISAMPLE
TEXTURES
THE
ONLY
WAY
TO
PLACE
DATA
INTO
A
MULTISAMPLE
TEXTURE
IS
TO
ATTACH
IT
TO
A
FRAMEBUFFER
OBJECT
AND
RENDER
INTO
IT
RENDERING
INTO
TEXTURES
USING
FRAMEBUFFER
OBJECTS
IS
DISCUSSED
IN
MORE
DETAIL
IN
CHAPTER
COLOR
PIXELS
AND
FRAMEBUFFERS
TEXTURE
FORMATS
THE
FUNCTIONS
AND
AND
THEIR
CORRESPONDING
MULTISAMPLE
VARIANTS
ALL
TAKE
AN
INTERNALFORMAT
PARAMETER
WHICH
DETERMINES
THE
FORMAT
THAT
OPENGL
WILL
USE
TO
STORE
THE
INTERNAL
TEXTURE
DATA
THEY
ALSO
TAKE
A
FORMAT
AND
TYPE
PARAMETER
INDICATING
THE
FORMAT
AND
TYPE
OF
THE
DATA
SUPPLIED
BY
THE
APPLICATION
INTERNAL
FORMATS
THE
INTERNAL
FORMAT
OF
A
TEXTURE
IS
THE
FORMAT
THAT
OPENGL
WILL
USE
TO
INTERNALLY
STORE
THE
TEXTURE
DATA
YOU
GIVE
IT
YOUR
DATA
WILL
BE
CONVERTED
IF
NECESSARY
INTO
THIS
FORMAT
AT
IMAGE
SPECIFICATION
TIME
THERE
ARE
A
LARGE
NUMBER
OF
INTERNAL
FORMATS
THAT
OPENGL
CAN
STORE
IMAGE
DATA
IN
AND
EACH
CHAPTER
TEXTURES
COMES
WITH
A
SIZE
PERFORMANCE
AND
QUALITY
TRADEOFF
IT
IS
UP
TO
YOU
THE
APPLICATION
WRITER
TO
DETERMINE
THE
APPROPRIATE
FORMAT
FOR
YOUR
NEEDS
TABLE
LISTS
ALL
OF
THE
INTERNAL
FORMATS
SUPPORTED
BY
OPENGL
ALONG
WITH
THEIR
BIT
SIZES
FOR
EACH
COMPONENT
TABLE
SIZED
INTERNAL
FORMATS
SIZED
BASE
R
G
B
A
SHARED
INTERNAL
FORMAT
INTERNAL
FORMAT
BITS
BITS
BITS
BITS
BITS
S8
S16
CREATING
AND
INITIALIZING
TEXTURES
TABLE
CONTINUED
SIZED
INTERNAL
FORMATS
SIZED
INTERNAL
FORMAT
BASE
INTERNAL
FORMAT
R
BITS
G
BITS
B
BITS
A
BITS
SHARED
BITS
F32
I8
I16
I32
UI32
CHAPTER
TEXTURES
FOR
EACH
FORMAT
LISTED
IN
TABLE
THE
FULL
FORMAT
IS
MADE
UP
OF
AN
IDENTIFIER
REPRESENTING
THE
BASE
FORMAT
ONE
OR
MORE
SIZE
INDICATORS
AND
AN
OPTIONAL
TYPE
THE
BASE
FORMAT
ESSENTIALLY
DETERMINES
WHICH
COMPONENTS
OF
THE
TEXTURE
ARE
PRESENT
FORMATS
STARTING
WITH
HAVE
ONLY
THE
RED
COMPONENT
PRESENT
FORMATS
HAVE
BOTH
RED
AND
GREEN
FORMATS
CONTAIN
RED
GREEN
AND
BLUE
AND
FINALLY
CONTAIN
RED
GREEN
BLUE
AND
ALPHA
THE
SUBSEQUENT
SIZE
INDICATOR
DETERMINES
THE
NUMBER
OF
BITS
THAT
ARE
USED
TO
STORE
THE
TEXTURE
DATA
IN
MANY
CASES
ONLY
A
SINGLE
SIZE
PARAMETER
IS
INCLUDED
IN
SUCH
CASES
ALL
COMPONENTS
PRESENT
RECEIVE
THE
SAME
NUMBER
OF
BITS
BY
DEFAULT
OPENGL
STORES
TEXTURES
IN
UNSIGNED
NORMALIZED
FORMAT
WHEN
DATA
IS
STORED
IN
UNSIGNED
NORMALIZED
FORMAT
THE
VALUES
OF
THE
TEXELS
ARE
STORED
IN
MEMORY
AS
AN
INTEGER
WHICH
WHEN
READ
INTO
A
SHADER
IS
CONVERTED
TO
FLOATING
POINT
AND
DIVIDED
BY
THE
MAXIMUM
REPRESENTABLE
VALUE
FOR
THE
CORRESPONDING
SIZE
OF
INTEGER
THIS
RESULTS
IN
DATA
IN
THE
RANGE
TO
I
E
NORMALIZED
DATA
BEING
PRESENTED
TO
THE
SHADER
IF
THE
MODIFIER
IS
PRESENT
AS
IN
FOR
EXAMPLE
THEN
THE
DATA
IS
SIGNED
NORMALIZED
IN
THIS
CASE
THE
DATA
IN
MEMORY
IS
TREATED
AS
A
SIGNED
INTEGER
AND
BEFORE
IT
IS
RETURNED
TO
THE
SHADER
IT
IS
CONVERTED
TO
FLOATING
POINT
AND
DIVIDED
BY
THE
MAXIMUM
REPRESENTABLE
SIGNED
INTEGER
VALUE
RESULTING
IN
FLOATING
POINT
VALUES
IN
THE
RANGE
TO
BEING
RETURNED
TO
THE
SHADER
TYPE
SPECIFIERS
MAY
BE
PRESENT
IN
THE
INTERNAL
FORMAT
NAME
THESE
TYPE
SPECIFIERS
ARE
I
UI
AND
F
INDICATING
SIGNED
INTEGER
UNSIGNED
INTEGER
AND
FLOATING
POINT
DATA
RESPECTIVELY
THE
SIGNED
AND
UNSIGNED
INTEGER
INTERNAL
FORMATS
ARE
DESIGNED
TO
BE
USED
WITH
SIGNED
OR
UNSIGNED
INTEGER
SAMPLER
TYPES
IN
YOUR
SHADER
OR
FOR
EXAMPLE
THE
FLOATING
POINT
INTERNAL
FORMATS
ARE
TRUE
FLOATING
POINT
FORMATS
IN
THAT
THE
DATA
IS
STORED
IN
MEMORY
IN
A
FLOATING
POINT
REPRESENTATION
AND
RETURNED
TO
THE
SHADER
WITH
THE
FULL
PRECISION
SUPPORTED
BY
THE
OPENGL
IMPLEMEN
TATION
IN
SUCH
CASES
THE
TEXELS
CAN
REPRESENT
FLOATING
POINT
VALUES
OUTSIDE
THE
RANGE
TO
IN
SOME
CASES
A
DIFFERENT
SIZE
SPECIFIER
IS
USED
FOR
SOME
OR
EACH
OF
THE
CHANNELS
IN
THESE
CASES
OPENGL
WILL
USE
A
DIFFERENT
NUMBER
OF
BITS
FOR
EACH
OF
THE
CHANNELS
FOR
EXAMPLE
TEXTURES
ARE
STORED
USING
A
BIT
QUANTITY
PER
TEXEL
WITH
BITS
ALLOCATED
TO
EACH
OF
THE
RED
GREEN
AND
BLUE
CHANNELS
BUT
ONLY
BITS
ALLOCATED
TO
THE
ALPHA
CHANNEL
THIS
FORMAT
OF
TEXTURE
IS
USEFUL
FOR
REPRESENTING
HIGHER
DYNAMIC
RANGE
TEXTURES
WITH
ONLY
A
FEW
LEVELS
OF
OPACITY
OR
WITH
THE
ALPHA
CHANNEL
USED
TO
STORE
SOMETHING
OTHER
THAN
TRADITIONAL
OPACITY
THE
USES
BITS
FOR
EACH
OF
RED
AND
GREEN
AND
BITS
FOR
BLUE
BUT
STORES
EACH
CREATING
AND
INITIALIZING
TEXTURES
CHANNEL
IN
A
SPECIAL
REDUCED
PRECISION
FLOATING
POINT
FORMAT
THE
BIT
COMPONENTS
HAVE
NO
SIGN
BIT
A
BIT
EXPONENT
AND
A
BIT
MANTISSA
THE
FORMAT
IS
SPECIAL
IN
THAT
IT
IS
A
SHARED
EXPONENT
FORMAT
EACH
COMPONENT
IS
STORED
AS
AN
INDEPENDENT
BIT
MANTISSA
BUT
SHARES
A
SINGLE
BIT
EXPONENT
BETWEEN
ALL
OF
THE
COMPONENTS
THIS
ALLOWS
TEXTURES
TO
BE
STORED
WITH
A
FAIRLY
HIGH
DYNAMIC
RANGE
BUT
TO
ONLY
CONSUME
BITS
PER
TEXEL
THE
AND
FORMATS
ARE
RGB
TEXTURES
IN
THE
SRGB
COLOR
SPACE
THE
FORMER
WITHOUT
ALPHA
AND
THE
LATTER
INCLUDING
AN
ALPHA
CHANNEL
THE
ALPHA
CHANNEL
IN
IS
REPRESENTED
SEPARATELY
BECAUSE
IT
IS
NOT
PART
OF
THE
SRGB
COLOR
SPACE
AND
IS
NOT
SUBJECT
TO
THE
DE
GAMMA
CALCULATIONS
AFFECTING
THE
OTHER
COMPONENTS
EXTERNAL
FORMATS
THE
EXTERNAL
FORMAT
IS
THE
FORMAT
THAT
YOU
USE
TO
SUPPLY
DATA
THROUGH
THE
OPENGL
API
AND
IS
REPRESENTED
BY
THE
FORMAT
AND
TYPE
PARAMETERS
TO
FUNCTIONS
SUCH
AS
THE
FORMAT
IS
MADE
UP
OF
A
PART
INDICATING
WHICH
CHANNELS
ARE
PRESENT
AND
AN
OPTIONAL
INTEGER
FORMAT
SPECIFIER
ADDITIONALLY
THERE
ARE
A
HANDFUL
OF
PACKED
INTEGER
FORMATS
THAT
ARE
USED
TO
REPRESENT
PREPACKED
TEXTURE
DATA
IDEALLY
THERE
WOULD
BE
NO
CONVERSION
REQUIRED
TO
TAKE
YOUR
TEXTURE
DATA
AND
PLACE
IT
INTO
THE
TEXTURE
WITH
THE
REQUESTED
INTERNAL
FORMAT
THE
POSSIBLE
VALUES
FOR
THE
FORMAT
PARAMETER
ARE
GIVEN
IN
TABLE
WHICH
LISTS
THE
EXTERNAL
FORMAT
IDENTIFIER
THE
COMPONENTS
PRESENT
THEIR
ORDER
AND
WHETHER
THE
DATA
IS
COMPRISED
OF
INTEGER
VALUES
TABLE
EXTERNAL
TEXTURE
FORMATS
FORMAT
COMPONENTS
PRESENT
RED
GREEN
BLUE
RED
GREEN
RED
GREEN
BLUE
RED
GREEN
BLUE
ALPHA
BLUE
GREEN
RED
BLUE
GREEN
RED
ALPHA
RED
INTEGER
GREEN
INTEGER
CHAPTER
TEXTURES
TABLE
CONTINUED
EXTERNAL
TEXTURE
FORMATS
FORMAT
COMPONENTS
PRESENT
BLUE
INTEGER
RED
GREEN
INTEGER
RED
GREEN
BLUE
INTEGER
RED
GREEN
BLUE
ALPHA
INTEGER
BLUE
GREEN
RED
INTEGER
BLUE
GREEN
RED
ALPHA
INTEGER
AGAIN
NOTICE
THAT
THE
FORMAT
SPECIFIERS
LISTED
IN
TABLE
INDICATE
WHICH
COMPONENTS
ARE
PRESENT
RED
GREEN
BLUE
AND
ALPHA
THEIR
ORDER
AND
AN
OPTIONAL
SUFFIX
IF
THIS
SUFFIX
IS
PRESENT
THEN
THE
VALUES
PASSED
TO
OPENGL
ARE
TREATED
AS
UNNORMALIZED
INTEGER
DATA
AND
USED
VERBATIM
IF
THE
INTERNAL
FORMAT
OF
THE
TEXTURE
IS
A
FLOATING
POINT
FORMAT
THEN
THE
DATA
IS
CONVERTED
TO
FLOATING
POINT
DIRECTLY
THAT
IS
AN
INTEGER
VALUE
OF
BECOMES
IN
FLOATING
POINT
REGARDLESS
OF
THE
INCOMING
DATA
TYPE
IF
YOU
WISH
TO
RECEIVE
INTEGERS
IN
YOUR
SHADER
THEN
YOU
SHOULD
USE
AN
INTEGER
SAMPLER
TYPE
AN
INTEGER
INTERNAL
FORMAT
E
G
AND
AN
INTEGER
EXTERNAL
FORMAT
AND
TYPE
E
G
AND
THE
FORMAT
PARAMETER
IS
USED
IN
CONJUNCTION
WITH
A
TYPE
PARAMETER
TO
DESCRIBE
THE
TEXTURE
DATA
IN
MEMORY
TYPE
IS
NORMALLY
ONE
OF
OR
TO
INDICATE
SIGNED
OR
UNSIGNED
BYTES
SIGNED
OR
UNSIGNED
SHORTS
SIGNED
OR
UNSIGNED
INTEGERS
OR
HALF
PRECISION
OR
FULL
PRECISION
FLOATING
POINT
QUANTITIES
MAY
ALSO
BE
USED
TO
INDICATE
DOUBLE
PRECISION
QUANTITIES
THESE
TOKENS
CORRESPOND
TO
THE
GLBYTE
GLUBYTE
GLSHORT
GLUSHORT
GLINT
GLUINT
GLHALF
GLFLOAT
AND
GLDOUBLE
TYPES
RESPECTIVELY
IN
ADDITION
TO
THE
TOKENS
REPRESENTING
THE
NATIVE
TYPES
SEVERAL
SPECIAL
TOKENS
ARE
USED
TO
SPECIFY
PACKED
OR
MIXED
TYPE
FORMATS
THESE
ARE
USED
WHEN
DATA
IS
PACKED
INTO
LARGER
NATIVE
TYPES
WITH
THE
BOUNDARIES
BETWEEN
COMPONENTS
NOT
NECESSARILY
LINING
UP
NICELY
ON
NATIVE
BYTE
SHORT
OR
INTEGER
BOUNDARIES
THESE
TYPE
NAMES
ARE
GENERALLY
MADE
UP
OF
A
STANDARD
TYPE
SPECIFIER
SUCH
AS
FOLLOWED
BY
A
SUFFIX
INDICATING
HOW
THE
DATA
IS
LAID
OUT
IN
MEMORY
TABLE
SHOWS
A
FEW
EXAMPLES
OF
HOW
COMPONENTS
MAY
BE
PACKED
INTO
NATIVE
DATA
TYPES
USING
PACKED
FORMAT
TOKENS
CREATING
AND
INITIALIZING
TEXTURES
TABLE
EXAMPLE
COMPONENT
LAYOUTS
FOR
PACKED
PIXEL
FORMATS
FORMAT
TOKEN
COMPONENT
LAYOUT
RED
GREEN
BLUE
ALPHA
ALPHA
BLUE
GREEN
RED
PROXY
TEXTURES
IN
ADDITION
TO
THE
TEXTURE
TARGETS
LISTED
IN
TABLE
OPENGL
SUPPORTS
WHAT
ARE
KNOWN
AS
PROXY
TEXTURE
TARGETS
EACH
STANDARD
TEXTURE
HAS
A
CORRESPONDING
PROXY
TEXTURE
TARGET
TABLE
LISTS
THE
STANDARD
TEXTURE
TARGETS
AND
THEIR
CORRESPONDING
PROXY
TEXTURE
TARGETS
TABLE
TEXTURE
TARGETS
AND
CORRESPONDING
PROXY
TARGETS
TEXTURE
PROXY
TEXTURE
TARGET
TARGET
CUBE
CUBE
RECTANGLE
RECTANGLE
BUFFER
N
A
ALL
TARGETS
EXCEPT
FOR
HAVE
A
CORRESPONDING
PROXY
TEXTURE
TARGET
CHAPTER
TEXTURES
PROXY
TEXTURE
TARGETS
MAY
BE
USED
TO
TEST
THE
CAPABILITIES
OF
THE
OPENGL
IMPLEMENTATION
WHEN
CERTAIN
LIMITS
ARE
USED
IN
COMBINATION
WITH
EACH
OTHER
FOR
EXAMPLE
CONSIDER
AN
OPENGL
IMPLEMENTATION
THAT
REPORTS
A
MAXIMUM
TEXTURE
SIZE
OF
TEXELS
WHICH
IS
THE
MINIMUM
REQUIREMENT
FOR
OPENGL
IF
ONE
WERE
TO
CREATE
A
TEXTURE
OF
TEXELS
WITH
AN
INTERNAL
FORMAT
OF
WHICH
REQUIRES
FOUR
BYTES
OF
STORAGE
PER
TEXEL
THEN
THE
TOTAL
STORAGE
REQUIREMENT
FOR
SUCH
A
TEXTURE
WOULD
BE
AT
LEAST
A
GIGABYTE
MORE
IF
MIPMAPS
OR
OTHER
INTERNAL
STORAGE
IS
REQUIRED
THEREFORE
SUCH
A
REQUEST
WOULD
FAIL
ON
AN
OPENGL
IMPLEMENTATION
WITH
LESS
THAN
A
GIGABYTE
OF
AVAILABLE
STORAGE
FOR
TEXTURES
BY
REQUESTING
SUCH
A
TEXTURE
ALLOCATION
ON
A
PROXY
TEXTURE
TARGET
THE
IMPLEMENTATION
CAN
TELL
YOU
WHETHER
THE
REQUEST
SUCCEED
ON
A
NORMAL
TARGET
OR
WHETHER
IT
IS
DESTINED
TO
FAIL
IF
AN
ALLOCATION
OF
A
TEXTURE
ON
A
PROXY
TEXTURE
TARGET
FAILS
THE
TEXTURE
ON
THE
VIRTUAL
PROXY
TARGET
WILL
HAVE
A
WIDTH
AND
HEIGHT
OF
ZERO
QUERYING
THE
DIMENSIONS
OF
THE
PROXY
TARGET
WILL
TELL
YOU
WHETHER
THE
CALL
WAS
SUCCESSFUL
AND
WHETHER
SUCH
A
REQUEST
ON
A
REAL
TARGET
MIGHT
SUCCEED
SPECIFYING
TEXTURE
DATA
IN
THIS
SECTION
WE
DESCRIBE
THE
METHOD
IN
WHICH
IMAGE
DATA
IS
LOADED
INTO
TEXTURE
OBJECTS
TWO
METHODS
ARE
COVERED
FIRST
WE
SHOW
HOW
TO
LOAD
IMAGES
DIRECTLY
INTO
THE
TEXTURE
OBJECT
EITHER
FROM
DATA
STORED
IN
ARRAYS
IN
YOUR
PROGRAM
OR
FROM
BUFFER
OBJECTS
THIS
ILLUSTRATES
THE
STORAGE
AND
DATA
FORMATS
USED
FOR
TEXTURE
OBJECTS
NEXT
WE
SHOW
HOW
TO
USE
THE
VGLLOADIMAGE
FUNCTION
THAT
IS
SUPPLIED
AS
PART
OF
THE
SAMPLE
CODE
FOR
THIS
BOOK
AND
HOW
IT
ALLOWS
YOU
TO
LOAD
IMAGES
FROM
FILES
EXPLICITLY
SETTING
TEXTURE
DATA
IN
ORDER
TO
DESCRIBE
THE
PROCESS
IN
WHICH
TEXTURE
DATA
IS
SPECIFIED
TO
OPENGL
IT
POSSIBLY
EASIEST
TO
BE
ABLE
TO
SEE
THE
IMAGE
DATA
DIRECTLY
IN
YOUR
PROGRAM
TEXTURE
DATA
IS
LAID
AS
YOU
MIGHT
EXPECT
IT
TO
BE
LEFT
TO
RIGHT
TOP
TO
BOTTOM
IN
EXAMPLE
TEXTURE
DATA
IS
STORED
IN
A
CONSTANT
ARRAY
DECLARED
IN
C
JUST
BECAUSE
AN
ALLOCATION
APPEARS
TO
SUCCEED
ON
A
PROXY
TEXTURE
TARGET
IT
DOES
NOT
MEAN
THAT
IT
WILL
DEFINITELY
SUCCEED
ON
A
REAL
TARGET
IT
MAY
FAIL
FOR
A
VARIETY
OF
OTHER
REASONS
SUCH
AS
THE
TOTAL
AMOUNT
OF
OTHER
TEXTURES
ALLOCATED
OR
MEMORY
FRAGMENTATION
FOR
EXAMPLE
HOWEVER
IF
IT
FAILS
ON
A
PROXY
TEXTURE
TARGET
IT
WILL
CERTAINLY
FAIL
ON
A
REAL
TEXTURE
TARGET
THERE
ARE
SEVERAL
PARAMETERS
SUPPORTED
BY
OPENGL
THAT
ALLOW
YOU
TO
CHANGE
THE
LAYOUT
OF
IMAGE
DATA
IN
MEMORY
THESE
ARE
DISCUSSED
LATER
IN
THIS
CHAPTER
BUT
THE
DEFAULTS
ARE
SUFFICIENT
FOR
THIS
EXAMPLE
SPECIFYING
TEXTURE
DATA
EXAMPLE
DIRECT
SPECIFICATION
OF
IMAGE
DATA
IN
C
THE
FOLLOWING
IS
AN
CHECKERBOARD
PATTERN
USING
DATA
STATIC
CONST
GLUBYTE
THE
FOLLOWING
DATA
REPRESENTS
A
TEXTURE
WITH
RED
GREEN
BLUE
AND
YELLOW
TEXELS
REPRESENTED
AS
DATA
STATIC
CONST
GLFLOAT
RED
TEXEL
GREEN
TEXEL
BLUE
TEXEL
YELLOW
TEXEL
OF
COURSE
SPECIFYING
TEXTURE
DATA
BY
HAND
DIRECTLY
IN
YOUR
CODE
IS
NOT
THE
MOST
EFFICIENT
WAY
OF
CREATING
TEXTURES
FOR
SIMPLE
CASES
SUCH
AS
SOLID
COLORS
OR
BASIC
CHECKERBOARD
PATTERNS
IT
WILL
SUFFICE
THOUGH
YOU
CAN
LOAD
THE
DATA
INTO
A
TEXTURE
OBJECT
USING
ONE
OF
THE
OR
FUNCTIONS
LISTED
BELOW
CHAPTER
TEXTURES
THE
DATA
SHOWN
IN
EXAMPLE
SHOWS
TWO
SIMPLE
TEXTURES
DIRECTLY
CODED
INTO
CONSTANT
ARRAYS
THE
FIRST
SPECIFIES
A
SIMPLE
REGION
OF
TEXELS
OF
ALTERNATING
FULL
INTENSITY
0XFF
AND
ZERO
INTENSITY
0X00
REPRESENTED
AS
SINGLE
UNSIGNED
BYTES
THE
SECOND
ARRAY
IN
EXAMPLE
SHOWS
COLOR
DATA
THIS
TIME
REPRESENTED
AS
FLOATING
POINT
DATA
WITH
FOUR
CHANNELS
THE
CHANNELS
REPRESENTING
THE
AMOUNT
OF
RED
GREEN
BLUE
AND
IN
EACH
TEXEL
EXAMPLE
SHOWS
HOW
TO
LOAD
THIS
DATA
INTO
TEXTURE
OBJECTS
USING
EXAMPLE
LOADING
STATIC
DATA
INTO
TEXTURE
OBJECTS
FIRST
THE
BLACK
AND
WHITE
CHECKERBOARD
TEXTURE
BIND
THE
TEXTURE
POSSIBLY
CREATING
IT
GLBINDTEXTURE
ALLOCATE
STORAGE
FOR
THE
TEXTURE
DATA
SPECIFY
THE
DATA
FOR
THE
TEXTURE
TARGET
FIRST
MIPMAP
LEVEL
X
AND
Y
OFFSET
WIDTH
AND
HEIGHT
FORMAT
AND
TYPE
DATA
ALPHA
IS
NORMALLY
USED
TO
REPRESENT
OPACITY
BUT
IN
THIS
CASE
WE
HAVE
SET
THE
ALPHA
CHANNEL
TO
ITS
MAXIMUM
VALUE
TO
REPRESENT
FULLY
OPAQUE
TEXELS
SPECIFYING
TEXTURE
DATA
NEXT
THE
COLOR
FLOATING
POINT
DATA
BIND
THE
NEXT
TEXTURE
GLBINDTEXTURE
ALLOCATE
STORAGE
SPECIFY
THE
DATA
TARGET
FIRST
MIPMAP
LEVEL
X
AND
Y
OFFSET
WIDTH
AND
HEIGHT
FORMAT
AND
TYPE
DATA
NOTICE
HOW
IN
EXAMPLE
WE
SPECIFY
AN
INTERNAL
FORMAT
FOR
THE
TEXTURE
THAT
SOMEWHAT
MATCHES
OUR
SUPPLIED
TEXTURE
DATA
FOR
THE
ARRAY
OF
UNSIGNED
BYTES
WE
USED
THE
INTERNAL
FORMAT
WHICH
INDICATES
A
SINGLE
CHANNEL
BIT
FORMAT
FOR
THE
COLOR
DATA
WE
USED
WHICH
IS
A
FOUR
CHANNEL
BIT
FLOATING
POINT
FORMAT
THERE
IS
NO
REQUIREMENT
THAT
WE
USE
AN
INTERNAL
FORMAT
THAT
MATCHES
THE
DATA
WE
LL
SUPPLY
THERE
ARE
WELL
DEFINED
RULES
AS
TO
HOW
OPENGL
CONVERTS
THE
DATA
YOU
SUPPLY
INTO
EACH
INTERNAL
FORMAT
AND
THESE
ARE
EXPLAINED
IN
DETAIL
IN
THE
OPENGL
SPECIFICATION
USING
PIXEL
UNPACK
BUFFERS
THE
DATA
PARAMETER
TO
MAY
BE
INTERPRETED
IN
ONE
OF
TWO
WAYS
THE
FIRST
IS
AS
A
NATURAL
POINTER
TO
DATA
STORED
IN
THE
APPLICATION
MEMORY
THIS
IS
THE
USE
CASE
SHOWN
IN
EXAMPLE
DATA
IS
INTERPRETED
THIS
WAY
IF
NO
BUFFER
OBJECT
IS
BOUND
TO
THE
TARGET
THE
SECOND
INTERPRETATION
OF
DATA
WHICH
IS
USED
WHEN
THERE
IS
A
BUFFER
BOUND
TO
THE
TARGET
IS
AS
AN
OFFSET
INTO
THAT
BUFFER
OBJECT
THIS
ALLOWS
THE
APPLICATION
TO
STAGE
DATA
INTO
A
BUFFER
OBJECT
AND
TRANSFER
IT
FROM
THERE
INTO
A
TEXTURE
OBJECT
AT
A
LATER
TIME
EXAMPLE
LOADING
DATA
INTO
A
TEXTURE
USING
A
BUFFER
OBJECT
FIRST
BIND
A
BUFFER
TO
THE
BINDING
GLBINDBUFFER
BUF
PLACE
OUR
SOURCE
DATA
INTO
THE
BUFFER
GLBUFFERDATA
SIZEOF
BIND
THE
TEXTURE
POSSIBLY
CREATING
IT
GLBINDTEXTURE
ALLOCATE
STORAGE
FOR
THE
TEXTURE
DATA
SPECIFY
THE
DATA
FOR
THE
TEXTURE
CHAPTER
TEXTURES
TARGET
FIRST
MIPMAP
LEVEL
X
AND
Y
OFFSET
WIDTH
AND
HEIGHT
FORMAT
TYPE
NULL
DATA
AN
OFFSET
INTO
BUFFER
IN
EXAMPLE
WE
FIRST
PLACE
OUR
SOURCE
DATA
INTO
A
BUFFER
OBJECT
BOUND
TO
THE
BINDING
POINT
AND
THEN
CALL
AS
WE
DID
BEFORE
HOWEVER
THIS
TIME
DATA
IS
INTERPRETED
AS
AN
OFFSET
INTO
THE
BUFFER
OBJECT
RATHER
THAN
A
RAW
POINTER
BECAUSE
WE
LEFT
THE
BUFFER
BOUND
THIS
CAUSES
OPENGL
TO
TAKE
THE
DATA
FROM
THE
BUFFER
OBJECT
BUT
NOT
NECESSARILY
IMMEDIATELY
THE
PRIMARY
ADVANTAGE
OF
USING
A
BUFFER
OBJECT
TO
STAGE
TEXTURE
DATA
IS
THAT
THE
TRANSFER
FROM
THE
BUFFER
OBJECT
INTO
THE
TEXTURE
NEED
NOT
OCCUR
IMMEDIATELY
SO
LONG
AS
IT
OCCURS
BY
THE
TIME
THE
DATA
IS
REQUIRED
BY
A
SHADER
THIS
ALLOWS
THE
TRANSFER
TO
OCCUR
IN
PARALLEL
WITH
THE
APPLICATION
RUNNING
IF
INSTEAD
THE
DATA
IS
LOCATED
IN
APPLICATION
MEMORY
THEN
THE
SEMANTICS
OF
REQUIRE
THAT
A
COPY
OF
THE
DATA
IS
MADE
BEFORE
THE
FUNCTION
RETURNS
PREVENTING
A
PARALLEL
TRANSFER
THE
ADVANTAGE
OF
THIS
METHOD
IS
THAT
THE
APPLICATION
IS
FREE
TO
MODIFY
THE
DATA
IT
PASSED
TO
THE
FUNCTION
AS
SOON
AS
THE
FUNCTION
RETURNS
COPYING
DATA
FROM
THE
FRAMEBUFFER
IT
IS
POSSIBLE
TO
READ
PART
OF
THE
FRAMEBUFFER
INTO
A
TEXTURE
OBJECT
AND
THEN
USE
IT
IN
SUBSEQUENT
RENDERING
TO
DO
THIS
USE
EITHER
THE
OR
FUNCTIONS
WHOSE
PROTOTYPES
ARE
AS
FOLLOWS
SPECIFYING
TEXTURE
DATA
WHEN
OR
IS
CALLED
IT
IS
ESSENTIALLY
EQUIVALENT
TO
CALLING
GLREADPIXELS
AND
THEN
IMMEDIATELY
CALLING
EITHER
OR
TO
RE
UPLOAD
THE
IMAGE
DATA
INTO
THE
TEXTURE
VOID
GLENUM
TARGET
GLINT
LEVEL
GLINT
XOFFSET
GLINT
X
GLINT
Y
GLSIZEI
WIDTH
VOID
GLENUM
TARGET
GLINT
LEVEL
GLINT
XOFFSET
GLINT
YOFFSET
GLINT
X
GLINT
Y
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
VOID
GLENUM
TARGET
GLINT
LEVEL
GLINT
XOFFSET
GLINT
YOFFSET
GLINT
ZOFFSET
GLINT
X
GLINT
Y
GLSIZEI
WIDTH
GLSIZEI
HEIGHT
USE
IMAGE
DATA
FROM
THE
FRAMEBUFFER
TO
REPLACE
ALL
OR
PART
OF
A
CONTIGUOUS
SUBREGION
OF
THE
CURRENT
EXISTING
TEXTURE
IMAGE
IN
THE
TEXTURE
OBJECT
BOUND
TO
TARGET
OF
THE
ACTIVE
TEXTURE
UNIT
X
AND
Y
SPECIFY
THE
X
AND
Y
OFFSET
OF
THE
REGION
IN
THE
FRAMEBUFFER
TO
COPY
WIDTH
AND
HEIGHT
IF
PRESENT
SPECIFY
THE
WIDTH
AND
HEIGHT
OF
THE
REGION
TO
COPY
RESPECTIVELY
XOFFSET
YOFFSET
AND
ZOFFSET
IF
PRESENT
SPECIFY
THE
ORIGIN
OF
THE
DESTINATION
REGION
IN
THE
TARGET
TEXTURE
IF
TARGET
IS
A
ARRAY
TEXTURE
THEN
YOFFSET
IS
THE
LAYER
OF
THE
TEXTURE
INTO
WHICH
THE
REGION
OF
TEXELS
WILL
BE
WRITTEN
OTHERWISE
IT
IS
THE
Y
COORDINATE
OF
THE
ORIGIN
OF
THE
DESTINATION
REGION
IF
TARGET
IS
A
ARRAY
CUBE
MAP
OR
CUBE
MAP
ARRAY
TEXTURE
THEN
ZOFFSET
IS
THE
INDEX
OF
THE
LAYER
OF
THE
TEXTURE
CONTAINING
THE
DESTINATION
REGION
OTHERWISE
IT
IS
THE
Z
COORDINATE
OF
THE
DESTINATION
REGION
IN
A
TEXTURE
ALTHOUGH
IT
IS
POSSIBLE
TO
READ
FROM
THE
FRAMEBUFFER
INTO
A
TEXTURE
THIS
INVOLVES
MAKING
A
COPY
OF
THE
IMAGE
DATA
AND
MAY
ALSO
INVOLVE
FORMAT
CONVERSIONS
OR
OTHER
WORK
BEING
CONDUCTED
BY
THE
GRAPHICS
HARDWARE
IN
GENERAL
IT
IS
MORE
EFFICIENT
TO
DRAW
DIRECTLY
INTO
THE
TEXTURE
WHEREVER
POSSIBLE
THIS
IS
COVERED
IN
DETAIL
IN
CHAPTER
COLOR
PIXELS
AND
FRAMEBUFFERS
LOADING
IMAGES
FROM
FILES
THE
SIMPLE
EXAMPLE
OF
DIRECTLY
STORING
IMAGE
DATA
IN
ARRAYS
IN
YOUR
C
CODE
OR
FROM
BUFFER
OBJECTS
ISN
T
VERY
PRACTICAL
IF
YOU
HAVE
LARGE
IMAGES
STORED
ON
DISK
IN
MOST
APPLICATIONS
YOU
LL
STORE
YOUR
TEXTURE
DATA
IN
A
CHAPTER
TEXTURES
FORMATTED
IMAGE
FILE
A
JPEG
PNG
GIF
OR
OTHER
TYPE
FOR
IMAGE
FORMAT
OPENGL
WORKS
EITHER
WITH
RAW
PIXELS
OR
WITH
TEXTURES
COMPRESSED
WITH
SPECIFIC
ALGORITHMS
AS
SUCH
YOUR
APPLICATION
WILL
NEED
TO
DECODE
THE
IMAGE
FILE
INTO
MEMORY
THAT
OPENGL
CAN
READ
TO
INITIALIZE
ITS
INTERNAL
TEXTURE
STORE
TO
SIMPLIFY
THAT
PROCESS
FOR
OUR
EXAMPLES
WE
WROTE
A
FUNCTION
VGLLOADIMAGE
WHICH
WILL
READ
AN
IMAGE
FILE
AND
RETURN
THE
TEXELS
IN
MEMORY
ALONG
WITH
OTHER
INFORMATION
YOU
LL
NEED
TO
HELP
OPENGL
TO
DECODE
THE
ITS
PIXEL
DATA
WIDTH
MEASURED
IN
PIXELS
HEIGHT
MEASURED
IN
PIXELS
OPENGL
PIXEL
FORMAT
E
G
FOR
RGB
PIXELS
A
RECOMMENDED
INTERNAL
FORMAT
TO
USE
FOR
THE
TEXTURE
THE
NUMBER
OF
MIPMAP
LEVELS
PRESENT
IN
THE
TEXTURE
DATA
TYPE
FOR
EACH
COMPONENT
IN
A
PIXEL
IMAGE
DATA
ALL
OF
THAT
DATA
IS
STORED
IN
STRUCTURE
OF
TYPE
VGLIMAGEDATA
WHICH
IS
DEFINED
IN
LOADIMAGE
H
THE
DEFINITION
OF
VGLIMAGEDATA
IS
SHOWN
IN
EXAMPLE
BELOW
EXAMPLE
DEFINITION
OF
THE
VGLIMAGEDATA
STRUCTURE
ENOUGH
MIPS
FOR
X
WHICH
IS
THE
MINIMUM
REQUIRED
FOR
OPENGL
X
AND
HIGHER
DEFINE
EACH
TEXTURE
IMAGE
DATA
STRUCTURE
CONTAINS
AN
ARRAY
OF
OF
THESE
MIPMAP
STRUCTURES
THE
STRUCTURE
REPRESENTS
THE
MIPMAP
DATA
FOR
ALL
SLICES
AT
THAT
LEVEL
STRUCT
VGLIMAGEMIPDATA
GLSIZEI
WIDTH
WIDTH
OF
THIS
MIPMAP
LEVEL
GLSIZEI
HEIGHT
HEIGHT
OF
THIS
MIPMAP
LEVEL
GLSIZEI
DEPTH
DEPTH
POF
MIPMAP
LEVEL
GLSIZEIPTR
MIPSTRIDE
DISTANCE
BETWEEN
MIP
LEVELS
IN
MEMORY
GLVOID
DATA
POINTER
TO
DATA
THIS
IS
THE
MAIN
IMAGE
DATA
STRUCTURE
IT
CONTAINS
ALL
THE
PARAMETERS
NEEDED
TO
PLACE
TEXTURE
DATA
INTO
A
TEXTURE
OBJECT
USING
OPENGL
CURRENTLY
DDS
FILES
ARE
SUPPORTED
BY
VGLLOADIMAGE
SPECIFYING
TEXTURE
DATA
STRUCT
VGLIMAGEDATA
GLENUM
TARGET
TEXTURE
TARGET
CUBE
MAP
ETC
GLENUM
INTERNALFORMAT
RECOMMENDED
INTERNAL
FORMAT
GLENUM
FORMAT
FORMAT
IN
MEMORY
GLENUM
TYPE
TYPE
IN
MEMORY
ETC
GLENUM
SWIZZLE
SWIZZLE
FOR
RGBA
GLSIZEI
MIPLEVELS
NUMBER
OF
PRESENT
MIPMAP
LEVELS
GLSIZEI
SLICES
NUMBER
OF
SLICES
FOR
ARRAYS
GLSIZEIPTR
SLICESTRIDE
DISTANCE
BETWEEN
SLICES
OF
AN
ARRAY
TEXTURE
GLSIZEIPTR
TOTALDATASIZE
TOTAL
DATA
ALLOCATED
FOR
TEXTURE
VGLIMAGEMIPDATA
MIP
ACTUAL
MIPMAP
DATA
IN
ORDER
TO
CREATE
INITIALIZE
MANIPULATE
AND
DESTROY
IMAGES
IN
MEMORY
WE
HAVE
DEFINED
TWO
FUNCTIONS
VGLLOADIMAGE
AND
VGLUNLOADIMAGE
EACH
TAKES
A
POINTER
TO
A
VGLIMAGEDATA
STRUCTURE
VGLLOADIMAGE
FILLS
IT
IN
AND
VGLUNLOADIMAGE
RELEASES
ANY
RESOURCES
THAT
WERE
ALLOCATED
BY
A
PREVIOUS
CALL
TO
VGLLOADIMAGE
THE
PROTOTYPES
OF
VGLLOADIMAGE
AND
VGLUNLOADIMAGE
ARE
AS
FOLLOWS
TO
LOAD
AN
IMAGE
FILE
SIMPLY
USE
CODE
SUCH
AS
THAT
SHOWN
IN
EXAMPLE
IN
YOUR
APPLICATION
EXAMPLE
SIMPLE
IMAGE
LOADING
EXAMPLE
VGLIMAGEDATA
IMAGE
VGLLOADIMAGE
FILENAME
IMAGE
USE
IMAGE
DATA
HERE
VGLUNLOADIMAGE
IMAGE
THE
RESULT
OF
CALLING
VGLLOADIMAGE
IS
THAT
THE
TEXTURE
DATA
FROM
THE
SPECIFIED
IMAGE
FILE
IS
LOADED
INTO
MEMORY
AND
INFORMATION
ABOUT
THAT
IMAGE
DATA
IS
STORED
IN
THE
VGLIMAGEDATA
STRUCTURE
GIVEN
TO
THE
FUNCTION
ONCE
THE
IMAGE
DATA
HAS
BEEN
LOADED
FROM
THE
FILE
YOU
MAY
USE
IT
TO
ESTABLISH
THE
TEXELS
FOR
YOUR
TEXTURE
OBJECT
TO
DO
THIS
PASS
THE
DATA
POINTER
CHAPTER
TEXTURES
AND
TEXTURE
DIMENSIONS
TO
THE
APPROPRIATE
TEXTURE
IMAGE
FUNCTION
IF
THE
TEXTURE
IS
ALLOCATED
AS
AN
IMMUTABLE
OBJECT
USING
FOR
EXAMPLE
THEN
THE
IMAGE
DATA
IS
SPECIFIED
USING
A
TEXTURE
SUBIMAGE
COMMAND
SUCH
AS
THE
VGLIMAGEDATA
STRUCTURE
CONTAINS
ALL
OF
THE
PARAMETERS
REQUIRED
TO
INITIALIZE
THE
IMAGE
EXAMPLE
SHOWS
A
SIMPLE
BUT
COMPLETE
EXAMPLE
OF
USING
THE
VGLLOADIMAGE
FUNCTION
TO
LOAD
AN
IMAGE
FROM
DISK
THE
FUNCTION
TO
ALLOCATE
STORAGE
IN
TEXTURE
OBJECT
AND
TO
LOAD
THE
IMAGE
DATA
INTO
THE
TEXTURE
OBJECT
EXAMPLE
LOADING
A
TEXTURE
USING
LOADIMAGE
GLUINT
LOADTEXTURE
CONST
CHAR
FILENAME
GLUINT
TEXTURE
GLBOOLEAN
GENERATEMIPS
VGLIMAGEDATA
IMAGE
INT
LEVEL
VGLLOADIMAGE
FILENAME
IMAGE
IF
TEXTURE
GLGENTEXTURES
TEXTURE
GLBINDTEXTURE
IMAGE
TARGET
TEXTURE
SWITCH
IMAGE
TARGET
CASE
IMAGE
TARGET
IMAGE
MIPLEVELS
IMAGE
INTERNALFORMAT
IMAGE
MIP
WIDTH
IMAGE
MIP
HEIGHT
HANDLE
OTHER
TEXTURE
TARGETS
HERE
DEFAULT
BREAK
ASSUME
THIS
IS
A
TEXTURE
FOR
LEVEL
LEVEL
IMAGE
MIPLEVELS
LEVEL
LEVEL
IMAGE
MIP
LEVEL
WIDTH
IMAGE
MIP
LEVEL
HEIGHT
IMAGE
FORMAT
IMAGE
TYPE
IMAGE
MIP
LEVEL
DATA
SPECIFYING
TEXTURE
DATA
UNLOAD
THE
IMAGE
HERE
AS
HAS
CONSUMED
THE
DATA
AND
WE
DON
T
NEED
IT
ANY
MORE
VGLUNLOADIMAGE
IMAGE
RETURN
TEXTURE
AS
YOU
CAN
SEE
THIS
CODE
COULD
BECOME
QUITE
COMPLEX
DEPENDING
ON
HOW
GENERIC
YOUR
TEXTURE
LOADING
FUNCTION
MIGHT
BE
AND
HOW
MANY
TYPES
OF
TEXTURE
YOU
MIGHT
WANT
TO
LOAD
TO
MAKE
THINGS
EASIER
FOR
YOU
WE
HAVE
INCLUDED
THE
FUNCTION
VGLLOADTEXTURE
WHICH
INTERNALLY
USES
VGLLOADIMAGE
TO
LOAD
AN
IMAGE
FILE
AND
THEN
PLACE
ITS
CONTENTS
INTO
A
TEXTURE
OBJECT
FOR
YOU
THE
LISTING
SHOWS
A
SIMPLIFIED
VERSION
OF
THE
VGLLOADTEXTURE
FUNCTION
WHICH
WILL
TAKE
AN
IMAGE
FILE
AND
LOAD
IT
INTO
A
TEXTURE
OBJECT
FOR
YOU
IT
WILL
HANDLE
ANY
DIMENSIONAL
IMAGE
ARRAY
TEXTURES
CUBE
MAPS
COMPRESSED
TEXTURES
AND
ANYTHING
ELSE
THAT
SUPPORTED
BY
THE
VGLLOADIMAGE
FUNCTION
THE
COMPLETE
IMPLEMENTATION
OF
VGLLOADTEXTURE
IS
INCLUDED
IN
THIS
BOOK
ACCOMPANYING
SOURCE
CODE
NOTE
IT
NOT
POSSIBLE
TO
DIRECTLY
SPECIFY
THE
IMAGE
DATA
FOR
A
MULTISAMPLED
TEXTURE
THE
ONLY
WAY
TO
PLACE
DATA
INTO
A
MULTISAMPLED
TEXTURE
IS
TO
ATTACH
IT
TO
A
FRAMEBUFFER
OBJECT
AND
RENDER
INTO
IT
FRAMEBUFFERS
AND
MULTISAMPLING
IS
EXPLAINED
IN
SOME
DETAIL
IN
CHAPTER
COLOR
PIXELS
AND
FRAMEBUFFERS
CHAPTER
TEXTURES
RETRIEVING
TEXTURE
DATA
ONCE
YOU
HAVE
A
TEXTURE
CONTAINING
DATA
IT
IS
POSSIBLE
TO
READ
THAT
DATA
EITHER
BACK
INTO
YOUR
APPLICATION
MEMORY
OR
BACK
INTO
A
BUFFER
OBJECT
THE
FUNCTION
FOR
READING
IMAGE
DATA
FROM
A
TEXTURE
IS
GLGETTEXIMAGE
WHOSE
PROTOTYPE
IS
AS
FOLLOWS
GREAT
CARE
SHOULD
BE
EXERCISED
WHEN
USING
THIS
FUNCTION
THE
NUMBER
OF
BYTES
WRITTEN
INTO
IMAGE
IS
DETERMINED
BY
THE
DIMENSIONS
OF
THE
TEXTURE
CURRENTLY
BOUND
TO
TARGET
AND
BY
FORMAT
AND
TYPE
POTENTIALLY
A
GREAT
DEAL
OF
DATA
COULD
BE
RETURNED
AND
NO
BOUND
CHECKS
ARE
PERFORMED
BY
OPENGL
ON
THE
MEMORY
AREA
YOU
SUPPLY
THEREFORE
INCORRECT
USAGE
OF
THIS
FUNCTION
COULD
LEAD
TO
BUFFER
OVERRUNS
AND
BAD
THINGS
HAPPENING
FURTHERMORE
READING
PIXEL
DATA
BACK
FROM
TEXTURES
IS
GENERALLY
NOT
A
HIGH
PERFORMANCE
OPERATION
DOING
SO
SHOULD
BE
A
SPARINGLY
INVOKED
OPERATION
AND
SHOULD
CERTAINLY
NOT
BE
IN
A
PERFORMANCE
CRITICAL
PATH
OF
YOUR
APPLICATION
IF
YOU
MUST
READ
DATA
BACK
FROM
TEXTURES
WE
STRONGLY
RECOMMEND
THAT
YOU
BIND
A
BUFFER
TO
THE
BUFFER
TARGET
READ
THE
TEXELS
INTO
THAT
AND
SUBSEQUENTLY
MAP
THE
BUFFER
IN
ORDER
TO
TRANSFER
THE
PIXEL
DATA
INTO
YOUR
APPLICATION
SPECIFYING
TEXTURE
DATA
TEXTURE
DATA
LAYOUT
SO
FAR
OUR
DESCRIPTIONS
OF
THE
TEXTURE
IMAGE
SPECIFICATION
COMMANDS
HAVE
NOT
ADDRESSED
THE
PHYSICAL
LAYOUT
OF
IMAGE
DATA
IN
MEMORY
IN
MANY
CASES
IMAGE
DATA
IS
LAID
OUT
LEFT
TO
RIGHT
TOP
TO
IN
MEMORY
WITH
TEXELS
CLOSELY
FOLLOWING
EACH
OTHER
HOWEVER
THIS
IS
NOT
ALWAYS
THE
CASE
AND
SO
OPENGL
PROVIDES
SEVERAL
CONTROLS
THAT
ALLOW
YOU
TO
DESCRIBE
HOW
THE
DATA
IS
LAID
OUT
IN
YOUR
APPLICATION
THESE
PARAMETERS
ARE
SET
USING
THE
GLPIXELSTOREI
AND
GLPIXELSTOREF
COMMANDS
WHOSE
PROTOTYPES
ARE
AS
FOLLOWS
THE
UNPACK
PARAMETERS
SET
BY
GLPIXELSTOREI
AND
GLPIXELSTOREF
THOSE
BEGINNING
WITH
SPECIFY
HOW
OPENGL
WILL
READ
DATA
FROM
CLIENT
MEMORY
OR
THE
BUFFER
BOUND
TO
THE
BINDING
IN
FUNCTIONS
SUCH
AS
THE
PACKING
PARAMETERS
SPECIFY
HOW
OPENGL
WILL
WRITE
TEXTURE
DATA
INTO
MEMORY
DURING
FUNCTIONS
SUCH
AS
GLGETTEXIMAGE
SINCE
THE
CORRESPONDING
PARAMETERS
FOR
PACKING
AND
UNPACKING
HAVE
THE
SAME
MEANINGS
THEY
RE
DISCUSSED
TOGETHER
IN
THE
REST
OF
THIS
SECTION
AND
REFERRED
TO
WITHOUT
THE
OR
PREFIX
FOR
EXAMPLE
REFERS
TO
AND
IF
THE
PARAMETER
IS
THE
DEFAULT
THE
ORDERING
OF
THE
BYTES
IN
MEMORY
IS
WHATEVER
IS
NATIVE
FOR
THE
OPENGL
CLIENT
OTHERWISE
THE
BYTES
ARE
REVERSED
THE
BYTE
REVERSAL
IT
IMPORTANT
TO
UNDERSTAND
THAT
TEXTURES
DON
T
REALLY
HAVE
A
TOP
AND
A
BOTTOM
BUT
RATHER
THEY
HAVE
AN
ORIGIN
AND
A
DIRECTION
OF
INCREASING
OF
TEXTURE
COORDINATES
WHAT
APPEARS
TO
BE
RENDERED
AT
THE
TOP
OF
A
FRAME
IN
WINDOW
COORDINATES
DEPENDS
ENTIRELY
ON
THE
TEXTURE
COORDINATES
USED
CHAPTER
TEXTURES
APPLIES
TO
ANY
SIZE
ELEMENT
BUT
HAS
A
MEANINGFUL
EFFECT
ONLY
FOR
MULTIBYTE
ELEMENTS
THE
EFFECT
OF
BYTE
SWAPPING
MAY
DIFFER
AMONG
OPENGL
IMPLEMENTATIONS
IF
ON
AN
IMPLEMENTATION
GLUBYTE
HAS
BITS
GLUSHORT
HAS
BITS
AND
GLUINT
HAS
BITS
THEN
FIGURE
ILLUSTRATES
HOW
BYTES
ARE
SWAPPED
FOR
DIFFERENT
DATA
TYPES
NOTE
THAT
BYTE
SWAPPING
HAS
NO
EFFECT
ON
SINGLE
BYTE
DATA
NOTE
AS
LONG
AS
YOUR
OPENGL
APPLICATION
DOESN
T
SHARE
IMAGES
WITH
OTHER
MACHINES
YOU
CAN
IGNORE
THE
ISSUE
OF
BYTE
ORDERING
IF
YOUR
APPLICATION
MUST
RENDER
AN
OPENGL
IMAGE
THAT
WAS
CREATED
ON
A
DIFFERENT
MACHINE
AND
THE
TWO
MACHINES
HAVE
DIFFERENT
BYTE
ORDERS
BYTE
ORDERING
CAN
BE
SWAPPED
USING
HOWEVER
DOES
NOT
ALLOW
YOU
TO
REORDER
ELEMENTS
E
G
TO
SWAP
RED
AND
GREEN
BYTE
BYTE
SHORT
BYTE
SHORT
BYTE
SHORT
BYTE
SHORT
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
INTEGER
BYTE
FIGURE
BYTE
SWAP
EFFECT
ON
BYTE
SHORT
AND
INTEGER
DATA
THE
PARAMETER
APPLIES
ONLY
WHEN
DRAWING
OR
READING
BIT
IMAGES
OR
BITMAPS
FOR
WHICH
A
SINGLE
BIT
OF
DATA
IS
SAVED
OR
RESTORED
FOR
EACH
PIXEL
IF
IS
THE
DEFAULT
THE
BITS
ARE
TAKEN
FROM
THE
BYTES
STARTING
WITH
THE
MOST
SIGNIFICANT
BIT
OTHERWISE
THEY
RE
TAKEN
IN
THE
OPPOSITE
ORDER
FOR
EXAMPLE
IF
IS
AND
THE
BYTE
IN
QUESTION
IS
THE
BITS
IN
ORDER
ARE
IF
IS
THE
ORDER
IS
SOMETIMES
YOU
WANT
TO
DRAW
OR
READ
ONLY
A
SUBRECTANGLE
OF
THE
ENTIRE
RECTANGLE
OF
IMAGE
DATA
STORED
IN
MEMORY
IF
THE
RECTANGLE
IN
MEMORY
IS
LARGER
THAN
THE
SUBRECTANGLE
THAT
BEING
DRAWN
OR
READ
YOU
NEED
TO
SPECIFY
THE
ACTUAL
LENGTH
MEASURED
IN
PIXELS
OF
THE
LARGER
RECTANGLE
WITH
IF
IS
ZERO
WHICH
IT
IS
BY
DEFAULT
THE
ROW
LENGTH
IS
UNDERSTOOD
TO
BE
THE
SAME
AS
THE
WIDTH
THAT
IMPLIED
BY
THE
SPECIFYING
TEXTURE
DATA
PARAMETERS
TO
FOR
EXAMPLE
YOU
ALSO
NEED
TO
SPECIFY
THE
NUMBER
OF
ROWS
AND
PIXELS
TO
SKIP
BEFORE
STARTING
TO
COPY
THE
DATA
FOR
THE
SUBRECTANGLE
THESE
NUMBERS
ARE
SET
USING
THE
PARAMETERS
AND
AS
SHOWN
IN
FIGURE
BY
DEFAULT
BOTH
PARAMETERS
ARE
SO
YOU
START
AT
THE
LOWER
LEFT
CORNER
SUBIMAGE
IMAGE
FIGURE
SUBIMAGE
A
SUBIMAGE
IDENTIFIED
BY
AND
PARAMETERS
OFTEN
A
PARTICULAR
MACHINE
HARDWARE
IS
OPTIMIZED
FOR
A
PARTICULAR
BYTE
ALIGNMENT
WHEN
MOVING
PIXEL
DATA
TO
AND
FROM
MEMORY
FOR
EXAMPLE
IN
A
MACHINE
WITH
BIT
WORDS
HARDWARE
CAN
OFTEN
RETRIEVE
DATA
MUCH
FASTER
IF
IT
INITIALLY
ALIGNED
ON
A
BIT
BOUNDARY
WHICH
TYPICALLY
HAS
AN
ADDRESS
THAT
IS
A
MULTIPLE
OF
LIKEWISE
BIT
ARCHITECTURES
MIGHT
WORK
BETTER
WHEN
THE
DATA
IS
ALIGNED
TO
BYTE
BOUNDARIES
ON
SOME
MACHINES
HOWEVER
BYTE
ALIGNMENT
MAKES
NO
DIFFERENCE
AS
AN
EXAMPLE
SUPPOSE
YOUR
MACHINE
WORKS
BETTER
WITH
PIXEL
DATA
ALIGNED
TO
A
BYTE
BOUNDARY
IMAGES
ARE
MOST
EFFICIENTLY
SAVED
BY
FORCING
THE
DATA
FOR
EACH
ROW
OF
THE
IMAGE
TO
BEGIN
ON
A
BYTE
BOUNDARY
IF
THE
IMAGE
IS
PIXELS
WIDE
AND
EACH
PIXEL
CONSISTS
OF
BYTE
EACH
OF
RED
GREEN
AND
BLUE
INFORMATION
A
ROW
REQUIRES
BYTES
OF
DATA
MAXIMUM
DISPLAY
EFFICIENCY
CAN
BE
ACHIEVED
IF
THE
FIRST
ROW
AND
EACH
SUCCESSIVE
ROW
BEGINS
ON
A
BYTE
BOUNDARY
SO
THERE
IS
BYTE
OF
WASTE
IN
THE
MEMORY
STORAGE
FOR
EACH
ROW
IF
YOUR
DATA
IS
STORED
IN
THIS
WAY
SET
THE
ALIGNMENT
PARAMETER
APPROPRIATELY
TO
IN
THIS
CASE
CHAPTER
TEXTURES
IF
ALIGNMENT
IS
SET
TO
THE
NEXT
AVAILABLE
BYTE
IS
USED
IF
IT
A
BYTE
IS
SKIPPED
IF
NECESSARY
AT
THE
END
OF
EACH
ROW
SO
THAT
THE
FIRST
BYTE
OF
THE
NEXT
ROW
HAS
AN
ADDRESS
THAT
A
MULTIPLE
OF
IN
THE
CASE
OF
BITMAPS
OR
BIT
IMAGES
WHERE
A
SINGLE
BIT
IS
SAVED
FOR
EACH
PIXEL
THE
SAME
BYTE
ALIGNMENT
WORKS
ALTHOUGH
YOU
HAVE
TO
COUNT
INDIVIDUAL
BITS
FOR
EXAMPLE
IF
YOU
RE
SAVING
A
SINGLE
BIT
PER
PIXEL
IF
THE
ROW
LENGTH
IS
AND
IF
THE
ALIGNMENT
IS
THEN
EACH
ROW
REQUIRES
OR
BYTES
SINCE
IS
THE
SMALLEST
MULTIPLE
OF
THAT
IS
BIGGER
THAN
BYTES
OF
MEMORY
ARE
USED
FOR
EACH
ROW
IF
THE
ALIGNMENT
IS
THEN
BYTES
ARE
USED
FOR
EACH
ROW
AS
IS
ROUNDED
UP
TO
THE
NEXT
BYTE
NOTE
THE
DEFAULT
VALUE
FOR
ALIGNMENT
IS
A
COMMON
PROGRAMMING
MISTAKE
IS
TO
ASSUME
THAT
IMAGE
DATA
IS
TIGHTLY
PACKED
AND
BYTE
ALIGNED
WHICH
ASSUMES
THAT
ALIGNMENT
IS
SET
TO
THE
PARAMETERS
AND
AFFECT
ONLY
THE
DEFINING
AND
QUERYING
OF
THREE
DIMENSIONAL
TEXTURES
AND
TWO
DIMENSIONAL
TEXTURE
ARRAYS
THESE
PIXEL
STORAGE
PARAMETERS
ALLOW
THE
ROUTINES
AND
GLGETTEXIMAGE
TO
DELIMIT
AND
ACCESS
ANY
DESIRED
SUBVOLUME
OR
SUBSET
OF
SLICES
OF
AN
ARRAY
TEXTURE
IF
THE
THREE
DIMENSIONAL
TEXTURE
IN
MEMORY
IS
LARGER
THAN
THE
SUBVOLUME
THAT
IS
DEFINED
YOU
NEED
TO
SPECIFY
THE
HEIGHT
OF
A
SINGLE
SUBIMAGE
WITH
THE
PARAMETER
ALSO
IF
THE
SUBVOLUME
DOES
NOT
START
WITH
THE
VERY
FIRST
LAYER
THE
PARAMETER
NEEDS
TO
BE
SET
IS
A
PIXEL
STORAGE
PARAMETER
THAT
DEFINES
THE
HEIGHT
NUMBER
OF
ROWS
OF
A
SINGLE
LAYER
OF
A
THREE
DIMENSIONAL
TEXTURE
IMAGE
AS
SHOWN
IN
FIGURE
IF
THE
VALUE
IS
ZERO
A
NEGATIVE
NUMBER
IS
INVALID
THEN
THE
NUMBER
OF
ROWS
IN
EACH
TWO
DIMENSIONAL
RECTANGLE
IS
THE
VALUE
OF
HEIGHT
WHICH
IS
THE
PARAMETER
PASSED
TO
OR
THIS
IS
COMMONPLACE
BECAUSE
IS
ZERO
BY
DEFAULT
OTHERWISE
THE
HEIGHT
OF
A
SINGLE
LAYER
IS
THE
VALUE
FIGURE
PIXEL
STORAGE
MODE
SPECIFYING
TEXTURE
DATA
DEFINES
HOW
MANY
LAYERS
TO
BYPASS
BEFORE
ACCESSING
THE
FIRST
DATA
OF
THE
SUBVOLUME
IF
THE
VALUE
IS
A
POSITIVE
INTEGER
CALL
THE
VALUE
N
THEN
THE
POINTER
IN
THE
TEXTURE
IMAGE
DATA
IS
ADVANCED
THAT
MANY
LAYERS
N
THE
SIZE
OF
ONE
LAYER
OF
TEXELS
THE
RESULTING
SUBVOLUME
STARTS
AT
LAYER
N
AND
IS
SEVERAL
LAYERS
DEEP
HOW
MANY
LAYERS
DEEP
IS
DETERMINED
BY
THE
DEPTH
PARAMETER
PASSED
TO
OR
IF
THE
VALUE
IS
ZERO
THE
DEFAULT
THEN
ACCESSING
THE
TEXEL
DATA
BEGINS
WITH
THE
VERY
FIRST
LAYER
DESCRIBED
IN
THE
TEXEL
ARRAY
FIGURE
SHOWS
HOW
THE
PARAMETER
CAN
BYPASS
SEVERAL
LAYERS
TO
GET
TO
WHERE
THE
SUBVOLUME
IS
ACTUALLY
LOCATED
IN
THIS
EXAMPLE
IS
AND
THE
SUBVOLUME
BEGINS
AT
LAYER
FIGURE
PIXEL
STORAGE
MODE
SAMPLER
OBJECTS
TEXTURES
MAY
BE
READ
BY
A
SHADER
BY
ASSOCIATING
A
SAMPLER
VARIABLE
WITH
A
TEXTURE
UNIT
AND
USING
GLSL
BUILT
IN
FUNCTIONS
TO
FETCH
TEXELS
FROM
THE
TEXTURE
IMAGE
THE
WAY
IN
WHICH
THE
TEXELS
ARE
FETCHED
DEPENDS
ON
A
NUMBER
OF
PARAMETERS
THAT
ARE
CONTAINED
IN
ANOTHER
OBJECT
CALLED
A
SAMPLER
OBJECT
SAMPLER
OBJECTS
ARE
BOUND
TO
SAMPLER
UNITS
MUCH
AS
TEXTURE
OBJECTS
ARE
BOUND
TO
TEXTURE
UNITS
FOR
CONVENIENCE
A
TEXTURE
OBJECT
MAY
BE
CONSIDERED
TO
CONTAIN
A
BUILT
IN
SAMPLER
OBJECT
OF
ITS
OWN
THAT
WILL
BE
USED
BY
DEFAULT
TO
READ
FROM
IT
IF
NO
SAMPLER
OBJECT
IS
BOUND
TO
THE
CORRESPONDING
SAMPLER
UNIT
TO
CREATE
A
SAMPLER
OBJECT
AS
WITH
MOST
OTHER
OBJECT
TYPES
IN
OPENGL
WE
RESERVE
A
NAME
FOR
THE
NEW
OBJECT
AND
BIND
IT
TO
A
BINDING
POINT
IN
THIS
CASE
ONE
OF
THE
BINDING
POINTS
THE
PROTOTYPE
OF
GLGENSAMPLERS
IS
AS
FOLLOWS
CHAPTER
TEXTURES
GLGENSAMPLERS
WILL
RETURN
A
SET
OF
UNUSED
SAMPLER
OBJECT
NAMES
ONCE
THE
NAMES
HAVE
BEEN
GENERATED
THEY
ARE
RESERVED
FOR
USE
AS
SAMPLER
OBJECTS
AND
MAY
BE
BOUND
TO
THE
SAMPLER
BINDING
POINTS
USING
THE
GLBINDSAMPLER
FUNCTION
WHOSE
PROTOTYPE
IS
SHOWN
BELOW
UNTIL
A
NAME
HAS
BEEN
BOUND
TO
A
SAMPLER
UNIT
IT
IS
NOT
YET
CONSIDERED
A
SAMPLER
OBJECT
TO
DETERMINE
IF
A
GIVEN
VALUE
IS
THE
NAME
OF
AN
EXISTING
SAMPLER
OBJECT
YOU
CAN
CALL
GLISSAMPLER
WHOSE
PROTOTYPE
IS
AS
FOLLOWS
NOTICE
THAT
THERE
ARE
A
COUPLE
OF
SUBTLE
BETWEEN
THE
GLBINDSAMPLER
FUNCTION
AND
THE
GLBINDTEXTURE
FUNCTION
FIRST
THERE
IS
NO
TARGET
PARAMETER
FOR
SAMPLERS
THIS
IS
BECAUSE
THE
TARGET
IS
IMPLIED
BY
THESE
DIFFERENCES
MAY
SEEM
TO
INTRODUCE
INCONSISTENCY
INTO
THE
OPENGL
API
THAT
IS
A
FAIR
OBSERVATION
HOWEVER
IT
IS
A
BYPRODUCT
OF
THE
WAY
THAT
OPENGL
EVOLVES
THE
API
TAKES
SMALL
INCREMENTAL
STEPS
EACH
STRIKING
A
BALANCE
AMONG
INTRODUCTION
OF
NEW
FUNCTIONALITY
ENABLE
MENT
OF
INNOVATION
AND
MAINTENANCE
OF
BACKWARDS
COMPATIBILITY
IT
HAS
BEEN
RECOGNIZED
THAT
MODERN
OPENGL
IMPLEMENTATIONS
CAN
SUPPORT
A
HUGE
NUMBER
OF
TEXTURES
AND
SAMPLERS
AND
RESERVING
TOKENS
FROM
THROUGH
IS
SIMPLY
NOT
PRACTICAL
AND
IS
NOT
FORWARD
LOOKING
THUS
THE
DECISION
TO
SACRIFICE
SOME
CONSISTENCY
IN
ORDER
TO
ACHIEVE
SOME
FORWARD
COMPATIBILITY
WAS
MADE
SAMPLER
OBJECTS
THE
FUNCTION
AS
SAMPLER
OBJECTS
HAVE
NO
INHERENT
DIMENSIONALITY
THERE
IS
NO
REASON
TO
DISTINGUISH
AMONG
MULTIPLE
SAMPLER
OBJECT
TYPES
SECONDLY
THE
UNIT
PARAMETER
IS
PRESENT
HERE
AND
THERE
IS
NO
SELECTOR
FOR
SAMPLER
OBJECTS
THAT
IS
THERE
IS
NO
GLACTIVESAMPLER
FUNCTION
FURTHERMORE
IN
CONTRAST
TO
THE
PARAMETER
TO
GLACTIVETEXTURE
WHICH
IS
A
TOKEN
BETWEEN
AND
WHERE
I
IS
AN
ARBITRARILY
LARGE
IMPLEMENTATION
DEFINED
MAXIMUM
UNIT
IS
A
ZERO
BASED
UNSIGNED
INTEGER
ALLOWING
ANY
NUMBER
OF
SAMPLER
UNITS
TO
BE
SUPPORTED
BY
AN
OPENGL
IMPLEMENTATION
WITHOUT
RESERVING
A
LARGE
NUMBER
OF
OPENGL
TOKENS
SAMPLER
PARAMETERS
EACH
SAMPLER
OBJECT
REPRESENTS
A
NUMBER
OF
PARAMETER
THAT
CONTROLS
THE
WAY
TEXELS
WILL
ULTIMATELY
BE
READ
FROM
A
TEXTURE
OBJECT
THE
PARAMETERS
OF
THE
SAMPLER
OBJECT
ARE
SET
USING
THE
GLSAMPLERPARAMETERI
AND
GLSAMPLERPARAMETERF
FUNCTIONS
FOR
INTEGER
AND
FLOATING
POINT
PARAMETERS
AND
GLSAMPLERPARAMETERIV
AND
GLSAMPLERPARAMETERFV
FUNCTIONS
FOR
VECTORS
OF
INTEGER
AND
FLOATING
POINT
PARAMETERS
THEIR
PROTOTYPES
ARE
GIVEN
BELOW
THE
GLSAMPLERPARAMETERI
AND
SIMILAR
FUNCTIONS
SET
THE
PARAMETERS
OF
A
SAMPLER
OBJECT
DIRECTLY
THE
SAMPLER
ARGUMENT
OF
THE
FUNCTIONS
IS
THE
NAME
OF
THE
SAMPLER
OBJECT
THAT
IS
BEING
MODIFIED
HOWEVER
AS
NOTED
THERE
IS
A
DEFAULT
SAMPLER
OBJECT
CONTAINED
IN
EACH
TEXTURE
OBJECT
THAT
WILL
BE
USED
TO
READ
FROM
THE
TEXTURE
WHEN
NO
SAMPLER
OBJECT
IS
BOUND
TO
THE
CORRESPONDING
SAMPLER
UNIT
TO
MODIFY
THE
PARAMETERS
OF
THIS
OBJECT
SIMILAR
GLTEXPARAMETER
FUNCTIONS
ARE
PROVIDED
CHAPTER
TEXTURES
FOR
BOTH
THE
GLSAMPLERPARAMETER
AND
GLTEXPARAMETER
FUNCTIONS
THERE
ARE
A
MULTITUDE
OF
VALUES
THAT
MAY
BE
USED
FOR
THE
PNAME
PARAMETERS
EACH
CONTROLS
A
DIFFERENT
ASPECT
OF
SAMPLING
AND
FOR
THE
GLTEXPARAMETER
FUNCTIONS
THERE
ARE
SOME
VALUES
FOR
PNAME
THAT
ARE
NOT
RELATED
TO
SAMPLING
AT
ALL
RATHER
THAN
INTRODUCE
EACH
AND
EVERY
LEGAL
VALUE
FOR
PNAME
HERE
WE
INTRODUCE
EACH
IN
THE
FOLLOWING
SUBSECTIONS
AS
THE
TOPICS
TO
WHICH
THEY
PERTAIN
ARE
COVERED
ONCE
YOU
ARE
DONE
USING
A
SAMPLER
OBJECT
AS
WITH
ANY
OTHER
TYPE
OF
OBJECT
IN
OPENGL
IT
IS
GOOD
PRACTICE
TO
CLEAN
UP
AFTER
YOURSELF
AND
DELETE
ANY
UNUSED
OBJECTS
TO
DELETE
SAMPLER
OBJECTS
USE
THE
GLDELETESAMPLERS
FUNCTION
USING
TEXTURES
ONCE
YOU
HAVE
CREATED
AND
INITIALIZED
A
TEXTURE
OBJECT
AND
HAVE
PLACED
IMAGE
DATA
INTO
IT
YOU
MAY
READ
FROM
IT
USING
SHADERS
IN
YOUR
APPLICATION
AS
ALREADY
NOTED
TEXTURES
IN
SHADERS
ARE
REPRESENTED
AS
SAMPLER
VARIABLES
OF
DIMENSIONED
SAMPLER
TYPES
EACH
SAMPLER
VARIABLE
IS
A
COMBINATION
OF
A
SET
OF
IMAGE
DATA
REPRESENTED
BY
THE
TEXTURE
OBJECT
AND
A
SET
OF
SAMPLING
USING
TEXTURES
PARAMETERS
THAT
ARE
REPRESENTED
BY
A
SAMPLER
OBJECT
OR
THE
TEXTURE
OWN
INTERNAL
SAMPLER
OBJECT
A
TEXTURE
IS
BOUND
TO
A
TEXTURE
UNIT
AND
A
SAMPLER
OBJECT
IS
BOUND
TO
THE
CORRESPONDING
SAMPLER
UNIT
AND
TOGETHER
THEY
ARE
USED
TO
READ
DATA
FROM
THE
TEXTURE
IMAGES
THIS
PROCESS
IS
CALLED
SAMPLING
AND
IS
PERFORMED
USING
THE
TEXTURE
BUILT
IN
FUNCTION
IN
GLSL
OR
ONE
OF
ITS
MANY
VARIANTS
THE
USUAL
WAY
TO
READ
DATA
FROM
A
TEXTURE
IN
GLSL
IS
TO
USE
ONE
OF
THE
BUILT
IN
FUNCTIONS
GLSL
SUPPORTS
FUNCTION
OVERLOADING
WHICH
IS
A
TERM
THAT
SHOULD
BE
FAMILIAR
TO
C
PROGRAMMERS
AMONG
OTHERS
FUNCTION
OVER
LOADING
IS
THE
PROCESS
WHERE
A
SINGLE
FUNCTION
NAME
CAN
REPRESENT
SEVERAL
DIFFERENT
FUNCTIONS
WITH
DIFFERENT
PARAMETER
TYPES
AT
COMPILE
TIME
THE
COMPILER
CAN
DETERMINE
WHICH
VERSION
OF
THE
FUNCTION
SHOULD
BE
CALLED
BASED
ON
THE
TYPES
OF
THE
PARAMETER
USED
TO
CALL
IT
THE
BASIC
OVERLOADED
VARIANTS
OF
THE
TEXTURE
LOOKUP
FUNCTIONS
ARE
GIVEN
BELOW
ALL
TEXTURE
FUNCTIONS
ARE
LISTED
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
NOTE
A
NOTE
ON
TERMINOLOGY
IN
MANY
OF
THE
GLSL
FUNCTION
PROTOTYPES
YOU
WILL
SEE
THE
TERM
OR
OTHER
DIMENSIONAL
VECTORS
THIS
IS
A
PLACEHOLDER
TYPE
THAT
MEANS
A
VECTOR
OF
ANY
TYPE
IT
COULD
STAND
FOR
OR
LIKEWISE
FOR
EXAMPLE
IS
A
PLACEHOLDER
THAT
MAY
STAND
FOR
OR
ALSO
IF
YOU
SEE
A
PARAMETER
SURROUNDED
IN
SQUARE
BRACKETS
I
E
AND
THAT
MEANS
THAT
THE
PARAMETER
IS
OPTIONAL
AND
MAY
BE
OMITTED
IF
DESIRED
THE
TEXTURE
FUNCTIONS
IN
GLSL
EACH
TAKE
A
SAMPLER
VARIABLE
AND
A
SET
OF
TEXTURE
COORDINATES
THE
RETURN
VALUE
FROM
THE
FUNCTIONS
IS
THE
RESULT
OF
SAMPLING
FROM
THE
TEXTURE
REPRESENTED
BY
THE
SAMPLER
CHAPTER
TEXTURES
THE
SAMPLER
ARGUMENT
PASSED
INTO
THE
TEXTURE
FUNCTION
CAN
BE
AN
ELEMENT
OF
A
SAMPLER
ARRAY
OR
A
PARAMETER
IN
A
FUNCTION
IN
ALL
CASES
THE
ARGUMENT
MUST
BE
DYNAMICALLY
UNIFORM
THAT
IS
THE
ARGUMENT
MUST
BE
THE
RESULT
OF
AN
EXPRESSION
INVOLVING
UNIFORMS
CONSTANTS
OR
VARIABLES
OTHERWISE
KNOWN
TO
HAVE
THE
SAME
VALUE
FOR
ALL
THE
INSTANCES
OF
THE
SHADER
SUCH
AS
LOOP
COUNTERS
AN
EXAMPLE
OF
USING
A
TEXTURE
FUNCTION
TO
READ
TEXELS
FROM
A
TEXTURE
IS
GIVEN
IN
EXAMPLE
EXAMPLE
SIMPLE
TEXTURE
LOOKUP
EXAMPLE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
TEX
IN
LAYOUT
LOCATION
OUT
COLOR
VOID
MAIN
VOID
COLOR
TEXTURE
TEX
IN
EXAMPLE
A
FRAGMENT
SHADER
THAT
READS
FROM
A
TEXTURE
IS
GIVEN
TEXTURES
MAY
BE
USED
FROM
ANY
SHADER
STAGE
BUT
THE
EFFECTS
OF
TEXTURING
ARE
EASIEST
TO
DEMONSTRATE
IN
A
FRAGMENT
SHADER
AT
THE
TOP
OF
THE
SHADER
A
UNIFORM
SAMPLER
TEX
IS
DECLARED
THE
SINGLE
INPUT
TO
THE
FRAGMENT
SHADER
IS
THE
TEXTURE
COORDINATE
WHICH
IS
DECLARED
AS
A
AND
THE
OUTPUT
FROM
THE
FRAGMENT
SHADER
IS
A
SINGLE
COLOR
OUTPUT
COLOR
THE
CORRESPONDING
VERTEX
SHADER
IS
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
TEXTURE
LOOKUP
EXAMPLE
VERTEX
SHADER
VERSION
CORE
LAYOUT
LOCATION
IN
LAYOUT
LOCATION
IN
OUT
VOID
MAIN
VOID
USING
TEXTURES
IN
EXAMPLE
THE
TWO
INPUTS
ARE
THE
VERTEX
POSITION
AND
THE
INPUT
TEXTURE
COORDINATE
WHICH
IS
PASSED
DIRECTLY
TO
THE
SHADER
OUTPUTS
IN
THIS
CASE
THESE
ARE
THE
BUILT
IN
OUTPUT
AND
THE
USER
DEFINED
OUTPUT
THAT
WILL
BE
PASSED
TO
THE
SIMILARLY
NAMED
INPUT
IN
THE
FRAGMENT
SHADER
GIVEN
IN
EXAMPLE
TEXTURE
COORDINATES
TEXTURE
COORDINATES
ARE
THE
COORDINATES
WITHIN
THE
TEXTURE
AT
WHICH
TO
SAMPLE
THE
IMAGE
THESE
ARE
OFTEN
SUPPLIED
PER
VERTEX
AND
THEN
INTER
POLATED
OVER
THE
AREA
OF
THE
RESULTING
GEOMETRY
TO
PROVIDE
A
PER
FRAGMENT
COORDINATE
THIS
COORDINATE
IS
USED
IN
THE
FRAGMENT
SHADER
TO
READ
FROM
THE
TEXTURE
AND
RETRIEVE
A
COLOR
FROM
THE
TEXTURE
FOR
THE
RESULTING
FRAGMENT
THE
TEXTURE
COORDINATES
IN
THE
EXAMPLE
OF
EXAMPLES
AND
IS
SUPPLIED
BY
THE
APPLICATION
PASSED
TO
THE
VERTEX
SHADER
IN
INTERPOLATED
BY
OPENGL
AND
THEN
PASSED
TO
THE
FRAGMENT
SHADER
IN
BEFORE
BEING
USED
TO
READ
FROM
THE
TEXTURE
THE
APPLICATION
SIDE
CODE
TO
SET
UP
A
SIMPLE
SET
OF
TEXTURE
COORDINATES
IS
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
TEXTURING
EXAMPLE
PROG
IS
THE
NAME
OF
A
LINKED
PROGRAM
CONTAINING
OUR
EXAMPLE
VERTEX
AND
FRAGMENT
SHADERS
GLUSEPROGRAM
PROG
TEX
IS
THE
NAME
OF
A
TEXTURE
OBJECT
THAT
HAS
BEEN
INITIALIZED
WITH
SOME
TEXTURE
DATA
GLBINDTEXTURE
TEX
SIMPLE
QUAD
WITH
TEXTURE
COORDINATES
STATIC
CONST
GLFLOAT
VERTEX
POSITIONS
TEXTURE
COORDINATES
CREATE
AND
INITIALIZE
A
BUFFER
OBJECT
GLUINT
BUF
CHAPTER
TEXTURES
GLGENBUFFERS
BUF
GLBINDBUFFER
BUF
GLBUFFERDATA
SIZEOF
SETUP
VERTEX
ATTRIBUTES
GLUINT
VAO
GLGENVERTEXARRAYS
VAO
GLBINDVERTEXARRAY
VAO
GLVERTEXATTRIBPOINTER
GLVOID
GLENABLEVERTEXATTRIBARRAY
GLVERTEXATTRIBPOINTER
GLVOID
SIZEOF
FLOAT
GLENABLEVERTEXATTRIBARRAY
READY
DRAW
GLDRAWARRAYS
IN
EXAMPLE
THE
GEOMETRY
FOR
A
SIMPLE
QUADRILATERAL
IS
PLACED
INTO
A
BUFFER
OBJECT
ALONG
WITH
TEXTURE
COORDINATES
FOR
EACH
OF
ITS
FOUR
VERTICES
THE
POSITION
DATA
IS
SENT
TO
VERTEX
ATTRIBUTE
AND
THE
TEXTURE
COORDINATES
ARE
SENT
TO
VERTEX
ATTRIBUTE
IN
THE
EXAMPLE
PROG
IS
THE
NAME
OF
A
PROGRAM
OBJECT
THAT
HAS
PREVIOUSLY
HAD
THE
SHADERS
OF
EXAMPLES
AND
COMPILED
AND
LINKED
INTO
IT
AND
TEX
IS
A
TEXTURE
OBJECT
WITH
TEXTURE
DATA
ALREADY
LOADED
INTO
IT
THE
RESULT
OF
RENDERING
WITH
THIS
PROGRAM
IS
SHOWN
IN
FIGURE
FIGURE
OUTPUT
OF
THE
SIMPLE
TEXTURED
QUAD
EXAMPLE
USING
TEXTURES
EACH
OF
THE
TEXTURE
LOOKUP
FUNCTIONS
IN
GLSL
TAKES
A
SET
OF
COORDINATES
FROM
WHICH
TO
SAMPLE
THE
TEXEL
A
TEXTURE
IS
CONSIDERED
TO
OCCUPY
A
DOMAIN
SPANNING
FROM
TO
ALONG
EACH
AXIS
REMEMBER
YOU
MAY
USE
ONE
TWO
OR
EVEN
THREE
DIMENSIONAL
TEXTURES
IT
IS
THE
RESPONSIBILITY
OF
THE
APPLICATION
TO
GENERATE
OR
SUPPLY
TEXTURE
COORDINATES
FOR
THESE
FUNCTIONS
TO
USE
AS
WE
HAVE
DONE
IN
EXAMPLE
NORMALLY
THESE
WOULD
BE
PASSED
INTO
YOUR
VERTEX
SHADER
IN
THE
FORM
OF
A
VERTEX
INPUT
AND
THEN
INTERPOLATED
ACROSS
THE
FACE
OF
EACH
POLYGON
BY
OPENGL
BEFORE
BEING
SENT
TO
THE
FRAGMENT
SHADER
IN
EXAMPLE
THE
TEXTURE
COORDINATES
USED
RANGE
FROM
TO
SO
ALL
OF
THE
RESULTING
INTERPOLATED
COORDINATES
LIE
WITHIN
THIS
RANGE
IF
TEXTURE
COORDINATES
PASSED
TO
A
TEXTURE
LOOKUP
FUNCTION
END
UP
OUTSIDE
THE
RANGE
TO
THEY
MUST
BE
MODIFIED
TO
BRING
THEM
BACK
INTO
THIS
RANGE
THERE
ARE
SEVERAL
WAYS
IN
WHICH
OPENGL
WILL
DO
THIS
FOR
YOU
CONTROLLED
BY
THE
AND
SAMPLER
PARAMETERS
THE
AND
PARAMETERS
CONTROL
THE
WAY
THAT
TEXTURE
COORDINATES
OUTSIDE
THE
RANGE
TO
ARE
HANDLED
BY
OPENGL
FOR
THE
S
T
AND
AXES
OF
THE
TEXTURE
DOMAIN
RESPECTIVELY
THE
CLAMPING
MODE
IN
EACH
DIMENSION
MAY
BE
SET
TO
ONE
OF
OR
THE
CLAMPING
MODES
WORK
AS
FOLLOWS
IF
THE
MODE
IS
WHENEVER
A
TEXTURE
COORDINATE
IS
OUTSIDE
THE
RANGE
TO
TEXELS
ON
THE
VERY
EDGE
OF
THE
TEXTURE
ARE
USED
TO
FORM
THE
VALUE
RETURNED
TO
THE
SHADER
WHEN
THE
MODE
IS
AN
ATTEMPT
TO
READ
OUTSIDE
THE
TEXTURE
WILL
RESULT
IN
THE
CONSTANT
BORDER
COLOR
FOR
THE
TEXTURE
BEING
USED
TO
FORM
THE
FINAL
VALUE
WHEN
THE
CLAMPING
MODE
IS
SET
TO
THE
TEXTURE
IS
SIMPLY
WRAPPED
AND
CONSIDERED
TO
REPEAT
INFINITELY
IN
ESSENCE
ONLY
THE
FRACTIONAL
PART
OF
THE
TEXTURE
COORDINATE
IS
USED
TO
LOOKUP
TEXELS
AND
THE
INTEGER
PART
IS
DISCARDED
THE
CLAMPING
MODE
IS
A
SPECIAL
MODE
THAT
ALLOWS
A
TEXTURE
TO
BE
REPEATED
IN
A
MIRRORED
FASHION
TEXTURE
COORDINATES
WHOSE
INTEGER
PART
IS
EVEN
HAVE
ONLY
THEIR
FRACTIONAL
PART
CONSIDERED
TEXTURE
COORDINATES
WHOSE
INTEGER
PART
IS
ODD
I
E
ETC
HAVE
THEIR
FRACTIONAL
PART
SUBTRACTED
FROM
IN
ORDER
TO
FORM
THE
TEXTURE
COORDINATES
ARE
TRADITIONALLY
REFERRED
TO
AS
T
R
AND
Q
TO
DISTINGUISH
THEM
FROM
SPATIAL
COORDINATES
X
Y
Z
AND
W
AND
COLOR
COORDINATES
R
G
B
AND
A
ONE
CAVEAT
IS
THAT
IN
GLSL
R
IS
ALREADY
USED
FOR
RED
SO
THE
FOUR
COMPONENTS
OF
A
TEXTURE
COORDINATE
ARE
REFERRED
TO
AS
T
P
AND
Q
CHAPTER
TEXTURES
FINAL
COORDINATE
THIS
MODE
CAN
HELP
TO
ELIMINATE
TILING
ARTIFACTS
FROM
REPEATING
TEXTURES
FIGURE
SHOWS
EACH
OF
THE
TEXTURE
MODES
USED
TO
HANDLE
TEXTURE
COORDINATES
RANGING
FROM
TO
ALL
OF
THESE
MODES
EXCEPT
FOR
EVENTUALLY
TAKE
TEXELS
FROM
SOMEWHERE
IN
THE
TEXTURE
DATA
STORE
IN
THE
CASE
OF
THE
RETURNED
TEXELS
COME
FROM
THE
TEXTURE
VIRTUAL
BORDER
WHICH
IS
A
CONSTANT
COLOR
BY
DEFAULT
THIS
COLOR
IS
TRANSPARENT
BLACK
I
E
IN
EACH
COMPONENT
OF
THE
TEXTURE
HOWEVER
YOU
MAY
CHANGE
THIS
COLOR
BY
SETTING
THE
VALUE
OF
THE
SAMPLER
PARAMETER
THE
SNIPPET
OF
EXAMPLE
SHOWS
HOW
TO
SET
THE
TEXTURE
BORDER
COLOR
TO
RED
EXAMPLE
SETTING
THE
BORDER
COLOR
OF
A
SAMPLER
GLUINT
SAMPLER
THIS
VARIABLE
HOLDS
THE
NAME
OF
OUR
SAMPLER
GLUINT
TEXTURE
THIS
VARIABLE
HOLDS
THE
NAME
OF
A
TEXTURE
CONST
GLFLOAT
RED
OPAQUE
RED
SET
THE
FOR
THE
SAMPLER
OBJECT
GLSAMPLERPARAMETERFV
SAMPLER
RED
OR
ALTERNATIVELY
SET
THE
BORDER
COLOR
FOR
A
TEXTURE
OBJECT
THIS
WILL
BE
USED
WHEN
A
TEXTURE
IS
BOUND
TO
A
TEXTURE
UNIT
WITHOUT
A
CORRESPONDING
SAMPLER
OBJECT
GLBINDTEXTURE
TEXTURE
GLTEXPARAMETERFV
RED
FIGURE
EFFECT
OF
DIFFERENT
TEXTURE
WRAPPING
MODES
TOP
LEFT
TOP
RIGHT
BOTTOM
LEFT
AND
BOTTOM
RIGHT
USING
TEXTURES
ARRANGING
TEXTURE
DATA
SUPPOSE
YOU
HAVE
AN
EXTERNAL
SOURCE
OF
TEXTURE
DATA
SAY
AN
IMAGE
EDITING
PROGRAM
OR
ANOTHER
COMPONENT
OF
YOUR
APPLICATION
PERHAPS
WRITTEN
IN
ANOTHER
LANGUAGE
OR
USING
ANOTHER
API
OVER
WHICH
YOU
HAVE
NO
CONTROL
IT
IS
POSSIBLE
THAT
THE
TEXTURE
DATA
IS
STORED
USING
A
COMPONENT
ORDER
OTHER
THAN
RED
GREEN
BLUE
ALPHA
RGBA
FOR
EXAMPLE
ABGR
IS
FAIRLY
COMMON
I
E
RGBA
BYTES
STORED
IN
LITTLE
ENDIAN
ORDER
AS
IS
ARGB
AND
EVEN
RGBX
RGB
DATA
PACKED
INTO
A
BIT
WORD
WITH
ONE
BYTE
LEFT
UNUSED
OPENGL
IS
QUITE
CAPABLE
OF
CONSUMING
THIS
DATA
AND
MAKING
IT
APPEAR
AS
NICELY
FORMATTED
RGBA
DATA
TO
YOUR
SHADER
TO
DO
THIS
WE
USE
TEXTURE
SWIZZLE
WHICH
IS
A
MECHANISM
THAT
ALLOWS
YOU
TO
REARRANGE
THE
COMPONENT
ORDER
OF
TEXTURE
DATA
ON
THE
FLY
AS
IT
IS
READ
BY
THE
GRAPHICS
HARDWARE
TEXTURE
SWIZZLE
IS
A
SET
OF
TEXTURE
PARAMETERS
ONE
FOR
EACH
CHANNEL
OF
THE
TEXTURE
THAT
CAN
BE
SET
USING
THE
GLTEXPARAMETERI
FUNCTION
BY
PASSING
ONE
OF
THE
TEXTURE
SWIZZLE
PARAMETER
NAMES
AND
THE
DESIRED
SOURCE
FOR
THE
DATA
THE
SWIZZLE
TEXTURE
PARAMETERS
ARE
AND
WHICH
SPECIFY
THE
OUTGOING
TEXTURE
CHANNELS
IN
THE
ORDER
RED
GREEN
BLUE
AND
ALPHA
RESPECTIVELY
FURTHERMORE
THE
TOKEN
NAME
IS
PROVIDED
TO
ALLOW
ALL
FOUR
CHANNELS
TO
BE
CONFIGURED
USING
A
SINGLE
CALL
TO
GLTEXPARAMETERIV
EACH
ONE
SPECIFIES
WHAT
THE
SOURCE
OF
DATA
SHOULD
BE
FOR
THE
CORRESPONDING
CHANNEL
OF
THE
TEXTURE
AND
MAY
BE
SET
TO
ONE
OF
THE
SOURCE
SELECTORS
OR
THESE
INDICATE
THE
VALUES
OF
THE
RED
GREEN
BLUE
OR
ALPHA
CHANNELS
OF
THE
INCOMING
TEXTURE
OR
THE
CONSTANT
VALUES
ONE
AND
ZERO
RESPECTIVELY
BY
DEFAULT
THE
SWIZZLE
SETTINGS
ARE
CONFIGURED
TO
PASS
THE
DATA
DIRECTLY
THROUGH
UNMODIFIED
THAT
IS
AND
ARE
SET
TO
AND
RESPECTIVELY
EXAMPLE
SHOWS
HOW
TO
CONFIGURE
A
TEXTURE
TO
READ
FROM
ABGR
AND
RGBX
DATA
IN
THE
CASE
OF
RGBX
WE
SPECIFY
THAT
THE
CONSTANT
VALUE
BE
RETURNED
FOR
THE
MISSING
ALPHA
CHANNEL
EXAMPLE
TEXTURE
SWIZZLE
EXAMPLE
THE
NAME
OF
A
TEXTURE
WHOSE
DATA
IS
IN
ABGR
FORMAT
GLUINT
THE
NAME
OF
A
TEXTURE
WHOSE
DATA
IS
IN
RGBX
FORMAT
GLYINT
CHAPTER
TEXTURES
AN
ARRAY
OF
TOKENS
TO
SET
ABGR
SWIZZLE
IN
ONE
FUNCTION
CALL
STATIC
CONST
GLENUM
BIND
THE
ABGR
TEXTURE
GLBINDTEXTURE
SET
ALL
FOUR
SWIZZLE
PARAMETERS
IN
ONE
CALL
TO
GLTEXPARAMETERIV
GLTEXPARAMETERIV
NOW
BIND
THE
RGBX
TEXTURE
GLBINDTEXTURE
WE
RE
ONLY
SETTING
THE
PARAMETER
HERE
BECAUSE
THE
R
G
AND
B
SWIZZLES
CAN
BE
LEFT
AS
THEIR
DEFAULT
VALUES
GLTEXPARAMETERI
USING
MULTIPLE
TEXTURES
NOW
THAT
YOU
HAVE
SEEN
A
SIMPLE
APPLICATION
OF
TEXTURE
TO
RENDERING
YOU
MAY
HAVE
NOTICED
SOME
OMISSIONS
FROM
THE
SAMPLE
ABOVE
FOR
EXAMPLE
IN
EXAMPLE
WE
DID
NOT
SET
A
VALUE
FOR
THE
SAMPLER
IN
THE
FRAGMENT
SHADER
THIS
IS
BECAUSE
WE
ARE
ONLY
USING
A
SINGLE
TEXTURE
IN
FACT
OPENGL
CAN
SUPPORT
MANY
TEXTURES
SIMULTANEOUSLY
A
MINIMUM
OF
TEXTURES
PER
SHADER
STAGE
ARE
SUPPORTED
WHICH
WHEN
MULTIPLIED
BY
THE
NUMBER
OF
SHADER
STAGES
SUPPORTED
BY
OPENGL
COMES
OUT
TO
TEXTURES
IN
FACT
OPENGL
HAS
TEXTURE
UNITS
REFERRED
TO
BY
TOKENS
NAMED
THROUGH
WHENEVER
ONE
OF
THE
TEXTURE
FUNCTIONS
SUCH
AS
GLBINDTEXTURE
IS
CALLED
IT
OPERATES
ON
THE
TEXTURE
BOUND
TO
THE
ACTIVE
TEXTURE
UNIT
WHICH
IS
IMPLIED
BY
WHAT
IS
KNOWN
AS
A
SELECTOR
BY
DEFAULT
THE
ACTIVE
TEXTURE
SELECTOR
IS
HOWEVER
IT
MAY
BE
CHANGED
AND
WILL
NEED
TO
BE
IF
YOU
WANT
TO
USE
MORE
THAN
ONE
TEXTURE
THE
FUNCTION
TO
CHANGE
THE
ACTIVE
TEXTURE
SELECTOR
IS
GLACTIVETEXTURE
WHICH
WAS
INTRODUCED
ABOVE
IN
ORDER
TO
USE
MULTIPLE
TEXTURES
IN
YOUR
SHADER
YOU
WILL
NEED
TO
DECLARE
MULTIPLE
UNIFORM
SAMPLER
VARIABLES
EACH
WILL
REFER
TO
A
TEXTURE
UNIT
FROM
THE
APPLICATION
SIDE
UNIFORM
SAMPLERS
APPEAR
MUCH
LIKE
UNIFORM
INTEGERS
THEY
ARE
ENUMERATED
USING
THE
NORMAL
TECHNICALLY
THEY
DON
T
NEED
TO
BE
ASSOCIATED
WITH
DIFFERENT
TEXTURE
UNITS
IF
TWO
OR
MORE
SAMPLERS
REFER
TO
THE
SAME
TEXTURE
UNIT
THEN
THEY
WILL
BOTH
END
UP
SAMPLING
FROM
THE
SAME
TEXTURE
USING
TEXTURES
GLGETACTIVEUNIFORM
FUNCTION
AND
MAY
HAVE
THEIR
VALUES
MODIFIED
USING
THE
FUNCTION
THE
INTEGER
VALUE
ASSIGNED
TO
A
UNIFORM
SAMPLER
IS
THE
INDEX
OF
THE
TEXTURE
UNIT
TO
WHICH
IT
REFERS
THE
STEPS
TO
USE
MULTIPLE
TEXTURES
IN
A
SINGLE
SHADER
OR
PROGRAM
ARE
THEREFORE
AS
FOLLOWS
FIRST
WE
NEED
TO
SELECT
THE
FIRST
TEXTURE
UNIT
USING
GLACTIVETEXTURE
AND
BIND
A
TEXTURE
TO
ONE
OF
ITS
TARGETS
USING
GLBINDTEXTURE
WE
REPEAT
THIS
PROCESS
FOR
EACH
TEXTURE
UNIT
THEN
WE
SET
THE
VALUES
OF
THE
UNIFORM
SAMPLER
VARIABLES
TO
THE
INDICES
OF
THE
TEXTURE
UNITS
THAT
WE
WISH
TO
USE
BY
CALLING
THE
FUNCTION
TO
ILLUSTRATE
THIS
WE
WILL
MODIFY
OUR
EXAMPLE
FROM
THE
PREVIOUS
SECTION
TO
USE
TWO
TEXTURES
WE
WILL
FIRST
CHANGE
THE
VERTEX
SHADER
OF
EXAMPLE
TO
PRODUCE
TWO
SETS
OF
TEXTURE
COORDINATES
THE
UPDATED
VERTEX
SHADER
IS
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
MULTITEXTURE
EXAMPLE
VERTEX
SHADER
VERSION
CORE
LAYOUT
LOCATION
IN
LAYOUT
LOCATION
IN
OUT
OUT
UNIFORM
FLOAT
TIME
VOID
MAIN
VOID
CONST
M
COS
TIME
SIN
TIME
SIN
TIME
COS
TIME
M
TRANSPOSE
M
THE
NEW
VERTEX
SHADER
PERFORMS
SIMPLE
ANIMATION
BY
USING
A
TIME
UNIFORM
VARIABLE
TO
CONSTRUCT
A
ROTATION
MATRIX
AND
USES
THAT
TO
ROTATE
THE
INCOMING
TEXTURE
COORDINATES
IN
OPPOSITE
DIRECTIONS
NEXT
WE
MODIFY
THE
ORIGINAL
FRAGMENT
SHADER
FROM
EXAMPLE
TO
INCLUDE
TWO
UNIFORM
SAMPLER
VARIABLES
READ
A
TEXEL
FROM
EACH
AND
SUM
THEM
TOGETHER
THIS
NEW
SHADER
IS
SHOWN
IN
EXAMPLE
CHAPTER
TEXTURES
EXAMPLE
SIMPLE
MULTITEXTURE
EXAMPLE
FRAGMENT
SHADER
VERSION
CORE
IN
IN
LAYOUT
LOCATION
OUT
COLOR
UNIFORM
UNIFORM
VOID
MAIN
VOID
COLOR
TEXTURE
TEXTURE
IN
EXAMPLE
WE
ARE
USING
A
DIFFERENT
TEXTURE
COORDINATE
TO
SAMPLE
FROM
THE
TWO
TEXTURES
HOWEVER
IT
IS
PERFECTLY
REASONABLE
TO
USE
THE
SAME
SET
OF
TEXTURE
COORDINATES
FOR
BOTH
TEXTURES
IN
ORDER
TO
MAKE
THIS
SHADER
DO
SOMETHING
USEFUL
WE
NEED
TO
SET
VALUES
FOR
THE
TWO
UNIFORM
SAMPLERS
AND
AND
BIND
TEXTURES
TO
THE
CORRESPONDING
TEXTURE
UNITS
WE
DO
THIS
USING
THE
GLACTIVETEXTURE
AND
GLBINDTEXTURE
FUNCTIONS
AS
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
MULTITEXTURE
EXAMPLE
PROG
IS
THE
NAME
OF
A
LINKED
PROGRAM
CONTAINING
OUR
EXAMPLE
VERTEX
AND
FRAGMENT
SHADERS
GLUSEPROGRAM
PROG
FOR
THE
FIRST
TEXTURE
WE
WILL
USE
TEXTURE
UNIT
GET
THE
UNIFORM
LOCATION
GLINT
GLGETUNIFORMLOCATION
PROG
SET
IT
TO
SELECT
TEXTURE
UNIT
GLACTIVETEXTURE
BIND
A
TEXTURE
TO
IT
GLBINDTEXTURE
REPEAT
THE
ABOVE
PROCESS
FOR
TEXTURE
UNIT
GLINT
GLGETUNIFORMLOCATION
PROG
GLACTIVETEXTURE
GLBINDTEXTURE
USING
TEXTURES
THE
TWO
SOURCE
TEXTURES
USED
IN
THIS
EXAMPLE
ARE
SHOWN
IN
FIGURE
AND
THE
RESULT
OF
RENDERING
WITH
OUR
UPDATED
FRAGMENT
SHADER
WITH
TWO
TEXTURES
BOUND
IS
SHOWN
IN
FIGURE
FIGURE
TWO
TEXTURES
USED
IN
THE
MULTITEXTURE
EXAMPLE
FIGURE
OUTPUT
OF
THE
SIMPLE
MULTITEXTURE
EXAMPLE
COMPLEX
TEXTURE
TYPES
TEXTURES
ARE
OFTEN
CONSIDERED
ONLY
AS
ONE
OR
TWO
DIMENSIONAL
IMAGES
THAT
MAY
BE
READ
FROM
HOWEVER
THERE
ARE
SEVERAL
TYPES
OF
TEXTURES
INCLUDING
TEXTURES
TEXTURE
ARRAYS
AND
CUBE
MAPS
SHADOWS
DEPTH
STENCIL
AND
BUFFER
TEXTURES
THIS
SECTION
DESCRIBES
THE
TYPES
OF
TEXTURE
AND
OUTLINES
THEIR
POTENTIAL
USE
CASES
CHAPTER
TEXTURES
TEXTURES
A
TEXTURE
CAN
BE
THOUGHT
OF
AS
A
VOLUME
OF
TEXELS
ARRANGED
IN
A
GRID
TO
CREATE
A
TEXTURE
GENERATE
A
TEXTURE
OBJECT
NAME
AND
BIND
IT
INITIALLY
TO
THE
TARGET
ONCE
BOUND
YOU
MAY
USE
OR
TO
CREATE
THE
STORAGE
FOR
THE
TEXTURE
OBJECT
THE
TEXTURE
HAS
NOT
ONLY
A
WIDTH
AND
A
HEIGHT
BUT
ALSO
A
DEPTH
THE
MAXIMUM
WIDTH
AND
HEIGHT
OF
A
TEXTURE
IS
THE
SAME
AS
THAT
OF
A
TEXTURE
AND
MAY
BE
FOUND
BY
RETRIEVING
THE
VALUE
OF
THE
MAXIMUM
DEPTH
OF
A
TEXTURE
SUPPORTED
BY
YOUR
OPENGL
IMPLEMENTATION
IS
FOUND
BY
RETRIEVING
THE
VALUE
OF
AND
THIS
MAY
BE
DIFFERENT
THAN
THE
MAXIMUM
WIDTH
AND
HEIGHT
OF
THE
TEXTURE
TEXTURES
ARE
READ
IN
SHADERS
USING
THREE
DIMENSIONAL
TEXTURE
COORDINATES
OTHERWISE
THEY
WORK
VERY
SIMILARLY
TO
OTHER
TEXTURES
TYPES
A
TYPICAL
USE
CASE
FOR
A
TEXTURE
IS
FOR
VOLUME
RENDERING
IN
FIELDS
SUCH
AS
MEDICAL
IMAGING
OR
FLUID
SIMULATION
IN
THIS
TYPE
OF
APPLICATION
THE
CONTENT
OF
THE
TEXTURE
IS
USUALLY
A
DENSITY
MAP
WHERE
EACH
REPRESENTS
THE
DENSITY
OF
A
MEDIUM
AT
THAT
POINT
A
SIMPLE
WAY
TO
RENDER
A
VOLUME
IS
TO
RENDER
PLANES
CUTTING
THROUGH
THE
VOLUME
AS
A
TEXTURED
QUADRILATERAL
WITH
A
TEXTURE
COORDINATE
AT
EACH
VERTEX
THE
VERTEX
SHADER
IN
EXAMPLE
SHOWS
HOW
A
SET
OF
TWO
DIMENSIONAL
TEXTURE
COORDINATES
ARE
TRANSFORMED
INTO
THREE
DIMENSIONAL
SPACE
USING
A
TRANSFORMATION
MATRIX
THESE
COORDINATES
ARE
THEN
INTERPOLATED
BY
OPENGL
AND
USED
IN
THE
FRAGMENT
SHADER
OF
EXAMPLE
EXAMPLE
SIMPLE
VOLUME
TEXTURE
VERTEX
SHADER
VERSION
CORE
POSITION
AND
TEXTURE
COORDINATE
FROM
APPLICATION
LAYOUT
LOCATION
IN
LAYOUT
LOCATION
IN
OUTPUT
TEXTURE
COORDINATE
AFTER
TRANSFORMATION
OUT
MATRIX
TO
TRANSFORM
THE
TEXTURE
COORDINATES
INTO
SPACE
UNIFORM
VOID
MAIN
VOID
A
VOXEL
IS
A
TERM
THAT
REFERS
TO
AN
ELEMENT
OF
A
VOLUME
JUST
AS
PIXEL
REFERS
TO
AN
ELEMENT
OF
A
PICTURE
AND
TEXEL
REFERS
TO
AN
ELEMENT
OF
A
TEXTURE
COMPLEX
TEXTURE
TYPES
MULTIPLY
THE
TEXTURE
COORDINATE
BY
THE
TRANSFORMATION
MATRIX
TO
PLACE
IT
INTO
SPACE
STP
PASS
POSITION
THROUGH
UNCHANGED
EXAMPLE
SIMPLE
VOLUME
TEXTURE
FRAGMENT
SHADER
VERSION
CORE
INCOMING
TEXTURE
COORDINATE
FROM
VERTEX
SHADER
IN
FINAL
COLOR
LAYOUT
LOCATION
OUT
COLOR
VOLUME
TEXTURE
UNIFORM
TEX
VOID
MAIN
VOID
SIMPLY
READ
FROM
THE
TEXTURE
AT
THE
TEXTURE
COORDINATE
AND
REPLICATE
THE
SINGLE
CHANNEL
ACROSS
R
G
B
AND
A
COLOR
TEXTURE
TEX
RRRR
THE
RESULT
OF
RENDERING
WITH
THE
VERTEX
AND
FRAGMENT
SHADERS
OF
EXAMPLES
AND
IS
SHOWN
IN
FIGURE
IN
THIS
EXAMPLE
THE
VOLUME
TEXTURE
CONTAINS
A
DENSITY
FIELD
OF
A
CLOUD
THE
EXAMPLE
ANIMATES
THE
CLOUD
BY
MOVING
A
CUTTING
PLANE
THROUGH
THE
VOLUME
AND
SAMPLING
THE
TEXTURE
AT
EACH
POINT
ON
THE
PLANE
FIGURE
OUTPUT
OF
THE
VOLUME
TEXTURE
EXAMPLE
CHAPTER
TEXTURES
ARRAY
TEXTURES
FOR
CERTAIN
APPLICATIONS
YOU
MAY
HAVE
A
NUMBER
OF
ONE
OR
TWO
DIMENSIONAL
TEXTURES
THAT
YOU
MIGHT
LIKE
TO
ACCESS
SIMULTANEOUSLY
WITHIN
THE
CONFINES
OF
A
SINGLE
DRAW
CALL
FOR
INSTANCE
SUPPOSE
YOU
RE
AUTHORING
A
GAME
THAT
FEATURES
MULTIPLE
CHARACTERS
OF
BASICALLY
THE
SAME
GEOMETRY
BUT
EACH
OF
WHICH
HAS
ITS
OWN
COSTUME
OR
YOU
MIGHT
WANT
TO
USE
MULTIPLE
LAYERS
OF
TEXTURE
FOR
THE
CHARACTER
DIFFUSE
COLOR
A
NORMAL
MAP
A
SPECULAR
INTENSITY
MAP
AND
A
NUMBER
OF
OTHER
ATTRIBUTES
WHEN
USING
MANY
TEXTURES
LIKE
THIS
YOU
WOULD
NEED
TO
BIND
ALL
OF
THE
REQUIRED
TEXTURES
BEFORE
THE
DRAW
COMMAND
THE
CALLS
TO
GLBINDTEXTURE
FOR
EACH
DRAW
CALL
COULD
HAVE
PERFORMANCE
IMPLICATIONS
FOR
THE
APPLICATION
IF
THE
TEXTURE
OBJECTS
NEEDED
TO
BE
UPDATED
BY
OPENGL
TEXTURE
ARRAYS
ALLOW
YOU
TO
COMBINE
A
COLLECTION
OF
ONE
OR
TWO
DIMENSIONAL
TEXTURES
ALL
OF
THE
SAME
SIZE
AND
FORMAT
INTO
A
TEXTURE
OF
THE
NEXT
HIGHER
DIMENSION
E
G
AN
ARRAY
OF
TWO
DIMENSIONAL
TEXTURES
BECOMES
SOMETHING
LIKE
A
THREE
DIMENSIONAL
TEXTURE
IF
YOU
WERE
TO
TRY
TO
USE
A
THREE
DIMENSIONAL
TEXTURE
TO
STORE
A
COLLECTION
OF
TWO
DIMENSIONAL
TEXTURES
YOU
WOULD
ENCOUNTER
A
FEW
INCONVENIENCES
THE
INDEXING
TEXTURE
COORDINATE
R
IN
THIS
CASE
IS
NORMALIZED
TO
THE
RANGE
TO
ACCESS
THE
THIRD
TEXTURE
IN
A
STACK
OF
SEVEN
YOU
WOULD
NEED
TO
PASS
OR
THEREABOUTS
TO
ACCESS
WHAT
YOU
WOULD
PROBABLY
LIKE
TO
ACCESS
AS
TEXTURE
ARRAYS
PERMIT
THIS
TYPE
OF
TEXTURE
SELECTION
ADDITIONALLY
TEXTURE
ARRAYS
ALLOW
SUITABLE
MIPMAP
FILTERING
WITHIN
THE
TEXTURE
ACCESSED
BY
THE
INDEX
IN
COMPARISON
A
THREE
DIMENSIONAL
TEXTURE
WOULD
FILTER
BETWEEN
THE
TEXTURE
SLICES
LIKELY
IN
A
WAY
THAT
DOESN
T
RETURN
THE
RESULTS
YOU
WERE
HOPING
FOR
COMPARE
THE
PROTOTYPES
OF
THE
TEXTURE
FUNCTION
FOR
TEXTURES
AND
FOR
ARRAY
TEXTURES
THE
SECOND
FUNCTION
TAKES
A
SAMPLER
TYPE
AND
ITS
TEXTURE
COORDINATE
P
HAS
AN
ADDITIONAL
DIMENSION
THIS
THIRD
COMPONENT
OF
P
IS
THE
ARRAY
INDEX
OR
SLICE
CUBE
MAP
TEXTURES
CUBE
MAP
TEXTURES
ARE
A
SPECIAL
TYPE
OF
TEXTURE
USEFUL
FOR
ENVIRONMENT
MAPPING
THAT
TAKES
A
SET
OF
IMAGES
AND
TREATS
THEM
AS
THE
FACES
OF
A
CUBE
THE
SIX
FACES
OF
THE
CUBE
ARE
REPRESENTED
BY
SIX
SUBTEXTURES
THAT
MUST
BE
COMPLEX
TEXTURE
TYPES
SQUARE
AND
OF
THE
SAME
SIZE
WHEN
YOU
SAMPLE
FROM
A
CUBE
MAP
THE
TEXTURE
COORDINATE
USED
IS
THREE
DIMENSIONAL
AND
IS
TREATED
AS
A
DIRECTION
FROM
THE
ORIGIN
THIS
DIRECTION
ESSENTIALLY
POINTS
AT
THE
LOCATION
ON
THE
SURFACE
OF
THE
CUBE
FROM
WHERE
TO
READ
THE
TEXTURE
IMAGINE
YOU
WERE
STANDING
IN
THE
MIDDLE
OF
A
SQUARE
ROOM
WITH
A
LASER
POINTER
YOU
COULD
POINT
THE
LASER
IN
ANY
DIRECTION
AND
HIT
PART
OF
THE
WALL
FLOOR
OR
CEILING
OF
THE
ROOM
THE
SPOT
WHERE
THE
POINTER
SHINES
IS
THE
POINT
FROM
WHICH
YOU
WOULD
SAMPLE
THE
TEXTURE
MAP
CUBE
MAPS
ARE
IDEAL
FOR
REPRESENTING
SURROUNDING
ENVIRONMENTS
LIGHTING
AND
REFLECTION
EFFECTS
AND
CAN
ALSO
BE
USED
TO
WRAP
COMPLEX
OBJECTS
WITH
TEXTURES
ALLOCATING
STORAGE
FOR
CUBE
MAP
TEXTURES
IS
ACHIEVED
BY
BINDING
A
NEW
TEXTURE
NAME
TO
THE
TEXTURE
TARGET
AND
CALLING
ON
THE
TARGET
THIS
SINGLE
CALL
WILL
ALLOCATE
THE
STORAGE
FOR
ALL
SIX
FACES
OF
THE
CUBE
MAP
HOWEVER
ONCE
ALLOCATED
THE
CUBE
MAP
IS
REPRESENTED
BY
A
SET
OF
SIX
SPECIAL
TARGETS
WHICH
CAN
BE
THOUGHT
OF
AS
SUBTARGETS
OF
THE
TARGET
THESE
ARE
AND
EACH
FACE
HAS
ITS
OWN
COMPLETE
SET
OF
MIPMAPS
THESE
SPECIAL
TARGETS
MAY
BE
PASSED
TO
THE
COMMAND
IN
ORDER
TO
SPECIFY
IMAGE
DATA
FOR
THE
CUBE
MAP
FACES
EXAMPLE
GIVES
AN
EXAMPLE
OF
HOW
TO
CREATE
AND
INITIALIZE
A
CUBE
MAP
TEXTURE
EXAMPLE
INITIALIZING
A
CUBE
MAP
TEXTURE
GLUINT
TEX
TEXTURE
TO
BE
CREATED
EXTERN
CONST
GLVOID
DATA
FOR
THE
FACES
GENERATE
BIND
AND
INITIALIZE
A
TEXTURE
OBJECT
USING
THE
TARGET
GLGENTEXTURES
TEX
GLBINDTEXTURE
TEX
NOTE
THAT
THE
TOKENS
AND
HAVE
CONTIGUOUS
NUMERIC
VALUES
DEFINED
IN
THAT
ORDER
THUS
IT
POSSIBLE
TO
INDEX
INTO
THE
FACES
OF
THE
CUBE
MAP
BY
SIMPLY
ADDING
A
FACE
INDEX
TO
SO
LONG
AS
THE
INDEX
IS
CONSISTENT
WITH
THE
DEFINED
ORDERING
CHAPTER
TEXTURES
NOW
THAT
STORAGE
IS
ALLOCATED
FOR
THE
TEXTURE
OBJECT
WE
CAN
PLACE
THE
TEXTURE
DATA
INTO
ITS
TEXEL
ARRAY
FOR
INT
FACE
FACE
FACE
GLENUM
TARGET
FACE
TARGET
FACE
LEVEL
X
Y
OFFSET
SIZE
OF
FACE
FORMAT
TYPE
FACE
DATA
NOW
OPTIONALLY
WE
COULD
SPECIFY
THE
DATA
FOR
THE
LOWER
MIPMAP
LEVELS
OF
EACH
OF
THE
FACES
CUBE
MAP
TEXTURES
MAY
ALSO
BE
AGGREGATED
INTO
ARRAYS
THE
TEXTURE
TARGET
MAY
BE
USED
TO
CREATE
AND
MODIFY
CUBE
MAP
ARRAY
TEXTURES
EACH
CUBE
IN
THE
CUBE
MAP
ARRAY
CONSUMES
SIX
CONTIGUOUS
SLICES
OF
THE
UNDERLYING
ARRAY
TEXTURE
THUS
AN
ARRAY
WITH
FIVE
CUBE
MAP
TEXTURES
IN
IT
WILL
HAVE
A
TOTAL
OF
SLICES
THE
EXAMPLE
SHOWN
IN
EXAMPLE
IS
MODIFIED
BELOW
IN
EXAMPLE
TO
CREATE
A
CUBE
MAP
ARRAY
OF
FIVE
CUBES
IN
A
SINGLE
TEXTURE
EXAMPLE
INITIALIZING
A
CUBE
MAP
ARRAY
TEXTURE
GLUINT
TEX
TEXTURE
TO
BE
CREATED
EXTERN
CONST
GLVOID
DATA
FOR
THE
FACES
GENERATE
BIND
AND
INITIALIZE
A
TEXTURE
OBJECT
USING
THE
TARGET
GLGENTEXTURES
TEX
GLBINDTEXTURE
TEX
NOW
THAT
STORAGE
IS
ALLOCATED
FOR
THE
TEXTURE
OBJECT
WE
CAN
PLACE
THE
TEXTURE
DATA
INTO
ITS
TEXEL
ARRAY
FOR
INT
FOR
INT
FACE
FACE
FACE
GLENUM
TARGET
FACE
TARGET
FACE
LEVEL
OFFSET
CUBE
INDEX
WIDTH
HEIGHT
FACE
COUNT
COMPLEX
TEXTURE
TYPES
FORMAT
TYPE
FACE
DATA
CUBE
MAP
EXAMPLE
SKY
BOXES
A
COMMON
USE
FOR
CUBE
MAP
TEXTURE
IS
AS
SKY
BOXS
A
SKY
BOX
IS
AN
APPLICATION
OF
TEXTURING
WHERE
THE
ENTIRE
SCENE
IS
EFFECTIVELY
WRAPPED
IN
A
LARGE
CUBE
WITH
THE
VIEWER
PLACED
IN
THE
CENTER
AS
THE
SCENE
IS
RENDERED
ANYTHING
NOT
COVERED
BY
OBJECTS
WITHIN
THE
SCENE
IS
DISPLAYED
AS
THE
INSIDE
OF
THE
CUBE
WITH
AN
APPROPRIATE
TEXTURE
IT
APPEARS
AS
IF
THE
VIEWER
IS
LOCATED
IN
THE
ENVIRONMENT
REPRESENTED
BY
THE
CUBE
MAP
FIGURE
A
SHOWS
A
CUBE
VIEWED
FROM
THE
OUTSIDE
ILLUSTRATING
THAT
A
SKY
BOX
REALLY
IS
JUST
A
CUBE
WITH
A
TEXTURE
APPLIED
TO
IT
IN
FIGURE
B
WE
HAVE
ZOOMED
IN
UNTIL
THE
SKY
BOX
CUTS
THE
NEAR
PLANE
AND
WE
CAN
NOW
SEE
INSIDE
IT
FINALLY
IN
FIGURE
C
WE
HAVE
PLACED
THE
VIEWER
AT
THE
VERY
CENTER
OF
THE
CUBE
MAKING
IT
APPEAR
AS
IF
WE
ARE
IN
THE
ENVIRONMENT
REPRESENTED
BY
THE
CUBE
MAP
A
B
C
FIGURE
A
SKY
BOX
SHOWN
AS
SEEN
FROM
THE
OUTSIDE
FROM
CLOSE
UP
AND
FROM
THE
CENTER
THE
CUBE
MAP
IMAGES
SHOWN
IN
THIS
EXAMPLE
WERE
TAKEN
WITH
PERMISSION
FROM
HTTP
HUMUS
NAME
CHAPTER
TEXTURES
TO
RENDER
THE
IMAGES
SHOWN
IN
FIGURE
WE
SIMPLY
RENDER
A
UNIT
CUBE
CENTERED
AT
THE
ORIGIN
AND
USE
THE
OBJECT
SPACE
POSITION
AS
A
TEXTURE
COORDINATE
FROM
WHICH
TO
SAMPLE
THE
CUBE
MAP
THE
VERTEX
SHADER
FOR
THIS
EXAMPLE
IS
SHOWN
IN
EXAMPLE
AND
THE
CORRESPONDING
FRAGMENT
SHADER
IS
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
SKYBOX
EXAMPLE
VERTEX
SHADER
VERSION
CORE
LAYOUT
LOCATION
IN
OUT
UNIFORM
VOID
MAIN
VOID
EXAMPLE
SIMPLE
SKYBOX
EXAMPLE
FRAGMENT
SHADER
VERSION
CORE
IN
LAYOUT
LOCATION
OUT
COLOR
UNIFORM
SAMPLERCUBE
TEX
VOID
MAIN
VOID
COLOR
TEXTURE
TEX
USING
CUBE
MAPS
FOR
ENVIRONMENT
MAPPING
NOW
THAT
WE
HAVE
CREATED
AN
ENVIRONMENT
INTO
WHICH
WE
CAN
PLACE
THE
COMPONENTS
OF
OUR
SCENE
WE
CAN
MAKE
THE
OBJECTS
APPEAR
TO
BE
PART
OF
THE
ENVIRONMENT
THIS
IS
KNOWN
AS
ENVIRONMENT
MAPPING
AND
IS
ANOTHER
COMMON
USE
FOR
CUBE
MAP
TEXTURES
HERE
THE
CUBE
MAP
IS
EMPLOYED
AS
AN
ENVIRONMENT
MAP
AND
IS
USED
TO
TEXTURE
OBJECTS
IN
THE
SCENE
TO
IMPLEMENT
ENVIRONMENT
MAPPING
WE
MUST
CALCULATE
THE
TEXTURE
COORDINATE
FROM
WHICH
TO
SAMPLE
THE
CUBE
MAP
BY
REFLECTING
THE
INCOMING
VIEW
VECTOR
AROUND
THE
SURFACE
NORMAL
AT
THE
POINT
TO
BE
TEXTURED
THE
VERTEX
SHADER
SHOWN
IN
EXAMPLE
TRANSFORMS
THE
OBJECT
SPACE
POSITION
INTO
VIEW
SPACE
BY
MULTIPLYING
IT
BY
A
CONCATENATED
MODEL
VIEW
PROJECTION
MATRIX
IT
ALSO
ROTATES
THE
SURFACE
NORMAL
INTO
VIEW
SPACE
BY
MULTIPLYING
IT
BY
A
CONCATENATED
MODEL
VIEW
MATRIX
COMPLEX
TEXTURE
TYPES
EXAMPLE
CUBE
MAP
ENVIRONMENT
MAPPING
EXAMPLE
VERTEX
SHADER
VERSION
CORE
INCOMING
POSITION
AND
NORMAL
LAYOUT
LOCATION
IN
LAYOUT
LOCATION
IN
OUTGOING
SURFACE
NORMAL
AND
VIEW
SPACE
POSITION
OUT
OUT
MODEL
VIEW
PROJECTION
AND
MODEL
VIEW
MATRICES
UNIFORM
UNIFORM
VOID
MAIN
VOID
CLIP
SPACE
POSITION
VIEW
SPACE
NORMAL
AND
POSITION
XYZ
ONCE
THE
VIEW
SPACE
NORMAL
AND
POSITION
OF
THE
SURFACE
POINT
HAVE
BEEN
PASSED
INTO
THE
FRAGMENT
SHADER
WE
CAN
USE
THE
GLSL
REFLECT
FUNCTION
TO
REFLECT
THE
FRAGMENT
VIEW
SPACE
POSITION
AROUND
THE
SURFACE
NORMAL
AT
EACH
POINT
THIS
EFFECTIVELY
BOUNCES
THE
VIEW
VECTOR
OFF
THE
SURFACE
AND
INTO
THE
CUBE
MAP
WE
USE
THIS
REFLECTED
VECTOR
AS
A
TEXTURE
COORDINATE
TO
SAMPLE
FROM
THE
CUBE
MAP
USING
THE
RESULTING
TEXEL
TO
COLOR
THE
SURFACE
THE
RESULT
OF
THIS
IS
THAT
THE
ENVIRONMENT
APPEARS
TO
BE
REFLECTED
IN
THE
OBJECT
SURFACE
THE
FRAGMENT
SHADER
PERFORMING
THESE
OPERATIONS
IS
SHOWN
IN
EXAMPLE
EXAMPLE
CUBE
MAP
ENVIRONMENT
MAPPING
EXAMPLE
FRAGMENT
SHADER
VERSION
CORE
INCOMING
SURFACE
NORMAL
AND
VIEW
SPACE
POSITION
IN
IN
FINAL
FRAGMENT
COLOR
LAYOUT
LOCATION
OUT
COLOR
THE
CUBE
MAP
TEXTURE
UNIFORM
SAMPLERCUBE
TEX
VOID
MAIN
VOID
CALCULATE
THE
TEXTURE
COORDINATE
BY
REFLECTING
THE
CHAPTER
TEXTURES
VIEW
SPACE
POSITION
AROUND
THE
SURFACE
NORMAL
TC
REFLECT
NORMALIZE
SAMPLE
THE
TEXTURE
AND
COLOR
THE
RESULTING
FRAGMENT
A
GOLDEN
COLOR
COLOR
TEXTURE
TEX
TC
THE
FRAGMENT
SHADER
ALSO
SLIGHTLY
MODIFIES
THE
SAMPLED
TEXTURE
VALUE
RETRIEVED
FROM
THE
CUBE
MAP
IN
ORDER
TO
MAKE
IT
APPEAR
TO
BE
SLIGHTLY
GOLDEN
IN
COLOR
THE
RESULT
OF
RENDERING
WITH
THE
VERTEX
AND
FRAGMENT
SHADERS
OF
EXAMPLES
AND
IS
SHOWN
IN
FIGURE
BELOW
FIGURE
A
GOLDEN
ENVIRONMENT
MAPPED
TORUS
SEAMLESS
CUBE
MAP
SAMPLING
A
CUBE
MAP
IS
A
COLLECTION
OF
SIX
INDEPENDENT
FACES
POSSIBLY
AGGREGATED
INTO
ARRAYS
OF
CUBES
WITH
AN
INTEGER
MULTIPLE
OF
SIX
FACES
IN
TOTAL
WHEN
OPENGL
SAMPLES
FROM
A
CUBE
MAP
AS
A
FIRST
STEP
IT
USES
THE
DOMINANT
COMPONENT
OF
THE
THREE
DIMENSIONAL
TEXTURE
COORDINATE
TO
DETERMINE
WHICH
OF
THE
SIX
FACES
OF
THE
CUBE
TO
SAMPLE
FROM
ONCE
THIS
FACE
HAS
BEEN
DETERMINED
IT
IS
EFFECTIVELY
TREATED
AS
A
TWO
DIMENSIONAL
TEXTURE
AND
USED
TO
LOOK
UP
TEXEL
VALUES
BY
DEFAULT
AT
THE
EDGES
OF
THE
TEXTURE
NORMAL
TEXTURE
COORDINATE
WRAPPING
MODES
ARE
USED
AT
FIRST
THOUGHT
THIS
WOULD
SEEM
LOGICAL
AND
AS
THE
GENERATED
TWO
DIMENSIONAL
TEXTURE
COORDINATES
ALWAYS
LIE
WITHIN
A
FACE
WE
DON
T
EXPECT
TO
SEE
ANY
ISSUES
WITH
THIS
COMPLEX
TEXTURE
TYPES
HOWEVER
IF
THE
TEXTURE
FILTERING
MODE
IS
LINEAR
TOWARD
THE
EDGES
OF
THE
CUBE
FACES
THE
ADJOINING
FACES
TEXELS
ARE
NOT
CONSIDERED
WHEN
CALCULATING
THE
FINAL
FILTERED
TEXEL
VALUES
THIS
CAN
CAUSE
A
NOTICEABLE
SEAM
TO
APPEAR
IN
THE
FILTERED
TEXTURE
EVEN
WORSE
IF
THE
TEXTURE
COORDINATE
WRAPPING
MODE
IS
LEFT
AT
ONE
OF
THE
REPEATING
MODES
THEN
TEXELS
FROM
THE
OPPOSITE
SIDE
OF
THE
FACE
MAY
BE
USED
CAUSING
QUITE
INCORRECT
RESULTS
FIGURE
SHOWS
THE
RESULT
OF
SAMPLING
FROM
A
CUBE
MAP
TEXTURE
ACROSS
THE
JOIN
BETWEEN
TWO
FACES
INSET
IS
A
CLOSE
UP
VIEW
OF
THE
SEAM
THAT
IS
VISIBLE
BETWEEN
THE
ADJACENT
FACES
OF
THE
CUBE
MAP
FIGURE
A
VISIBLE
SEAM
IN
A
CUBE
MAP
TO
AVOID
THE
VISIBLE
SEAMS
BETWEEN
ADJACENT
FACES
OF
A
CUBE
MAP
WE
CAN
ENABLE
SEAMLESS
CUBE
MAP
FILTERING
TO
DO
THIS
CALL
GLENABLE
WITH
CAP
SET
TO
WHEN
SEAMLESS
CUBE
MAP
FILTERING
IS
ENABLED
OPENGL
WILL
USE
TEXELS
FROM
ADJACENT
CUBE
MAP
FACES
TO
RETRIEVE
TEXELS
FOR
USE
IN
FILTERING
THIS
WILL
ELIMINATE
ARTIFACTS
ESPECIALLY
WHEN
THERE
IS
AN
ABRUPT
CHANGE
IN
COLOR
FROM
ONE
FACE
TO
ANOTHER
OR
WHEN
THE
CUBE
MAP
IS
A
PARTICULARLY
LOW
RESOLUTION
FIGURE
SHOWS
THE
RESULT
OF
ENABLING
SEAMLESS
CUBE
MAP
FILTERING
NOTICE
THAT
THE
BRIGHT
LINE
OF
PIXELS
HAS
BEEN
ELIMINATED
CHAPTER
TEXTURES
FIGURE
THE
EFFECT
OF
SEAMLESS
CUBE
MAP
FILTERING
SHADOW
SAMPLERS
A
SPECIAL
TYPE
OF
SAMPLER
IS
PROVIDED
IN
GLSL
CALLED
A
SHADOW
SAMPLER
A
SHADOW
SAMPLER
TAKES
AN
ADDITIONAL
COMPONENT
IN
THE
TEXTURE
COORDINATE
THAT
IS
USED
AS
A
REFERENCE
AGAINST
WHICH
TO
COMPARE
THE
FETCHED
TEXEL
VALUES
WHEN
USING
A
SHADOW
SAMPLER
THE
VALUE
RETURNED
FROM
THE
TEXTURE
FUNCTION
IS
A
FLOATING
POINT
VALUE
BETWEEN
AND
INDICATING
THE
FRACTION
OF
FETCHED
TEXEL
VALUES
THAT
PASSED
THE
COMPARISON
OPERATOR
FOR
TEXTURE
ACCESSES
THAT
SAMPLE
ONLY
A
SINGLE
TEXEL
VALUE
USING
THE
FILTERING
MODE
NO
MIPMAPS
AND
ONE
SAMPLE
PER
TEXEL
THE
RETURNED
VALUE
WILL
BE
EITHER
OR
DEPENDING
ON
WHETHER
THE
TEXEL
PASSES
THE
COMPARISON
OR
NOT
IF
MORE
THAN
ONE
TEXEL
WOULD
NORMALLY
BE
USED
TO
CONSTRUCT
THE
VALUE
RETURNED
TO
THE
SHADER
SUCH
AS
WHEN
THE
FILTER
MODE
IS
LINEAR
OR
IF
A
MULTISAMPLE
TEXTURE
IS
USED
THEN
THE
VALUE
MAY
BE
ANYTHING
BETWEEN
AND
DEPENDING
ON
HOW
MANY
OF
THOSE
TEXELS
PASS
THE
COMPARISON
OPERATOR
THE
SHADOW
TEXTURING
FUNCTIONS
ARE
AS
FOLLOWS
COMPLEX
TEXTURE
TYPES
TO
ENABLE
THE
COMPARISON
FUNCTION
FOR
A
SAMPLER
CALL
GLSAMPLERPARAMETERI
OR
GLTEXPARAMETERI
IF
YOU
ARE
NOT
USING
A
SAMPLER
OBJECT
WITH
PNAME
SET
TO
AND
PARAM
SET
TO
AND
TO
DISABLE
IT
SET
PARAM
TO
WHEN
THE
TEXTURE
COMPARISON
MODE
IS
SET
TO
THE
COMPARISON
IS
CARRIED
OUT
WITH
THE
MODE
SPECIFIED
BY
THE
SAMPLER
THIS
IS
SET
BY
CALLING
GLSAMPLERPARAMETERI
WITH
PNAME
SET
TO
AND
PARAM
SET
TO
ONE
OF
THE
COMPARISON
FUNCTIONS
OR
THESE
COMPARISON
FUNCTIONS
HAVE
THE
SAME
MEANINGS
AS
THEY
DO
FOR
DEPTH
TESTING
A
COMPREHENSIVE
EXAMPLE
OF
USING
A
SHADOW
SAMPLER
IS
SHOWN
IN
SHADOW
MAPPING
ON
PAGE
OF
CHAPTER
LIGHT
AND
SHADOW
DEPTH
STENCIL
TEXTURES
INSTEAD
OF
AN
IMAGE
A
TEXTURE
CAN
HOLD
DEPTH
AND
STENCIL
VALUES
ONE
OF
EACH
PER
TEXEL
USING
THE
TEXTURE
FORMAT
THIS
IS
THE
TYPICAL
WAY
A
FRAMEBUFFER
WILL
STORE
THE
RENDERED
Z
COMPONENT
FOR
DEPTH
AND
THE
STENCIL
VALUE
AS
DISCUSSED
IN
DETAIL
IN
CHAPTER
COLOR
PIXELS
AND
FRAMEBUFFERS
WHEN
TEXTURING
FROM
A
DEPTH
STENCIL
TEXTURE
BY
DEFAULT
A
SHADER
WILL
READ
THE
DEPTH
HOWEVER
AS
OF
VERSION
A
SHADER
CAN
ALSO
READ
THE
STENCIL
VALUE
TO
DO
SO
THE
APPLICATION
MUST
SET
TO
AND
THE
SHADER
MUST
USE
AN
INTEGER
SAMPLER
TYPE
CHAPTER
TEXTURES
BUFFER
TEXTURES
BUFFER
TEXTURES
ARE
A
SPECIAL
CLASS
OF
TEXTURE
THAT
ALLOW
A
BUFFER
OBJECT
TO
BE
ACCESSED
FROM
A
SHADER
AS
IF
IT
WERE
A
LARGE
ONE
DIMENSIONAL
TEXTURE
BUFFER
TEXTURES
HAVE
CERTAIN
RESTRICTIONS
AND
DIFFERENCES
FROM
NORMAL
ONE
DIMENSIONAL
TEXTURES
BUT
OTHERWISE
APPEAR
SIMILAR
TO
THEM
IN
YOUR
CODE
YOU
CREATE
THEM
AS
NORMAL
TEXTURE
OBJECTS
BIND
THEM
TO
TEXTURE
UNITS
CONTROL
THEIR
WITH
GLTEXPARAMETERI
HOWEVER
THE
STORAGE
FOR
THE
TEXTURE
DATA
IS
ACTUALLY
OWNED
AND
CONTROLLED
BY
A
BUFFER
OBJECT
HENCE
THE
NAME
BUFFER
TEXTURE
ALSO
BUFFER
TEXTURES
HAVE
NO
INTERNAL
SAMPLER
AND
SAMPLER
OBJECTS
HAVE
NO
EFFECT
ON
BUFFER
TEXTURES
THE
MAIN
DIFFERENCES
BETWEEN
BUFFER
TEXTURES
AND
ONE
DIMENSIONAL
TEXTURES
ARE
AS
FOLLOWS
ONE
DIMENSIONAL
TEXTURES
HAVE
SIZES
LIMITED
TO
THE
VALUE
OF
BUT
BUFFER
TEXTURES
ARE
LIMITED
TO
THE
VALUE
OF
WHICH
IS
OFTEN
TWO
GIGABYTES
OR
MORE
ONE
DIMENSIONAL
TEXTURES
SUPPORT
FILTERING
MIPMAPS
TEXTURE
COORDINATE
WRAPPING
AND
OTHER
SAMPLER
PARAMETERS
BUFFER
TEXTURES
DO
NOT
TEXTURE
COORDINATES
FOR
ONE
DIMENSIONAL
TEXTURES
ARE
NORMALIZED
FLOATING
POINT
VALUES
BUT
BUFFER
TEXTURES
USE
UNNORMALIZED
INTEGER
TEXTURE
COORDINATES
WHETHER
YOU
DECIDE
TO
USE
A
BUFFER
TEXTURE
OR
A
ONE
DIMENSIONAL
TEXTURE
FOR
A
PARTICULAR
APPLICATION
WILL
DEPEND
ON
YOUR
NEEDS
IN
ORDER
TO
CREATE
A
BUFFER
TEXTURE
YOU
NEED
TO
GENERATE
A
NAME
FOR
YOUR
NEW
TEXTURE
USING
GLGENTEXTURES
BIND
IT
TO
THE
TEXTURE
TARGET
AND
THEN
ASSOCIATE
A
BUFFER
OBJECT
WITH
THE
TEXTURE
USING
THE
GLTEXBUFFER
FUNCTION
NOT
ALL
TEXTURE
PARAMETERS
ARE
RELEVANT
FOR
BUFFER
TEXTURES
AND
AS
NO
SAMPLER
IS
USED
WITH
BUFFER
TEXTURES
SAMPLER
PARAMETERS
ARE
ESSENTIALLY
IGNORED
COMPLEX
TEXTURE
TYPES
THE
CODE
SHOWN
IN
EXAMPLE
SHOWS
AN
EXAMPLE
OF
CREATING
A
BUFFER
INITIALIZING
ITS
DATA
STORE
AND
THEN
ASSOCIATING
IT
WITH
A
BUFFER
TEXTURE
EXAMPLE
CREATING
AND
INITIALIZING
A
BUFFER
TEXTURE
BUFFER
TO
BE
USED
AS
THE
DATA
STORE
GLUINT
BUF
TEXTURE
TO
BE
USED
AS
A
BUFFER
TEXTURE
GLUINT
TEX
DATA
IS
LOCATED
SOMEWHERE
ELSE
IN
THIS
PROGRAM
EXTERN
CONST
GLVOID
DATA
GENERATE
BIND
AND
INITIALIZE
A
BUFFER
OBJECT
USING
THE
BINDING
ASSUME
WE
RE
GOING
TO
USE
ONE
MEGABYTE
OF
DATA
HERE
GLGENBUFFERS
BUF
GLBINDBUFFER
BUF
GLBUFFERDATA
DATA
NOW
CREATE
THE
BUFFER
TEXTURE
AND
ASSOCIATE
IT
WITH
THE
BUFFER
OBJECT
GLGENTEXTURES
TEX
GLBINDTEXTURE
TEX
GLTEXBUFFER
BUF
TO
ATTACH
ONLY
A
RANGE
OF
A
BUFFER
OBJECT
TO
A
BUFFER
TEXTURE
YOU
MAY
USE
THE
GLTEXBUFFERRANGE
FUNCTION
WHOSE
PROTOTYPE
IS
AS
FOLLOWS
TO
ACCESS
A
BUFFER
TEXTURE
IN
A
SHADER
YOU
MUST
CREATE
A
UNIFORM
SAMPLERBUFFER
OR
ONE
OF
ITS
SIGNED
OR
UNSIGNED
INTEGER
VARIANTS
ISAMPLERBUFFER
OR
USAMPLERBUFFER
AND
USE
IT
WITH
THE
TEXELFETCH
CHAPTER
TEXTURES
TO
READ
INDIVIDUAL
SAMPLES
FROM
IT
THE
TEXELFETCH
FUNCTION
FOR
BUFFER
TEXTURES
IS
DEFINED
AS
FOLLOWS
AN
EXAMPLE
OF
THE
DECLARATION
OF
A
BUFFER
SAMPLER
AND
FETCHING
FROM
IT
USING
TEXELFETCH
IS
SHOWN
IN
EXAMPLE
EXAMPLE
TEXEL
LOOKUPS
FROM
A
BUFFER
TEXTURE
VERSION
CORE
UNIFORM
SAMPLERBUFFER
BUF
IN
INT
LAYOUT
LOCATION
OUT
COLOR
VOID
MAIN
VOID
COLOR
TEXELFETCH
BUF
TEXTURE
VIEWS
SO
FAR
WE
HAVE
CONSIDERED
TEXTURES
TO
BE
LARGE
BUFFERS
OF
DATA
THAT
HAVE
A
SPECIFIED
FORMAT
AND
CONSUME
A
FIXED
AMOUNT
OF
STORAGE
SPACE
THE
AMOUNT
OF
SPACE
DEPENDS
ON
THE
FORMAT
AND
ON
OTHER
PARAMETERS
SUCH
AS
THE
TEXTURE
DIMENSIONS
AND
WHETHER
IT
HAS
MIPMAPS
OR
NOT
HOWEVER
CONCEPTUALLY
THE
FORMAT
AND
TO
SOME
EXTENT
THE
DIMENSIONS
CAN
BE
SEPARATED
FROM
THE
SIZE
OF
THE
UNDERLYING
STORAGE
REQUIREMENTS
OF
A
TEXTURE
FOR
EXAMPLE
MANY
TEXTURE
INTERNAL
FORMATS
WILL
CONSUME
THE
SAME
NUMBER
OF
BITS
PER
TEXEL
AND
IN
SOME
CASES
IT
IS
POSSIBLE
TO
INTERPRET
THE
TEXELFETCH
FUNCTION
MAY
BE
USED
WITH
REGULAR
TEXTURES
AS
WELL
AS
BUFFER
TEXTURES
WHEN
IT
IS
USED
TO
SAMPLE
FROM
A
NONBUFFER
TEXTURE
THE
TEXTURE
SAMPLER
PARAMETERS
ARE
IGNORED
AND
THE
TEXTURE
COORDINATE
IS
STILL
INTERPRETED
AS
A
NONNORMALIZED
INTEGER
VALUE
AS
IT
IS
WITH
BUFFER
TEXTURES
WE
INTRODUCE
THIS
FUNCTION
HERE
SOLELY
BECAUSE
ITS
MOST
COMMON
USE
IS
WITH
BUFFER
TEXTURES
TEXTURE
VIEWS
TEXTURES
WITH
VARIOUS
DIFFERENT
DIMENSIONALITIES
PERHAPS
TAKING
A
SINGLE
SLICE
OF
AN
ARRAY
TEXTURE
AND
TREATING
IT
AS
A
SINGLE
TEXTURE
SAY
OPENGL
ALLOWS
YOU
TO
SHARE
A
SINGLE
DATA
STORE
BETWEEN
MULTIPLE
TEXTURES
EACH
WITH
ITS
OWN
FORMAT
AND
DIMENSIONS
FIRST
A
TEXTURE
IS
CREATED
AND
ITS
DATA
STORE
INITIALIZED
WITH
ONE
OF
THE
IMMUTABLE
DATA
STORAGE
FUNCTIONS
SUCH
AS
NEXT
WE
CREATE
A
TEXTURE
VIEW
OF
THE
PARENT
TEXTURE
IN
EFFECT
THIS
INCREMENTS
A
REFERENCE
COUNT
TO
THE
UNDERLYING
STORAGE
ALLOCATED
FOR
THE
FIRST
TEXTURE
GIVING
EACH
VIEW
A
REFERENCE
TO
IT
TO
CREATE
A
TEXTURE
VIEW
CALL
GLTEXTUREVIEW
WHOSE
PROTOTYPE
IS
AS
FOLLOWS
WHEN
CREATING
VIEWS
OF
EXISTING
TEXTURES
THE
TARGET
FOR
THE
NEW
TEXTURE
MUST
BE
COMPATIBLE
WITH
THE
TARGET
OF
THE
ORIGINAL
TEXTURE
THE
COMPATIBLE
TARGETS
ARE
GIVEN
IN
TABLE
TABLE
TARGET
COMPATIBILITY
FOR
TEXTURE
VIEWS
ORIGINAL
TARGET
COMPATIBLE
TARGETS
RECTANGLE
RECTANGLE
BUFFER
NONE
CHAPTER
TEXTURES
TABLE
CONTINUED
TARGET
COMPATIBILITY
FOR
TEXTURE
VIEWS
ORIGINAL
TARGET
COMPATIBLE
TARGETS
2D_ARRAY
2D_MULTISAMPLE_ARRAY
IN
ADDITION
TO
TARGET
COMPATIBILITY
THE
INTERNAL
FORMAT
OF
THE
NEW
VIEW
MUST
BE
OF
THE
SAME
FORMAT
CLASS
I
E
BITS
PER
TEXEL
OF
THE
ORIGINAL
PARENT
TEXTURE
TABLE
LISTS
THE
TEXTURE
FORMAT
CLASSES
AND
THEIR
COMPATIBLE
SPECIFIC
INTERNAL
FORMATS
TABLE
INTERNAL
FORMAT
COMPATIBILITY
FOR
TEXTURE
VIEWS
ORIGINAL
TARGET
COMPATIBLE
TARGETS
BIT
BIT
BIT
GL_RGBA16I
BIT
BIT
GL_RGBA8I
GL_SRGB8_ALPHA8
BIT
BIT
GL_R16_SNORM
BIT
TEXTURE
VIEWS
TABLE
CONTINUED
INTERNAL
FORMAT
COMPATIBILITY
FOR
TEXTURE
VIEWS
ORIGINAL
TARGET
COMPATIBLE
TARGETS
GIVEN
THE
FORMAT
AND
TARGET
COMPATIBILITY
MATRICES
ABOVE
IT
IS
POSSIBLE
TO
REINTERPRET
DATA
IN
A
TEXTURE
IN
MULTIPLE
WAYS
SIMULTANEOUSLY
FOR
EXAMPLE
IT
IS
POSSIBLE
TO
CREATE
TWO
VIEWS
OF
AN
TEXTURE
ONE
AS
UNSIGNED
NORMALIZED
RETURNING
FLOATING
POINT
DATA
TO
THE
SHADER
AND
ANOTHER
AS
AN
UNSIGNED
INTEGER
TEXTURE
WHICH
WILL
RETURN
THE
UNDERLYING
INTEGER
DATA
TO
THE
SHADER
EXAMPLE
SHOWS
AN
EXAMPLE
OF
HOW
TO
ACHIEVE
THIS
EXAMPLE
CREATING
A
TEXTURE
VIEW
WITH
A
NEW
FORMAT
CREATE
TWO
TEXTURE
NAMES
ONE
WILL
BE
OUR
PARENT
ONE
WILL
BE
THE
VIEW
GLUINT
TEX
GLGENTEXTURES
TEX
BIND
THE
FIRST
TEXTURE
AND
INITIALIZE
ITS
DATA
STORE
HERE
THE
STORE
WILL
BE
X
TEXTURE
WITH
MIPMAPS
AND
THE
FORMAT
WILL
BE
BITS
PER
COMPONENT
RGB
UNSIGNED
NORMALIZED
GLBINDTEXTURE
TEX
NOW
CREATE
A
VIEW
OF
THE
TEXTURE
THIS
TIME
USING
SO
AS
TO
RECEIVE
THE
RAW
DATA
FROM
THE
TEXTURE
GLTEXTUREVIEW
TEX
NEW
TEXTURE
VIEW
TARGET
FOR
THE
NEW
VIEW
TEX
ORIGINAL
TEXTURE
NEW
FORMAT
ALL
MIPMAPS
ONLY
ONE
LAYER
AS
A
SECOND
EXAMPLE
CONSIDER
A
CASE
WHERE
YOU
HAVE
A
LARGE
ARRAY
TEXTURE
AND
WISH
TO
TAKE
A
SINGLE
SLICE
OF
THE
ARRAY
AND
USE
IT
AS
AN
INDEPENDENT
TEXTURE
TO
DO
THIS
WE
CAN
CREATE
A
VIEW
OF
THE
TARGET
CHAPTER
TEXTURES
EVEN
THOUGH
THE
ORIGINAL
TEXTURE
IS
EXAMPLE
SHOWS
AN
EXAMPLE
OF
THIS
EXAMPLE
CREATING
A
TEXTURE
VIEW
WITH
A
NEW
TARGET
CREATE
TWO
TEXTURE
NAMES
ONE
WILL
BE
OUR
PARENT
ONE
WILL
BE
THE
VIEW
GLUINT
TEX
GLGENTEXTURES
TEX
BIND
THE
FIRST
TEXTURE
AND
INITIALIZE
ITS
DATA
STORE
WE
ARE
GOING
TO
CREATE
A
ARRAY
TEXTURE
WITH
A
LAYER
SIZE
OF
TEXELS
AND
LAYERS
GLBINDTEXTURE
TEX
NOW
CREATE
A
VIEW
OF
THE
TEXTURE
EXTRACTING
A
SINGLE
SLICE
FROM
THE
MIDDLE
OF
THE
ARRAY
GLTEXTUREVIEW
TEX
NEW
TEXTURE
VIEW
TARGET
FOR
THE
NEW
VIEW
TEX
ORIGINAL
TEXTURE
SAME
FORMAT
AS
ORIGINAL
TEXTURE
ALL
MIPMAPS
ONLY
ONE
LAYER
ONCE
A
VIEW
OF
A
TEXTURE
HAS
BEEN
CREATED
IT
CAN
BE
USED
IN
ANY
PLACE
THAT
YOU
CAN
USE
A
TEXTURE
INCLUDING
IMAGE
LOADS
AND
STORES
OR
FRAMEBUFFER
ATTACHMENTS
IT
IS
ALSO
POSSIBLE
TO
CREATE
VIEWS
OF
VIEWS
AND
VIEWS
OF
THOSE
VIEWS
ETC
WITH
EACH
VIEW
HOLDING
A
REFERENCE
TO
THE
ORIGINAL
DATA
STORE
IT
IS
EVEN
LEGAL
TO
DELETE
THE
ORIGINAL
PARENT
TEXTURE
SO
LONG
AS
AT
LEAST
ONE
VIEW
OF
THE
DATA
EXISTS
IT
WILL
NOT
BE
DELETED
OTHER
USE
CASES
FOR
TEXTURE
VIEWS
INCLUDE
ALIASING
DATA
OF
VARIOUS
FORMATS
FOR
EXAMPLE
BIT
CASTING
FLOATING
POINT
AND
INTEGER
DATA
TO
ENABLE
ATOMIC
OPERATIONS
AND
OPENGL
LOGIC
OP
TO
BE
PERFORMED
ON
FLOATING
POINT
DATA
WHICH
WOULD
NORMALLY
NOT
BE
ALLOWED
ALIASING
A
SINGLE
DATA
STORE
AS
BOTH
SRGB
AND
LINEAR
DATA
ALLOWS
A
SINGLE
SHADER
TO
SIMULTANEOUSLY
ACCESS
THE
SAME
DATA
WITH
AND
WITHOUT
SRGB
CONVERSION
APPLIED
A
SINGLE
ARRAY
TEXTURE
MAY
EFFECTIVELY
HAVE
DIFFERENT
FORMAT
DATA
STORED
IN
ITS
SLICES
BY
CREATING
MULTIPLE
ARRAY
VIEWS
OF
THE
TEXTURE
AND
RENDERING
DIFFERENT
OUTPUTS
TO
DIFFERENT
SLICES
OF
THE
TEXTURE
WITH
SOME
LATERAL
THINKING
APPLIED
TEXTURE
VIEWS
BECOME
A
VERY
POWERFUL
WAY
TO
ACCESS
AND
MANAGE
TEXTURE
DATA
TEXTURE
VIEWS
COMPRESSED
TEXTURES
COMPRESSION
IS
A
MECHANISM
BY
WHICH
THE
AMOUNT
OF
DATA
REQUIRED
TO
STORE
OR
TRANSMIT
INFORMATION
IS
REDUCED
BECAUSE
TEXTURE
DATA
CAN
CONSUME
A
VERY
LARGE
AMOUNT
OF
MEMORY
AND
CONSEQUENTLY
MEMORY
BANDWIDTH
OPENGL
SUPPORTS
STORING
TEXTURES
IN
COMPRESSED
FORMS
IN
ORDER
TO
REDUCE
THEIR
SIZE
COMPRESSION
ALGORITHMS
FALL
INTO
TWO
GENERAL
CATEGORIES
LOSSLESS
AND
LOSSY
LOSSLESS
COMPRESSION
ALGORITHMS
WILL
NOT
DISCARD
ANY
INFORMATION
AND
AN
EXACT
COPY
OF
THE
ORIGINAL
IS
RETRIEVABLE
AFTER
DECOMPRESSION
HOWEVER
LOSSY
COMPRESSION
SACRIFICES
SOME
OF
THE
ORIGINAL
INFORMATION
DURING
THE
PROCESS
IN
ORDER
TO
MAKE
THE
REMAINING
INFORMATION
MORE
SUITED
TO
THE
COMPRESSION
ALGORITHM
AND
REDUCE
ITS
SIZE
THIS
WILL
REDUCE
QUALITY
SOME
BUT
NORMALLY
PROVIDES
MUCH
GREATER
REDUCTION
IN
MEMORY
COST
OBVIOUSLY
FOR
SOME
CONTENT
SUCH
AS
COMPUTER
EXECUTABLES
TEXT
DOCUMENTS
AND
THE
LIKE
IT
IS
IMPERATIVE
THAT
NO
INFORMATION
IS
LOST
YOU
MAY
BE
FAMILIAR
WITH
LOSSLESS
COMPRESSION
IN
THE
FORM
OF
ZIP
TYPE
ALGORITHMS
USED
TO
COMPRESS
FILE
ARCHIVES
FOR
OTHER
CONTENT
THOUGH
SOME
LOSS
IN
QUALITY
IS
ACCEPTABLE
FOR
EXAMPLE
COMMON
AUDIO
AND
VIDEO
COMPRESSION
ALGORITHMS
SUCH
AS
MPEG
ARE
LOSSY
THEY
THROW
OUT
SOME
INFORMATION
IN
ORDER
TO
IMPROVE
THE
COMPRESSION
RATIO
A
TRADE
OFF
IS
MADE
BETWEEN
THE
ACCEPTABLE
LOSS
IN
QUALITY
AND
REDUCED
FILE
SIZES
WITHOUT
LOSSY
COMPRESSION
PLAYERS
AND
STREAMING
VIDEO
WOULD
BE
ALMOST
IMPRACTICAL
FOR
THE
MOST
PART
THE
LOSS
IN
FIDELITY
IS
NOT
PERCEPTIBLE
TO
MOST
THINK
WHEN
WAS
THE
LAST
TIME
YOU
NOTICED
THAT
THE
MUSIC
YOU
WERE
LISTENING
TO
WAS
COMPRESSED
MOST
TEXTURE
COMPRESSION
SCHEMES
IN
USE
TODAY
ARE
BASED
ON
LOSSY
ALGORITHMS
DESIGNED
TO
BE
EASY
TO
DECOMPRESS
EVEN
AT
THE
EXPENSE
OF
ADDITIONAL
COMPLEXITY
IN
THE
COMPRESSION
SIDE
OF
THE
ALGORITHM
THERE
ARE
TWO
WAYS
TO
GET
COMPRESSED
TEXTURE
DATA
INTO
OPENGL
THE
FIRST
IS
TO
ASK
OPENGL
TO
COMPRESS
IT
FOR
YOU
IN
THIS
CASE
YOU
SUPPLY
UNCOMPRESSED
DATA
BUT
SPECIFY
A
COMPRESSED
INTERNAL
FORMAT
THE
OPENGL
IMPLEMENTATION
WILL
TAKE
THE
UNCOMPRESSED
RAW
TEXTURE
DATA
AND
ATTEMPT
TO
COMPRESS
IT
BECAUSE
THIS
IS
A
REAL
TIME
PROCESS
THE
COMPRESSOR
IN
THE
OPENGL
IMPLEMENTATION
WILL
OFTEN
IMPLEMENT
A
RATHER
NAIVE
ALGORITHM
IN
ORDER
TO
COMPRESS
THE
DATA
QUICKLY
RESULTING
IN
A
POOR
QUALITY
COMPRESSED
TEXTURE
THE
OTHER
WAY
TO
BRING
COMPRESSED
TEXTURE
DATA
INTO
OPENGL
IS
TO
COMPRESS
IT
OFFLINE
I
E
BEFORE
YOUR
PROGRAM
RUNS
AND
PASS
THE
LOSSLESS
COMPRESSORS
SUCH
AS
FLAC
ARE
POPULAR
FOR
ARCHIVAL
OF
DIGITAL
MUSIC
THESE
ALGORITHMS
NORMALLY
REACH
COMPRESSION
RATIOS
OF
THE
ORDER
OF
TO
OF
THE
ORIGINAL
FILE
SIZE
HOWEVER
FOR
DAY
TO
DAY
USE
LOSSY
ALGORITHMS
SUCH
AS
AND
CAN
REACH
COMPRESSION
RATIOS
OF
OR
LESS
AND
PROVIDE
SATISFACTORY
EXPERIENCE
TO
MOST
USERS
CHAPTER
TEXTURES
COMPRESSED
DATA
TO
OPENGL
DIRECTLY
THIS
WAY
YOU
CAN
SPEND
AS
MUCH
TIME
AS
IS
NECESSARY
TO
ACHIEVE
THE
DESIRED
QUALITY
LEVEL
IN
THE
RESULTING
TEXTURE
WITHOUT
SACRIFICING
RUN
TIME
PERFORMANCE
UNDER
EITHER
MECHANISM
THE
FIRST
STEP
IS
TO
CHOOSE
A
COMPRESSED
INTERNAL
FORMAT
THERE
ARE
A
MYRIAD
OF
TEXTURE
COMPRESSION
ALGORITHMS
AND
FORMATS
AND
DIFFERENT
HARDWARE
AND
IMPLEMENTATIONS
OF
OPENGL
WILL
SUPPORT
DIFFERENT
SETS
OF
FORMATS
MANY
OF
WHICH
ARE
DOCUMENTED
IN
EXTENSIONS
TO
DETERMINE
WHICH
FORMATS
YOUR
OPENGL
IMPLEMENTATION
SUPPORTS
YOU
CAN
EXAMINE
THE
IMPLEMENTATION
LIST
OF
EXTENSIONS
ALTHOUGH
THE
SET
OF
FORMATS
SUPPORTED
BY
A
PARTICULAR
IMPLEMENTATION
OF
OPENGL
MAY
WELL
CONTAIN
SEVERAL
PROPRIETARY
AND
POSSIBLY
UNDOCUMENTED
COMPRESSION
FORMATS
TWO
FORMAT
FAMILIES
ARE
GUARANTEED
TO
BE
SUPPORTED
BY
OPENGL
THESE
ARE
RGTC
RED
GREEN
TEXTURE
COMPRESSION
AND
BPTC
BLOCK
PARTITIONED
TEXTURE
COMPRESSION
BOTH
FORMATS
ARE
BLOCK
BASED
AND
STORE
TEXELS
IN
UNITS
OF
TEXEL
BLOCKS
THIS
MEANS
THAT
THEY
STORE
THE
IMAGE
IN
BLOCKS
OF
TEXELS
EACH
INDEPENDENTLY
COMPRESSED
SUCH
BLOCKS
CAN
BE
EASILY
DECOMPRESSED
BY
HARDWARE
AS
THEY
ARE
BROUGHT
FROM
MAIN
MEMORY
INTO
THE
GRAPHICS
PROCESSOR
TEXTURE
CACHES
IF
YOU
HAVE
CHOSEN
TO
ASK
THE
OPENGL
IMPLEMENTATION
TO
COMPRESS
YOUR
TEXTURE
FOR
YOU
ALL
YOU
NEED
TO
DO
IS
CHOOSE
THE
APPROPRIATE
COMPRESSED
INTERNAL
FORMAT
AND
SPECIFY
THE
TEXEL
DATA
AS
NORMAL
OPENGL
WILL
TAKE
THAT
DATA
AND
COMPRESS
IT
AS
ITS
READ
HOWEVER
IF
YOU
HAVE
TEXEL
DATA
THAT
HAS
BEEN
PROCESSED
OFFLINE
AND
IS
ALREADY
IN
ITS
COMPRESSED
FORM
YOU
NEED
TO
CALL
ONE
OF
THE
COMPRESSED
TEXTURE
IMAGE
SPECIFICATION
FUNCTIONS
TO
ESTABLISH
IMMUTABLE
STORAGE
FOR
THE
TEXTURE
USING
A
COMPRESSED
FORMAT
YOU
MAY
USE
THE
OR
FUNCTIONS
DESCRIBED
EARLIER
YOU
MAY
ALSO
CREATE
A
MUTABLE
STORE
FOR
THE
TEXTURE
USING
WHOSE
PROTOTYPES
ARE
SHOWN
BELOW
COMPRESSED
TEXTURES
WHEN
YOU
SPECIFY
COMPRESSED
DATA
THE
ABSOLUTE
SIZE
OF
THE
DATA
IS
DETERMINED
BY
THE
COMPRESSION
FORMAT
THEREFORE
ALL
OF
THE
COMPRESSED
IMAGE
DATA
FUNCTIONS
TAKE
A
PARAMETER
THAT
SPECIFIES
THIS
SIZE
IN
BYTES
IT
IS
YOUR
APPLICATION
RESPONSIBILITY
TO
MAKE
SURE
THAT
THIS
SIZE
IS
CORRECT
AND
THAT
THE
DATA
YOU
GIVE
TO
OPENGL
IS
OF
A
VALID
FORM
FOR
THE
COMPRESSION
FORMAT
THAT
YOU
HAVE
CHOSEN
ONCE
STORAGE
FOR
A
TEXTURE
OBJECT
HAS
BEEN
ESTABLISHED
IT
IS
ALSO
POSSIBLE
TO
UPDATE
PARTS
OF
THAT
TEXTURE
USING
THE
FOLLOWING
FUNCTIONS
CHAPTER
TEXTURES
FILTERING
TEXTURE
MAPS
MAY
BE
LINEAR
SQUARE
OR
RECTANGULAR
OR
EVEN
BUT
AFTER
BEING
MAPPED
TO
A
POLYGON
OR
SURFACE
AND
TRANSFORMED
INTO
SCREEN
COORDINATES
THE
INDIVIDUAL
TEXELS
OF
A
TEXTURE
RARELY
CORRESPOND
DIRECTLY
TO
INDIVIDUAL
PIXELS
OF
THE
FINAL
SCREEN
IMAGE
DEPENDING
ON
THE
TRANSFOR
MATIONS
USED
AND
THE
TEXTURE
MAPPING
APPLIED
A
SINGLE
PIXEL
ON
THE
SCREEN
CAN
CORRESPOND
TO
ANYTHING
FROM
A
TINY
PORTION
OF
A
SINGLE
TEXEL
MAGNIFICATION
TO
A
LARGE
COLLECTION
OF
TEXELS
MINIFICATION
AS
SHOWN
IN
FIGURE
IN
EITHER
CASE
IT
UNCLEAR
EXACTLY
WHICH
TEXEL
VALUES
SHOULD
BE
USED
AND
HOW
THEY
SHOULD
BE
AVERAGED
OR
INTERPOLATED
CONSEQUENTLY
OPENGL
ALLOWS
YOU
TO
SPECIFY
ANY
OF
SEVERAL
FILTERING
OPTIONS
TO
DETERMINE
THESE
CALCULATIONS
THE
OPTIONS
PROVIDE
DIFFERENT
TRADE
OFFS
BETWEEN
SPEED
AND
IMAGE
QUALITY
ALSO
YOU
CAN
SPECIFY
THE
FILTERING
METHODS
TO
BE
USED
FOR
MAGNIFICATION
AND
MINIFICATION
INDEPENDENTLY
IN
SOME
CASES
IT
ISN
T
OBVIOUS
WHETHER
MAGNIFICATION
OR
MINIFICATION
IS
CALLED
FOR
IF
THE
TEXTURE
MAP
NEEDS
TO
BE
STRETCHED
OR
SHRUNK
IN
BOTH
THE
X
AND
Y
DIRECTIONS
THEN
MAGNIFICATION
OR
MINIFICATION
IS
NEEDED
IF
FILTERING
FIGURE
EFFECT
OF
TEXTURE
MINIFICATION
AND
MAGNIFICATION
THE
TEXTURE
MAP
NEEDS
TO
BE
STRETCHED
IN
ONE
DIRECTION
AND
SHRUNK
IN
THE
OTHER
OPENGL
MAKES
A
CHOICE
BETWEEN
MAGNIFICATION
AND
THAT
IN
MOST
CASES
GIVES
THE
BEST
RESULT
POSSIBLE
IT
BEST
TO
TRY
TO
AVOID
THESE
SITUATIONS
BY
USING
TEXTURE
COORDINATES
THAT
MAP
WITHOUT
SUCH
DISTORTION
LINEAR
FILTERING
LINEAR
FILTERING
IS
A
TECHNIQUE
IN
WHICH
A
COORDINATE
IS
USED
TO
SELECT
ADJACENT
SAMPLES
FROM
A
DISCRETELY
SAMPLED
SIGNAL
AND
REPLACE
THAT
SIGNAL
WITH
A
LINEAR
APPROXIMATION
OF
THE
ORIGINAL
CONSIDER
THE
SIGNAL
SHOWN
IN
FIGURE
FIGURE
RESAMPLING
OF
A
SIGNAL
IN
ONE
DIMENSION
IN
FIGURE
THE
SIGNAL
REPRESENTED
BY
THE
SOLID
LINE
HAS
BEEN
DISCRETELY
SAMPLED
AT
THE
POINTS
SHOWN
BY
THE
LARGE
DOTS
THE
ORIGINAL
SIGNAL
CANNOT
BE
RECONSTRUCTED
BY
PLACING
A
STRAIGHT
LINE
BETWEEN
EACH
OF
THE
DOTS
IN
SOME
AREAS
OF
THE
SIGNAL
THE
LINEAR
RECONSTRUCTION
MATCHES
THE
ORIGINAL
SIGNAL
REASONABLY
WELL
HOWEVER
IN
OTHER
AREAS
THE
RECONSTRUCTION
IS
NOT
FAITHFUL
TO
THE
ORIGINAL
AND
SHARP
PEAKS
THAT
WERE
PRESENT
BEFORE
RESAMPLING
ARE
LOST
WHEN
A
TEXTURE
IS
ENLARGED
BY
DIFFERENT
AMOUNTS
IN
THE
HORIZONTAL
AND
VERTICAL
AXES
THIS
IS
REFERRED
TO
AS
ANISOTROPIC
FILTERING
THIS
IS
EXPOSED
BY
SOME
OPENGL
IMPLEMENTATIONS
IN
THE
FORM
OF
AN
EXTENSION
HOWEVER
THIS
IS
NOT
PART
OF
CORE
OPENGL
CHAPTER
TEXTURES
FOR
IMAGE
DATA
THE
SAME
TECHNIQUE
CAN
BE
APPLIED
SO
LONG
AS
THE
SAMPLING
RATE
RESOLUTION
OF
THE
TEXTURE
IS
HIGH
ENOUGH
RELATIVE
TO
THE
SHARP
PEAKS
IN
THE
IMAGE
DATA
DETAILS
A
LINEAR
RECONSTRUCTION
OF
THE
IMAGE
WILL
APPEAR
TO
HAVE
REASONABLY
HIGH
QUALITY
THE
TRANSLATION
FROM
A
SIGNAL
AS
SHOWN
IN
FIGURE
INTO
A
TEXTURE
IS
EASY
TO
CONCEIVE
WHEN
A
TEXTURE
IS
CONSIDERED
SIMPLY
PLACE
THE
SAMPLES
INTO
A
TEXTURE
AND
RECONSTRUCT
THE
ORIGINAL
IMAGE
FROM
THOSE
SAMPLES
AS
NEEDED
TO
DO
THIS
OPENGL
TAKES
THE
TEXTURE
COORDINATE
THAT
YOU
PASS
IT
AS
A
FLOATING
POINT
NUMBER
AND
FINDS
THE
TWO
SAMPLES
THAT
LIE
CLOSEST
TO
IT
IT
USES
THE
DISTANCE
TO
EACH
OF
THOSE
TWO
POINTS
TO
CREATE
WEIGHTS
FOR
EACH
OF
THE
SAMPLES
AND
THEN
USES
THOSE
WEIGHTS
TO
CREATE
A
WEIGHTED
AVERAGE
OF
THEM
BECAUSE
LINEAR
RESAMPLING
IS
OPENGL
CAN
APPLY
THIS
TECHNIQUE
FIRST
IN
ONE
DIMENSION
AND
THEN
AGAIN
IN
A
SECOND
DIMENSION
IN
ORDER
TO
RECONSTRUCT
IMAGES
AND
EVEN
A
THIRD
TIME
FOR
TEXTURES
FIGURE
ILLUSTRATES
THE
PROCESS
AS
APPLIED
TO
A
IMAGE
FIGURE
BILINEAR
RESAMPLING
A
SEPARABLE
OPERATION
IS
ONE
THAT
CAN
BE
DECONSTRUCTED
INTO
TWO
OR
MORE
USUALLY
SIMILAR
PASSES
OVER
THE
DATA
IN
THIS
CASE
WE
CAN
APPLY
ONE
PASS
PER
DIMENSION
OF
THE
IMAGE
DATA
FILTERING
NOT
ONLY
CAN
LINEAR
FILTERING
BE
USED
TO
SMOOTHLY
TRANSITION
FROM
ONE
SAMPLE
TO
THE
ADJACENT
ONES
IN
AND
TEXTURES
IT
CAN
ALSO
BE
USED
TO
BLEND
TEXELS
SAMPLED
FROM
ADJACENT
MIPMAP
LEVELS
IN
A
TEXTURE
THIS
WORKS
IN
A
VERY
SIMILAR
MANNER
TO
THAT
DESCRIBED
ABOVE
OPENGL
CALCULATES
THE
MIPMAP
LEVEL
FROM
WHICH
IT
NEEDS
TO
SELECT
SAMPLES
AND
THE
RESULT
OF
THIS
CALCULATION
WILL
OFTEN
BE
A
FLOATING
POINT
VALUE
WITH
A
FRACTIONAL
COMPONENT
THIS
IS
USED
JUST
AS
A
FRACTIONAL
TEXTURE
COORDINATE
IS
USED
TO
FILTER
SPATIALLY
ADJACENT
TEXELS
THE
TWO
CLOSEST
MIPMAPS
ARE
USED
TO
CONSTRUCT
A
PAIR
OF
SAMPLES
AND
THE
FRACTIONAL
PART
OF
THE
LEVEL
OF
DETAIL
CALCULATION
IS
USED
TO
WEIGHT
THE
TWO
SAMPLES
INTO
AN
AVERAGE
ALL
OF
THESE
FILTERING
OPTIONS
ARE
CONTROLLED
BY
THE
TEXTURE
FILTER
MODES
IN
OPENGL
SAMPLER
OBJECTS
AS
EXPLAINED
IN
SAMPLER
OBJECTS
ON
PAGE
THE
SAMPLER
OBJECT
REPRESENTS
A
COLLECTION
OF
PARAMETERS
THAT
CONTROL
HOW
TEXELS
ARE
READ
FROM
TEXTURES
TWO
OF
THOSE
PARAMETERS
AND
CONTROL
HOW
OPENGL
FILTERS
TEXTURES
THE
FIRST
IS
USED
WHEN
THE
TEXTURE
IS
MAGNIFIED
THAT
IS
WHEN
THE
LEVEL
OF
DETAIL
REQUIRED
IS
OF
A
HIGHER
RESOLUTION
THAN
THE
HIGHEST
RESOLUTION
MIPMIP
LEVEL
BY
DEFAULT
LEVEL
AND
REPRESENTS
CASES
WHERE
THE
MIPMIP
CALCULATION
PRODUCES
A
LEVEL
LESS
THAN
OR
EQUAL
TO
ZERO
BECAUSE
UNDER
MAGNIFICATION
ONLY
ONE
MIPMAP
LEVEL
IS
USED
ONLY
TWO
CHOICES
ARE
AVAILABLE
FOR
THESE
ARE
AND
THE
FIRST
DISABLES
FILTERING
AND
RETURNS
THE
NEAREST
TEXEL
TO
THE
SAMPLE
LOCATION
THE
SECOND
ENABLES
LINEAR
FILTERING
TEXTURE
MINIFICATION
IS
WHERE
MIPMAPPING
TAKES
EFFECT
AND
THIS
IS
EXPLAINED
IN
SOME
DETAIL
IN
THE
FOLLOWING
SECTIONS
ADVANCED
FROM
A
SIGNALING
THEORY
PERSPECTIVE
A
TEXTURE
NEEDS
TO
SAMPLE
THE
ORIGINAL
SIGNAL
AT
AT
LEAST
TWICE
THE
FREQUENCY
OF
THE
HIGHEST
FREQUENCY
DATA
PRESENT
THE
ORIGINAL
SHOULD
BE
LOW
PASS
FILTERED
TO
SOME
FREQUENCY
THEN
SAMPLED
AT
GREATER
THAN
TWICE
THAT
FREQUENCY
THIS
GIVES
ENOUGH
SAMPLES
TO
EXACTLY
RECONSTRUCT
THE
ORIGINAL
IMAGE
HOWEVER
LINEAR
FILTERING
FAILS
TO
DO
THIS
RECONSTRUCTION
AND
CAN
LEAD
TO
ALIASING
ALSO
IF
THE
ORIGINAL
FILTERING
AND
SAMPLING
ARE
NOT
DONE
ALIASING
AND
OTHER
ARTIFACTS
CAN
OCCUR
THIS
IS
DISCUSSED
IN
MORE
DETAIL
IN
CHAPTER
PROCEDURAL
TEXTURING
AND
MIPMAPPING
AS
ONE
TECHNIQUE
FOR
DEALING
WITH
IT
IS
DESCRIBED
BELOW
YOU
CAN
ALSO
DO
CUSTOM
FILTERING
USING
TEXTURE
GATHERS
TO
IMPROVE
OVER
THE
ARTIFACTS
OF
LINEAR
FILTERING
GATHERING
TEXELS
IS
DISCUSSED
LATER
IN
THIS
CHAPTER
CHAPTER
TEXTURES
USING
AND
GENERATING
MIPMAPS
TEXTURED
OBJECTS
CAN
BE
VIEWED
LIKE
ANY
OTHER
OBJECTS
IN
A
SCENE
AT
DIFFERENT
DISTANCES
FROM
THE
VIEWPOINT
IN
A
DYNAMIC
SCENE
AS
A
TEXTURED
OBJECT
MOVES
FARTHER
FROM
THE
VIEWPOINT
THE
RATIO
OF
PIXELS
TO
TEXELS
IN
THE
TEXTURE
BECOMES
VERY
LOW
AND
THE
TEXTURE
ENDS
UP
BEING
SAMPLED
AT
A
VERY
LOW
RATE
THIS
HAS
THE
EFFECT
OF
PRODUCING
ARTIFACTS
IN
THE
RENDERED
IMAGE
DUE
TO
UNDERSAMPLING
OF
THE
TEXTURE
DATA
FOR
EXAMPLE
TO
RENDER
A
BRICK
WALL
YOU
MAY
USE
A
LARGE
TEXTURE
IMAGE
SAY
1024
TEXELS
WHEN
THE
WALL
IS
CLOSE
TO
THE
VIEWER
BUT
IF
THE
WALL
IS
MOVED
FARTHER
AWAY
FROM
THE
VIEWER
UNTIL
IT
APPEARS
ON
THE
SCREEN
AS
A
SINGLE
PIXEL
THEN
THE
SAMPLED
TEXTURE
MAY
APPEAR
TO
CHANGE
ABRUPTLY
AT
CERTAIN
TRANSITION
POINTS
TO
REDUCE
THIS
EFFECT
WE
CAN
PRE
FILTER
THE
TEXTURE
MAP
AND
STORE
THE
PRE
FILTERED
IMAGES
AS
SUCCESSIVELY
LOWER
AND
LOWER
RESOLUTION
VERSIONS
OF
THE
FULL
RESOLUTION
IMAGE
THESE
ARE
CALLED
MIPMAPS
AND
ARE
SHOWN
IN
FIGURE
THE
TERM
MIPMAP
WAS
COINED
BY
LANCE
WILLIAMS
WHEN
HE
INTRODUCED
THE
IDEA
IN
HIS
PAPER
PYRAMIDAL
PARAMETRICS
SIGGRAPH
PROCEEDINGS
MIP
STANDS
FOR
THE
LATIN
MULTUM
IN
PARVO
MEANING
MANY
THINGS
IN
A
SMALL
PLACE
MIPMAPPING
USES
SOME
CLEVER
METHODS
TO
PACK
IMAGE
DATA
INTO
MEMORY
WHEN
USING
MIPMAPPING
OPENGL
AUTOMATICALLY
DETERMINES
WHICH
RESOLUTION
LEVEL
OF
THE
TEXTURE
MAP
TO
USE
BASED
ON
THE
SIZE
IN
PIXELS
OF
THE
OBJECT
BEING
MAPPED
WITH
THIS
APPROACH
THE
LEVEL
OF
DETAIL
IN
THE
TEXTURE
MAP
IS
APPROPRIATE
FOR
THE
IMAGE
THAT
DRAWN
ON
THE
SCREEN
AS
THE
IMAGE
OF
THE
OBJECT
GETS
SMALLER
THE
SIZE
OF
THE
TEXTURE
MAP
DECREASES
MIPMAPPING
REQUIRES
SOME
EXTRA
COMPUTATION
AND
TEXTURE
STORAGE
AREA
HOWEVER
WHEN
IT
NOT
USED
TEXTURES
THAT
ARE
MAPPED
ONTO
SMALLER
OBJECTS
MIGHT
SHIMMER
AND
FLASH
AS
THE
OBJECTS
MOVE
THIS
DESCRIPTION
OF
OPENGL
MIPMAPPING
AVOIDS
DETAILED
DISCUSSION
OF
THE
SCALE
FACTOR
KNOWN
AS
Λ
BETWEEN
TEXEL
SIZE
AND
POLYGON
SIZE
THIS
DESCRIPTION
ALSO
ASSUMES
DEFAULT
VALUES
FOR
PARAMETERS
RELATED
TO
MIPMAPPING
TO
SEE
AN
EXPLANATION
OF
Λ
AND
THE
EFFECTS
OF
MIPMAPPING
PARAMETERS
SEE
CALCULATING
THE
MIPMAP
LEVEL
ON
PAGE
ADDITIONAL
DETAILS
ON
CONTROLLING
Λ
FROM
YOUR
APPLICATION
CAN
BE
FOUND
IN
MIPMAP
LEVEL
OF
DETAIL
CONTROL
ON
PAGE
FILTERING
FIGURE
A
PRE
FILTERED
MIPMAP
PYRAMID
THE
PARAMETER
CONTROLS
HOW
TEXELS
ARE
CONSTRUCTED
WHEN
THE
MIPMAP
LEVEL
IS
GREATER
THAN
ZERO
THERE
ARE
A
TOTAL
OF
SIX
SETTINGS
AVAILABLE
FOR
THIS
PARAMETER
THE
FIRST
TWO
ARE
THE
SAME
AS
FOR
MAGNIFICATION
AND
CHOOSING
ONE
OF
THESE
TWO
MODES
DISABLES
MIPMAPPING
AND
CAUSES
OPENGL
TO
ONLY
USE
THE
BASE
LEVEL
LEVEL
OF
THE
TEXTURE
THE
OTHER
FOUR
MODES
ENABLE
MIPMAPPING
AND
CONTROL
HOW
THE
MIPMAPS
ARE
USED
THE
FOUR
VALUES
ARE
AND
NOTICE
HOW
EACH
MODE
IS
MADE
UP
OF
TWO
PARTS
AND
THE
TOKEN
NAMES
ARE
STRUCTURED
AS
A
B
HERE
A
AND
B
MAY
BOTH
BE
EITHER
CHAPTER
TEXTURES
NEAREST
OR
LINEAR
THE
FIRST
PART
A
CONTROLS
HOW
THE
TEXELS
FROM
EACH
OF
THE
MIPMAP
LEVELS
IS
CONSTRUCTED
AND
WORKS
THE
SAME
WAY
AS
THE
SETTING
THE
SECOND
B
CONTROLS
HOW
THESE
SAMPLES
ARE
BLENDED
BETWEEN
THE
MIPMAP
LEVELS
WHEN
IT
NEAREST
ONLY
THE
CLOSEST
MIPMAP
LEVEL
IS
USED
WHEN
IT
LINEAR
THE
TWO
CLOSEST
MIPMAPS
ARE
LINEARLY
INTERPOLATED
TO
ILLUSTRATE
THE
EFFECT
OF
THE
PARAMETER
ON
A
MIPMAPPED
TEXTURE
FIGURE
SHOWS
HOW
EACH
AFFECTS
A
SIMPLE
CHECKER
TYPE
PATTERN
AT
DIFFERENT
RESOLUTIONS
IN
A
MIPMAP
PYRAMID
NOTICE
HOW
WITH
THE
INTRA
MIPMAP
FILTER
SPECIFIED
AS
NEAREST
AS
IN
AND
THE
CHECKERBOARD
PATTERN
BECOMES
QUITE
EVIDENT
WHEREAS
WHEN
IT
IS
LINEAR
AS
IN
AND
IT
IS
LESS
WELL
DEFINED
AND
THE
TEXTURE
APPEARS
BLURRED
LIKEWISE
WHEN
THE
INTER
MIPMAP
FILTER
MODE
IS
NEAREST
AS
IN
NEAREST
AND
THE
BOUNDARY
BETWEEN
THE
MIPMAP
LEVELS
IS
VISIBLE
HOWEVER
WHEN
THE
INTER
MIPMAP
FILTER
IS
LINEAR
AS
IN
AND
THAT
BOUNDARY
IS
HIDDEN
BY
FILTERING
FIGURE
EFFECTS
OF
MINIFICATION
MIPMAP
FILTERS
TOP
LEFT
NEAREST
TOP
RIGHT
BOTTOM
LEFT
AND
BOTTOM
RIGHT
FILTERING
TO
USE
MIPMAPPING
YOU
MUST
PROVIDE
ALL
SIZES
OF
YOUR
TEXTURE
IN
POWERS
OF
BETWEEN
THE
LARGEST
SIZE
AND
A
MAP
IF
YOU
DON
T
INTEND
TO
USE
MIPMAPPING
TO
GO
ALL
THE
WAY
TO
A
TEXTURE
YOU
CAN
SET
THE
VALUE
OF
TO
THE
MAXIMUM
LEVEL
YOU
HAVE
SUPPLIED
AND
OPENGL
WILL
NOT
CONSIDER
ANY
FURTHER
LEVELS
IN
ITS
EVALUATION
OF
TEXTURE
COMPLETENESS
IF
THE
HIGHEST
RESOLUTION
LEVEL
OF
THE
TEXTURE
IS
NOT
SQUARE
ONE
DIMENSION
WILL
REACH
ONE
TEXEL
IN
SIZE
BEFORE
THE
OTHER
IN
THIS
CASE
CONTINUE
MAKING
NEW
LEVELS
WITH
THAT
DIMENSION
SIZED
TO
ONE
TEXEL
UNTIL
THE
LEVEL
BECOMES
TEXEL
IN
SIZE
FOR
EXAMPLE
IF
YOUR
HIGHEST
RESOLUTION
MAP
IS
YOU
MUST
ALSO
PROVIDE
MAPS
OF
SIZE
AND
THE
SMALLER
MAPS
ARE
TYPICALLY
FILTERED
AND
DOWN
SAMPLED
VERSIONS
OF
THE
LARGEST
MAP
IN
WHICH
EACH
TEXEL
IN
A
SMALLER
TEXTURE
IS
A
WEIGHTED
AVERAGE
OF
THE
CORRESPONDING
TEXELS
IN
THE
HIGHER
RESOLUTION
TEXTURE
SINCE
OPENGL
DOESN
T
REQUIRE
ANY
PARTICULAR
METHOD
FOR
CALCULATING
THE
LOWER
RESOLUTION
MAPS
THE
DIFFERENTLY
SIZED
TEXTURES
COULD
BE
TOTALLY
UNRELATED
IN
PRACTICE
UNRELATED
TEXTURES
WOULD
MAKE
THE
TRANSITIONS
BETWEEN
MIPMAPS
EXTREMELY
NOTICEABLE
AS
IN
FIGURE
FIGURE
ILLUSTRATION
OF
MIPMAPS
USING
UNRELATED
COLORS
THE
IMAGE
IN
FIGURE
WAS
GENERATED
BY
CREATING
A
TEXTURE
AND
FILLING
EACH
OF
ITS
MIPMAP
LEVELS
WITH
A
DIFFERENT
COLOR
THE
HIGHEST
RESOLUTION
LEVEL
WAS
FILLED
WITH
RED
THEN
GREEN
BLUE
YELLOW
AND
SO
ON
CHAPTER
TEXTURES
DOWN
THE
MIPMAP
PYRAMID
THIS
TEXTURE
WAS
APPLIED
TO
A
LARGE
PLANE
EXTENDING
INTO
THE
DISTANCE
THE
FURTHER
THE
PLANE
GETS
FROM
THE
VIEWER
THE
NARROWER
IT
BECOMES
IN
SCREEN
SPACE
AND
THE
MORE
COMPRESSED
THE
TEXTURE
BECOMES
OPENGL
CHOOSES
SUCCESSIVELY
HIGHER
MIPMAP
LEVELS
LOWER
RESOLUTION
LEVELS
FROM
THE
TEXTURE
TO
FURTHER
ILLUSTRATE
THE
EFFECT
THE
EXAMPLE
SETS
THE
MIPMAP
FILTERING
MODE
TO
NEAREST
AND
APPLIES
A
BIAS
TO
THE
CALCULATED
MIPMAP
LEVEL
TO
SPECIFY
THESE
TEXTURES
ALLOCATE
THE
TEXTURE
USING
AND
THEN
CALL
ONCE
FOR
EACH
RESOLUTION
OF
THE
TEXTURE
MAP
WITH
DIFFERENT
VALUES
FOR
THE
LEVEL
WIDTH
HEIGHT
AND
IMAGE
PARAMETERS
STARTING
WITH
ZERO
LEVEL
IDENTIFIES
WHICH
TEXTURE
IN
THE
SERIES
IS
SPECIFIED
WITH
THE
PREVIOUS
EXAMPLE
THE
HIGHEST
RESOLUTION
TEXTURE
OF
SIZE
WOULD
BE
DECLARED
WITH
LEVEL
THE
TEXTURE
WITH
LEVEL
AND
SO
ON
IN
ADDITION
FOR
THE
MIPMAPPED
TEXTURES
TO
TAKE
EFFECT
YOU
NEED
TO
CHOOSE
ONE
OF
THE
MIPMAPPED
MINIFICATION
FILTERS
AS
DESCRIBED
EARLIER
OPENGL
PROVIDES
A
FUNCTION
TO
AUTOMATICALLY
GENERATE
ALL
OF
THE
MIPMAPS
FOR
A
TEXTURE
UNDER
APPLICATION
CONTROL
THIS
FUNCTION
IS
CALLED
GLGENERATEMIPMAP
AND
IT
IS
UP
TO
THE
OPENGL
IMPLEMENTATION
TO
PROVIDE
A
MECHANISM
TO
DOWNSAMPLE
THE
HIGH
RESOLUTION
IMAGES
TO
PRODUCE
THE
LOWER
RESOLUTION
MIPMAPS
THIS
WILL
OFTEN
BE
IMPLEMENTED
INTERNALLY
BY
USING
A
SHADER
OR
PERHAPS
THE
TEXTURE
FILTERING
HARDWARE
THE
TECHNIQUE
USED
WILL
GENERALLY
BE
DESIGNED
FOR
PERFORMANCE
OVER
QUALITY
AND
WILL
VARY
FROM
IMPLEMENTATION
TO
IMPLEMENTATION
IF
YOU
WANT
HIGH
QUALITY
WELL
DEFINED
RESULTS
IT
IS
BEST
TO
GENERATE
AND
SUPPLY
THE
MIPMAP
IMAGES
YOURSELF
HOWEVER
IF
YOU
NEED
TO
QUICKLY
GENERATE
A
MIPMAP
CHAIN
AND
ARE
SATISFIED
WITH
WHATEVER
RESULTS
YOU
GET
YOU
CAN
RELY
ON
GLGENERATEMIPMAP
FOR
THIS
PURPOSE
FILTERING
CALCULATING
THE
MIPMAP
LEVEL
THE
COMPUTATION
OF
WHICH
MIPMAP
LEVEL
OF
A
TEXTURE
TO
USE
FOR
A
PARTICULAR
PIXEL
DEPENDS
ON
THE
SCALE
FACTOR
BETWEEN
THE
TEXTURE
IMAGE
AND
THE
SIZE
OF
THE
POLYGON
TO
BE
TEXTURED
IN
PIXELS
LET
CALL
THIS
SCALE
FACTOR
Ρ
AND
ALSO
DEFINE
A
SECOND
VALUE
Λ
WHERE
Λ
Ρ
LODBIAS
SINCE
TEXTURE
IMAGES
CAN
BE
MULTIDIMENSIONAL
IT
IS
IMPORTANT
TO
CLARIFY
THAT
Ρ
IS
THE
MAXIMUM
SCALE
FACTOR
OF
ALL
DIMENSIONS
LODBIAS
IS
THE
LEVEL
OF
DETAIL
BIAS
FOR
THE
SAMPLER
A
CONSTANT
VALUE
SET
BY
CALLING
GLSAMPLERPARAMETERI
WITH
THE
PNAME
PARAMETER
SET
TO
AND
IS
USED
TO
ADJUST
Λ
BY
DEFAULT
LODBIAS
WHICH
HAS
NO
EFFECT
IT
BEST
TO
START
WITH
THIS
DEFAULT
VALUE
AND
ADJUST
IN
SMALL
AMOUNTS
IF
NEEDED
IF
Λ
THEN
THE
TEXEL
IS
SMALLER
THAN
THE
PIXEL
AND
SO
A
MAGNIFICATION
FILTER
IS
USED
IF
Λ
THEN
A
MINIFICATION
FILTER
IS
USED
IF
THE
MINIFICATION
FILTER
SELECTED
USES
MIPMAPPING
THEN
Λ
INDICATES
THE
MIPMAP
LEVEL
THE
MINIFICATION
TO
MAGNIFICATION
SWITCHOVER
POINT
IS
USUALLY
AT
Λ
BUT
NOT
ALWAYS
THE
CHOICE
OF
MIPMAPPING
FILTER
MAY
SHIFT
THE
SWITCHOVER
POINT
FOR
EXAMPLE
IF
THE
TEXTURE
IMAGE
IS
TEXELS
AND
THE
POLYGON
SIZE
IS
PIXELS
THEN
Ρ
NOT
AND
THEREFORE
Λ
IF
THE
TEXTURE
IMAGE
IS
TEXELS
AND
THE
POLYGON
SIZE
IS
PIXELS
THEN
Ρ
X
SCALES
BY
Y
BY
USE
THE
MAXIMUM
VALUE
AND
THEREFORE
Λ
THE
EQUATIONS
FOR
THE
CALCULATION
OF
Λ
AND
Ρ
ARE
AS
FOLLOWS
ΛBASE
X
Y
Ρ
X
Y
ΛI
X
Y
ΛBASE
CLAMP
BIASTEXOBJ
BIASSHADER
THE
CALCULATION
OF
MIPMAP
LEVEL
CAN
BE
FURTHER
CONTROLLED
BY
A
NUMBER
OF
SAMPLER
PARAMETERS
IN
PARTICULAR
THE
PARAMETER
MAY
BE
USED
TO
BIAS
Λ
ONCE
Λ
HAS
BEEN
CALCULATED
IT
MAY
BE
CLAMPED
INTO
A
USER
SPECIFIED
RANGE
WHICH
IS
GIVEN
BY
THE
PARAMETERS
AND
WHICH
ARE
SPECIFIED
BY
PASSING
THOSE
TOKEN
VALUES
TO
GLSAMPLERPARAMETERF
OR
TO
GLTEXPARAMETERF
IF
SAMPLER
OBJECTS
ARE
NOT
IN
USE
THE
DEFAULT
VALUES
FOR
AND
ARE
AND
RESPECTIVELY
ALLOWING
THEM
TO
EFFECTIVELY
PASS
THROUGH
ANY
VALUE
THE
VALUES
OF
AND
ARE
REPRESENTED
BY
LODMIN
AND
LODMAX
IN
THE
FOLLOWING
EQUATION
Λ
LODMAX
ΛI
LODMAX
ΛI
LODMIN
ΛI
LODMAX
LODMIN
ΛI
LODMIN
CHAPTER
TEXTURES
THE
DEFAULT
PARAMETERS
FOR
FILTER
AND
ARE
AND
RESPECTIVELY
NOTICE
THAT
THE
DEFAULT
MINIFICATION
FILTER
ENABLES
MIPMAPPING
THIS
IS
IMPORTANT
BECAUSE
IN
ORDER
TO
USE
MIPMAPPING
THE
TEXTURE
MUST
HAVE
A
COMPLETE
SET
OF
MIPMAP
LEVELS
AND
THEY
MUST
HAVE
A
CON
SISTENT
SET
OF
RESOLUTIONS
AS
DESCRIBED
IN
USING
AND
GENERATING
MIPMAPS
ON
PAGE
OTHERWISE
THE
TEXTURE
IS
CONSIDERED
IN
COMPLETE
AND
WILL
NOT
RETURN
USEFUL
DATA
TO
THE
SHADER
TEXTURES
ALLOCATED
USING
THE
FUNCTION
ARE
ALWAYS
COM
PLETE
SO
YOU
DON
T
NEED
TO
WORRY
ABOUT
THAT
BUT
THESE
TEXTURES
WILL
STILL
CONTAIN
NO
DATA
WHEN
THEY
ARE
NEWLY
CREATED
THIS
IS
A
COMMON
SOURCE
OF
ERRORS
FOR
NEW
OPENGL
PROGRAMMERS
THEY
FORGET
TO
EITHER
CHANGE
THE
FILTERING
MODE
OR
FILL
IN
THE
MIPMAPS
FOR
NEWLY
CREATED
TEXTURES
RESULTING
IN
THEIR
TEXTURING
CODE
NOT
WORKING
MIPMAP
LEVEL
OF
DETAIL
CONTROL
IN
ADDITION
TO
THE
PARAMETERS
CONTROLLING
LODMIN
LODMAX
AND
ΛBASE
DURING
THE
CALCULATION
OF
Λ
FURTHER
CONTROL
OVER
THE
SELECTED
LEVEL
OF
THE
MIPMAP
PYRAMID
IS
PROVIDED
THROUGH
THE
AND
PARAMETERS
WHICH
MAY
BE
SET
USING
GLSAMPLERPARAMETERI
SPECIFIES
THE
LOWEST
MIPMAP
LEVEL
I
E
HIGHEST
RESOLUTION
THAT
WILL
BE
SAMPLED
REGARDLESS
OF
THE
VALUE
OF
Λ
WHEREAS
SPECIFIES
THE
HIGHEST
MIPMAP
LEVEL
I
E
LOWEST
RESOLUTION
THAT
WILL
BE
SAMPLED
THIS
CAN
BE
USED
TO
CONSTRAIN
SAMPLING
TO
A
SUBSET
OF
THE
MIPMAP
PYRAMID
ONE
POTENTIAL
USE
FOR
IS
TEXTURE
STREAMING
WHEN
USING
TEXTURE
STREAMING
STORAGE
FOR
THE
COMPLETE
TEXTURE
OBJECT
IS
ALLOCATED
USING
A
FUNCTION
SUCH
AS
BUT
THE
INITIAL
DATA
IS
NOT
LOADED
AS
THE
APPLICATION
RUNS
AND
NEW
OBJECTS
COME
INTO
VIEW
THEIR
TEXTURE
DATA
IS
LOADED
FROM
LOWEST
TO
HIGHEST
RESOLUTION
MIPMAP
TO
ENSURE
THAT
SOMETHING
MEANINGFUL
IS
DISPLAYED
TO
THE
USER
EVEN
WHEN
THE
COMPLETE
TEXTURE
HAS
NOT
YET
BEEN
LOADED
THE
VALUE
OF
CAN
BE
SET
TO
THE
HIGHEST
RESOLUTION
MIPMAP
LEVEL
THAT
HAS
BEEN
LOADED
SO
FAR
THAT
WAY
AS
MORE
AND
MORE
TEXTURE
DATA
IS
LOADED
OBJECTS
ON
THE
SCREEN
ACHIEVE
HIGHER
AND
HIGHER
FIDELITY
FILTERING
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
IN
ADDITION
TO
SIMPLE
TEXTURING
FUNCTIONS
SUCH
AS
TEXTURE
AND
TEXELFETCH
SEVERAL
MORE
VARIANTS
OF
THE
TEXTURE
FETCH
FUNCTIONS
ARE
SUPPORTED
BY
THE
SHADING
LANGUAGE
THESE
ARE
COVERED
IN
THIS
SUBSECTION
EXPLICIT
LEVEL
OF
DETAIL
NORMALLY
WHEN
USING
MIPMAPS
OPENGL
WILL
CALCULATE
THE
LEVEL
OF
DETAIL
AND
THE
RESULTING
MIPMAP
LEVELS
FROM
WHICH
TO
SAMPLE
FOR
YOU
SEE
CALCULATING
THE
MIPMAP
LEVEL
ON
PAGE
FOR
MORE
DETAILS
ON
HOW
OPENGL
CALCULATES
MIPMAP
LEVELS
HOWEVER
IT
IS
POSSIBLE
TO
OVERRIDE
THIS
CALCULATION
AND
SPECIFY
THE
LEVEL
OF
DETAIL
EXPLICITLY
AS
AN
ARGUMENT
TO
THE
TEXTURE
FETCH
FUNCTION
THE
TEXTURELOD
FUNCTION
TAKES
THIS
LOD
PARAMETER
IN
PLACE
OF
THE
BIAS
PARAMETER
THAT
WOULD
NORMALLY
BE
OPTIONALLY
SUPPLIED
TO
THE
TEXTURE
FUNCTION
LIKE
OTHER
TEXTURE
FUNCTIONS
SUPPORTED
BY
GLSL
TEXTURELOD
HAS
MANY
OVERLOADED
PROTOTYPES
FOR
THE
VARIOUS
TYPES
AND
DIMENSIONALITIES
OF
THE
SUPPORTED
SAMPLER
TYPES
SOME
KEY
PROTOTYPES
OF
TEXTURELOD
ARE
AS
FOLLOWS
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
NOTICE
THAT
BECAUSE
THEY
DON
T
SUPPORT
MIPMAPS
SAMPLERBUFFER
AND
SAMPLERRECT
ARE
MISSING
FROM
THE
SUPPORTED
SAMPLER
TYPES
FOR
TEXTURELOD
EXPLICIT
GRADIENT
SPECIFICATION
IT
IS
ALSO
POSSIBLE
TO
OVERRIDE
THE
LEVEL
OF
DETAIL
CALCULATION
FOR
MIPMAPPING
AT
AN
EARLIER
PART
OF
THE
PROCESS
RATHER
THAN
EXPLICITLY
GIVING
THE
LEVEL
OF
DETAIL
PARAMETER
DIRECTLY
WHEN
THE
GRADIENT
TEXTURE
FUNCTIONS
ARE
USED
CHAPTER
TEXTURES
THE
PARTIAL
DERIVATIVE
OF
THE
TEXTURE
COORDINATES
IS
GIVEN
AS
A
PARAMETER
SOME
KEY
PROTOTYPES
ARE
LISTED
BELOW
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
IN
THE
TEXTUREGRAD
FUNCTIONS
THE
VARIABLE
Ρ
AS
DESCRIBED
IN
CALCULATING
THE
MIPMAP
LEVEL
ON
PAGE
IS
ESSENTIALLY
PASSED
IN
USING
DPDX
AND
DPDY
THIS
CAN
BE
USEFUL
WHEN
AN
ANALYTIC
FUNCTION
FOR
THE
DERIVATIVE
OF
A
TEXTURE
COORDINATE
MAY
BE
KNOWN
OR
WHEN
A
FUNCTION
THAT
IS
NOT
THE
DERIVATIVE
OF
THE
TEXTURE
COORDINATE
IS
REQUIRED
TEXTURE
FETCH
WITH
OFFSETS
SOME
APPLICATIONS
REQUIRE
A
NUMBER
OF
TEXELS
AROUND
A
REGION
OF
INTEREST
OR
MAY
NEED
TO
OFFSET
THE
TEXTURE
COORDINATES
SLIGHTLY
DURING
SAMPLING
GLSL
INCLUDES
FUNCTIONS
FOR
DOING
THIS
THAT
WILL
LIKELY
BE
MORE
EFFICIENT
THAN
PHYSICALLY
OFFSETTING
THE
TEXTURE
COORDINATES
IN
THE
SHADER
THIS
FUNCTIONALITY
IS
EXPOSED
THROUGH
AN
OVERLOADED
SET
OF
TEXTURE
LOOKUP
FUNCTIONS
CALLED
TEXTUREOFFSET
WITH
SOME
EXAMPLE
PROTOTYPES
AS
FOLLOWS
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
NOTICE
THAT
FOR
THE
TEXTUREOFFSET
FUNCTION
THE
OFFSET
PARAMETER
IS
AN
INTEGER
VALUE
IN
FACT
THIS
MUST
BE
A
CONSTANT
EXPRESSION
AND
MUST
BE
WITH
A
LIMITED
RANGE
THIS
RANGE
IS
GIVEN
BY
THE
BUILT
IN
GLSL
CONSTANTS
AND
PROJECTIVE
TEXTURING
PROJECTIVE
TEXTURING
IS
EMPLOYED
WHEN
A
PERSPECTIVE
TRANSFORMATION
MATRIX
HAS
BEEN
USED
TO
TRANSFORM
TEXTURE
COORDINATES
THE
INPUT
TO
THE
TRANSFORM
IS
A
SET
OF
HOMOGENEOUS
COORDINATES
AND
THE
RESULTING
OUTPUT
OF
THIS
TRANSFORM
IS
A
VECTOR
WHOSE
LAST
COMPONENT
IS
UNLIKELY
TO
BE
THE
TEXTUREPROJ
FUNCTION
CAN
BE
USED
TO
DIVIDE
THROUGH
BY
THIS
FINAL
COMPONENT
PROJECTING
THE
RESULTING
TEXTURE
COORDINATE
INTO
THE
COORDINATE
SPACE
OF
THE
TEXTURE
THIS
IS
USEFUL
FOR
TECHNIQUES
SUCH
AS
PROJECTING
DECALS
ONTO
FLAT
SURFACES
E
G
THE
HALO
PROJECTED
BY
A
FLASHLIGHT
OR
IN
SHADOW
SOME
EXAMPLE
PROTOTYPES
ARE
GIVEN
BELOW
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
AN
IN
DEPTH
EXAMPLE
OF
SHADOW
MAPPING
IS
GIVEN
IN
SHADOW
MAPPING
ON
PAGE
CHAPTER
TEXTURES
TEXTURE
QUERIES
IN
SHADERS
THE
FOLLOWING
TWO
BUILT
IN
GLSL
FUNCTIONS
DON
T
ACTUALLY
READ
FROM
THE
TEXTURE
BUT
RETURN
INFORMATION
ABOUT
THE
TEXTURE
OR
ABOUT
HOW
IT
WILL
BE
PROCESSED
THE
FIRST
FUNCTION
TEXTUREQUERYLOD
RETRIEVES
MIPMAP
INFORMATION
CALCULATED
BY
THE
FIXED
FUNCTION
TEXTURE
LOOKUP
HARDWARE
FOR
EACH
OF
THESE
TEXTUREQUERYLOD
FUNCTIONS
THERE
IS
A
CORRESPONDING
QUERY
TEXTUREQUERYLEVELS
THAT
RETURNS
THE
NUMBER
OF
MIPMAP
LEVELS
PRESENT
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
SOMETIMES
IT
MAY
BE
NECESSARY
TO
KNOW
THE
DIMENSIONS
OF
A
TEXTURE
FROM
WHICH
YOU
ARE
ABOUT
TO
SAMPLE
FOR
EXAMPLE
YOU
MAY
NEED
TO
SCALE
AN
INTEGER
TEXTURE
COORDINATE
REPRESENTING
AN
ABSOLUTE
TEXEL
LOCATION
INTO
A
FLOATING
POINT
RANGE
SUITABLE
FOR
SAMPLING
FROM
THE
TEXTURE
OR
TO
ITERATE
OVER
ALL
THE
SAMPLES
IN
A
TEXTURE
THE
TEXTURESIZE
FUNCTION
WILL
RETURN
THE
DIMENSIONS
OF
THE
TEXTURE
AT
A
SPECIFIED
LEVEL
OF
DETAIL
ITS
PROTOTYPE
IS
AS
FOLLOWS
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
CHAPTER
TEXTURES
GATHERING
TEXELS
THE
TEXTUREGATHER
FUNCTION
IS
A
SPECIAL
FUNCTION
THAT
ALLOWS
YOUR
SHADER
TO
READ
THE
FOUR
SAMPLES
THAT
WOULD
HAVE
BEEN
USED
TO
CREATE
A
BILINEARLY
FILTERED
TEXEL
FROM
A
TEXTURE
OR
CUBE
MAP
RECTANGLE
TEXTURE
OR
ARRAY
OF
THESE
TYPES
TYPICALLY
USED
WITH
SINGLE
CHANNEL
TEXTURES
THE
OPTIONAL
COMP
COMPONENT
OF
THE
FUNCTION
ALLOWS
YOU
TO
SELECT
A
CHANNEL
OTHER
THAN
THE
X
OR
R
COMPONENT
OF
THE
UNDERLYING
DATA
THIS
FUNCTION
CAN
PROVIDE
SIGNIFICANT
PERFORMANCE
ADVANTAGES
WHEN
YOU
NEED
TO
SAMPLE
MANY
TIMES
FROM
A
SINGLE
CHANNEL
OF
A
TEXTURE
BECAUSE
DEPENDING
ON
THE
DESIRED
ACCESS
PATTERN
IT
IS
POSSIBLE
TO
USE
THIS
FUNCTION
TO
CUT
THE
NUMBER
OF
TEXTURE
LOOKUPS
BY
THREE
QUARTERS
COMBINING
SPECIAL
FUNCTIONS
IN
ADDITION
TO
ALL
OF
THE
SPECIAL
TEXTURING
FUNCTIONS
SEVERAL
MORE
VARIANTS
OF
THESE
FUNCTIONS
EXIST
THAT
COMBINE
FEATURES
FROM
MULTIPLE
VARIANTS
FOR
EXAMPLE
IF
YOU
WANT
TO
DO
PROJECTIVE
TEXTURING
WITH
AN
EXPLICIT
LEVEL
OF
DETAIL
OR
GRADIENTS
EACH
IS
DESCRIBED
IN
EXPLICIT
GRADIENT
SPECIFICATION
ON
PAGE
THEN
YOU
CAN
USE
THE
COMBINED
FUNCTIONS
TEXTUREPROJLOD
OR
TEXTUREPROJGRAD
RESPECTIVELY
THE
COMBINED
FUNCTIONS
USING
A
SAMPLER
ARE
SHOWN
BELOW
VARIANTS
OF
ALMOST
ALL
OF
THESE
FUNCTIONS
EXIST
FOR
OTHER
DIMENSIONALITIES
AND
TYPES
OF
SAMPLER
AND
A
FULL
LIST
IS
IN
APPENDIX
C
BUILT
IN
GLSL
VARIABLES
AND
FUNCTIONS
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
TEXTUREPROJLOD
TEX
P
FLOAT
LOD
TEXTUREPROJGRAD
TEX
P
DPDX
DPDY
TEXTUREPROJOFFSET
TEX
P
OFFSET
FLOAT
BIAS
TEXTUREGRADOFFSET
TEX
P
DPDX
DPDY
OFFSET
TEXTUREPROJLODOFFSET
TEX
P
FLOAT
LOD
OFFSET
TEXTUREPROJGRADOFFSET
TEX
P
DPDX
DPDY
OFFSET
ADVANCED
TEXTURE
LOOKUP
FUNCTIONS
MAY
BE
COMBINED
TO
PERFORM
MORE
THAN
ONE
SPECIAL
FUNCTION
IN
A
SINGLE
CALL
TEXTUREPROJLOD
PERFORMS
PROJECTIVE
TEXTURING
FROM
THE
TEXTURE
BOUND
TO
THE
UNIT
REPRESENTED
BYTEX
AS
WOULD
BE
PERFORMED
BY
TEXTUREPROJ
BUT
WITH
EXPLICIT
LEVEL
OF
DETAIL
SPECIFIED
IN
LOD
AS
ACCEPTED
BY
TEXTURELOD
SIMILARLY
TEXTUREPROJGRAD
EXECUTES
A
PROJECTIVE
TEXTURE
LOOKUP
AS
PERFORMED
BY
TEXTUREPROJ
BUT
WITH
EXPLICIT
GRADIENTS
PASSED
IN
DPDX
AND
DPDY
AS
WOULD
BE
ACCEPTED
BY
TEXTUREGRAD
TEXTUREPROJOFFSET
PERFORMS
A
PROJECTIVE
TEXTURE
LOOKUP
WITH
TEXEL
OFFSETS
APPLIED
TO
THE
POST
PROJECTED
TEXTURE
COORDINATES
TEXTUREPROJLODOFFSET
AND
TEXTUREPROJGRADOFFSET
FURTHER
COMBINE
TWO
SPECIAL
FUNCTIONS
THE
FIRST
PERFORMS
A
PROJECTIVE
TEXTURE
FETCH
WITH
EXPLICIT
LEVEL
OF
DETAIL
AND
TEXEL
OFFSETS
AS
ACCEPTED
BY
TEXTUREOFFSET
AND
THE
SECOND
PERFORMS
A
PROJECTIVE
TEXTURE
LOOKUP
WITH
EXPLICIT
GRADIENTS
AND
TEXEL
OFFSETS
POINT
SPRITES
POINT
SPRITES
ARE
ESSENTIALLY
OPENGL
POINTS
RENDERED
USING
A
FRAGMENT
SHADER
THAT
TAKES
THE
FRAGMENT
COORDINATES
WITHIN
THE
POINT
INTO
ACCOUNT
WHEN
RUNNING
THE
COORDINATE
WITHIN
THE
POINT
IS
AVAILABLE
IN
THE
TWO
DIMENSIONAL
VECTOR
THIS
VARIABLE
CAN
BE
USED
IN
ANY
NUMBER
OF
WAYS
TWO
COMMON
USES
ARE
TO
USE
IT
AS
A
TEXTURE
COORDINATE
THIS
IS
THE
CLASSIC
ORIGIN
OF
THE
TERM
POINT
SPRITE
OR
TO
USE
IT
TO
ANALYTICALLY
COMPUTE
COLOR
OR
COVERAGE
THE
FOLLOWING
ARE
A
FEW
EXAMPLES
OF
HOW
TO
USE
THE
VECTOR
TO
PRODUCE
INTERESTING
EFFECTS
IN
THE
FRAGMENT
SHADER
CHAPTER
TEXTURES
TEXTURED
POINT
SPRITES
BY
USING
TO
LOOKUP
TEXELS
IN
A
TEXTURE
IN
THE
FRAGMENT
SHADER
SIMPLE
POINT
SPRITES
CAN
BE
GENERATED
EACH
POINT
SPRITE
SIMPLY
SHOWS
THE
TEXTURE
AS
A
SQUARE
EXAMPLE
IS
THE
VERTEX
SHADER
USED
IN
THE
EXAMPLE
NOTICE
THAT
WE
RE
WRITING
TO
IN
THE
VERTEX
SHADER
THIS
IS
TO
CONTROL
THE
SIZE
OF
THE
POINT
SPRITES
THEY
RE
SCALED
RELATIVE
TO
THEIR
DISTANCE
FROM
THE
NEAR
PLANE
HERE
WE
VE
USED
A
SIMPLE
LINEAR
MAPPING
BUT
MORE
COMPLEX
LOGARITHMIC
MAPPINGS
CAN
BE
USED
EXAMPLE
SIMPLE
POINT
SPRITE
VERTEX
SHADER
UNIFORM
UNIFORM
LAYOUT
LOCATION
IN
POSITION
VOID
MAIN
VOID
POS
POSITION
POS
Z
POS
W
POS
EXAMPLE
SHOWS
THE
FRAGMENT
SHADER
USED
IN
THIS
EXAMPLE
NOT
INCLUDING
THE
DECLARATION
OF
THE
TEXTURE
AND
THE
OUTPUT
VECTOR
IT
A
SINGLE
LINE
OF
REAL
CODE
WE
SIMPLY
LOOK
UP
INTO
THE
TEXTURE
USING
AS
A
TEXTURE
COORDINATE
EXAMPLE
SIMPLE
POINT
SPRITE
FRAGMENT
SHADER
UNIFORM
OUT
COLOR
VOID
MAIN
VOID
COLOR
TEXTURE
WHEN
WE
RENDER
POINTS
RANDOMLY
PLACED
IN
A
TWO
UNIT
CUBE
CENTERED
ON
THE
ORIGIN
WE
GET
THE
RESULT
SHOWN
IN
FIGURE
POINT
SPRITES
FIGURE
RESULT
OF
THE
SIMPLE
TEXTURED
POINT
SPRITE
EXAMPLE
ANALYTIC
COLOR
AND
SHAPE
YOU
ARE
NOT
LIMITED
TO
SOURCING
YOUR
POINT
SPRITE
DATA
FROM
A
TEXTURE
TEXTURES
HAVE
A
LIMITED
RESOLUTION
BUT
CAN
BE
QUITE
PRECISE
THE
SHADER
SHOWN
IN
EXAMPLE
DEMONSTRATES
HOW
YOU
CAN
ANALYTICALLY
DETERMINE
COVERAGE
IN
THE
FRAGMENT
SHADER
THIS
SHADER
CENTERS
AROUND
THE
ORIGIN
AND
THEN
CALCULATES
THE
SQUARED
DISTANCE
OF
THE
FRAGMENT
FROM
THE
CENTER
OF
THE
POINT
SPRITE
IF
IT
GREATER
THAN
THE
SQUARE
ROOT
OF
HALF
THE
WIDTH
OF
THE
SPRITE
OR
THE
RADIUS
OF
A
CIRCLE
THAT
JUST
FITS
INSIDE
IT
THEN
THE
FRAGMENT
IS
REJECTED
USING
THE
DISCARD
KEYWORD
OTHERWISE
WE
INTERPOLATE
BETWEEN
TWO
COLORS
TO
PRODUCE
THE
FINAL
OUTPUT
THIS
PRODUCES
A
PERFECT
CIRCLE
NOTE
THAT
THE
SAME
VERTEX
SHOWN
IN
EXAMPLE
IS
USED
FOR
THIS
EXAMPLE
AS
WELL
EXAMPLE
ANALYTIC
SHAPE
FRAGMENT
SHADER
OUT
COLOR
VOID
MAIN
VOID
CONST
CONST
TEMP
FLOAT
F
DOT
TEMP
TEMP
IF
F
DISCARD
COLOR
MIX
SMOOTHSTEP
F
CHAPTER
TEXTURES
FIGURE
SHOWS
THE
OUTPUT
OF
THIS
EXAMPLE
FIGURE
ANALYTICALLY
CALCULATED
POINT
SPRITES
BY
INCREASING
THE
SIZE
OF
THE
POINT
SPRITE
AND
REDUCING
THE
NUMBER
OF
POINTS
IN
THE
SCENE
IT
IS
POSSIBLE
TO
SEE
THE
EXTREMELY
SMOOTH
EDGES
OF
THE
DISCS
FORMED
BY
THE
FRAGMENT
SHADER
AS
SHOWN
IN
FIGURE
FIGURE
SMOOTH
EDGES
OF
CIRCULAR
POINT
SPRITES
POINT
SPRITES
CONTROLLING
THE
APPEARANCE
OF
POINTS
VARIOUS
CONTROLS
EXIST
TO
ALLOW
THE
APPEARANCE
OF
POINTS
TO
BE
TUNED
BY
YOUR
APPLICATION
THESE
PARAMETERS
ARE
SET
USING
GLPOINTPARAMETERF
OR
GLPOINTPARAMETERI
THE
TWO
PARAMETERS
THAT
YOU
CAN
CHANGE
WITH
GLPOINTPARAMETERI
OR
GLPOINTPARAMETERF
ARE
THE
ORIGIN
FOR
USING
THE
POINT
FADE
THRESHOLD
USING
THE
POINT
SPRITE
COORDINATE
ORIGIN
CONTROLS
WHETHER
Y
INCREASES
FROM
TOP
DOWN
OR
BOTTOM
UP
IN
THE
FRAGMENT
SHADER
AS
POINTS
ARE
RASTERIZED
BY
DEFAULT
THE
VALUE
OF
IS
MEANING
THAT
IT
INCREASES
FROM
TOP
DOWN
NOTE
THAT
THIS
GOES
IN
THE
OPPOSITE
DIRECTION
TO
WINDOW
COORDINATES
WHICH
HAVE
THEIR
ORIGIN
IN
THE
LOWER
RIGHT
BY
SPECIFYING
FOR
YOU
CAN
MAKE
Y
INCREASE
IN
THE
SAME
DIRECTION
AS
Y
WHICH
REPRESENTS
THE
FRAGMENT
WINDOW
COORDINATE
THE
OTHER
PARAMETER
THAT
CAN
BE
CHANGED
CONTROLS
HOW
POINTS
AND
POINT
SPRITES
ARE
ANTIALIASED
WHEN
THE
SIZE
OF
A
POINT
FALLS
BELOW
THIS
THRESHOLD
OPENGL
HAS
THE
OPTION
TO
STOP
PERFORMING
TRUE
ANTIALIASING
AND
INSTEAD
FADE
THE
POINT
INTO
THE
BACKGROUND
USING
BLENDING
THE
DEFAULT
VALUE
OF
THIS
PARAMETER
IS
WHICH
MEANS
THAT
IF
A
POINT
WHOSE
SIZE
IS
LESS
THAN
IS
RASTERIZED
RATHER
THAN
ONLY
LIGHTING
A
SINGLE
SAMPLE
WITHIN
EACH
FRAGMENT
IT
MAY
LIGHT
ALL
THE
FRAGMENTS
IN
THAT
SAMPLE
BUT
END
UP
HAVING
ITS
ALPHA
COMPONENT
CHAPTER
TEXTURES
ATTENUATED
BY
THE
POINT
FADE
FACTOR
WHICH
IS
COMPUTED
AS
FOLLOWS
FADE
IF
THRESHOLD
OTHERWISE
RENDERING
TO
TEXTURE
MAPS
IN
ADDITION
TO
USING
FRAMEBUFFER
OBJECTS
AS
DESCRIBED
IN
FRAMEBUFFER
OBJECTS
ON
PAGE
IN
CHAPTER
FOR
OFFSCREEN
RENDERING
YOU
CAN
ALSO
USE
FBOS
TO
UPDATE
TEXTURE
MAPS
YOU
MIGHT
DO
THIS
TO
INDICATE
CHANGES
IN
THE
TEXTURE
FOR
A
SURFACE
SUCH
AS
DAMAGE
TO
A
WALL
IN
A
GAME
OR
TO
UPDATE
VALUES
IN
A
LOOKUP
TABLE
IF
YOU
RE
DOING
GPGPU
LIKE
COMPUTATIONS
IN
THESE
CASES
YOU
BIND
A
LEVEL
OF
A
TEXTURE
MAP
AS
A
FRAMEBUFFER
ATTACHMENT
AFTER
RENDERING
THE
TEXTURE
MAP
CAN
BE
DETACHED
FROM
THE
FRAMEBUFFER
OBJECT
AND
USED
FOR
SUBSEQUENT
RENDERING
NOTE
NOTHING
PREVENTS
YOU
FROM
READING
FROM
A
TEXTURE
THAT
IS
SIMULTANEOUSLY
BOUND
AS
A
FRAMEBUFFER
ATTACHMENT
FOR
WRITING
IN
THIS
SCENARIO
CALLED
A
FRAMEBUFFER
RENDERING
LOOP
THE
RESULTS
ARE
UNDEFINED
FOR
BOTH
OPERATIONS
THAT
IS
THE
VALUES
RETURNED
FROM
SAMPLING
THE
BOUND
TEXTURE
MAP
AS
WELL
AS
THE
VALUES
WRITTEN
INTO
THE
TEXTURE
LEVEL
WHILE
BOUND
ARE
UNDEFINED
AND
LIKELY
INCORRECT
RENDERING
TO
TEXTURE
MAPS
THE
GLFRAMEBUFFERTEXTURE
FAMILY
OF
ROUTINES
ATTACHES
LEVELS
OF
A
TEXTURE
MAP
AS
A
FRAMEBUFFER
ATTACHMENT
GLFRAMEBUFFERTEXTURE
ATTACHES
LEVEL
OF
TEXTURE
OBJECT
TEXTURE
ASSUMING
TEXTURE
IS
NOT
ZERO
TO
ATTACHMENT
AND
EACH
ATTACH
A
SPECIFIED
TEXTURE
IMAGE
OF
A
TEXTURE
OBJECT
AS
A
RENDERING
ATTACHMENT
TO
A
FRAMEBUFFER
OBJECT
TARGET
MUST
BE
EITHER
OR
WHICH
IS
EQUIVALENT
TO
ATTACHMENT
MUST
BE
ONE
OF
THE
FRAMEBUFFER
ATTACHMENT
POINTS
OR
IN
WHICH
CASE
THE
INTERNAL
FORMAT
OF
THE
TEXTURE
MUST
BE
FOR
TEXTURETARGET
MUST
BE
IF
TEXTURE
IS
NOT
ZERO
FOR
TEXTURETARGET
MUST
BE
AND
FOR
TEXTURETARGET
MUST
BE
IF
TEXTURE
IS
ZERO
INDICATING
THAT
ANY
TEXTURE
BOUND
TO
ATTACHMENT
IS
RELEASED
NO
SUBSEQUENT
BIND
TO
ATTACHMENT
IS
MADE
IN
THIS
CASE
TEXTURETARGET
LEVEL
AND
LAYER
ARE
IGNORED
IF
TEXTURE
IS
NOT
ZERO
IT
MUST
BE
THE
NAME
OF
AN
EXISTING
TEXTURE
OBJECT
CREATED
WITH
GLGENTEXTURES
WITH
TEXTURETARGET
MATCHING
THE
TEXTURE
TYPE
E
G
ETC
ASSOCIATED
WITH
THE
TEXTURE
OBJECT
OR
IF
TEXTURE
IS
A
CUBE
MAP
THEN
TEXTURETARGET
MUST
BE
ONE
OF
THE
CUBE
MAP
FACE
TARGETS
OTHERWISE
A
ERROR
IS
GENERATED
LEVEL
REPRESENTS
THE
MIPMAP
LEVEL
OF
THE
ASSOCIATED
TEXTURE
IMAGE
TO
BE
ATTACHED
AS
A
RENDER
TARGET
AND
FOR
THREE
DIMENSIONAL
TEXTURES
OR
TWO
DIMENSIONAL
TEXTURE
ARRAYS
LAYER
REPRESENTS
THE
LAYER
OF
THE
TEXTURE
TO
BE
USED
IF
TEXTURETARGET
IS
OR
THEN
LEVEL
MUST
BE
ZERO
CHAPTER
TEXTURES
EXAMPLE
ATTACHING
A
TEXTURE
LEVEL
AS
A
FRAMEBUFFER
ATTACHMENT
FBOTEXTURE
CPP
GLSIZEI
TEXWIDTH
TEXHEIGHT
GLUINT
FRAMEBUFFER
TEXTURE
VOID
INIT
GLUINT
RENDERBUFFER
CREATE
AN
EMPTY
TEXTURE
GLGENTEXTURES
TEXTURE
GLBINDTEXTURE
TEXTURE
TEXWIDTH
TEXHEIGHT
NULL
CREATE
A
DEPTH
BUFFER
FOR
OUR
FRAMEBUFFER
GLGENRENDERBUFFERS
RENDERBUFFER
GLBINDRENDERBUFFER
RENDERBUFFER
GLRENDERBUFFERSTORAGE
TEXWIDTH
TEXHEIGHT
ATTACH
THE
TEXTURE
AND
DEPTH
BUFFER
TO
THE
FRAMEBUFFER
GLGENFRAMEBUFFERS
FRAMEBUFFER
GLBINDFRAMEBUFFER
FRAMEBUFFER
TEXTURE
GLFRAMEBUFFERRENDERBUFFER
RENDERBUFFER
GLENABLE
VOID
DISPLAY
RENDER
INTO
THE
RENDERBUFFER
GLBINDFRAMEBUFFER
FRAMEBUFFER
GLVIEWPORT
TEXWIDTH
TEXHEIGHT
GLCLEARCOLOR
GLCLEAR
GENERATE
MIPMAPS
OF
OUR
TEXTURE
GLGENERATEMIPMAP
BIND
TO
THE
WINDOW
SYSTEM
FRAMEBUFFER
UNBINDING
FROM
THE
TEXTURE
WHICH
WE
CAN
USE
TO
TEXTURE
OTHER
OBJECTS
GLBINDFRAMEBUFFER
GLVIEWPORT
WINDOWWIDTH
WINDOWHEIGHT
GLCLEARCOLOR
GLCLEAR
RENDER
USING
THE
TEXTURE
GLENABLE
GLUTSWAPBUFFERS
RENDERING
TO
TEXTURE
MAPS
FOR
THREE
DIMENSIONAL
OR
ONE
AND
TWO
DIMENSIONAL
TEXTURE
ARRAYS
YOU
CAN
ALSO
ATTACH
A
SINGLE
LAYER
OF
THE
TEXTURE
AS
A
FRAMEBUFFER
ATTACHMENT
DISCARDING
RENDERED
DATA
ADVANCED
AS
A
RULE
OF
THUMB
YOU
SHOULD
ALWAYS
CLEAR
THE
FRAMEBUFFER
BEFORE
YOU
BEGIN
RENDERING
A
FRAME
MODERN
GPUS
IMPLEMENT
COMPRESSION
AND
OTHER
TECHNIQUES
TO
IMPROVE
PERFORMANCE
MEMORY
BANDWIDTH
REQUIREMENTS
AND
SO
ON
WHEN
YOU
CLEAR
A
FRAMEBUFFER
THE
OPENGL
IMPLEMENTATION
KNOWS
THAT
IT
CAN
DISCARD
ANY
RENDERED
DATA
IN
THE
FRAMEBUFFER
AND
RETURN
IT
TO
A
CLEAN
COMPRESSED
STATE
IF
POSSIBLE
HOWEVER
WHAT
HAPPENS
IF
YOU
RE
SURE
THAT
YOU
RE
ABOUT
TO
RENDER
OVER
THE
WHOLE
FRAMEBUFFER
IT
SEEMS
THAT
CLEARING
IT
WOULD
BE
A
WASTE
AS
YOU
ARE
ABOUT
TO
DRAW
ALL
OVER
THE
CLEARED
AREA
IF
YOU
ARE
CERTAIN
THAT
YOU
ARE
GOING
TO
COMPLETELY
REPLACE
THE
CONTENTS
OF
THE
FRAMEBUFFER
WITH
NEW
RENDERING
YOU
CAN
DISCARD
IT
WITH
A
CALL
TO
GLINVALIDATEFRAMEBUFFER
OR
GLINVALIDATESUBFRAMEBUFFER
THEIR
PROTOTYPES
ARE
AS
FOLLOWS
CHAPTER
TEXTURES
DISCARDING
THE
CONTENT
OF
A
FRAMEBUFFER
CAN
BE
FAR
MORE
EFFICIENT
THAN
CLEARING
IT
DEPENDING
ON
THE
OPENGL
IMPLEMENTATION
FURTHERMORE
THIS
CAN
ELIMINATE
SOME
EXPENSIVE
DATA
COPIES
IN
SYSTEMS
WITH
MORE
THAN
ONE
GPU
IF
RATHER
THAN
DISCARDING
THE
CONTENT
OF
THE
ATTACHMENTS
OF
A
FRAMEBUFFER
OBJECT
YOU
WISH
TO
DISCARD
THE
CONTENT
OF
A
TEXTURE
DIRECTLY
YOU
CAN
CALL
GLINVALIDATETEXIMAGE
OR
GLINVALIDATETEXSUBIMAGE
THE
PROTOTYPES
FOR
GLINVALIDATETEXIMAGE
AND
GLINVALIDATETEXSUBIMAGE
ARE
AS
FOLLOWS
RENDERING
TO
TEXTURE
MAPS
CHAPTER
SUMMARY
IN
THIS
CHAPTER
WE
HAVE
GIVEN
AN
OVERVIEW
OF
TEXTURING
IN
OPENGL
APPLICATIONS
OF
TEXTURES
IN
COMPUTER
GRAPHICS
ARE
WIDE
RANGING
AND
SURPRISINGLY
COMPLEX
THE
BEST
THAT
CAN
BE
DONE
IN
A
SINGLE
CHAPTER
OF
A
BOOK
IS
TO
SCRATCH
THE
SURFACE
AND
HOPEFULLY
CONVEY
TO
THE
READER
THE
DEPTH
AND
USEFULNESS
OF
TEXTURES
ENTIRE
BOOKS
COULD
BE
WRITTEN
ON
ADVANCED
USES
OF
TEXTURES
MORE
INFORMATION
ABOUT
TEXTURES
CAN
BE
FOUND
IN
SUBSEQUENT
CHAPTERS
INCLUDING
EXAMPLES
OF
HOW
TO
DRAW
INTO
TEXTURES
USE
BUFFER
TEXTURES
AND
STORE
NONIMAGE
DATA
IN
TEXTURES
TEXTURE
REDUX
TO
USE
A
TEXTURE
IN
YOUR
PROGRAM
CREATE
A
TEXTURE
BY
RESERVING
A
NAME
FOR
A
TEXTURE
USING
GLGENTEXTURES
HOW
ABOUT
BINDING
ITS
NAME
TO
THE
APPROPRIATE
BINDING
POINT
USING
GLBINDTEXTURE
SPECIFYING
THE
DIMENSIONS
AND
FORMAT
OF
THE
TEXTURE
USING
OR
THE
APPROPRIATE
FUNCTION
FOR
THE
SPECIFIED
TEXTURE
TARGET
PLACING
DATA
INTO
THE
TEXTURE
USING
OR
THE
APPROPRIATE
FUNCTION
FOR
THE
SPECIFIED
TEXTURE
TARGET
ACCESS
THE
TEXTURE
IN
YOUR
SHADER
BY
DECLARING
A
UNIFORM
SAMPLER
IN
YOUR
SHADER
TO
REPRESENT
THE
TEXTURE
ASSOCIATING
THE
SAMPLER
WITH
THE
DESIRED
TEXTURE
UNIT
USING
BINDING
THE
TEXTURE
OBJECT
AND
OPTIONALLY
A
SAMPLER
OBJECT
TO
THE
CORRECT
TEXTURE
UNIT
READING
FROM
THE
TEXTURE
IN
THE
SHADER
USING
TEXTURE
OR
ONE
OF
OTHER
THE
BUILT
IN
TEXTURE
FUNCTIONS
TO
USE
A
BUFFER
OBJECT
AS
A
TEXTURE
CREATE
A
BUFFER
TEXTURE
BY
GENERATING
A
TEXTURE
NAME
USING
GLGENTEXTURES
BINDING
THAT
NAME
TO
THE
TEXTURE
TARGET
CREATE
AND
INITIALIZE
A
BUFFER
TEXTURE
BY
GENERATING
A
BUFFER
NAME
USING
GLGENBUFFERS
CHAPTER
TEXTURES
BINDING
THE
BUFFER
TO
A
TARGET
PREFERABLY
THE
TARGET
DEFINING
THE
STORAGE
FOR
THE
BUFFER
OBJECT
USING
GLBUFFERDATA
ATTACH
THE
BUFFER
OBJECT
DATA
STORE
TO
THE
TEXTURE
BY
BINDING
THE
TEXTURE
TO
THE
TARGET
AND
CALLING
GLTEXBUFFER
WITH
THE
NAME
OF
THE
INITIALIZED
BUFFER
OBJECT
TEXTURE
BEST
PRACTICES
HERE
ARE
SOME
TIPS
TO
ENSURE
THAT
YOU
ALLOW
OPENGL
TO
USE
YOUR
TEXTURES
MOST
EFFICIENTLY
ENSURING
THE
BEST
POSSIBLE
PERFORMANCE
FOR
YOUR
APPLICATION
SOME
COMMON
PITFALLS
ARE
ENUMERATED
HERE
WITH
SOME
ADVICE
ON
HOW
TO
AVOID
THEM
IMMUTABLE
TEXTURE
STORAGE
USE
IMMUTABLE
TEXTURE
STORAGE
FOR
TEXTURES
WHEREVER
POSSIBLE
IMMUTABLE
STORAGE
FOR
TEXTURES
IS
CREATED
USING
THE
FUNCTION
OR
THE
APPROPRIATE
ONE
FOR
YOUR
CHOSEN
TEXTURE
TARGET
MUTABLE
STORAGE
IS
CREATED
BY
CALLING
WHEN
A
TEXTURE
IS
MARKED
AS
IMMUTABLE
THE
OPENGL
IMPLEMENTATION
CAN
MAKE
CERTAIN
ASSUMPTIONS
ABOUT
THE
VALIDITY
OF
A
TEXTURE
OBJECT
FOR
EXAMPLE
THE
TEXTURE
WILL
ALWAYS
BE
COMPLETE
MIPMAPS
CREATE
AND
INITIALIZE
THE
MIPMAP
CHAIN
FOR
TEXTURES
UNLESS
YOU
HAVE
A
GOOD
REASON
NOT
TO
ALLOWING
THE
GRAPHICS
HARDWARE
TO
USE
A
LOWER
RESOLUTION
MIPMAP
WHEN
IT
NEEDS
TO
WILL
NOT
ONLY
IMPROVE
THE
IMAGE
QUALITY
OF
YOUR
PROGRAM
RENDERING
BUT
IT
WILL
ALSO
MAKE
MORE
EFFICIENT
USE
OF
THE
CACHES
IN
THE
GRAPHICS
PROCESSOR
THE
TEXTURE
CACHE
IS
A
SMALL
PIECE
OF
MEMORY
THAT
IS
USED
TO
STORE
RECENTLY
ACCESSED
TEXTURE
DATA
THE
SMALLER
THE
TEXTURES
YOUR
APPLICATION
USES
THE
MORE
OF
THEM
WILL
FIT
INTO
THE
CACHE
AND
THE
FASTER
YOUR
APPLICATION
WILL
RUN
INTEGER
FORMAT
TEXTURES
DON
T
FORGET
TO
USE
AN
INTEGER
SAMPLER
ETC
IN
YOUR
SHADER
WHEN
YOUR
TEXTURE
DATA
IS
AN
UNNORMALIZED
INTEGER
AND
YOU
INTEND
TO
USE
THE
INTEGER
VALUES
IT
CONTAINS
DIRECTLY
IN
THE
SHADER
A
COMMON
MISTAKE
IS
TO
CREATE
A
FLOATING
POINT
SAMPLER
AND
USE
AN
INTEGER
INTERNAL
FORMAT
FOR
THE
SAMPLER
SUCH
AS
IN
THIS
CASE
YOU
MAY
GET
UNDESIRED
OR
EVEN
UNDEFINED
RESULTS
CHAPTER
SUMMARY
THIS
PAGE
INTENTIONALLY
LEFT
BLANK
CHAPTER
LIGHT
AND
SHADOW
CHAPTER
OBJECTIVES
AFTER
READING
THIS
CHAPTER
YOU
LL
BE
ABLE
TO
DO
THE
FOLLOWING
CODE
A
SPECTRUM
OF
FRAGMENT
SHADERS
TO
LIGHT
SURFACES
WITH
AMBIENT
DIFFUSE
AND
SPECULAR
LIGHTING
FROM
MULTIPLE
LIGHT
SOURCES
MIGRATE
LIGHTING
CODE
BETWEEN
FRAGMENT
AND
VERTEX
SHADERS
BASED
ON
QUALITY
AND
PERFORMANCE
TRADE
OFFS
USE
A
SINGLE
SHADER
TO
APPLY
A
COLLECTION
OF
LIGHTS
TO
A
VARIETY
OF
MATERIALS
SELECT
FROM
A
VARIETY
OF
ALTERNATIVE
LIGHTING
MODELS
HAVE
THE
OBJECTS
IN
YOUR
SCENE
CAST
SHADOWS
ONTO
OTHER
OBJECTS
IN
THE
REAL
WORLD
WE
SEE
THINGS
BECAUSE
THEY
REFLECT
LIGHT
FROM
A
LIGHT
SOURCE
OR
BECAUSE
THEY
ARE
LIGHT
SOURCES
THEMSELVES
IN
COMPUTER
GRAPHICS
JUST
AS
IN
REAL
LIFE
WE
WON
T
BE
ABLE
TO
SEE
AN
OBJECT
UNLESS
IT
IS
ILLUMINATED
BY
OR
EMITS
LIGHT
WE
WILL
EXPLORE
HOW
THE
OPENGL
SHADING
LANGUAGE
CAN
HELP
US
IMPLEMENT
SUCH
MODELS
SO
THAT
THEY
CAN
EXECUTE
AT
INTERACTIVE
RATES
ON
PROGRAMMABLE
GRAPHICS
HARDWARE
THIS
CHAPTER
CONTAINS
THE
FOLLOWING
MAJOR
SECTIONS
CLASSIC
LIGHTING
MODEL
SHOWS
LIGHTING
FUNDAMENTALS
FIRST
BASED
ON
DOING
LIGHT
COMPUTATIONS
IN
A
FRAGMENT
SHADER
THEN
IN
BOTH
THE
VERTEX
AND
FRAGMENT
SHADERS
THIS
SECTION
ALSO
SHOWS
HOW
TO
HANDLE
MULTIPLE
LIGHTS
AND
MATERIALS
IN
A
SINGLE
SHADER
ADVANCED
LIGHTING
MODELS
INTRODUCES
A
SAMPLING
OF
ADVANCED
METHODS
FOR
LIGHTING
A
SCENE
INCLUDING
HEMISPHERE
LIGHTING
IMAGE
BASED
LIGHTING
AND
SPHERICAL
HARMONICS
THESE
CAN
BE
LAYERED
ON
TOP
OF
THE
CLASSIC
LIGHTING
MODEL
TO
CREATE
HYBRID
MODELS
SHADOW
MAPPING
SHOWS
A
KEY
TECHNIQUE
FOR
ADDING
SHADOWS
TO
A
SCENE
LIGHTING
INTRODUCTION
THE
PROGRAMMABILITY
OF
OPENGL
SHADERS
ALLOWS
VIRTUALLY
LIMITLESS
POSSIBILITIES
FOR
LIGHTING
A
SCENE
OLD
SCHOOL
FIXED
FUNCTIONALITY
LIGHTING
MODELS
WERE
COMPARATIVELY
CONSTRAINING
LACKING
IN
SOME
REALISM
AND
IN
PERFORMANCE
QUALITY
TRADE
OFFS
PROGRAMMABLE
SHADERS
CAN
PROVIDE
FAR
SUPERIOR
RESULTS
ESPECIALLY
IN
THE
AREA
OF
REALISM
NEVERTHELESS
IT
IS
STILL
IMPORTANT
TO
START
WITH
AN
UNDERSTANDING
OF
THE
CLASSIC
LIGHTING
MODEL
THAT
WAS
EMBODIED
BY
OLD
FIXED
FUNCTIONALITY
THOUGH
WE
WILL
BE
MORE
FLEXIBLE
ON
WHICH
SHADER
STAGES
DO
WHICH
PART
THIS
LIGHTING
MODEL
STILL
PROVIDES
THE
FUNDAMENTALS
ON
WHICH
MOST
RASTERIZATION
LIGHTING
TECHNIQUES
ARE
BASED
AND
IS
A
SPRINGBOARD
FOR
GRASPING
THE
MORE
ADVANCED
TECHNIQUES
IN
THAT
LIGHT
WE
WILL
FIRST
SHOW
A
NUMBER
OF
SIMPLE
SHADERS
THAT
EACH
PERFORM
SOME
ASPECT
OF
THE
CLASSIC
LIGHTING
MODEL
WITH
THE
GOAL
BEING
THAT
YOU
MAY
PICK
AND
CHOOSE
THE
TECHNIQUES
YOU
WANT
IN
YOUR
SCENE
COMBINE
THEM
AND
INCORPORATE
THEM
INTO
YOUR
SHADERS
VIEWING
TRANSFORMATIONS
AND
OTHER
ASPECTS
OF
RENDERING
ARE
ABSENT
FROM
THESE
SHADERS
SO
THAT
WE
MAY
FOCUS
JUST
ON
LIGHTING
IN
THE
LATER
EXAMPLES
IN
THIS
CHAPTER
WE
EXPLORE
A
VARIETY
OF
MORE
COMPLEX
SHADERS
THAT
PROVIDE
MORE
FLEXIBLE
RESULTS
BUT
EVEN
WITH
THESE
MORE
FLEXIBLE
SHADERS
WE
ARE
LIMITED
ONLY
BY
OUR
IMAGINATIONS
KEEP
EXPLORING
NEW
LIGHTING
METHODS
ON
YOUR
OWN
CHAPTER
LIGHT
AND
SHADOW
CLASSIC
LIGHTING
MODEL
THE
CLASSIC
LIGHTING
MODEL
ADDS
UP
A
SET
OF
INDEPENDENTLY
COMPUTED
LIGHTING
COMPONENTS
TO
GET
A
TOTAL
LIGHTING
EFFECT
FOR
A
PARTICULAR
SPOT
ON
A
MATERIAL
SURFACE
THESE
COMPONENTS
ARE
AMBIENT
DIFFUSE
AND
SPECULAR
EACH
IS
DESCRIBED
BELOW
AND
FIGURE
SHOWS
THEM
VISUALLY
FIGURE
ELEMENTS
OF
THE
CLASSIC
LIGHTING
MODEL
AMBIENT
TOP
LEFT
PLUS
DIFFUSE
TOP
RIGHT
PLUS
SPECULAR
BOTTOM
LIGHT
ADDING
TO
AN
OVERALL
REALISTIC
EFFECT
AMBIENT
LIGHT
IS
LIGHT
NOT
COMING
FROM
ANY
SPECIFIC
DIRECTION
THE
CLASSIC
LIGHTING
MODEL
CONSIDERS
IT
A
CONSTANT
THROUGHOUT
THE
SCENE
FORMING
A
DECENT
FIRST
APPROXIMATION
TO
THE
SCATTERED
LIGHT
PRESENT
IN
A
SCENE
COMPUTING
IT
DOES
NOT
INVOLVE
ANY
ANALYSIS
OF
THE
DIRECTION
OF
LIGHT
SOURCES
OR
THE
DIRECTION
OF
THE
EYE
OBSERVING
THE
SCENE
IT
COULD
EITHER
BE
ACCUMULATED
AS
A
BASE
CONTRIBUTION
PER
LIGHT
SOURCE
OR
BE
PRE
COMPUTED
AS
A
SINGLE
GLOBAL
EFFECT
DIFFUSE
LIGHT
IS
LIGHT
SCATTERED
BY
THE
SURFACE
EQUALLY
IN
ALL
DIRECTIONS
FOR
A
PARTICULAR
LIGHT
SOURCE
DIFFUSE
LIGHT
IS
RESPONSIBLE
FOR
BEING
ABLE
TO
SEE
A
SURFACE
LIT
BY
A
LIGHT
EVEN
IF
THE
SURFACE
IS
NOT
ORIENTED
TO
REFLECT
THE
LIGHT
SOURCE
DIRECTLY
TOWARD
YOUR
EYE
IT
DOESN
T
MATTER
WHICH
DIRECTION
THE
EYE
IS
BUT
IT
DOES
MATTER
WHICH
DIRECTION
THE
LIGHT
IS
IT
IS
BRIGHTER
WHEN
THE
SURFACE
IS
MORE
DIRECTLY
FACING
THE
LIGHT
SOURCE
SIMPLY
BECAUSE
THAT
ORIENTATION
COLLECTS
MORE
LIGHT
THAN
AN
OBLIQUE
ORIENTATION
DIFFUSE
LIGHT
CLASSIC
LIGHTING
MODEL
COMPUTATION
DEPENDS
ON
THE
DIRECTION
OF
THE
SURFACE
NORMAL
AND
THE
DIRECTION
OF
THE
LIGHT
SOURCE
BUT
NOT
THE
DIRECTION
OF
THE
EYE
IT
ALSO
DEPENDS
ON
THE
COLOR
OF
THE
SURFACE
SPECULAR
HIGHLIGHTING
IS
LIGHT
REFLECTED
DIRECTLY
BY
THE
SURFACE
THIS
HIGHLIGHTING
REFERS
TO
HOW
MUCH
THE
SURFACE
MATERIAL
ACTS
LIKE
A
MIRROR
A
HIGHLY
POLISHED
METAL
BALL
REFLECTS
A
VERY
SHARP
BRIGHT
SPECULAR
HIGHLIGHT
WHILE
A
DULLER
POLISH
REFLECTS
A
LARGER
DIMMER
SPECULAR
HIGHLIGHT
AND
A
CLOTH
BALL
WOULD
REFLECT
VIRTUALLY
NONE
AT
ALL
THE
STRENGTH
OF
THIS
ANGLE
SPECIFIC
EFFECT
IS
REFERRED
TO
AS
SHININESS
COMPUTING
SPECULAR
HIGHLIGHTS
REQUIRES
KNOWING
HOW
CLOSE
THE
SURFACE
ORIENTATION
IS
TO
THE
NEEDED
DIRECT
REFLECTION
BETWEEN
THE
LIGHT
SOURCE
AND
THE
EYE
HENCE
IT
REQUIRES
KNOWING
THE
SURFACE
NORMAL
THE
DIRECTION
OF
THE
LIGHT
SOURCE
AND
THE
DIRECTION
OF
THE
EYE
SPECULAR
HIGHLIGHTS
MIGHT
OR
MIGHT
NOT
INCORPORATE
THE
COLOR
OF
THE
SURFACE
AS
A
FIRST
APPROXIMATION
IT
IS
MORE
REALISTIC
TO
NOT
INVOLVE
ANY
SURFACE
COLOR
MAKING
IT
PURELY
REFLECTIVE
THE
UNDERLYING
COLOR
WILL
BE
PRESENT
ANYWAY
FROM
THE
DIFFUSE
TERM
GIVING
IT
THE
PROPER
TINGE
FRAGMENT
SHADERS
FOR
DIFFERENT
LIGHT
STYLES
WE
LL
NEXT
DISCUSS
HOW
FRAGMENT
SHADERS
COMPUTE
THE
AMBIENT
DIFFUSE
AND
SPECULATIVE
AMOUNTS
FOR
SEVERAL
TYPES
OF
LIGHT
INCLUDING
DIRECTIONAL
LIGHTING
POINT
LIGHTING
AND
SPOTLIGHT
LIGHTING
THESE
WILL
BE
COMPLETE
WITH
A
VERTEX
AND
FRAGMENT
SHADER
PAIR
BUILT
UP
AS
WE
GO
FROM
SIMPLEST
TO
MORE
COMPLEX
THE
LATER
SHADERS
MAY
SEEM
LONG
BUT
IF
YOU
START
WITH
THE
SIMPLEST
AND
FOLLOW
THE
INCREMENTAL
ADDITIONS
IT
WILL
BE
EASY
TO
UNDERSTAND
NOTE
THE
COMMENTS
IN
EACH
EXAMPLE
HIGHLIGHT
THE
CHANGE
OR
DIFFERENCE
FROM
THE
PREVIOUS
STEP
MAKING
IT
EASY
TO
LOOK
AND
IDENTIFY
THE
NEW
CONCEPTS
NO
LIGHTING
WE
LL
START
WITH
THE
SIMPLEST
LIGHTING
NO
LIGHTING
BY
THIS
WE
DON
T
MEAN
EVERYTHING
WILL
BE
BLACK
BUT
RATHER
THAT
WE
LL
JUST
DRAW
OBJECTS
WITH
COLOR
UNMODULATED
BY
ANY
LIGHTING
EFFECTS
THIS
IS
INEXPENSIVE
OCCASIONALLY
USEFUL
AND
IS
THE
BASE
WE
LL
BUILD
ON
UNLESS
YOUR
OBJECT
IS
A
PERFECT
MIRROR
YOU
LL
NEED
THIS
COLOR
AS
THE
BASIS
FOR
UPCOMING
LIGHTING
CALCULATIONS
ALL
LIGHTING
CALCULATIONS
WILL
SOMEHOW
MODULATE
THIS
BASE
COLOR
IT
IS
A
SIMPLE
MATTER
TO
SET
A
PER
VERTEX
COLOR
IN
THE
VERTEX
SHADER
THAT
WILL
BE
INTERPOLATED
AND
DISPLAYED
BY
THE
FRAGMENT
SHADER
AS
SHOWN
IN
EXAMPLE
CHAPTER
LIGHT
AND
SHADOW
EXAMPLE
SETTING
FINAL
COLOR
VALUES
WITH
NO
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
WITH
NO
LIGHTING
VERSION
CORE
UNIFORM
MVPMATRIX
MODEL
VIEW
PROJECTION
TRANSFORM
IN
VERTEXCOLOR
SENT
FROM
THE
APPLICATION
INCLUDES
ALPHA
IN
VERTEXPOSITION
PRE
TRANSFORMED
POSITION
OUT
COLOR
SENT
TO
THE
RASTERIZER
FOR
INTERPOLATION
VOID
MAIN
COLOR
VERTEXCOLOR
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
WITH
NO
LIGHTING
VERSION
CORE
IN
COLOR
INTERPOLATED
BETWEEN
VERTICES
OUT
FRAGCOLOR
COLOR
RESULT
FOR
THIS
FRAGMENT
VOID
MAIN
FRAGCOLOR
COLOR
IN
THE
CASES
OF
TEXTURE
MAPPING
OR
PROCEDURAL
TEXTURING
THE
BASE
COLOR
WILL
COME
FROM
SENDING
TEXTURE
COORDINATES
INSTEAD
OF
A
COLOR
USING
THOSE
COORDINATES
TO
MANIFEST
THE
COLOR
IN
THE
FRAGMENT
SHADER
OR
IF
YOU
SET
UP
MATERIAL
PROPERTIES
THE
COLOR
WILL
COME
FROM
AN
INDEXED
MATERIAL
LOOKUP
EITHER
WAY
WE
START
WITH
AN
UNLIT
BASE
COLOR
AMBIENT
LIGHT
THE
AMBIENT
LIGHT
DOESN
T
CHANGE
ACROSS
PRIMITIVES
SO
WE
WILL
PASS
IT
IN
FROM
THE
APPLICATION
AS
A
UNIFORM
VARIABLE
IT
A
GOOD
TIME
TO
MENTION
THAT
LIGHT
ITSELF
HAS
COLOR
NOT
JUST
INTENSITY
THE
COLOR
OF
THE
LIGHT
INTERACTS
WITH
THE
COLOR
OF
THE
SURFACE
BEING
LIT
THIS
INTERACTION
OF
THE
SURFACE
COLOR
BY
THE
LIGHT
COLOR
IS
MODELED
WELL
BY
MULTIPLICATION
USING
TO
REPRESENT
BLACK
AND
TO
REPRESENT
FULL
CLASSIC
LIGHTING
MODEL
INTENSITY
ENABLES
MULTIPLICATION
TO
MODEL
EXPECTED
INTERACTION
THIS
IS
DEMONSTRATED
FOR
AMBIENT
LIGHT
IN
EXAMPLE
IT
IS
OKAY
FOR
LIGHT
COLORS
TO
GO
ABOVE
THOUGH
ESPECIALLY
AS
WE
START
ADDING
UP
MULTIPLE
SOURCES
OF
LIGHT
WE
WILL
START
NOW
USING
THE
MIN
FUNCTION
TO
SATURATE
THE
LIGHT
AT
WHITE
THIS
IS
IMPORTANT
IF
THE
OUTPUT
COLOR
IS
THE
FINAL
VALUE
FOR
DISPLAY
IN
A
FRAMEBUFFER
HOWEVER
IF
IT
IS
AN
INTERME
DIATE
RESULT
SKIP
THE
SATURATION
STEP
NOW
AND
SAVE
IT
FOR
APPLICATION
TO
A
FINAL
COLOR
WHEN
THAT
TIME
COMES
EXAMPLE
AMBIENT
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
AMBIENT
LIGHT
VERSION
CORE
UNIFORM
MVPMATRIX
IN
VERTEXCOLOR
IN
VERTEXPOSITION
OUT
COLOR
VOID
MAIN
COLOR
VERTEXCOLOR
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
FOR
GLOBAL
AMBIENT
LIGHTING
VERSION
CORE
UNIFORM
AMBIENT
SETS
LIGHTING
LEVEL
SAME
ACROSS
MANY
VERTICES
IN
COLOR
OUT
FRAGCOLOR
VOID
MAIN
SCATTEREDLIGHT
AMBIENT
THIS
IS
THE
ONLY
LIGHT
MODULATE
SURFACE
COLOR
WITH
LIGHT
BUT
SATURATE
AT
WHITE
FRAGCOLOR
MIN
COLOR
SCATTEREDLIGHT
YOU
PROBABLY
HAVE
AN
ALPHA
FOURTH
COMPONENT
VALUE
IN
YOUR
COLOR
THAT
YOU
CARE
ABOUT
AND
DON
T
WANT
IT
MODIFIED
BY
LIGHTING
SO
UNLESS
YOU
RE
AFTER
SPECIFIC
TRANSPARENCY
EFFECTS
MAKE
SURE
YOUR
AMBIENT
COLOR
HAS
AS
AN
ALPHA
CHAPTER
LIGHT
AND
SHADOW
OF
OR
JUST
INCLUDE
ONLY
THE
R
G
AND
B
COMPONENTS
IN
THE
COMPUTATION
FOR
EXAMPLE
THE
TWO
LINES
OF
CODE
IN
THE
FRAGMENT
SHADER
COULD
READ
SCATTEREDLIGHT
AMBIENT
THIS
IS
THE
ONLY
LIGHT
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
FRAGCOLOR
RGB
COLOR
A
WHICH
PASSES
THE
COLOR
ALPHA
COMPONENT
STRAIGHT
THROUGH
TO
THE
OUTPUT
FRAGCOLOR
ALPHA
COMPONENT
MODIFYING
ONLY
THE
R
G
AND
B
COMPONENTS
WE
WILL
GENERALLY
DO
THIS
IN
THE
SUBSEQUENT
EXAMPLES
A
KEEN
OBSERVER
MIGHT
NOTICE
THAT
SCATTEREDLIGHT
COULD
HAVE
BEEN
MULTIPLIED
BY
COLOR
IN
THE
VERTEX
SHADER
INSTEAD
OF
THE
FRAGMENT
SHADER
FOR
THIS
CASE
THE
INTERPOLATED
RESULT
WOULD
BE
THE
SAME
SINCE
THE
VERTEX
SHADER
USUALLY
PROCESSES
FEWER
VERTICES
THAN
THE
NUMBER
OF
FRAGMENTS
PROCESSED
BY
THE
FRAGMENT
SHADER
IT
WOULD
PROBABLY
RUN
FASTER
TOO
HOWEVER
FOR
MANY
LIGHTING
TECHNIQUES
THE
INTERPOLATED
RESULTS
WILL
NOT
BE
THE
SAME
HIGHER
QUALITY
WILL
BE
OBTAINED
BY
COMPUTING
PER
FRAGMENT
RATHER
THAN
PER
VERTEX
IT
IS
UP
TO
YOU
TO
MAKE
THIS
PERFORMANCE
VS
QUALITY
TRADE
OFF
PROBABLY
BY
EXPERIMENTING
WITH
WHAT
IS
BEST
FOR
A
PARTICULAR
SITUATION
WE
WILL
FIRST
SHOW
THE
COMPUTATION
IN
THE
FRAGMENT
SHADER
AND
THEN
DISCUSS
OPTIMIZATIONS
APPROXIMATIONS
THAT
INVOLVE
MOVING
COMPUTATIONS
UP
INTO
THE
VERTEX
SHADER
OR
EVEN
TO
THE
APPLICATION
FEEL
FREE
TO
PUT
THEM
WHEREEVER
IS
BEST
FOR
YOUR
SITUATION
DIRECTIONAL
LIGHT
IF
A
LIGHT
IS
FAR
FAR
AWAY
IT
CAN
BE
APPROXIMATED
AS
HAVING
THE
SAME
DIRECTION
FROM
EVERY
POINT
ON
OUR
SURFACE
WE
REFER
TO
SUCH
A
LIGHT
AS
DIRECTIONAL
SIMILARLY
IF
A
VIEWER
IS
FAR
FAR
AWAY
THE
VIEWER
EYE
CAN
ALSO
BE
APPROXI
MATED
AS
HAVING
THE
SAME
DIRECTION
FROM
EVERY
POINT
ON
OUR
SURFACE
THESE
ASSUMPTIONS
SIMPLIFY
THE
MATH
SO
THE
CODE
TO
IMPLEMENT
A
DIRECTIONAL
LIGHT
IS
SIMPLE
AND
RUNS
FASTER
THAN
THE
CODE
FOR
OTHER
TYPES
OF
LIGHTS
THIS
TYPE
OF
LIGHT
SOURCE
IS
USEFUL
FOR
MIMICKING
THE
EFFECTS
OF
A
LIGHT
SOURCE
LIKE
THE
SUN
WE
LL
START
WITH
THE
AMBIENT
LIGHT
COMPUTATION
FROM
THE
PREVIOUS
EXAMPLE
AND
ADD
ON
THE
EFFECTS
FOR
DIFFUSE
SCATTERING
AND
SPECULAR
HIGHLIGHTING
WE
COMPUTE
THESE
EFFECTS
FOR
EACH
FRAGMENT
OF
THE
SURFACE
WE
ARE
LIGHTING
AGAIN
JUST
LIKE
WITH
AMBIENT
LIGHT
THE
DIRECTIONAL
LIGHT
WILL
HAVE
ITS
OWN
COLOR
AND
WE
WILL
MODULATE
THE
SURFACE
COLOR
WITH
THIS
LIGHT
COLOR
FOR
THE
DIFFUSE
SCATTERING
THE
SPECULAR
CONTRIBUTION
WILL
BE
COMPUTED
SEPARATELY
TO
ALLOW
THE
SPECULAR
HIGHLIGHTS
TO
BE
THE
COLOR
OF
THE
LIGHT
SOURCE
NOT
MODULATED
BY
THE
COLOR
OF
THE
SURFACE
THE
SCATTERED
AND
REFLECTED
AMOUNTS
WE
NEED
TO
COMPUTE
VARY
WITH
THE
COSINE
OF
THE
ANGLES
INVOLVED
TWO
VECTORS
IN
THE
SAME
DIRECTION
FORM
AN
ANGLE
OF
WITH
A
COSINE
OF
THIS
INDICATES
A
COMPLETELY
DIRECT
CLASSIC
LIGHTING
MODEL
REFLECTION
AS
THE
ANGLE
WIDENS
THE
COSINE
MOVES
TOWARD
INDICATING
LESS
REFLECTED
LIGHT
FORTUNATELY
IF
OUR
VECTORS
ARE
NORMALIZED
HAVING
A
LENGTH
OF
THESE
COSINES
ARE
COMPUTED
WITH
A
SIMPLE
DOT
PRODUCT
AS
SHOWN
IN
EXAMPLE
THE
SURFACE
NORMAL
WILL
BE
INTERPOLATED
BETWEEN
VERTICES
THOUGH
IT
COULD
ALSO
COME
FROM
A
TEXTURE
MAP
OR
AN
ANALYTIC
COMPUTATION
THE
FAR
AWAY
LIGHT
SOURCE
ASSUMPTION
LETS
US
PASS
IN
THE
LIGHT
DIRECTION
AS
THE
UNIFORM
VARIABLE
LIGHTDIRECTION
FOR
A
FAR
AWAY
LIGHT
AND
EYE
THE
SPECULAR
HIGHLIGHTS
ALL
PEAK
FOR
THE
SAME
SURFACE
NORMAL
DIRECTION
WE
COMPUTE
THIS
DIRECTION
ONCE
IN
THE
APPLICATION
AND
PASS
IT
IN
THROUGH
THE
UNIFORM
VARIABLE
HALFVECTOR
THEN
COSINES
OF
THIS
DIRECTION
WITH
THE
ACTUAL
SURFACE
NORMAL
ARE
USED
TO
START
SPECULAR
HIGHLIGHTING
SHININESS
FOR
SPECULAR
HIGHLIGHTING
IS
MEASURED
WITH
AN
EXPONENT
USED
TO
SHARPEN
THE
ANGULAR
FALL
OFF
FROM
A
DIRECT
REFLECTION
SQUARING
A
NUMBER
LESS
THAN
BUT
NEAR
TO
MAKES
IT
CLOSER
TO
HIGHER
EXPONENTS
SHARPEN
THE
EFFECT
EVEN
MORE
THAT
IS
LEAVING
ONLY
ANGLES
NEAR
WHOSE
COSINE
IS
NEAR
WITH
A
FINAL
SPECULAR
VALUE
NEAR
THE
OTHER
ANGLES
DECAY
QUICKLY
TO
A
SPECULAR
VALUE
OF
HENCE
WE
SEE
THE
DESIRED
EFFECT
OF
A
SHINY
SPOT
ON
THE
SURFACE
OVERALL
HIGHER
EXPONENTS
DIM
THE
AMOUNT
OF
COMPUTED
REFLECTION
SO
IN
PRACTICE
YOU
LL
PROBABLY
WANT
TO
USE
EITHER
A
BRIGHTER
LIGHT
COLOR
OR
AN
EXTRA
MULTIPLICATION
FACTOR
TO
COMPENSATE
WE
PASS
SUCH
DEFINING
SPECULAR
VALUES
AS
UNIFORM
VARIABLES
BECAUSE
THEY
ARE
SURFACE
PROPERTIES
THAT
ARE
CONSTANT
ACROSS
THE
SURFACE
THE
ONLY
WAY
EITHER
A
DIFFUSE
REFLECTION
COMPONENT
OR
A
SPECULAR
REFLECTION
COMPONENT
CAN
BE
PRESENT
IS
IF
THE
ANGLE
BETWEEN
THE
LIGHT
SOURCE
DIRECTION
AND
THE
SURFACE
NORMAL
IS
IN
THE
RANGE
A
NORMAL
AT
MEANS
THE
SURFACE
ITSELF
IS
EDGE
ON
TO
THE
LIGHT
TIP
IT
A
BIT
FURTHER
AND
NO
LIGHT
WILL
HIT
IT
AS
SOON
AS
THE
ANGLE
GROWS
BEYOND
THE
COSINE
GOES
BELOW
WE
DETERMINE
THE
ANGLE
BY
EXAMINING
THE
VARIABLE
DIFFUSE
THIS
IS
SET
TO
THE
GREATER
OF
AND
THE
COSINE
OF
THE
ANGLE
BETWEEN
THE
LIGHT
SOURCE
DIRECTION
AND
THE
SURFACE
NORMAL
IF
THIS
VALUE
ENDS
UP
BEING
THE
VALUE
THAT
DETER
MINES
THE
AMOUNT
OF
SPECULAR
REFLECTION
IS
SET
TO
AS
WELL
RECALL
WE
ASSUME
THAT
THE
DIRECTION
VECTORS
AND
SURFACE
NORMAL
VECTOR
ARE
NORMALIZED
SO
THE
DOT
PRODUCT
BETWEEN
THEM
YIELDS
THE
COSINE
OF
THE
ANGLE
BETWEEN
THEM
EXAMPLE
DIRECTIONAL
LIGHT
SOURCE
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
A
DIRECTIONAL
LIGHT
COMPUTED
IN
THE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
TO
TRANSFORM
NORMALS
PRE
PERSPECTIVE
CHAPTER
LIGHT
AND
SHADOW
IN
VERTEXCOLOR
IN
VERTEXNORMAL
WE
NOW
NEED
A
SURFACE
NORMAL
IN
VERTEXPOSITION
OUT
COLOR
OUT
NORMAL
INTERPOLATE
THE
NORMALIZED
SURFACE
NORMAL
VOID
MAIN
COLOR
VERTEXCOLOR
TRANSFORM
THE
NORMAL
WITHOUT
PERSPECTIVE
AND
NORMALIZE
IT
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
COMPUTING
LIGHTING
FOR
A
DIRECTIONAL
LIGHT
VERSION
CORE
UNIFORM
AMBIENT
UNIFORM
LIGHTCOLOR
UNIFORM
LIGHTDIRECTION
DIRECTION
TOWARD
THE
LIGHT
UNIFORM
HALFVECTOR
SURFACE
ORIENTATION
FOR
SHINIEST
SPOTS
UNIFORM
FLOAT
SHININESS
EXPONENT
FOR
SHARPING
HIGHLIGHTS
UNIFORM
FLOAT
STRENGTH
EXTRA
FACTOR
TO
ADJUST
SHININESS
IN
COLOR
IN
NORMAL
SURFACE
NORMAL
INTERPOLATED
BETWEEN
VERTICES
OUT
FRAGCOLOR
VOID
MAIN
COMPUTE
COSINE
OF
THE
DIRECTIONS
USING
DOT
PRODUCTS
TO
SEE
HOW
MUCH
LIGHT
WOULD
BE
REFLECTED
FLOAT
DIFFUSE
MAX
DOT
NORMAL
LIGHTDIRECTION
FLOAT
SPECULAR
MAX
DOT
NORMAL
HALFVECTOR
SURFACES
FACING
AWAY
FROM
THE
LIGHT
NEGATIVE
DOT
PRODUCTS
WON
T
BE
LIT
BY
THE
DIRECTIONAL
LIGHT
IF
DIFFUSE
SPECULAR
ELSE
SPECULAR
POW
SPECULAR
SHININESS
SHARPEN
THE
HIGHLIGHT
SCATTEREDLIGHT
AMBIENT
LIGHTCOLOR
DIFFUSE
REFLECTEDLIGHT
LIGHTCOLOR
SPECULAR
STRENGTH
CLASSIC
LIGHTING
MODEL
DON
T
MODULATE
THE
UNDERLYING
COLOR
WITH
REFLECTED
LIGHT
ONLY
WITH
SCATTERED
LIGHT
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
A
COUPLE
MORE
NOTES
ABOUT
THIS
EXAMPLE
FIRST
IN
THIS
EXAMPLE
WE
USED
A
SCALAR
STRENGTH
TO
ALLOW
INDEPENDENT
ADJUSTMENT
OF
THE
BRIGHTNESS
OF
THE
SPECULAR
REFLECTION
RELATIVE
TO
THE
SCATTERED
LIGHT
THIS
COULD
POTENTIALLY
BE
A
SEPARATE
LIGHT
COLOR
ALLOWING
PER
CHANNEL
RED
GREEN
OR
BLUE
CONTROL
AS
WILL
BE
DONE
WITH
MATERIAL
PROPERTIES
A
BIT
LATER
IN
EXAMPLE
SECOND
NEAR
THE
END
OF
EXAMPLE
IT
IS
EASY
FOR
THESE
LIGHTING
EFFECTS
TO
ADD
UP
TO
COLOR
COMPONENTS
GREATER
THAN
AGAIN
USUALLY
YOU
LL
WANT
TO
KEEP
THE
BRIGHTEST
FINAL
COLOR
TO
SO
WE
USE
THE
MIN
FUNCTION
ALSO
NOTE
THAT
WE
ALREADY
TOOK
CARE
TO
NOT
GET
NEGATIVE
VALUES
AS
IN
THIS
EXAMPLE
WE
CAUGHT
THAT
CASE
WHEN
WE
FOUND
THE
SURFACE
FACING
AWAY
FROM
THE
LIGHT
UNABLE
TO
REFLECT
ANY
OF
IT
HOWEVER
IF
NEGATIVE
VALUES
DO
COME
INTO
PLAY
YOU
LL
WANT
TO
USE
THE
CLAMP
FUNCTION
TO
KEEP
THE
COLOR
COMPONENTS
IN
THE
RANGE
FINALLY
SOME
INTERESTING
STARTING
VALUES
WOULD
BE
A
SHININESS
OF
AROUND
FOR
A
PRETTY
TIGHT
SPECULAR
REFLECTION
WITH
A
STRENGTH
OF
AROUND
TO
MAKE
IT
BRIGHT
ENOUGH
TO
STAND
OUT
AND
WITH
AMBIENT
COLORS
AROUND
AND
LIGHTCOLOR
COLORS
NEAR
THAT
SHOULD
MAKE
SOMETHING
INTERESTING
AND
VISIBLE
FOR
A
MATERIAL
WITH
COLOR
NEAR
AS
WELL
AND
THEN
YOU
CAN
FINE
TUNE
THE
EFFECT
YOU
WANT
FROM
THERE
POINT
LIGHTS
POINT
LIGHTS
MIMIC
LIGHTS
THAT
ARE
NEAR
THE
SCENE
OR
WITHIN
THE
SCENE
SUCH
AS
LAMPS
OR
CEILING
LIGHTS
OR
STREET
LIGHTS
THERE
ARE
TWO
MAIN
DIFFERENCES
BETWEEN
POINT
LIGHTS
AND
DIRECTIONAL
LIGHTS
FIRST
WITH
A
POINT
LIGHT
SOURCE
THE
DIRECTION
OF
THE
LIGHT
IS
DIFFERENT
FOR
EACH
POINT
ON
THE
SURFACE
SO
CANNOT
BE
REPRESENTED
BY
A
UNIFORM
DIRECTION
SECOND
LIGHT
RECEIVED
AT
THE
SURFACE
IS
EXPECTED
TO
DECREASE
AS
THE
SURFACE
GETS
FARTHER
AND
FARTHER
FROM
THE
LIGHT
THIS
FADING
OF
REFLECTED
LIGHT
BASED
ON
INCREASING
DISTANCE
IS
CALLED
ATTENUATION
REALITY
AND
PHYSICS
WILL
STATE
THAT
LIGHT
ATTENUATES
AS
THE
SQUARE
OF
THE
DISTANCE
HOWEVER
THIS
ATTENUATION
NORMALLY
FADES
TOO
FAST
UNLESS
YOU
ARE
ADDING
ON
LIGHT
FROM
ALL
THE
SCATTERING
OF
SURROUNDING
OBJECTS
AND
OTHERWISE
COMPLETELY
MODELING
EVERYTHING
PHYSICALLY
HAPPENING
WITH
LIGHT
IN
THE
CLASSIC
MODEL
THE
AMBIENT
LIGHT
HELPS
FILL
IN
THE
GAP
FROM
NOT
DOING
A
FULL
MODELING
AND
ATTENUATING
LINEARLY
FILLS
IT
IN
SOME
MORE
SO
WE
WILL
SHOW
AN
ATTENUATION
MODEL
THAT
INCLUDES
COEFFICIENTS
FOR
CONSTANT
LINEAR
AND
QUADRATIC
FUNCTIONS
OF
THE
DISTANCE
CHAPTER
LIGHT
AND
SHADOW
THE
ADDITIONAL
CALCULATIONS
NEEDED
FOR
A
POINT
LIGHT
OVER
A
DIRECTIONAL
LIGHT
SHOW
UP
IN
THE
FIRST
FEW
LINES
OF
THE
FRAGMENT
SHADER
IN
EXAMPLE
THE
FIRST
STEP
IS
TO
COMPUTE
THE
LIGHT
DIRECTION
VECTOR
FROM
THE
SURFACE
TO
THE
LIGHT
POSITION
WE
THEN
COMPUTE
LIGHT
DISTANCE
BY
USING
THE
LENGTH
FUNCTION
NEXT
WE
NORMALIZE
THE
LIGHT
DIRECTION
VECTOR
SO
WE
CAN
USE
IT
IN
A
DOT
PRODUCT
TO
COMPUTE
A
PROPER
COSINE
WE
THEN
COMPUTE
THE
ATTENUATION
FACTOR
AND
THE
DIRECTION
OF
MAXIMUM
HIGHLIGHTS
THE
REMAINING
CODE
IS
THE
SAME
AS
FOR
OUR
DIRECTIONAL
LIGHT
SHADER
EXCEPT
THAT
THE
DIFFUSE
AND
SPECULAR
TERMS
ARE
MULTIPLIED
BY
THE
ATTENUATION
FACTOR
EXAMPLE
POINT
LIGHT
SOURCE
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
A
POINT
LIGHT
LOCAL
SOURCE
WITH
COMPUTATION
DONE
IN
THE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
MVPMATRIX
UNIFORM
MVMATRIX
NOW
NEED
THE
TRANSFORM
MINUS
PERSPECTIVE
UNIFORM
NORMALMATRIX
IN
VERTEXCOLOR
IN
VERTEXNORMAL
IN
VERTEXPOSITION
OUT
COLOR
OUT
NORMAL
OUT
POSITION
ADDING
POSITION
SO
WE
KNOW
WHERE
WE
ARE
VOID
MAIN
COLOR
VERTEXCOLOR
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
POSITION
MVMATRIX
VERTEXPOSITION
PRE
PERSPECTIVE
SPACE
MVPMATRIX
VERTEXPOSITION
INCLUDES
PERSPECTIVE
FRAGMENT
SHADER
FRAGMENT
SHADER
COMPUTING
A
POINT
LIGHT
LOCAL
SOURCE
LIGHTING
VERSION
CORE
UNIFORM
AMBIENT
UNIFORM
LIGHTCOLOR
UNIFORM
LIGHTPOSITION
LOCATION
OF
THE
LIGHT
EYE
SPACE
UNIFORM
FLOAT
SHININESS
UNIFORM
FLOAT
STRENGTH
UNIFORM
EYEDIRECTION
UNIFORM
FLOAT
CONSTANTATTENUATION
ATTENUATION
COEFFICIENTS
CLASSIC
LIGHTING
MODEL
UNIFORM
FLOAT
LINEARATTENUATION
UNIFORM
FLOAT
QUADRATICATTENUATION
IN
COLOR
IN
NORMAL
IN
POSITION
OUT
FRAGCOLOR
VOID
MAIN
FIND
THE
DIRECTION
AND
DISTANCE
OF
THE
LIGHT
WHICH
CHANGES
FRAGMENT
TO
FRAGMENT
FOR
A
LOCAL
LIGHT
LIGHTDIRECTION
LIGHTPOSITION
POSITION
FLOAT
LIGHTDISTANCE
LENGTH
LIGHTDIRECTION
NORMALIZE
THE
LIGHT
DIRECTION
VECTOR
SO
THAT
A
DOT
PRODUCTS
GIVE
COSINES
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDISTANCE
MODEL
HOW
MUCH
LIGHT
IS
AVAILABLE
FOR
THIS
FRAGMENT
FLOAT
ATTENUATION
CONSTANTATTENUATION
LINEARATTENUATION
LIGHTDISTANCE
QUADRATICATTENUATION
LIGHTDISTANCE
LIGHTDISTANCE
THE
DIRECTION
OF
MAXIMUM
HIGHLIGHT
ALSO
CHANGES
PER
FRAGMENT
HALFVECTOR
NORMALIZE
LIGHTDIRECTION
EYEDIRECTION
FLOAT
DIFFUSE
MAX
DOT
NORMAL
LIGHTDIRECTION
FLOAT
SPECULAR
MAX
DOT
NORMAL
HALFVECTOR
IF
DIFFUSE
SPECULAR
ELSE
SPECULAR
POW
SPECULAR
SHININESS
STRENGTH
SCATTEREDLIGHT
AMBIENT
LIGHTCOLOR
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTCOLOR
SPECULAR
ATTENUATION
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
DEPENDING
ON
WHAT
SPECIFIC
EFFECTS
YOU
ARE
AFTER
YOU
CAN
LEAVE
OUT
ONE
OR
TWO
OF
THE
CONSTANT
LINEAR
OR
QUADRATIC
TERMS
OR
YOU
CAN
ATTENUATE
THE
AMBIENT
TERM
ATTENUATING
AMBIENT
LIGHT
WILL
DEPEND
ON
WHETHER
YOU
HAVE
A
GLOBAL
AMBIENT
COLOR
OR
PER
LIGHT
AMBIENT
COLORS
OR
BOTH
IT
WOULD
BE
THE
PER
LIGHT
AMBIENT
COLORS
FOR
POINT
LIGHTS
THAT
YOU
D
WANT
TO
ATTENUATE
YOU
COULD
ALSO
PUT
THE
CONSTANT
ATTENUATION
IN
YOUR
AMBIENT
AND
LEAVE
IT
OUT
OF
THE
ATTENUATION
EXPRESSION
CHAPTER
LIGHT
AND
SHADOW
SPOTLIGHTS
IN
STAGE
AND
CINEMA
SPOTLIGHTS
PROJECT
A
STRONG
BEAM
OF
LIGHT
THAT
ILLUMINATES
A
WELL
DEFINED
AREA
THE
ILLUMINATED
AREA
CAN
BE
FURTHER
SHAPED
THROUGH
THE
USE
OF
FLAPS
OR
SHUTTERS
ON
THE
SIDES
OF
THE
LIGHT
OPENGL
INCLUDES
LIGHT
ATTRIBUTES
THAT
SIMULATE
A
SIMPLE
TYPE
OF
SPOTLIGHT
WHEREAS
POINT
LIGHTS
ARE
MODELED
AS
SENDING
LIGHT
EQUALLY
IN
ALL
DIRECTIONS
OPENGL
MODELS
SPOTLIGHTS
AS
RESTRICTED
TO
PRODUCING
A
CONE
OF
LIGHT
IN
A
PARTICULAR
DIRECTION
THE
DIRECTION
TO
THE
SPOTLIGHT
IS
NOT
THE
SAME
AS
THE
FOCUS
DIRECTION
OF
THE
CONE
FROM
THE
SPOTLIGHT
UNLESS
YOU
ARE
LOOKING
FROM
THE
MIDDLE
OF
THE
SPOT
WELL
TECHNICALLY
THEY
D
BE
OPPOSITE
DIRECTIONS
NOTHING
A
MINUS
SIGN
CAN
T
CLEAR
UP
ONCE
AGAIN
OUR
FRIEND
THE
COSINE
COMPUTED
AS
A
DOT
PRODUCT
WILL
TELL
US
TO
WHAT
EXTENT
THESE
TWO
DIRECTIONS
ARE
IN
ALIGNMENT
THIS
IS
PRECISELY
WHAT
WE
NEED
TO
KNOW
TO
DEDUCE
IF
WE
ARE
INSIDE
OR
OUTSIDE
THE
CONE
OF
ILLUMINATION
A
REAL
SPOTLIGHT
HAS
AN
ANGLE
WHOSE
COSINE
IS
VERY
NEAR
SO
YOU
MIGHT
WANT
TO
START
WITH
COSINES
AROUND
TO
SEE
AN
ACTUAL
SPOT
JUST
AS
WITH
SPECULAR
HIGHLIGHTING
WE
CAN
SHARPEN
OR
NOT
THE
LIGHT
FALLING
WITHIN
THE
CONE
BY
RAISING
THE
COSINE
OF
THE
ANGLE
TO
HIGHER
POWERS
THIS
ALLOWS
CONTROL
OVER
HOW
MUCH
THE
LIGHT
FADES
AS
IT
GETS
NEAR
THE
EDGE
OF
THE
CUTOFF
THE
VERTEX
SHADER
AND
THE
FIRST
AND
LAST
PARTS
OF
OUR
SPOTLIGHT
FRAGMENT
SHADER
SEE
EXAMPLE
LOOK
THE
SAME
AS
OUR
POINT
LIGHT
SHADER
SHOWN
EARLIER
IN
EXAMPLE
THE
DIFFERENCES
OCCUR
IN
THE
MIDDLE
OF
THE
SHADER
WE
TAKE
THE
DOT
PRODUCT
OF
THE
SPOTLIGHT
FOCUS
DIRECTION
WITH
THE
LIGHT
DIRECTION
AND
COMPARE
IT
TO
A
PRE
COMPUTED
COSINE
CUTOFF
VALUE
SPOTCOSCUTOFF
TO
DETERMINE
WHETHER
THE
POSITION
ON
THE
SURFACE
IS
INSIDE
OR
OUTSIDE
THE
SPOTLIGHT
IF
IT
IS
OUTSIDE
THE
SPOTLIGHT
ATTENUATION
IS
SET
TO
OTHERWISE
THIS
VALUE
IS
RAISED
TO
A
POWER
SPECIFIED
BY
SPOTEXPONENT
THE
RESULTING
SPOTLIGHT
ATTENUATION
FACTOR
IS
MULTIPLIED
BY
THE
PREVIOUSLY
COMPUTED
ATTENUATION
FACTOR
TO
GIVE
THE
OVERALL
ATTENUATION
FACTOR
THE
REMAINING
LINES
OF
CODE
ARE
THE
SAME
AS
THEY
WERE
FOR
POINT
LIGHTS
EXAMPLE
SPOTLIGHT
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
SPOTLIGHT
COMPUTED
IN
THE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
MVPMATRIX
UNIFORM
MVMATRIX
UNIFORM
NORMALMATRIX
CLASSIC
LIGHTING
MODEL
IN
VERTEXCOLOR
IN
VERTEXNORMAL
IN
VERTEXPOSITION
OUT
COLOR
OUT
NORMAL
OUT
POSITION
VOID
MAIN
COLOR
VERTEXCOLOR
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
POSITION
MVMATRIX
VERTEXPOSITION
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
COMPUTING
A
SPOTLIGHT
EFFECT
VERSION
CORE
UNIFORM
AMBIENT
UNIFORM
LIGHTCOLOR
UNIFORM
LIGHTPOSITION
UNIFORM
FLOAT
SHININESS
UNIFORM
FLOAT
STRENGTH
UNIFORM
EYEDIRECTION
UNIFORM
FLOAT
CONSTANTATTENUATION
UNIFORM
FLOAT
LINEARATTENUATION
UNIFORM
FLOAT
QUADRATICATTENUATION
UNIFORM
CONEDIRECTION
ADDING
SPOTLIGHT
ATTRIBUTES
UNIFORM
FLOAT
SPOTCOSCUTOFF
HOW
WIDE
THE
SPOT
IS
AS
A
COSINE
UNIFORM
FLOAT
SPOTEXPONENT
CONTROL
LIGHT
FALL
OFF
IN
THE
SPOT
IN
COLOR
IN
NORMAL
IN
POSITION
OUT
FRAGCOLOR
VOID
MAIN
LIGHTDIRECTION
LIGHTPOSITION
POSITION
FLOAT
LIGHTDISTANCE
LENGTH
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDISTANCE
FLOAT
ATTENUATION
CONSTANTATTENUATION
LINEARATTENUATION
LIGHTDISTANCE
QUADRATICATTENUATION
LIGHTDISTANCE
LIGHTDISTANCE
CHAPTER
LIGHT
AND
SHADOW
HOW
CLOSE
ARE
WE
TO
BEING
IN
THE
SPOT
FLOAT
SPOTCOS
DOT
LIGHTDIRECTION
CONEDIRECTION
ATTENUATE
MORE
BASED
ON
SPOT
RELATIVE
POSITION
IF
SPOTCOS
SPOTCOSCUTOFF
ATTENUATION
ELSE
ATTENUATION
POW
SPOTCOS
SPOTEXPONENT
HALFVECTOR
NORMALIZE
LIGHTDIRECTION
EYEDIRECTION
FLOAT
DIFFUSE
MAX
DOT
NORMAL
LIGHTDIRECTION
FLOAT
SPECULAR
MAX
DOT
NORMAL
HALFVECTOR
IF
DIFFUSE
SPECULAR
ELSE
SPECULAR
POW
SPECULAR
SHININESS
STRENGTH
SCATTEREDLIGHT
AMBIENT
LIGHTCOLOR
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTCOLOR
SPECULAR
ATTENUATION
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
MOVING
CALCULATIONS
TO
THE
VERTEX
SHADER
WE
VE
BEEN
DOING
ALL
THESE
CALCULATIONS
PER
FRAGMENT
FOR
EXAMPLE
POSITION
IS
INTERPOLATED
AND
THEN
THE
LIGHTDISTANCE
IS
COMPUTED
PER
FRAGMENT
THIS
GIVES
PRETTY
HIGH
QUALITY
LIGHTING
AT
THE
COST
OF
DOING
AN
EXPENSIVE
SQUARE
ROOT
COMPUTATION
HIDDEN
IN
THE
LENGTH
BUILT
IN
FUNCTION
PER
FRAGMENT
SOMETIMES
WE
CAN
SWAP
THESE
STEPS
PERFORM
THE
LIGHT
DISTANCE
CALCULATION
PER
VERTEX
IN
THE
VERTEX
SHADER
AND
INTERPOLATE
THE
RESULT
THAT
IS
RATHER
THAN
INTERPOLATING
ALL
THE
TERMS
IN
THE
CALCULATION
AND
CALCULATING
PER
FRAGMENT
CALCULATE
PER
VERTEX
AND
INTERPOLATE
THE
RESULT
THE
FRAGMENT
SHADER
THEN
GETS
THE
RESULT
AS
AN
INPUT
AND
DIRECTLY
USES
IT
INTERPOLATING
VECTORS
BETWEEN
TWO
NORMALIZED
VECTORS
VECTORS
OF
LENGTH
DOES
NOT
TYPICALLY
YIELD
NORMALIZED
VECTORS
IT
EASY
TO
IMAGINE
TWO
VECTORS
POINTING
NOTABLY
DIFFERENT
DIRECTIONS
THE
VECTOR
THAT
THE
AVERAGE
OF
THEM
COMES
OUT
QUITE
A
BIT
SHORTER
HOWEVER
WHEN
THE
TWO
VECTORS
ARE
NEARLY
THE
SAME
THE
INTERPOLATED
VECTORS
BETWEEN
THEM
ALL
HAVE
LENGTH
QUITE
CLOSE
TO
CLOSE
ENOUGH
IN
FACT
TO
FINISH
DOING
DECENT
LIGHTING
CALCULATIONS
IN
THE
FRAGMENT
SHADER
SO
THERE
IS
A
BALANCE
BETWEEN
HAVING
VERTICES
FAR
ENOUGH
APART
THAT
YOU
CAN
IMPROVE
PERFORMANCE
BY
COMPUTING
CLASSIC
LIGHTING
MODEL
IN
THE
VERTEX
SHADER
BUT
NOT
TOO
FAR
APART
THAT
THE
LIGHTING
VECTORS
SURFACE
NORMAL
LIGHT
DIRECTION
ETC
POINT
IN
NOTABLY
DIFFERENT
DIRECTIONS
EXAMPLE
GOES
BACK
TO
THE
POINT
LIGHT
CODE
FROM
EXAMPLE
AND
MOVES
SOME
LIGHTING
CALCULATIONS
TO
THE
VERTEX
SHADER
EXAMPLE
POINT
LIGHT
SOURCE
LIGHTING
IN
THE
VERTEX
SHADER
VERTEX
SHADER
VERTEX
SHADER
PULLING
POINT
LIGHT
CALCULATIONS
UP
FROM
THE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
UNIFORM
LIGHTPOSITION
CONSUME
IN
THE
VERTEX
SHADER
NOW
UNIFORM
EYEDIRECTION
UNIFORM
FLOAT
CONSTANTATTENUATION
UNIFORM
FLOAT
LINEARATTENUATION
UNIFORM
FLOAT
QUADRATICATTENUATION
IN
VERTEXCOLOR
IN
VERTEXNORMAL
IN
VERTEXPOSITION
OUT
COLOR
OUT
NORMAL
OUT
POSITION
NO
LONGER
NEED
TO
INTERPOLATE
THIS
OUT
LIGHTDIRECTION
SEND
THE
RESULTS
INSTEAD
OUT
HALFVECTOR
OUT
FLOAT
ATTENUATION
VOID
MAIN
COLOR
VERTEXCOLOR
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
COMPUTE
THESE
IN
THE
VERTEX
SHADER
INSTEAD
OF
THE
FRAGMENT
SHADER
LIGHTDIRECTION
LIGHTPOSITION
VERTEXPOSITION
FLOAT
LIGHTDISTANCE
LENGTH
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDISTANCE
ATTENUATION
CONSTANTATTENUATION
LINEARATTENUATION
LIGHTDISTANCE
QUADRATICATTENUATION
LIGHTDISTANCE
LIGHTDISTANCE
HALFVECTOR
NORMALIZE
LIGHTDIRECTION
EYEDIRECTION
CHAPTER
LIGHT
AND
SHADOW
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
WITH
POINT
LIGHT
CALCULATIONS
DONE
IN
VERTEX
SHADER
VERSION
CORE
UNIFORM
AMBIENT
UNIFORM
LIGHTCOLOR
UNIFORM
LIGHTPOSITION
NO
LONGER
NEED
THIS
UNIFORM
FLOAT
SHININESS
UNIFORM
FLOAT
STRENGTH
IN
COLOR
IN
NORMAL
IN
POSITION
NO
LONGER
NEED
THIS
IN
LIGHTDIRECTION
GET
THESE
FROM
VERTEX
SHADER
INSTEAD
IN
HALFVECTOR
IN
FLOAT
ATTENUATION
OUT
FRAGCOLOR
VOID
MAIN
LIGHTDIRECTION
HALFVECTOR
AND
ATTENUATION
ARE
INTERPOLATED
NOW
FROM
VERTEX
SHADER
CALCULATIONS
FLOAT
DIFFUSE
MAX
DOT
NORMAL
LIGHTDIRECTION
FLOAT
SPECULAR
MAX
DOT
NORMAL
HALFVECTOR
IF
DIFFUSE
SPECULAR
ELSE
SPECULAR
POW
SPECULAR
SHININESS
STRENGTH
SCATTEREDLIGHT
AMBIENT
LIGHTCOLOR
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTCOLOR
SPECULAR
ATTENUATION
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
THERE
ARE
NO
RULES
ABOUT
WHERE
TO
DO
EACH
CALCULATION
PICK
ONE
OR
EXPERIMENT
TO
FIND
WHAT
IS
BEST
FOR
YOUR
SURFACES
IN
THE
EXTREME
THE
COLOR
CAN
BE
COMPLETELY
COMPUTED
IN
THE
VERTEX
SHADER
JUST
AT
THE
VERTEX
AND
THEN
INTERPOLATED
THE
FRAGMENT
SHADER
THEN
HAS
LITTLE
TO
NO
LIGHTING
COMPUTATION
LEFT
TO
DO
THIS
IS
THE
ESSENCE
OF
GOURAUD
SHADING
WHILE
CHEAP
FROM
A
COMPUTATIONAL
PERSPECTIVE
IT
LEAVES
CLASSIC
LIGHTING
MODEL
LIGHTING
ARTIFACTS
THAT
BETRAY
A
SURFACE
TESSELLATION
TO
THE
VIEWER
THIS
IS
ESPECIALLY
OBVIOUS
FOR
COARSE
TESSELLATIONS
AND
SPECULAR
HIGHLIGHTS
WHEN
SURFACE
NORMALS
ARE
INTERPOLATED
AND
THEN
CONSUMED
IN
THE
FRAGMENT
SHADER
WE
GET
VARIANTS
OF
PHONG
SHADING
THIS
IS
NOT
TO
BE
CONFUSED
WITH
THE
PHONG
REFLECTION
MODEL
WHICH
IS
ESSENTIALLY
WHAT
THIS
ENTIRE
SECTION
ON
CLASSIC
LIGHTING
HAS
BEEN
DESCRIBING
MULTIPLE
LIGHTS
AND
MATERIALS
TYPICALLY
A
SCENE
HAS
MANY
LIGHT
SOURCES
AND
MANY
SURFACE
MATERIALS
NORMALLY
YOU
SHADE
ONE
MATERIAL
AT
A
TIME
BUT
MANY
LIGHTS
WILL
LIGHT
THAT
MATERIAL
WE
LL
SHOW
A
SHADING
MODEL
WHERE
EACH
INVOCATION
OF
THE
SHADER
SELECTS
A
MATERIAL
AND
THEN
APPLIES
ALL
OF
OR
A
SUBSET
OF
THE
LIGHTS
TO
LIGHT
IT
MULTIPLE
LIGHTS
NORMALLY
WE
NEED
TO
LIGHT
WITH
MULTIPLE
LIGHTS
WHILE
WE
VE
BEEN
WRITING
EXAMPLE
SHADERS
FOR
JUST
ONE
A
SCENE
MIGHT
HAVE
A
STREET
LIGHT
A
FLASHLIGHT
AND
THE
MOON
FOR
EXAMPLE
WITH
EACH
SURFACE
FRAGMENT
GETTING
A
SHARE
OF
LIGHT
FROM
ALL
THREE
YOU
D
LIKELY
MODEL
THESE
THREE
LIGHTS
AS
A
POINT
LIGHT
A
SPOTLIGHT
AND
A
DIRECTIONAL
LIGHT
RESPECTIVELY
AND
HAVE
A
SINGLE
SHADER
INVOCATION
PERFORM
ALL
THREE
GROUP
A
LIGHT
CHARACTERISTICS
INTO
STRUCTURE
AS
SHOWN
IN
EXAMPLE
AND
THEN
CREATE
AN
ARRAY
OF
THEM
FOR
THE
SHADER
TO
PROCESS
EXAMPLE
STRUCTURE
FOR
HOLDING
LIGHT
PROPERTIES
STRUCTURE
FOR
HOLDING
LIGHT
PROPERTIES
STRUCT
LIGHTPROPERTIES
BOOL
ISENABLED
TRUE
TO
APPLY
THIS
LIGHT
IN
THIS
INVOCATION
BOOL
ISLOCAL
TRUE
FOR
A
POINT
LIGHT
OR
A
SPOTLIGHT
FALSE
FOR
A
POSITIONAL
LIGHT
BOOL
ISSPOT
TRUE
IF
THE
LIGHT
IS
A
SPOTLIGHT
AMBIENT
LIGHT
CONTRIBUTION
TO
AMBIENT
LIGHT
COLOR
COLOR
OF
LIGHT
POSITION
LOCATION
OF
LIGHT
IF
IS
LOCAL
IS
TRUE
OTHERWISE
THE
DIRECTION
TOWARD
THE
LIGHT
HALFVECTOR
DIRECTION
OF
HIGHLIGHTS
FOR
DIRECTIONAL
LIGHT
CONEDIRECTION
SPOTLIGHT
ATTRIBUTES
FLOAT
SPOTCOSCUTOFF
FLOAT
SPOTEXPONENT
FLOAT
CONSTANTATTENUATION
LOCAL
LIGHT
ATTENUATION
COEFFICIENTS
FLOAT
LINEARATTENUATION
FLOAT
QUADRATICATTENUATION
OTHER
PROPERTIES
YOU
MAY
DESIRE
CHAPTER
LIGHT
AND
SHADOW
IN
THIS
EXAMPLE
WE
ARE
USING
A
COUPLE
OF
BOOLEANS
ISLOCAL
AND
ISSPOT
TO
SELECT
WHAT
KIND
OF
LIGHT
IS
REPRESENTED
IF
YOU
END
UP
WITH
LOTS
OF
DIFFERENT
LIGHT
TYPES
TO
CHOOSE
FROM
THIS
WOULD
BE
BETTER
DONE
AS
AN
INT
GOING
THROUGH
A
SWITCH
STATEMENT
THIS
STRUCTURE
ALSO
INCLUDES
AN
AMBIENT
COLOR
CONTRIBUTION
EARLIER
WE
USED
A
GLOBAL
AMBIENT
ASSUMED
TO
REPRESENT
ALL
AMBIENT
LIGHT
BUT
WE
CAN
ALSO
HAVE
EACH
LIGHT
MAKING
ITS
OWN
CONTRIBUTION
FOR
DIRECTIONAL
LIGHTS
IT
DOESN
T
MAKE
ANY
DIFFERENCE
BUT
FOR
LOCAL
LIGHTS
IT
HELPS
TO
HAVE
THEIR
AMBIENT
CONTRIBUTION
ATTENUATED
YOU
COULD
ALSO
ADD
SEPARATE
DIFFUSE
AND
SPECULAR
COLORS
TO
GET
RICHER
EFFECTS
THE
FIRST
MEMBER
ISENABLED
CAN
BE
USED
TO
SELECTIVELY
TURN
LIGHTS
ON
AND
OFF
IF
A
LIGHT
WERE
TRULY
OFF
WHILE
RENDERING
A
WHOLE
SCENE
IT
WOULD
BE
FASTER
TO
NOT
INCLUDE
IT
IN
THE
SET
OF
LIGHTS
TO
BEGIN
WITH
HOWEVER
SOMETIMES
WE
WANT
ONE
SURFACE
LIT
WITH
A
DIFFERENT
SUBSET
OF
LIGHTS
THAN
ANOTHER
AND
SO
MIGHT
BE
ENABLING
AND
DISABLING
A
LIGHT
AT
A
FASTER
RATE
DEPENDING
ON
HOW
FREQUENTLY
YOU
ENABLE
DISABLE
IT
MIGHT
BE
BETTER
AS
A
SEPARATE
ARRAY
OR
EVEN
AS
A
PER
VERTEX
INPUT
ALL
THE
PIECES
ARE
PUT
TOGETHER
IN
EXAMPLE
WE
NOW
NEED
ALL
THE
LIGHTING
FORMS
TOGETHER
IN
A
SINGLE
SHADER
SO
WE
CAN
LOOP
OVER
DIFFERENT
KINDS
OF
LIGHTS
AND
DO
THE
RIGHT
CALCULATIONS
FOR
EACH
ONE
IT
IS
BASED
ON
THE
SHADERS
THAT
DID
ALL
LIGHTING
IN
THE
FRAGMENT
SHADER
BUT
AGAIN
PERFORMANCE
QUALITY
TRADE
OFFS
CAN
BE
MADE
BY
MOVING
SOME
OF
IT
INTO
THE
VERTEX
SHADER
EXAMPLE
MULTIPLE
MIXED
LIGHT
SOURCES
VERTEX
SHADER
VERTEX
SHADER
FOR
MULTIPLE
LIGHTS
STAYS
THE
SAME
WITH
ALL
LIGHTING
DONE
IN
THE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
MVPMATRIX
UNIFORM
MVMATRIX
UNIFORM
NORMALMATRIX
IN
VERTEXCOLOR
IN
VERTEXNORMAL
IN
VERTEXPOSITION
OUT
COLOR
OUT
NORMAL
OUT
POSITION
VOID
MAIN
COLOR
VERTEXCOLOR
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
CLASSIC
LIGHTING
MODEL
POSITION
MVMATRIX
VERTEXPOSITION
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
FOR
MULTIPLE
LIGHTS
VERSION
CORE
STRUCT
LIGHTPROPERTIES
BOOL
ISENABLED
BOOL
ISLOCAL
BOOL
ISSPOT
AMBIENT
COLOR
POSITION
HALFVECTOR
CONEDIRECTION
FLOAT
SPOTCOSCUTOFF
FLOAT
SPOTEXPONENT
FLOAT
CONSTANTATTENUATION
FLOAT
LINEARATTENUATION
FLOAT
QUADRATICATTENUATION
THE
SET
OF
LIGHTS
TO
APPLY
PER
INVOCATION
OF
THIS
SHADER
CONST
INT
MAXLIGHTS
UNIFORM
LIGHTPROPERTIES
LIGHTS
MAXLIGHTS
UNIFORM
FLOAT
SHININESS
UNIFORM
FLOAT
STRENGTH
UNIFORM
EYEDIRECTION
IN
COLOR
IN
NORMAL
IN
POSITION
OUT
FRAGCOLOR
VOID
MAIN
SCATTEREDLIGHT
OR
TO
A
GLOBAL
AMBIENT
LIGHT
REFLECTEDLIGHT
LOOP
OVER
ALL
THE
LIGHTS
FOR
INT
LIGHT
LIGHT
MAXLIGHTS
LIGHT
IF
LIGHTS
LIGHT
ISENABLED
CONTINUE
HALFVECTOR
LIGHTDIRECTION
LIGHTS
LIGHT
POSITION
FLOAT
ATTENUATION
FOR
LOCAL
LIGHTS
COMPUTE
PER
FRAGMENT
DIRECTION
HALFVECTOR
AND
ATTENUATION
CHAPTER
LIGHT
AND
SHADOW
IF
LIGHTS
LIGHT
ISLOCAL
LIGHTDIRECTION
LIGHTDIRECTION
POSITION
FLOAT
LIGHTDISTANCE
LENGTH
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDIRECTION
LIGHTDISTANCE
ATTENUATION
LIGHTS
LIGHT
CONSTANTATTENUATION
LIGHTS
LIGHT
LINEARATTENUATION
LIGHTDISTANCE
LIGHTS
LIGHT
QUADRATICATTENUATION
LIGHTDISTANCE
LIGHTDISTANCE
IF
LIGHTS
LIGHT
ISSPOT
FLOAT
SPOTCOS
DOT
LIGHTDIRECTION
LIGHTS
LIGHT
CONEDIRECTION
IF
SPOTCOS
LIGHTS
LIGHT
SPOTCOSCUTOFF
ATTENUATION
ELSE
ATTENUATION
POW
SPOTCOS
LIGHTS
LIGHT
SPOTEXPONENT
HALFVECTOR
NORMALIZE
LIGHTDIRECTION
EYEDIRECTION
ELSE
HALFVECTOR
LIGHTS
LIGHT
HALFVECTOR
FLOAT
DIFFUSE
MAX
DOT
NORMAL
LIGHTDIRECTION
FLOAT
SPECULAR
MAX
DOT
NORMAL
HALFVECTOR
IF
DIFFUSE
SPECULAR
ELSE
SPECULAR
POW
SPECULAR
SHININESS
STRENGTH
ACCUMULATE
ALL
THE
LIGHTS
EFFECTS
SCATTEREDLIGHT
LIGHTS
LIGHT
AMBIENT
ATTENUATION
LIGHTS
LIGHT
COLOR
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTS
LIGHT
COLOR
SPECULAR
ATTENUATION
RGB
MIN
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
MATERIAL
PROPERTIES
ONE
MATERIAL
PROPERTY
WE
CAME
ACROSS
ABOVE
WAS
SHININESS
WE
USE
SHININESS
TO
CONTROL
HOW
SHARPLY
DEFINED
SPECULAR
HIGHLIGHTS
ARE
DIFFERENT
MATERIALS
HAVE
DIFFERENTLY
SIZED
SPECULAR
HIGHLIGHTS
AND
SEEING
THIS
IS
KEY
TO
YOUR
VIEWER
RECOGNIZING
A
MATERIAL
ONCE
RENDERED
ON
THE
SCREEN
WE
CAN
ALSO
HAVE
MATERIAL
SPECIFIC
MODULATION
OF
THE
COLOR
OF
AMBIENT
DIFFUSE
AND
SPECULAR
LIGHTING
THIS
IS
AN
EASY
NEW
ADDITION
TO
OUR
COMPUTATIONS
CLASSIC
LIGHTING
MODEL
SOME
METALS
AND
CLOTHES
DISPLAY
COOL
LOOKING
PROPERTIES
AS
HAVING
DIFFERENT
UNDERLYING
COLORS
FOR
SCATTERED
LIGHT
AND
REFLECTED
LIGHT
IT
YOUR
CHOICE
HOW
MANY
OF
THESE
INDEPENDENT
COLORS
YOU
MIX
TOGETHER
FOR
THE
EFFECT
YOU
WANT
TO
CREATE
FOR
EXAMPLE
IN
THE
METHOD
BELOW
SETTING
THE
MATERIAL
SPECULAR
VALUE
TO
WOULD
MAKE
THE
MODEL
DEGENERATE
TO
THE
MODEL
USED
IN
THE
EXAMPLES
ABOVE
MATERIALS
CAN
ALSO
HAVE
THEIR
OWN
REAL
OR
APPARENT
LIGHT
SOURCE
FOR
EXAMPLE
SOMETHING
GLOWING
WILL
EMIT
ITS
OWN
LIGHT
THIS
LIGHT
COULD
EASILY
INCLUDE
COLORS
NOT
PRESENT
IN
THE
ANY
OF
THE
LIGHT
SOURCES
SO
LIGHT
WON
T
BE
VISIBLE
UNLESS
IT
IS
ADDED
ON
THE
LIGHT
CALCULATION
WE
VE
DONE
SO
FAR
IT
IS
NATURAL
TO
USE
A
STRUCTURE
TO
STORE
A
MATERIAL
PROPERTIES
AS
SHOWN
IN
EXAMPLE
EXAMPLE
STRUCTURE
TO
HOLD
MATERIAL
PROPERTIES
STRUCT
MATERIALPROPERTIES
EMISSION
LIGHT
PRODUCED
BY
THE
MATERIAL
AMBIENT
WHAT
PART
OF
AMBIENT
LIGHT
IS
REFLECTED
DIFFUSE
WHAT
PART
OF
DIFFUSE
LIGHT
IS
SCATTERED
SPECULAR
WHAT
PART
OF
SPECULAR
LIGHT
IS
SCATTERED
FLOAT
SHININESS
EXPONENT
FOR
SHARPENING
SPECULAR
REFLECTION
OTHER
PROPERTIES
YOU
MAY
DESIRE
THESE
MATERIAL
PROPERTIES
AND
OTHERS
YOU
MAY
WISH
TO
ADD
ARE
NOT
SPECIFIC
TO
SURFACE
LOCATION
SO
THEY
CAN
BE
PASSED
INTO
THE
SHADER
AS
A
UNIFORM
STRUCTURE
SCENES
HAVE
MULTIPLE
MATERIALS
WITH
DIFFERENT
PROPERTIES
IF
YOUR
APPLICATION
SWITCHES
BETWEEN
MATERIALS
FREQUENTLY
CONSIDER
USING
THE
SAME
FRAGMENT
SHADER
TO
SHADE
SEVERAL
DIFFERENT
MATERIALS
WITHOUT
HAVING
TO
CHANGE
SHADERS
OR
UPDATE
UNIFORMS
TO
DO
THIS
MAKE
AN
ARRAY
OF
MATERIALPROPERTIES
EACH
ELEMENT
HOLDING
THE
DESCRIPTION
OF
A
DIFFERENT
MATERIAL
PASS
THE
MATERIAL
INDEX
INTO
A
VERTEX
SHADER
INPUT
WHICH
IT
WILL
PASS
ON
TO
THE
FRAGMENT
SHADER
THEN
THE
FRAGMENT
SHADER
WILL
INDEX
INTO
THE
MATERIAL
ARRAY
AND
RENDER
PROPERLY
FOR
THAT
MATERIAL
FOR
EXAMPLE
SEE
EXAMPLE
WE
VE
MODIFIED
SNIPPETS
OF
THE
MULTILIGHT
SHADER
TO
MAKE
A
MULTILIGHT
SELECTED
MATERIAL
SHADER
EXAMPLE
CODE
SNIPPETS
FOR
USING
AN
ARRAY
OF
MATERIAL
PROPERTIES
FRAGMENT
SHADER
SNIPPETS
OF
FRAGMENT
SHADER
SELECTING
WHAT
MATERIAL
TO
SHADE
WITH
MULTIPLE
LIGHTS
VERSION
CORE
CHAPTER
LIGHT
AND
SHADOW
STRUCT
MATERIALPROPERTIES
EMISSION
AMBIENT
DIFFUSE
SPECULAR
FLOAT
SHININESS
A
SET
OF
MATERIALS
TO
SELECT
BETWEEN
PER
SHADER
INVOCATION
CONST
INT
NUMMATERIALS
UNIFORM
MATERIALPROPERTIES
MATERIAL
NUMMATERIALS
FLAT
IN
INT
MATINDEX
INPUT
MATERIAL
INDEX
FROM
VERTEX
SHADER
VOID
MAIN
ACCUMULATE
ALL
THE
LIGHTS
EFFECTS
SCATTEREDLIGHT
LIGHTS
LIGHT
AMBIENT
MATERIAL
MATINDEX
AMBIENT
ATTENUATION
LIGHTS
LIGHT
COLOR
MATERIAL
MATINDEX
DIFFUSE
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTS
LIGHT
COLOR
MATERIAL
MATINDEX
SPECULAR
SPECULAR
ATTENUATION
RGB
MIN
MATERIAL
MATINDEX
EMISSION
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
TWO
SIDED
LIGHTING
YOU
MIGHT
WANT
TO
RENDER
A
SURFACE
DIFFERENTLY
IF
THE
EYE
IS
LOOKING
AT
THE
BACK
OF
THE
SURFACE
THAN
IF
LOOKING
AT
THE
FRONT
OF
THE
SURFACE
OPENGL
SHADING
LANGUAGE
HAS
A
BUILT
IN
BOOLEAN
VARIABLE
ALLOWING
YOU
TO
DO
SO
THE
VARIABLE
IS
SET
FOR
EACH
FRAGMENT
TO
TRUE
IF
THE
FRAGMENT
IS
PART
OF
A
FRONT
FACING
PRIMITIVE
THE
VARIABLE
IS
SET
TO
FALSE
OTHERWISE
IT
IS
ONLY
AVAILABLE
IN
FRAGMENT
SHADERS
IF
THE
BACKS
HAVE
PROPERTIES
QUITE
DIFFERENT
THAN
THE
FRONTS
JUST
MAKE
TWO
SETS
OF
MATERIALPROPERTIES
AS
IN
EXAMPLE
THERE
ARE
LOTS
OF
WAYS
CLASSIC
LIGHTING
MODEL
TO
DO
THIS
HERE
WE
CHOSE
TO
DOUBLE
THE
ARRAY
AND
USE
EVEN
INDEXES
FOR
THE
FRONT
AND
ODD
INDEXES
FOR
THE
BACK
THIS
IS
LIKELY
FASTER
THAN
HAVING
TWO
SEPARATE
ARRAYS
IF
THE
PROPERTIES
ARE
EXTENSIVE
AND
MOSTLY
THE
SAME
IT
MIGHT
BE
MORE
EFFICIENT
TO
JUST
EXPAND
MATERIALPROPERTIES
WITH
THE
ONE
OR
TWO
DIFFERING
PROPERTIES
EXAMPLE
FRONT
AND
BACK
MATERIAL
PROPERTIES
STRUCT
MATERIALPROPERTIES
EMISSION
AMBIENT
DIFFUSE
SPECULAR
FLOAT
SHININESS
A
SET
OF
MATERIALS
TO
SELECT
BETWEEN
PER
SHADER
INVOCATION
USE
EVEN
INDEXES
FOR
FRONT
FACING
SURFACES
AND
ODD
INDEXES
FOR
BACK
FACING
CONST
INT
NUMMATERIALS
UNIFORM
MATERIALPROPERTIES
MATERIAL
NUMMATERIALS
FLAT
IN
INT
MATINDEX
INPUT
MATERIAL
INDEX
FROM
VERTEX
SHADER
VOID
MAIN
INT
MAT
IF
MAT
MATINDEX
ELSE
MAT
MATINDEX
ACCUMULATE
ALL
THE
LIGHTS
EFFECTS
SCATTEREDLIGHT
LIGHTS
LIGHT
AMBIENT
MATERIAL
MAT
AMBIENT
ATTENUATION
LIGHTS
LIGHT
COLOR
MATERIAL
MAT
DIFFUSE
DIFFUSE
ATTENUATION
REFLECTEDLIGHT
LIGHTS
LIGHT
COLOR
MATERIAL
MAT
SPECULAR
SPECULAR
ATTENUATION
RGB
MIN
MATERIAL
MAT
EMISSION
COLOR
RGB
SCATTEREDLIGHT
REFLECTEDLIGHT
FRAGCOLOR
RGB
COLOR
A
CHAPTER
LIGHT
AND
SHADOW
LIGHTING
COORDINATE
SYSTEMS
TO
MAKE
ANY
SENSE
ALL
THE
NORMAL
DIRECTION
AND
POSITION
COORDINATES
USED
IN
A
LIGHTING
CALCULATION
MUST
COME
FROM
THE
SAME
COORDINATE
SYSTEM
IF
LIGHT
POSITION
COORDINATES
COME
AFTER
MODEL
VIEW
TRANSFORMS
BUT
BEFORE
PERSPECTIVE
PROJECTION
SO
SHOULD
THE
SURFACE
COORDINATES
THAT
WILL
BE
COMPARED
AGAINST
THEM
IN
THIS
TYPICAL
CASE
BOTH
ARE
IN
EYE
SPACE
THAT
IS
THE
EYE
IS
AT
LOOKING
IN
THE
NEGATIVE
Z
DIRECTION
THIS
IS
A
REGULAR
COORDINATE
SYSTEM
NOT
THE
COMPONENT
HOMOGENEOUS
SPACE
NEEDED
FOR
PERSPECTIVE
SEE
THE
FIRST
BLOCK
DIAGRAMS
IN
CHAPTER
VIEWING
TRANSFORMATIONS
CLIPPING
AND
FEEDBACK
TO
SEE
WHERE
IN
THE
STACK
OF
TRANSFORMATIONS
EYE
SPACE
RESIDES
THIS
IS
WHY
IN
THE
EXAMPLES
ABOVE
WE
SENT
POSITION
SEPARATELY
WITH
ITS
OWN
TRANSFORM
AND
THE
TYPES
INVOLVED
ARE
AND
RATHER
THAN
AND
GENERALLY
WE
USED
EYE
SPACE
FOR
ALL
THE
DIRECTIONS
AND
LOCATIONS
FEEDING
LIGHT
EQUATIONS
WHILE
ALONGSIDE
HOMOGENEOUS
COORDINATES
WERE
FED
TO
THE
RASTERIZER
OPENGL
LIGHTING
CALCULATIONS
REQUIRE
KNOWING
THE
EYE
DIRECTION
IN
ORDER
TO
COMPUTE
SPECULAR
REFLECTION
TERMS
FOR
EYE
SPACE
THE
VIEW
DIRECTION
IS
PARALLEL
TO
AND
IN
THE
DIRECTION
OF
THE
Z
AXIS
IN
THE
EXAMPLES
ABOVE
WE
COULD
HAVE
REPLACED
THE
EYEDIRECTION
WITH
THE
VECTOR
KNOWING
OUR
COORDINATES
WERE
IN
EYE
SPACE
BUT
FOR
CLARITY
AND
POTENTIAL
FLEXIBILITY
WE
USED
A
VARIABLE
THIS
COULD
BE
GENERALIZED
A
BIT
TO
ALLOW
A
LOCAL
VIEWER
MUCH
LIKE
WE
HAD
LOCAL
LIGHTS
RATHER
THAN
ONLY
DIRECTIONAL
LIGHTS
WITH
A
LOCAL
VIEWER
SPECULAR
HIGHLIGHTS
ON
MULTIPLE
OBJECTS
WILL
TEND
TOWARD
THE
EYE
LOCATION
RATHER
THAN
ALL
BEING
IN
THE
SAME
PARALLEL
DIRECTION
LIMITATIONS
OF
THE
CLASSIC
LIGHTING
MODEL
THE
CLASSIC
LIGHTING
MODEL
WORKS
PRETTY
WELL
AT
WHAT
IT
TRIES
TO
DO
MODELING
THE
SURFACE
REFLECTION
PROPERTIES
MODELING
EACH
LIGHT
COMBIN
ING
THEM
TOGETHER
TO
MODULATE
AN
UNDERLYING
COLOR
AND
GETTING
A
PRETTY
REALISTIC
APPROXIMATION
OF
WHAT
COLOR
IS
SCATTERED
AND
REFLECTED
YET
THERE
ARE
SOME
IMPORTANT
THINGS
MISSING
SHADOWS
ARE
A
BIG
ITEM
WE
LIT
EACH
SURFACE
AS
IF
IT
WAS
THE
ONLY
SURFACE
PRESENT
WITH
NO
OTHER
OBJECTS
BLOCKING
THE
PATH
OF
THE
LIGHTS
TO
THE
SURFACE
WE
WILL
PROVIDE
TECHNIQUES
FOR
SHADOWING
LATER
IN
THIS
CHAPTER
ANOTHER
BIG
MISSING
ITEM
IS
ACCURATE
AMBIENT
LIGHTING
IF
YOU
LOOK
AROUND
A
ROOM
YOU
WON
T
SEE
A
CONSTANT
LEVEL
OF
AMBIENT
LIGHTING
CORNERS
FOR
EXAMPLE
ARE
DARKER
THAN
OTHER
AREAS
AS
ANOTHER
EXAMPLE
CONSIDER
A
BRIGHT
RED
BALL
RESTING
NEAR
OTHER
OBJECTS
YOU
LL
PROBABLY
SEE
THAT
THE
AMBIENT
LIGHT
AROUND
THE
OTHER
OBJECTS
HAS
A
REDDISH
TINT
CREATED
BY
THE
CLASSIC
LIGHTING
MODEL
RED
BALL
THESE
NEARBY
OBJECTS
THEN
REFLECT
A
REDDER
AMBIENT
LIGHT
THAN
OBJECTS
FURTHER
FROM
THE
BALL
WE
LOOK
AT
SOME
TECHNIQUES
FOR
ADDRESSING
THIS
IN
ADVANCED
LIGHTING
MODELS
ON
PAGE
OTHER
TECHNIQUES
FOR
ADDING
IN
THIS
REALISM
LOOSELY
REFERRED
TO
AS
GLOBAL
ILLUMINATION
ARE
OUTSIDE
THE
SCOPE
OF
THIS
BOOK
A
GLOWING
OBJECT
OR
VERY
BRIGHT
OBJECT
MIGHT
ALSO
HAVE
BOTH
A
HALO
AROUND
IT
AS
WELL
AS
LENS
FLARE
WE
USED
AN
EMISSION
VALUE
EARLIER
TO
MODEL
A
GLOWING
OBJECT
BUT
THAT
EFFECT
IS
LIMITED
TO
THE
ACTUAL
GEOMETRIC
EXTENT
OF
THE
OBJECT
WHEREAS
HALOING
AND
LENS
FLARE
EXTEND
BEYOND
THE
OBJECT
IN
REAL
LIFE
THESE
EFFECTS
ARE
APPARENT
NOT
ONLY
WHEN
TAKING
VIDEOS
OR
PHOTO
GRAPHS
THE
LENS
AND
FLUID
IN
OUR
EYE
ALSO
MAKE
THEM
OCCUR
MULTIPLE
TECHNIQUES
HAVE
BEEN
DEVELOPED
FOR
RENDERING
THIS
EFFECT
A
TEXTURED
SURFACE
USUALLY
IS
NOT
PERFECTLY
SMOOTH
THE
BUMPS
ON
THE
SURFACE
MUST
INDIVIDUALLY
BE
AFFECTED
BY
LIGHTING
OR
THE
SURFACE
ENDS
UP
LOOKING
ARTIFICIALLY
FLAT
BUMP
MAPPING
TECHNIQUES
FOR
DOING
THIS
ARE
DESCRIBED
IN
CHAPTER
PROCEDURAL
TEXTURING
ADVANCED
LIGHTING
MODELS
THE
CLASSIC
LIGHTING
MODEL
LACKS
SOME
REALISM
TO
GENERATE
MORE
REALISTIC
IMAGES
WE
NEED
TO
HAVE
MORE
REALISTIC
MODELS
FOR
ILLUMINATION
SHADOWS
AND
REFLECTION
THAN
THOSE
WE
VE
DISCUSSED
SO
FAR
IN
THIS
SECTION
WE
EXPLORE
HOW
OPENGL
SHADING
LANGUAGE
CAN
HELP
US
IMPLEMENT
SOME
OF
THESE
MODELS
MUCH
HAS
BEEN
WRITTEN
ON
THE
TOPIC
OF
LIGHTING
IN
COMPUTER
GRAPHICS
WE
EXAMINE
ONLY
A
FEW
METHODS
NOW
IDEALLY
YOU
LL
BE
INSPIRED
TO
TRY
IMPLEMENTING
SOME
OTHERS
ON
YOUR
OWN
HEMISPHERE
LIGHTING
EARLIER
WE
LOOKED
CAREFULLY
AT
THE
CLASSIC
LIGHTING
MODEL
HOWEVER
THIS
MODEL
HAS
A
NUMBER
OF
FLAWS
AND
THESE
FLAWS
BECOME
MORE
APPARENT
AS
WE
STRIVE
FOR
MORE
REALISTIC
RENDERING
EFFECTS
ONE
PROBLEM
IS
THAT
OBJECTS
IN
A
SCENE
DO
NOT
TYPICALLY
RECEIVE
ALL
THEIR
ILLUMINATION
FROM
A
SMALL
NUMBER
OF
SPECIFIC
LIGHT
SOURCES
INTERREFLECTIONS
BETWEEN
OBJECTS
OFTEN
HAVE
NOTICEABLE
AND
IMPORTANT
CONTRIBUTIONS
TO
OBJECTS
IN
THE
SCENE
THE
CHAPTER
LIGHT
AND
SHADOW
TRADITIONAL
COMPUTER
GRAPHICS
ILLUMINATION
MODEL
ATTEMPTS
TO
ACCOUNT
FOR
THIS
PHENOMENA
THROUGH
AN
AMBIENT
LIGHT
TERM
HOWEVER
THIS
AMBIENT
LIGHT
TERM
IS
USUALLY
APPLIED
EQUALLY
ACROSS
AN
OBJECT
OR
AN
ENTIRE
SCENE
THE
RESULT
IS
A
FLAT
AND
UNREALISTIC
LOOK
FOR
AREAS
OF
THE
SCENE
THAT
ARE
NOT
AFFECTED
BY
DIRECT
ILLUMINATION
ANOTHER
PROBLEM
WITH
THE
TRADITIONAL
ILLUMINATION
MODEL
IS
THAT
LIGHT
SOURCES
IN
REAL
SCENES
ARE
NOT
POINT
LIGHTS
OR
EVEN
SPOTLIGHTS
THEY
ARE
AREA
LIGHTS
CONSIDER
THE
INDIRECT
LIGHT
COMING
IN
FROM
THE
WINDOW
AND
ILLUMINATING
THE
FLOOR
AND
THE
LONG
FLUORESCENT
LIGHT
BULBS
BEHIND
A
RECTANGULAR
TRANSLUCENT
PANEL
FOR
AN
EVEN
MORE
COMMON
CASE
CONSIDER
THE
ILLUMINATION
OUTDOORS
ON
A
CLOUDY
DAY
IN
THIS
CASE
THE
ENTIRE
VISIBLE
HEMISPHERE
IS
ACTING
LIKE
AN
AREA
LIGHT
SOURCE
IN
SEVERAL
PRESENTATIONS
AND
TUTORIALS
CHAS
BOYD
DAN
BAKER
AND
PHILIP
TAYLOR
OF
MICROSOFT
DESCRIBED
THIS
SITUATION
AS
HEMISPHERE
LIGHTING
LET
LOOK
AT
HOW
WE
MIGHT
CREATE
AN
OPENGL
SHADER
TO
SIMULATE
THIS
TYPE
OF
LIGHTING
ENVIRONMENT
THE
IDEA
BEHIND
HEMISPHERE
LIGHTING
IS
THAT
WE
MODEL
THE
ILLUMINATION
AS
TWO
HEMISPHERES
THE
UPPER
HEMISPHERE
REPRESENTS
THE
SKY
AND
THE
LOWER
HEMISPHERE
REPRESENTS
THE
GROUND
A
LOCATION
ON
AN
OBJECT
WITH
A
SURFACE
NORMAL
THAT
POINTS
STRAIGHT
UP
GETS
ALL
OF
ITS
ILLUMINATION
FROM
THE
UPPER
HEMISPHERE
AND
A
LOCATION
WITH
A
SURFACE
NORMAL
POINTING
STRAIGHT
DOWN
GETS
ALL
OF
ITS
ILLUMINATION
FROM
THE
LOWER
HEMISPHERE
SEE
FIGURE
BY
PICKING
APPROPRIATE
COLORS
FOR
THE
TWO
HEMISPHERES
WE
CAN
MAKE
THE
SPHERE
LOOK
AS
THOUGH
LOCATIONS
WITH
NORMALS
POINTING
UP
ARE
ILLUMINATED
AND
THOSE
WITH
SURFACE
NORMALS
POINTING
DOWN
ARE
IN
SHADOW
TO
COMPUTE
THE
ILLUMINATION
AT
ANY
POINT
ON
THE
SURFACE
WE
COMPUTE
THE
LINEAR
INTERPOLATION
FOR
THE
ILLUMINATION
RECEIVED
AT
THAT
POINT
COLOR
A
SKYCOLOR
A
GROUNDCOLOR
WHERE
A
SIN
Θ
FOR
Θ
A
SIN
Θ
FOR
Θ
WITH
Θ
BEING
THE
ANGLE
BETWEEN
THE
SURFACE
NORMAL
AND
THE
NORTH
POLE
DIRECTION
ADVANCED
LIGHTING
MODELS
FIGURE
A
SPHERE
ILLUMINATED
USING
THE
HEMISPHERE
LIGHTING
MODEL
IN
FIGURE
A
POINT
ON
THE
TOP
OF
THE
SPHERE
THE
BLACK
X
RECEIVES
ILLUMINATION
ONLY
FROM
THE
UPPER
HEMISPHERE
I
E
THE
SKY
COLOR
A
POINT
ON
THE
BOTTOM
OF
THE
SPHERE
THE
WHITE
X
RECEIVES
ILLUMINATION
ONLY
FROM
THE
LOWER
HEMISPHERE
I
E
THE
GROUND
COLOR
A
POINT
RIGHT
ON
THE
EQUATOR
WOULD
RECEIVE
HALF
OF
ITS
ILLUMINATION
FROM
THE
UPPER
HEMISPHERE
AND
HALF
FROM
THE
LOWER
HEMISPHERE
E
G
SKY
COLOR
AND
GROUND
COLOR
BUT
WE
CAN
ACTUALLY
CALCULATE
A
IN
ANOTHER
WAY
THAT
IS
SIMPLER
BUT
ROUGHLY
EQUIVALENT
A
COS
Θ
THIS
APPROACH
ELIMINATES
THE
NEED
FOR
A
CONDITIONAL
FURTHERMORE
WE
CAN
EASILY
COMPUTE
THE
COSINE
OF
THE
ANGLE
BETWEEN
TWO
UNIT
VECTORS
BY
TAKING
THE
DOT
PRODUCT
OF
THE
TWO
VECTORS
THIS
IS
AN
EXAMPLE
OF
WHAT
JIM
BLINN
LIKES
TO
CALL
THE
ANCIENT
CHINESE
ART
OF
CHI
TING
IN
COMPUTER
GRAPHICS
IF
IT
LOOKS
GOOD
ENOUGH
IT
IS
GOOD
ENOUGH
IT
DOESN
T
REALLY
MATTER
WHETHER
YOUR
CALCULATIONS
ARE
PHYSICALLY
CORRECT
OR
A
BIT
OF
A
CHEAT
THE
DIFFERENCE
BETWEEN
THE
TWO
FUNCTIONS
IS
SHOWN
IN
FIGURE
THE
SHAPE
OF
THE
TWO
CHAPTER
LIGHT
AND
SHADOW
CURVES
IS
SIMILAR
ONE
IS
THE
MIRROR
OF
THE
OTHER
BUT
THE
AREA
UNDER
THE
CURVES
IS
THE
SAME
THIS
GENERAL
EQUIVALENCY
IS
GOOD
ENOUGH
FOR
THE
EFFECT
WE
RE
AFTER
AND
THE
SHADER
IS
SIMPLER
AND
WILL
EXECUTE
FASTER
AS
WELL
CHI
TING
SOLUTION
ACTUAL
SOLUTION
O
FIGURE
ANALYTIC
HEMISPHERE
LIGHTING
FUNCTION
COMPARES
THE
ACTUAL
ANALYTIC
FUNCTION
FOR
HEMISPHERE
LIGHTING
TO
A
SIMILAR
BUT
HIGHER
PERFORMANCE
FUNCTION
FOR
THE
HEMISPHERE
SHADER
WE
NEED
TO
PASS
IN
UNIFORM
VARIABLES
FOR
THE
SKY
COLOR
AND
THE
GROUND
COLOR
WE
CAN
ALSO
CONSIDER
THE
NORTH
POLE
TO
BE
OUR
LIGHT
POSITION
IF
WE
PASS
THIS
IN
AS
A
UNIFORM
VARIABLE
WE
CAN
LIGHT
THE
MODEL
FROM
DIFFERENT
DIRECTIONS
EXAMPLE
SHOWS
A
VERTEX
SHADER
THAT
IMPLEMENTS
HEMISPHERE
LIGHTING
AS
YOU
CAN
SEE
THE
SHADER
IS
QUITE
SIMPLE
THE
MAIN
PURPOSE
OF
THE
SHADER
IS
TO
COMPUTE
THE
DIFFUSE
COLOR
VALUE
AND
LEAVE
IT
IN
THE
USER
DEFINED
OUT
VARIABLE
COLOR
AS
WITH
THE
CHAPTER
EARLIER
EXAMPLES
RESULTS
FOR
THIS
SHADER
ARE
SHOWN
IN
FIGURE
COMPARE
THE
HEMISPHERE
LIGHTING
D
WITH
A
SINGLE
DIRECTIONAL
LIGHT
SOURCE
A
AND
B
NOT
ONLY
IS
THE
HEMISPHERE
SHADER
SIMPLER
AND
MORE
EFFICIENT
IT
PRODUCES
A
MUCH
MORE
REALISTIC
LIGHTING
EFFECT
TOO
THIS
LIGHTING
MODEL
CAN
BE
USED
FOR
TASKS
LIKE
MODEL
PREVIEW
WHERE
IT
IS
IMPORTANT
TO
EXAMINE
ALL
THE
DETAILS
OF
A
MODEL
IT
CAN
ALSO
BE
USED
IN
CONJUNCTION
WITH
THE
TRADITIONAL
COMPUTER
GRAPHICS
ILLUMINATION
MODEL
POINT
DIRECTIONAL
OR
SPOTLIGHTS
CAN
BE
ADDED
ON
TOP
OF
THE
HEMISPHERE
LIGHTING
MODEL
TO
PROVIDE
MORE
ILLUMINATION
TO
IMPOR
TANT
PARTS
OF
THE
SCENE
AND
AS
ALWAYS
IF
YOU
WANT
TO
MOVE
SOME
OR
ALL
THESE
COMPUTATIONS
TO
THE
FRAGMENT
SHADER
YOU
MAY
DO
SO
ADVANCED
LIGHTING
MODELS
FIGURE
LIGHTING
MODEL
COMPARISON
A
COMPARISON
OF
SOME
OF
THE
LIGHTING
MODELS
DISCUSSED
IN
THIS
CHAPTER
THE
MODEL
USES
A
BASE
COLOR
OF
WHITE
RGB
TO
EMPHASIZE
AREAS
OF
LIGHT
AND
SHADOW
A
USES
A
DIRECTIONAL
LIGHT
ABOVE
AND
TO
THE
RIGHT
OF
THE
MODEL
B
USES
A
DIRECTIONAL
LIGHT
DIRECTLY
ABOVE
THE
MODEL
THESE
TWO
IMAGES
ILLUSTRATE
THE
DIFFICULTIES
WITH
THE
TRADITIONAL
LIGHTING
MODEL
DETAIL
IS
LOST
IN
AREAS
OF
SHADOW
D
ILLUSTRATES
HEMISPHERE
LIGHTING
E
ILLUSTRATES
SPHERICAL
HARMONIC
LIGHTING
USING
THE
OLD
TOWN
SQUARE
COEFFICIENTS
INC
EXAMPLE
VERTEX
SHADER
FOR
HEMISPHERE
LIGHTING
VERSION
CORE
UNIFORM
LIGHTPOSITION
UNIFORM
SKYCOLOR
UNIFORM
GROUNDCOLOR
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
IN
VERTEXPOSITION
IN
VERTEXNORMAL
CHAPTER
LIGHT
AND
SHADOW
OUT
COLOR
VOID
MAIN
POSITION
MVMATRIX
VERTEXPOSITION
TNORM
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
LIGHTVEC
NORMALIZE
LIGHTPOSITION
POSITION
FLOAT
COSTHETA
DOT
TNORM
LIGHTVEC
FLOAT
A
COSTHETA
COLOR
MIX
GROUNDCOLOR
SKYCOLOR
A
MVPMATRIX
VERTEXPOSITION
ONE
OF
THE
ISSUES
WITH
THIS
MODEL
IS
THAT
IT
DOESN
T
ACCOUNT
FOR
SELF
OCCLUSION
REGIONS
THAT
SHOULD
REALLY
BE
IN
SHADOW
BECAUSE
OF
THE
GEOMETRY
OF
THE
MODEL
WILL
APPEAR
TOO
BRIGHT
WE
WILL
REMEDY
THIS
LATER
IMAGE
BASED
LIGHTING
IF
WE
RE
TRYING
TO
ACHIEVE
REALISTIC
LIGHTING
IN
A
COMPUTER
GRAPHICS
SCENE
WHY
NOT
JUST
USE
AN
ENVIRONMENT
MAP
FOR
THE
LIGHTING
THIS
APPROACH
TO
ILLUMINATION
IS
CALLED
IMAGE
BASED
LIGHTING
IT
HAS
BEEN
POPULARIZED
IN
RECENT
YEARS
BY
RESEARCHER
PAUL
DEBEVEC
AT
THE
UNIVERSITY
OF
SOUTHERN
CALIFORNIA
CHURCHES
AND
AUDITORIUMS
MAY
HAVE
DOZENS
OF
LIGHT
SOURCES
ON
THE
CEILING
ROOMS
WITH
MANY
WINDOWS
ALSO
HAVE
COMPLEX
LIGHTING
ENVIRONMENTS
IT
IS
OFTEN
EASIER
AND
MUCH
MORE
EFFICIENT
TO
SAMPLE
THE
LIGHTING
IN
SUCH
ENVIRONMENTS
AND
STORE
THE
RESULTS
IN
ONE
OR
MORE
ENVIRONMENT
MAPS
THAN
IT
IS
TO
SIMULATE
NUMEROUS
INDIVIDUAL
LIGHT
SOURCES
THE
STEPS
INVOLVED
IN
IMAGE
BASED
LIGHTING
ARE
AS
FOLLOWS
USE
A
LIGHT
PROBE
E
G
A
REFLECTIVE
SPHERE
TO
CAPTURE
E
G
PHOTOGRAPH
THE
ILLUMINATION
THAT
OCCURS
IN
A
REAL
WORLD
SCENE
THE
CAPTURED
OMNIDIRECTIONAL
HIGH
DYNAMIC
RANGE
IMAGE
IS
CALLED
A
LIGHT
PROBE
IMAGE
USE
THE
LIGHT
PROBE
IMAGE
TO
CREATE
A
REPRESENTATION
OF
THE
ENVIRONMENT
E
G
AN
ENVIRONMENT
MAP
PLACE
THE
SYNTHETIC
OBJECTS
TO
BE
RENDERED
INSIDE
THE
ENVIRONMENT
RENDER
THE
SYNTHETIC
OBJECTS
BY
USING
THE
REPRESENTATION
OF
THE
ENVIRONMENT
CREATED
IN
STEP
ON
HIS
WEB
SITE
WWW
DEBEVEC
ORG
DEBEVEC
OFFERS
A
NUMBER
OF
USEFUL
THINGS
TO
DEVELOPERS
FOR
ONE
HE
HAS
MADE
AVAILABLE
A
NUMBER
OF
IMAGES
THAT
CAN
BE
USED
AS
HIGH
QUALITY
ENVIRONMENT
MAPS
TO
PROVIDE
REALISTIC
ADVANCED
LIGHTING
MODELS
LIGHTING
IN
A
SCENE
THESE
IMAGES
ARE
HIGH
DYNAMIC
RANGE
HDR
IMAGES
THAT
REPRESENT
EACH
COLOR
COMPONENT
WITH
A
BIT
FLOATING
POINT
VALUE
SUCH
IMAGES
CAN
REPRESENT
A
MUCH
GREATER
RANGE
OF
INTENSITY
VALUES
THAN
CAN
BIT
PER
COMPONENT
IMAGES
FOR
ANOTHER
HE
MAKES
AVAILABLE
A
TOOL
CALLED
HDRSHOP
THAT
MANIPULATES
AND
TRANSFORMS
THESE
ENVIRONMENT
MAPS
THROUGH
LINKS
TO
HIS
VARIOUS
PUBLICATIONS
AND
TUTORIALS
HE
ALSO
PROVIDES
STEP
BY
STEP
INSTRUCTIONS
ON
CREATING
YOUR
OWN
ENVIRONMENT
MAPS
AND
USING
THEM
TO
ADD
REALISTIC
LIGHTING
EFFECTS
TO
COMPUTER
GRAPHICS
SCENES
FOLLOWING
DEBEVEC
GUIDANCE
WE
PURCHASED
A
INCH
CHROME
STEEL
BALL
FROM
MCMASTER
CARR
SUPPLY
COMPANY
WWW
MCMASTER
COM
WE
USED
THIS
BALL
TO
CAPTURE
A
LIGHT
PROBE
IMAGE
FROM
THE
CENTER
OF
THE
SQUARE
OUTSIDE
OUR
OFFICE
BUILDING
IN
DOWNTOWN
FORT
COLLINS
COLORADO
SHOWN
IN
FIGURE
WE
THEN
USED
HDRSHOP
TO
CREATE
A
LAT
LONG
ENVIRONMENT
MAP
SHOWN
IN
FIGURE
AND
A
CUBE
MAP
SHOWN
IN
FIGURE
THE
CUBE
MAP
AND
LAT
LONG
MAP
CAN
BE
USED
TO
PERFORM
ENVIRONMENT
MAPPING
THAT
SHADER
SIMULATED
A
SURFACE
WITH
AN
UNDERLYING
BASE
COLOR
AND
DIFFUSE
REFLECTION
CHARACTERISTICS
THAT
WAS
COVERED
BY
A
TRANSPARENT
MIRROR
LIKE
LAYER
THAT
REFLECTED
THE
ENVIRONMENT
FLAWLESSLY
CHAPTER
LIGHT
AND
SHADOW
FIGURE
LIGHT
PROBE
IMAGE
A
LIGHT
PROBE
IMAGE
OF
OLD
TOWN
SQUARE
FORT
COLLINS
COLORADO
INC
FIGURE
LAT
LONG
MAP
AN
EQUIRECTANGULAR
OR
LAT
LONG
TEXTURE
MAP
OF
OLD
TOWN
SQUARE
FORT
COLLINS
COLORADO
INC
ADVANCED
LIGHTING
MODELS
FIGURE
CUBE
MAP
A
CUBE
MAP
VERSION
OF
THE
OLD
TOWN
SQUARE
LIGHT
PROBE
IMAGE
INC
WE
CAN
SIMULATE
OTHER
TYPES
OF
OBJECTS
IF
WE
MODIFY
THE
ENVIRONMENT
MAPS
BEFORE
THEY
ARE
USED
A
POINT
ON
THE
SURFACE
THAT
REFLECTS
LIGHT
IN
A
DIFFUSE
FASHION
REFLECTS
LIGHT
FROM
ALL
THE
LIGHT
SOURCES
THAT
ARE
IN
THE
HEMISPHERE
IN
THE
DIRECTION
OF
THE
SURFACE
NORMAL
AT
THAT
POINT
WE
CAN
T
REALLY
AFFORD
TO
ACCESS
THE
ENVIRONMENT
MAP
A
LARGE
NUMBER
OF
TIMES
IN
OUR
SHADER
WHAT
WE
CAN
DO
INSTEAD
IS
SIMILAR
TO
WHAT
WE
DISCUSSED
FOR
HEMISPHERE
LIGHTING
STARTING
FROM
OUR
LIGHT
PROBE
IMAGE
WE
CAN
CONSTRUCT
AN
ENVIRONMENT
MAP
FOR
DIFFUSE
LIGHTING
EACH
TEXEL
IN
THIS
ENVIRONMENT
MAP
WILL
CONTAIN
THE
WEIGHTED
AVERAGE
I
E
THE
CONVOLUTION
OF
OTHER
TEXELS
IN
THE
VISIBLE
HEMISPHERE
AS
DEFINED
BY
THE
SURFACE
NORMAL
THAT
WOULD
BE
USED
TO
ACCESS
THAT
TEXEL
IN
THE
ENVIRONMENT
CHAPTER
LIGHT
AND
SHADOW
AGAIN
HDRSHOP
HAS
EXACTLY
WHAT
WE
NEED
WE
CAN
USE
HDRSHOP
TO
CREATE
A
LAT
LONG
IMAGE
FROM
OUR
ORIGINAL
LIGHT
PROBE
IMAGE
WE
CAN
THEN
USE
A
COMMAND
BUILT
INTO
HDRSHOP
THAT
PERFORMS
THE
NECESSARY
CONVOLUTION
THIS
OPERATION
CAN
BE
TIME
CONSUMING
BECAUSE
AT
EACH
TEXEL
IN
THE
IMAGE
THE
CONTRIBUTIONS
FROM
HALF
OF
THE
OTHER
TEXELS
IN
THE
IMAGE
MUST
BE
CONSIDERED
LUCKILY
WE
DON
T
NEED
A
VERY
LARGE
IMAGE
FOR
THIS
PURPOSE
THE
EFFECT
IS
ESSENTIALLY
THE
SAME
AS
CREATING
A
VERY
BLURRY
IMAGE
OF
THE
ORIGINAL
LIGHT
PROBE
IMAGE
SINCE
THERE
IS
NO
HIGH
FREQUENCY
CONTENT
IN
THE
COMPUTED
IMAGE
A
CUBE
MAP
WITH
FACES
THAT
ARE
OR
WORKS
JUST
FINE
A
SINGLE
TEXTURE
ACCESS
INTO
THIS
DIFFUSE
ENVIRONMENT
MAP
PROVIDES
US
WITH
THE
VALUE
NEEDED
FOR
OUR
DIFFUSE
REFLECTION
CALCULATION
WHAT
ABOUT
THE
SPECULAR
CONTRIBUTION
A
SURFACE
THAT
IS
VERY
SHINY
WILL
REFLECT
THE
ILLUMINATION
FROM
A
LIGHT
SOURCE
JUST
LIKE
A
MIRROR
A
SINGLE
POINT
ON
THE
SURFACE
REFLECTS
A
SINGLE
POINT
IN
THE
ENVIRONMENT
FOR
SURFACES
THAT
ARE
ROUGHER
THE
HIGHLIGHT
DEFOCUSES
AND
SPREADS
OUT
IN
THIS
CASE
A
SINGLE
POINT
ON
THE
SURFACE
REFLECTS
SEVERAL
POINTS
IN
THE
ENVIRONMENT
THOUGH
NOT
THE
WHOLE
VISIBLE
HEMISPHERE
LIKE
A
DIFFUSE
SURFACE
HDRSHOP
LETS
US
BLUR
AN
ENVIRONMENT
MAP
BY
PROVIDING
A
PHONG
EXPONENT
A
DEGREE
OF
SHININESS
A
VALUE
OF
CONVOLVES
THE
ENVIRONMENT
MAP
TO
SIMULATE
DIFFUSE
REFLECTION
AND
A
VALUE
OF
OR
MORE
CONVOLVES
THE
ENVIRONMENT
MAP
TO
SIMULATE
A
SOMEWHAT
SHINY
SURFACE
THE
SHADERS
THAT
IMPLEMENT
THESE
CONCEPTS
END
UP
BEING
QUITE
SIMPLE
AND
QUITE
FAST
IN
THE
VERTEX
SHADER
ALL
THAT
IS
NEEDED
IS
TO
COMPUTE
THE
REFLECTION
DIRECTION
AT
EACH
VERTEX
THIS
VALUE
AND
THE
SURFACE
NORMAL
ARE
SENT
TO
THE
FRAGMENT
SHADER
AS
OUT
VARIABLES
THEY
ARE
INTERPOLATED
ACROSS
EACH
POLYGON
AND
THE
INTERPOLATED
VALUES
ARE
USED
IN
THE
FRAGMENT
SHADER
TO
ACCESS
THE
TWO
ENVIRONMENT
MAPS
IN
ORDER
TO
OBTAIN
THE
DIFFUSE
AND
THE
SPECULAR
COMPONENTS
THE
VALUES
OBTAINED
FROM
THE
ENVIRONMENT
MAPS
ARE
COMBINED
WITH
THE
OBJECT
BASE
COLOR
TO
ARRIVE
AT
THE
FINAL
COLOR
FOR
THE
FRAGMENT
THE
SHADERS
ARE
SHOWN
IN
EXAMPLE
EXAMPLES
OF
IMAGES
CREATED
WITH
THIS
TECHNIQUE
ARE
SHOWN
IN
FIGURE
ADVANCED
LIGHTING
MODELS
FIGURE
EFFECTS
OF
DIFFUSE
AND
SPECULAR
ENVIRONMENT
MAPS
A
VARIETY
OF
EFFECTS
USING
THE
OLD
TOWN
SQUARE
DIFFUSE
AND
SPECULAR
EN
VIRONMENT
MAPS
SHOWN
IN
FIGURE
LEFT
BASECOLOR
SET
TO
SPECULARPERCENT
IS
AND
DIFFUSEPERCENT
IS
MIDDLE
BASECOLOR
IS
SET
TO
SPECULARPERCENT
IS
SET
TO
AND
DIFFUSEPERCENT
IS
SET
TO
RIGHT
BASECOLOR
IS
SET
TO
SPECULARPERCENT
IS
SET
TO
AND
DIF
FUSEPERCENT
IS
SET
TO
INC
EXAMPLE
SHADERS
FOR
IMAGE
BASED
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
IMAGE
BASED
LIGHTING
VERSION
CORE
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
IN
VERTEXPOSITION
IN
VERTEXNORMAL
OUT
REFLECTDIR
OUT
NORMAL
VOID
MAIN
NORMAL
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
POS
MVMATRIX
VERTEXPOSITION
EYEDIR
POS
XYZ
REFLECTDIR
REFLECT
EYEDIR
NORMAL
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
FOR
IMAGE
BASED
LIGHTING
VERSION
CORE
CHAPTER
LIGHT
AND
SHADOW
UNIFORM
BASECOLOR
UNIFORM
FLOAT
SPECULARPERCENT
UNIFORM
FLOAT
DIFFUSEPERCENT
UNIFORM
SAMPLERCUBE
SPECULARENVMAP
UNIFORM
SAMPLERCUBE
DIFFUSEENVMAP
IN
REFLECTDIR
IN
NORMAL
OUT
FRAGCOLOR
VOID
MAIN
LOOK
UP
ENVIRONMENT
MAP
VALUES
IN
CUBE
MAPS
DIFFUSECOLOR
TEXTURE
DIFFUSEENVMAP
NORMALIZE
NORMAL
SPECULARCOLOR
TEXTURE
SPECULARENVMAP
NORMALIZE
REFLECTDIR
ADD
LIGHTING
TO
BASE
COLOR
AND
MIX
MIX
BASECOLOR
DIFFUSECOLOR
BASECOLOR
DIFFUSEPERCENT
COLOR
MIX
COLOR
SPECULARCOLOR
COLOR
SPECULARPERCENT
FRAGCOLOR
COLOR
THE
ENVIRONMENT
MAPS
THAT
ARE
USED
CAN
REPRODUCE
THE
LIGHT
FROM
THE
WHOLE
SCENE
OF
COURSE
OBJECTS
WITH
DIFFERENT
SPECULAR
REFLECTION
PROPERTIES
REQUIRE
DIFFERENT
SPECULAR
ENVIRONMENT
MAPS
AND
PRODUCING
THESE
ENVIRONMENT
MAPS
REQUIRES
SOME
MANUAL
EFFORT
AND
LENGTHY
PRE
PROCESSING
BUT
THE
RESULTING
QUALITY
AND
PERFORMANCE
MAKE
IMAGE
BASED
LIGHTING
A
GREAT
CHOICE
IN
MANY
SITUATIONS
LIGHTING
WITH
SPHERICAL
HARMONICS
IN
RAVI
RAMAMOORTHI
AND
PAT
HANRAHAN
PRESENTED
A
METHOD
THAT
USES
SPHERICAL
HARMONICS
FOR
COMPUTING
THE
DIFFUSE
LIGHTING
TERM
THIS
METHOD
REPRODUCES
ACCURATE
DIFFUSE
REFLECTION
BASED
ON
THE
CONTENT
OF
A
LIGHT
PROBE
IMAGE
WITHOUT
ACCESSING
THE
LIGHT
PROBE
IMAGE
AT
RUNTIME
THE
LIGHT
PROBE
IMAGE
IS
PRE
PROCESSED
TO
PRODUCE
COEFFICIENTS
THAT
ARE
USED
IN
A
MATHEMATICAL
REPRESENTATION
OF
THE
IMAGE
AT
RUNTIME
THE
MATHEMATICS
BEHIND
THIS
APPROACH
IS
BEYOND
THE
SCOPE
OF
THIS
BOOK
INSTEAD
WE
LAY
THE
NECESSARY
GROUNDWORK
FOR
THIS
SHADER
BY
DESCRIBING
THE
UNDERLYING
MATHEMATICS
IN
AN
INTUITIVE
FASHION
THE
RESULT
IS
REMARKABLY
SIMPLE
ACCURATE
AND
REALISTIC
AND
IT
CAN
EASILY
BE
CODIFIED
IN
AN
OPENGL
SHADER
THIS
TECHNIQUE
HAS
ALREADY
BEEN
USED
SUCCESSFULLY
TO
PROVIDE
REAL
TIME
ADVANCED
LIGHTING
MODELS
ILLUMINATION
FOR
GAMES
AND
HAS
APPLICATIONS
IN
COMPUTER
VISION
AND
OTHER
AREAS
AS
WELL
SPHERICAL
HARMONICS
PROVIDES
A
FREQUENCY
SPACE
REPRESENTATION
OF
AN
IMAGE
OVER
A
SPHERE
IT
IS
ANALOGOUS
TO
THE
FOURIER
TRANSFORM
ON
THE
LINE
OR
CIRCLE
THIS
REPRESENTATION
OF
THE
IMAGE
IS
CONTINUOUS
AND
ROTATIONALLY
INVARIANT
USING
THIS
REPRESENTATION
FOR
A
LIGHT
PROBE
IMAGE
RAMAMOORTHI
AND
HANRAHAN
SHOWED
THAT
YOU
COULD
ACCURATELY
REPRODUCE
THE
DIFFUSE
REFLECTION
FROM
A
SURFACE
WITH
JUST
NINE
SPHERICAL
HARMONIC
BASIS
FUNCTIONS
THESE
NINE
SPHERICAL
HARMONICS
ARE
OBTAINED
WITH
CONSTANT
LINEAR
AND
QUADRATIC
POLYNOMIALS
OF
THE
NORMALIZED
SURFACE
NORMAL
INTUITIVELY
WE
CAN
SEE
THAT
IT
IS
PLAUSIBLE
TO
ACCURATELY
SIMULATE
THE
DIFFUSE
REFLECTION
WITH
A
SMALL
NUMBER
OF
BASIS
FUNCTIONS
IN
FREQUENCY
SPACE
SINCE
DIFFUSE
REFLECTION
VARIES
SLOWLY
ACROSS
A
SURFACE
WITH
JUST
NINE
TERMS
USED
THE
AVERAGE
ERROR
OVER
ALL
SURFACE
ORIENTATIONS
IS
LESS
THAN
PERCENT
FOR
ANY
PHYSICAL
INPUT
LIGHTING
DISTRIBUTION
WITH
DEBEVEC
LIGHT
PROBE
IMAGES
THE
AVERAGE
ERROR
WAS
SHOWN
TO
BE
LESS
THAN
PERCENT
AND
THE
MAXIMUM
ERROR
FOR
ANY
PIXEL
WAS
LESS
THAN
PERCENT
EACH
SPHERICAL
HARMONIC
BASIS
FUNCTION
HAS
A
COEFFICIENT
THAT
DEPENDS
ON
THE
LIGHT
PROBE
IMAGE
BEING
USED
THE
COEFFICIENTS
ARE
DIFFERENT
FOR
EACH
COLOR
CHANNEL
SO
YOU
CAN
THINK
OF
EACH
COEFFICIENT
AS
AN
RGB
VALUE
A
PRE
PROCESSING
STEP
IS
REQUIRED
TO
COMPUTE
THE
NINE
RGB
COEFFICIENTS
FOR
THE
LIGHT
PROBE
IMAGE
TO
BE
USED
RAMAMOORTHI
MAKES
THE
CODE
FOR
THIS
PRE
PROCESSING
STEP
AVAILABLE
FOR
FREE
ON
HIS
WEB
SITE
WE
USED
THIS
PROGRAM
TO
COMPUTE
THE
COEFFICIENTS
FOR
ALL
THE
LIGHT
PROBE
IMAGES
IN
DEBEVEC
LIGHT
PROBE
GALLERY
AS
WELL
AS
THE
OLD
TOWN
SQUARE
LIGHT
PROBE
IMAGE
AND
SUMMARIZED
THE
RESULTS
IN
TABLE
CHAPTER
LIGHT
AND
SHADOW
TABLE
SPHERICAL
HARMONIC
COEFFICIENTS
FOR
LIGHT
PROBE
IMAGES
44
35
00
00
00
08
38
08
39
06
01
09
04
03
02
03
37
THE
FORMULA
FOR
DIFFUSE
REFLECTION
USING
SPHERICAL
HARMONICS
IS
DIFFUSE
THE
CONSTANTS
RESULT
FROM
THE
DERIVATION
OF
THIS
FORMULA
AND
ARE
SHOWN
IN
THE
VERTEX
SHADER
CODE
IN
EXAMPLE
THE
L
COEFFICIENTS
ARE
THE
NINE
BASIS
FUNCTION
COEFFICIENTS
COMPUTED
FOR
A
SPECIFIC
LIGHT
PROBE
ADVANCED
LIGHTING
MODELS
IMAGE
IN
THE
PRE
PROCESSING
PHASE
THE
X
Y
AND
Z
VALUES
ARE
THE
COORDINATES
OF
THE
NORMALIZED
SURFACE
NORMAL
AT
THE
POINT
THAT
IS
TO
BE
SHADED
UNLIKE
LOW
DYNAMIC
RANGE
IMAGES
E
G
BITS
PER
COLOR
COMPONENT
THAT
HAVE
AN
IMPLICIT
MINIMUM
VALUE
OF
AND
AN
IMPLICIT
MAXIMUM
VALUE
OF
HDR
IMAGES
REPRESENTED
WITH
A
FLOATING
POINT
VALUE
FOR
EACH
COLOR
COMPONENT
DON
T
CONTAIN
WELL
DEFINED
MINIMUM
AND
MAXIMUM
VALUES
THE
MINIMUM
AND
MAXIMUM
VALUES
FOR
TWO
HDR
IMAGES
MAY
BE
QUITE
DIFFERENT
FROM
EACH
OTHER
UNLESS
THE
SAME
CALIBRATION
OR
CREATION
PROCESS
WAS
USED
TO
CREATE
BOTH
IMAGES
IT
IS
EVEN
POSSIBLE
TO
HAVE
AN
HDR
IMAGE
THAT
CONTAINS
NEGATIVE
VALUES
FOR
THIS
REASON
THE
VERTEX
SHADER
CONTAINS
AN
OVERALL
SCALING
FACTOR
TO
MAKE
THE
FINAL
EFFECT
LOOK
RIGHT
THE
VERTEX
SHADER
THAT
ENCODES
THE
FORMULA
FOR
THE
NINE
SPHERICAL
HARMONIC
BASIS
FUNCTIONS
IS
ACTUALLY
QUITE
SIMPLE
WHEN
THE
COMPILER
GETS
HOLD
OF
IT
IT
BECOMES
SIMPLER
STILL
AN
OPTIMIZING
COMPILER
TYPICALLY
REDUCES
ALL
THE
OPERATIONS
INVOLVING
CONSTANTS
THE
RESULTING
CODE
IS
QUITE
EFFICIENT
BECAUSE
IT
CONTAINS
A
RELATIVELY
SMALL
NUMBER
OF
ADDITION
AND
MULTIPLICATION
OPERATIONS
THAT
INVOLVE
THE
COMPONENTS
OF
THE
SURFACE
NORMAL
EXAMPLE
SHADERS
FOR
SPHERICAL
HARMONICS
LIGHTING
VERTEX
SHADER
VERTEX
SHADER
FOR
COMPUTING
SPHERICAL
HARMONICS
VERSION
CORE
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
UNIFORM
FLOAT
SCALEFACTOR
CONST
FLOAT
CONST
FLOAT
CONST
FLOAT
CONST
FLOAT
CONST
FLOAT
CONSTANTS
FOR
OLD
TOWN
SQUARE
LIGHTING
CONST
CONST
CONST
CONST
CONST
CONST
CONST
CONST
CONST
CHAPTER
LIGHT
AND
SHADOW
IN
VERTEXPOSITION
IN
VERTEXNORMAL
OUT
DIFFUSECOLOR
VOID
MAIN
TNORM
NORMALIZE
NORMALMATRIX
VERTEXNORMAL
DIFFUSECOLOR
TNORM
X
TNORM
X
TNORM
Y
TNORM
Y
TNORM
Z
TNORM
Z
TNORM
X
TNORM
Y
TNORM
X
TNORM
Z
TNORM
Y
TNORM
Z
TNORM
X
TNORM
Y
TNORM
Z
DIFFUSECOLOR
SCALEFACTOR
MVPMATRIX
VERTEXPOSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
FOR
LIGHTING
WITH
SPHERICAL
HARMONICS
VERSION
CORE
IN
DIFFUSECOLOR
OUT
FRAGCOLOR
VOID
MAIN
FRAGCOLOR
DIFFUSECOLOR
OUR
FRAGMENT
SHADER
SHOWN
IN
EXAMPLE
HAS
VERY
LITTLE
WORK
TO
DO
BECAUSE
THE
DIFFUSE
REFLECTION
TYPICALLY
CHANGES
SLOWLY
FOR
SCENES
WITHOUT
LARGE
POLYGONS
WE
CAN
REASONABLY
COMPUTE
IT
IN
THE
VERTEX
SHADER
AND
INTERPOLATE
IT
DURING
RASTERIZATION
AS
WITH
HEMISPHERICAL
LIGHTING
WE
CAN
ADD
PROCEDURALLY
DEFINED
POINT
DIRECTIONAL
OR
SPOTLIGHTS
ON
TOP
OF
THE
SPHERICAL
HARMONICS
LIGHTING
TO
PROVIDE
MORE
ILLUMINATION
TO
IMPORTANT
PARTS
OF
THE
SCENE
RESULTS
OF
THE
SPHERICAL
HARMONICS
SHADER
ARE
SHOWN
IN
FIGURE
WE
COULD
MAKE
THE
DIFFUSE
LIGHTING
FROM
THE
SPHERICAL
HARMONICS
COMPUTATION
MORE
SUBTLE
BY
BLENDING
IT
WITH
THE
OBJECT
BASE
COLOR
ADVANCED
LIGHTING
MODELS
FIGURE
SPHERICAL
HARMONICS
LIGHTING
LIGHTING
USING
THE
COEFFICIENTS
FROM
TABLE
FROM
THE
LEFT
OLD
TOWN
SQUARE
GRACE
CATHEDRAL
GALILEO
TOMB
CAMPUS
SUNSET
AND
ST
PETER
BASILICA
INC
THE
TRADE
OFFS
IN
USING
IMAGE
BASED
LIGHTING
VERSUS
PROCEDURALLY
DEFINED
LIGHTS
ARE
SIMILAR
TO
THE
TRADE
OFFS
BETWEEN
USING
STORED
TEXTURES
VERSUS
PROCEDURAL
TEXTURES
IMAGE
BASED
LIGHTING
TECHNIQUES
CAN
CAPTURE
AND
RE
CREATE
COMPLEX
LIGHTING
ENVIRONMENTS
RELATIVELY
EASILY
IT
WOULD
BE
EXCEEDINGLY
DIFFICULT
TO
SIMULATE
SUCH
AN
ENVIRONMENT
WITH
A
LARGE
NUMBER
OF
PROCEDURAL
LIGHT
SOURCES
ON
THE
OTHER
HAND
PROCEDURALLY
DEFINED
LIGHT
SOURCES
DO
NOT
USE
UP
TEXTURE
MEMORY
AND
CAN
EASILY
BE
MODIFIED
AND
ANIMATED
SHADOW
MAPPING
RECENT
ADVANCES
IN
COMPUTER
GRAPHICS
HAVE
PRODUCED
A
PLETHORA
OF
TECHNIQUES
FOR
RENDERING
REALISTIC
LIGHTING
AND
SHADOWS
OPENGL
CAN
BE
USED
TO
IMPLEMENT
ALMOST
ANY
OF
THEM
IN
THIS
SECTION
WE
WILL
COVER
ONE
TECHNIQUE
KNOWN
AS
SHADOW
MAPPING
WHICH
USES
A
DEPTH
TEXTURE
TO
DETERMINE
WHETHER
A
POINT
IS
LIT
OR
NOT
SHADOW
MAPPING
IS
A
MULTIPASS
TECHNIQUE
THAT
USES
DEPTH
TEXTURES
TO
PROVIDE
A
SOLUTION
TO
RENDERING
SHADOWS
A
KEY
PASS
IS
TO
VIEW
THE
SCENE
FROM
THE
SHADOW
CASTING
LIGHT
SOURCE
RATHER
THAN
FROM
THE
FINAL
VIEWPOINT
BY
MOVING
THE
VIEWPOINT
TO
THE
POSITION
OF
THE
LIGHT
SOURCE
YOU
WILL
NOTICE
THAT
EVERYTHING
SEEN
FROM
THAT
LOCATION
IS
LIT
THERE
ARE
NO
SHADOWS
FROM
THE
PERSPECTIVE
OF
THE
LIGHT
BY
RENDERING
THE
SCENE
DEPTH
FROM
THE
POINT
OF
VIEW
OF
THE
LIGHT
INTO
A
DEPTH
BUFFER
WE
CAN
OBTAIN
A
MAP
OF
THE
SHADOWED
AND
UNSHADOWED
POINTS
IN
THE
SCENE
A
SHADOW
MAP
THOSE
POINTS
VISIBLE
TO
THE
LIGHT
WILL
BE
RENDERED
AND
THOSE
POINTS
HIDDEN
FROM
THE
LIGHT
THOSE
IN
SHADOW
WILL
BE
CULLED
AWAY
BY
THE
DEPTH
TEST
THE
RESULTING
DEPTH
BUFFER
THEN
CONTAINS
THE
DISTANCE
FROM
THE
LIGHT
TO
THE
CLOSEST
POINT
TO
THE
LIGHT
FOR
EACH
PIXEL
IT
CONTAINS
NOTHING
FOR
ANYTHING
IN
SHADOW
CHAPTER
LIGHT
AND
SHADOW
THE
CONDENSED
TWO
PASS
DESCRIPTION
IS
AS
FOLLOWS
RENDER
THE
SCENE
FROM
THE
POINT
OF
VIEW
OF
THE
LIGHT
SOURCE
IT
DOESN
T
MATTER
WHAT
THE
SCENE
LOOKS
LIKE
YOU
ONLY
WANT
THE
DEPTH
VALUES
CREATE
A
SHADOW
MAP
BY
ATTACHING
A
DEPTH
TEXTURE
TO
A
FRAMEBUFFER
OBJECT
AND
RENDERING
DEPTH
DIRECTLY
INTO
IT
RENDER
THE
SCENE
FROM
THE
POINT
OF
VIEW
OF
THE
VIEWER
PROJECT
THE
SURFACE
COORDINATES
INTO
THE
LIGHT
REFERENCE
FRAME
AND
COMPARE
THEIR
DEPTHS
TO
THE
DEPTH
RECORDED
INTO
THE
LIGHT
DEPTH
TEXTURE
FRAGMENTS
THAT
ARE
FURTHER
FROM
THE
LIGHT
THAN
THE
RECORDED
DEPTH
VALUE
WERE
NOT
VISIBLE
TO
THE
LIGHT
AND
HENCE
IN
SHADOW
THE
FOLLOWING
SECTIONS
PROVIDE
A
MORE
DETAILED
DISCUSSION
ALONG
WITH
SAMPLE
CODE
ILLUSTRATING
EACH
OF
THE
STEPS
CREATING
A
SHADOW
MAP
THE
FIRST
STEP
IS
TO
CREATE
A
TEXTURE
MAP
OF
DEPTH
VALUES
AS
SEEN
FROM
THE
LIGHT
POINT
OF
VIEW
YOU
CREATE
THIS
BY
RENDERING
THE
SCENE
WITH
THE
VIEWPOINT
LOCATED
AT
THE
LIGHT
POSITION
BEFORE
WE
CAN
RENDER
DEPTH
INTO
A
DEPTH
TEXTURE
WE
NEED
TO
CREATE
THE
DEPTH
TEXTURE
AND
ATTACH
IT
TO
A
FRAMEBUFFER
OBJECT
EXAMPLE
SHOWS
HOW
TO
DO
THIS
THIS
CODE
IS
INCLUDED
IN
THE
INITIALIZATION
SEQUENCE
FOR
THE
APPLICATION
EXAMPLE
CREATING
A
FRAMEBUFFER
OBJECT
WITH
A
DEPTH
ATTACHMENT
CREATE
A
DEPTH
TEXTURE
GLGENTEXTURES
GLBINDTEXTURE
ALLOCATE
STORAGE
FOR
THE
TEXTURE
DATA
NULL
SET
THE
DEFAULT
FILTERING
MODES
GLTEXPARAMETERI
GLTEXPARAMETERI
SET
UP
DEPTH
COMPARISON
MODE
GLTEXPARAMETERI
GLTEXPARAMETERI
SET
UP
WRAPPING
MODES
GLTEXPARAMETERI
GLTEXPARAMETERI
GLBINDTEXTURE
CREATE
FBO
TO
RENDER
DEPTH
INTO
GLGENFRAMEBUFFERS
GLBINDFRAMEBUFFER
SHADOW
MAPPING
ATTACH
THE
DEPTH
TEXTURE
TO
IT
GLFRAMEBUFFERTEXTURE
DISABLE
COLOR
RENDERING
AS
THERE
ARE
NO
COLOR
ATTACHMENTS
GLDRAWBUFFER
IN
EXAMPLE
THE
DEPTH
TEXTURE
IS
CREATED
AND
ALLOCATED
USING
THE
INTERNAL
FORMAT
THIS
CREATES
A
TEXTURE
THAT
IS
CAPABLE
OF
BEING
USED
AS
THE
DEPTH
BUFFER
FOR
RENDERING
AND
AS
A
TEXTURE
THAT
CAN
BE
USED
LATER
FOR
READING
FROM
NOTICE
ALSO
HOW
WE
SET
THE
TEXTURE
COMPARISON
MODE
THIS
ALLOWS
US
TO
LEVERAGE
SHADOW
TEXTURES
A
FEATURE
OF
OPENGL
THAT
ALLOWS
THE
COMPARISON
BETWEEN
A
REFERENCE
VALUE
AND
A
VALUE
STORED
IN
THE
TEXTURE
TO
BE
PERFORMED
BY
THE
TEXTURE
HARDWARE
RATHER
THAN
EXPLICITLY
IN
THE
SHADER
IN
THE
EXAMPLE
HAS
PREVIOUSLY
BEEN
DEFINED
TO
BE
THE
DESIRED
SIZE
FOR
THE
SHADOW
MAP
THIS
SHOULD
GENERALLY
BE
AT
LEAST
AS
BIG
AS
THE
DEFAULT
FRAMEBUFFER
YOUR
OPENGL
WINDOW
OTHERWISE
ALIASING
AND
SAMPLING
ARTIFACTS
COULD
BE
PRESENT
IN
THE
RESULTING
IMAGES
HOWEVER
MAKING
THE
DEPTH
TEXTURE
UNNECESSARILY
LARGE
WILL
WASTE
LOTS
OF
MEMORY
AND
BANDWIDTH
AND
ADVERSELY
AFFECT
THE
PERFORMANCE
OF
YOUR
PROGRAM
THE
NEXT
STEP
IS
TO
RENDER
THE
SCENE
FROM
THE
POINT
OF
VIEW
OF
THE
LIGHT
TO
DO
THIS
WE
CREATE
A
VIEW
TRANSFORMATION
MATRIX
FOR
THE
LIGHT
SOURCE
USING
THE
PROVIDED
LOOKAT
FUNCTION
WE
ALSO
NEED
TO
SET
THE
LIGHT
PROJECTION
MATRIX
AS
WORLD
AND
EYE
COORDINATES
FOR
THE
LIGHT
VIEWPOINT
WE
CAN
MULTIPLY
THESE
MATRICES
TOGETHER
TO
PROVIDE
A
SINGLE
VIEW
PROJECTION
MATRIX
IN
THIS
SIMPLE
EXAMPLE
WE
CAN
ALSO
BAKE
THE
SCENE
MODEL
MATRIX
INTO
THE
SAME
MATRIX
PROVIDING
A
MODEL
VIEW
PROJECTION
MATRIX
TO
THE
LIGHT
SHADER
THE
CODE
TO
PERFORM
THESE
STEPS
IS
SHOWN
IN
EXAMPLE
EXAMPLE
SETTING
UP
THE
MATRICES
FOR
SHADOW
MAP
GENERATION
TIME
VARYING
LIGHT
POSITION
SINF
T
COSF
T
MATRICES
FOR
RENDERING
THE
SCENE
ROTATE
T
Y
MATRICES
USED
WHEN
RENDERING
FROM
THE
LIGHT
POSITION
LOOKAT
Y
FRUSTUM
NOW
WE
RENDER
FROM
THE
LIGHT
POSITION
INTO
THE
DEPTH
BUFFER
SELECT
THE
APPROPRIATE
PROGRAM
GLUSEPROGRAM
CHAPTER
LIGHT
AND
SHADOW
MVPMATRIX
IN
EXAMPLE
WE
SET
THE
LIGHT
POSITION
USING
A
FUNCTION
OF
TIME
T
AND
POINT
IT
TOWARDS
THE
ORIGIN
THIS
WILL
CAUSE
THE
SHADOWS
TO
MOVE
AROUND
IS
SET
TO
THE
MAXIMUM
DEPTH
OVER
WHICH
THE
LIGHT
WILL
INFLUENCE
AND
REPRESENTS
THE
FAR
PLAN
OF
THE
LIGHT
FRUSTUM
THE
NEAR
PLANE
IS
SET
TO
BUT
IDEALLY
THE
RATIO
OF
FAR
PLANE
TO
NEAR
PLANE
DISTANCE
SHOULD
BE
AS
SMALL
AS
POSSIBLE
I
E
THE
NEAR
PLANE
SHOULD
BE
AS
FAR
AS
POSSIBLE
FROM
THE
LIGHT
AND
THE
FAR
PLANE
SHOULD
BE
AS
CLOSE
AS
POSSIBLE
TO
THE
LIGHT
TO
MAXIMIZE
THE
PRECISION
OF
THE
DEPTH
BUFFER
THE
SHADERS
USED
TO
GENERATE
THE
DEPTH
BUFFER
FROM
THE
LIGHT
POSITION
ARE
TRIVIAL
THE
VERTEX
SHADER
SIMPLY
TRANSFORMS
THE
INCOMING
POSITION
BY
THE
PROVIDED
MODEL
VIEW
PROJECTION
MATRIX
THE
FRAGMENT
SHADER
WRITES
A
CONSTANT
INTO
A
DUMMY
OUTPUT
AND
IS
ONLY
PRESENT
BECAUSE
OPENGL
REQUIRES
IT
THE
VERTEX
AND
FRAGMENT
SHADERS
USED
TO
RENDER
DEPTH
FROM
THE
LIGHT
POINT
OF
VIEW
ARE
SHOWN
IN
EXAMPLE
EXAMPLE
SIMPLE
SHADER
FOR
SHADOW
MAP
GENERATION
VERTEX
SHADER
VERTEX
SHADER
FOR
SHADOW
MAP
GENERATION
VERSION
CORE
UNIFORM
MVPMATRIX
LAYOUT
LOCATION
IN
POSITION
VOID
MAIN
VOID
MVPMATRIX
POSITION
FRAGMENT
SHADER
FRAGMENT
SHADER
FOR
SHADOW
MAP
GENERATION
VERSION
CORE
LAYOUT
LOCATION
OUT
COLOR
VOID
MAIN
VOID
COLOR
THE
RESULTS
OF
RASTERIZATION
ARE
UNDEFINED
IN
OPENGL
IF
NO
FRAGMENT
SHADER
IS
PRESENT
IT
IS
LEGAL
TO
HAVE
NO
FRAGMENT
SHADER
WHEN
RASTERIZATION
IS
TURNED
OFF
BUT
HERE
WE
DO
WANT
TO
RASTERIZE
SO
THAT
WE
CAN
GENERATE
DEPTH
VALUES
FOR
THE
SCENE
SHADOW
MAPPING
AT
THIS
POINT
WE
ARE
READY
TO
RENDER
THE
SCENE
INTO
THE
DEPTH
TEXTURE
WE
CREATED
EARLIER
WE
NEED
TO
BIND
THE
FRAMEBUFFER
OBJECT
WITH
THE
DEPTH
TEXTURE
ATTACHMENT
AND
SET
THE
VIEWPORT
TO
THE
DEPTH
TEXTURE
SIZE
THEN
WE
CLEAR
THE
DEPTH
BUFFER
WHICH
IS
ACTUALLY
OUR
DEPTH
TEXTURE
NOW
AND
DRAW
THE
SCENE
EXAMPLE
CONTAINS
THE
CODE
TO
DO
THIS
EXAMPLE
RENDERING
THE
SCENE
FROM
THE
LIGHT
POINT
OF
VIEW
BIND
THE
DEPTH
ONLY
FBO
AND
SET
THE
VIEWPORT
TO
THE
SIZE
OF
THE
DEPTH
TEXTURE
GLBINDFRAMEBUFFER
GLVIEWPORT
CLEAR
GLCLEARDEPTH
GLCLEAR
ENABLE
POLYGON
OFFSET
TO
RESOLVE
DEPTH
FIGHTING
ISUSES
GLENABLE
GLPOLYGONOFFSET
DRAW
FROM
THE
LIGHT
POINT
OF
VIEW
DRAWSCENE
TRUE
GLDISABLE
NOTICE
THAT
WE
RE
USING
POLYGON
OFFSET
HERE
THIS
PUSHES
THE
GENERATED
DEPTH
VALUES
AWAY
FROM
THE
VIEWER
THE
LIGHT
IN
THIS
CASE
BY
A
SMALL
AMOUNT
IN
THIS
APPLICATION
WE
WANT
THE
DEPTH
TEST
TO
BE
CONSERVATIVE
INSOFAR
AS
WHEN
THERE
IS
DOUBT
ABOUT
WHETHER
A
POINT
IS
IN
SHADOW
OR
NOT
WE
WANT
TO
LIGHT
IT
IF
WE
DID
NOT
DO
THIS
WE
WOULD
END
UP
WITH
DEPTH
FIGHTING
IN
THE
RENDERED
IMAGE
DUE
TO
PRECISION
ISSUES
WITH
THE
FLOATING
POINT
DEPTH
BUFFER
FIGURE
SHOWS
THE
RESULTING
DEPTH
MAP
OF
OUR
SCENE
AS
SEEN
FROM
THE
LIGHT
POSITION
CHAPTER
LIGHT
AND
SHADOW
FIGURE
DEPTH
RENDERING
DEPTHS
ARE
RENDERED
FROM
THE
LIGHT
POSITION
WITHIN
RENDERED
OBJECTS
CLOSER
POINTS
HAVE
SMALLER
DEPTHS
AND
SHOW
UP
DARKER
USING
A
SHADOW
MAP
NOW
THAT
WE
HAVE
THE
DEPTH
FOR
THE
SCENE
RENDERED
FROM
THE
LIGHT
POINT
OF
VIEW
WE
CAN
RENDER
THE
SCENE
WITH
OUR
REGULAR
SHADERS
AND
USE
THE
RESULTING
DEPTH
TEXTURE
TO
PRODUCE
SHADOWS
AS
PART
OF
OUR
LIGHTING
CALCULATIONS
THIS
IS
WHERE
THE
MEAT
OF
THE
ALGORITHM
IS
FIRST
WE
NEED
TO
SET
UP
THE
MATRICES
FOR
RENDERING
THE
SCENE
FROM
THE
VIEWER
POSITION
THE
MATRICES
WE
LL
NEED
ARE
THE
MODEL
MATRIX
VIEW
MATRIX
WHICH
TRANSFORMS
VERTICES
FOR
CLASSIC
LIGHTING
AND
THE
PROJECTION
MATRIX
WHICH
TRANSFORMS
COORDINATES
TO
PROJECTIVE
SPACE
FOR
RASTERIZATION
ALSO
WE
LL
NEED
A
SHADOW
MATRIX
THIS
MATRIX
TRANSFORMS
WORLD
COORDINATES
INTO
THE
LIGHT
PROJECTIVE
SPACE
AND
SIMULTANEOUSLY
APPLIES
A
SCALE
AND
BIAS
TO
THE
RESULTING
DEPTH
VALUES
THE
TRANSFORMATION
TO
THE
LIGHT
EYE
SPACE
IS
PERFORMED
BY
TRANSFORMING
THE
WORLD
SPACE
VERTEX
COORDINATES
THROUGH
THE
LIGHT
VIEW
MATRIX
FOLLOWED
BY
THE
LIGHT
PROJECTION
MATRIX
WHICH
WE
CALCULATED
EARLIER
THE
SCALE
AND
BIAS
MATRIX
MAPS
DEPTH
VALUES
IN
PROJECTION
SPACE
WHICH
LIE
BETWEEN
AND
INTO
THE
RANGE
TO
SHADOW
MAPPING
THE
CODE
TO
SET
ALL
THESE
MATRICES
UP
IS
GIVEN
IN
EXAMPLE
EXAMPLE
MATRIX
CALCULATIONS
FOR
SHADOW
MAP
RENDERING
ROTATE
T
Y
TRANSLATE
FRUSTUM
ASPECT
ASPECT
0F
0F
0F
0F
0F
LIGHT_PROJECTION_MATRIX
THE
VERTEX
SHADER
USED
FOR
THE
FINAL
RENDER
TRANSFORMS
THE
INCOMING
VERTEX
COORDINATES
THROUGH
ALL
OF
THESE
MATRICES
AND
PROVIDES
WORLD
COORDINATES
EYE
COORDINATES
AND
SHADOW
COORDINATES
TO
THE
FRAGMENT
SHADER
WHICH
WILL
PERFORM
THE
ACTUAL
LIGHTING
CALCULATIONS
THIS
VERTEX
SHADER
IS
GIVEN
IN
EXAMPLE
EXAMPLE
VERTEX
SHADER
FOR
RENDERING
FROM
SHADOW
MAPS
VERSION
CORE
UNIFORM
UNIFORM
UNIFORM
UNIFORM
LAYOUT
LOCATION
IN
POSITION
LAYOUT
LOCATION
IN
NORMAL
OUT
NORMAL
VERTEX
VOID
MAIN
VOID
POSITION
VERTEX
XYZ
VERTEX
XYZ
VERTEX
CHAPTER
LIGHT
AND
SHADOW
VERTEX
NORMAL
NORMAL
FINALLY
THE
FRAGMENT
SHADER
PERFORMS
LIGHTING
CALCULATIONS
FOR
THE
SCENE
IF
THE
POINT
IS
CONSIDERED
TO
BE
ILLUMINATED
BY
THE
LIGHT
THE
LIGHT
CONTRIBUTION
IS
INCLUDED
IN
THE
FINAL
LIGHTING
CALCULATION
OTHERWISE
ONLY
AMBIENT
LIGHT
IS
APPLIED
THE
SHADER
GIVEN
IN
EXAMPLE
PERFORMS
THESE
CALCULATIONS
EXAMPLE
FRAGMENT
SHADER
FOR
RENDERING
FROM
SHADOW
MAPS
VERSION
CORE
UNIFORM
UNIFORM
UNIFORM
UNIFORM
UNIFORM
UNIFORM
FLOAT
LAYOUT
LOCATION
OUT
COLOR
IN
NORMAL
FRAGMENT
VOID
MAIN
VOID
N
FRAGMENT
NORMAL
L
NORMALIZE
FRAGMENT
R
REFLECT
L
N
E
NORMALIZE
FRAGMENT
FLOAT
NDOTL
DOT
N
L
FLOAT
EDOTR
DOT
E
R
FLOAT
DIFFUSE
MAX
NDOTL
FLOAT
SPECULAR
MAX
POW
EDOTR
FLOAT
F
TEXTUREPROJ
FRAGMENT
COLOR
F
DIFFUSE
SPECULAR
SHADOW
MAPPING
DON
T
WORRY
ABOUT
THE
COMPLEXITY
OF
THE
LIGHTING
CALCULATIONS
IN
THIS
SHADER
THE
IMPORTANT
PART
OF
THE
ALGORITHM
IS
THE
USE
OF
THE
SAMPLER
TYPE
AND
THE
TEXTUREPROJ
FUNCTION
THE
SAMPLER
IS
A
SPECIAL
TYPE
OF
TEXTURE
THAT
WHEN
SAMPLED
WILL
RETURN
EITHER
IF
THE
SAMPLED
TEXTURE
SATISFIES
THE
COMPARISON
TEST
FOR
THE
TEXTURE
AND
IF
IT
DOES
NOT
THE
TEXTURE
COMPARISON
MODE
FOR
THE
DEPTH
TEXTURE
WAS
SET
EARLIER
IN
EXAMPLE
BY
CALLING
GLTEXPARAMETERI
WITH
THE
PARAMETER
NAME
AND
PARAMETER
VALUE
WHEN
THE
DEPTH
COMPARISON
MODE
FOR
THE
TEXTURE
IS
CONFIGURED
LIKE
THIS
THE
TEXEL
VALUES
WILL
BE
COMPARED
AGAINST
THE
REFERENCE
VALUE
THAT
IS
SUPPLIED
IN
THE
THIRD
COMPONENT
OF
FRAGMENT
WHICH
IS
THE
Z
COMPONENT
OF
THE
SCALED
AND
BIASED
PROJECTIVE
SPACE
COORDINATE
OF
THE
FRAGMENT
AS
VIEWED
FROM
THE
LIGHT
THE
DEPTH
COMPARISON
FUNCTION
IS
SET
TO
WHICH
CAUSES
THE
TEST
TO
PASS
IF
THE
REFERENCE
VALUE
IS
LESS
THAN
OR
EQUAL
TO
THE
VALUE
IN
THE
TEXTURE
WHEN
MULTIPLE
TEXELS
ARE
SAMPLED
E
G
WHEN
THE
TEXTURE
MODE
IS
LINEAR
THE
RESULT
OF
READING
FROM
THE
TEXTURE
IS
THE
AVERAGE
OF
ALL
THE
AND
FOR
THE
SAMPLES
MAKING
UP
THE
FINAL
TEXEL
THAT
IS
NEAR
THE
EDGE
OF
A
SHADOW
THE
RETURNED
VALUE
MIGHT
BE
OR
AND
SO
ON
RATHER
THAN
JUST
OR
WE
SCALE
THE
LIGHTING
CALCULATIONS
BY
THIS
RESULT
TO
TAKE
LIGHT
VISIBILITY
INTO
ACCOUNT
DURING
SHADING
THE
TEXTUREPROJ
FUNCTION
IS
A
PROJECTIVE
TEXTURING
FUNCTION
IT
DIVIDES
THE
INCOMING
TEXTURE
COORDINATE
IN
THIS
CASE
FRAGMENT
BY
ITS
OWN
LAST
COMPONENT
FRAGMENT
W
TO
TRANSFORM
IT
INTO
NORMALIZED
DEVICE
COORDINATES
WHICH
IS
EXACTLY
WHAT
THE
PERSPECTIVE
TRANSFORMATION
PERFORMED
BY
OPENGL
BEFORE
RASTERIZATION
DOES
THE
RESULT
OF
RENDERING
OUR
SCENE
WITH
THIS
SHADER
IS
SHOWN
IN
FIGURE
CHAPTER
LIGHT
AND
SHADOW
FIGURE
FINAL
RENDERING
OF
SHADOW
MAP
THAT
WRAPS
UP
SHADOW
MAPPING
THERE
ARE
MANY
OTHER
TECHNIQUES
INCLUDING
ENHANCEMENTS
TO
SHADOW
MAPPING
AND
WE
ENCOURAGE
YOU
TO
EXPLORE
ON
YOUR
OWN
SHADOW
MAPPING
THIS
PAGE
INTENTIONALLY
LEFT
BLANK
CHAPTER
PROCEDURAL
TEXTURING
CHAPTER
OBJECTIVES
AFTER
READING
THIS
CHAPTER
YOU
LL
BE
ABLE
TO
DO
THE
FOLLOWING
TEXTURE
A
SURFACE
WITHOUT
USING
TEXTURE
LOOK
UPS
INSTEAD
TEXTURE
A
SURFACE
USING
A
SHADER
THAT
COMPUTES
THE
TEXTURE
PROCEDURALLY
ANTIALIAS
A
PROCEDURALLY
GENERATED
TEXTURE
LIGHT
A
SURFACE
USING
A
BUMP
MAP
USE
NOISE
TO
MODULATE
SHAPES
AND
TEXTURES
TO
GET
QUITE
REALISTIC
SURFACES
AND
SHAPES
GENERATE
YOUR
OWN
NOISE
TEXTURE
MAP
FOR
STORING
MULTIPLE
OCTAVES
OF
PORTABLE
NOISE
GENERALLY
THIS
CHAPTER
WILL
COVER
USING
COMPUTATION
IN
SHADERS
TO
SUPPLY
QUALITY
VERSIONS
OF
WHAT
MIGHT
NORMALLY
COME
FROM
LARGE
TEXTURE
MAPS
COMPLEX
GEOMETRY
OR
EXPENSIVE
MULTISAMPLING
HOWEVER
ACCESSING
TEXTURES
WON
T
BE
FORBIDDEN
WE
LL
STILL
OCCASIONALLY
USE
THEM
AS
SIDE
TABLES
TO
DRIVE
THE
CALCULATIONS
PERFORMED
IN
THE
SHADERS
THIS
CHAPTER
CONTAINS
THE
FOLLOWING
MAJOR
SECTIONS
PROCEDURAL
TEXTURING
SHOWS
SEVERAL
TECHNIQUES
FOR
USING
COMPUTATION
TO
CREATE
PATTERNS
RATHER
THAN
ACCESSING
IMAGES
STORED
IN
MEMORY
BUMP
MAPPING
PRESENTS
A
KEY
METHOD
TO
GIVE
THE
APPEARANCE
OF
A
BUMPY
SURFACE
WITHOUT
HAVING
TO
CONSTRUCT
GEOMETRY
TO
REPRESENT
IT
ANTIALIASING
PROCEDURAL
TEXTURES
EXPLAINS
HOW
TO
COMPUTE
AMOUNT
OF
COLOR
FOR
EACH
PIXEL
SUCH
THAT
ALIASING
DOES
NOT
OCCUR
ESPECIALLY
FOR
EDGES
AND
PATTERNS
CREATED
PROCEDURALLY
NOISE
WILL
EXPLAIN
WHAT
NOISE
IS
AND
HOW
TO
USE
IT
TO
IMPROVE
REALISM
PROCEDURAL
TEXTURING
THE
FACT
THAT
WE
HAVE
A
FULL
FEATURED
HIGH
LEVEL
PROGRAMMING
LANGUAGE
TO
EXPRESS
THE
PROCESSING
AT
EACH
FRAGMENT
MEANS
THAT
WE
CAN
ALGORITHMICALLY
COMPUTE
A
PATTERN
ON
AN
OBJECT
SURFACE
WE
CAN
USE
THIS
FREEDOM
TO
CREATE
A
WIDE
VARIETY
OF
RENDERING
EFFECTS
THAT
WOULDN
T
BE
POSSIBLE
OTHERWISE
WE
CAN
ALSO
ALGORITHMICALLY
COMPUTE
THE
CONTENT
OF
A
VOLUME
FROM
WHICH
A
SURFACE
IS
CUT
AWAY
AS
IN
A
WOOD
OBJECT
MADE
FROM
A
TREE
THIS
CAN
LEAD
TO
A
RESULT
SUPERIOR
TO
TEXTURE
MAPPING
THE
SURFACE
IN
PREVIOUS
CHAPTERS
WE
DISCUSSED
SHADERS
THAT
ACHIEVE
THEIR
PRIMARY
EFFECT
BY
READING
VALUES
FROM
TEXTURE
MEMORY
THIS
CHAPTER
FOCUSES
ON
SHADERS
THAT
DO
INTERESTING
THINGS
PRIMARILY
BY
MEANS
OF
AN
ALGORITHM
DEFINED
BY
THE
SHADER
THE
RESULTS
FROM
SUCH
A
SHADER
ARE
SYNTHESIZED
ACCORDING
TO
THE
ALGORITHM
RATHER
THAN
BEING
BASED
PRIMARILY
ON
PRECOMPUTED
VALUES
SUCH
AS
A
DIGITIZED
PAINTING
OR
PHOTOGRAPH
THIS
TYPE
OF
SHADER
IS
SOMETIMES
CALLED
A
PROCEDURAL
TEXTURE
SHADER
AND
THE
PROCESS
OF
APPLYING
SUCH
A
SHADER
IS
CALLED
PROCEDURAL
TEXTURING
OR
PROCEDURAL
SHADING
OFTEN
THE
TEXTURE
COORDINATE
OR
THE
OBJECT
COORDINATE
POSITION
AT
EACH
POINT
ON
THE
OBJECT
IS
THE
ONLY
PIECE
OF
INFORMATION
NEEDED
TO
SHADE
THE
OBJECT
WITH
A
SHADER
THAT
IS
ENTIRELY
PROCEDURAL
IN
PRINCIPLE
PROCEDURAL
TEXTURE
SHADERS
CAN
ACCOMPLISH
MANY
OF
THE
SAME
TASKS
AS
SHADERS
THAT
ACCESS
STORED
TEXTURES
IN
PRACTICE
THERE
ARE
TIMES
WHEN
IT
IS
MORE
CONVENIENT
OR
FEASIBLE
TO
USE
A
PROCEDURAL
TEXTURE
SHADER
AND
TIMES
WHEN
IT
IS
MORE
CONVENIENT
OR
FEASIBLE
TO
USE
A
STORED
TEXTURE
CHAPTER
PROCEDURAL
TEXTURING
SHADER
WHEN
DECIDING
WHETHER
TO
WRITE
A
PROCEDURAL
TEXTURE
SHADER
OR
ONE
THAT
USES
STORED
TEXTURES
KEEP
IN
MIND
SOME
OF
THE
MAIN
ADVANTAGES
OF
PROCEDURAL
TEXTURE
SHADERS
TEXTURES
GENERATED
PROCEDURALLY
HAVE
VERY
LOW
MEMORY
REQUIREMENTS
COMPARED
WITH
STORED
TEXTURES
THE
ONLY
PRIMARY
REPRESENTATION
OF
THE
TEXTURE
IS
IN
THE
ALGORITHM
DEFINED
BY
THE
CODE
IN
THE
PROCEDURAL
TEXTURE
SHADER
THIS
REPRESENTATION
IS
EXTREMELY
COMPACT
COMPARED
WITH
THE
SIZE
OF
STORED
TEXTURES
TYPICALLY
IT
IS
A
COUPLE
OF
ORDERS
OF
MAGNITUDE
SMALLER
E
G
A
FEW
KILOBYTES
FOR
THE
CODE
IN
A
PROCEDURAL
SHADER
VERSUS
A
FEW
HUNDRED
KILOBYTES
OR
MORE
FOR
A
HIGH
QUALITY
TEXTURE
THIS
MEANS
PROCEDURAL
TEXTURE
SHADERS
REQUIRE
FAR
LESS
MEMORY
ON
THE
GRAPHICS
ACCELERATOR
PROCEDURAL
TEXTURE
SHADERS
HAVE
AN
EVEN
GREATER
ADVANTAGE
WHEN
THE
DESIRE
IS
TO
HAVE
A
SOLID
TEXTURE
APPLIED
TO
AN
OBJECT
A
FEW
KILOBYTES
VERSUS
TENS
OF
MEGABYTES
OR
MORE
FOR
A
STORED
TEXTURE
TEXTURES
GENERATED
BY
PROCEDURAL
TEXTURE
SHADERS
HAVE
NO
FIXED
AREA
OR
RESOLUTION
THEY
CAN
BE
APPLIED
TO
OBJECTS
OF
ANY
SCALE
WITH
PRECISE
RESULTS
BECAUSE
THEY
ARE
DEFINED
ALGORITHMICALLY
RATHER
THAN
WITH
SAMPLED
DATA
AS
IN
THE
CASE
OF
STORED
TEXTURES
THERE
ARE
NO
DECISIONS
TO
BE
MADE
ABOUT
HOW
TO
MAP
A
IMAGE
ONTO
A
SURFACE
PATCH
THAT
IS
LARGER
OR
SMALLER
THAN
THE
TEXTURE
AND
THERE
ARE
NO
SEAMS
OR
UNWANTED
REPLICATION
AS
YOUR
VIEWPOINT
GETS
CLOSER
AND
CLOSER
TO
A
SURFACE
RENDERED
WITH
A
PROCEDURAL
TEXTURE
SHADER
YOU
WON
T
SEE
REDUCED
DETAIL
OR
SAMPLING
ARTIFACTS
LIKE
YOU
MIGHT
WITH
A
SHADER
THAT
USES
A
STORED
TEXTURE
PROCEDURAL
TEXTURE
SHADERS
CAN
BE
WRITTEN
TO
PARAMETERIZE
KEY
ASPECTS
OF
THE
ALGORITHM
THESE
PARAMETERS
CAN
EASILY
BE
CHANGED
ALLOWING
A
SINGLE
SHADER
TO
PRODUCE
AN
INTERESTING
VARIETY
OF
EFFECTS
VERY
LITTLE
CAN
BE
DONE
TO
ALTER
THE
SHAPE
OF
THE
PATTERN
IN
A
STORED
TEXTURE
AFTER
IT
HAS
BEEN
CREATED
WHEN
A
VOLUME
IS
COMPUTED
BY
A
PROCEDURAL
TEXTURE
RATHER
THAN
A
SURFACE
SURFACE
CUTAWAYS
OF
THAT
VOLUME
CAN
BE
FAR
MORE
REALISTIC
THAN
ANY
METHOD
OF
PASTING
A
TEXTURE
ONTO
THE
SURFACE
AND
WHILE
A
TEXTURE
COULD
BE
USED
GETTING
HIGH
RESOLUTION
WITH
A
TEXTURE
CAN
TAKE
A
PROHIBITIVE
AMOUNT
OF
MEMORY
SOME
OF
THE
DISADVANTAGES
OF
USING
PROCEDURAL
SHADERS
RATHER
THAN
STORED
TEXTURES
ARE
AS
FOLLOWS
PROCEDURAL
TEXTURE
SHADERS
REQUIRE
THE
ALGORITHM
TO
BE
ENCODED
IN
A
PROGRAM
NOT
EVERYONE
HAS
THE
TECHNICAL
SKILLS
NEEDED
TO
WRITE
SUCH
A
PROGRAM
WHEREAS
IT
IS
FAIRLY
STRAIGHTFORWARD
TO
CREATE
A
OR
TEXTURE
WITH
LIMITED
TECHNICAL
SKILLS
PROCEDURAL
TEXTURING
PERFORMING
THE
ALGORITHM
EMBODIED
BY
A
PROCEDURAL
TEXTURE
SHADER
AT
EACH
LOCATION
ON
AN
OBJECT
CAN
TAKE
LONGER
THAN
ACCESSING
A
STORED
TEXTURE
PROCEDURAL
TEXTURE
SHADERS
CAN
HAVE
SERIOUS
ALIASING
ARTIFACTS
THAT
CAN
BE
DIFFICULT
TO
OVERCOME
TODAY
GRAPHICS
HARDWARE
HAS
BUILT
IN
CAPABILITIES
FOR
ANTIALIASING
STORED
TEXTURES
E
G
FILTERING
METHODS
AND
MIPMAPS
BECAUSE
OF
DIFFERENCES
IN
ARITHMETIC
PRECISION
AND
DIFFERENCES
IN
IMPLEMENTATIONS
OF
BUILT
IN
FUNCTIONS
SUCH
AS
NOISE
PROCEDURAL
TEXTURE
SHADERS
COULD
PRODUCE
SOMEWHAT
DIFFERENT
RESULTS
ON
DIFFERENT
PLATFORMS
THE
ULTIMATE
CHOICE
OF
WHETHER
TO
USE
A
PROCEDURAL
SHADER
OR
A
STORED
TEXTURE
SHADER
SHOULD
BE
MADE
PRAGMATICALLY
THINGS
THAT
WOULD
BE
ARTWORK
IN
THE
REAL
WORLD
PAINTINGS
BILLBOARDS
ANYTHING
WITH
WRITING
ETC
ARE
GOOD
CANDIDATES
FOR
RENDERING
WITH
STORED
TEXTURES
OBJECTS
THAT
ARE
EXTREMELY
IMPORTANT
TO
THE
FINAL
LOOK
OF
THE
IMAGE
CHARACTER
FACES
COSTUMES
IMPORTANT
PROPS
CAN
ALSO
BE
RENDERED
WITH
STORED
TEXTURES
BECAUSE
THIS
PRESENTS
THE
EASIEST
ROUTE
FOR
AN
ARTIST
TO
BE
INVOLVED
THINGS
THAT
ARE
RELATIVELY
UNIMPORTANT
TO
THE
FINAL
IMAGE
AND
YET
COVER
A
LOT
OF
AREA
ARE
GOOD
CANDIDATES
FOR
RENDERING
WITH
A
PROCEDURAL
SHADER
WALLS
FLOORS
GROUND
OFTEN
A
HYBRID
APPROACH
IS
THE
RIGHT
ANSWER
A
GOLF
BALL
MIGHT
BE
RENDERED
WITH
A
BASE
COLOR
A
HAND
PAINTED
TEXTURE
MAP
THAT
CONTAINS
SCUFF
MARKS
A
TEXTURE
MAP
CONTAINING
A
LOGO
AND
A
PROCEDURALLY
GENERATED
DIMPLE
PATTERN
STORED
TEXTURES
CAN
ALSO
CONTROL
OR
CONSTRAIN
PROCEDURAL
EFFECTS
IF
OUR
GOLF
BALL
NEEDS
GRASS
STAINS
ON
CERTAIN
PARTS
OF
ITS
SURFACE
AND
IT
IS
IMPORTANT
TO
ACHIEVE
AND
REPRODUCE
JUST
THE
RIGHT
LOOK
AN
ARTIST
COULD
PAINT
A
GRAYSCALE
MAP
THAT
WOULD
DIRECT
THE
SHADER
TO
LOCATIONS
WHERE
GRASS
SMUDGES
SHOULD
BE
APPLIED
ON
THE
SURFACE
FOR
INSTANCE
BLACK
PORTIONS
OF
THE
GRAYSCALE
MAP
AND
WHERE
THEY
SHOULD
NOT
BE
APPLIED
WHITE
PORTIONS
OF
THE
GRAYSCALE
MAP
THE
SHADER
CAN
READ
THIS
CONTROL
TEXTURE
AND
USE
IT
TO
BLEND
BETWEEN
A
GRASS
SMUDGED
REPRESENTATION
OF
THE
SURFACE
AND
A
PRISTINE
SURFACE
ALL
THAT
SAID
LET
TURN
OUR
ATTENTION
TO
A
FEW
EXAMPLES
OF
SHADERS
THAT
ARE
ENTIRELY
PROCEDURAL
REGULAR
PATTERNS
FOR
OUR
FIRST
EXAMPLE
WE
CONSTRUCT
A
SHADER
THAT
RENDERS
STRIPES
ON
AN
OBJECT
A
VARIETY
OF
MAN
MADE
OBJECTS
CAN
BE
RENDERED
WITH
SUCH
A
SHADER
CHILDREN
TOYS
WALLPAPER
WRAPPING
PAPER
FLAGS
FABRICS
AND
SO
ON
CHAPTER
PROCEDURAL
TEXTURING
THE
OBJECT
IN
FIGURE
IS
A
PARTIAL
TORUS
RENDERED
WITH
A
STRIPE
SHADER
THE
STRIPE
SHADER
AND
THE
APPLICATION
IN
WHICH
IT
IS
SHOWN
WERE
BOTH
DEVELOPED
IN
BY
LIGHTWORK
DESIGN
A
COMPANY
THAT
DEVELOPS
SOFT
WARE
TO
PROVIDE
PHOTOREALISTIC
VIEWS
OF
OBJECTS
CREATED
WITH
COMMERCIAL
CAD
CAM
PACKAGES
THE
APPLICATION
DEVELOPED
BY
LIGHTWORK
DESIGN
CONTAINS
A
GRAPHICAL
USER
INTERFACE
THAT
ALLOWS
THE
USER
TO
INTERACTIVELY
MODIFY
THE
SHADER
PARAMETERS
THE
VARIOUS
SHADERS
THAT
ARE
AVAILABLE
ARE
ACCESSIBLE
ON
THE
UPPER
RIGHT
PORTION
OF
THE
USER
INTERFACE
AND
THE
MODIFIABLE
PARAMETERS
FOR
THE
CURRENT
SHADER
ARE
ACCESSIBLE
IN
THE
LOWER
RIGHT
PORTION
OF
THE
USER
INTERFACE
IN
THIS
CASE
YOU
CAN
SEE
THAT
THE
PARAMETERS
FOR
THE
STRIPE
SHADER
INCLUDE
THE
STRIPE
COLOR
BLUE
THE
BACKGROUND
COLOR
ORANGE
THE
STRIPE
SCALE
HOW
MANY
STRIPES
THERE
WILL
BE
AND
THE
STRIPE
WIDTH
THE
RATIO
OF
STRIPE
TO
BACKGROUND
IN
THIS
CASE
IT
IS
TO
MAKE
BLUE
AND
ORANGE
STRIPES
OF
EQUAL
WIDTH
FIGURE
PROCEDURALLY
STRIPED
TORUS
CLOSE
UP
OF
A
PARTIAL
TORUS
RENDERED
WITH
THE
STRIPE
SHADER
DESCRIBED
IN
REGULAR
PATTERNS
COURTESY
OF
LIGHTWORK
DESIGN
FOR
OUR
STRIPE
SHADER
TO
WORK
PROPERLY
THE
APPLICATION
NEEDS
TO
SEND
DOWN
ONLY
THE
GEOMETRY
VERTEX
VALUES
AND
THE
TEXTURE
COORDINATE
AT
EACH
VERTEX
THE
KEY
TO
DRAWING
THE
STRIPE
COLOR
OR
THE
BACKGROUND
COLOR
IS
THE
T
TEXTURE
COORDINATE
AT
EACH
FRAGMENT
THE
TEXTURE
COORDINATE
IS
NOT
USED
AT
ALL
THE
APPLICATION
MUST
ALSO
SUPPLY
VALUES
THAT
THE
VERTEX
SHADER
USES
TO
PERFORM
A
LIGHTING
COMPUTATION
AND
THE
AFOREMENTIONED
STRIPE
COLOR
PROCEDURAL
TEXTURING
BACKGROUND
COLOR
SCALE
AND
STRIPE
WIDTH
MUST
BE
PASSED
TO
THE
FRAGMENT
SHADER
SO
THAT
OUR
PROCEDURAL
STRIPE
COMPUTATION
CAN
BE
PERFORMED
AT
EACH
FRAGMENT
STRIPES
VERTEX
SHADER
THE
VERTEX
SHADER
FOR
OUR
STRIPE
EFFECT
IS
SHOWN
IN
EXAMPLE
EXAMPLE
VERTEX
SHADER
FOR
DRAWING
STRIPES
VERSION
CORE
UNIFORM
LIGHTPOSITION
UNIFORM
LIGHTCOLOR
UNIFORM
EYEPOSITION
UNIFORM
SPECULAR
UNIFORM
AMBIENT
UNIFORM
FLOAT
KD
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
IN
MCVERTEX
IN
MCNORMAL
IN
OUT
DIFFUSECOLOR
OUT
SPECULARCOLOR
OUT
FLOAT
TEXCOORD
VOID
MAIN
ECPOSITION
MVMATRIX
MCVERTEX
TNORM
NORMALIZE
NORMALMATRIX
MCNORMAL
LIGHTVEC
NORMALIZE
LIGHTPOSITION
ECPOSITION
VIEWVEC
NORMALIZE
EYEPOSITION
ECPOSITION
HVEC
NORMALIZE
VIEWVEC
LIGHTVEC
FLOAT
SPEC
CLAMP
DOT
HVEC
TNORM
SPEC
POW
SPEC
DIFFUSECOLOR
LIGHTCOLOR
KD
DOT
LIGHTVEC
TNORM
DIFFUSECOLOR
CLAMP
AMBIENT
DIFFUSECOLOR
SPECULARCOLOR
CLAMP
LIGHTCOLOR
SPECULAR
SPEC
TEXCOORD
T
MVPMATRIX
MCVERTEX
THERE
ARE
SOME
NICE
FEATURES
TO
THIS
PARTICULAR
SHADER
NOTHING
IN
IT
REALLY
MAKES
IT
SPECIFIC
TO
DRAWING
STRIPES
IT
PROVIDES
A
GOOD
EXAMPLE
OF
HOW
WE
MIGHT
DO
THE
LIGHTING
CALCULATION
IN
A
GENERAL
WAY
THAT
WOULD
BE
COMPA
TIBLE
WITH
A
VARIETY
OF
FRAGMENT
SHADERS
CHAPTER
PROCEDURAL
TEXTURING
AS
WE
MENTIONED
THE
VALUES
FOR
DOING
THE
LIGHTING
COMPUTATION
LIGHTPOSITION
LIGHTCOLOR
EYEPOSITION
SPECULAR
AMBIENT
AND
KD
ARE
ALL
PASSED
IN
BY
THE
APPLICATION
AS
UNIFORM
VARIABLES
THE
PURPOSE
OF
THIS
SHADER
IS
TO
COMPUTE
DIFFUSECOLOR
AND
SPECULARCOLOR
TWO
OUT
VARIABLES
THAT
WILL
BE
INTERPOLATED
ACROSS
EACH
PRIMITIVE
AND
MADE
AVAILABLE
TO
THE
FRAGMENT
SHADER
AT
EACH
FRAGMENT
LOCATION
THESE
VALUES
ARE
COMPUTED
IN
THE
TYPICAL
WAY
A
SMALL
OPTIMIZATION
IS
THAT
AMBIENT
IS
ADDED
TO
THE
VALUE
COMPUTED
FOR
THE
DIFFUSE
REFLECTION
SO
THAT
WE
SEND
ONE
LESS
VALUE
TO
THE
FRAGMENT
SHADER
AS
AN
OUT
VARIABLE
THE
INCOMING
TEXTURE
COORDINATE
IS
PASSED
DOWN
TO
THE
FRAGMENT
SHADER
AS
THE
OUT
VARIABLE
TEXCOORD
AND
THE
VERTEX
POSITION
IS
TRANSFORMED
IN
THE
USUAL
WAY
STRIPES
FRAGMENT
SHADER
THE
FRAGMENT
SHADER
CONTAINS
THE
ALGORITHM
FOR
DRAWING
PROCEDURAL
STRIPES
IT
IS
SHOWN
IN
EXAMPLE
EXAMPLE
FRAGMENT
SHADER
FOR
DRAWING
STRIPES
VERSION
CORE
UNIFORM
STRIPECOLOR
UNIFORM
BACKCOLOR
UNIFORM
FLOAT
WIDTH
UNIFORM
FLOAT
FUZZ
UNIFORM
FLOAT
SCALE
IN
DIFFUSECOLOR
IN
SPECULARCOLOR
IN
FLOAT
TEXCOORD
OUT
FRAGCOLOR
VOID
MAIN
FLOAT
SCALEDT
FRACT
TEXCOORD
SCALE
FLOAT
CLAMP
SCALEDT
FUZZ
FLOAT
CLAMP
SCALEDT
WIDTH
FUZZ
FINALCOLOR
MIX
BACKCOLOR
STRIPECOLOR
FINALCOLOR
FINALCOLOR
DIFFUSECOLOR
SPECULARCOLOR
FRAGCOLOR
FINALCOLOR
THE
APPLICATION
PROVIDES
ONE
OTHER
UNIFORM
VARIABLE
CALLED
FUZZ
THIS
VALUE
CONTROLS
THE
SMOOTH
TRANSITIONS
I
E
ANTIALIASING
BETWEEN
STRIPE
COLOR
AND
BACKGROUND
COLOR
WITH
A
SCALE
VALUE
OF
A
REASONABLE
PROCEDURAL
TEXTURING
VALUE
FOR
FUZZ
IS
IT
CAN
BE
ADJUSTED
AS
THE
OBJECT
CHANGES
SIZE
TO
PREVENT
EXCESSIVE
BLURRINESS
AT
HIGH
MAGNIFICATION
LEVELS
OR
ALIASING
AT
LOW
MAGNIFICATION
LEVELS
IT
SHOULDN
T
REALLY
BE
SET
TO
A
VALUE
HIGHER
THAN
MAXIMUM
BLURRINESS
OF
STRIPE
EDGES
THE
FIRST
STEP
IN
THIS
SHADER
IS
TO
MULTIPLY
THE
INCOMING
T
TEXTURE
COORDINATE
BY
THE
STRIPE
SCALE
FACTOR
AND
TAKE
THE
FRACTIONAL
PART
THIS
COMPUTATION
GIVES
THE
POSITION
OF
THE
FRAGMENT
WITHIN
THE
STRIPE
PATTERN
THE
LARGER
THE
VALUE
OF
SCALE
THE
MORE
STRIPES
WE
HAVE
AS
A
RESULT
OF
THIS
CALCULATION
THE
RESULTING
VALUE
FOR
THE
LOCAL
VARIABLE
SCALEDT
IS
IN
THE
RANGE
FROM
WE
D
LIKE
TO
HAVE
NICELY
ANTIALIASED
TRANSITIONS
BETWEEN
THE
STRIPE
COLORS
ONE
WAY
TO
DO
THIS
WOULD
BE
TO
USE
SMOOTHSTEP
IN
THE
TRANSITION
FROM
STRIPECOLOR
TO
BACKCOLOR
AND
USE
IT
AGAIN
IN
THE
TRANSITION
FROM
BACKCOLOR
TO
STRIPECOLOR
BUT
THIS
SHADER
USES
THE
FACT
THAT
THESE
TRANSITIONS
ARE
SYMMETRIC
TO
COMBINE
THE
TWO
TRANSITIONS
INTO
ONE
SO
TO
GET
OUR
DESIRED
TRANSITION
WE
USE
SCALEDT
TO
COMPUTE
TWO
OTHER
VALUES
AND
THESE
TWO
VALUES
TELL
US
WHERE
WE
ARE
IN
RELATION
TO
THE
TWO
TRANSITIONS
BETWEEN
BACKCOLOR
AND
STRIPECOLOR
FOR
IF
SCALEDT
FUZZ
IS
GREATER
THAN
THAT
INDICATES
THAT
THIS
POINT
IS
NOT
IN
THE
TRANSITION
ZONE
SO
WE
CLAMP
THE
VALUE
TO
IF
SCALEDT
IS
LESS
THAN
FUZZ
SCALEDT
FUZZ
SPECIFIES
THE
FRAGMENT
RELATIVE
DISTANCE
INTO
THE
TRANSITION
ZONE
FOR
ONE
SIDE
OF
THE
STRIPE
WE
COMPUTE
A
SIMILAR
VALUE
FOR
THE
OTHER
EDGE
OF
THE
STRIPE
BY
SUBTRACTING
WIDTH
FROM
SCALEDT
DIVIDING
BY
FUZZ
CLAMPING
THE
RESULT
AND
STORING
IT
IN
THESE
VALUES
REPRESENT
THE
AMOUNT
OF
FUZZ
BLURRINESS
TO
BE
APPLIED
AT
ONE
EDGE
OF
THE
STRIPE
IS
AND
IS
THE
RELATIVE
DISTANCE
INTO
THE
TRANSITION
ZONE
AT
THE
OTHER
EDGE
OF
THE
STRIPE
IS
AND
IS
THE
RELATIVE
DISTANCE
INTO
THE
TRANSITION
ZONE
OUR
NEXT
LINE
OF
CODE
PRODUCES
A
VALUE
THAT
CAN
BE
USED
TO
DO
A
PROPER
LINEAR
BLEND
BETWEEN
BACKCOLOR
AND
STRIPECOLOR
BUT
WE
D
ACTUALLY
LIKE
TO
PERFORM
A
TRANSITION
THAT
IS
SMOOTHER
THAN
A
LINEAR
BLEND
THE
NEXT
LINE
OF
CODE
PERFORMS
A
HERMITE
INTERPOLATION
IN
THE
SAME
WAY
AS
THE
SMOOTHSTEP
FUNCTION
THE
FINAL
VALUE
FOR
PERFORMS
THE
BLEND
BETWEEN
BACKCOLOR
AND
STRIPECOLOR
THE
RESULT
OF
THIS
EFFORT
IS
A
SMOOTHLY
FUZZED
BOUNDARY
IN
THE
TRANSITION
REGION
BETWEEN
THE
STRIPE
COLORS
WITHOUT
THIS
FUZZING
EFFECT
WE
WOULD
HAVE
ALIASING
ABRUPT
TRANSITIONS
BETWEEN
THE
STRIPE
COLORS
THAT
WOULD
FLASH
AND
POP
AS
THE
OBJECT
IS
MOVED
ON
THE
SCREEN
THE
FUZZING
OF
THE
TRANSITION
REGION
ELIMINATES
THOSE
ARTIFACTS
A
CLOSE
UP
VIEW
OF
THE
FUZZED
BOUNDARY
IS
SHOWN
IN
FIGURE
MORE
INFORMATION
ABOUT
ANTIALIASING
PROCEDURAL
SHADERS
CAN
BE
FOUND
IN
ANTIALIASING
PROCEDURAL
TEXTURES
ON
PAGE
CHAPTER
PROCEDURAL
TEXTURING
NOW
ALL
THAT
REMAINS
TO
BE
DONE
IS
TO
APPLY
THE
DIFFUSE
AND
SPECULAR
LIGHTING
EFFECTS
COMPUTED
BY
THE
VERTEX
SHADER
AND
SUPPLY
AN
ALPHA
VALUE
OF
TO
PRODUCE
OUR
FINAL
FRAGMENT
COLOR
BY
MODIFYING
THE
FIVE
BASIC
PARAMETERS
OF
OUR
FRAGMENT
SHADER
WE
CAN
CREATE
A
FAIRLY
INTERESTING
NUMBER
OF
VARIATIONS
OF
OUR
STRIPE
PATTERN
USING
THE
SAME
SHADER
FIGURE
STRIPES
CLOSE
UP
EXTREME
CLOSE
UP
VIEW
OF
ONE
OF
THE
STRIPES
THAT
SHOWS
THE
EFFECT
OF
THE
FUZZ
CALCULATION
FROM
THE
STRIPE
SHADER
COURTESY
OF
LIGHTWORK
DESIGN
BRICK
AS
A
SECOND
EXAMPLE
OF
A
REGULAR
PATTERN
WE
WILL
LOOK
AT
A
SHADER
THAT
DRAWS
BRICK
WITH
A
SLIGHTLY
DIFFERENT
METHOD
OF
LIGHTING
THAN
THE
STRIPES
EXAMPLE
AGAIN
THE
VERTEX
SHADER
HERE
IS
SOMEWHAT
GENERIC
AND
COULD
BE
USED
WITH
MULTIPLE
DIFFERENT
FRAGMENT
SHADERS
TO
SEE
THE
EFFECT
THEY
WILL
PRODUCE
SEE
FIGURE
OUR
BRICK
EXAMPLE
WILL
ALSO
CLEARLY
DISPLAY
ALIASING
WHICH
WE
WILL
COME
BACK
AND
VISIT
IN
THE
UPCOMING
ANTIALIASING
SECTION
THERE
IS
A
CLOSE
UP
OF
THIS
ALIASING
IN
THE
LEFT
PICTURE
IN
FIGURE
PROCEDURAL
TEXTURING
FIGURE
BRICK
PATTERNS
A
FLAT
POLYGON
A
SPHERE
AND
A
TORUS
RENDERED
WITH
THE
BRICK
SHADERS
BRICKS
VERTEX
SHADER
LET
DIVE
RIGHT
IN
WITH
THE
VERTEX
SHADER
SHOWN
IN
EXAMPLE
IT
HAS
LITTLE
TO
DO
WITH
DRAWING
BRICK
BUT
DOES
COMPUTE
HOW
THE
BRICK
WILL
BE
LIT
IF
YOU
WISH
READ
THROUGH
IT
AND
IF
YOU
VE
INTERNALIZED
THE
BEGINNING
OF
CHAPTER
AS
WELL
AS
THE
FIRST
EXAMPLE
GIVEN
ABOVE
IT
SHOULD
ALL
START
TO
MAKE
SENSE
THE
BRICK
PATTERN
WILL
COME
FROM
THE
FRAGMENT
SHADER
AND
WE
LL
EXPLAIN
THAT
NEXT
EXAMPLE
VERTEX
SHADER
FOR
DRAWING
BRICKS
VERSION
CORE
IN
MCVERTEX
IN
MCNORMAL
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
UNIFORM
LIGHTPOSITION
CONST
FLOAT
SPECULARCONTRIBUTION
CONST
FLOAT
DIFFUSECONTRIBUTION
SPECULARCONTRIBUTION
OUT
FLOAT
LIGHTINTENSITY
OUT
MCPOSITION
VOID
MAIN
ECPOSITION
MVMATRIX
MCVERTEX
TNORM
NORMALIZE
NORMALMATRIX
MCNORMAL
LIGHTVEC
NORMALIZE
LIGHTPOSITION
ECPOSITION
REFLECTVEC
REFLECT
LIGHTVEC
TNORM
VIEWVEC
NORMALIZE
ECPOSITION
FLOAT
DIFFUSE
MAX
DOT
LIGHTVEC
TNORM
CHAPTER
PROCEDURAL
TEXTURING
FLOAT
SPEC
IF
DIFFUSE
SPEC
MAX
DOT
REFLECTVEC
VIEWVEC
SPEC
POW
SPEC
LIGHTINTENSITY
DIFFUSECONTRIBUTION
DIFFUSE
SPECULARCONTRIBUTION
SPEC
MCPOSITION
MCVERTEX
XY
MVPMATRIX
MCVERTEX
BRICKS
FRAGMENT
SHADER
THE
FRAGMENT
SHADER
CONTAINS
THE
CORE
ALGORITHM
TO
MAKE
THE
BRICK
PATTERN
IT
IS
PROVIDED
IN
EXAMPLE
AND
WE
WILL
POINT
OUT
THE
KEY
COMPUTATIONS
THAT
MAKE
IT
WORK
EXAMPLE
FRAGMENT
SHADER
FOR
DRAWING
BRICKS
VERSION
CORE
UNIFORM
BRICKCOLOR
MORTARCOLOR
UNIFORM
BRICKSIZE
UNIFORM
BRICKPCT
IN
MCPOSITION
IN
FLOAT
LIGHTINTENSITY
OUT
FRAGCOLOR
VOID
MAIN
COLOR
POSITION
USEBRICK
POSITION
MCPOSITION
BRICKSIZE
IF
FRACT
POSITION
Y
POSITION
X
POSITION
FRACT
POSITION
USEBRICK
STEP
POSITION
BRICKPCT
COLOR
MIX
MORTARCOLOR
BRICKCOLOR
USEBRICK
X
USEBRICK
Y
COLOR
LIGHTINTENSITY
FRAGCOLOR
COLOR
PROCEDURAL
TEXTURING
THE
COLORS
TO
MAKE
THE
BRICK
AND
MORTAR
ARE
SELECTED
BY
THE
APPLICATION
AND
SENT
IN
AS
BRICKCOLOR
AND
MORTARCOLOR
THE
SIZE
OF
THE
BRICK
PATTERN
USES
TWO
INDEPENDENT
COMPONENTS
FOR
WIDTH
AND
HEIGHT
AND
IS
ALSO
SENT
BY
THE
APPLICATION
IN
BRICKSIZE
FINALLY
THE
APPLICATION
SELECTS
WHAT
PERCENTAGE
OF
THE
PATTERN
WILL
BE
BRICK
IN
BRICKPCT
WITH
THE
REMAINING
BEING
MORTAR
THE
SIZES
ARE
IN
THE
SAME
UNITS
AS
THE
POSITION
COMING
FROM
THE
VERTEX
SHADER
MCPOSITION
WHICH
IN
TURN
WAS
PASSED
INTO
THE
VERTEX
SHADER
FROM
THE
APPLICATION
THE
INPUT
MCPOSITION
IS
EFFECTIVELY
OUR
TEXTURE
COORDINATE
THE
KEY
TO
KNOWING
WHERE
WE
ARE
IN
THE
BRICK
PATTERN
IS
LOOKING
AT
THE
FRACTIONAL
PART
OF
DIVIDING
MCPOSITION
BY
THE
BRICK
SIZE
EACH
TIME
THE
PATTERN
COMPLETES
WE
ARE
AT
A
WHOLE
NUMBER
OF
REPETITIONS
OF
THE
BRICK
HENCE
THE
FRACTIONAL
PART
GOES
TO
AS
WE
MOVE
THROUGH
ONE
ITERATION
OF
THE
BRICK
THE
FRACTIONAL
PART
APPROACHES
THESE
COMPUTATIONS
ARE
DONE
WITH
MATH
SO
WE
GET
BOTH
DIMENSIONS
ANSWERED
AT
THE
SAME
TIME
BECAUSE
ALTERNATING
ROWS
OF
BRICK
ARE
OFFSET
WE
CONDITIONALLY
ADD
TO
THE
X
DIMENSION
FOR
ALTERNATING
COUNTS
OF
THE
REPEAT
PATTERN
IN
THE
Y
DIMENSION
THIS
IS
CRYPTICALLY
DONE
AS
FRACT
POSITION
Y
FOR
WHICH
YOU
MIGHT
HAVE
OTHER
WAYS
OF
EXPRESSING
ONCE
WE
KNOW
WHERE
WE
ARE
IN
THE
BRICK
PATTERN
WE
COULD
USE
A
BUNCH
OF
IF
TESTS
TO
SELECT
THE
RIGHT
COLOR
OR
WE
COULD
USE
MATH
IN
THIS
EXAMPLE
WE
CHOSE
MATH
THE
RANGE
OF
POSITION
IS
AND
WE
NEED
BRICKPCT
TO
BE
IN
THE
SAME
RANGE
THE
STEP
FUNCTION
SAYS
THE
FIRST
ARGUMENT
IS
AN
EDGE
THE
LEFT
OF
WHICH
SHOULD
RETURN
AND
THE
RIGHT
OF
WHICH
SHOULD
SO
FOR
A
PARTICULAR
DIMENSION
STEP
POSITION
BRICKPCT
WILL
RETURN
IF
WE
ARE
IN
THE
BRICK
AND
IF
IN
THE
MORTAR
WE
WANT
TO
DRAW
MORTAR
IF
EITHER
DIMENSION
SAYS
TO
DRAW
MORTAR
WELL
WITH
THESE
AND
RESULTS
MULTIPLYING
THEM
ANSWERS
THAT
QUESTION
WITHOUT
USING
ANY
IF
TESTS
FINALLY
THE
MIX
FUNCTION
IS
USED
TO
PICK
ONE
OF
THE
COLORS
NO
ACTUAL
MIXING
OCCURS
BECAUSE
THE
RATIO
OF
MIXING
IS
EITHER
GOING
TO
BE
OR
IT
SIMPLY
SELECTS
THE
FIRST
OR
SECOND
ARGUMENT
ADDITIONAL
REASONS
FOR
USING
STEP
AND
MIX
IN
THIS
WAY
WILL
BECOME
CLEAR
WHEN
WE
ANTIALIAS
TOY
BALL
PROGRAMMABILITY
IS
THE
KEY
TO
PROCEDURALLY
DEFINING
ALL
SORTS
OF
TEXTURE
PATTERNS
THIS
NEXT
SHADER
TAKES
THINGS
A
BIT
FURTHER
BY
SHADING
A
SPHERE
WITH
A
PROCEDURALLY
DEFINED
STAR
PATTERN
AND
A
PROCEDURALLY
DEFINED
STRIPE
THIS
SHADER
WAS
INSPIRED
BY
THE
BALL
IN
ONE
OF
PIXAR
EARLY
SHORT
CHAPTER
PROCEDURAL
TEXTURING
ANIMATIONS
LUXO
JR
THIS
SHADER
IS
QUITE
SPECIALIZED
IT
SHADES
ANY
SURFACE
AS
LONG
AS
IT
A
SPHERE
THE
REASON
IS
THAT
THE
FRAGMENT
SHADER
EXPLOITS
THE
FOLLOWING
PROPERTY
OF
THE
SPHERE
THE
SURFACE
NORMAL
FOR
ANY
POINT
ON
THE
SURFACE
POINTS
IN
THE
SAME
DIRECTION
AS
THE
VECTOR
FROM
THE
CENTER
OF
THE
SPHERE
TO
THAT
POINT
ON
THE
SURFACE
THIS
PROPERTY
IS
USED
TO
ANALYTICALLY
COMPUTE
THE
SURFACE
NORMAL
USED
IN
THE
SHADING
CALCULATIONS
WITHIN
THE
FRAGMENT
SHADER
THIS
IS
ACTUALLY
A
REASONABLE
APPROXIMATION
FOR
CONVEX
HULLS
THAT
AREN
T
TOO
FAR
FROM
BEING
SPHERICAL
THE
KEY
TO
THIS
SHADER
IS
THAT
THE
STAR
PATTERN
IS
DEFINED
BY
THE
COEFFICIENTS
FOR
FIVE
HALF
SPACES
THAT
DEFINE
THE
STAR
SHAPE
THESE
COEFFICIENTS
WERE
CHOSEN
TO
MAKE
THE
STAR
PATTERN
AN
APPROPRIATE
SIZE
FOR
THE
BALL
POINTS
ON
THE
SPHERE
ARE
CLASSIFIED
AS
IN
OR
OUT
RELATIVE
TO
EACH
HALF
SPACE
LOCATIONS
IN
THE
VERY
CENTER
OF
THE
STAR
PATTERN
ARE
IN
WITH
RESPECT
TO
ALL
FIVE
HALF
SPACES
LOCATIONS
IN
THE
POINTS
OF
THE
STAR
ARE
IN
WITH
RESPECT
TO
FOUR
OF
THE
FIVE
HALF
SPACES
ALL
OTHER
LOCATIONS
ARE
IN
WITH
RESPECT
TO
THREE
OR
FEWER
HALF
SPACES
FRAGMENTS
THAT
ARE
IN
THE
STRIPE
PATTERN
ARE
SIMPLER
TO
COMPUTE
AFTER
WE
HAVE
CLASSIFIED
EACH
LOCATION
ON
THE
SURFACE
AS
STAR
STRIPE
OR
OTHER
WE
CAN
COLOR
EACH
FRAGMENT
APPROPRIATELY
THE
COLOR
COMPUTATIONS
ARE
APPLIED
IN
AN
ORDER
THAT
ENSURES
A
REASONABLE
RESULT
EVEN
IF
THE
BALL
IS
VIEWED
FROM
FAR
AWAY
A
SURFACE
NORMAL
IS
CALCULATED
ANALYTICALLY
I
E
EXACTLY
WITHIN
THE
FRAGMENT
SHADER
A
LIGHTING
COMPUTATION
THAT
INCLUDES
A
SPECULAR
HIGHLIGHT
CALCULATION
IS
ALSO
APPLIED
AT
EVERY
FRAGMENT
APPLICATION
SETUP
THE
APPLICATION
NEEDS
ONLY
TO
PROVIDE
VERTEX
POSITIONS
FOR
THIS
SHADER
TO
WORK
PROPERLY
BOTH
COLORS
AND
NORMALS
ARE
COMPUTED
ALGORITHMICALLY
IN
THE
FRAGMENT
SHADER
THE
ONLY
CATCH
IS
THAT
FOR
THIS
SHADER
TO
WORK
PROPERLY
THE
VERTICES
MUST
DEFINE
A
SPHERE
THE
SPHERE
CAN
BE
OF
ARBITRARY
SIZE
BECAUSE
THE
FRAGMENT
SHADER
PERFORMS
ALL
THE
NECESSARY
COMPUTATIONS
BASED
ON
THE
KNOWN
GEOMETRY
OF
A
SPHERE
A
NUMBER
OF
PARAMETERS
TO
THIS
SHADER
ARE
SPECIFIED
WITH
UNIFORM
VARIABLES
THE
VALUES
THAT
PRODUCE
THE
IMAGES
SHOWN
IN
THE
REMAINDER
OF
THIS
SECTION
ARE
SUMMARIZED
IN
EXAMPLE
EXAMPLE
VALUES
FOR
UNIFORM
VARIABLES
USED
BY
THE
TOY
BALL
SHADER
HALFSPACE
HALFSPACE
HALFSPACE
HALFSPACE
HALFSPACE
STRIPEWIDTH
PROCEDURAL
TEXTURING
INOROUTINIT
FWIDTH
STARCOLOR
STRIPECOLOR
BASECOLOR
BALLCENTER
LIGHTDIR
HVECTOR
SPECULARCOLOR
SPECULAREXPONENT
KA
KD
KS
VERTEX
SHADER
THE
FRAGMENT
SHADER
IS
THE
WORKHORSE
FOR
THIS
SHADER
DUO
SO
THE
VERTEX
SHADER
NEEDS
ONLY
TO
COMPUTE
THE
BALL
CENTER
POSITION
IN
EYE
COORDINATES
THE
EYE
COORDINATE
POSITION
OF
THE
VERTEX
AND
THE
CLIP
SPACE
POSITION
AT
EACH
VERTEX
THE
APPLICATION
COULD
PROVIDE
THE
BALL
CENTER
POSITION
IN
EYE
COORDINATES
BUT
OUR
VERTEX
SHADER
DOESN
T
HAVE
MUCH
TO
DO
AND
DOING
IT
THIS
WAY
MEANS
THE
APPLICATION
DOESN
T
HAVE
TO
KEEP
TRACK
OF
THE
MODEL
VIEW
MATRIX
THIS
VALUE
COULD
EASILY
BE
COMPUTED
IN
THE
FRAGMENT
SHADER
BUT
THE
FRAGMENT
SHADER
WILL
LIKELY
HAVE
A
LITTLE
BETTER
PERFORMANCE
IF
WE
LEAVE
THE
COMPUTATION
IN
THE
VERTEX
SHADER
AND
PASS
THE
RESULT
AS
A
FLAT
INTERPOLATED
OUT
VARIABLE
SEE
EXAMPLE
EXAMPLE
VERTEX
SHADER
FOR
DRAWING
A
TOY
BALL
VERSION
CORE
UNIFORM
MCBALLCENTER
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
IN
MCVERTEX
OUT
OCPOSITION
OUT
ECPOSITION
FLAT
OUT
ECBALLCENTER
VOID
MAIN
VOID
OCPOSITION
MCVERTEX
XYZ
ECPOSITION
MVMATRIX
MCVERTEX
ECBALLCENTER
MVMATRIX
MCBALLCENTER
MVPMATRIX
MCVERTEX
CHAPTER
PROCEDURAL
TEXTURING
FRAGMENT
SHADER
THE
TOY
BALL
FRAGMENT
SHADER
IS
A
LITTLE
BIT
LONGER
THAN
SOME
OF
THE
PREVIOUS
EXAMPLES
SO
WE
BUILD
IT
UP
A
FEW
LINES
OF
CODE
AT
A
TIME
AND
ILLUSTRATE
SOME
INTERMEDIATE
RESULTS
THE
DEFINITIONS
FOR
THE
LOCAL
VARIABLES
THAT
ARE
USED
IN
THE
TOY
BALL
FRAGMENT
SHADER
ARE
AS
FOLLOWS
NORMAL
ANALYTICALLY
COMPUTED
NORMAL
PSHADE
POINT
IN
SHADER
SPACE
SURFCOLOR
COMPUTED
COLOR
OF
THE
SURFACE
FLOAT
INTENSITY
COMPUTED
LIGHT
INTENSITY
DISTANCE
COMPUTED
DISTANCE
VALUES
FLOAT
INOROUT
COUNTER
FOR
CLASSIFYING
STAR
PATTERN
THE
FIRST
THING
WE
DO
IS
TURN
THE
SURFACE
LOCATION
THAT
WE
RE
SHADING
INTO
A
POINT
ON
A
SPHERE
WITH
A
RADIUS
OF
WE
CAN
DO
THIS
WITH
THE
NORMALIZE
FUNCTION
PSHADE
XYZ
NORMALIZE
OCPOSITION
XYZ
PSHADE
W
WE
DON
T
WANT
TO
INCLUDE
THE
W
COORDINATE
IN
THE
COMPUTATION
SO
WE
USE
THE
COMPONENT
SELECTOR
XYZ
TO
SELECT
THE
FIRST
THREE
COMPONENTS
OF
OCPOSITION
THIS
NORMALIZED
VECTOR
IS
STORED
IN
THE
FIRST
THREE
COMPONENTS
OF
PSHADE
WITH
THIS
COMPUTATION
PSHADE
REPRESENTS
A
POINT
ON
THE
SPHERE
WITH
RADIUS
SO
ALL
THREE
COMPONENTS
OF
PSHADE
ARE
IN
THE
RANGE
THE
W
COORDINATE
ISN
T
REALLY
PERTINENT
TO
OUR
COMPUTATIONS
AT
THIS
POINT
BUT
TO
MAKE
SUBSEQUENT
CALCULATIONS
WORK
PROPERLY
WE
INITIALIZE
IT
TO
A
VALUE
OF
WE
ARE
ALWAYS
GOING
TO
BE
SHADING
SPHERES
WITH
THIS
FRAGMENT
SHADER
SO
WE
ANALYTICALLY
CALCULATE
THE
SURFACE
NORMAL
OF
THE
SPHERE
NORMAL
NORMALIZE
ECPOSITION
XYZ
ECBALLCENTER
XYZ
NEXT
WE
PERFORM
OUR
HALF
SPACE
COMPUTATIONS
WE
INITIALIZE
A
COUNTER
INOROUT
TO
A
VALUE
OF
WE
INCREMENT
THE
COUNTER
EACH
TIME
THE
SURFACE
LOCATION
IS
IN
WITH
RESPECT
TO
A
HALF
SPACE
BECAUSE
FIVE
HALF
SPACES
ARE
DEFINED
THE
FINAL
COUNTER
VALUE
WILL
BE
IN
THE
RANGE
VALUES
OF
OR
SIGNIFY
THAT
THE
FRAGMENT
IS
WITHIN
THE
STAR
PATTERN
VALUES
OF
OR
LESS
SIGNIFY
THAT
THE
FRAGMENT
IS
OUTSIDE
THE
STAR
PATTERN
INOROUT
INOROUTINIT
INITIALIZE
INOROUT
TO
WE
HAVE
DEFINED
THE
HALF
SPACES
AS
AN
ARRAY
OF
FIVE
VALUES
DONE
OUR
IN
OR
OUT
COMPUTATIONS
AND
STORED
THE
RESULTS
IN
AN
ARRAY
OF
FIVE
FLOAT
PROCEDURAL
TEXTURING
VALUES
BUT
WE
CAN
TAKE
A
LITTLE
BETTER
ADVANTAGE
OF
THE
PARALLEL
NATURE
OF
THE
UNDERLYING
GRAPHICS
HARDWARE
IF
WE
DO
THINGS
A
BIT
DIFFERENTLY
YOU
LL
SEE
HOW
IN
A
MINUTE
FIRST
WE
COMPUTE
THE
DISTANCE
BETWEEN
PSHADE
AND
THE
FIRST
FOUR
HALF
SPACES
BY
USING
THE
BUILT
IN
DOT
PRODUCT
FUNCTION
DISTANCE
DOT
P
HALFSPACE
DISTANCE
DOT
P
HALFSPACE
DISTANCE
DOT
P
HALFSPACE
DISTANCE
DOT
P
HALFSPACE
THE
RESULTS
OF
THESE
HALF
SPACE
DISTANCE
CALCULATIONS
ARE
VISUALIZED
IN
A
D
OF
FIGURE
SURFACE
LOCATIONS
THAT
ARE
IN
WITH
RESPECT
TO
THE
HALF
SPACE
ARE
SHADED
IN
GRAY
AND
POINTS
THAT
ARE
OUT
ARE
SHADED
IN
BLACK
YOU
MAY
HAVE
BEEN
WONDERING
WHY
OUR
COUNTER
WAS
DEFINED
AS
A
FLOAT
INSTEAD
OF
AN
INT
WE
RE
GOING
TO
USE
THE
COUNTER
VALUE
AS
THE
BASIS
FOR
A
SMOOTHLY
ANTIALIASED
TRANSITION
BETWEEN
THE
COLOR
OF
THE
STAR
PATTERN
AND
THE
COLOR
OF
THE
REST
OF
THE
BALL
SURFACE
TO
THIS
END
WE
USE
THE
SMOOTHSTEP
FUNCTION
TO
SET
THE
DISTANCE
TO
IF
THE
COMPUTED
DISTANCE
IS
LESS
THAN
FWIDTH
TO
IF
THE
COMPUTED
DISTANCE
IS
GREATER
THAN
FWIDTH
AND
TO
A
SMOOTHLY
INTERPOLATED
VALUE
BETWEEN
AND
IF
THE
COMPUTED
DISTANCE
IS
BETWEEN
THOSE
TWO
VALUES
BY
DEFINING
DISTANCE
AS
A
WE
CAN
PERFORM
THE
SMOOTH
STEP
COMPUTATION
ON
FOUR
VALUES
IN
PARALLEL
THE
BUILT
IN
FUNCTION
SMOOTHSTEP
IMPLIES
A
DIVIDE
OPERATION
AND
BECAUSE
FWIDTH
IS
A
FLOAT
ONLY
ONE
DIVIDE
OPERATION
IS
NECESSARY
THIS
MAKES
IT
ALL
VERY
EFFICIENT
DISTANCE
SMOOTHSTEP
FWIDTH
FWIDTH
DISTANCE
NOW
WE
CAN
QUICKLY
ADD
THE
VALUES
IN
DISTANCE
BY
PERFORMING
A
DOT
PRODUCT
BETWEEN
DISTANCE
AND
A
CONTAINING
FOR
ALL
COMPONENTS
INOROUT
DOT
DISTANCE
BECAUSE
WE
INITIALIZED
INOROUT
TO
WE
ADD
THE
RESULT
OF
THE
DOT
PRODUCT
TO
THE
PREVIOUS
VALUE
OF
INOROUT
THIS
VARIABLE
NOW
CONTAINS
A
VALUE
IN
THE
RANGE
AND
WE
HAVE
ONE
MORE
HALF
SPACE
DISTANCE
TO
COMPUTE
WE
COMPUTE
THE
DISTANCE
TO
THE
FIFTH
HALF
SPACE
AND
WE
DO
THE
COMPUTATION
TO
DETERMINE
WHETHER
WE
RE
IN
OR
OUT
OF
THE
STRIPE
AROUND
THE
BALL
WE
CALL
THE
SMOOTHSTEP
FUNCTION
TO
DO
THE
SAME
OPERATION
ON
THESE
TWO
VALUES
AS
WAS
PERFORMED
ON
THE
PREVIOUS
FOUR
HALF
SPACE
DISTANCES
WE
UPDATE
THE
INOROUT
COUNTER
BY
ADDING
THE
RESULT
FROM
THE
DISTANCE
COMPUTATION
WITH
THE
FINAL
HALF
SPACE
THE
DISTANCE
COMPUTATION
WITH
RESPECT
TO
THE
FIFTH
HALF
SPACE
IS
ILLUSTRATED
IN
E
OF
FIGURE
CHAPTER
PROCEDURAL
TEXTURING
FIGURE
VISUALIZING
THE
RESULTS
OF
THE
HALF
SPACE
DISTANCE
CALCULATIONS
COURTESY
OF
AMD
DISTANCE
X
DOT
PSHADE
HALFSPACE
DISTANCE
Y
STRIPEWIDTH
ABS
PSHADE
Z
DISTANCE
XY
SMOOTHSTEP
FWIDTH
FWIDTH
DISTANCE
XY
INOROUT
DISTANCE
X
IN
THIS
CASE
WE
RE
PERFORMING
A
SMOOTH
STEP
OPERATION
ONLY
ON
THE
X
AND
Y
COMPONENTS
THE
VALUE
FOR
INOROUT
IS
NOW
IN
THE
RANGE
THIS
INTERMEDIATE
RESULT
IS
ILLUSTRATED
IN
FIGURE
A
BY
CLAMPING
THE
VALUE
OF
INOROUT
TO
THE
RANGE
WE
OBTAIN
THE
RESULT
SHOWN
IN
FIGURE
B
INOROUT
CLAMP
INOROUT
AT
THIS
POINT
WE
CAN
COMPUTE
THE
SURFACE
COLOR
FOR
THE
FRAGMENT
WE
USE
THE
COMPUTED
VALUE
OF
INOROUT
TO
PERFORM
A
LINEAR
BLEND
BETWEEN
YELLOW
AND
RED
TO
DEFINE
THE
STAR
PATTERN
IF
WE
WERE
TO
STOP
HERE
THE
RESULT
WOULD
LOOK
LIKE
BALL
A
IN
FIGURE
IF
WE
TAKE
THE
RESULTS
OF
THIS
CALCULATION
AND
DO
A
LINEAR
BLEND
WITH
THE
COLOR
OF
THE
STRIPE
WE
GET
THE
RESULT
SHOWN
FOR
BALL
B
FIGURE
BECAUSE
WE
USED
SMOOTHSTEP
THE
VALUES
OF
INOROUT
AND
DISTANCE
Y
PROVIDE
A
NICELY
ANTIALIASED
EDGE
AT
THE
BORDER
BETWEEN
COLORS
SURFCOLOR
MIX
BASECOLOR
STARCOLOR
INOROUT
SURFCOLOR
MIX
SURFCOLOR
STRIPECOLOR
DISTANCE
Y
THE
RESULT
AT
THIS
STAGE
IS
FLAT
AND
UNREALISTIC
PERFORMING
A
LIGHTING
CALCULATION
WILL
FIX
THIS
THE
FIRST
STEP
IS
TO
ANALYTICALLY
COMPUTE
THE
NORMAL
FOR
THIS
FRAGMENT
WHICH
WE
CAN
DO
BECAUSE
WE
KNOW
THE
EYE
COORDINATE
POSITION
OF
THE
CENTER
OF
THE
BALL
IT
PROVIDED
IN
THE
IN
VARIABLE
ECBALLCENTER
AND
WE
KNOW
THE
EYE
COORDINATE
POSITION
OF
THE
FRAGMENT
IT
PASSED
IN
THE
IN
VARIABLE
ECPOSITION
CALCULATE
ANALYTIC
NORMAL
OF
A
SPHERE
NORMAL
NORMALIZE
ECPOSITION
XYZ
ECBALLCENTER
XYZ
PROCEDURAL
TEXTURING
FIGURE
INTERMEDIATE
RESULTS
FROM
THE
TOY
BALL
SHADER
IN
A
THE
PROCEDURALLY
DEFINED
STAR
PATTERN
IS
DISPLAYED
IN
B
THE
STRIPE
IS
ADDED
IN
C
DIFFUSE
LIGHTING
IS
APPLIED
IN
D
THE
ANALYTICALLY
DEFINED
NOR
MAL
IS
USED
TO
APPLY
A
SPECULAR
HIGHLIGHT
COURTESY
OF
ATI
RESEARCH
INC
THE
DIFFUSE
PART
OF
THE
LIGHTING
EQUATION
IS
COMPUTED
WITH
THESE
THREE
LINES
OF
CODE
PER
FRAGMENT
DIFFUSE
LIGHTING
INTENSITY
KA
AMBIENT
INTENSITY
KD
CLAMP
DOT
LIGHTDIR
XYZ
NORMAL
SURFCOLOR
INTENSITY
THE
RESULT
OF
DIFFUSE
ONLY
LIGHTING
IS
SHOWN
AS
BALL
C
IN
FIGURE
THE
FINAL
STEP
IS
TO
ADD
A
SPECULAR
CONTRIBUTION
WITH
THESE
THREE
LINES
OF
CODE
PER
FRAGMENT
SPECULAR
LIGHTING
INTENSITY
CLAMP
DOT
HVECTOR
XYZ
NORMAL
INTENSITY
KS
POW
INTENSITY
SPECULAREXPONENT
SURFCOLOR
RGB
SPECULARCOLOR
RGB
INTENSITY
CHAPTER
PROCEDURAL
TEXTURING
FIGURE
INTERMEDIATE
RESULTS
FROM
IN
OR
OUT
COMPUTATION
SURFACE
POINTS
THAT
ARE
IN
WITH
RESPECT
TO
ALL
FIVE
HALF
PLANES
ARE
SHOWN
IN
WHITE
AND
POINTS
THAT
ARE
IN
WITH
RESPECT
TO
FOUR
HALF
PLANES
ARE
SHOWN
IN
GRAY
A
THE
VALUE
OF
INOROUT
IS
CLAMPED
TO
THE
RANGE
TO
PRODUCE
THE
RESULT
SHOWN
IN
B
COURTESY
OF
AMD
NOTICE
IN
BALL
D
IN
FIGURE
THAT
THE
SPECULAR
HIGHLIGHT
IS
PERFECT
BECAUSE
THE
SURFACE
NORMAL
AT
EACH
FRAGMENT
IS
COMPUTED
EXACTLY
THERE
IS
NO
MISSHAPEN
SPECULAR
HIGHLIGHT
CAUSED
BY
TESSELLATION
FACETS
LIKE
WE
RE
USED
TO
SEEING
THE
RESULTING
VALUE
IS
WRITTEN
TO
FRAGCOLOR
AND
SENT
ON
FOR
FINAL
PROCESSING
BEFORE
ULTIMATELY
BEING
WRITTEN
INTO
THE
FRAMEBUFFER
FRAGCOLOR
SURFCOLOR
VOILA
YOUR
VERY
OWN
TOY
BALL
CREATED
COMPLETELY
OUT
OF
THIN
AIR
THE
COMPLETE
LISTING
OF
THE
TOY
BALL
FRAGMENT
SHADER
IS
SHOWN
IN
EXAMPLE
EXAMPLE
FRAGMENT
SHADER
FOR
DRAWING
A
TOY
BALL
VERSION
CORE
UNIFORM
HALFSPACE
HALF
SPACES
USED
TO
DEFINE
STAR
PATTERN
UNIFORM
FLOAT
STRIPEWIDTH
UNIFORM
FLOAT
INOROUTINIT
UNIFORM
FLOAT
FWIDTH
UNIFORM
STARCOLOR
UNIFORM
STRIPECOLOR
UNIFORM
BASECOLOR
UNIFORM
LIGHTDIR
LIGHT
DIRECTION
SHOULD
BE
NORMALIZED
UNIFORM
HVECTOR
REFLECTION
VECTOR
FOR
INFINITE
LIGHT
PROCEDURAL
TEXTURING
UNIFORM
SPECULARCOLOR
UNIFORM
FLOAT
SPECULAREXPONENT
UNIFORM
FLOAT
KA
UNIFORM
FLOAT
KD
UNIFORM
FLOAT
KS
IN
ECPOSITION
SURFACE
POSITION
IN
EYE
COORDINATES
IN
OCPOSITION
SURFACE
POSITION
IN
OBJECT
COORDINATES
FLAT
IN
ECBALLCENTER
BALL
CENTER
IN
EYE
COORDINATES
OUT
FRAGCOLOR
VOID
MAIN
NORMAL
ANALYTICALLY
COMPUTED
NORMAL
PSHADE
POINT
IN
SHADER
SPACE
SURFCOLOR
COMPUTED
COLOR
OF
THE
SURFACE
FLOAT
INTENSITY
COMPUTED
LIGHT
INTENSITY
DISTANCE
COMPUTED
DISTANCE
VALUES
FLOAT
INOROUT
COUNTER
FOR
CLASSIFYING
STAR
PATTERN
PSHADE
XYZ
NORMALIZE
OCPOSITION
XYZ
PSHADE
W
INOROUT
INOROUTINIT
INITIALIZE
INOROUT
TO
DISTANCE
DOT
PSHADE
HALFSPACE
DISTANCE
DOT
PSHADE
HALFSPACE
DISTANCE
DOT
PSHADE
HALFSPACE
DISTANCE
DOT
PSHADE
HALFSPACE
FLOAT
FWIDTH
FWIDTH
PSHADE
DISTANCE
SMOOTHSTEP
FWIDTH
FWIDTH
DISTANCE
INOROUT
DOT
DISTANCE
DISTANCE
X
DOT
PSHADE
HALFSPACE
DISTANCE
Y
STRIPEWIDTH
ABS
PSHADE
Z
DISTANCE
XY
SMOOTHSTEP
FWIDTH
FWIDTH
DISTANCE
XY
INOROUT
DISTANCE
X
INOROUT
CLAMP
INOROUT
SURFCOLOR
MIX
BASECOLOR
STARCOLOR
INOROUT
SURFCOLOR
MIX
SURFCOLOR
STRIPECOLOR
DISTANCE
Y
CALCULATE
ANALYTIC
NORMAL
OF
A
SPHERE
NORMAL
NORMALIZE
ECPOSITION
XYZ
ECBALLCENTER
XYZ
PER
FRAGMENT
DIFFUSE
LIGHTING
INTENSITY
KA
AMBIENT
INTENSITY
KD
CLAMP
DOT
LIGHTDIR
XYZ
NORMAL
CHAPTER
PROCEDURAL
TEXTURING
SURFCOLOR
INTENSITY
PER
FRAGMENT
SPECULAR
LIGHTING
INTENSITY
CLAMP
DOT
HVECTOR
XYZ
NORMAL
INTENSITY
KS
POW
INTENSITY
SPECULAREXPONENT
SURFCOLOR
RGB
SPECULARCOLOR
RGB
INTENSITY
FRAGCOLOR
SURFCOLOR
LATTICE
HERE
A
LITTLE
BIT
OF
A
GIMMICK
IN
THIS
EXAMPLE
WE
SHOW
HOW
NOT
TO
DRAW
THE
OBJECT
PROCEDURALLY
IN
THIS
EXAMPLE
WE
LOOK
AT
HOW
THE
DISCARD
COMMAND
CAN
BE
USED
IN
A
FRAGMENT
SHADER
TO
ACHIEVE
SOME
INTERESTING
EFFECTS
THE
DISCARD
COMMAND
CAUSES
FRAGMENTS
TO
BE
DISCARDED
RATHER
THAN
USED
TO
UPDATE
THE
FRAMEBUFFER
WE
USE
THIS
TO
DRAW
GEOMETRY
WITH
HOLES
THE
VERTEX
SHADER
IS
THE
EXACT
SAME
VERTEX
SHADER
USED
FOR
STRIPES
REGULAR
PATTERNS
THE
FRAGMENT
SHADER
IS
SHOWN
IN
EXAMPLE
EXAMPLE
FRAGMENT
SHADER
FOR
PROCEDURALLY
DISCARDING
PART
OF
AN
OBJECT
IN
DIFFUSECOLOR
IN
SPECULARCOLOR
IN
TEXCOORD
OUT
FRAGCOLOR
UNIFORM
SCALE
UNIFORM
THRESHOLD
UNIFORM
SURFACECOLOR
VOID
MAIN
FLOAT
SS
FRACT
TEXCOORD
SCALE
FLOAT
TT
FRACT
TEXCOORD
T
SCALE
T
IF
SS
THRESHOLD
TT
THRESHOLD
T
DISCARD
FINALCOLOR
SURFACECOLOR
DIFFUSECOLOR
SPECULARCOLOR
FRAGCOLOR
FINALCOLOR
THE
PART
OF
THE
OBJECT
TO
BE
DISCARDED
IS
DETERMINED
BY
THE
VALUES
OF
THE
AND
T
TEXTURE
COORDINATES
A
SCALE
FACTOR
IS
APPLIED
TO
ADJUST
THE
FREQUENCY
PROCEDURAL
TEXTURING
OF
THE
LATTICE
THE
FRACTIONAL
PART
OF
THIS
SCALED
TEXTURE
COORDINATE
VALUE
IS
COMPUTED
TO
PROVIDE
A
NUMBER
IN
THE
RANGE
THESE
VALUES
ARE
COMPARED
WITH
THE
THRESHOLD
VALUES
THAT
HAVE
BEEN
PROVIDED
IF
BOTH
VALUES
EXCEED
THE
THRESHOLD
THE
FRAGMENT
IS
DISCARDED
OTHERWISE
WE
DO
A
SIMPLE
LIGHTING
CALCULATION
AND
RENDER
THE
FRAGMENT
IN
FIGURE
THE
THRESHOLD
VALUES
WERE
BOTH
SET
TO
THIS
MEANS
THAT
MORE
THAN
THREE
QUARTERS
OF
THE
FRAGMENTS
WERE
BEING
DISCARDED
FIGURE
THE
LATTICE
SHADER
APPLIED
TO
THE
COW
MODEL
INC
PROCEDURAL
SHADING
SUMMARY
A
MASTER
MAGICIAN
CAN
MAKE
IT
LOOK
LIKE
SOMETHING
IS
CREATED
OUT
OF
THIN
AIR
WITH
PROCEDURAL
TEXTURES
YOU
AS
A
SHADER
WRITER
CAN
EXPRESS
ALGORITHMS
THAT
TURN
FLAT
GRAY
SURFACES
INTO
COLORFUL
PATTERNED
BUMPY
OR
REFLECTIVE
ONES
THE
TRICK
IS
TO
COME
UP
WITH
AN
ALGORITHM
THAT
EXPRESSES
THE
TEXTURE
YOU
ENVISION
BY
CODING
THIS
ALGORITHM
INTO
A
SHADER
YOU
TOO
CAN
CREATE
SOMETHING
OUT
OF
THIN
AIR
IN
THIS
SECTION
WE
ONLY
SCRATCHED
THE
SURFACE
OF
WHAT
POSSIBLE
WE
CREATED
A
STRIPE
SHADER
BUT
GRIDS
AND
CHECKERBOARDS
AND
POLKA
DOTS
ARE
NO
MORE
DIFFICULT
WE
CREATED
A
TOY
BALL
WITH
A
STAR
BUT
WE
COULD
HAVE
CREATED
A
BEACH
BALL
WITH
SNOWFLAKES
SHADERS
CAN
BE
WRITTEN
TO
PROCEDURALLY
INCLUDE
CHAPTER
PROCEDURAL
TEXTURING
OR
EXCLUDE
GEOMETRY
OR
TO
ADD
BUMPS
OR
GROOVES
ADDITIONAL
PROCEDURAL
TEXTURING
EFFECTS
ARE
ILLUSTRATED
IN
THIS
REST
OF
THIS
CHAPTER
IN
PARTICULAR
NOISE
SHOWS
HOW
AN
IRREGULAR
FUNCTION
NOISE
CAN
ACHIEVE
A
WIDE
RANGE
OF
PROCEDURAL
TEXTURING
EFFECTS
PROCEDURAL
TEXTURES
ARE
MATHEMATICALLY
PRECISE
ARE
EASY
TO
PARAMETERIZE
AND
DON
T
REQUIRE
LARGE
AMOUNTS
OF
TEXTURE
MEMORY
BANDWIDTH
OR
FILTERING
THE
END
GOAL
OF
A
FRAGMENT
SHADER
IS
TO
PRODUCE
A
COLOR
VALUE
AND
POSSIBLY
A
DEPTH
VALUE
THAT
WILL
BE
WRITTEN
INTO
THE
FRAMEBUFFER
BECAUSE
THE
OPENGL
SHADING
LANGUAGE
IS
A
PROCEDURAL
PROGRAMMING
LANGUAGE
THE
ONLY
LIMIT
TO
THIS
COMPUTATION
IS
YOUR
IMAGINATION
BUMP
MAPPING
WE
HAVE
ALREADY
SEEN
PROCEDURAL
SHADER
EXAMPLES
THAT
MODIFIED
COLOR
BRICK
AND
STRIPES
AND
OPACITY
LATTICE
ANOTHER
CLASS
OF
INTERESTING
EFFECTS
CAN
BE
APPLIED
TO
A
SURFACE
WITH
A
TECHNIQUE
CALLED
BUMP
MAPPING
BUMP
MAPPING
INVOLVES
MODULATING
THE
SURFACE
NORMAL
BEFORE
LIGHTING
IS
APPLIED
WE
CAN
PERFORM
THE
MODULATION
ALGORITHMICALLY
TO
APPLY
A
REGULAR
PATTERN
WE
CAN
ADD
NOISE
TO
THE
COMPONENTS
OF
A
NORMAL
OR
WE
CAN
LOOK
UP
A
PERTURBATION
VALUE
IN
A
TEXTURE
MAP
BUMP
MAPPING
HAS
PROVED
TO
BE
AN
EFFECTIVE
WAY
OF
INCREASING
THE
APPARENT
REALISM
OF
AN
OBJECT
WITHOUT
INCREASING
THE
GEOMETRIC
COMPLEXITY
IT
CAN
BE
USED
TO
SIMULATE
SURFACE
DETAIL
OR
SURFACE
IRREGULARITIES
THE
TECHNIQUE
DOES
NOT
TRULY
ALTER
THE
SHAPE
OF
THE
SURFACE
BEING
SHADED
IT
MERELY
TRICKS
THE
LIGHTING
CALCULATIONS
THEREFORE
THE
BUMPING
DOES
NOT
SHOW
UP
ON
THE
SILHOUETTE
EDGES
OF
AN
OBJECT
IMAGINE
MODELING
A
PLANET
AS
A
SPHERE
AND
SHADING
IT
WITH
A
BUMP
MAP
SO
THAT
IT
APPEARS
TO
HAVE
MOUNTAINS
THAT
ARE
QUITE
LARGE
RELATIVE
TO
THE
DIAMETER
OF
THE
PLANET
BECAUSE
NOTHING
HAS
BEEN
DONE
TO
CHANGE
THE
UNDERLYING
GEOMETRY
WHICH
IS
PERFECTLY
ROUND
THE
SILHOUETTE
OF
THE
SPHERE
ALWAYS
APPEARS
PERFECTLY
ROUND
EVEN
IF
THE
MOUNTAINS
BUMPS
SHOULD
STICK
OUT
OF
THE
SILHOUETTE
EDGE
IN
REAL
LIFE
YOU
WOULD
EXPECT
THE
MOUNTAINS
ON
THE
SILHOUETTE
EDGES
TO
PREVENT
THE
SILHOUETTE
FROM
LOOKING
PERFECTLY
ROUND
ALSO
BUMP
TO
BUMP
INTERACTIONS
OF
LIGHTING
AND
OCCLUSION
AREN
T
NECESSARILY
CORRECT
FOR
THESE
REASONS
IT
IS
A
GOOD
IDEA
TO
USE
BUMP
MAPPING
TO
APPLY
ONLY
SMALL
EFFECTS
TO
A
SURFACE
AT
LEAST
RELATIVE
TO
THE
SIZE
OF
THE
SURFACE
OR
TO
SURFACES
THAT
WON
T
BE
VIEWED
NEAR
EDGE
ON
WRINKLES
ON
AN
ORANGE
EMBOSSED
LOGOS
AND
PITTED
BRICKS
ARE
ALL
GOOD
EXAMPLES
OF
THINGS
THAT
CAN
BE
SUCCESSFULLY
BUMP
MAPPED
BUMP
MAPPING
ADDS
APPARENT
GEOMETRIC
COMPLEXITY
DURING
FRAGMENT
PROCESSING
SO
ONCE
AGAIN
THE
KEY
TO
THE
PROCESS
IS
OUR
FRAGMENT
SHADER
THIS
IMPLIES
THAT
THE
LIGHTING
OPERATION
MUST
BE
PERFORMED
BY
OUR
BUMP
MAPPING
FRAGMENT
SHADER
INSTEAD
OF
BY
THE
VERTEX
SHADER
WHERE
IT
IS
OFTEN
HANDLED
AGAIN
THIS
POINTS
OUT
ONE
OF
THE
ADVANTAGES
OF
THE
PROGRAMMABILITY
THAT
IS
AVAILABLE
THROUGH
THE
OPENGL
SHADING
LANGUAGE
WE
ARE
FREE
TO
PERFORM
WHATEVER
OPERATIONS
ARE
NECESSARY
IN
EITHER
THE
VERTEX
SHADER
OR
THE
FRAGMENT
SHADER
WE
DON
T
NEED
TO
BE
BOUND
TO
THE
FIXED
FUNCTIONALITY
IDEAS
OF
WHERE
THINGS
LIKE
LIGHTING
ARE
PERFORMED
THE
KEY
TO
BUMP
MAPPING
IS
THAT
WE
NEED
A
VALID
SURFACE
NORMAL
AT
EACH
FRAGMENT
LOCATION
AND
WE
ALSO
NEED
A
LIGHT
SOURCE
VECTOR
AND
A
VIEWING
DIRECTION
VECTOR
IF
WE
HAVE
ACCESS
TO
ALL
THESE
VALUES
IN
THE
FRAGMENT
SHADER
WE
CAN
PROCEDURALLY
PERTURB
THE
NORMAL
PRIOR
TO
THE
LIGHT
SOURCE
CALCULATION
TO
PRODUCE
THE
APPEARANCE
OF
BUMPS
IN
THIS
CASE
WE
REALLY
ARE
ATTEMPTING
TO
PRODUCE
BUMPS
OR
SMALL
SPHERICAL
NODULES
ON
THE
SURFACE
BEING
RENDERED
THE
LIGHT
SOURCE
COMPUTATION
IS
TYPICALLY
PERFORMED
WITH
DOT
PRODUCTS
FOR
THE
RESULT
TO
HAVE
MEANING
ALL
THE
COMPONENTS
OF
THE
LIGHT
SOURCE
CALCULATION
MUST
BE
DEFINED
IN
THE
SAME
COORDINATE
SPACE
SO
IF
WE
USED
THE
VERTEX
SHADER
TO
PERFORM
LIGHTING
WE
WOULD
TYPICALLY
DEFINE
LIGHT
SOURCE
POSITIONS
OR
DIRECTIONS
IN
EYE
COORDINATES
AND
WOULD
TRANSFORM
INCOMING
NORMALS
AND
VERTEX
VALUES
INTO
THIS
SPACE
TO
DO
THE
CALCULATION
HOWEVER
THE
EYE
COORDINATE
SYSTEM
ISN
T
NECESSARILY
THE
BEST
CHOICE
FOR
DOING
LIGHTING
IN
THE
FRAGMENT
SHADER
WE
COULD
NORMALIZE
THE
DIRECTION
TO
THE
LIGHT
AND
THE
SURFACE
NORMAL
AFTER
TRANSFORMING
THEM
TO
EYE
SPACE
AND
THEN
PASS
THEM
TO
THE
FRAGMENT
SHADER
AS
OUT
VARIABLES
HOWEVER
THE
LIGHT
DIRECTION
VECTOR
WOULD
NEED
TO
BE
RENORMALIZED
AFTER
INTERPOLATION
TO
GET
ACCURATE
RESULTS
MOREOVER
WHATEVER
METHOD
WE
USE
TO
COMPUTE
THE
PERTURBATION
NORMAL
IT
WOULD
NEED
TO
BE
TRANSFORMED
INTO
EYE
SPACE
AND
ADDED
TO
THE
SURFACE
NORMAL
THAT
VECTOR
WOULD
ALSO
NEED
TO
BE
NORMALIZED
WITHOUT
RENORMALIZATION
THE
LIGHTING
ARTIFACTS
WOULD
BE
QUITE
NOTICEABLE
PERFORMING
THESE
OPERATIONS
AT
EVERY
FRAGMENT
MIGHT
BE
REASONABLY
COSTLY
IN
TERMS
OF
PERFORMANCE
THERE
IS
A
BETTER
WAY
LET
US
LOOK
AT
ANOTHER
COORDINATE
SPACE
CALLED
THE
SURFACE
LOCAL
COORDINATE
SPACE
THIS
COORDINATE
SYSTEM
ADAPTS
OVER
A
RENDERED
OBJECT
SURFACE
ASSUMING
THAT
EACH
POINT
IS
AT
AND
THAT
THE
UNPERTURBED
SURFACE
NORMAL
AT
EACH
POINT
IS
THIS
IS
A
HIGHLY
CONVENIENT
COORDINATE
SYSTEM
IN
WHICH
TO
DO
OUR
BUMP
MAPPING
CALCULATIONS
BUT
TO
DO
OUR
LIGHTING
COMPUTATION
WE
NEED
TO
MAKE
SURE
THAT
OUR
LIGHT
DIRECTION
VIEWING
DIRECTION
AND
THE
COMPUTED
PERTURBED
NORMAL
ARE
ALL
DEFINED
IN
THE
SAME
COORDINATE
SYSTEM
IF
OUR
PERTURBED
NORMAL
IS
DEFINED
IN
SURFACE
LOCAL
COORDINATES
THAT
MEANS
WE
NEED
TO
TRANSFORM
OUR
LIGHT
DIRECTION
AND
VIEWING
DIRECTION
INTO
SURFACE
LOCAL
SPACE
AS
WELL
HOW
IS
THAT
ACCOMPLISHED
CHAPTER
PROCEDURAL
TEXTURING
WHAT
WE
NEED
IS
A
TRANSFORMATION
MATRIX
THAT
TRANSFORMS
EACH
INCOMING
VERTEX
INTO
SURFACE
LOCAL
COORDINATES
I
E
INCOMING
VERTEX
X
Y
Z
IS
TRANSFORMED
TO
WE
NEED
TO
CONSTRUCT
THIS
TRANSFORMATION
MATRIX
AT
EACH
VERTEX
THEN
AT
EACH
VERTEX
WE
USE
THE
SURFACE
LOCAL
TRANSFORMATION
MATRIX
TO
TRANSFORM
BOTH
THE
LIGHT
DIRECTION
AND
THE
VIEWING
DIRECTION
IN
THIS
WAY
THE
SURFACE
LOCAL
COORDINATES
OF
THE
LIGHT
DIRECTION
AND
THE
VIEWING
DIRECTION
ARE
COMPUTED
AT
EACH
VERTEX
AND
INTERPOLATED
ACROSS
THE
PRIMITIVE
AT
EACH
FRAGMENT
WE
CAN
USE
THESE
VALUES
TO
PERFORM
OUR
LIGHTING
CALCULATION
WITH
THE
PERTURBED
NORMAL
THAT
WE
CALCULATE
BUT
WE
STILL
HAVEN
T
ANSWERED
THE
REAL
QUESTION
HOW
DO
WE
CREATE
THE
TRANSFORMATION
MATRIX
THAT
TRANSFORMS
FROM
OBJECT
COORDINATES
TO
SURFACE
LOCAL
COORDINATES
AN
INFINITE
NUMBER
OF
TRANSFORMS
WILL
TRANSFORM
A
PARTICULAR
VERTEX
TO
TO
TRANSFORM
INCOMING
VERTEX
VALUES
WE
NEED
A
WAY
THAT
GIVES
CONSISTENT
RESULTS
AS
WE
INTERPOLATE
BETWEEN
THEM
THE
SOLUTION
IS
TO
REQUIRE
THE
APPLICATION
TO
SEND
DOWN
ONE
MORE
ATTRIBUTE
VALUE
FOR
EACH
VERTEX
A
SURFACE
TANGENT
VECTOR
FURTHERMORE
WE
REQUIRE
THE
APPLICATION
TO
SEND
US
TANGENTS
THAT
ARE
CONSISTENTLY
DEFINED
ACROSS
THE
SURFACE
OF
THE
OBJECT
BY
DEFINITION
THIS
TANGENT
VECTOR
IS
IN
THE
PLANE
OF
THE
SURFACE
BEING
RENDERED
AND
PERPENDICULAR
TO
THE
INCOMING
SURFACE
NORMAL
IF
DEFINED
CONSISTENTLY
ACROSS
THE
OBJECT
IT
SERVES
TO
ORIENT
CONSISTENTLY
THE
COORDINATE
SYSTEM
THAT
WE
DERIVE
IF
WE
PERFORM
A
CROSS
PRODUCT
BETWEEN
THE
TANGENT
VECTOR
AND
THE
SURFACE
NORMAL
WE
GET
A
THIRD
VECTOR
THAT
IS
PERPENDICULAR
TO
THE
OTHER
TWO
THIS
THIRD
VECTOR
IS
CALLED
THE
BINORMAL
AND
IT
SOMETHING
THAT
WE
CAN
COMPUTE
IN
OUR
VERTEX
SHADER
TOGETHER
THESE
THREE
VECTORS
FORM
AN
ORTHONORMAL
BASIS
OF
A
NEW
COORDINATE
SYSTEM
WHICH
IS
WHAT
WE
NEED
TO
DEFINE
THE
TRANSFORMATION
FROM
OBJECT
COORDINATES
INTO
SURFACE
LOCAL
COORDINATES
BECAUSE
THIS
PARTICULAR
SURFACE
LOCAL
COORDINATE
SYSTEM
IS
DEFINED
WITH
A
TANGENT
VECTOR
AS
ONE
OF
THE
BASIS
VECTORS
THIS
COORDINATE
SYSTEM
IS
SOMETIMES
REFERRED
TO
AS
TANGENT
SPACES
THE
TRANSFORMATION
FROM
OBJECT
SPACE
TO
SURFACE
LOCAL
SPACE
IS
AS
FOLLOWS
SX
TX
TY
TZ
OX
SY
BX
BY
BZ
OY
WE
TRANSFORM
THE
OBJECT
SPACE
VECTOR
OX
OY
OZ
INTO
SURFACE
LOCAL
SPACE
BY
MULTIPLYING
IT
BY
A
MATRIX
THAT
CONTAINS
THE
TANGENT
VECTOR
TX
TY
TZ
IN
THE
FIRST
ROW
THE
BINORMAL
VECTOR
BX
BY
BZ
IN
THE
SECOND
ROW
AND
THE
SURFACE
NORMAL
NX
NY
NZ
IN
THE
THIRD
ROW
WE
CAN
USE
THIS
PROCESS
TO
TRANSFORM
BOTH
THE
LIGHT
DIRECTION
VECTOR
AND
THE
VIEWING
DIRECTION
VECTOR
INTO
SURFACE
LOCAL
COORDINATES
THE
TRANSFORMED
VECTORS
ARE
INTERPOLATED
BUMP
MAPPING
ACROSS
THE
PRIMITIVE
AND
THE
INTERPOLATED
VECTORS
ARE
USED
IN
THE
FRAG
MENT
SHADER
TO
COMPUTE
THE
REFLECTION
WITH
THE
PROCEDURALLY
PERTURBED
NORMAL
APPLICATION
SETUP
FOR
OUR
PROCEDURAL
BUMP
MAP
SHADER
TO
WORK
PROPERLY
THE
APPLICATION
MUST
SEND
A
VERTEX
POSITION
A
SURFACE
NORMAL
AND
A
TANGENT
VECTOR
IN
THE
PLANE
OF
THE
SURFACE
BEING
RENDERED
THE
APPLICATION
PASSES
THE
TANGENT
VECTOR
AS
A
GENERIC
VERTEX
ATTRIBUTE
AND
BINDS
THE
INDEX
OF
THE
GENERIC
ATTRIBUTE
TO
BE
USED
TO
THE
VERTEX
SHADER
VARIABLE
TANGENT
BY
CALLING
GLBINDATTRIBLOCATION
THE
APPLICATION
IS
ALSO
RESPONSIBLE
FOR
PROVIDING
VALUES
FOR
THE
UNIFORM
VARIABLES
LIGHTPOSITION
SURFACECOLOR
BUMPDENSITY
BUMPSIZE
AND
SPECULARFACTOR
YOU
MUST
BE
CAREFUL
TO
ORIENT
THE
TANGENT
VECTORS
CONSISTENTLY
BETWEEN
VERTICES
OTHERWISE
THE
TRANSFORMATION
INTO
SURFACE
LOCAL
COORDINATES
WILL
BE
INCONSISTENT
AND
THE
LIGHTING
COMPUTATION
WILL
YIELD
UNPREDICTABLE
RESULTS
TO
BE
CONSISTENT
VERTICES
NEAR
EACH
OTHER
NEED
TO
HAVE
TANGENT
VECTORS
THAT
POINT
IN
NEARLY
THE
SAME
DIRECTION
FLAT
SURFACES
WOULD
HAVE
THE
SAME
TANGENT
DIRECTION
EVERYWHERE
CONSISTENT
TANGENTS
CAN
BE
COMPUTED
ALGORITHMICALLY
FOR
MATHEMATICALLY
DEFINED
SURFACES
CONSISTENT
TANGENTS
FOR
POLYGONAL
OBJECTS
CAN
BE
COMPUTED
WITH
NEIGHBORING
VERTICES
AND
BY
APPLICATION
OF
A
CONSISTENT
ORIENTATION
WITH
RESPECT
TO
THE
OBJECT
TEXTURE
COORDINATE
SYSTEM
THE
PROBLEM
WITH
INCONSISTENTLY
DEFINED
NORMALS
IS
ILLUSTRATED
IN
FIGURE
THIS
DIAGRAM
SHOWS
TWO
TRIANGLES
ONE
WITH
CONSISTENTLY
DEFINED
TANGENTS
AND
ONE
WITH
INCONSISTENTLY
DEFINED
TANGENTS
THE
GRAY
ARROWHEADS
INDICATE
THE
TANGENT
AND
BINORMAL
VECTORS
THE
SURFACE
NORMAL
IS
POINTING
STRAIGHT
OUT
OF
THE
PAGE
THE
WHITE
ARROWHEADS
INDICATE
THE
DIRECTION
TOWARD
THE
LIGHT
SOURCE
IN
THIS
CASE
A
DIRECTIONAL
LIGHT
SOURCE
IS
ILLUSTRATED
WHEN
WE
TRANSFORM
VERTEX
TO
SURFACE
LOCAL
COORDINATES
WE
GET
THE
SAME
INITIAL
RESULT
IN
BOTH
CASES
WHEN
WE
TRANSFORM
VERTEX
WE
GET
A
LARGE
DIFFERENCE
BECAUSE
THE
TANGENT
VECTORS
ARE
VERY
DIFFERENT
BETWEEN
THE
TWO
VERTICES
IF
TANGENTS
WERE
DEFINED
CONSISTENTLY
THIS
SITUATION
WOULD
NOT
OCCUR
UNLESS
THE
SURFACE
HAD
A
HIGH
DEGREE
OF
CURVATURE
ACROSS
THIS
POLYGON
AND
IF
THAT
WERE
THE
CASE
WE
WOULD
REALLY
WANT
TO
TESSELLATE
THE
GEOMETRY
FURTHER
TO
PREVENT
THIS
FROM
HAPPENING
THE
RESULT
IS
THAT
IN
CASE
OUR
LIGHT
DIRECTION
VECTOR
IS
SMOOTHLY
INTERPOLATED
FROM
THE
FIRST
VERTEX
TO
THE
SECOND
AND
ALL
THE
INTERPOLATED
CHAPTER
PROCEDURAL
TEXTURING
CASE
CONSISTENT
TANGENTS
CASE
INCONSISTENT
TANGENTS
Y
T
X
Y
T
X
CASE
SURFACE
LOCAL
SPACE
FOR
VERTEX
CASE
SURFACE
LOCAL
SPACE
FOR
VERTEX
Y
L
B
B
Y
T
X
X
L
CASE
SURFACE
LOCAL
SPACE
FOR
VERTEX
CASE
SURFACE
LOCAL
SPACE
FOR
VERTEX
CASE
SMALL
INTERPOLATION
BETWEEN
LIGHT
VECTORS
CASE
LARGE
INTERPOLATION
BETWEEN
LIGHT
VECTORS
FIGURE
INCONSISTENTLY
DEFINED
TANGENTS
LEADING
TO
LARGE
LIGHTING
ERRORS
VECTORS
ARE
ROUGHLY
THE
SAME
LENGTH
IF
WE
NORMALIZE
THIS
LIGHT
VECTOR
AT
EACH
VERTEX
THE
INTERPOLATED
VECTORS
ARE
VERY
CLOSE
TO
UNIT
LENGTH
AS
WELL
BUT
IN
CASE
THE
INTERPOLATION
CAUSES
VECTORS
OF
WILDLY
DIFFERENT
LENGTHS
TO
BE
GENERATED
SOME
OF
THEM
NEAR
ZERO
THIS
CAUSES
SEVERE
ARTIFACTS
IN
THE
LIGHTING
CALCULATION
BUMP
MAPPING
REMEMBER
OPENGL
DOES
NOT
NEED
TO
SEND
DOWN
A
BINORMAL
VERTEX
ATTRIBUTE
ONLY
A
NORMAL
VECTOR
AND
A
TANGENT
VECTOR
SO
WE
DON
T
COMPUTE
THE
BINORMAL
IN
THE
APPLICATION
RATHER
WE
HAVE
THE
VERTEX
SHADER
COMPUTE
IT
AUTOMATICALLY
SIMPLE
COMPUTATION
IS
TYPICALLY
FASTER
THAN
MEMORY
ACCESS
OR
TRANSFER
VERTEX
SHADER
THE
VERTEX
SHADER
FOR
OUR
PROCEDURAL
BUMP
MAP
SHADER
IS
SHOWN
IN
EXAMPLE
THIS
SHADER
IS
RESPONSIBLE
FOR
COMPUTING
THE
SURFACE
LOCAL
DIRECTION
TO
THE
LIGHT
AND
THE
SURFACE
LOCAL
DIRECTION
TO
THE
EYE
TO
DO
THIS
IT
ACCEPTS
THE
INCOMING
VERTEX
POSITION
SURFACE
NORMAL
AND
TANGENT
VECTOR
COMPUTES
THE
BINORMAL
AND
TRANSFORMS
THE
EYE
SPACE
LIGHT
DIRECTION
AND
VIEWING
DIRECTION
USING
THE
CREATED
SURFACE
LOCAL
TRANSFORMATION
MATRIX
THE
TEXTURE
COORDINATES
ARE
ALSO
PASSED
ON
TO
THE
FRAGMENT
SHADER
BECAUSE
THEY
ARE
USED
TO
DETERMINE
THE
POSITION
OF
OUR
PROCEDURAL
BUMPS
EXAMPLE
VERTEX
SHADER
FOR
DOING
PROCEDURAL
BUMP
MAPPING
VERSION
CORE
UNIFORM
LIGHTPOSITION
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
IN
MCVERTEX
IN
MCNORMAL
IN
MCTANGENT
IN
OUT
LIGHTDIR
OUT
EYEDIR
OUT
TEXCOORD
VOID
MAIN
EYEDIR
MVMATRIX
MCVERTEX
TEXCOORD
ST
N
NORMALIZE
NORMALMATRIX
MCNORMAL
T
NORMALIZE
NORMALMATRIX
MCTANGENT
B
CROSS
N
T
V
V
X
DOT
LIGHTPOSITION
T
V
Y
DOT
LIGHTPOSITION
B
V
Z
DOT
LIGHTPOSITION
N
LIGHTDIR
NORMALIZE
V
V
X
DOT
EYEDIR
T
CHAPTER
PROCEDURAL
TEXTURING
V
Y
DOT
EYEDIR
B
V
Z
DOT
EYEDIR
N
EYEDIR
NORMALIZE
V
MVPMATRIX
MCVERTEX
FRAGMENT
SHADER
THE
FRAGMENT
SHADER
FOR
DOING
PROCEDURAL
BUMP
MAPPING
IS
SHOWN
IN
EXAMPLE
A
COUPLE
OF
THE
CHARACTERISTICS
OF
THE
BUMP
PATTERN
ARE
PARAMETERIZED
BY
BEING
DECLARED
AS
UNIFORM
VARIABLES
NAMELY
BUMPDENSITY
HOW
MANY
BUMPS
PER
UNIT
AREA
AND
BUMPSIZE
HOW
WIDE
EACH
BUMP
WILL
BE
TWO
OF
THE
GENERAL
CHARACTERISTICS
OF
THE
OVERALL
SURFACE
ARE
ALSO
DEFINED
AS
UNIFORM
VARIABLES
SURFACECOLOR
BASE
COLOR
OF
THE
SURFACE
AND
SPECULARFACTOR
SPECULAR
REFLECTANCE
PROPERTY
THE
BUMPS
THAT
WE
COMPUTE
ARE
ROUND
BECAUSE
THE
TEXTURE
COORDINATE
IS
USED
TO
DETERMINE
THE
POSITIONING
OF
THE
BUMPS
THE
FIRST
THING
WE
DO
IS
MULTIPLY
THE
INCOMING
TEXTURE
COORDINATE
BY
THE
DENSITY
VALUE
THIS
CONTROLS
WHETHER
WE
SEE
MORE
OR
FEWER
BUMPS
ON
THE
SURFACE
USING
THE
RESULTING
GRID
WE
COMPUTE
A
BUMP
LOCATED
IN
THE
CENTER
OF
EACH
GRID
SQUARE
THE
COMPONENTS
OF
THE
PERTURBATION
VECTOR
P
ARE
COMPUTED
AS
THE
DISTANCE
FROM
THE
CENTER
OF
THE
BUMP
IN
THE
X
DIRECTION
AND
THE
DISTANCE
FROM
THE
CENTER
OF
THE
BUMP
IN
THE
Y
DIRECTION
WE
ONLY
PERTURB
THE
NORMAL
IN
THE
X
AND
Y
DIRECTIONS
THE
Z
VALUE
FOR
OUR
PERTURBATION
NORMAL
IS
ALWAYS
WE
COMPUTE
A
PSEUDODISTANCE
D
BY
SQUARING
THE
COMPONENTS
OF
P
AND
SUMMING
THEM
THE
REAL
DISTANCE
COULD
BE
COMPUTED
AT
THE
COST
OF
DOING
ANOTHER
SQUARE
ROOT
BUT
IT
NOT
REALLY
NECESSARY
IF
WE
CONSIDER
BUMPSIZE
TO
BE
A
RELATIVE
VALUE
RATHER
THAN
AN
ABSOLUTE
VALUE
TO
PERFORM
A
PROPER
REFLECTION
CALCULATION
LATER
ON
WE
REALLY
NEED
TO
NORMALIZE
THE
PERTURBATION
NORMAL
THIS
NORMAL
MUST
BE
A
UNIT
VECTOR
SO
THAT
WE
CAN
PERFORM
DOT
PRODUCTS
AND
GET
ACCURATE
COSINE
VALUES
FOR
USE
IN
THE
LIGHTING
COMPUTATION
WE
GENERALLY
NORMALIZE
A
VECTOR
BY
MULTIPLYING
EACH
COMPONENT
OF
THE
NORMAL
BY
BECAUSE
OF
OUR
COMPUTATION
FOR
D
WE
VE
ALREADY
COMPUTED
PART
OF
WHAT
WE
NEED
I
E
FURTHERMORE
BECAUSE
WE
RE
NOT
PERTURBING
Z
AT
ALL
WE
KNOW
THAT
WILL
ALWAYS
BE
TO
MINIMIZE
THE
COMPUTATION
WE
JUST
FINISH
COMPUTING
OUR
NORMALIZATION
FACTOR
AT
THIS
POINT
IN
THE
SHADER
BY
COMPUTING
D
BUMP
MAPPING
NEXT
WE
COMPARE
D
TO
BUMPSIZE
TO
SEE
IF
WE
RE
IN
A
BUMP
OR
NOT
IF
WE
RE
NOT
WE
SET
OUR
PERTURBATION
VECTOR
TO
AND
OUR
NORMALIZATION
FACTOR
TO
THE
LIGHTING
COMPUTATION
HAPPENS
IN
THE
NEXT
FEW
LINES
WE
COMPUTE
OUR
NORMALIZED
PERTURBATION
VECTOR
BY
MULTIPLYING
THROUGH
WITH
THE
NORMALIZATION
FACTOR
F
THE
DIFFUSE
AND
SPECULAR
REFLECTION
VALUES
ARE
COMPUTED
IN
THE
USUAL
WAY
EXCEPT
THAT
THE
INTERPOLATED
SURFACE
LOCAL
COORDINATE
LIGHT
AND
VIEW
DIRECTION
VECTORS
ARE
USED
WE
GET
DECENT
RESULTS
WITHOUT
NORMALIZING
THESE
TWO
VECTORS
AS
LONG
AS
WE
DON
T
HAVE
LARGE
DIFFERENCES
IN
THEIR
INTERPOLATED
VALUES
BETWEEN
VERTICES
EXAMPLE
FRAGMENT
SHADER
FOR
PROCEDURAL
BUMP
MAPPING
VERSION
CORE
UNIFORM
SURFACECOLOR
UNIFORM
FLOAT
BUMPDENSITY
UNIFORM
FLOAT
BUMPSIZE
UNIFORM
FLOAT
SPECULARFACTOR
IN
LIGHTDIR
IN
EYEDIR
IN
TEXCOORD
OUT
FRAGCOLOR
VOID
MAIN
LITCOLOR
C
BUMPDENSITY
TEXCOORD
ST
P
FRACT
C
FLOAT
D
F
D
DOT
P
P
F
INVERSESQRT
D
IF
D
BUMPSIZE
P
F
NORMDELTA
P
X
P
Y
F
LITCOLOR
SURFACECOLOR
RGB
MAX
DOT
NORMDELTA
LIGHTDIR
REFLECTDIR
REFLECT
LIGHTDIR
NORMDELTA
FLOAT
SPEC
MAX
DOT
EYEDIR
REFLECTDIR
SPEC
POW
SPEC
SPEC
SPECULARFACTOR
LITCOLOR
MIN
LITCOLOR
SPEC
FRAGCOLOR
LITCOLOR
SURFACECOLOR
A
CHAPTER
PROCEDURAL
TEXTURING
THE
RESULTS
FROM
THE
PROCEDURAL
BUMP
MAP
SHADER
ARE
SHOWN
APPLIED
TO
TWO
OBJECTS
A
SIMPLE
BOX
AND
A
TORUS
IN
FIGURE
THE
TEXTURE
COORDINATES
ARE
USED
AS
THE
BASIS
FOR
POSITIONING
THE
BUMPS
AND
BECAUSE
THE
TEXTURE
COORDINATES
GO
FROM
TO
FOUR
TIMES
AROUND
THE
DIAMETER
OF
THE
TORUS
THE
BUMPS
LOOK
MUCH
CLOSER
TOGETHER
ON
THAT
OBJECT
FIGURE
SIMPLE
BOX
AND
TORUS
WITH
PROCEDURAL
BUMP
MAPPING
INC
NORMAL
MAPS
IT
IS
EASY
TO
MODIFY
OUR
SHADER
SO
THAT
IT
OBTAINS
THE
NORMAL
PERTURBATION
VALUES
FROM
A
TEXTURE
RATHER
THAN
GENERATING
THEM
PROCEDURALLY
A
TEXTURE
THAT
CONTAINS
NORMAL
PERTURBATION
VALUES
FOR
THE
PURPOSE
OF
BUMP
MAPPING
IS
CALLED
A
BUMP
MAP
OR
A
NORMAL
MAP
AN
EXAMPLE
OF
A
NORMAL
MAP
AND
THE
RESULTS
APPLIED
TO
OUR
SIMPLE
BOX
OBJECT
ARE
SHOWN
IN
FIGURE
INDIVIDUAL
COMPONENTS
FOR
THE
NORMALS
CAN
BE
IN
THE
RANGE
TO
BE
ENCODED
INTO
AN
RGB
TEXTURE
WITH
BITS
PER
COMPONENT
THEY
MUST
BE
MAPPED
INTO
THE
RANGE
THE
NORMAL
MAP
APPEARS
CHALK
BLUE
BECAUSE
THE
DEFAULT
PERTURBATION
VECTOR
OF
IS
ENCODED
IN
THE
NORMAL
MAP
AS
THE
NORMAL
MAP
COULD
BE
STORED
IN
A
FLOATING
POINT
TEXTURE
TODAY
GRAPHICS
HARDWARE
SUPPORTS
TEXTURES
BOTH
WITH
BIT
FLOATING
POINT
VALUES
PER
COLOR
COMPONENT
AND
BIT
FLOATING
POINT
VALUES
PER
COLOR
COMPONENT
IF
YOU
USE
A
FLOATING
POINT
TEXTURE
FORMAT
FOR
STORING
NORMALS
YOUR
IMAGE
QUALITY
TENDS
TO
INCREASE
FOR
INSTANCE
REDUCING
BANDING
EFFECTS
IN
SPECULAR
HIGHLIGHTS
OF
COURSE
TEXTURES
THAT
ARE
BITS
PER
COMPONENT
REQUIRE
TWICE
AS
MUCH
BUMP
MAPPING
TEXTURE
MEMORY
AS
BIT
PER
COMPONENT
TEXTURES
AND
PERFORMANCE
MIGHT
BE
REDUCED
FIGURE
NORMAL
MAPPING
A
NORMAL
MAP
LEFT
AND
THE
RENDERED
RESULT
ON
A
SIMPLE
BOX
AND
A
SPHERE
INC
THE
VERTEX
PROGRAM
IS
IDENTICAL
TO
THE
ONE
DESCRIBED
IN
BUMP
MAPPING
THE
FRAGMENT
SHADER
IS
ALMOST
THE
SAME
EXCEPT
THAT
INSTEAD
OF
COMPUTING
THE
PERTURBED
NORMAL
PROCEDURALLY
THE
FRAGMENT
SHADER
OBTAINS
IT
FROM
A
NORMAL
MAP
STORED
IN
TEXTURE
MEMORY
ANTIALIASING
PROCEDURAL
TEXTURES
JAGGIES
POPPING
SPARKLING
STAIR
STEPS
STROBING
AND
MARCHING
ANTS
THEY
RE
ALL
NAMES
USED
TO
DESCRIBE
THE
ANATHEMA
OF
COMPUTER
GRAPHICS
ALIASING
ANYONE
WHO
HAS
USED
A
COMPUTER
HAS
SEEN
IT
FOR
STILL
IMAGES
IT
NOT
ALWAYS
THAT
NOTICEABLE
OR
OBJECTIONABLE
BUT
AS
SOON
AS
YOU
PUT
AN
OBJECT
IN
MOTION
THE
MOVEMENT
OF
THE
JAGGED
EDGES
CATCHES
YOUR
EYE
AND
DISTRACTS
YOU
FROM
THE
EARLY
DAYS
OF
COMPUTER
GRAPHICS
THE
FIGHT
TO
ELIMINATE
THESE
NASTY
ARTIFACTS
HAS
BEEN
CALLED
ANTIALIASING
THIS
SECTION
INTRODUCES
THE
MAIN
REASONS
ALIASING
OCCURS
TECHNIQUES
TO
AVOID
IT
AND
THE
FACILITIES
WITHIN
THE
OPENGL
SHADING
LANGUAGE
TO
HELP
WITH
ANTIALIASING
ARMED
WITH
THIS
KNOWLEDGE
YOU
SHOULD
BE
WELL
ON
YOUR
WAY
TO
FIGHTING
THE
JAGGIES
IN
YOUR
OWN
SHADERS
SOURCES
OF
ALIASING
ALIASING
CAN
BE
GENERALLY
EXPLAINED
BY
SAMPLING
THEORY
WHILE
SPECIFIC
FORMS
OF
ALIASING
CAN
BE
EXPLAINED
MORE
CONCRETELY
BY
SPECIFIC
SITUATIONS
WE
WILL
TIE
TOGETHER
BOTH
APPROACHES
AND
THIS
WILL
BECOME
CLEARER
AS
THE
FORMS
ARE
DISCUSSED
MOST
GENERALLY
FROM
A
SAMPLING
THEORY
PERSPECTIVE
A
GRAPHICS
IMAGE
IS
MADE
FROM
POINT
SAMPLES
OF
THE
SCENE
IF
PATTERNS
IN
THE
CHAPTER
PROCEDURAL
TEXTURING
SCENE
VARY
AT
A
HIGH
SPATIAL
FREQUENCY
WITH
RESPECT
TO
THE
SAMPLES
THE
SAMPLES
CAN
T
ACCURATELY
REPRODUCE
THE
SCENE
THEY
ARE
HIT
AND
MISS
ON
INTERESTING
FEATURES
A
PERIODIC
PATTERN
NEEDS
TO
BE
SAMPLED
AT
AT
LEAST
TWICE
THE
FREQUENCY
OF
THE
PATTERN
ITSELF
OTHERWISE
THE
IMAGE
WILL
BREAK
DOWN
WHEN
IT
HAS
A
PATTERN
CHANGING
FASTER
THAN
EVERY
TWO
SAMPLES
CAUSING
MOIRÉ
PATTERNS
IN
A
STATIC
IMAGE
AND
SPARKLING
IN
A
MOVING
IMAGE
THE
EDGE
OF
AN
OBJECT
IS
AN
INTERESTING
CASE
AS
IT
FORMS
A
STEP
FUNCTION
AS
IT
IS
CROSSED
THIS
IS
EFFECTIVELY
A
SQUARE
WAVE
WHICH
INCLUDES
SUPER
HIGH
FREQUENCIES
IT
AN
INFINITE
SUM
OF
EVER
INCREASING
FREQUENCIES
SO
IT
IS
IMPOSSIBLE
TO
CORRECTLY
SAMPLE
AN
EDGE
WITH
POINT
SAMPLES
WITHOUT
UNDERSAMPLING
THIS
IS
DISCUSSED
FURTHER
AS
WE
GO
AND
SHOULD
BECOME
MORE
CLEAR
THE
HUMAN
EYE
IS
EXTREMELY
GOOD
AT
NOTICING
EDGES
THIS
IS
HOW
WE
COMPREHEND
SHAPE
AND
FORM
AND
HOW
WE
RECOGNIZE
LETTERS
AND
WORDS
OUR
EYE
IS
NATURALLY
GOOD
AT
IT
AND
WE
SPEND
OUR
WHOLE
LIVES
PRACTICING
IT
SO
NATURALLY
IT
IS
SOMETHING
WE
DO
VERY
VERY
WELL
A
COMPUTER
DISPLAY
IS
LIMITED
IN
ITS
CAPABILITY
TO
PRESENT
AN
IMAGE
THE
DISPLAY
IS
MADE
UP
OF
A
FINITE
NUMBER
OF
DISCRETE
ELEMENTS
PIXELS
AT
A
GIVEN
TIME
EACH
PIXEL
CAN
PRODUCE
ONLY
ONE
COLOR
THIS
MAKES
IT
IMPOSSIBLE
FOR
A
COMPUTER
DISPLAY
TO
ACCURATELY
REPRESENT
DETAIL
THAT
IS
SMALLER
THAN
ONE
PIXEL
IN
SCREEN
SPACE
SUCH
AS
AN
EDGE
ESPECIALLY
WHEN
EACH
PIXEL
IS
ONLY
REPRESENTING
A
POINT
SAMPLE
FOR
THE
PIXEL
CENTER
WHEN
YOU
COMBINE
THESE
TWO
THINGS
THE
HUMAN
EYE
ABILITY
TO
DISCERN
EDGES
AND
THE
COMPUTER
GRAPHICS
DISPLAY
LIMITATIONS
IN
REPLICATING
THEM
YOU
HAVE
A
PROBLEM
AND
THIS
PROBLEM
IS
KNOWN
AS
ALIASING
IN
A
NUTSHELL
ALIASING
OCCURS
WHEN
WE
TRY
TO
REPRODUCE
A
SIGNAL
WITH
AN
INSUFFICIENT
SAMPLING
FREQUENCY
LESS
THAN
TWO
TIMES
THE
HIGHEST
FREQUENCY
PRESENT
IN
THE
IMAGE
WITH
A
COMPUTER
GRAPHICS
DISPLAY
WE
LL
ALWAYS
HAVE
A
FIXED
NUMBER
OF
SAMPLES
PIXELS
WITH
WHICH
TO
RECONSTRUCT
OUR
IMAGE
AND
THIS
WILL
ALWAYS
BE
INSUFFICIENT
TO
PROVIDE
ADEQUATE
SAMPLING
FOR
EDGES
SO
WE
WILL
ALWAYS
HAVE
ALIASING
UNLESS
WE
USE
THE
PIXELS
TO
REPRESENT
SOMETHING
OTHER
THAN
POINT
SAMPLES
IN
THE
END
WE
CAN
ELIMINATE
ALIASING
BY
REDUCING
THE
SPATIAL
FREQUENCY
IN
THE
IMAGE
TO
HALF
THE
SPATIAL
FREQUENCY
OF
THE
PIXELS
EXCHANGING
ALIASING
FOR
SOME
OTHER
PROBLEM
THAT
IS
LESS
OBJECTIONABLE
LIKE
LOSS
OF
DETAIL
BLURRINESS
OR
NOISE
AND
SOMETIMES
ALSO
LOWERING
THE
RENDER
TIME
PERFORMANCE
THE
PROBLEM
IS
ILLUSTRATED
IN
FIGURE
IN
THIS
DIAGRAM
WE
SHOW
THE
RESULTS
OF
TRYING
TO
DRAW
A
GRAY
OBJECT
THE
INTENDED
SHAPE
IS
SHOWN
IN
FIGURE
A
THE
COMPUTER
GRAPHICS
DISPLAY
LIMITS
US
TO
A
DISCRETE
SAMPLING
GRID
IF
WE
CHOOSE
ONLY
ONE
LOCATION
WITHIN
EACH
GRID
SQUARE
USUALLY
THE
CENTER
AND
DETERMINE
THE
COLOR
TO
BE
USED
BY
SAMPLING
THE
DESIRED
IMAGE
AT
THAT
POINT
WE
SEE
SOME
APPARENT
ARTIFACTS
THIS
IS
CALLED
ANTIALIASING
PROCEDURAL
TEXTURES
POINT
SAMPLING
AND
IS
ILLUSTRATED
IN
FIGURE
B
THE
RESULT
IS
UGLY
ALIASING
ARTIFACTS
FOR
EDGES
THAT
DON
T
LINE
UP
NATURALLY
WITH
THE
SAMPLING
GRID
SEE
FIGURE
C
IT
ACTUALLY
DEPENDS
ON
YOUR
DISPLAY
DEVICE
TECHNOLOGY
WHETHER
PIXELS
ARE
MORE
LIKE
OVERLAPPING
CIRCLES
CRT
OR
COLLECTIONS
OF
SMALLER
RED
GREEN
AND
BLUE
SUB
PIXELS
LCD
BUT
THE
ARTIFACTS
ARE
OBVIOUS
IN
ALL
CASES
FIGURE
ALIASING
ARTIFACTS
CAUSED
BY
POINT
SAMPLING
THE
GRAY
REGION
REPRESENTS
THE
SHAPE
OF
THE
OBJECT
TO
BE
RENDERED
A
THE
COMPUTER
GRAPHICS
DISPLAY
PRESENTS
US
WITH
A
LIMITED
SAMPLING
GRID
B
THE
RESULT
OF
CHOOSING
TO
DRAW
OR
NOT
DRAW
GRAY
AT
EACH
PIXEL
RESULTS
IN
JAGGIES
OR
ALIASING
ARTIFACTS
C
ALIASING
TAKES
ON
OTHER
FORMS
AS
WELL
IF
YOU
ARE
DEVELOPING
A
SEQUENCE
OF
IMAGES
FOR
AN
ANIMATION
AND
YOU
DON
T
PROPERLY
TIME
SAMPLE
OBJECTS
THAT
ARE
IN
MOTION
YOU
MIGHT
NOTICE
TEMPORAL
ALIASINGS
THIS
IS
CAUSED
BY
OBJECTS
THAT
ARE
MOVING
TOO
RAPIDLY
FOR
THE
TIME
SAMPLING
FREQUENCY
BEING
USED
OBJECTS
MAY
APPEAR
TO
STUTTER
AS
THEY
MOVE
OR
BLINK
ON
AND
OFF
THE
CLASSIC
EXAMPLE
OF
TEMPORAL
ALIASING
COMES
FROM
THE
MOVIES
A
VEHICLE
CAR
TRUCK
OR
COVERED
WAGON
IN
MOTION
IS
GOING
FORWARD
BUT
THE
SPOKES
OF
ITS
WHEELS
APPEAR
TO
BE
ROTATING
BACKWARDS
THIS
EFFECT
IS
CAUSED
WHEN
THE
TIME
SAMPLING
RATE
MOVIE
FRAMES
PER
SECOND
IS
TOO
LOW
RELATIVE
TO
THE
MOTION
OF
THE
WHEEL
SPOKES
IN
REALITY
THE
WHEEL
MAY
BE
ROTATING
TWO
AND
THREE
QUARTER
REVOLUTIONS
PER
FRAME
BUT
ON
FILM
IT
LOOKS
LIKE
IT
ROTATING
ONE
QUARTER
REVOLUTION
BACKWARD
EACH
FRAME
TO
RENDER
IMAGES
THAT
LOOK
TRULY
REALISTIC
RATHER
THAN
COMPUTER
GENERATED
WE
NEED
TO
DEVELOP
TECHNIQUES
FOR
OVERCOMING
THE
INHERENT
LIMITATIONS
OF
THE
GRAPHICS
DISPLAY
BOTH
SPATIALLY
AND
TEMPORALLY
AVOIDING
ALIASING
ONE
WAY
TO
ACHIEVE
GOOD
RESULTS
WITHOUT
ALIASING
IS
TO
AVOID
SITUATIONS
IN
WHICH
ALIASING
OCCURS
CHAPTER
PROCEDURAL
TEXTURING
FOR
INSTANCE
IF
YOU
KNOW
THAT
A
PARTICULAR
OBJECT
WILL
ALWAYS
BE
A
CERTAIN
SIZE
IN
THE
FINAL
RENDERED
IMAGE
YOU
CAN
DESIGN
A
SHADER
THAT
LOOKS
GOOD
WHILE
RENDERING
THAT
OBJECT
AT
THAT
SIZE
THIS
IS
THE
ASSUMPTION
BEHIND
SOME
OF
THE
SHADERS
PRESENTED
PREVIOUSLY
IN
THIS
BOOK
THE
SMOOTHSTEP
MIX
AND
CLAMP
FUNCTIONS
ARE
HANDY
FUNCTIONS
TO
USE
TO
AVOID
SHARP
TRANSITIONS
AND
TO
MAKE
A
PROCEDURAL
TEXTURE
LOOK
GOOD
AT
A
PARTICULAR
SCALE
ALIASING
IS
OFTEN
A
PROBLEM
WHEN
YOU
ARE
RENDERING
AN
OBJECT
AT
DIFFERENT
SIZES
MIPMAP
TEXTURES
ADDRESS
THIS
VERY
ISSUE
AND
YOU
CAN
DO
SOMETHING
SIMILAR
WITH
SHADERS
IF
YOU
KNOW
THAT
A
PARTICULAR
OBJECT
MUST
APPEAR
AT
DIFFERENT
SIZES
IN
THE
FINAL
RENDERING
YOU
CAN
DESIGN
A
SHADER
FOR
EACH
DIFFERENT
SIZE
EACH
OF
THESE
SHADERS
WOULD
PROVIDE
AN
APPROPRIATE
LEVEL
OF
DETAIL
AND
AVOID
ALIASING
FOR
AN
OBJECT
OF
THAT
SIZE
FOR
THIS
TO
WORK
THE
APPLICATION
MUST
DETERMINE
THE
APPROXIMATE
SIZE
OF
THE
FINAL
RENDERED
OBJECT
BEFORE
IT
IS
DRAWN
AND
THEN
INSTALL
THE
APPROPRIATE
SHADER
IN
ADDITION
IF
A
CONTINUOUS
ZOOM
IN
OR
OUT
IS
APPLIED
TO
A
SINGLE
OBJECT
SOME
POPPING
WILL
OCCUR
WHEN
THE
LEVEL
OF
DETAIL
CHANGES
YOU
CAN
AVOID
ALIASING
IN
SOME
SITUATIONS
BY
USING
A
TEXTURE
INSTEAD
OF
COMPUTING
SOMETHING
PROCEDURALLY
THIS
LETS
YOU
TAKE
ADVANTAGE
OF
THE
FILTERING
SUPPORT
THAT
IS
BUILT
INTO
THE
TEXTURE
MAPPING
HOWEVER
LINEAR
FILTERING
BETWEEN
ADJACENT
TEXELS
IS
ONLY
A
SOLUTION
TO
ALIASING
WHEN
THE
RESOLUTION
OF
THE
TEXELS
IS
SIMILAR
TO
THE
RESOLUTION
OF
THE
PIXELS
OTHERWISE
YOU
CAN
STILL
END
UP
UNDERSAMPLING
A
TEXTURE
AND
STILL
GET
ALIASING
PROPER
USE
OF
MIPMAPS
WILL
HELP
KEEP
YOU
IN
ANTIALIASING
TERRITORY
OF
COURSE
THERE
ARE
OTHER
ISSUES
WITH
USING
STORED
TEXTURES
AS
OPPOSED
TO
DOING
THINGS
PROCEDURALLY
AS
DISCUSSED
EARLIER
IN
THIS
CHAPTER
INCREASING
RESOLUTION
THE
EFFECTS
OF
ALIASING
CAN
BE
REDUCED
THROUGH
A
BRUTE
FORCE
METHOD
CALLED
SUPERSAMPLING
THAT
PERFORMS
SAMPLING
AT
SEVERAL
LOCATIONS
WITHIN
A
PIXEL
AND
AVERAGES
THE
RESULT
OF
THOSE
SAMPLES
THIS
IS
EXACTLY
THE
APPROACH
SUPPORTED
IN
TODAY
GRAPHICS
HARDWARE
WITH
THE
MULTISAMPLE
BUFFER
THIS
METHOD
OF
ANTIALIASING
REPLACES
A
SINGLE
POINT
SAMPLING
OPERATION
WITH
A
SEVERAL
POINT
SAMPLING
OPERATION
SO
IT
DOESN
T
ACTUALLY
ELIMINATE
ALIASING
BUT
IT
CAN
REDUCE
ALIASING
TO
THE
POINT
THAT
IT
IS
NO
LONGER
OBJECTIONABLE
YOU
MAY
BE
ABLE
TO
IGNORE
THE
ISSUE
OF
ALIASING
IF
YOUR
SHADERS
WILL
ALWAYS
BE
USED
IN
CONJUNCTION
WITH
A
MULTISAMPLE
BUFFER
BUT
THIS
APPROACH
DOES
USE
UP
HARDWARE
RESOURCES
GRAPHICS
BOARD
MEMORY
FOR
STORING
THE
MULTISAMPLE
BUFFER
AND
EVEN
WITH
HARDWARE
ACCELERATION
IT
STILL
MAY
BE
SLOWER
THAN
PERFORMING
THE
ANTIALIASING
AS
PART
OF
THE
PROCEDURAL
TEXTURE
GENERATION
ALGORITHM
AND
BECAUSE
THIS
APPROACH
ANTIALIASING
PROCEDURAL
TEXTURES
DOESN
T
ELIMINATE
ALIASING
YOUR
RESULT
IS
STILL
APT
TO
EXHIBIT
SIGNS
OF
ALIASING
ALBEIT
AT
A
HIGHER
FREQUENCY
LESS
VISIBLY
THAN
BEFORE
SUPERSAMPLING
IS
ILLUSTRATED
IN
FIGURE
EACH
OF
THE
PIXELS
IS
RENDERED
BY
SAMPLING
AT
FOUR
LOCATIONS
RATHER
THAN
AT
ONE
THE
AVERAGE
OF
THE
FOUR
SAMPLES
IS
USED
AS
THE
VALUE
FOR
THE
PIXEL
THIS
AVERAGING
PROVIDES
A
BETTER
RESULT
BUT
IT
IS
NOT
SUFFICIENT
TO
ELIMINATE
ALIASING
BECAUSE
HIGH
FREQUENCY
COMPONENTS
CAN
STILL
BE
MISREPRESENTED
FIGURE
SUPERSAMPLING
SUPERSAMPLING
WITH
FOUR
SAMPLES
PER
PIXEL
YIELDS
A
BETTER
RESULT
BUT
ALIASING
ARTIFACTS
ARE
STILL
PRESENT
THE
SHAPE
OF
THE
OBJECT
TO
BE
RENDERED
IS
SHOWN
IN
A
SAMPLING
OCCURS
AT
FOUR
LOCATIONS
WITHIN
EACH
PIXEL
AS
SHOWN
IN
B
THE
RESULTS
ARE
AVERAGED
TO
PRODUCE
THE
FINAL
PIXEL
VALUE
AS
SHOWN
IN
C
SOME
SAMPLES
THAT
ARE
ALMOST
HALF
COVERED
WERE
SAMPLED
WITH
JUST
ONE
SUPERSAMPLE
POINT
INSTEAD
OF
TWO
AND
ONE
PIXEL
CONTAINS
IMAGE
DATA
THAT
WAS
MISSED
ENTIRELY
EVEN
WITH
SUPERSAMPLING
SUPERSAMPLING
CAN
ALSO
BE
IMPLEMENTED
WITHIN
A
FRAGMENT
SHADER
THE
CODE
THAT
IS
USED
TO
PRODUCE
THE
FRAGMENT
COLOR
CAN
BE
CONSTRUCTED
AS
A
FUNCTION
AND
THIS
FUNCTION
CAN
BE
CALLED
SEVERAL
TIMES
FROM
WITHIN
THE
MAIN
FUNCTION
OF
THE
FRAGMENT
SHADER
TO
SAMPLE
THE
FUNCTION
AT
SEVERAL
DISCRETE
LOCATIONS
THE
RETURNED
VALUES
CAN
BE
AVERAGED
TO
CREATE
THE
FINAL
VALUE
FOR
THE
FRAGMENT
RESULTS
ARE
IMPROVED
IF
THE
SAMPLE
POSITIONS
ARE
VARIED
STOCHASTICALLY
RATHER
THAN
SPACED
ON
A
REGULAR
GRID
SUPERSAMPLING
WITHIN
A
FRAGMENT
SHADER
HAS
THE
OBVIOUS
DOWNSIDE
OF
REQUIRING
N
TIMES
AS
MUCH
PROCESSING
PER
FRAGMENT
WHERE
N
IS
THE
NUMBER
OF
SAMPLES
COMPUTED
AT
EACH
FRAGMENT
THERE
WILL
BE
TIMES
WHEN
ALIASING
IS
UNAVOIDABLE
AND
SUPERSAMPLING
IS
INFEASIBLE
IF
YOU
WANT
TO
PERFORM
PROCEDURAL
TEXTURING
AND
YOU
WANT
A
SINGLE
SHADER
THAT
IS
USEFUL
AT
A
VARIETY
OF
SCALES
THERE
LITTLE
CHOICE
BUT
TO
TAKE
STEPS
TO
COUNTERACT
ALIASING
IN
YOUR
SHADERS
CHAPTER
PROCEDURAL
TEXTURING
ANTIALIASING
HIGH
FREQUENCIES
ALIASING
DOES
NOT
OCCUR
UNTIL
WE
ATTEMPT
TO
REPRESENT
A
CONTINUOUS
IMAGE
WITH
DISCRETE
SAMPLES
THIS
CONVERSION
OCCURS
DURING
RASTERIZATION
THERE
ARE
ONLY
TWO
CHOICES
EITHER
DON
T
HAVE
HIGH
FREQUENCY
DETAIL
IN
THE
IMAGE
TO
RENDER
OR
SOMEHOW
DEAL
WITH
UNDERSAMPLING
OF
HIGH
FREQUENCY
DETAIL
SINCE
THE
FORMER
IS
ALMOST
NEVER
DESIRABLE
DUE
TO
VIEWING
WITH
A
VARIETY
OF
SCALES
WE
FOCUS
ON
THE
LATTER
THEREFORE
OUR
ATTEMPTS
TO
MITIGATE
ITS
EFFECTS
WILL
ALWAYS
OCCUR
IN
THE
FRAGMENT
SHADER
THEY
WILL
STILL
INCLUDE
BOTH
TOOLS
OF
REMOVING
HIGH
FREQUENCIES
OR
SAMPLING
AT
HIGHER
RATES
BUT
BOTH
ARE
DONE
AFTER
RASTERIZATION
WHERE
WE
CAN
COMPARE
THE
FREQUENCIES
OF
DETAIL
PRESENT
IN
THE
IMAGE
WITH
THE
FREQUENCY
OF
THE
PIXELS
THE
OPENGL
SHADING
LANGUAGE
HAS
SEVERAL
FUNCTIONS
FOR
THIS
PURPOSE
THAT
ARE
AVAILABLE
ONLY
TO
FRAGMENT
SHADERS
TO
HELP
EXPLAIN
THE
MOTIVATION
FOR
SOME
OF
THE
LANGUAGE
FACILITIES
FOR
FILTER
ESTIMATION
WE
DEVELOP
A
WORST
CASE
SCENARIO
ALTERNATING
BLACK
AND
WHITE
STRIPES
DRAWN
ON
A
SPHERE
DEVELOPING
A
FRAGMENT
SHADER
THAT
PERFORMS
ANTIALIASING
ENABLES
US
TO
FURTHER
ILLUSTRATE
THE
ALIASING
PROBLEM
AND
THE
METHODS
FOR
REDUCING
ALIASING
ARTIFACTS
BERT
FREUDENBERG
DEVELOPED
THE
FIRST
VERSION
OF
THE
GLSL
SHADERS
DISCUSSED
IN
THIS
SECTION
GENERATING
STRIPES
THE
ANTIALIASING
FRAGMENT
SHADER
DETERMINES
WHETHER
EACH
FRAGMENT
IS
TO
BE
DRAWN
AS
WHITE
OR
BLACK
TO
CREATE
LINES
ON
THE
SURFACE
OF
AN
OBJECT
THE
FIRST
STEP
IS
TO
DETERMINE
THE
METHOD
TO
BE
USED
FOR
DRAWING
LINES
WE
USE
A
SINGLE
PARAMETER
AS
THE
BASIS
FOR
OUR
STRIPE
PATTERN
FOR
ILLUSTRATION
LET
ASSUME
THAT
THE
PARAMETER
IS
THE
COORDINATE
OF
THE
OBJECT
TEXTURE
COORDINATE
WE
HAVE
THE
VERTEX
SHADER
PASS
THIS
VALUE
TO
US
AS
A
FLOATING
POINT
OUT
VARIABLE
NAMED
V
EVENTUALLY
GIVING
US
A
METHOD
FOR
CREATING
VERTICAL
STRIPES
ON
A
SPHERE
FIGURE
A
SHOWS
THE
RESULT
OF
USING
THE
TEXTURE
COORDINATE
DIRECTLY
AS
THE
INTENSITY
GRAYSCALE
VALUE
ON
THE
SURFACE
OF
THE
SPHERE
THE
VIEWING
POSITION
IS
SLIGHTLY
ABOVE
THE
SPHERE
SO
WE
ARE
LOOKING
DOWN
AT
THE
NORTH
POLE
THE
TEXTURE
COORDINATE
STARTS
OFF
AT
BLACK
AND
INCREASES
TO
WHITE
AS
IT
GOES
AROUND
THE
SPHERE
THE
EDGE
WHERE
BLACK
MEETS
WHITE
CAN
BE
SEEN
AT
THE
POLE
AND
IT
RUNS
DOWN
THE
BACK
SIDE
OF
THE
SPHERE
THE
FRONT
SIDE
OF
THE
SPHERE
LOOKS
MOSTLY
GRAY
BUT
INCREASES
FROM
LEFT
TO
RIGHT
WE
CREATE
A
SAWTOOTH
WAVE
BY
MULTIPLYING
THE
TEXTURE
COORDINATE
BY
AND
TAKING
THE
FRACTIONAL
PART
SEE
FIGURE
B
THIS
CAUSES
THE
INTENSITY
VALUE
TO
START
AT
RISE
QUICKLY
TO
AND
THEN
DROP
BACK
DOWN
TO
THIS
SEQUENCE
IS
REPEATED
TIMES
THE
GLSL
SHADER
CODE
TO
IMPLEMENT
THIS
IS
FLOAT
SAWTOOTH
FRACT
V
ANTIALIASING
PROCEDURAL
TEXTURES
FIGURE
USING
THE
TEXTURE
COORDINATE
TO
CREATE
STRIPES
ON
A
SPHERE
IN
A
THE
TEXTURE
COORDINATE
IS
USED
DIRECTLY
AS
THE
INTENSITY
GRAY
VALUE
IN
B
A
MODULUS
FUNCTION
CREATES
A
SAWTOOTH
FUNCTION
IN
C
THE
ABSO
LUTE
VALUE
FUNCTION
TURNS
THE
SAWTOOTH
FUNCTION
INTO
A
TRIANGLE
FUNCTION
COURTESY
OF
BERT
FREUDENBERG
UNIVERSITY
OF
MAGDEBURG
THIS
ISN
T
QUITE
THE
STRIPE
PATTERN
WE
RE
AFTER
TO
GET
CLOSER
WE
EMPLOY
THE
ABSOLUTE
VALUE
FUNCTION
SEE
FIGURE
C
BY
MULTIPLYING
THE
VALUE
OF
SAWTOOTH
BY
AND
SUBTRACTING
WE
GET
A
FUNCTION
THAT
VARIES
IN
THE
RANGE
TAKING
THE
ABSOLUTE
VALUE
OF
THIS
FUNCTION
RESULTS
IN
A
FUNCTION
THAT
GOES
FROM
DOWN
TO
AND
THEN
BACK
TO
I
E
A
TRIANGLE
WAVE
THE
LINE
OF
CODE
TO
DO
THIS
IS
FLOAT
TRIANGLE
ABS
SAWTOOTH
A
STRIPE
PATTERN
IS
STARTING
TO
APPEAR
BUT
IT
EITHER
TOO
BLURRY
OR
OUR
GLASSES
NEED
ADJUSTMENT
WE
MAKE
THE
STRIPES
PURE
BLACK
AND
WHITE
BY
USING
THE
STEP
FUNCTION
WHEN
WE
COMPARE
OUR
TRIANGLE
VARIABLE
TO
THIS
FUNCTION
RETURNS
WHENEVER
TRIANGLE
IS
LESS
THAN
OR
EQUAL
TO
AND
WHENEVER
TRIANGLE
IS
GREATER
THAN
THIS
COULD
BE
WRITTEN
AS
FLOAT
SQUARE
STEP
TRIANGLE
THIS
EFFECTIVELY
PRODUCES
A
SQUARE
WAVE
AND
THE
RESULT
IS
ILLUSTRATED
IN
FIGURE
A
WE
CAN
MODIFY
THE
RELATIVE
SIZE
OF
THE
ALTERNATING
STRIPES
BY
ADJUSTING
THE
THRESHOLD
VALUE
PROVIDED
IN
THE
STEP
FUNCTION
ANALYTIC
PRE
FILTERING
IN
FIGURE
A
WE
SEE
THAT
THE
STRIPES
ARE
NOW
DISTINCT
BUT
ALIASING
HAS
REARED
ITS
UGLY
HEAD
THE
STEP
FUNCTION
RETURNS
VALUES
THAT
ARE
EITHER
OR
WITH
NOTHING
IN
BETWEEN
SO
THE
JAGGED
EDGES
IN
THE
TRANSITIONS
BETWEEN
WHITE
AND
BLACK
ARE
EASY
TO
SPOT
THEY
WILL
NOT
GO
AWAY
IF
WE
INCREASE
THE
RESOLUTION
OF
THE
IMAGE
THEY
LL
JUST
BE
SMALLER
THE
PROBLEM
IS
CAUSED
BY
THE
FACT
THAT
THE
STEP
FUNCTION
INTRODUCED
AN
IMMEDIATE
TRANSITION
FROM
CHAPTER
PROCEDURAL
TEXTURING
FIGURE
ANTIALIASING
THE
STRIPE
PATTERN
WE
CAN
SEE
THAT
THE
SQUARE
WAVE
PRODUCED
BY
THE
STEP
FUNCTION
PRODUCES
ALIASING
ARTIFACTS
A
THE
SMOOTHSTEP
FUNCTION
WITH
A
FIXED
WIDTH
FILTER
PRODUCES
TOO
MUCH
BLURRING
NEAR
THE
EQUATOR
BUT
NOT
ENOUGH
AT
THE
POLE
B
AN
ADAPTIVE
APPROACH
PROVIDES
REASONABLE
ANTIALIASING
IN
BOTH
REGIONS
C
COURTESY
OF
BERT
FREUDENBERG
UNIVERSITY
OF
MAGDEBURG
WHITE
TO
BLACK
OR
AN
EDGE
WHICH
INCLUDES
FREQUENCIES
MARCHING
UP
TOWARD
INFINITY
THERE
IS
NO
WAY
TO
SAMPLE
THIS
TRANSITION
AT
A
HIGH
ENOUGH
FREQUENCY
TO
ELIMINATE
THE
ALIASING
ARTIFACTS
TO
GET
GOOD
RESULTS
WE
NEED
TO
TAKE
STEPS
WITHIN
OUR
SHADER
TO
REMOVE
SUCH
HIGH
FREQUENCIES
A
VARIETY
OF
ANTIALIASING
TECHNIQUES
RELY
ON
ELIMINATING
OVERLY
HIGH
FREQUENCIES
BEFORE
SAMPLING
THIS
IS
CALLED
LOW
PASS
FILTERING
BECAUSE
LOW
FREQUENCIES
ARE
PASSED
THROUGH
UNMODIFIED
WHEREAS
HIGH
FREQUENCIES
ARE
ELIMINATED
THE
VISUAL
EFFECT
OF
LOW
PASS
FILTERING
IS
THAT
THE
RESULTING
IMAGE
IS
BLURRED
TO
ELIMINATE
THE
HIGH
FREQUENCIES
FROM
THE
STRIPE
PATTERN
WE
USE
THE
SMOOTHSTEP
FUNCTION
WE
KNOW
THAT
THIS
FUNCTION
PRODUCES
A
SMOOTH
TRANSITION
BETWEEN
WHITE
AND
BLACK
IT
REQUIRES
THAT
WE
SPECIFY
TWO
EDGES
AND
A
SMOOTH
TRANSITION
OCCURS
BETWEEN
THOSE
TWO
EDGES
FIGURE
B
ILLUSTRATES
THE
RESULT
FROM
THE
FOLLOWING
LINE
OF
CODE
FLOAT
SQUARE
SMOOTHSTEP
TRIANGLE
ADAPTIVE
ANALYTIC
PRE
FILTERING
ANALYTIC
PRE
FILTERING
PRODUCES
ACCEPTABLE
RESULTS
IN
SOME
REGIONS
OF
THE
SPHERE
BUT
NOT
IN
OTHERS
THE
SIZE
OF
THE
SMOOTHING
FILTER
IS
DEFINED
IN
PARAMETER
SPACE
BUT
THE
PARAMETER
DOES
NOT
VARY
AT
A
CONSTANT
RATE
IN
SCREEN
SPACE
IN
THIS
CASE
THE
TEXTURE
COORDINATE
VARIES
QUITE
RAPIDLY
IN
SCREEN
SPACE
NEAR
THE
POLES
AND
LESS
RAPIDLY
AT
THE
EQUATOR
OUR
FIXED
WIDTH
FILTER
PRODUCES
BLURRING
ACROSS
SEVERAL
PIXELS
AT
THE
EQUATOR
AND
VERY
LITTLE
EFFECT
AT
THE
POLES
WHAT
WE
NEED
IS
A
WAY
TO
DETERMINE
THE
SIZE
OF
THE
ANTIALIASING
PROCEDURAL
TEXTURES
SMOOTHING
FILTER
ADAPTIVELY
SO
THAT
TRANSITION
CAN
BE
APPROPRIATE
AT
ALL
SCALES
IN
SCREEN
SPACE
THIS
REQUIRES
A
MEASUREMENT
OF
HOW
RAPIDLY
THE
FUNCTION
WE
RE
INTERESTED
IN
IS
CHANGING
AT
A
PARTICULAR
POSITION
IN
SCREEN
SPACE
FORTUNATELY
GLSL
PROVIDES
A
BUILT
IN
FUNCTION
THAT
CAN
GIVE
US
THE
RATE
OF
CHANGE
DERIVATIVE
OF
ANY
PARAMETER
IN
SCREEN
SPACE
THE
FUNCTION
DFDX
GIVES
THE
RATE
OF
CHANGE
IN
SCREEN
COORDINATES
IN
THE
X
DIRECTION
AND
DFDY
GIVES
THE
RATE
OF
CHANGE
IN
THE
Y
DIRECTION
BECAUSE
THESE
FUNCTIONS
DEAL
WITH
SCREEN
SPACE
THEY
ARE
AVAILABLE
ONLY
IN
A
FRAGMENT
SHADER
THESE
TWO
FUNCTIONS
CAN
PROVIDE
THE
INFORMATION
NEEDED
TO
COMPUTE
A
GRADIENT
VECTOR
FOR
THE
POSITION
OF
INTEREST
GIVEN
A
FUNCTION
F
X
Y
THE
GRADIENT
OF
F
AT
THE
POSITION
X
Y
IS
DEFINED
AS
THE
VECTOR
F
X
Y
IN
ENGLISH
THE
GRADIENT
VECTOR
COMPRISES
THE
PARTIAL
DERIVATIVE
OF
FUNCTION
F
WITH
RESPECT
TO
X
I
E
THE
MEASURE
OF
HOW
RAPIDLY
F
IS
CHANGING
IN
THE
X
DIRECTION
AND
THE
PARTIAL
DERIVATIVE
OF
THE
FUNCTION
F
WITH
RESPECT
TO
Y
I
E
THE
MEASURE
OF
HOW
RAPIDLY
F
IS
CHANGING
IN
THE
Y
DIRECTION
THE
IMPORTANT
PROPERTIES
OF
THE
GRADIENT
VECTOR
ARE
THAT
IT
POINTS
IN
THE
DIRECTION
OF
THE
MAXIMUM
RATE
OF
INCREASE
OF
THE
FUNCTION
F
X
Y
THE
GRADIENT
DIRECTION
AND
THAT
THE
MAGNITUDE
OF
THIS
VECTOR
EQUALS
THE
MAXIMUM
RATE
OF
INCREASE
OF
F
X
Y
IN
THE
GRADIENT
DIRECTION
THESE
PROPERTIES
ARE
USEFUL
FOR
IMAGE
PROCESSING
TOO
AS
WE
SEE
LATER
THE
BUILT
IN
FUNCTIONS
DFDX
AND
DFDY
GIVE
US
EXACTLY
WHAT
WE
NEED
TO
DEFINE
THE
GRADIENT
VECTOR
FOR
FUNCTIONS
USED
IN
FRAGMENT
SHADERS
THE
MAGNITUDE
OF
THE
GRADIENT
VECTOR
FOR
THE
FUNCTION
F
X
Y
IS
COMMONLY
CALLED
THE
GRADIENT
OF
THE
FUNCTION
F
X
Y
IT
IS
DEFINED
AS
IG
F
X
Y
I
F
X
F
Y
IN
PRACTICE
IT
IS
NOT
ALWAYS
NECESSARY
TO
PERFORM
THE
POSSIBLY
COSTLY
SQUARE
ROOT
OPERATION
THE
GRADIENT
CAN
BE
APPROXIMATED
WITH
ABSOLUTE
VALUES
IG
F
X
Y
I
IF
X
Y
F
X
Y
I
IF
X
Y
F
X
Y
I
THIS
IS
EXACTLY
WHAT
IS
RETURNED
BY
THE
BUILT
IN
FUNCTION
FWIDTH
THE
SUM
OF
THE
ABSOLUTE
VALUES
IS
AN
UPPER
BOUND
ON
THE
WIDTH
OF
THE
SAMPLING
FILTER
NEEDED
TO
ELIMINATE
ALIASING
IF
IT
IS
TOO
LARGE
THE
RESULTING
IMAGE
LOOKS
SOMEWHAT
BLURRIER
THAN
IT
SHOULD
BUT
THIS
IS
USUALLY
ACCEPTABLE
CHAPTER
PROCEDURAL
TEXTURING
THE
TWO
METHODS
OF
COMPUTING
THE
GRADIENT
ARE
COMPARED
IN
FIGURE
AS
YOU
CAN
SEE
THERE
IS
LITTLE
VISIBLE
DIFFERENCE
BECAUSE
THE
VALUE
OF
THE
GRADIENT
WAS
QUITE
SMALL
FOR
THE
FUNCTION
BEING
EVALUATED
ON
THIS
OBJECT
THE
VALUES
WERE
SCALED
SO
THAT
THEY
WOULD
BE
VISIBLE
FIGURE
VISUALIZING
THE
GRADIENT
IN
A
THE
MAGNITUDE
OF
THE
GRADIENT
VECTOR
IS
USED
AS
THE
INTENSITY
GRAY
VALUE
IN
B
THE
GRADIENT
IS
APPROXIMATED
WITH
ABSOLUTE
VALUES
ACTUAL
GRADIENT
VALUES
ARE
SCALED
FOR
VISUALIZATION
COURTESY
OF
BERT
FREUDENBERG
UNIVERSITY
OF
MAGDEBURG
TO
COMPUTE
THE
ACTUAL
GRADIENT
FOR
THE
IN
VARIABLE
V
WITHIN
A
FRAGMENT
SHADER
WE
USE
FLOAT
WIDTH
LENGTH
DFDX
V
DFDY
V
TO
APPROXIMATE
IT
WE
USE
THE
POTENTIALLY
HIGHER
PERFORMANCE
CALCULATION
FLOAT
WIDTH
FWIDTH
V
WE
THEN
USE
THE
FILTER
WIDTH
WITHIN
OUR
CALL
TO
SMOOTHSTEP
AS
FOLLOWS
FLOAT
EDGE
DP
FREQUENCY
FLOAT
SQUARE
SMOOTHSTEP
EDGE
EDGE
TRIANGLE
IF
WE
PUT
THIS
ALL
TOGETHER
IN
A
FRAGMENT
SHADER
WE
GET
EXAMPLE
EXAMPLE
FRAGMENT
SHADER
FOR
ADAPTIVE
ANALYTIC
ANTIALIASING
VERSION
CORE
UNIFORM
FLOAT
FREQUENCY
STRIPE
FREQUENCY
UNIFORM
UNIFORM
ANTIALIASING
PROCEDURAL
TEXTURES
IN
FLOAT
V
GENERIC
VARYING
IN
FLOAT
LIGHTINTENSITY
OUT
FRAGCOLOR
VOID
MAIN
FLOAT
SAWTOOTH
FRACT
V
FREQUENCY
FLOAT
TRIANGLE
ABS
SAWTOOTH
FLOAT
DP
LENGTH
DFDX
V
DFDY
V
FLOAT
EDGE
DP
FREQUENCY
FLOAT
SQUARE
SMOOTHSTEP
EDGE
EDGE
TRIANGLE
COLOR
MIX
SQUARE
FRAGCOLOR
COLOR
FRAGCOLOR
RGB
LIGHTINTENSITY
IF
WE
SCALE
THE
FREQUENCY
OF
OUR
TEXTURE
WE
MUST
ALSO
INCREASE
THE
FILTER
WIDTH
ACCORDINGLY
AFTER
THE
VALUE
OF
THE
FUNCTION
IS
COMPUTED
IT
IS
REPLICATED
ACROSS
THE
RED
GREEN
AND
BLUE
COMPONENTS
OF
A
AND
USED
AS
THE
COLOR
OF
THE
FRAGMENT
THE
RESULTS
OF
THIS
ADAPTIVE
ANTIALIASING
APPROACH
ARE
SHOWN
IN
FIGURE
C
THE
RESULTS
ARE
MUCH
MORE
CONSISTENT
ACROSS
THE
SURFACE
OF
THE
SPHERE
A
SIMPLE
LIGHTING
COMPUTATION
IS
ADDED
AND
THE
RESULTING
SHADER
IS
APPLIED
TO
THE
TEAPOT
IN
FIGURE
FIGURE
EFFECT
OF
ADAPTIVE
ANALYTICAL
ANTIALIASING
ON
STRIPED
TEAPOTS
ON
THE
LEFT
THE
TEAPOT
IS
DRAWN
WITH
NO
ANTIALIASING
ON
THE
RIGHT
THE
ADAPTIVE
ANTIALIASING
SHADER
IS
USED
A
SMALL
PORTION
OF
THE
STRIPED
SURFACE
IS
MAGNIFIED
PERCENT
TO
MAKE
IT
EASIER
TO
SEE
THE
DIFFERENCE
THIS
APPROACH
TO
ANTIALIASING
WORKS
WELL
UNTIL
THE
FILTER
WIDTH
GETS
LARGER
THAN
THE
FREQUENCY
THIS
IS
THE
SITUATION
THAT
OCCURS
AT
THE
NORTH
POLE
OF
THE
SPHERE
THE
STRIPES
VERY
CLOSE
TO
THE
POLE
ARE
MUCH
THINNER
THAN
ONE
PIXEL
SO
NO
STEP
FUNCTION
WILL
PRODUCE
THE
CORRECT
GRAY
VALUE
HERE
IN
SUCH
REGIONS
YOU
NEED
TO
SWITCH
TO
INTEGRATION
OR
FREQUENCY
CLAMPING
BOTH
OF
WHICH
ARE
DISCUSSED
IN
SUBSEQUENT
SECTIONS
CHAPTER
PROCEDURAL
TEXTURING
ANALYTIC
INTEGRATION
THE
WEIGHTED
AVERAGE
OF
A
FUNCTION
OVER
A
SPECIFIED
INTERVAL
IS
CALLED
A
CONVOLUTION
THE
VALUES
THAT
DO
THE
WEIGHTING
ARE
CALLED
THE
CONVOLUTION
KERNEL
OR
THE
CONVOLUTION
FILTER
IN
SOME
CASES
WE
CAN
REDUCE
OR
ELIMINATE
ALIASING
BY
DETERMINING
THE
CONVOLUTION
OF
A
FUNCTION
AHEAD
OF
TIME
AND
THEN
SAMPLING
THE
CONVOLVED
FUNCTION
RATHER
THAN
THE
ORIGINAL
FUNCTION
THE
CONVOLUTION
CAN
BE
PERFORMED
OVER
A
FIXED
INTERVAL
IN
A
COMPUTATION
THAT
IS
EQUIVALENT
TO
CONVOLVING
THE
INPUT
FUNCTION
WITH
A
BOX
FILTER
A
BOX
FILTER
IS
FAR
FROM
IDEAL
BUT
IT
IS
SIMPLE
AND
EASY
TO
COMPUTE
AND
OFTEN
GOOD
ENOUGH
THIS
METHOD
CORRESPONDS
TO
THE
NOTION
OF
ANTIALIASING
BY
AREA
SAMPLING
IT
IS
DIFFERENT
FROM
POINT
SAMPLING
OR
SUPER
SAMPLING
IN
THAT
WE
ATTEMPT
TO
CALCULATE
THE
AREA
OF
THE
OBJECT
BEING
RENDERED
RELATIVE
TO
THE
SAMPLING
REGION
REFERRING
TO
FIGURE
IF
WE
USED
AN
AREA
SAMPLING
TECHNIQUE
WE
WOULD
GET
MORE
ACCURATE
VALUES
FOR
EACH
OF
THE
PIXELS
AND
WE
WOULDN
T
MISS
THAT
PIXEL
THAT
JUST
HAD
A
SLIVER
OF
COVERAGE
IN
ADVANCED
RENDERMAN
CREATING
CGI
FOR
MOTION
PICTURES
APODACA
AND
GRITZ
EXPLAIN
HOW
TO
PERFORM
ANALYTIC
ANTIALIASING
OF
A
PERIODIC
STEP
FUNCTION
SOMETIMES
CALLED
A
PULSE
TRAIN
DARWYN
PEACHEY
DESCRIBED
HOW
TO
APPLY
THIS
METHOD
TO
HIS
PROCEDURAL
BRICK
RENDERMAN
SHADER
IN
TEXTURING
AND
MODELING
A
PROCEDURAL
APPROACH
AND
DAVE
BALDWIN
PUBLISHED
A
GLSL
VERSION
OF
THIS
SHADER
IN
THE
ORIGINAL
PAPER
ON
THE
OPENGL
SHADING
LANGUAGE
WE
USE
THIS
TECHNIQUE
TO
ANALYTICALLY
ANTIALIAS
THE
PROCEDURAL
BRICK
SHADER
WE
INTRODUCED
AT
THE
BEGINNING
OF
THIS
CHAPTER
IN
THE
SUBSECTION
REGULAR
PATTERNS
ON
PAGE
THIS
EXAMPLE
USES
THE
STEP
FUNCTION
TO
PRODUCE
THE
PERIODIC
BRICK
PATTERN
THE
FUNCTION
THAT
CREATES
THE
BRICK
PATTERN
IN
THE
HORIZONTAL
DIRECTION
IS
ILLUSTRATED
IN
FIGURE
FROM
TO
BRICKPCT
X
THE
BRICK
WIDTH
FRACTION
THE
FUNCTION
IS
AT
THE
VALUE
OF
BRICKPCT
X
THERE
IS
AN
EDGE
WITH
INFINITE
SLOPE
AS
THE
FUNCTION
DROPS
TO
AT
THE
VALUE
THE
FUNCTION
JUMPS
BACK
UP
TO
AND
THE
PROCESS
IS
REPEATED
FOR
THE
NEXT
BRICK
THE
KEY
TO
ANTIALIASING
THIS
FUNCTION
IS
TO
COMPUTE
ITS
INTEGRAL
OR
ACCUMULATED
VALUE
WE
HAVE
TO
CONSIDER
THE
POSSIBILITY
THAT
IN
AREAS
OF
HIGH
COMPLEXITY
THE
FILTER
WIDTH
THAT
IS
COMPUTED
BY
FWIDTH
WILL
COVER
SEVERAL
OF
THESE
PULSES
BY
SAMPLING
THE
INTEGRAL
RATHER
THAN
THE
FUNCTION
ITSELF
WE
GET
A
PROPERLY
WEIGHTED
AVERAGE
AND
AVOID
THE
HIGH
FREQUENCIES
CAUSED
BY
POINT
SAMPLING
THAT
WOULD
PRODUCE
ALIASING
ARTIFACTS
SO
WHAT
IS
THE
INTEGRAL
OF
THIS
FUNCTION
IT
IS
ILLUSTRATED
IN
FIGURE
FROM
TO
BRICKPCT
X
THE
FUNCTION
VALUE
IS
SO
THE
INTEGRAL
INCREASES
WITH
A
SLOPE
OF
FROM
BRICKPCT
X
TO
THE
FUNCTION
HAS
A
VALUE
OF
SO
THE
ANTIALIASING
PROCEDURAL
TEXTURES
INTEGRAL
STAYS
CONSTANT
IN
THIS
REGION
AT
THE
FUNCTION
JUMPS
BACK
TO
SO
THE
INTEGRAL
INCREASES
UNTIL
THE
FUNCTION
REACHES
BRICKPCT
X
AT
THIS
POINT
THE
INTEGRAL
CHANGES
TO
A
SLOPE
OF
AGAIN
AND
THIS
PATTERN
OF
RAMPS
AND
PLATEAUS
CONTINUES
FIGURE
PERIODIC
STEP
FUNCTION
THE
PERIODIC
STEP
FUNCTION
OR
PULSE
TRAIN
THAT
DEFINES
THE
HORIZONTAL
COM
PONENT
OF
THE
PROCEDURAL
BRICK
TEXTURE
FIGURE
PERIODIC
STEP
FUNCTION
PULSE
TRAIN
AND
ITS
INTEGRAL
CHAPTER
PROCEDURAL
TEXTURING
WE
PERFORM
ANTIALIASING
BY
DETERMINING
THE
VALUE
OF
THE
INTEGRAL
OVER
THE
AREA
OF
THE
FILTER
AND
WE
DO
THAT
BY
EVALUATING
THE
INTEGRAL
AT
THE
EDGES
OF
THE
FILTER
AND
SUBTRACTING
THE
TWO
VALUES
THE
INTEGRAL
FOR
THIS
FUNCTION
CONSISTS
OF
TWO
PARTS
THE
SUM
OF
THE
AREA
FOR
ALL
THE
PULSES
THAT
HAVE
BEEN
FULLY
COMPLETED
BEFORE
THE
EDGE
WE
ARE
CONSIDERING
AND
THE
AREA
OF
THE
PARTIALLY
COMPLETED
PULSE
FOR
THE
EDGE
WE
ARE
CONSIDERING
FOR
OUR
PROCEDURAL
BRICK
SHADER
WE
USE
THE
VARIABLE
POSITION
X
AS
THE
BASIS
FOR
GENERATING
THE
PULSE
FUNCTION
IN
THE
HORIZONTAL
DIRECTION
SO
THE
NUMBER
OF
FULLY
COMPLETED
PULSES
IS
JUST
FLOOR
POSITION
X
BECAUSE
THE
HEIGHT
OF
EACH
PULSE
IS
THE
AREA
OF
EACH
FULLY
COMPLETED
PULSE
IS
JUST
BRICKPCT
X
MULTIPLYING
FLOOR
POSITION
X
BY
BRICKPCT
X
GIVES
THE
AREA
FOR
ALL
THE
FULLY
COMPLETED
PULSES
THE
EDGE
THAT
WE
RE
CONSIDERING
MAY
BE
IN
THE
PART
OF
THE
FUNCTION
THAT
IS
EQUAL
TO
OR
IT
MAY
BE
IN
THE
PART
OF
THE
FUNCTION
THAT
IS
EQUAL
TO
WE
CAN
FIND
OUT
BY
COMPUTING
FRACT
POSITION
X
BRICKPCT
X
IF
THE
RESULT
OF
THIS
SUBTRACTION
IS
LESS
THAN
WE
WERE
IN
THE
PART
OF
THE
FUNCTION
THAT
RETURNS
SO
NOTHING
MORE
NEEDS
TO
BE
DONE
BUT
IF
THE
VALUE
IS
GREATER
THAN
WE
ARE
PARTWAY
INTO
A
REGION
OF
THE
FUNCTION
THAT
IS
EQUAL
TO
BECAUSE
THE
HEIGHT
OF
THE
PULSE
IS
THE
AREA
OF
THIS
PARTIAL
PULSE
IS
FRACT
POSITION
X
BRICKPCT
X
THEREFORE
THE
SECOND
PART
OF
OUR
INTEGRAL
IS
THE
EXPRESSION
MAX
FRACT
POSITION
X
BRICKPCT
X
WE
USE
THIS
INTEGRAL
FOR
BOTH
THE
HORIZONTAL
AND
VERTICAL
COMPONENTS
OF
OUR
PROCEDURAL
BRICK
PATTERN
BECAUSE
THE
APPLICATION
KNOWS
THE
BRICK
WIDTH
AND
HEIGHT
FRACTIONS
BRICKPCT
X
AND
BRICKPCT
Y
IT
CAN
EASILY
COMPUTE
BRICKPCT
X
AND
BRICKPCT
Y
AND
PROVIDE
THEM
TO
OUR
FRAGMENT
SHADER
AS
WELL
THIS
KEEPS
US
FROM
UNNECESSARILY
COMPUTING
THESE
VALUES
SEVERAL
TIMES
FOR
EVERY
FRAGMENT
THAT
IS
RENDERED
WE
CALL
THESE
VALUES
THE
MORTAR
PERCENTAGE
BECAUSE
WE
EVALUATE
THIS
EXPRESSION
TWICE
WITH
DIFFERENT
ARGUMENTS
WE
DEFINE
IT
AS
A
MACRO
OR
A
FUNCTION
FOR
CONVENIENCE
DEFINE
INTEGRAL
X
P
NOTP
FLOOR
X
P
MAX
FRACT
X
NOTP
THE
PARAMETER
P
INDICATES
THE
VALUE
THAT
IS
PART
OF
THE
PULSE
I
E
WHEN
THE
FUNCTION
IS
AND
NOTP
INDICATES
THE
VALUE
THAT
IS
NOT
PART
OF
THE
PULSE
I
E
WHEN
THE
FUNCTION
IS
USING
THIS
MACRO
WE
CAN
WRITE
THE
CODE
TO
COMPUTE
THE
VALUE
OF
THE
INTEGRAL
OVER
THE
WIDTH
OF
THE
FILTER
AS
FOLLOWS
FW
USEBRICK
FW
FWIDTH
POSITION
USEBRICK
INTEGRAL
POSITION
FW
BRICKPCT
MORTARPCT
INTEGRAL
POSITION
BRICKPCT
MORTARPCT
FW
ANTIALIASING
PROCEDURAL
TEXTURES
THE
RESULT
IS
DIVIDED
BY
THE
AREA
OF
THE
FILTER
A
BOX
FILTER
IS
ASSUMED
IN
THIS
CASE
TO
OBTAIN
THE
AVERAGE
VALUE
FOR
THE
FUNCTION
IN
THE
SELECTED
INTERVAL
ANTIALIASED
BRICK
FRAGMENT
SHADER
NOW
WE
CAN
PUT
ALL
THIS
TO
WORK
TO
BUILD
BETTER
BRICKS
WE
REPLACE
THE
SIMPLE
POINT
SAMPLING
TECHNIQUE
WITH
ANALYTIC
INTEGRATION
THE
RESULTING
SHADER
IS
SHOWN
IN
EXAMPLE
THE
DIFFERENCE
BETWEEN
THE
ALIASED
AND
ANTIALIASED
BRICK
SHADERS
IS
SHOWN
IN
FIGURE
FIGURE
BRICK
SHADER
WITH
AND
WITHOUT
ANTIALIASING
ON
THE
LEFT
THE
RESULTS
OF
THE
BRICK
SHADER
WITHOUT
ANTIALIASING
ON
THE
RIGHT
RESULTS
OF
ANTIALIASING
BY
ANALYTIC
INTEGRATION
INC
EXAMPLE
SOURCE
CODE
FOR
AN
ANTIALIASED
BRICK
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
BRICKCOLOR
MORTARCOLOR
UNIFORM
BRICKSIZE
UNIFORM
BRICKPCT
UNIFORM
MORTARPCT
IN
MCPOSITION
IN
FLOAT
LIGHTINTENSITY
OUT
FRAGCOLOR
DEFINE
INTEGRAL
X
P
NOTP
FLOOR
X
P
MAX
FRACT
X
NOTP
VOID
MAIN
POSITION
FW
USEBRICK
COLOR
DETERMINE
POSITION
WITHIN
THE
BRICK
PATTERN
CHAPTER
PROCEDURAL
TEXTURING
POSITION
MCPOSITION
BRICKSIZE
ADJUST
EVERY
OTHER
ROW
BY
AN
OFFSET
OF
HALF
A
BRICK
IF
FRACT
POSITION
Y
POSITION
X
CALCULATE
FILTER
SIZE
FW
FWIDTH
POSITION
PERFORM
FILTERING
BY
INTEGRATING
THE
PULSE
MADE
BY
THE
BRICK
PATTERN
OVER
THE
FILTER
WIDTH
AND
HEIGHT
USEBRICK
INTEGRAL
POSITION
FW
BRICKPCT
MORTARPCT
INTEGRAL
POSITION
BRICKPCT
MORTARPCT
FW
DETERMINE
FINAL
COLOR
COLOR
MIX
MORTARCOLOR
BRICKCOLOR
USEBRICK
X
USEBRICK
Y
COLOR
LIGHTINTENSITY
FRAGCOLOR
COLOR
FREQUENCY
CLAMPING
CERTAIN
FUNCTIONS
DO
NOT
HAVE
AN
ANALYTIC
SOLUTION
OR
THEY
ARE
JUST
TOO
DIFFICULT
TO
SOLVE
IF
THIS
IS
THE
CASE
YOU
MIGHT
TRY
A
TECHNIQUE
CALLED
FREQUENCY
CLAMPINGS
IN
THIS
TECHNIQUE
THE
AVERAGE
VALUE
OF
THE
FUNCTION
REPLACES
THE
ACTUAL
VALUE
OF
THE
FUNCTION
WHEN
THE
FILTER
WIDTH
IS
TOO
LARGE
THIS
IS
CONVENIENT
FOR
FUNCTIONS
SUCH
AS
SINE
AND
NOISE
WHOSE
AVERAGE
IS
KNOWN
ANTIALIASED
CHECKERBOARD
FRAGMENT
SHADER
THE
CHECKERBOARD
PATTERN
IS
THE
STANDARD
MEASURE
OF
THE
QUALITY
OF
AN
ANTIALIASING
TECHNIQUE
SEE
FIGURE
LARRY
GRITZ
WROTE
A
CHECKERBOARD
RENDERMAN
SHADER
THAT
PERFORMS
ANTIALIASING
BY
FREQUENCY
SAMPLING
AND
DAVE
BALDWIN
TRANSLATED
THIS
SHADER
TO
GLSL
EXAMPLE
SHOWS
A
FRAGMENT
SHADER
THAT
PRODUCES
A
PROCEDURALLY
GENERATED
ANTIALIASED
CHECKERBOARD
PATTERN
THE
VERTEX
SHADER
TRANSFORMS
THE
VERTEX
POSITION
AND
PASSES
ALONG
THE
TEXTURE
COORDINATE
NOTHING
MORE
THE
APPLICATION
PROVIDES
VALUES
FOR
THE
TWO
COLORS
OF
THE
CHECKERBOARD
PATTERN
THE
AVERAGE
OF
THESE
TWO
COLORS
THE
APPLICATION
CAN
COMPUTE
THIS
AND
PROVIDE
IT
THROUGH
A
UNIFORM
VARIABLE
RATHER
THAN
HAVING
THE
FRAGMENT
SHADER
COMPUTE
IT
FOR
EVERY
FRAGMENT
AND
THE
FREQUENCY
OF
THE
CHECKERBOARD
PATTERN
THE
FRAGMENT
SHADER
COMPUTES
THE
APPROPRIATE
SIZE
OF
THE
FILTER
AND
USES
IT
TO
PERFORM
SMOOTH
INTERPOLATION
BETWEEN
ADJOINING
CHECKERBOARD
SQUARES
IF
THE
FILTER
IS
TOO
WIDE
I
E
THE
IN
VARIABLE
IS
CHANGING
TOO
QUICKLY
FOR
PROPER
FILTERING
THE
AVERAGE
COLOR
IS
SUBSTITUTED
EVEN
THOUGH
THIS
FRAGMENT
SHADER
USES
A
CONDITIONAL
STATEMENT
CARE
IS
TAKEN
TO
AVOID
ALIASING
IN
THE
TRANSITION
ZONE
BETWEEN
THE
IF
CLAUSE
AND
THE
ELSE
CLAUSE
ANTIALIASING
PROCEDURAL
TEXTURES
FIGURE
CHECKERBOARD
PATTERN
RENDERED
WITH
THE
ANTIALIASED
CHECKERBOARD
SHADER
ON
THE
LEFT
THE
FILTER
WIDTH
IS
SET
TO
SO
ALIASING
OCCURS
ON
THE
RIGHT
THE
FILTER
WIDTH
IS
COMPUTED
USING
THE
FWIDTH
FUNCTION
A
SMOOTH
INTERPOLATION
IS
PERFORMED
BETWEEN
THE
COMPUTED
COLOR
AND
THE
AVERAGE
COLOR
EXAMPLE
SOURCE
CODE
FOR
AN
ANTIALIASED
CHECKERBOARD
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
UNIFORM
UNIFORM
AVGCOLOR
UNIFORM
FLOAT
FREQUENCY
IN
TEXCOORD
FRAGCOLOR
VOID
MAIN
COLOR
CHAPTER
PROCEDURAL
TEXTURING
DETERMINE
THE
WIDTH
OF
THE
PROJECTION
OF
ONE
PIXEL
INTO
T
SPACE
FW
FWIDTH
TEXCOORD
DETERMINE
THE
AMOUNT
OF
FUZZINESS
FUZZ
FW
FREQUENCY
FLOAT
FUZZMAX
MAX
FUZZ
FUZZ
T
DETERMINE
THE
POSITION
IN
THE
CHECKERBOARD
PATTERN
CHECKPOS
FRACT
TEXCOORD
FREQUENCY
IF
FUZZMAX
IF
THE
FILTER
WIDTH
IS
SMALL
ENOUGH
COMPUTE
THE
PATTERN
COLOR
P
SMOOTHSTEP
FUZZ
CHECKPOS
SMOOTHSTEP
FUZZ
CHECKPOS
COLOR
MIX
P
X
P
Y
P
X
P
Y
FADE
IN
THE
AVERAGE
COLOR
WHEN
WE
GET
CLOSE
TO
THE
LIMIT
COLOR
MIX
COLOR
AVGCOLOR
SMOOTHSTEP
FUZZMAX
ELSE
OTHERWISE
USE
ONLY
THE
AVERAGE
COLOR
COLOR
AVGCOLOR
FRAGCOLOR
COLOR
PROCEDURAL
ANTIALIASING
SUMMARY
WITH
INCREASED
FREEDOM
COMES
INCREASED
RESPONSIBILITY
THE
OPENGL
SHADING
LANGUAGE
PERMITS
THE
COMPUTATION
OF
PROCEDURAL
TEXTURES
WITHOUT
RESTRICTION
IT
IS
QUITE
EASY
TO
WRITE
A
SHADER
THAT
EXHIBITS
UNSIGHTLY
ALIASING
ARTIFACTS
USING
A
CONDITIONAL
OR
A
STEP
FUNCTION
IS
ALL
IT
TAKES
AND
IT
CAN
BE
DIFFICULT
TO
ELIMINATE
THESE
ARTIFACTS
AFTER
DESCRIBING
THE
ALIASING
PROBLEM
IN
GENERAL
TERMS
THIS
CHAPTER
EXPLORED
SEVERAL
OPTIONS
FOR
ANTIALIASING
PROCEDURAL
TEXTURES
FACILITIES
IN
THE
LANGUAGE
SUCH
AS
THE
BUILT
IN
FUNCTIONS
FOR
SMOOTH
INTERPOLATION
SMOOTHSTEP
FOR
DETERMINING
DERIVATIVES
IN
SCREEN
SPACE
DFDX
DFDY
AND
FOR
ESTIMATING
FILTER
WIDTH
FWIDTH
CAN
ASSIST
IN
THE
FIGHT
AGAINST
JAGGIES
MOIRÉ
PATTERNS
AND
SPARKLING
POINTS
THESE
FUNCTIONS
WERE
FUNDAMENTAL
COMPONENTS
OF
SHADERS
THAT
WERE
PRESENTED
TO
PERFORM
ANTIALIASING
BY
PREFILTERING
ADAPTIVE
PREFILTERING
INTEGRATION
AND
FREQUENCY
CLAMPING
ANTIALIASING
PROCEDURAL
TEXTURES
NOISE
IN
COMPUTER
GRAPHICS
IT
EASY
TO
MAKE
THINGS
LOOK
GOOD
BY
DEFINITION
GEOMETRY
IS
DRAWN
AND
RENDERED
PRECISELY
HOWEVER
WHEN
REALISM
IS
A
GOAL
PERFECTION
ISN
T
ALWAYS
SUCH
A
GOOD
THING
REAL
WORLD
OBJECTS
HAVE
DENTS
AND
DINGS
AND
SCUFFS
THEY
SHOW
WEAR
AND
TEAR
COMPUTER
GRAPHICS
ARTISTS
HAVE
TO
WORK
HARD
TO
MAKE
A
PERFECTLY
DEFINED
BOWLING
PIN
LOOK
LIKE
IT
HAS
BEEN
USED
AND
ABUSED
FOR
YEARS
IN
A
BOWLING
ALLEY
OR
TO
MAKE
A
SPACESHIP
THAT
SEEMS
A
LITTLE
WORSE
FOR
WEAR
AFTER
MANY
YEARS
OF
GALACTIC
TRAVEL
THIS
WAS
THE
PROBLEM
THAT
KEN
PERLIN
WAS
TRYING
TO
SOLVE
WHEN
HE
WORKED
FOR
A
COMPANY
CALLED
MAGI
IN
THE
EARLY
MAGI
WAS
WORKING
WITH
DISNEY
ON
THE
ORIGINAL
FEATURE
FILM
TRON
THAT
WAS
THE
MOST
AMBITIOUS
FILM
IN
ITS
USE
OF
COMPUTER
GRAPHICS
UNTIL
THAT
TIME
PERLIN
RECOGNIZED
THE
IMPERFECTION
OF
THE
PERFECTLY
RENDERED
OBJECTS
IN
THAT
FILM
AND
HE
RESOLVED
TO
DO
SOMETHING
ABOUT
IT
WITH
TECHNIQUES
STILL
HIGHLY
USEFUL
TODAY
IN
A
SEMINAL
PAPER
PUBLISHED
IN
PERLIN
DESCRIBED
A
RENDERER
THAT
HE
HAD
WRITTEN
THAT
USED
A
TECHNIQUE
HE
CALLED
NOISE
HIS
DEFINITION
OF
NOISE
WAS
A
LITTLE
DIFFERENT
FROM
THE
COMMON
DEFINITION
OF
NOISE
NORMALLY
WHEN
WE
REFER
TO
NOISE
WE
RE
REFERRING
TO
SOMETHING
LIKE
A
RANDOM
CHANGING
PATTERN
OF
PIXELS
ON
AN
OLD
TELEVISION
WITH
NO
SIGNAL
ALSO
CALLED
SNOW
OR
A
GRAINY
IMAGE
TAKEN
WITH
A
DIGITAL
CAMERA
IN
LOW
LIGHT
INDUCED
BY
THERMAL
NOISE
HOWEVER
AN
ALWAYS
CHANGING
RANDOMNESS
LIKE
THIS
ISN
T
THAT
USEFUL
FOR
COMPUTER
GRAPHICS
FOR
COMPUTER
GRAPHICS
WE
NEED
A
FUNCTION
THAT
IS
REPEATABLE
SO
THAT
AN
OBJECT
CAN
BE
DRAWN
FROM
DIFFERENT
VIEW
ANGLES
WE
ALSO
NEED
THE
ABILITY
TO
DRAW
THE
OBJECT
THE
SAME
WAY
FRAME
AFTER
FRAME
IN
AN
ANIMATION
NORMAL
RANDOM
NUMBER
FUNCTIONS
DO
NOT
DEPEND
ON
ANY
INPUT
LOCATION
SO
AN
OBJECT
RENDERED
WITH
SUCH
A
FUNCTION
WOULD
LOOK
DIFFERENT
EACH
TIME
IT
WAS
DRAWN
THE
VISUAL
ARTIFACTS
CAUSED
BY
THIS
TYPE
OF
RENDERING
WOULD
LOOK
HORRIBLE
AS
THE
OBJECT
WAS
MOVED
AROUND
THE
SCREEN
WHAT
IS
NEEDED
IS
A
FUNCTION
THAT
PRODUCES
THE
SAME
OUTPUT
VALUE
FOR
A
GIVEN
INPUT
LOCATION
EVERY
TIME
AND
YET
GIVES
THE
APPEARANCE
OF
RANDOMNESS
THAT
IS
FOR
A
TYPICAL
SURFACE
WE
WANT
RANDOM
VARIATION
ACROSS
SPACE
BUT
NOT
ACROSS
TIME
UNLESS
THAT
IS
ALSO
DESIRED
THIS
FUNCTION
ALSO
NEEDS
TO
BE
CONTINUOUS
AT
ALL
LEVELS
OF
DETAIL
FAST
TO
COMPUTE
AND
HAVE
SOME
OTHER
IMPORTANT
PROPERTIES
DISCUSSED
SHORTLY
PERLIN
WAS
THE
FIRST
TO
COME
UP
WITH
A
USABLE
FUNCTION
PERLIN
NOISE
FOR
THAT
PURPOSE
SINCE
THEN
A
VARIETY
OF
SIMILAR
NOISE
FUNCTIONS
HAVE
BEEN
DEFINED
AND
USED
IN
COMBINATIONS
TO
PRODUCE
INTERESTING
RENDERING
EFFECTS
SUCH
AS
RENDERING
NATURAL
PHENOMENA
CLOUDS
FIRE
SMOKE
WIND
EFFECTS
ETC
RENDERING
NATURAL
MATERIALS
MARBLE
GRANITE
WOOD
MOUNTAINS
ETC
CHAPTER
PROCEDURAL
TEXTURING
RENDERING
MAN
MADE
MATERIALS
STUCCO
ASPHALT
CEMENT
ETC
ADDING
IMPERFECTIONS
TO
PERFECT
MODELS
RUST
DIRT
SMUDGES
DENTS
ETC
ADDING
IMPERFECTIONS
TO
PERFECT
PATTERNS
WIGGLES
BUMPS
COLOR
VARIATIONS
ETC
ADDING
IMPERFECTIONS
TO
TIME
PERIODS
TIME
BETWEEN
BLINKS
AMOUNT
OF
CHANGE
BETWEEN
SUCCESSIVE
FRAMES
ETC
ADDING
IMPERFECTIONS
TO
MOTION
WOBBLES
JITTERS
BUMPS
ETC
ACTUALLY
THE
LIST
IS
ENDLESS
TODAY
MOST
RENDERING
LIBRARIES
INCLUDE
SUPPORT
FOR
PERLIN
NOISE
OR
SOMETHING
NEARLY
EQUIVALENT
IT
IS
A
STAPLE
OF
REALISTIC
RENDERING
AND
IT
BEEN
HEAVILY
USED
IN
THE
GENERATION
OF
COMPUTER
GRAPHICS
IMAGES
FOR
THE
MOVIE
INDUSTRY
FOR
HIS
GROUNDBREAKING
WORK
IN
THIS
AREA
PERLIN
WAS
PRESENTED
WITH
AN
ACADEMY
AWARD
FOR
TECHNICAL
ACHIEVEMENT
IN
BECAUSE
NOISE
IS
SUCH
AN
IMPORTANT
TECHNIQUE
IT
IS
INCLUDED
AS
A
BUILT
IN
FUNCTION
IN
THE
OPENGL
SHADING
LANGUAGE
HOWEVER
NOT
ALL
GLSL
PLATFORMS
IMPLEMENT
IT
OR
IMPLEMENT
IT
IN
EXACTLY
THE
SAME
WAY
SO
IF
YOU
NEED
MAXIMUM
PORTABILITY
YOU
LL
WANT
TO
USE
METHODS
YOU
HAVE
COMPLETE
CONTROL
OVER
GIVING
COMPLETE
PORTABILITY
WE
LL
FOCUS
ON
SUCH
A
PORTABLE
METHOD
IN
THIS
SECTION
ONCE
YOU
HAVE
A
SOURCE
OF
NOISE
THERE
ARE
SEVERAL
WAYS
TO
MAKE
USE
OF
IT
WITHIN
A
FRAGMENT
SHADER
AFTER
LAYING
THE
GROUNDWORK
FOR
A
PORTABLE
NOISE
WE
TAKE
A
LOOK
AT
SEVERAL
SHADER
EXAMPLES
THAT
EMPLOY
NOISE
TO
ACHIEVE
A
VARIETY
OF
INTERESTING
EFFECTS
DEFINITION
OF
NOISE
THE
PURPOSE
OF
THIS
SECTION
IS
TO
PROVIDE
A
DEFINITION
AND
ENOUGH
OF
AN
INTUITIVE
FEEL
THAT
YOU
CAN
GRASP
THE
NOISE
BASED
OPENGL
SHADERS
PRESENTED
IN
THIS
SECTION
AND
THEN
USE
GLSL
TO
CREATE
ADDITIONAL
NOISE
BASED
EFFECTS
AS
KEN
PERLIN
DESCRIBES
IT
YOU
CAN
THINK
OF
NOISE
AS
SEASONING
FOR
GRAPHICS
IT
OFTEN
HELPS
TO
ADD
A
LITTLE
NOISE
A
PERFECT
MODEL
LOOKS
A
LITTLE
LESS
PERFECT
AND
THEREFORE
A
LITTLE
MORE
REALISTIC
IF
SOME
SUBTLE
NOISE
EFFECTS
ARE
APPLIED
THE
IDEAL
NOISE
FUNCTION
HAS
THE
FOLLOWING
IMPORTANT
QUALITIES
THAT
MAKE
IT
THE
VALUABLE
TOOL
WE
NEED
FOR
CREATING
A
VARIETY
OF
INTERESTING
EFFECTS
NEEDED
FOR
SUCCESSFUL
USE
IN
MODELING
RENDERING
OR
ANIMATION
IT
DOES
NOT
SHOW
ANY
OBVIOUS
REGULAR
OR
REPEATED
PATTERNS
IT
IS
A
CONTINUOUS
FUNCTION
AND
ITS
DERIVATIVE
IS
ALSO
CONTINUOUS
THAT
IS
THERE
ARE
NO
SUDDEN
STEPS
OR
SHARP
BENDS
ONLY
SMOOTH
VARIATION
NOISE
AND
ZOOMING
IN
TO
SMALLER
AND
SMALLER
SCALES
STILL
SHOWS
ONLY
SMOOTH
VARIATION
IT
IS
A
FUNCTION
THAT
IS
REPEATABLE
ACROSS
TIME
I
E
IT
GENERATES
THE
SAME
VALUE
EACH
TIME
IT
IS
PRESENTED
WITH
THE
SAME
INPUT
IT
HAS
A
WELL
DEFINED
RANGE
OF
OUTPUT
VALUES
USUALLY
THE
RANGE
IS
OR
IT
IS
A
FUNCTION
WHOSE
SMALL
SCALE
FORM
IS
ROUGHLY
INDEPENDENT
OF
LARGE
SCALE
POSITION
THERE
IS
AN
UNDERLYING
FREQUENCY
TO
VARIATION
OR
STATISTICAL
CHARACTER
THAT
IS
THE
SAME
EVERYWHERE
IT
IS
A
FUNCTION
THAT
IS
ISOTROPIC
ITS
STATISTICAL
CHARACTER
IS
THE
SAME
IN
ALL
DIRECTIONS
IT
CAN
BE
DEFINED
FOR
OR
EVEN
MORE
DIMENSIONS
IT
IS
FAST
TO
COMPUTE
FOR
ANY
GIVEN
INPUT
IN
PRACTICE
ALL
THIS
ADDS
UP
TO
A
NOISE
FUNCTION
THAT
QUICKLY
AND
SMOOTHLY
PERTURBS
OR
ADDS
AN
APPARENT
ELEMENT
OF
RANDOMNESS
TO
AN
INITIAL
REGULAR
PERIODIC
PATTERN
FOR
EXAMPLE
TAKING
A
NORMAL
SQUARE
GRID
AND
MOVING
EACH
INTERSECTION
A
BIT
IN
A
SOME
PSUEDO
RANDOM
DIRECTION
A
VARIETY
OF
FUNCTIONS
CAN
DO
THIS
BUT
EACH
MAKES
VARIOUS
TRADE
OFFS
IN
QUALITY
AND
PERFORMANCE
SO
THEY
MEET
THE
PRECEDING
CRITERIA
WITH
VARYING
DEGREES
OF
SUCCESS
WE
CAN
CONSTRUCT
A
SIMPLE
NOISE
FUNCTION
CALLED
VALUE
NOISE
BY
PEACHEY
BY
FIRST
ASSIGNING
A
PSEUDORANDOM
NUMBER
IN
THE
RANGE
TO
EACH
INTEGER
VALUE
ALONG
THE
X
AXIS
AS
SHOWN
IN
FIGURE
AND
THEN
SMOOTHLY
FIGURE
A
DISCRETE
NOISE
FUNCTION
CHAPTER
PROCEDURAL
TEXTURING
INTERPOLATING
BETWEEN
THESE
POINTS
AS
SHOWN
IN
FIGURE
THE
FUNCTION
IS
REPEATABLE
IN
THAT
FOR
A
GIVEN
INPUT
VALUE
IT
ALWAYS
RETURNS
THE
SAME
OUTPUT
VALUE
FIGURE
A
CONTINUOUS
NOISE
FUNCTION
A
KEY
CHOICE
TO
BE
MADE
IN
THIS
TYPE
OF
NOISE
FUNCTION
IS
THE
METHOD
USED
TO
INTERPOLATE
BETWEEN
SUCCESSIVE
POINTS
LINEAR
INTERPOLATION
IS
NOT
GOOD
ENOUGH
BECAUSE
IT
IS
NOT
CONTINUOUS
MAKING
THE
RESULTING
NOISE
PATTERN
SHOW
OBVIOUS
ARTIFACTS
A
CUBIC
INTERPOLATION
METHOD
IS
USUALLY
USED
TO
PRODUCE
SMOOTH
LOOKING
RESULTS
BY
VARYING
THE
FREQUENCY
AND
THE
AMPLITUDE
YOU
CAN
GET
A
VARIETY
OF
NOISE
FUNCTIONS
SEE
FIGURE
AS
YOU
CAN
SEE
THE
FEATURES
IN
THESE
FUNCTIONS
GET
SMALLER
AND
CLOSER
TOGETHER
AS
THE
FREQUENCY
INCREASES
AND
THE
AMPLITUDE
DECREASES
WHEN
TWO
FREQUENCIES
ARE
RELATED
BY
A
RATIO
OF
IT
CALLED
AN
OCTAVE
FIGURE
ILLUSTRATES
FIVE
OCTAVES
OF
THE
NOISE
FUNCTION
THESE
IMAGES
OF
NOISE
DON
T
LOOK
ALL
THAT
USEFUL
BUT
BY
THEMSELVES
THEY
CAN
PROVIDE
SOME
INTERESTING
CHARACTERISTICS
TO
SHADERS
IF
WE
ADD
THE
FUNCTIONS
AT
DIFFERENT
FREQUENCIES
SEE
FIGURE
WE
START
TO
SEE
SOMETHING
THAT
LOOKS
EVEN
MORE
INTERESTING
THE
RESULT
IS
A
FUNCTION
THAT
CONTAINS
FEATURES
OF
VARIOUS
SIZES
THE
LARGER
BUMPS
FROM
THE
LOWER
FREQUENCY
FUNCTIONS
PROVIDE
THE
OVERALL
SHAPE
WHEREAS
THE
SMALLER
BUMPS
FROM
THE
HIGHER
FREQUENCY
FUNCTIONS
PROVIDE
DETAIL
AND
INTEREST
AT
A
SMALLER
SCALE
THE
FUNCTION
THAT
RESULTS
FROM
SUMMING
THE
NOISE
OF
CONSECUTIVE
OCTAVES
EACH
AT
HALF
THE
AMPLITUDE
OF
THE
PREVIOUS
OCTAVE
WAS
CALLED
F
NOISE
BY
PERLIN
BUT
THE
TERMS
FRACTIONAL
BROWNIAN
MOTION
OR
FBM
ARE
USED
MORE
COMMONLY
TODAY
IF
YOU
SUM
OCTAVES
OF
NOISE
IN
A
PROCEDURAL
SHADER
AT
SOME
POINT
YOU
WILL
BEGIN
TO
ADD
FREQUENCIES
THAT
CAUSE
ALIASING
ARTIFACTS
WHEN
THE
FREQUENCY
NOISE
FREQUENCY
AMPLITUDE
FREQUENCY
AMPLITUDE
FREQUENCY
AMPLITUDE
FREQUENCY
AMPLITUDE
FREQUENCY
64
AMPLITUDE
FIGURE
VARYING
THE
FREQUENCY
AND
THE
AMPLITUDE
OF
THE
NOISE
FUNCTION
OF
NOISE
IS
GREATER
THAN
TWICE
THE
FREQUENCY
OF
SAMPLING
E
G
PIXEL
SPACING
YOU
REALLY
DO
START
GETTING
RANDOM
SAMPLE
VALUES
THAT
WILL
CAUSE
THE
FLICKERING
FORMS
OF
ALIASING
HENCE
ALGORITHMS
FOR
ANTIALIASING
NOISE
FUNCTIONS
TYPICALLY
STOP
ADDING
DETAIL
HIGHER
FREQUENCY
NOISE
BEFORE
THIS
OCCURS
THIS
IS
ANOTHER
USEFUL
FEATURE
OF
THE
NOISE
FUNCTION
IT
CAN
BE
FADED
TO
THE
AVERAGE
SAMPLE
VALUE
AT
THE
POINT
AT
WHICH
ALIASING
ARTIFACTS
WOULD
BEGIN
TO
OCCUR
THE
NOISE
FUNCTION
DEFINED
BY
PERLIN
PERLIN
NOISE
IS
SOMETIMES
CALLED
GRADIENT
NOISE
IT
IS
DEFINED
AS
A
FUNCTION
WHOSE
VALUE
IS
AT
EACH
INTEGER
INPUT
VALUE
AND
ITS
SHAPE
IS
CREATED
BY
DEFINING
A
PSEUDORANDOM
GRADIENT
VECTOR
FOR
THE
FUNCTION
AT
EACH
OF
THESE
POINTS
THE
CHARACTERISTICS
OF
THIS
NOISE
FUNCTION
MAKE
IT
A
SOMEWHAT
BETTER
CHOICE
IN
GENERAL
FOR
THE
EFFECTS
WE
RE
AFTER
IT
IS
USED
FOR
THE
IMPLEMENTATION
OF
THE
NOISE
FUNCTION
IN
CHAPTER
PROCEDURAL
TEXTURING
FIGURE
SUMMING
NOISE
FUNCTIONS
SHOWS
THE
RESULT
OF
SUMMING
NOISE
FUNCTIONS
OF
DIFFERENT
AMPLITUDE
AND
FREQUENCY
RENDERMAN
AND
IT
IS
ALSO
INTENDED
TO
BE
USED
FOR
IMPLEMENTATIONS
OF
THE
NOISE
FUNCTION
BUILT
INTO
GLSL
LOTS
OF
OTHER
NOISE
FUNCTIONS
HAVE
BEEN
DEFINED
AND
THERE
ARE
MANY
WAYS
TO
VARY
THE
BASIC
IDEAS
THE
EXAMPLES
OF
PERLIN
NOISE
SHOWN
PREVIOUSLY
HAVE
A
FREQUENCY
MULTIPLIER
OF
BUT
IT
CAN
BE
USEFUL
TO
USE
A
FREQUENCY
NOISE
MULTIPLIER
SUCH
AS
THAT
IS
NOT
AN
INTEGER
VALUE
THIS
FREQUENCY
MULTIPLIER
IS
CALLED
THE
LACUNARITY
OF
THE
FUNCTION
THE
WORD
COMES
FROM
THE
LATIN
WORD
LACUNA
WHICH
MEANS
GAP
USING
A
VALUE
LARGER
THAN
ALLOWS
US
TO
BUILD
UP
MORE
VARIETY
MORE
QUICKLY
E
G
BY
SUMMING
FEWER
OCTAVES
TO
ACHIEVE
THE
SAME
APPARENT
VISUAL
COMPLEXITY
SIMILARLY
IT
IS
NOT
NECESSARY
TO
DIVIDE
THE
AMPLITUDE
OF
EACH
SUCCESSIVE
OCTAVE
BY
SUMMED
NOISE
FUNCTIONS
ARE
THE
BASIS
FOR
THE
TERRAIN
AND
FEATURES
FOUND
IN
THE
PLANET
BUILDING
SOFTWARE
PACKAGE
MOJOWORLD
FROM
PANDROMEDA
IN
TEXTURING
AND
MODELING
A
PROCEDURAL
APPROACH
KEN
MUSGRAVE
DEFINES
A
FRACTAL
AS
A
GEOMETRICALLY
COMPLEX
OBJECT
THE
COMPLEXITY
OF
WHICH
ARISES
THROUGH
THE
REPETITION
OF
A
GIVEN
FORM
OVER
A
RANGE
OF
SCALES
THE
RELATIONSHIP
BETWEEN
THE
CHANGE
IN
FREQUENCY
AND
THE
CHANGE
IN
AMPLITUDE
DETERMINES
THE
FRACTAL
DIMENSION
OF
THE
RESULTING
FUNCTION
IF
WE
USE
A
NOISE
FUNCTION
AS
THE
BASIS
FOR
GENERATING
A
TERRAIN
MODEL
WE
CAN
TAKE
STEPS
TO
MAKE
IT
BEHAVE
DIFFERENTLY
AT
DIFFERENT
LOCATIONS
FOR
INSTANCE
NATURAL
TERRAIN
HAS
PLAINS
ROLLING
HILLS
FOOTHILLS
AND
MOUNTAINS
VARYING
THE
FRACTAL
DIMENSION
BASED
ON
LOCATION
CAN
CREATE
A
SIMILAR
APPEARANCE
SUCH
A
FUNCTION
IS
CALLED
A
MULTIFRACTAL
YOU
CAN
ACHIEVE
INTERESTING
EFFECTS
BY
USING
DIFFERENT
NOISE
FUNCTIONS
FOR
DIFFERENT
SITUATIONS
OR
BY
COMBINING
NOISE
FUNCTIONS
OF
DIFFERENT
TYPES
IT
NOT
THAT
EASY
TO
VISUALIZE
IN
ADVANCE
THE
RESULTS
OF
CALCULATIONS
THAT
DEPEND
ON
NOISE
VALUES
SO
VARIED
EXPERIENCE
WILL
BE
A
KEY
ALLY
AS
YOU
TRY
TO
ACHIEVE
THE
EFFECT
YOU
RE
AFTER
NOISE
ARMED
WITH
A
BASIC
IDEA
OF
WHAT
THE
NOISE
FUNCTION
LOOKS
LIKE
IN
ONE
DIMENSION
WE
CAN
TAKE
A
LOOK
AT
TWO
DIMENSIONAL
NOISE
FIGURE
CONTAINS
IMAGES
OF
PERLIN
NOISE
AT
VARIOUS
FREQUENCIES
MAPPED
INTO
THE
RANGE
AND
DISPLAYED
AS
A
GRAYSCALE
IMAGE
EACH
SUCCESSIVE
IMAGE
IS
TWICE
THE
FREQUENCY
OF
THE
PREVIOUS
ONE
IN
EACH
IMAGE
THE
CONTRAST
HAS
BEEN
ENHANCED
TO
MAKE
THE
PEAKS
BRIGHTER
AND
THE
VALLEYS
DARKER
IN
ACTUAL
USE
EACH
SUBSEQUENT
IMAGE
HAS
AN
AVERAGE
THAT
IS
HALF
THE
PREVIOUS
ONE
AND
AN
AMPLITUDE
THAT
IS
HALF
THE
PREVIOUS
ONE
IF
WE
WERE
TO
PRINT
IMAGES
OF
THE
ACTUAL
VALUES
THE
IMAGES
WOULD
BE
MUCH
GRAYER
AND
IT
WOULD
BE
HARDER
TO
SEE
WHAT
NOISE
REALLY
LOOKS
LIKE
AS
IN
THE
CASE
ADDING
THE
DIFFERENT
FREQUENCY
FUNCTIONS
PROVIDES
MORE
INTERESTING
RESULTS
FIGURE
CHAPTER
PROCEDURAL
TEXTURING
FIGURE
BASIC
NOISE
AT
FREQUENCIES
AND
CONTRAST
ENHANCED
FIGURE
SUMMED
NOISE
AT
AND
OCTAVES
CONTRAST
ENHANCED
THE
FIRST
IMAGE
IN
FIGURE
IS
EXACTLY
THE
SAME
AS
THE
FIRST
IMAGE
IN
FIGURE
THE
SECOND
IMAGE
IN
FIGURE
IS
THE
SUM
OF
THE
FIRST
IMAGE
IN
FIGURE
PLUS
HALF
OF
THE
SECOND
IMAGE
IN
FIGURE
SHIFTED
SO
THAT
ITS
AVERAGE
INTENSITY
VALUE
IS
THIS
CAUSES
INTENSITY
TO
BE
INCREASED
IN
SOME
AREAS
AND
DECREASED
IN
OTHERS
THE
THIRD
IMAGE
IN
FIGURE
ADDS
THE
THIRD
OCTAVE
OF
NOISE
TO
THE
FIRST
TWO
AND
THE
FOURTH
IMAGE
IN
FIGURE
ADDS
THE
FOURTH
OCTAVE
THE
FOURTH
PICTURE
IS
STARTING
TO
LOOK
A
LITTLE
BIT
LIKE
CLOUDS
IN
THE
SKY
HIGHER
DIMENSIONS
OF
NOISE
AND
NOISE
FUNCTIONS
ARE
OBVIOUS
EXTENSIONS
OF
THE
AND
FUNCTIONS
IT
A
LITTLE
HARD
TO
GENERATE
PICTURES
OF
NOISE
BUT
THE
IMAGES
IN
FIGURE
CAN
BE
THOUGHT
OF
AS
SLICES
OUT
OF
A
NOISE
FUNCTION
NEIGHBORING
SLICES
HAVE
CONTINUITY
BETWEEN
THEM
OFTEN
A
HIGHER
DIMENSION
OF
NOISE
IS
USED
TO
CONTROL
THE
TIME
ASPECT
OF
THE
NEXT
LOWER
DIMENSION
NOISE
FUNCTION
FOR
INSTANCE
NOISE
CAN
ADD
SOME
WIGGLE
TO
OTHERWISE
STRAIGHT
LINES
IN
A
DRAWING
IF
YOU
HAVE
A
NOISE
FUNCTION
ONE
DIMENSION
CAN
CONTROL
THE
WIGGLE
AND
THE
SECOND
DIMENSION
CAN
ANIMATE
THE
EFFECT
I
E
MAKE
THE
WIGGLES
MOVE
IN
SUCCESSIVE
FRAMES
SIMILARLY
A
NOISE
FUNCTION
CAN
CREATE
A
CLOUD
PATTERN
WHEREAS
A
NOISE
FUNCTION
CAN
GENERATE
THE
CLOUD
PATTERN
NOISE
AND
ANIMATE
IT
IN
A
REALISTIC
WAY
WITH
A
NOISE
FUNCTION
YOU
CAN
CREATE
A
OBJECT
LIKE
A
PLANET
AND
USE
THE
FOURTH
DIMENSION
TO
WATCH
IT
EVOLVE
IN
FITS
AND
STARTS
USING
NOISE
IN
THE
OPENGL
SHADING
LANGUAGE
YOU
INCLUDE
NOISE
IN
A
SHADER
IN
THE
FOLLOWING
THREE
WAYS
USE
GLSL
BUILT
IN
NOISE
FUNCTIONS
WRITE
YOUR
OWN
NOISE
FUNCTION
IN
GLSL
USE
A
TEXTURE
MAP
TO
STORE
A
PREVIOUSLY
COMPUTED
NOISE
FUNCTION
WITH
TODAY
GRAPHICS
SYSTEMS
OPTIONS
AND
GIVE
THE
BEST
PORTABILITY
AND
OPTION
TYPICALLY
GIVES
THE
BEST
PERFORMANCE
HERE
WE
WILL
FOCUS
ON
TECHNIQUES
BASED
ON
OPTION
OPTION
IS
NOT
DONE
TO
THE
EXCLUSION
OF
OPTIONS
AND
AS
THE
PREVIOUSLY
COMPUTED
NOISE
FUNCTION
COMES
FROM
THEM
THE
DIFFERENCE
IS
REALLY
WHETHER
THE
FUNCTION
IS
COMPUTED
ON
THE
FLY
FOR
ARBITRARY
INPUTS
OPTIONS
AND
OR
PRECOMPUTED
AND
STORED
AWAY
FOR
A
PREDETERMINED
SET
OF
INPUTS
OPTION
TYPICALLY
AS
A
TEXTURE
MAP
NOISE
TEXTURES
THE
PROGRAMMABILITY
OFFERED
BY
GLSL
LETS
US
USE
VALUES
STORED
IN
TEXTURE
MEMORY
IN
NEW
AND
UNIQUE
WAYS
WE
CAN
PRECOMPUTE
A
NOISE
FUNCTION
AND
SAVE
IT
IN
A
OR
TEXTURE
MAP
WE
CAN
THEN
ACCESS
THIS
TEXTURE
MAP
OR
TEXTURE
MAPS
FROM
WITHIN
A
SHADER
BECAUSE
TEXTURES
CAN
CONTAIN
UP
TO
FOUR
COMPONENTS
WE
CAN
USE
A
SINGLE
TEXTURE
MAP
TO
STORE
FOUR
OCTAVES
OF
NOISE
OR
FOUR
COMPLETELY
SEPARATE
NOISE
FUNCTIONS
EXAMPLE
SHOWS
A
C
FUNCTION
THAT
GENERATES
A
NOISE
TEXTURE
THIS
FUNCTION
CREATES
AN
RGBA
TEXTURE
WITH
THE
FIRST
OCTAVE
OF
NOISE
STORED
IN
THE
RED
TEXTURE
COMPONENT
THE
SECOND
OCTAVE
STORED
IN
THE
GREEN
TEXTURE
COMPONENT
THE
THIRD
OCTAVE
STORED
IN
THE
BLUE
COMPONENT
AND
THE
FOURTH
OCTAVE
STORED
IN
THE
ALPHA
COMPONENT
EACH
OCTAVE
HAS
TWICE
THE
FREQUENCY
AND
HALF
THE
AMPLITUDE
AS
THE
PREVIOUS
ONE
THIS
FUNCTION
ASSUMES
THE
EXISTENCE
OF
A
FUNCTION
THAT
CAN
GENERATE
NOISE
VALUES
IN
THE
RANGE
IF
YOU
WANT
YOU
CAN
START
WITH
PERLIN
C
IMPLEMENTATION
JOHN
KESSENICH
MADE
SOME
CHANGES
TO
THAT
CODE
ADDING
A
SETNOISEFREQUENCY
FUNCTION
TO
PRODUCE
NOISE
VALUES
THAT
WRAP
SMOOTHLY
FROM
ONE
EDGE
OF
THE
ARRAY
TO
THE
OTHER
THIS
MEANS
WE
CAN
USE
THE
TEXTURE
WITH
THE
WRAPPING
MODE
SET
TO
AND
WE
WON
T
SEE
ANY
DISCONTINUITIES
IN
THE
FUNCTION
WHEN
IT
WRAPS
THE
REVISED
VERSION
OF
THE
CODE
IS
IN
THE
GLSLDEMO
PROGRAM
FROM
CHAPTER
PROCEDURAL
TEXTURING
EXAMPLE
C
FUNCTION
TO
GENERATE
A
NOISE
TEXTURE
INT
GLUINT
GLUBYTE
VOID
VOID
INT
F
I
J
K
INC
INT
STARTFREQUENCY
INT
NUMOCTAVES
DOUBLE
NI
DOUBLE
INCI
INCJ
INCK
INT
FREQUENCY
STARTFREQUENCY
GLUBYTE
PTR
DOUBLE
AMP
IF
GLUBYTE
MALLOC
NULL
FPRINTF
STDERR
ERROR
COULD
NOT
ALLOCATE
NOISE
TEXTURE
N
EXIT
FOR
F
INC
F
NUMOCTAVES
F
FREQUENCY
INC
AMP
SETNOISEFREQUENCY
FREQUENCY
PTR
NI
NI
NI
INCI
FREQUENCY
FOR
I
I
I
NI
INCI
INCJ
FREQUENCY
FOR
J
J
J
NI
INCJ
INCK
FREQUENCY
FOR
K
K
K
NI
INCK
PTR
PTR
INC
GLUBYTE
NI
AMP
NOISE
THIS
FUNCTION
COMPUTES
NOISE
VALUES
FOR
FOUR
OCTAVES
OF
NOISE
AND
STORES
THEM
IN
A
RGBA
TEXTURE
OF
SIZE
THIS
CODE
ALSO
ASSUMES
THAT
EACH
COMPONENT
OF
THE
TEXTURE
IS
STORED
AS
AN
BIT
INTEGER
VALUE
THE
FIRST
OCTAVE
HAS
A
FREQUENCY
OF
AND
AN
AMPLITUDE
OF
IN
THE
INNERMOST
PART
OF
THE
LOOP
WE
CALL
THE
FUNCTION
TO
GENERATE
A
NOISE
VALUE
BASED
ON
THE
CURRENT
VALUE
OF
NI
THE
FUNCTION
RETURNS
A
VALUE
IN
THE
RANGE
SO
BY
ADDING
WE
END
UP
WITH
A
NOISE
VALUE
IN
THE
RANGE
MULTIPLYING
BY
OUR
AMPLITUDE
VALUE
OF
GIVES
A
VALUE
IN
THE
RANGE
FINALLY
WE
MULTIPLY
BY
TO
GIVE
US
AN
INTEGER
VALUE
IN
THE
RANGE
THAT
CAN
BE
STORED
IN
THE
RED
COMPONENT
OF
A
TEXTURE
WHEN
ACCESSED
FROM
WITHIN
A
SHADER
THE
VALUE
IS
A
FLOATING
POINT
VALUE
IN
THE
RANGE
THE
AMPLITUDE
VALUE
IS
CUT
IN
HALF
AND
THE
FREQUENCY
IS
DOUBLED
IN
EACH
PASS
THROUGH
THE
LOOP
THE
RESULT
IS
THAT
INTEGER
VALUES
IN
THE
RANGE
64
ARE
STORED
IN
THE
GREEN
COMPONENT
OF
THE
NOISE
TEXTURE
INTEGER
VALUES
IN
THE
RANGE
32
ARE
STORED
IN
THE
BLUE
COMPONENT
OF
THE
NOISE
TEXTURE
AND
INTEGER
VALUES
IN
THE
RANGE
ARE
STORED
IN
THE
ALPHA
COMPONENT
OF
THE
TEXTURE
WE
GENERATED
THE
IMAGES
IN
FIGURE
BY
LOOKING
AT
EACH
OF
THESE
CHANNELS
INDEPENDENTLY
AFTER
SCALING
THE
VALUES
BY
A
CONSTANT
VALUE
THAT
ALLOWED
THEM
TO
SPAN
THE
MAXIMUM
INTENSITY
RANGE
I
E
INTEGER
VALUES
IN
THE
RANGE
255
OR
FLOATING
POINT
VALUES
IN
THE
RANGE
AFTER
THE
VALUES
FOR
THE
NOISE
TEXTURE
ARE
COMPUTED
THE
TEXTURE
CAN
BE
PROVIDED
TO
THE
GRAPHICS
HARDWARE
WITH
THE
CODE
IN
EXAMPLE
FIRST
WE
PICK
A
TEXTURE
UNIT
AND
BIND
TO
IT
THE
TEXTURE
WE
VE
CREATED
WE
SET
UP
ITS
WRAPPING
PARAMETERS
SO
THAT
THE
TEXTURE
WRAPS
IN
ALL
THREE
DIMENSIONS
THIS
WAY
WE
ALWAYS
GET
A
VALID
RESULT
FOR
OUR
NOISE
FUNCTION
NO
MATTER
WHAT
INPUT
VALUES
ARE
USED
WE
STILL
HAVE
TO
BE
SOMEWHAT
CAREFUL
TO
AVOID
USING
THE
TEXTURE
IN
A
WAY
THAT
MAKES
OBVIOUS
REPEATING
PATTERNS
THE
NEXT
TWO
LINES
SET
THE
TEXTURE
FILTERING
MODES
TO
LINEAR
BECAUSE
THE
DEFAULT
IS
MIPMAP
LINEAR
AND
WE
RE
NOT
USING
MIPMAP
TEXTURES
HERE
WE
ARE
CONTROLLING
THE
SCALING
FACTORS
FROM
WITHIN
OUR
NOISE
SHADERS
SO
A
SINGLE
TEXTURE
IS
SUFFICIENT
THOUGH
WE
WON
T
GO
INTO
IT
MORE
DEEPLY
HERE
USING
A
MIPMAPPED
TEXTURE
WILL
IMPROVE
QUALITY
WHEN
USING
A
BROAD
RANGE
OF
LEVEL
OF
DETAIL
WHEN
ZOOMED
IN
TO
AVOID
SEEING
BLOCKINESS
IN
THE
NOISE
YOU
LL
NEED
A
BASE
TEXEL
FREQUENCY
TWO
TIMES
GREATER
THAN
THE
HIGHEST
FREQUENCY
NOISE
WHEN
ZOOMED
OUT
YOU
LL
NEED
A
PROPERLY
FILTERED
MIPMAP
TO
AVOID
SEEING
ALIASING
WHEN
THE
PIXEL
FREQUENCY
APPROACHES
OR
SURPASSES
THE
NOISE
FREQUENCY
WHEN
ALL
THE
PARAMETERS
ARE
SET
UP
WE
CAN
DOWNLOAD
THE
NOISE
TEXTURE
TO
THE
HARDWARE
BY
USING
THE
FUNCTION
CHAPTER
PROCEDURAL
TEXTURING
EXAMPLE
A
FUNCTION
FOR
ACTIVATING
THE
NOISE
TEXTURE
VOID
GLGENTEXTURES
GLACTIVETEXTURE
GLBINDTEXTURE
GLTEXPARAMETERF
GLTEXPARAMETERF
GLTEXPARAMETERF
GLTEXPARAMETERF
GLTEXPARAMETERF
GL_RGBA
THIS
IS
AN
EXCELLENT
APPROACH
IF
THE
PERIOD
OF
REPEATABILITY
CAN
BE
AVOIDED
IN
THE
FINAL
RENDERING
ONE
WAY
TO
AVOID
IT
IS
TO
MAKE
SURE
THAT
NO
TEXTURE
VALUE
IS
ACCESSED
MORE
THAN
ONCE
WHEN
THE
TARGET
OBJECT
IS
RENDERED
FOR
INSTANCE
IF
A
TEXTURE
IS
BEING
USED
AND
THE
POSITION
ON
THE
OBJECT
IS
USED
AS
THE
INPUT
TO
THE
NOISE
FUNCTION
THE
REPEATABILITY
WON
T
BE
VISIBLE
IF
THE
ENTIRE
OBJECT
FITS
WITHIN
THE
TEXTURE
TRADE
OFFS
AS
PREVIOUSLY
MENTIONED
THREE
METHODS
CAN
BE
USED
TO
GENERATE
NOISE
VALUES
IN
A
SHADER
HOW
DO
YOU
KNOW
WHICH
IS
THE
BEST
CHOICE
FOR
YOUR
APPLICATION
A
LOT
DEPENDS
ON
THE
UNDERLYING
IMPLEMENTATION
BUT
GENERALLY
SPEAKING
IF
WE
ASSUME
A
HARDWARE
COMPUTATION
OF
NOISE
THAT
DOES
NOT
USE
TEXTURING
THE
POINTS
FAVORING
USAGE
OF
GLSL
BUILT
IN
NOISE
FUNCTION
ARE
THE
FOLLOWING
IT
DOESN
T
CONSUME
ANY
TEXTURE
MEMORY
A
128
128
TEXTURE
MAP
STORED
AS
RGBA
WITH
BITS
PER
COMPONENT
USES
OF
TEXTURE
MEMORY
IT
DOESN
T
USE
A
TEXTURE
UNIT
IT
IS
A
CONTINUOUS
FUNCTION
RATHER
THAN
A
DISCRETE
ONE
SO
IT
DOES
NOT
LOOK
PIXELATED
NO
MATTER
WHAT
THE
SCALING
IS
THE
REPEATABILITY
OF
THE
FUNCTION
SHOULD
BE
UNDETECTABLE
ESPECIALLY
FOR
AND
NOISE
BUT
IT
DEPENDS
ON
THE
HARDWARE
IMPLEMENTATION
SHADERS
WRITTEN
WITH
THE
BUILT
IN
NOISE
FUNCTION
DON
T
DEPEND
ON
THE
APPLICATION
TO
SET
UP
APPROPRIATE
TEXTURES
NOISE
THE
ADVANTAGES
OF
USING
A
TEXTURE
MAP
TO
IMPLEMENT
THE
NOISE
FUNCTION
ARE
AS
FOLLOWS
BECAUSE
THE
NOISE
FUNCTION
IS
COMPUTED
BY
THE
APPLICATION
THE
APPLI
CATION
HAS
TOTAL
CONTROL
OF
THIS
FUNCTION
AND
CAN
ENSURE
MATCHING
BEHAVIOR
ON
EVERY
HARDWARE
PLATFORM
YOU
CAN
STORE
FOUR
NOISE
VALUES
I
E
ONE
EACH
FOR
THE
R
G
B
AND
A
VALUES
OF
THE
TEXTURE
AT
EACH
TEXTURE
LOCATION
THIS
LETS
YOU
PRECOMPUTE
FOUR
OCTAVES
OF
NOISE
FOR
INSTANCE
AND
RETRIEVE
ALL
FOUR
VALUES
WITH
A
SINGLE
TEXTURE
ACCESS
ACCESSING
A
TEXTURE
MAP
MAY
BE
FASTER
THAN
CALLING
THE
BUILT
IN
NOISE
FUNCTION
USER
DEFINED
FUNCTIONS
CAN
IMPLEMENT
NOISE
FUNCTIONS
THAT
PROVIDE
A
DIFFERENT
APPEARANCE
FROM
THAT
OF
THE
BUILT
IN
NOISE
FUNCTIONS
A
USER
DEFINED
FUNCTION
CAN
ALSO
PROVIDE
MATCHING
BEHAVIOR
ON
EVERY
PLATFORM
WHEREAS
THE
BUILT
IN
NOISE
FUNCTIONS
CANNOT
AT
LEAST
NOT
UNTIL
ALL
GRAPHICS
HARDWARE
DEVELOPERS
SUPPORT
THE
NOISE
FUNCTION
IN
EXACTLY
THE
SAME
WAY
BUT
HARDWARE
DEVELOPERS
WILL
OPTIMIZE
THE
BUILT
IN
NOISE
FUNCTION
PERHAPS
ACCELERATING
IT
WITH
SPECIAL
HARDWARE
SO
IT
IS
APT
TO
BE
FASTER
THAN
USER
DEFINED
NOISE
FUNCTIONS
IN
THE
LONG
RUN
USING
THE
BUILT
IN
NOISE
FUNCTION
OR
USER
DEFINED
NOISE
FUNCTIONS
WILL
BE
THE
WAY
TO
GO
FOR
MOST
APPLICATIONS
THIS
WILL
RESULT
IN
NOISE
THAT
DOESN
T
SHOW
A
REPETITIVE
PATTERN
HAS
GREATER
NUMERICAL
PRECISION
AND
DOESN
T
USE
UP
ANY
TEXTURE
RESOURCES
APPLICATIONS
THAT
WANT
FULL
CONTROL
OVER
THE
NOISE
FUNCTION
AND
CAN
LIVE
WITHIN
THE
CONSTRAINTS
OF
A
FIXED
SIZE
NOISE
FUNCTION
CAN
BE
SUCCESSFUL
USING
TEXTURES
FOR
THEIR
NOISE
WITH
CURRENT
GENERATION
HARDWARE
NOISE
TEXTURES
MAY
ALSO
PROVIDE
BETTER
PERFORMANCE
AND
REQUIRE
FEWER
INSTRUCTIONS
IN
THE
SHADER
A
SIMPLE
NOISE
SHADER
NOW
WE
PUT
ALL
THESE
IDEAS
INTO
SOME
SHADERS
THAT
DO
SOME
INTERESTING
RENDERING
FOR
US
THE
FIRST
SHADER
WE
LOOK
AT
USES
NOISE
IN
A
SIMPLE
WAY
TO
PRODUCE
A
CLOUD
EFFECT
APPLICATION
SETUP
VERY
LITTLE
NEEDS
TO
BE
PASSED
TO
THE
NOISE
SHADERS
DISCUSSED
IN
THIS
SECTION
OR
IN
TURBULENCE
AND
GRANITE
THE
VERTEX
POSITION
MUST
BE
PASSED
IN
AS
ALWAYS
AND
THE
SURFACE
NORMAL
IS
NEEDED
FOR
PERFORMING
LIGHTING
COMPUTATIONS
COLORS
AND
SCALE
FACTORS
ARE
PARAMETERIZED
AS
UNIFORM
VARIABLES
FOR
THE
VARIOUS
SHADERS
CHAPTER
PROCEDURAL
TEXTURING
VERTEX
SHADER
THE
CODE
SHOWN
IN
EXAMPLE
IS
THE
VERTEX
SHADER
THAT
WE
USE
FOR
THE
FOUR
NOISE
FRAGMENT
SHADERS
THAT
FOLLOW
IT
IS
FAIRLY
SIMPLE
BECAUSE
IT
REALLY
ONLY
NEEDS
TO
ACCOMPLISH
THREE
THINGS
AS
IN
ALL
VERTEX
SHADERS
OUR
VERTEX
SHADER
TRANSFORMS
THE
INCOMING
VERTEX
VALUE
AND
STORES
IT
IN
THE
BUILT
IN
SPECIAL
VARIABLE
USING
THE
INCOMING
NORMAL
AND
THE
UNIFORM
VARIABLE
LIGHTPOS
THE
VERTEX
SHADER
COMPUTES
THE
LIGHT
INTENSITY
FROM
A
SINGLE
WHITE
LIGHT
SOURCE
AND
APPLIES
A
SCALE
FACTOR
OF
TO
INCREASE
THE
AMOUNT
OF
ILLUMINATION
THE
VERTEX
SHADER
SCALES
THE
INCOMING
VERTEX
VALUE
AND
STORES
IT
IN
THE
OUT
VARIABLE
MCPOSITION
THIS
VALUE
IS
AVAILABLE
TO
US
IN
OUR
FRAGMENT
SHADER
AS
THE
MODELING
COORDINATE
POSITION
OF
THE
OBJECT
AT
EVERY
FRAGMENT
IT
IS
AN
IDEAL
VALUE
TO
USE
AS
THE
INPUT
FOR
OUR
TEXTURE
LOOKUP
NO
MATTER
HOW
THE
OBJECT
IS
DRAWN
FRAGMENTS
ALWAYS
PRODUCE
THE
SAME
POSITION
VALUES
OR
VERY
CLOSE
TO
THEM
THEREFORE
THE
NOISE
VALUE
OBTAINED
FOR
EACH
POINT
ON
THE
SURFACE
IS
ALSO
THE
SAME
OR
VERY
CLOSE
TO
IT
THE
APPLICATION
CAN
SET
A
UNIFORM
VARIABLE
CALLED
SCALE
TO
OPTIMALLY
SCALE
THE
OBJECT
IN
RELATIONSHIP
TO
THE
SIZE
OF
THE
NOISE
TEXTURE
EXAMPLE
CLOUD
VERTEX
SHADER
VERSION
CORE
UNIFORM
MVMATRIX
UNIFORM
MVPMATRIX
UNIFORM
NORMALMATRIX
UNIFORM
LIGHTPOS
UNIFORM
FLOAT
SCALE
IN
MCVERTEX
IN
MCNORMAL
OUT
FLOAT
LIGHTINTENSITY
OUT
MCPOSITION
VOID
MAIN
ECPOSITION
MVMATRIX
MCVERTEX
MCPOSITION
MCVERTEX
SCALE
TNORM
NORMALIZE
NORMALMATRIX
MCNORMAL
LIGHTINTENSITY
DOT
NORMALIZE
LIGHTPOS
ECPOSITION
TNORM
LIGHTINTENSITY
MVPMATRIX
MCVERTEX
NOISE
FRAGMENT
SHADER
AFTER
WE
VE
COMPUTED
A
NOISE
TEXTURE
AND
USED
OPENGL
CALLS
TO
DOWNLOAD
IT
TO
THE
GRAPHICS
CARD
WE
CAN
USE
A
FAIRLY
SIMPLE
FRAGMENT
SHADER
TOGETHER
WITH
THE
VERTEX
SHADER
DESCRIBED
IN
THE
PREVIOUS
SECTION
TO
MAKE
AN
INTERESTING
CLOUDY
SKY
EFFECT
SEE
EXAMPLE
THIS
SHADER
RESULTS
IN
SOMETHING
THAT
LOOKS
LIKE
THE
SKY
ON
A
MOSTLY
CLOUDY
DAY
YOU
CAN
EXPERIMENT
WITH
THE
COLOR
VALUES
TO
GET
A
RESULT
THAT
IS
VISUALLY
PLEASING
THIS
FRAGMENT
SHADER
RECEIVES
AS
INPUT
THE
TWO
IN
VARIABLES
LIGHTINTENSITY
AND
MCPOSITION
THAT
WERE
COMPUTED
BY
THE
VERTEX
SHADER
SHOWN
IN
THE
PREVIOUS
SECTION
THESE
VALUES
WERE
COMPUTED
AT
EACH
VERTEX
BY
THE
VERTEX
SHADER
AND
THEN
INTERPOLATED
ACROSS
THE
PRIMITIVE
BY
THE
RASTERIZATION
HARDWARE
HERE
IN
OUR
FRAGMENT
SHADER
WE
HAVE
ACCESS
TO
THE
INTERPOLATED
VALUE
OF
EACH
OF
THESE
VARIABLES
AT
EVERY
FRAGMENT
THE
FIRST
LINE
OF
CODE
IN
THE
SHADER
PERFORMS
A
TEXTURE
LOOKUP
ON
OUR
NOISE
TEXTURE
TO
PRODUCE
A
FOUR
COMPONENT
RESULT
WE
COMPUTE
THE
VALUE
OF
INTENSITY
BY
SUMMING
THE
FOUR
COMPONENTS
OF
OUR
NOISE
TEXTURE
THIS
VALUE
IS
THEN
SCALED
BY
AND
USED
TO
PERFORM
A
LINEAR
BLEND
BETWEEN
TWO
COLORS
WHITE
AND
SKY
BLUE
THE
FOUR
CHANNELS
IN
OUR
NOISE
TEXTURE
HAVE
MEAN
VALUES
OF
AND
AN
ADDITIONAL
TERM
IS
ADDED
TO
ACCOUNT
FOR
THE
AVERAGE
VALUES
OF
ALL
THE
OCTAVES
AT
HIGHER
FREQUENCIES
YOU
CAN
THINK
OF
THIS
AS
FADING
TO
THE
AVERAGE
VALUES
OF
ALL
THE
HIGHER
FREQUENCY
OCTAVES
THAT
AREN
T
BEING
INCLUDED
IN
THE
CALCULATION
AS
DESCRIBED
EARLIER
IN
DEFINITION
OF
NOISE
SCALING
THE
SUM
BY
STRETCHES
THE
RESULTING
VALUE
TO
USE
UP
MORE
OF
THE
RANGE
FROM
THE
COMPUTED
COLOR
IS
THEN
SCALED
BY
LIGHTINTENSITY
VALUE
TO
SIMULATE
A
DIFFUSE
SURFACE
LIT
BY
A
SINGLE
LIGHT
SOURCE
THE
RESULT
IS
ASSIGNED
TO
THE
OUT
VARIABLE
FRAGCOLOR
WITH
AN
ALPHA
VALUE
OF
TO
PRODUCE
THE
COLOR
VALUE
THAT
IS
USED
BY
THE
REMAINDER
OF
THE
OPENGL
PIPELINE
AN
OBJECT
RENDERED
WITH
THIS
SHADER
IS
SHOWN
IN
FIGURE
NOTICE
THAT
THE
TEXTURE
ON
THE
TEAPOT
LOOKS
A
LOT
LIKE
THE
FINAL
IMAGE
IN
FIGURE
EXAMPLE
FRAGMENT
SHADER
FOR
CLOUDY
SKY
EFFECT
VERSION
CORE
UNIFORM
NOISE
UNIFORM
SKYCOLOR
UNIFORM
CLOUDCOLOR
IN
FLOAT
LIGHTINTENSITY
IN
MCPOSITION
OUT
FRAGCOLOR
CHAPTER
PROCEDURAL
TEXTURING
VOID
MAIN
NOISEVEC
TEXTURE
NOISE
MCPOSITION
FLOAT
INTENSITY
NOISEVEC
NOISEVEC
NOISEVEC
NOISEVEC
COLOR
MIX
SKYCOLOR
CLOUDCOLOR
INTENSITY
LIGHTINTENSITY
FRAGCOLOR
COLOR
FIGURE
TEAPOTS
RENDERED
WITH
NOISE
SHADERS
CLOCKWISE
FROM
UPPER
LEFT
A
CLOUD
SHADER
THAT
SUMS
FOUR
OCTAVES
OF
NOISE
AND
USES
A
BLUE
TO
WHITE
COLOR
GRADIENT
TO
CODE
THE
RESULT
A
SUN
SURFACE
SHADER
THAT
USES
THE
ABSOLUTE
VALUE
FUNCTION
TO
INTRODUCE
DISCON
TINUITIES
TURBULENCE
A
GRANITE
SHADER
THAT
USES
A
SINGLE
HIGH
FREQUENCY
NOISE
VALUE
TO
MODULATE
BETWEEN
WHITE
AND
BLACK
A
MARBLE
SHADER
THAT
USES
NOISE
TO
MODULATE
A
SINE
FUNCTION
TO
PRODUCE
ALTERNATING
VEINS
OF
COLOR
INC
TURBULENCE
WE
CAN
OBTAIN
SOME
ADDITIONAL
INTERESTING
EFFECTS
BY
TAKING
THE
ABSOLUTE
VALUE
OF
THE
NOISE
FUNCTION
THIS
TECHNIQUE
INTRODUCES
A
DISCONTINUITY
OF
THE
DERIVATIVE
BECAUSE
THE
FUNCTION
FOLDS
ON
ITSELF
WHEN
IT
REACHES
WHEN
THIS
FOLDING
IS
DONE
TO
NOISE
FUNCTIONS
AT
SEVERAL
FREQUENCIES
AND
THE
RESULTS
ARE
SUMMED
THE
RESULT
IS
CUSPS
OR
CREASES
IN
THE
TEXTURE
AT
VARIOUS
SCALES
PERLIN
STARTED
REFERRING
TO
THIS
TYPE
OF
NOISE
AS
TURBULENCE
BECAUSE
IT
IS
REMINISCENT
OF
TURBULENT
FLOW
IT
SHOWS
UP
IN
A
VARIETY
OF
PLACES
IN
NATURE
NOISE
SO
THIS
TYPE
OF
NOISE
CAN
BE
USED
TO
SIMULATE
VARIOUS
THINGS
LIKE
FLAMES
OR
LAVA
THE
TWO
DIMENSIONAL
APPEARANCE
OF
THIS
TYPE
OF
NOISE
IS
SHOWN
IN
FIGURE
FIGURE
28
ABSOLUTE
VALUE
NOISE
OR
TURBULENCE
SUN
SURFACE
SHADER
WE
CAN
ACHIEVE
AN
EFFECT
THAT
LOOKS
LIKE
A
PIT
OF
HOT
MOLTEN
LAVA
OR
THE
SURFACE
OF
THE
SUN
BY
USING
THE
SAME
VERTEX
SHADER
AS
THE
CLOUD
SHADER
AND
A
SLIGHTLY
DIFFERENT
FRAGMENT
SHADER
THE
MAIN
DIFFERENCE
IS
THAT
WE
SCALE
EACH
NOISE
VALUE
AND
SHIFT
IT
OVER
SO
THAT
IT
IS
CENTERED
AT
THEN
WE
TAKE
ITS
ABSOLUTE
VALUE
AFTER
SUMMING
THE
VALUES
WE
SCALE
THE
RESULT
AGAIN
TO
OCCUPY
NEARLY
THE
FULL
RANGE
OF
WE
CLAMP
THIS
VALUE
AND
USE
IT
TO
MIX
BETWEEN
YELLOW
AND
RED
TO
GET
THE
RESULT
SHOWN
IN
FIGURE
SEE
EXAMPLE
THIS
TECHNIQUE
CAN
BE
EXTENDED
TO
CHANGE
THE
RESULTS
OVER
TIME
USING
ANOTHER
DIMENSION
OF
NOISE
FOR
TIME
RESULTING
IN
ANIMATION
OF
THE
EFFECT
CHAPTER
PROCEDURAL
TEXTURING
EXAMPLE
SUN
SURFACE
FRAGMENT
SHADER
VERSION
CORE
IN
FLOAT
LIGHTINTENSITY
IN
MCPOSITION
UNIFORM
NOISE
UNIFORM
7
UNIFORM
UNIFORM
FLOAT
NOISESCALE
OUT
FRAGCOLOR
VOID
MAIN
NOISEVEC
TEXTURE
NOISE
MCPOSITION
NOISESCALE
FLOAT
INTENSITY
ABS
NOISEVEC
ABS
NOISEVEC
ABS
NOISEVEC
ABS
NOISEVEC
INTENSITY
CLAMP
INTENSITY
COLOR
MIX
INTENSITY
LIGHTINTENSITY
FRAGCOLOR
COLOR
MARBLE
YET
ANOTHER
VARIATION
ON
THE
NOISE
FUNCTION
IS
TO
USE
IT
AS
PART
OF
A
PERIO
DIC
FUNCTION
SUCH
AS
SINE
BY
ADDING
NOISE
TO
THE
INPUT
VALUE
FOR
THE
SINE
FUNCTION
WE
GET
A
NOISY
OSCILLATING
FUNCTION
WE
USE
THIS
TO
CREATE
A
LOOK
SIMILAR
TO
THE
ALTERNATING
COLOR
VEINS
OF
SOME
TYPES
OF
MARBLE
EXAMPLE
SHOWS
THE
FRAGMENT
SHADER
TO
DO
IT
AGAIN
WE
USE
THE
SAME
VERTEX
SHADER
RESULTS
OF
THIS
SHADER
ARE
ALSO
SHOWN
IN
FIGURE
EXAMPLE
FRAGMENT
SHADER
FOR
MARBLE
VERSION
CORE
UNIFORM
NOISE
UNIFORM
MARBLECOLOR
UNIFORM
VEINCOLOR
IN
FLOAT
LIGHTINTENSITY
IN
MCPOSITION
OUT
FRAGCOLOR
NOISE
VOID
MAIN
NOISEVEC
TEXTURE
NOISE
MCPOSITION
FLOAT
INTENSITY
ABS
NOISEVEC
ABS
NOISEVEC
ABS
NOISEVEC
ABS
NOISEVEC
FLOAT
SINEVAL
SIN
MCPOSITION
Y
INTENSITY
COLOR
MIX
VEINCOLOR
MARBLECOLOR
SINEVAL
LIGHTINTENSITY
FRAGCOLOR
COLOR
GRANITE
WITH
NOISE
IT
ALSO
EASY
JUST
TO
TRY
TO
MAKE
STUFF
UP
IN
THIS
EXAMPLE
WE
WANT
TO
SIMULATE
A
GRAYISH
ROCKY
MATERIAL
WITH
SMALL
BLACK
SPECKS
TO
GENERATE
A
RELATIVELY
HIGH
FREQUENCY
NOISE
TEXTURE
WE
USE
ONLY
THE
FOURTH
COMPONENT
THE
HIGHEST
FREQUENCY
ONE
WE
SCALE
IT
BY
AN
ARBITRARY
AMOUNT
TO
PROVIDE
AN
APPROPRIATE
INTENSITY
LEVEL
AND
THEN
USE
THIS
VALUE
FOR
EACH
OF
THE
RED
GREEN
AND
BLUE
COMPONENTS
THE
SHADER
IN
EXAMPLE
GENERATES
AN
APPEARANCE
SIMILAR
TO
GRANITE
AS
SHOWN
IN
FIGURE
EXAMPLE
GRANITE
FRAGMENT
SHADER
VERSION
CORE
UNIFORM
NOISE
UNIFORM
FLOAT
NOISESCALE
IN
FLOAT
LIGHTINTENSITY
IN
MCPOSITION
OUT
FRAGCOLOR
VOID
MAIN
NOISEVEC
TEXTURE
NOISE
NOISESCALE
MCPOSITION
FLOAT
INTENSITY
MIN
NOISEVEC
COLOR
INTENSITY
LIGHTINTENSITY
FRAGCOLOR
COLOR
WOOD
WE
CAN
DO
A
FAIR
APPROXIMATION
OF
WOOD
WITH
THIS
APPROACH
AS
WELL
IN
ADVANCED
RENDERMAN
ANTHONY
A
APODACA
AND
LARRY
GRITZ
DESCRIBE
A
CHAPTER
PROCEDURAL
TEXTURING
MODEL
FOR
SIMULATING
THE
APPEARANCE
OF
WOOD
WE
CAN
ADAPT
THEIR
APPROACH
TO
CREATE
WOOD
SHADERS
IN
GLSL
FOLLOWING
ARE
THE
BASIC
IDEAS
BEHIND
THE
WOOD
FRAGMENT
SHADER
SHOWN
IN
EXAMPLE
WOOD
IS
COMPOSED
OF
LIGHT
AND
DARK
AREAS
ALTERNATING
IN
CONCENTRIC
CYLINDERS
SURROUNDING
A
CENTRAL
AXIS
NOISE
IS
ADDED
TO
WARP
THE
CYLINDERS
TO
CREATE
A
MORE
NATURAL
LOOKING
PATTERN
THE
CENTER
OF
THE
TREE
IS
TAKEN
TO
BE
THE
Y
AXIS
THROUGHOUT
THE
WOOD
A
HIGH
FREQUENCY
GRAIN
PATTERN
GIVES
THE
APPEARANCE
OF
WOOD
THAT
HAS
BEEN
SAWED
EXPOSING
THE
OPEN
GRAIN
NATURE
OF
THE
WOOD
THE
WOOD
SHADER
USES
THE
SAME
VERTEX
SHADER
AS
THE
OTHER
NOISE
BASED
SHADERS
DISCUSSED
IN
THIS
SECTION
APPLICATION
SETUP
THE
WOOD
SHADERS
DON
T
REQUIRE
TOO
MUCH
FROM
THE
APPLICATION
THE
APPLICATION
IS
EXPECTED
TO
PASS
IN
A
VERTEX
POSITION
AND
A
NORMAL
PER
VERTEX
USING
THE
USUAL
OPENGL
ENTRY
POINTS
IN
ADDITION
THE
VERTEX
SHADER
TAKES
A
LIGHT
POSITION
AND
A
SCALE
FACTOR
THAT
ARE
PASSED
IN
AS
UNIFORM
VARIABLES
THE
FRAGMENT
SHADER
TAKES
A
NUMBER
OF
UNIFORM
VARIABLES
THAT
PARAMETERIZE
THE
APPEARANCE
OF
THE
WOOD
THE
UNIFORM
VARIABLES
NEEDED
FOR
THE
WOOD
SHADERS
ARE
INITIALIZED
AS
FOLLOWS
LIGHTPOS
SCALE
LIGHTWOOD
DARKWOOD
07
RINGFREQ
LIGHTGRAINS
DARKGRAINS
GRAINTHRESHOLD
NOISESCALE
NOISINESS
GRAINSCALE
FRAGMENT
SHADER
EXAMPLE
SHOWS
THE
FRAGMENT
SHADER
FOR
PROCEDURALLY
GENERATED
WOOD
NOISE
EXAMPLE
FRAGMENT
SHADER
FOR
WOOD
VERSION
CORE
UNIFORM
NOISE
UNIFORM
LIGHTWOOD
UNIFORM
DARKWOOD
UNIFORM
FLOAT
RINGFREQ
UNIFORM
FLOAT
LIGHTGRAINS
UNIFORM
FLOAT
DARKGRAINS
UNIFORM
FLOAT
GRAINTHRESHOLD
UNIFORM
NOISESCALE
UNIFORM
FLOAT
NOISINESS
UNIFORM
FLOAT
GRAINSCALE
IN
FLOAT
LIGHTINTENSITY
IN
MCPOSITION
OUT
FRAGCOLOR
VOID
MAIN
NOISEVEC
TEXTURE
NOISE
MCPOSITION
NOISESCALE
NOISINESS
LOCATION
MCPOSITION
NOISEVEC
FLOAT
DIST
SQRT
LOCATION
X
LOCATION
X
LOCATION
Z
LOCATION
Z
DIST
RINGFREQ
FLOAT
R
FRACT
DIST
NOISEVEC
NOISEVEC
NOISEVEC
IF
R
R
R
COLOR
MIX
LIGHTWOOD
DARKWOOD
R
R
FRACT
MCPOSITION
X
MCPOSITION
Z
GRAINSCALE
NOISEVEC
R
IF
R
GRAINTHRESHOLD
COLOR
LIGHTWOOD
LIGHTGRAINS
NOISEVEC
ELSE
COLOR
LIGHTWOOD
DARKGRAINS
NOISEVEC
COLOR
LIGHTINTENSITY
FRAGCOLOR
COLOR
AS
YOU
CAN
SEE
WE
VE
PARAMETERIZED
QUITE
A
BIT
OF
THIS
SHADER
THROUGH
THE
USE
OF
UNIFORM
VARIABLES
TO
MAKE
IT
EASY
TO
MANIPULATE
THROUGH
THE
APPLICATION
USER
INTERFACE
AS
IN
MANY
PROCEDURAL
SHADERS
THE
OBJECT
POSITION
IS
THE
BASIS
FOR
COMPUTING
THE
PROCEDURAL
TEXTURE
IN
THIS
CASE
THE
OBJECT
POSITION
IS
MULTIPLIED
BY
NOISESCALE
A
THAT
ALLOWS
US
TO
SCALE
THE
NOISE
INDEPENDENTLY
IN
THE
X
Y
AND
Z
DIRECTIONS
AND
THE
COMPUTED
VALUE
IS
USED
AS
THE
INDEX
INTO
OUR
NOISE
TEXTURE
THE
NOISE
VALUES
OBTAINED
FROM
THE
TEXTURE
ARE
SCALED
BY
THE
VALUE
NOISINESS
WHICH
ALLOWS
US
TO
INCREASE
OR
DECREASE
THE
CONTRIBUTION
OF
THE
NOISE
CHAPTER
PROCEDURAL
TEXTURING
OUR
TREE
IS
ASSUMED
TO
BE
A
SERIES
OF
CONCENTRIC
RINGS
OF
ALTERNATING
LIGHT
WOOD
AND
DARK
WOOD
TO
GIVE
SOME
INTEREST
TO
OUR
GRAIN
PATTERN
WE
ADD
THE
NOISE
VECTOR
TO
OUR
OBJECT
POSITION
THIS
HAS
THE
EFFECT
OF
ADDING
OUR
LOW
FREQUENCY
FIRST
OCTAVE
NOISE
TO
THE
X
COORDINATE
OF
THE
POSITION
AND
THE
THIRD
OCTAVE
NOISE
TO
THE
Z
COORDINATE
THE
Y
COORDINATE
WON
T
BE
USED
THE
RESULT
IS
RINGS
THAT
ARE
STILL
RELATIVELY
CIRCULAR
BUT
HAVE
SOME
VARIATION
IN
WIDTH
AND
DISTANCE
FROM
THE
CENTER
OF
THE
TREE
TO
COMPUTE
WHERE
WE
ARE
IN
RELATION
TO
THE
CENTER
OF
THE
TREE
WE
SQUARE
THE
X
AND
Z
COMPONENTS
AND
TAKE
THE
SQUARE
ROOT
OF
THE
RESULT
THIS
GIVES
US
THE
DISTANCE
FROM
THE
CENTER
OF
THE
TREE
THE
DISTANCE
IS
MULTIPLIED
BY
RINGFREQ
A
SCALE
FACTOR
THAT
GIVES
THE
WOOD
PATTERN
MORE
RINGS
OR
FEWER
RINGS
FOLLOWING
THIS
WE
ATTEMPT
TO
CREATE
A
FUNCTION
THAT
GOES
FROM
UP
TO
AND
THEN
BACK
DOWN
TO
WE
ADD
THREE
OCTAVES
OF
NOISE
TO
THE
DISTANCE
VALUE
TO
GIVE
MORE
INTEREST
TO
THE
WOOD
GRAIN
PATTERN
WE
COULD
COMPUTE
DIFFERENT
NOISE
VALUES
HERE
BUT
THE
ONES
WE
VE
ALREADY
OBTAINED
WILL
DO
JUST
FINE
TAKING
THE
FRACTIONAL
PART
OF
THE
RESULTING
VALUE
GIVES
US
A
FUNCTION
IN
THE
RANGE
MULTIPLYING
THIS
VALUE
BY
GIVES
US
A
FUNCTION
IN
THE
RANGE
AND
FINALLY
BY
SUBTRACTING
FROM
VALUES
THAT
ARE
GREATER
THAN
WE
GET
OUR
DESIRED
FUNCTION
THAT
VARIES
FROM
TO
AND
BACK
TO
WE
USE
THIS
TRIANGLE
FUNCTION
TO
COMPUTE
THE
BASIC
COLOR
FOR
THE
FRAGMENT
USING
THE
BUILT
IN
MIX
FUNCTION
THE
MIX
FUNCTION
LINEARLY
BLENDS
LIGHTWOOD
AND
DARKWOOD
ACCORDING
TO
OUR
COMPUTED
VALUE
R
AT
THIS
POINT
WE
WOULD
HAVE
A
PRETTY
NICE
RESULT
FOR
OUR
WOOD
FUNCTION
BUT
WE
ATTEMPT
TO
MAKE
IT
A
LITTLE
BETTER
BY
ADDING
A
SUBTLE
EFFECT
TO
SIMULATE
THE
LOOK
OF
OPEN
GRAIN
WOOD
THAT
HAS
BEEN
SAWED
YOU
MAY
NOT
BE
ABLE
TO
SEE
THIS
EFFECT
ON
THE
OBJECT
SHOWN
IN
FIGURE
OUR
DESIRE
IS
TO
PRODUCE
STREAKS
THAT
ARE
ROUGHLY
PARALLEL
TO
THE
Y
AXIS
SO
WE
ADD
THE
X
AND
Z
COORDINATES
MULTIPLY
BY
THE
GRAINSCALE
FACTOR
ANOTHER
UNIFORM
VARIABLE
THAT
WE
CAN
ADJUST
TO
CHANGE
THE
FREQUENCY
OF
THIS
EFFECT
ADD
AND
TAKE
THE
FRACTIONAL
PART
OF
THE
RESULT
AGAIN
THIS
GIVES
US
A
FUNCTION
THAT
VARIES
FROM
BUT
FOR
THE
DEFAULT
VALUES
FOR
GRAINSCALE
AND
RINGFREQ
THIS
FUNCTION
FOR
R
GOES
FROM
TO
MUCH
MORE
OFTEN
THAN
OUR
PREVIOUS
FUNCTION
FOR
R
WE
COULD
JUST
MAKE
OUR
GRAINS
GO
LINEARLY
FROM
LIGHT
TO
DARK
BUT
WE
TRY
SOMETHING
A
LITTLE
MORE
SUBTLE
WE
MULTIPLY
THE
VALUE
OF
R
BY
OUR
THIRD
OCTAVE
NOISE
VALUE
TO
PRODUCE
A
VALUE
THAT
INCREASES
NONLINEARLY
FINALLY
WE
COMPARE
OUR
VALUE
OF
R
TO
THE
GRAINTHRESHOLD
VALUE
THE
DEFAULT
IS
IF
THE
VALUE
OF
R
IS
LESS
THAN
GRAINTHRESHOLD
WE
MODIFY
OUR
CURRENT
NOISE
FIGURE
A
BUST
OF
BEETHOVEN
RENDERED
WITH
THE
WOOD
SHADER
INC
COLOR
BY
ADDING
TO
IT
A
VALUE
WE
COMPUTED
BY
MULTIPLYING
THE
LIGHTWOOD
COLOR
THE
LIGHTGRAINS
COLOR
AND
OUR
MODIFIED
NOISE
VALUE
CONVERSELY
IF
THE
VALUE
OF
R
IS
GREATER
THAN
GRAINTHRESHOLD
WE
MODIFY
OUR
CURRENT
COLOR
BY
SUBTRACTING
FROM
IT
A
VALUE
WE
COMPUTED
BY
MULTIPLYING
THE
DARKWOOD
COLOR
THE
DARKGRAINS
COLOR
AND
OUR
MODIFIED
NOISE
VALUE
BY
DEFAULT
THE
VALUE
OF
LIGHTGRAINS
IS
AND
THE
VALUE
OF
DARKGRAINS
IS
SO
WE
DON
T
ACTUALLY
SEE
ANY
CHANGE
IF
R
IS
GREATER
THAN
GRAINTHRESHOLD
YOU
CAN
PLAY
AROUND
WITH
THIS
EFFECT
AND
SEE
IF
IT
REALLY
DOES
HELP
THE
APPEARANCE
IT
SEEMED
TO
ME
THAT
IT
ADDED
TO
THE
EFFECT
OF
THE
WOOD
TEXTURE
FOR
THE
DEFAULT
SETTINGS
I
VE
CHOSEN
BUT
THERE
PROBABLY
IS
A
WAY
TO
ACHIEVE
A
BETTER
EFFECT
MORE
SIMPLY
WITH
OUR
FINAL
COLOR
COMPUTED
ALL
THAT
REMAINS
IS
TO
MULTIPLY
THE
COLOR
BY
THE
INTERPOLATED
DIFFUSE
LIGHTING
FACTOR
AND
ADD
AN
ALPHA
VALUE
OF
TO
PRODUCE
OUR
FINAL
FRAGMENT
VALUE
THE
RESULTS
OF
OUR
SHADER
ARE
APPLIED
TO
A
BUST
OF
BEETHOVEN
IN
FIGURE
CHAPTER
PROCEDURAL
TEXTURING
NOISE
SUMMARY
THIS
SECTION
INTRODUCED
NOISE
AN
INCREDIBLY
USEFUL
FUNCTION
FOR
ADDING
IRREGULARITY
TO
PROCEDURAL
SHADERS
AFTER
A
BRIEF
DESCRIPTION
OF
THE
MATHEMATICAL
DEFINITION
OF
THIS
FUNCTION
WE
USED
IT
AS
THE
BASIS
FOR
SHADERS
THAT
SIMULATED
CLOUDS
TURBULENT
FLOW
MARBLE
GRANITE
AND
WOOD
THERE
IS
A
NOISE
FUNCTION
AVAILABLE
AS
A
BUILT
IN
FUNCTION
IN
SOME
IMPLEMENTATIONS
OF
GLSL
PORTABLE
NOISE
FUNCTIONS
CAN
BE
CREATED
WITH
USER
DEFINED
SHADER
FUNCTIONS
OR
TEXTURES
HOWEVER
IT
IS
IMPLEMENTED
NOISE
CAN
INCREASE
THE
APPARENT
REALISM
OF
AN
IMAGE
OR
AN
ANIMATION
BY
ADDING
IMPERFECTIONS
COMPLEXITY
AND
AN
ELEMENT
OF
APPARENT
RANDOMNESS
FURTHER
INFORMATION
THE
BOOK
TEXTURING
AND
MODELING
A
PROCEDURAL
APPROACH
THIRD
EDITION
BY
DAVID
S
EBERT
ET
AL
IS
ENTIRELY
DEVOTED
TO
CREATING
IMAGES
PROCEDURALLY
THIS
BOOK
CONTAINS
A
WEALTH
OF
INFORMATION
AND
INSPIRES
A
TON
OF
IDEAS
FOR
THE
CREATION
AND
USE
OF
PROCEDURAL
MODELS
AND
TEXTURES
IT
CONTAINS
SEVERAL
SIGNIFICANT
DISCUSSIONS
OF
NOISE
INCLUDING
A
DESCRIPTION
BY
PERLIN
OF
HIS
ORIGINAL
NOISE
FUNCTION
DARWYN
PEACHEY
ALSO
PROVIDES
A
TAXONOMY
OF
NOISE
FUNCTIONS
CALLED
MAKING
NOISES
THE
APPLICATION
OF
DIFFERENT
NOISE
FUNCTIONS
AND
COMBINATIONS
OF
NOISE
FUNCTIONS
ARE
DISCUSSED
BY
KEN
MUSGRAVE
IN
HIS
SECTION
ON
BUILDING
PROCEDURAL
PLANETS
THE
SHADERS
WRITTEN
IN
THE
RENDERMAN
SHADING
LANGUAGE
ARE
OFTEN
PROCEDURAL
IN
NATURE
AND
THE
RENDERMAN
COMPANION
BY
STEVE
UPSTILL
AND
ADVANCED
RENDERMAN
CREATING
CGI
FOR
MOTION
PICTURES
BY
ANTHONY
A
APODACA
AND
LARRY
GRITZ
CONTAIN
SOME
NOTABLE
EXAMPLES
BUMP
MAPPING
WAS
INVENTED
BY
JIM
BLINN
AND
DESCRIBED
IN
HIS
SIGGRAPH
PAPER
SIMULATION
OF
WRINKLED
SURFACES
A
VERY
GOOD
OVERVIEW
OF
BUMP
MAPPING
TECHNIQUES
CAN
BE
FOUND
IN
A
PAPER
TITLED
A
PRACTICAL
AND
ROBUST
BUMP
MAPPING
TECHNIQUE
FOR
TODAY
GPUS
BY
MARK
KILGARD
A
PHOTOSHOP
PLUG
IN
FOR
CREATING
A
NORMAL
MAP
FROM
AN
IMAGE
IS
AVAILABLE
AT
NVIDIA
DEVELOPER
WEB
SITE
HTTP
DEVELOPER
NVIDIA
COM
MOST
SIGNAL
PROCESSING
AND
IMAGE
PROCESSING
BOOKS
CONTAIN
A
DISCUSSION
OF
THE
CONCEPTS
OF
SAMPLING
RECONSTRUCTION
AND
ALIASING
BOOKS
BY
GLASSNER
WOLBERG
AND
GONZALEZ
AND
WOODS
CAN
BE
CONSULTED
FOR
ADDITIONAL
INFORMATION
ON
THESE
TOPICS
TECHNICAL
MEMOS
BY
ALVY
RAY
SMITH
ADDRESS
THE
ISSUES
OF
ALIASING
IN
COMPUTER
GRAPHICS
DIRECTLY
THE
BOOK
ADVANCED
RENDERMAN
CREATING
CGI
FOR
MOTION
PICTURES
BY
ANTHONY
A
APODACA
AND
LARRY
GRITZ
CONTAINS
A
CHAPTER
THAT
DESCRIBES
FURTHER
INFORMATION
SHADER
ANTIALIASING
IN
TERMS
OF
THE
RENDERMAN
SHADING
LANGUAGE
AND
MUCH
OF
THE
DISCUSSION
IS
GERMANE
TO
THE
OPENGL
SHADING
LANGUAGE
AS
WELL
DARWYN
PEACHEY
HAS
A
SIMILAR
DISCUSSION
IN
TEXTURING
MODELING
A
PROCEDURAL
APPROACH
THIRD
EDITION
BY
DAVID
EBERT
ET
AL
BERT
FREUDENBERG
DEVELOPED
A
GLSL
SHADER
TO
DO
ADAPTIVE
ANTIALIASING
AND
PRESENTED
THIS
WORK
AT
THE
SIGGRAPH
IN
SAN
ANTONIO
TEXAS
THIS
SUBJECT
IS
ALSO
COVERED
IN
HIS
PH
D
THESIS
REAL
TIME
STROKE
BASED
HALFTONING
KEN
PERLIN
HAS
A
TUTORIAL
AND
HISTORY
OF
THE
NOISE
FUNCTION
AS
WELL
AS
A
REFERENCE
IMPLEMENTATION
IN
THE
JAVA
PROGRAMMING
LANGUAGE
AT
HIS
WEB
SITE
A
LOT
OF
OTHER
INTERESTING
THINGS
ARE
AVAILABLE
ON
KEN
HOME
PAGE
AT
NYU
HTTP
MRL
NYU
EDU
P
ERLIN
HIS
PAPER
AN
IMAGE
SYNTHESIZER
APPEARED
IN
THE
SIGGRAPH
PROCEEDINGS
AND
HIS
IMPROVEMENTS
TO
THE
ORIGINAL
ALGORITHM
WERE
PUBLISHED
IN
THE
PAPER
IMPROVING
NOISE
AS
PART
OF
SIGGRAPH
HE
ALSO
DESCRIBED
A
CLEVER
METHOD
FOR
COMBINING
TWO
SMALL
TEXTURES
TO
GET
A
LARGE
PERLIN
LIKE
NOISE
FUNCTION
IN
THE
ARTICLE
IMPLEMENTING
IMPROVED
PERLIN
NOISE
IN
THE
BOOK
GPU
GEMS
CHAPTER
PROCEDURAL
TEXTURING
CHAPTER
TESSELLATION
SHADERS
CHAPTER
OBJECTIVES
AFTER
READING
THIS
CHAPTER
YOU
LL
BE
ABLE
TO
DO
THE
FOLLOWING
UNDERSTAND
THE
DIFFERENCES
BETWEEN
TESSELLATION
SHADERS
AND
VERTEX
SHADERS
IDENTIFY
THE
PHASES
OF
PROCESSING
THAT
OCCUR
WHEN
USING
TESSELLATION
SHADERS
RECOGNIZE
THE
VARIOUS
TESSELLATION
DOMAINS
AND
KNOW
WHICH
ONE
BEST
MATCHES
THE
TYPE
OF
GEOMETRY
YOU
NEED
TO
GENERATE
INITIALIZE
DATA
AND
DRAW
USING
THE
PATCH
GEOMETRIC
PRIMITIVE
THIS
CHAPTER
INTRODUCES
OPENGL
TESSELLATION
SHADER
STAGES
IT
HAS
THE
FOLLOWING
MAJOR
SECTIONS
TESSELLATION
SHADERS
PROVIDES
AN
OVERVIEW
OF
HOW
TESSELLATION
SHADERS
WORK
IN
OPENGL
TESSELLATION
PATCHES
INTRODUCES
TESSELLATION
RENDERING
PRIMITIVE
THE
PATCH
TESSELLATION
CONTROL
SHADERS
EXPLAINS
THE
OPERATION
AND
PURPOSE
OF
THE
FIRST
TESSELLATION
SHADING
TESSELLATION
EVALUATION
SHADERS
DESCRIBES
THE
SECOND
TESSELLATION
STAGE
AND
HOW
IT
OPERATES
A
TESSELLATION
EXAMPLE
THE
TEAPOT
SHOWS
AN
EXAMPLE
OF
RENDERING
A
TEAPOT
USING
TESSELLATION
SHADERS
AND
BÉZIER
PATCHES
ADDITIONAL
TESSELLATION
TECHNIQUES
DISCUSSES
SOME
ADDITIONAL
TECHNIQUES
THAT
ARE
ENABLED
BY
TESSELLATION
SHADING
TESSELLATION
SHADERS
UP
TO
THIS
POINT
ONLY
VERTEX
SHADERS
HAVE
BEEN
AVAILABLE
FOR
US
TO
MANIPULATE
GEOMETRIC
PRIMITIVES
WHILE
THERE
ARE
NUMEROUS
GRAPHICS
TECHNIQUES
YOU
CAN
DO
USING
VERTEX
SHADERS
THEY
DO
HAVE
THEIR
LIMITATIONS
ONE
LIMITATION
IS
THAT
THEY
CAN
T
CREATE
ADDITIONAL
GEOMETRY
DURING
THEIR
EXECUTION
THEY
REALLY
ONLY
UPDATE
THE
DATA
ASSOCIATED
WITH
THE
CURRENT
VERTEX
THEY
ARE
PROCESSING
AND
THEY
CAN
T
EVEN
ACCESS
THE
DATA
OF
OTHER
VERTICES
IN
THE
PRIMITIVES
TO
ADDRESS
THOSE
ISSUES
THE
OPENGL
PIPELINE
CONTAINS
SEVERAL
OTHER
SHADER
STAGES
THAT
ADDRESS
THOSE
LIMITATIONS
IN
THIS
CHAPTER
WE
INTRODUCE
TESSELLATION
SHADERS
WHICH
FOR
EXAMPLE
CAN
GENERATE
A
MESH
OF
TRIANGLES
USING
A
NEW
GEOMETRIC
PRIMITIVE
TYPE
CALLED
A
PATCH
TESSELLATION
SHADING
ADDS
TWO
SHADING
STAGES
TO
THE
OPENGL
PIPELINE
TO
GENERATE
A
MESH
OF
GEOMETRIC
PRIMITIVES
AS
COMPARED
TO
HAVING
TO
SPECIFY
ALL
OF
THE
LINES
OR
TRIANGLES
TO
FORM
YOUR
MODEL
AS
YOU
DO
WITH
VERTEX
SHADING
WITH
TESSELLATION
YOU
BEGIN
BY
SPECIFYING
A
PATCH
WHICH
IS
JUST
AN
ORDERED
LIST
OF
VERTICES
WHEN
A
PATCH
IS
RENDERED
THE
TESSELLATION
CONTROL
SHADERS
EXECUTES
FIRST
OPERATING
ON
YOUR
PATCH
VERTICES
AND
SPECIFYING
HOW
MUCH
GEOMETRY
SHOULD
BE
GENERATED
FROM
YOUR
PATCH
TESSELLATION
CONTROL
SHADERS
ARE
OPTIONAL
AND
WE
LL
SEE
WHAT
REQUIRED
IF
YOU
DON
T
USE
ONE
AFTER
THE
TESSELLATION
CONTROL
SHADER
COMPLETES
THE
SECOND
SHADER
THE
TESSELLATION
EVALUATION
SHADERS
POSITIONS
THE
VERTICES
OF
THE
GENERATED
MESH
CHAPTER
TESSELLATION
SHADERS
USING
TESSELLATION
COORDINATESS
AND
SENDS
THEM
TO
THE
RASTERIZER
OR
FOR
MORE
PROCESSING
BY
A
GEOMETRY
SHADER
WHICH
WE
DESCRIBE
IN
CHAPTER
GEOMETRY
SHADERS
AS
WE
DESCRIBE
OPENGL
PROCESS
OF
TESSELLATION
WE
LL
START
AT
THE
BEGINNING
WITH
DESCRIBING
PATCHES
IN
TESSELLATION
PATCHES
ON
PAGE
THEN
MOVE
TO
DESCRIBE
THE
TESSELLATION
CONTROL
SHADER
OPERATION
DETAIL
IN
TESSELLATION
CONTROL
SHADERS
ON
PAGE
OPENGL
PASSES
THE
OUTPUT
OF
THE
TESSELLATION
CONTROL
SHADER
TO
THE
PRIMITIVE
GENERATOR
WHICH
GENERATES
THE
MESH
OF
GEOMETRIC
PRIMITIVES
AND
TESSELLATION
COORDINATES
THAT
THE
TESSELLATION
EVALUATION
SHADER
STAGE
USES
FINALLY
THE
TESSELLATION
EVALUATION
SHADER
POSITIONS
EACH
OF
THE
VERTICES
IN
THE
FINAL
MESH
A
PROCESS
DESCRIBED
IN
TESSELLATION
EVALUATION
SHADERS
ON
PAGE
WE
CONCLUDE
THE
CHAPTER
WITH
A
FEW
EXAMPLES
INCLUDING
A
DEMONSTRATION
OF
DISPLACEMENT
MAPPING
WHICH
COMBINES
TEXTURE
MAPPING
FOR
VERTICES
WHICH
IS
DISCUSSED
IN
CHAPTER
TEXTURES
WITH
TESSELLATION
SHADERS
TESSELLATION
PATCHES
THE
TESSELLATION
PROCESS
DOESN
T
OPERATE
ON
OPENGL
CLASSIC
GEOMETRIC
PRIMITIVES
POINTS
LINES
AND
TRIANGLES
BUT
USES
A
NEW
PRIMITIVE
ADDED
IN
OPENGL
VERSION
CALLED
A
PATCH
PATCHES
ARE
PROCESSED
BY
ALL
OF
ACTIVE
SHADING
STAGES
IN
THE
PIPELINE
BY
COMPARISON
OTHER
PRIMITIVE
TYPES
ARE
ONLY
PROCESSED
BY
VERTEX
FRAGMENT
AND
GEOMETRY
SHADERS
AND
BYPASS
THE
TESSELLATION
STAGE
IN
FACT
IF
ANY
TESSELLATION
SHADERS
ARE
ACTIVE
PASSING
ANY
OTHER
TYPE
OF
GEOMETRY
WILL
GENERATE
A
ERROR
CONVERSELY
YOU
LL
GET
A
ERROR
IF
YOU
TRY
TO
RENDER
A
PATCH
WITHOUT
ANY
TESSELLATION
SHADERS
SPECIFICALLY
A
TESSELLATION
EVALUATION
SHADER
WE
LL
SEE
THAT
TESSELLATION
CONTROL
SHADERS
ARE
OPTIONAL
BOUND
PATCHES
ARE
NOTHING
MORE
THAN
A
LIST
OF
VERTICES
THAT
YOU
PASS
INTO
OPENGL
WHICH
PRESERVES
THEIR
ORDER
DURING
PROCESSING
WHEN
RENDERING
WITH
TESSELLATION
AND
PATCHES
YOU
USE
OPENGL
RENDERING
COMMANDS
LIKE
GLDRAWARRAYS
AND
SPECIFY
THE
TOTAL
NUMBER
OF
VERTICES
TO
BE
READ
FROM
THE
BOUND
VERTEX
BUFFER
OBJECTS
AND
PROCESSED
FOR
THAT
DRAW
CALL
WHEN
YOU
RE
RENDERING
WITH
THE
OTHER
OPENGL
PRIMITIVES
OPENGL
IMPLICITLY
KNOWS
HOW
MANY
VERTICES
TO
USE
BASED
ON
THE
PRIMITIVE
TYPE
YOU
SPECIFIED
IN
YOUR
DRAW
CALL
LIKE
USING
THREE
VERTICES
TO
MAKE
A
TRIANGLE
HOWEVER
WHEN
YOU
USE
A
PATCH
OPENGL
NEEDS
TO
BE
TOLD
HOW
MANY
VERTICES
FROM
YOUR
VERTEX
ARRAY
TO
USE
TO
MAKE
ONE
PATCH
WHICH
YOU
SPECIFY
USING
GLPATCHPARAMETERI
PATCHES
PROCESSED
BY
THE
SAME
DRAW
CALL
WILL
ALL
BE
THE
SAME
SIZE
TESSELLATION
PATCHES
TO
SPECIFY
A
PATCH
USE
THE
INPUT
TYPE
INTO
ANY
OPENGL
DRAWING
COMMAND
EXAMPLE
DEMONSTRATES
ISSUING
TWO
PATCHES
EACH
WITH
FOUR
VERTICES
EXAMPLE
SPECIFYING
TESSELLATION
PATCHES
GLFLOAT
VERTICES
75
25
25
25
GLBINDVERTEXARRAY
VAO
GLBINDBUFFER
VBO
GLBUFFERDATA
SIZEOF
VERTICES
VERTICES
GLVERTEXATTRIBPOINTER
VPOS
GLPATCHPARAMETERI
GLDRAWARRAYS
THE
VERTICES
OF
EACH
PATCH
ARE
FIRST
PROCESSED
BY
THE
CURRENTLY
BOUND
VERTEX
SHADER
AND
THEN
USED
TO
INITIALIZE
THE
ARRAY
WHICH
IS
IMPLICITLY
DECLARED
IN
THE
TESSELLATION
CONTROL
SHADER
THE
NUMBER
OF
ELEMENTS
IN
IS
THE
SAME
AS
THE
PATCH
SIZE
SPECIFIED
BY
GLPATCHPARAMETERI
INSIDE
OF
A
TESSELLATION
CONTROL
SHADER
THE
VARIABLE
PROVIDES
THE
NUMBER
OF
ELEMENTS
IN
AS
DOES
QUERYING
LENGTH
TESSELLATION
CONTROL
SHADERS
ONCE
YOUR
APPLICATION
ISSUES
A
PATCH
THE
TESSELLATION
CONTROL
SHADER
WILL
BE
CALLED
IF
ONE
IS
BOUND
AND
IS
RESPONSIBLE
FOR
COMPLETING
THE
FOLLOWING
ACTIONS
GENERATE
THE
TESSELLATION
OUTPUT
PATCH
VERTICES
THAT
ARE
PASSED
TO
THE
TESSELLATION
EVALUATION
SHADER
AS
WELL
AS
UPDATE
ANY
PER
VERTEX
OR
PER
PATCH
ATTRIBUTE
VALUES
AS
NECESSARY
CHAPTER
TESSELLATION
SHADERS
SPECIFY
THE
TESSELLATION
LEVEL
FACTORS
THAT
CONTROL
THE
OPERATION
OF
THE
PRIMITIVE
GENERATOR
THESE
ARE
SPECIAL
TESSELLATION
CONTROL
SHADER
VARIABLES
CALLED
AND
AND
ARE
IMPLICITLY
DECLARED
IN
YOUR
TESSELLATION
CONTROL
SHADER
WE
LL
DISCUSS
EACH
OF
THESE
ACTIONS
IN
TURN
GENERATING
OUTPUT
PATCH
VERTICES
TESSELLATION
CONTROL
SHADERS
USE
THE
VERTICES
SPECIFIED
BY
THE
APPLICATION
WHICH
WE
LL
CALL
INPUT
PATCH
VERTEXS
TO
GENERATE
A
NEW
SET
OF
VERTICES
THE
OUTPUT
PATCH
VERTICES
WHICH
ARE
STORED
IN
THE
ARRAY
OF
THE
TESSELLA
TION
CONTROL
SHADER
AT
THIS
POINT
YOU
MIGHT
BE
ASKING
WHAT
GOING
ON
WHY
NOT
JUST
PASS
IN
THE
ORIGINAL
SET
OF
VERTICES
FROM
THE
APPLICATION
AND
SKIP
ALL
THIS
WORK
TESSELLATION
CONTROL
SHADERS
CAN
MODIFY
THE
VALUES
PASSED
FROM
THE
APPLICATION
BUT
CAN
ALSO
CREATE
OR
REMOVE
VERTICES
FROM
THE
INPUT
PATCH
VERTICES
WHEN
PRODUCING
THE
OUTPUT
PATCH
VERTICES
YOU
MIGHT
USE
THIS
FUNC
TIONALITY
WHEN
WORKING
WITH
SPRITES
OR
WHEN
MINIMIZING
THE
AMOUNT
OF
DATA
SENT
FROM
THE
APPLICATION
TO
OPENGL
WHICH
MAY
INCREASE
PERFORMANCE
YOU
ALREADY
KNOW
HOW
TO
SET
THE
NUMBER
OF
INPUT
PATCH
VERTICES
USING
GLPATCHPARAMETERI
YOU
SPECIFY
THE
NUMBER
OF
OUTPUT
PATCH
VERTICES
USING
A
LAYOUT
CONSTRUCT
IN
YOUR
TESSELLATION
CONTROL
SHADER
AS
DEMONSTRATED
BELOW
WHICH
SETS
THE
NUMBER
OF
OUTPUT
PATCH
VERTICES
TO
LAYOUT
VERTICES
OUT
THE
VALUE
SET
BY
THE
VERTICES
PARAMETER
IN
THE
LAYOUT
DIRECTIVE
DOES
TWO
THINGS
IT
SETS
THE
SIZE
OF
THE
OUTPUT
PATCH
VERTICES
AND
SPECIFIES
HOW
MANY
TIMES
THE
TESSELLATION
CONTROL
SHADER
WILL
EXECUTE
ONCE
FOR
EACH
OUTPUT
PATCH
VERTEX
IN
ORDER
TO
DETERMINE
WHICH
OUTPUT
VERTEX
IS
BEING
PROCESSED
THE
TESSELLATION
CONTROL
SHADER
CAN
USE
THE
VARIABLE
ITS
VALUE
IS
MOST
OFTEN
USED
AS
AN
INDEX
INTO
THE
ARRAY
WHILE
A
TESSELLATION
CONTROL
SHADER
IS
EXECUTING
IT
HAS
ACCESS
TO
ALL
PATCH
VERTEX
DATA
BOTH
INPUT
AND
OUTPUT
THIS
CAN
LEAD
TO
ISSUES
WHERE
A
SHADER
INVOCATION
MIGHT
NEED
DATA
VALUES
FROM
A
SHADER
INVOCATION
THAT
HASN
T
HAPPENED
YET
TESSELLATION
CONTROL
SHADERS
CAN
USE
THE
GLSL
BARRIER
FUNCTION
WHICH
CAUSES
ALL
OF
THE
CONTROL
SHADERS
FOR
AN
INPUT
PATCH
TO
EXECUTE
AND
WAIT
UNTIL
ALL
OF
THEM
HAVE
REACHED
THAT
POINT
THUS
GUARANTEEING
THAT
ALL
OF
THE
DATA
VALUES
YOU
MIGHT
SET
WILL
BE
COMPUTED
A
COMMON
IDIOM
OF
TESSELLATION
CONTROL
SHADERS
IS
JUST
PASSING
THE
INPUT
PATCH
VERTICES
OUT
OF
THE
SHADER
EXAMPLE
DEMONSTRATES
THIS
FOR
AN
OUTPUT
PATCH
WITH
FOUR
VERTICES
TESSELLATION
CONTROL
SHADERS
EXAMPLE
PASSING
THROUGH
TESSELLATION
CONTROL
SHADER
PATCH
VERTICES
VERSION
CORE
LAYOUT
VERTICES
OUT
VOID
MAIN
AND
THEN
SET
TESSELLATION
LEVELS
TESSELLATION
CONTROL
SHADER
VARIABLES
THE
ARRAY
IS
ACTUALLY
AN
ARRAY
OF
STRUCTURES
WITH
EACH
ELEMENT
DEFINED
AS
IN
FLOAT
FLOAT
AND
FOR
EACH
VALUE
THAT
YOU
NEED
DOWNSTREAM
E
G
IN
THE
TESSELLATION
EVALUATION
SHADER
YOU
LL
NEED
TO
ASSIGN
VALUES
SIMILAR
TO
WHAT
WE
DID
WITH
THE
FIELD
THE
ARRAY
HAS
THE
SAME
FIELDS
BUT
IS
A
DIFFERENT
SIZE
SPECIFIED
BY
WHICH
AS
WE
SAW
WAS
SET
IN
THE
TESSELLATION
CONTROL
SHADER
OUT
LAYOUT
QUALIFIER
ADDITIONALLY
THE
FOLLOWING
SCALAR
VALUES
DESCRIBED
IN
TABLE
ARE
PROVIDED
FOR
DETERMINING
WHICH
PRIMITIVE
AND
OUTPUT
VERTEX
INVOCATION
IS
BEING
SHADED
TABLE
TESSELLATION
CONTROL
SHADER
INPUT
VARIABLES
VARIABLE
DECLARATION
DESCRIPTION
INVOCATION
INDEX
FOR
THE
OUTPUT
VERTEX
OF
THE
CURRENT
TESSELLATION
CONTROL
SHADER
PRIMITIVE
INDEX
FOR
CURRENT
INPUT
PATCH
NUMBER
OF
VERTICES
IN
THE
INPUT
PATCH
WHICH
IS
THE
DIMENSION
OF
NUMBER
OF
VERTICES
IN
THE
OUTPUT
PATCH
WHICH
IS
THE
DIMENSION
OF
CHAPTER
TESSELLATION
SHADERS
IF
YOU
HAVE
ADDITIONAL
PER
VERTEX
ATTRIBUTE
VALUES
EITHER
FOR
INPUT
OR
OUTPUT
THESE
NEED
TO
BE
DECLARED
AS
EITHER
IN
OR
OUT
ARRAYS
IN
YOUR
TESSELLATION
CONTROL
SHADER
THE
SIZE
OF
AN
INPUT
ARRAY
NEEDS
TO
BE
SIZED
TO
THE
INPUT
PATCH
SIZE
OR
CAN
BE
DECLARED
UNSIZED
AND
OPENGL
WILL
APPROPRIATELY
ALLOCATE
SPACE
FOR
ALL
ITS
VALUES
SIMILARLY
PER
VERTEX
OUTPUT
ATTRIBUTES
WHICH
YOU
WILL
BE
ABLE
TO
ACCESS
IN
THE
TESSELLATION
EVALUATION
SHADER
NEED
TO
BE
SIZED
TO
THE
NUMBER
OF
VERTICES
IN
THE
OUTPUT
PATCH
OR
CAN
BE
DECLARED
UNSIZED
AS
WELL
CONTROLLING
TESSELLATION
THE
OTHER
FUNCTION
OF
A
TESSELLATION
CONTROL
SHADER
IS
TO
SPECIFY
HOW
MUCH
TO
TESSELLATE
THE
OUTPUT
PATCH
WHILE
WE
HAVEN
T
DISCUSSED
TESSELLATION
EVALUATION
SHADERS
IN
DETAIL
YET
THEY
CONTROL
THE
TYPE
OF
OUTPUT
PATCH
FOR
RENDERING
AND
CONSEQUENTLY
THE
DOMAIN
WHERE
TESSELLATION
OCCURS
OPENGL
SUPPORTS
THREE
TESSELLATION
DOMAINS
A
QUADRILATERAL
A
TRIANGLE
AND
A
COLLECTION
OF
ISOLINES
THE
AMOUNT
OF
TESSELLATION
IS
CONTROLLED
BY
SPECIFYING
TWO
SETS
OF
VALUES
THE
INNER
AND
OUTER
TESSELLATION
LEVELS
THE
OUTER
TESSELLATION
LEVELS
CONTROL
HOW
THE
PERIMETER
OF
THE
DOMAIN
IS
SUBDIVIDED
AND
IS
STORED
IN
AN
IMPLICITLY
DECLARED
FOUR
ELEMENT
ARRAY
NAMED
SIMILARLY
THE
INNER
TESSELLATION
LEVELS
SPECIFY
HOW
THE
INTERIOR
OF
THE
DOMAIN
IS
SUBDIVIDED
AND
STORED
IN
A
TWO
ELEMENT
ARRAY
NAMED
ALL
TESSELLATION
LEVEL
FACTORS
ARE
FLOATING
POINT
VALUES
AND
WE
LL
SEE
THE
EFFECT
THAT
FRACTIONAL
VALUES
HAVE
ON
TESSELLATIONS
IN
A
BIT
ONE
FINAL
POINT
IS
THAT
WHILE
THE
DIMENSIONS
OF
THE
IMPLICITLY
DECLARED
TESSELLATION
LEVEL
FACTORS
ARRAYS
ARE
FIXED
THE
NUMBER
OF
VALUES
USED
FROM
THOSE
ARRAYS
DEPENDS
ON
THE
TYPE
OF
TESSELLATION
DOMAIN
UNDERSTANDING
HOW
THE
INNER
AND
OUTER
TESSELLATION
LEVELS
OPERATE
IS
KEY
TO
GETTING
TESSELLATION
TO
DO
WHAT
YOU
WANT
EACH
OF
THE
TESSELLATION
LEVEL
FACTORS
SPECIFIES
HOW
MANY
SEGMENTS
TO
SUBDIVIDE
A
REGION
AS
WELL
AS
HOW
MANY
TESSELLATION
COORDINATES
AND
GEOMETRIC
PRIMITIVES
TO
GENERATE
HOW
THAT
SUBDIVISION
IS
DONE
VARIES
BY
DOMAIN
TYPE
WE
LL
DISCUSS
EACH
TYPE
OF
DOMAIN
IN
TURN
AS
THEY
OPERATE
DIFFERENTLY
QUAD
TESSELLATION
USING
THE
QUADRILATERIAL
DOMAIN
MAY
BE
THE
MOST
INTUITIVE
SO
WE
LL
BEGIN
WITH
IT
IT
USEFUL
WHEN
YOUR
INPUT
PATCHES
ARE
RECTANGULAR
IN
SHAPE
AS
YOU
MIGHT
HAVE
WHEN
USING
TWO
DIMENSIONAL
SPLINE
SURFACES
LIKE
BÉZIER
SURFACES
THE
QUAD
DOMAIN
SUBDIVIDES
THE
UNIT
SQUARE
USING
ALL
OF
THE
TESSELLATION
CONTROL
SHADERS
INNER
AND
OUTER
TESSELLATION
LEVELS
FOR
INSTANCE
IF
WE
WERE
TO
SET
THE
TESSELLATION
LEVEL
FACTORS
TO
THE
FOLLOWING
VALUES
OPENGL
WOULD
TESSELLATE
THE
QUAD
DOMAIN
AS
ILLUSTRATED
IN
FIGURE
FIGURE
QUAD
TESSELLATION
A
TESSELLATION
OF
A
QUAD
DOMAIN
USING
THE
TESSELLATION
LEVELS
FROM
EXAM
PLE
EXAMPLE
TESSELLATION
LEVELS
FOR
QUAD
DOMAIN
TESSELLATION
ILLUSTRATED
IN
FIGURE
CHAPTER
TESSELLATION
SHADERS
NOTICE
THAT
THE
OUTER
TESSELLATION
LEVELS
VALUES
CORRESPOND
TO
THE
NUMBER
OF
SEGMENTS
FOR
EACH
EDGE
AROUND
THE
PERIMETER
WHILE
THE
INNER
TESSELLATION
LEVELS
SPECIFY
HOW
MANY
REGIONS
ARE
IN
THE
HORIZONTAL
AND
VERTICAL
DIRECTIONS
IN
THE
INTERIOR
OF
THE
DOMAIN
ALSO
SHOWN
IN
FIGURE
IS
A
POSSIBLE
TRIANGULARIZATION
OF
THE
DOMAIN
SHOWN
USING
THE
DASHED
LINES
LIKEWISE
THE
SOLID
CIRCLES
REPRESENT
THE
TESSELLATION
COORDINATES
EACH
OF
WHICH
WILL
BE
PROVIDED
AS
INPUT
INTO
THE
TESSELLATION
EVALUATION
SHADER
IN
THE
CASE
OF
THE
QUAD
DOMAIN
THE
TESSELLATION
COORDINATES
WILL
HAVE
TWO
COORDINATES
U
V
WHICH
WILL
BOTH
BE
IN
THE
RANGE
AND
EACH
TESSELLATION
COORDINATE
WILL
BE
PASSED
INTO
AN
INVOCATION
OF
AN
TESSELLATION
EVALUATION
SHADER
ISOLINE
TESSELLATION
SIMILAR
TO
THE
QUAD
DOMAIN
THE
ISOLINE
DOMAIN
ALSO
GENERATES
U
V
PAIRS
AS
TESSELLATION
COORDINATES
FOR
THE
TESSELLATION
EVALUATION
SHADER
ISOLINES
HOWEVER
USE
ONLY
TWO
OF
THE
OUTER
TESSELLATION
LEVELS
TO
DETERMINE
THE
AMOUNT
OF
SUBDIVSION
AND
NONE
OF
THE
INNER
TESSELLATION
LEVELS
THIS
IS
ILLUSTRATED
IN
FIGURE
FOR
THE
TESSELLATION
LEVEL
FACTORS
SHOWN
IN
EXAMPLE
EXAMPLE
TESSLATION
LEVELS
FOR
AN
ISOLINE
DOMAIN
TESSELLATION
SHOWN
IN
FIGURE
YOU
LL
NOTICE
THAT
THERE
A
DASHED
LINE
ALONG
THE
V
EDGE
THAT
BECAUSE
ISOLINES
DON
T
INCLUDE
A
TESSELLATED
ISOLINE
ALONG
THAT
EDGE
AND
IF
YOU
PLACE
TWO
ISOLINE
PATCHES
TOGETHER
I
E
TWO
PATCHES
SHARE
AN
EDGE
THERE
ISN
T
OVERLAP
OF
THE
EDGES
TRIANGLE
TESSELLATION
FINALLY
LET
DISCUSS
TESSELLATION
USING
A
TRIANGLE
DOMAIN
AS
COMPARED
TO
EITHER
THE
QUAD
OR
ISOLINES
DOMAINS
COORDINATES
RELATED
TO
THE
THREE
VERTICES
OF
A
TRIANGLE
AREN
T
VERY
CONVENIENTLY
REPRESENTED
BY
A
U
V
PAIR
INSTEAD
TRIANGULAR
DOMAINS
USE
BARYCENTRIC
COORDINATES
TO
SPECIFY
THEIR
TESSELLATION
COORDINATES
BARYCENTRIC
COORDINATES
ARE
REPRESENTED
BY
A
TRIPLET
OF
NUMBERS
A
B
C
EACH
OF
WHICH
LIES
IN
THE
RANGE
AND
WHICH
TRIANGULARIZATION
OF
THE
DOMAIN
IS
IMPLEMENTATION
DEPENDENT
TESSELLATION
CONTROL
SHADERS
HAVE
THE
PROPERTY
THAT
A
B
C
THINK
OF
A
B
OR
C
AS
WEIGHTS
FOR
EACH
INDIVIDUAL
TRIANGLE
VERTEX
0
0
FIGURE
ISOLINE
TESSELLATION
A
TESSELLATION
OF
AN
ISOLINES
DOMAIN
USING
THE
TESSELLATIONS
LEVELS
FROM
EX
AMPLE
AS
WITH
ANY
OF
THE
OTHER
DOMAINS
THE
GENERATED
TESSELLATION
COORDINATES
ARE
A
FUNCTION
OF
THE
TESSELLATION
LEVEL
FACTORS
AND
IN
PARTICULAR
THE
FIRST
THREE
OUTER
TESSELLATION
LEVELS
AND
ONLY
INNER
TESSELLATION
LEVEL
ZERO
THE
TESSELLATION
OF
A
TRIANGULAR
DOMAIN
WITH
TESSELLATION
LEVEL
FACTORS
SET
AS
IN
EXAMPLE
5
IS
SHOWN
IN
FIGURE
EXAMPLE
5
TESSLATION
LEVELS
FOR
A
TRIANGULAR
DOMAIN
TESSELLATION
SHOWN
IN
FIGURE
0
6
5
8
0
5
CHAPTER
TESSELLATION
SHADERS
0
0
0
0
0
0
FIGURE
TRIANGLE
TESSELLATION
A
TESSELLATION
OF
A
TRIANGULAR
DOMAIN
USING
THE
TESSELLATION
LEVELS
FROM
EXAMPLE
5
AS
WITH
THE
OTHER
DOMAINS
THE
OUTER
TESSELLATION
LEVELS
CONTROL
THE
SUBDIVISION
OF
THE
PERIMETER
OF
THE
TRIANGLE
AND
THE
INNER
TESSELLATION
LEVEL
CONTROLS
HOW
THE
INTERIOR
IS
PARTITIONED
AS
COMPARED
TO
THE
RECTANGULAR
DOMAINS
WHERE
THE
INTERIOR
IS
PARTITIONED
IN
A
SET
OF
RECTANGLES
FORMING
A
GRID
THE
INTERIOR
OF
THE
TRIANGULAR
DOMAIN
IS
PARTITIONED
INTO
A
SET
OF
CONCENTRIC
TRIANGLES
THAT
FORM
THE
REGIONS
SPECIFICALLY
LET
T
REPRESENT
THE
INNER
TESSELLATION
LEVEL
IF
T
IS
AN
EVEN
VALUE
THEN
THE
CENTER
OF
THE
TRIANGULAR
DOMAIN
BARYCENTRIC
COORDINATE
IS
LOCATED
AND
THEN
T
CONCENTRIC
TRIANGLES
ARE
GENERATED
BETWEEN
THE
CENTER
POINT
AND
THE
PERIMETER
CONVERSELY
IF
T
IS
AN
ODD
VALUE
THEN
T
CONCENTRIC
TRIANGLES
ARE
OUT
TO
THE
PERIMETER
HOWEVER
THE
CENTER
POINT
IN
BARYCENTRIC
COORDINATES
WILL
NOT
BE
A
TESSELLATION
COORDINATE
THESE
TWO
SCENARIOS
ARE
SHOWN
IN
FIGURE
BYPASSING
THE
TESSELLATION
CONTROL
SHADER
AS
WE
MENTIONED
OFTEN
YOUR
TESSELLATION
CONTROL
SHADER
WILL
JUST
BE
A
PASS
THROUGH
SHADER
COPYING
DATA
FROM
INPUT
TO
OUTPUT
IN
SUCH
A
CASE
YOU
CAN
ACTUALLY
BYPASS
USING
A
TESSELLATION
CONTROL
SHADER
AND
SET
THE
TESSELLATION
CONTROL
SHADERS
ODD
INNER
TESSELLATION
LEVELS
CREATE
A
SMALL
TRIANGLE
IN
THE
CENTER
OF
THE
TRIANGULAR
TESSELLATION
DOMAIN
EVEN
INNER
TESSELLATION
LEVELS
CREATE
A
SINGLE
TESSELLATION
COORDINATE
IN
THE
CENTER
OF
THE
TRIANGULAR
TESSELLATION
DOMAIN
FIGURE
EVEN
AND
ODD
TESSELLATION
EXAMPLES
OF
HOW
EVEN
AND
ODD
INNER
TESSELLATION
LEVELS
AFFECT
TRIANGULAR
TESSELLATION
TESSELLATION
LEVEL
FACTORS
USING
THE
OPENGL
API
AS
COMPARED
TO
USING
A
SHADER
THE
GLPATCHPARAMETERFV
FUNCTION
CAN
BE
USED
TO
SET
THE
INNER
AND
OUTER
TESSELLATION
LEVELS
TESSELLATION
EVALUATION
SHADERS
THE
FINAL
PHASE
IN
OPENGL
TESSELLATION
PIPELINE
IS
THE
TESSELLATION
EVALUATION
SHADER
EXECUTION
THE
BOUND
TESSELLATION
EVALUATION
SHADER
IS
EXECUTED
ONE
FOR
EACH
TESSELLATION
COORDINATE
THAT
THE
PRIMITIVE
GENERATOR
CHAPTER
TESSELLATION
SHADERS
EMITS
AND
IS
RESPONSIBLE
FOR
DETERMINING
THE
POSITION
OF
THE
VERTEX
DERIVED
FROM
THE
TESSELLATION
COORDINATE
AS
WE
LL
SEE
TESSELLATION
EVALUATION
SHADERS
LOOK
SIMILAR
TO
VERTEX
SHADERS
IN
TRANSFORMING
VERTICES
INTO
SCREEN
POSITIONS
UNLESS
THE
TESSELLATION
EVALUATION
SHADER
DATA
IS
GOING
TO
BE
FURTHER
PROCESSED
BY
A
GEOMETRY
SHADER
THE
FIRST
STEP
IN
CONFIGURING
A
TESSELLATION
EVALUATION
SHADER
IS
TO
CONFIGURE
THE
PRIMITIVE
GENERATOR
WHICH
IS
DONE
USING
A
LAYOUT
DIRECTIVE
SIMILAR
TO
WHAT
WE
DID
IN
THE
TESSELLATION
CONTROL
SHADER
ITS
PARAMETERS
SPECIFY
THE
TESSELLATION
DOMAIN
AND
SUBSEQUENTLY
THE
TYPE
OF
PRIMITIVES
GENERATED
FACE
ORIENTATION
FOR
SOLID
PRIMITIVES
USED
FOR
FACE
CULLING
AND
HOW
THE
TESSELLATION
LEVELS
SHOULD
BE
APPLIED
DURING
PRIMITIVE
GENERATION
SPECIFYING
THE
PRIMITIVE
GENERATION
DOMAIN
WE
LL
NOW
DESCRIBE
THE
PARAMETERS
THAT
YOU
WILL
USE
TO
SET
UP
THE
TESSELLATION
EVALUATION
SHADER
OUT
LAYOUT
DIRECTIVE
FIRST
WE
LL
TALK
ABOUT
SPECIFYING
THE
TESSELLATION
DOMAIN
AS
YOU
VE
SEEN
THERE
ARE
THREE
TYPES
OF
DOMAINS
USED
FOR
GENERATING
TESSELLATION
COORDINATES
WHICH
ARE
DESCRIBED
IN
TABLE
TABLE
EVALUATION
SHADER
PRIMITIVE
TYPES
PRIMITIVE
TYPE
DESCRIPTION
DOMAIN
COORDINATES
QUADS
A
RECTANGULAR
DOMAIN
OVER
THE
UNIT
SQUARE
TRIANGLES
A
TRIANGULAR
SHAPED
DOMAIN
USING
BARYCENTRIC
COORDINATES
ISOLINES
A
COLLECTION
OF
LINES
ACROSS
THE
UNIT
SQUARE
A
U
V
PAIR
WITH
U
V
VALUES
RANGING
FROM
0
TO
A
B
C
WITH
A
B
AND
C
VALUES
RANGING
FROM
0
TO
AND
WHERE
A
B
C
A
U
V
PAIR
WITH
U
VALUES
RANGING
FROM
0
TO
AND
V
VALUES
RANGING
FROM
0
TO
ALMOST
SPECIFYING
THE
FACE
WINDING
FOR
GENERATED
PRIMITIVES
AS
WITH
ANY
FILLED
PRIMITIVE
IN
OPENGL
THE
ORDER
THE
VERTICES
ARE
ISSUED
DETERMINES
THE
FACEDNESS
OF
THE
PRIMITIVE
SINCE
WE
DON
T
ISSUE
THE
VERTICES
DIRECTLY
IN
THIS
CASE
BUT
RATHER
HAVE
THE
PRIMITIVE
GENERATOR
DO
IT
ON
OUR
BEHALF
WE
NEED
TO
TELL
IT
THE
FACE
WINDING
OF
OUR
PRIMITIVES
IN
THE
LAYOUT
DIRECTIVE
SPECIFY
CW
FOR
CLOCKWISE
VERTEX
WINDING
OR
CCW
FOR
COUNTERCLOCK
WISE
VERTEX
WINDING
TESSELLATION
EVALUATION
SHADERS
SPECIFYING
THE
SPACING
OF
TESSELLATION
COORDINATES
ADDITIONALLY
WE
CAN
CONTROL
HOW
FRACTIONAL
VALUES
FOR
THE
OUTER
TESSELLATION
LEVELS
ARE
USED
IN
DETERMINING
THE
TESSELLATION
COORDINATE
GENERATION
FOR
THE
PERIMETER
EDGES
INNER
TESSELLATION
LEVELS
ARE
AFFECTED
BY
THESE
OPTIONS
TABLE
DESCRIBES
THE
THREE
SPACING
OPTIONS
AVAILABLE
WHERE
MAX
REPRESENTS
AN
OPENGL
IMPLEMENTATION
MAXIMUM
ACCEPTED
VALUE
FOR
A
TESSELLATION
LEVEL
TABLE
OPTIONS
FOR
CONTROLLING
TESSELLATION
LEVEL
EFFECTS
OPTION
DESCRIPTION
TESSELLATION
LEVEL
IS
CLAMPED
TO
MAX
AND
IS
THEN
ROUNDED
UP
TO
THE
NEXT
LARGEST
INTEGER
VALUE
THE
VALUE
IS
CLAMPED
TO
MAX
AND
THEN
ROUNDED
UP
TO
THE
NEXT
LARGEST
EVEN
INTEGER
VALUE
N
THE
EDGE
IS
THEN
DIVIDED
INTO
N
EQUAL
LENGTH
PARTS
AND
TWO
OTHER
PARTS
ONE
AT
EITHER
END
WHICH
MAY
BE
SHORTER
THAN
THE
OTHER
LENGTHS
THE
VALUE
IS
CLAMPED
TO
MAX
AND
THEN
ROUNDED
UP
TO
THE
NEXT
LARGEST
ODD
INTEGER
VALUE
N
THE
EDGE
IS
THEN
DIVIDED
INTO
N
EQUAL
LENGTH
PARTS
AND
TWO
OTHER
PARTS
ONE
AT
EITHER
END
WHICH
MAY
BE
SHORTER
THAN
THE
OTHER
LENGTHS
ADDITIONAL
TESSELLATION
EVALUATION
SHADER
LAYOUT
OPTIONS
FINALLY
SHOULD
YOU
WANT
TO
OUTPUT
POINTS
AS
COMPARED
TO
ISOLINES
OR
FILLED
REGIONS
YOU
CAN
SUPPLY
THE
OPTION
WHICH
WILL
RENDER
A
SINGLE
POINT
FOR
EACH
VERTEX
PROCESSED
BY
THE
TESSELLATION
EVALUATION
SHADER
THE
ORDER
OF
OPTIONS
WITHIN
THE
LAYOUT
DIRECTIVE
IS
NOT
IMPORTANT
AS
AN
EXAMPLE
THE
FOLLOWING
LAYOUT
DIRECTIVE
WILL
REQUEST
PRIMITIVES
GENERATED
ON
A
TRIANGULAR
DOMAIN
USING
EQUAL
SPACING
COUNTERCLOCKWISE
ORIENTED
TRIANGLES
BUT
ONLY
RENDERING
POINTS
AS
COMPARED
TO
CONNECTED
PRIMITIVES
LAYOUT
TRIANGLES
CCW
POINTS
OUT
SPECIFYING
A
VERTEX
POSITION
THE
VERTICES
OUTPUT
FROM
THE
TESSELLATION
CONTROL
SHADER
I
E
THE
VALUES
IN
ARRAY
ARE
MADE
AVAILABLE
IN
THE
EVALUATION
CHAPTER
TESSELLATION
SHADERS
SHADER
IN
THE
VARIABLE
WHICH
WHEN
COMBINED
WITH
TESSELLATION
COORDINATES
CAN
BE
USED
TO
GENERATE
THE
OUTPUT
VERTEX
POSITION
TESSELLATION
COORDINATES
ARE
PROVIDED
TO
THE
SHADER
IN
THE
VARIABLE
IN
EXAMPLE
6
WE
USE
A
COMBINATION
OF
EQUAL
SPACED
QUADS
TO
RENDER
A
SIMPLE
PATCH
IN
THIS
CASE
THE
TESSELLATION
COORDINATES
ARE
USED
TO
COLOR
THE
SURFACE
AND
ILLUSTRATES
HOW
TO
COMPUTE
THE
VERTEX
POSITION
EXAMPLE
6
A
SAMPLE
TESSELLATION
EVALUATION
SHADER
VERSION
CORE
LAYOUT
QUADS
CCW
IN
OUT
COLOR
VOID
MAIN
FLOAT
U
X
FLOAT
OMU
U
ONE
MINUS
U
FLOAT
V
Y
FLOAT
OMV
V
ONE
MINUS
V
COLOR
OMU
OMV
0
U
OMV
U
V
OMU
V
TESSELLATION
EVALUATION
SHADER
VARIABLES
SIMILAR
TO
TESSELLATION
CONTROL
SHADERS
TESSELLATION
EVALUATION
SHADERS
HAVE
A
ARRAY
THAT
IS
ACTUALLY
AN
ARRAY
OF
STRUCTURES
WITH
EACH
ELEMENT
DEFINED
AS
SHOWN
IN
EXAMPLE
7
EXAMPLE
7
PARAMETERS
FOR
TESSELLATION
EVALUATION
SHADERS
IN
FLOAT
FLOAT
TESSELLATION
EVALUATION
SHADERS
ADDITIONALLY
THE
FOLLOWING
SCALAR
VALUES
DESCRIBED
IN
TABLE
ARE
PROVIDED
FOR
DETERMINING
WHICH
PRIMITIVE
AND
FOR
COMPUTING
THE
POSITION
OF
THE
OUTPUT
VERTEX
TABLE
TESSELLATION
CONTROL
SHADER
INPUT
VARIABLES
VARIABLE
DECLARATION
DESCRIPTION
PRIMITIVE
INDEX
FOR
CURRENT
INPUT
PATCH
NUMBER
OF
VERTICES
IN
THE
INPUT
PATCH
WHICH
IS
THE
DIMENSION
OF
OUTER
TESSELLATION
LEVEL
VALUES
INNER
TESSELLATION
LEVEL
VALUES
COORDINATES
IN
PATCH
DOMAIN
SPACE
OF
THE
VERTEX
BEING
SHADED
IN
THE
EVALUATION
SHADER
THE
OUTPUT
VERTEX
DATA
IS
STORED
IN
AN
INTERFACE
BLOCK
DEFINED
AS
FOLLOWS
OUT
FLOAT
FLOAT
A
TESSELLATION
EXAMPLE
THE
TEAPOT
ALL
OF
THAT
THEORY
COULD
USE
A
CONCRETE
DEMONSTRATION
IN
THIS
SECTION
WE
LL
RENDER
THE
FAMOUS
UTAH
TEAPOT
USING
BÉZIER
PATCHES
A
BÉZIER
PATCH
NAMED
AFTER
FRENCH
ENGINEER
PIERRE
BÉZIER
DEFINES
A
PARAMETRIC
SURFACE
EVALUATED
OVER
THE
UNIT
SQUARE
USING
CONTROL
POINTS
ARRANGED
IN
A
GRID
FOR
OUR
EXAMPLE
WE
LL
USE
CONTROL
POINTS
ARRANGED
IN
A
GRID
AS
SUCH
WE
MAKE
THE
FOLLOWING
OBSERVATIONS
TO
HELP
US
SET
UP
OUR
TESSELLATION
BÉZIER
PATCHES
ARE
DEFINED
OVER
THE
UNIT
SQUARE
WHICH
INDICATES
WE
SHOULD
USE
THE
QUADS
DOMAIN
TYPE
THAT
WE
LL
SPECIFY
IN
OUR
LAYOUT
DIRECTIVE
IN
THE
TESSELLATION
EVALUATION
SHADER
EACH
PATCH
HAS
CONTROL
POINTS
SO
OUR
SHOULD
BE
SET
TO
USING
GLPATCHPARAMETERI
THE
CONTROL
POINTS
ALSO
DEFINE
THE
NUMBER
OF
INPUT
PATCH
VERTICES
WHICH
TELLS
US
OUR
MAXIMUM
INDEX
INTO
THE
ARRAY
IN
OUR
TESSELLATION
CONTROL
SHADER
FINALLY
SINCE
THE
TESSELLATION
CONTROL
SHADER
DOESN
T
ADD
OR
REMOVE
ANY
VERTICES
TO
THE
PATCH
THE
NUMBER
OF
OUTPUT
PATCH
VERTICES
WILL
ALSO
BE
WHICH
SPECIFIES
THE
VALUE
WE
LL
USE
IN
OUR
LAYOUT
DIRECTIVE
IN
THE
TESSELLATION
CONTROL
SHADER
CHAPTER
TESSELLATION
SHADERS
PROCESSING
PATCH
INPUT
VERTICES
GIVEN
THE
INFORMATION
FROM
OUR
PATCHES
WE
CAN
EASILY
CONSTRUCT
THE
TESSELLATION
CONTROL
SHADER
FOR
OUR
APPLICATION
WHICH
IS
SHOWN
IN
EXAMPLE
8
EXAMPLE
8
TESSELLATION
CONTROL
SHADER
FOR
TEAPOT
EXAMPLE
VERSION
CORE
LAYOUT
VERTICES
OUT
VOID
MAIN
0
0
USING
THE
TESSELLATION
LEVEL
FACTORS
FROM
EXAMPLE
8
FIGURE
5
SHOWS
THE
PATCHES
OF
THE
TEAPOT
SHRUNK
SLIGHTLY
TO
EXPOSE
EACH
INDIVIDUAL
PATCH
THIS
IS
A
VERY
SIMPLE
EXAMPLE
OF
A
TESSELLATION
CONTROL
SHADER
IN
FACT
IT
A
GREAT
EXAMPLE
OF
A
PASS
THROUGH
SHADER
WHERE
MOSTLY
THE
INPUTS
ARE
COPIED
TO
THE
OUTPUT
THE
SHADER
ALSO
SETS
THE
INNER
AND
OUTER
TESSELLATION
LEVELS
TO
CONSTANT
VALUES
WHICH
COULD
ALSO
BE
DONE
IN
THE
APPLICATION
USING
A
CALL
TO
GLPATCHPARAMETERFV
HOWEVER
WE
INCLUDE
THE
EXAMPLE
HERE
FOR
COMPLETENESS
EVALUATING
TESSELLATION
COORDINATES
FOR
THE
TEAPOT
BÉZIER
PATCHES
USE
A
BIT
OF
MATHEMATICS
TO
DETERMINE
THE
FINAL
VERTEX
POSITION
FROM
THE
INPUT
CONTROL
POINTS
THE
EQUATION
MAPPING
A
TESSELLATION
COORDINATE
TO
A
VERTEX
POSITION
FOR
OUR
PATCH
IS
P
U
V
B
I
U
B
J
V
VIJ
I
0
J
0
A
TESSELLATION
EXAMPLE
THE
TEAPOT
FIGURE
5
THE
TESSELLATED
PATCHES
OF
THE
TEAPOT
WITH
P
BEING
THE
FINAL
VERTEX
POSITION
VIJ
THE
INPUT
CONTROL
POINT
AT
INDEX
I
J
IN
OUR
INPUT
PATCH
BOTH
OF
WHICH
ARE
IN
GLSL
AND
B
WHICH
ARE
TWO
SCALING
FUNCTIONS
WHILE
IT
MIGHT
NOT
SEEM
LIKE
IT
WE
CAN
MAP
EASILY
THE
FORMULA
TO
A
TESSELLATION
EVALUATION
SHADER
AS
SHOW
IN
EXAMPLE
IN
THE
FOLLOWING
SHADER
THE
B
FUNCTION
WILL
BE
A
GLSL
FUNCTION
WE
LL
DEFINE
IN
A
MOMENT
WE
ALSO
SPECIFY
OUR
QUADS
DOMAIN
SPACING
OPTIONS
AND
POLYGON
FACE
ORIENTATION
IN
THE
LAYOUT
DIRECTIVE
EXAMPLE
THE
MAIN
ROUTINE
OF
THE
TEAPOT
TESSELLATION
EVALUATION
SHADER
VERSION
CORE
LAYOUT
QUADS
CCW
OUT
UNIFORM
MV
MODEL
VIEW
MATRIX
UNIFORM
P
PROJECTION
MATRIX
VOID
MAIN
CHAPTER
TESSELLATION
SHADERS
P
0
0
FLOAT
U
X
FLOAT
V
Y
FOR
INT
J
0
J
J
FOR
INT
I
0
I
I
P
B
I
U
B
J
V
J
I
P
MV
P
OUR
B
FUNCTION
IS
ONE
OF
THE
BERNSTEIN
POLYNOMIALS
WHICH
IS
AN
ENTIRE
FAMILY
OF
MATHEMATICAL
FUNCTIONS
EACH
ONE
RETURNS
A
SCALAR
VALUE
WE
RE
USING
A
SMALL
SELECT
SET
OF
FUNCTIONS
WHICH
WE
INDEX
USING
THE
FIRST
PARAMETER
AND
EVALUATE
THE
FUNCTION
VALUE
AT
ONE
COMPONENT
OF
OUR
TESSELLATION
COORDINATE
HERE
THE
MATHEMATICAL
DEFINITION
OF
OUR
FUNCTIONS
B
I
U
UI
U
I
WHERE
THE
IS
A
PARTICULAR
INSTANCE
OF
A
MATHEMATICAL
CONSTRUCT
CALLED
A
BINOMIAL
COEFFICIENT
WE
LL
SPARE
YOU
THE
GORY
DETAILS
AND
JUST
SAY
WE
RE
LUCKY
THAT
IT
EVALUATES
TO
EITHER
OR
3
IN
OUR
CASES
AND
WHICH
WE
LL
HARD
CODE
INTO
A
LOOKUP
TABLE
BC
IN
THE
FUNCTION
DEFINITION
AND
THAT
WE
LL
INDEX
USING
I
AS
SUCH
WE
CAN
REWRITE
B
I
U
AS
B
I
U
BCI
UI
U
3
I
THIS
ALSO
TRANSLATES
EASILY
INTO
GLSL
SHOWN
IN
EXAMPLE
EXAMPLE
DEFINITION
OF
B
I
U
FOR
THE
TEAPOT
TESSELLATION
EVALUATION
SHADER
FLOAT
B
INT
I
FLOAT
U
BINOMIAL
COEFFICIENT
LOOKUP
TABLE
CONST
BC
3
3
RETURN
BC
I
POW
U
I
POW
0
U
3
I
BINOMIAL
COEFFICIENTS
IN
GENERALLY
DEFINED
USING
THE
FORMULA
N
N
WHERE
N
IS
THE
N
N
A
TESSELLATION
EXAMPLE
THE
TEAPOT
WHILE
THAT
CONVERSATION
INVOLVED
MORE
MATHEMATICS
THAN
MOST
OF
THE
OTHER
TECHNIQUES
WE
VE
DESCRIBED
IN
THE
BOOK
IT
IS
REPRESENTATIVE
OF
WHAT
YOU
WILL
ENCOUNTER
WHEN
WORKING
WITH
TESSELLATED
SURFACES
WHILE
DISCUSSION
OF
THE
MATHEMATICS
OF
SURFACES
IS
OUTSIDE
OF
THIS
TEXT
COPIOUS
RESOURCES
ARE
AVAILABLE
THAT
DESCRIBE
THE
REQUIRED
TECHNIQUES
ADDITIONAL
TESSELLATION
TECHNIQUES
IN
THIS
FINAL
SECTION
WE
BRIEFLY
DESCRIBE
A
FEW
ADDITIONAL
TECHNIQUES
YOU
CAN
EMPLOY
WHILE
USING
TESSELLATION
SHADERS
VIEW
DEPENDENT
TESSELLATION
MOST
OF
THE
EXAMPLES
IN
THIS
CHAPTER
HAVE
SET
THE
TESSELLATION
LEVEL
FACTORS
TO
CONSTANT
VALUES
EITHER
IN
THE
SHADER
OR
THROUGH
UNIFORM
VARIABLES
ONE
KEY
FEATURE
OF
TESSELLATION
IS
BEING
ABLE
TO
COMPUTE
TESSELLATION
LEVELS
DYNAMICALLY
IN
THE
TESSELLATION
CONTROL
SHADER
AND
IN
PARTICULAR
BASING
THE
AMOUNT
OF
TESSELLATION
ON
VIEW
DEPENDENT
PARAMETERS
FOR
EXAMPLE
YOU
MIGHT
IMPLEMENT
A
LEVEL
OF
DETAIL
SCHEME
BASED
ON
THE
DISTANCE
OF
THE
PATCH
FROM
THE
EYE
LOCATION
IN
THE
SCENE
IN
EXAMPLE
WE
USE
THE
AVERAGE
OF
ALL
THE
INPUT
PATCH
VERTICES
TO
SPECIFY
A
SINGLE
REPRESENTATIVE
POINT
FOR
THE
PATCH
AND
DERIVE
ALL
THE
TESSELLATION
LEVEL
FACTORS
FROM
THE
DISTANCE
OF
THAT
POINT
TO
THE
EYE
POINT
EXAMPLE
COMPUTING
TESSELLATION
LEVELS
BASED
ON
VIEW
DEPENDENT
PARAMETERS
UNIFORM
EYEPOSITION
VOID
MAIN
CENTER
0
0
FOR
INT
I
0
I
LENGTH
I
CENTER
I
CENTER
LENGTH
FLOAT
D
DISTANCE
CENTER
EYEPOSITION
0
CONST
FLOAT
LODSCALE
5
DISTANCE
SCALING
VARIABLE
FLOAT
TESSLOD
MIX
0
0
D
LODSCALE
CHAPTER
TESSELLATION
SHADERS
FOR
INT
I
0
I
I
I
TESSLOD
TESSLOD
CLAMP
0
5
TESSLOD
0
0
0
TESSLOD
1
TESSLOD
EXAMPLE
IS
A
VERY
RUDIMENTARY
METHOD
FOR
COMPUTING
A
PATCH
LEVEL
OF
DETAIL
IN
PARTICULAR
EACH
PERIMETER
EDGE
IS
TESSELLATED
THE
SAME
AMOUNT
REGARDLESS
OF
ITS
DISTANCE
FROM
THE
EYE
THIS
DOESN
T
TAKE
FULL
ADVANTAGE
OF
TESSELLATION
POSSIBILITIES
BASED
ON
VIEW
INFORMATION
WHICH
IS
USUALLY
EMPLOYED
AS
A
GEOMETRY
OPTIMIZATION
TECHNIQUE
I
E
REDUCING
THE
OBJECT
GEOMETRIC
COMPLEXITY
THE
FARTHER
FROM
THE
EYE
THAT
OBJECT
IS
ASSUMING
A
PERSPECTIVE
PROJECTION
IS
USED
ANOTHER
FAILING
OF
THIS
APPROACH
IS
THAT
IF
YOU
HAVE
MULTIPLE
PATCHES
THAT
SHARE
EDGES
IT
LIKELY
THAT
THE
SHARED
EDGES
MAY
BE
ASSIGNED
DIFFERENT
LEVELS
OF
TESSELLATION
DEPENDING
ON
THE
OBJECTS
ORIENTATION
WITH
RESPECT
TO
THE
EYE
POSITION
AND
THAT
MIGHT
LEAD
TO
CRACKING
ALONG
THE
SHARED
EDGES
CRACKING
IS
AN
IMPORTANT
ISSUE
WITH
TESSELLATION
AND
WE
ADDRESS
ANOTHER
CONCERN
IN
SHARED
TESSELLATED
EDGES
AND
CRACKING
ON
PAGE
TO
ADDRESS
GUARANTEEING
THAT
SHARED
EDGES
ARE
TESSELLATED
THE
SAME
WE
NEED
TO
FIND
A
METHOD
THAT
RETURNS
THE
SAME
TESSELLATION
FACTOR
FOR
THOSE
EDGES
HOWEVER
AS
COMPARED
TO
EXAMPLE
WHICH
DOESN
T
NEED
TO
KNOW
ANYTHING
ABOUT
THE
LOGICAL
ORDERING
OF
INPUT
PATCH
VERTICES
ANY
ALGORITHM
THAT
NEEDS
TO
KNOW
WHICH
VERTICES
ARE
INCIDENT
ON
A
PERIMETER
EDGE
IS
DATA
DEPENDENT
THIS
IS
BECAUSE
A
PATCH
IS
A
LOGICAL
ORDERING
ONLY
THE
APPLICATION
KNOWS
HOW
IT
ORDERED
THE
INPUT
PATCH
VERTICES
FOR
EXAMPLE
WE
INTRODUCE
THE
FOLLOWING
ARRAY
OF
STRUCTURES
THAT
CONTAIN
OUR
EDGE
INFORMATION
FOR
OUR
TESSELLATION
CONTROL
SHADER
STRUCT
EDGECENTERS
EDGECENTER
THE
APPLICATION
WOULD
NEED
TO
POPULATE
THIS
ARRAY
USING
THE
WORLD
SPACE
POSITIONS
OF
THE
CENTERS
OF
EACH
EDGE
IN
THAT
EXAMPLE
WE
LL
ASSUME
WE
RE
WORKING
WITH
THE
QUADS
DOMAIN
WHICH
IS
WHY
THERE
ARE
FOUR
POINTS
IN
EACH
EDGECENTERS
STRUCTURE
THE
NUMBER
OF
POINTS
WOULD
NEED
TO
BE
MODIFIED
FOR
THE
OTHER
DOMAINS
THE
NUMBER
OF
EDGECENTERS
STRUCTURES
IN
THE
ARRAY
IS
THE
NUMBER
OF
PATCHES
THAT
WILL
BE
ISSUED
IN
THE
DRAW
CALL
ADDITIONAL
TESSELLATION
TECHNIQUES
PROCESS
WE
WOULD
MODIFY
THE
TESSELLATION
CONTROL
SHADER
TO
IMPLEMENT
THE
FOLLOWING
EXAMPLE
SPECIFYING
TESSELLATION
LEVEL
FACTORS
USING
PERIMETER
EDGE
CENTERS
STRUCT
EDGECENTERS
EDGECENTER
4
UNIFORM
EYEPOSITION
UNIFORM
EDGECENTERS
PATCH
VOID
MAIN
FOR
INT
I
0
I
4
I
FLOAT
D
DISTANCE
PATCH
EDGECENTER
I
EYEPOSITION
1
0
CONST
FLOAT
LODSCALE
5
DISTANCE
SCALING
VARIABLE
FLOAT
TESSLOD
MIX
0
0
D
LODSCALE
I
TESSLOD
TESSLOD
CLAMP
0
5
TESSLOD
0
0
0
TESSLOD
1
TESSLOD
GL_POSITION
SHARED
TESSELLATED
EDGES
AND
CRACKING
OFTEN
A
GEOMETRIC
MODEL
THAT
USES
TESSELLATION
WILL
HAVE
PATCHES
WITH
SHARED
EDGES
TESSELLATION
IN
OPENGL
GUARANTEES
THAT
THE
GEOMETRY
GENERATED
FOR
THE
PRIMITIVES
WITHIN
A
PATCH
WON
T
HAVE
ANY
CRACKS
BETWEEN
THEM
BUT
IT
CAN
T
MAKE
THE
SAME
CLAIM
FOR
PATCHES
THAT
SHARE
EDGES
THAT
SOMETHING
THE
APPLICATION
NEEDS
TO
ADDRESS
AND
CLEARLY
THE
STARTING
POINT
IS
THAT
SHARED
EDGES
NEED
TO
BE
TESSELLATED
THE
SAME
AMOUNTS
HOWEVER
THERE
S
A
SECONDARY
ISSUE
THAT
CAN
CREEP
IN
PRECISION
IN
MATHEMATICAL
COMPUTATIONS
DONE
BY
A
COMPUTER
FOR
ALL
BUT
TRIVIAL
TESSELLATION
APPLICATIONS
THE
POINTS
ALONG
A
PERIMETER
EDGE
WILL
BE
POSITIONED
USING
MULTIPLE
TESSELLATION
CONTROL
SHADER
OUTPUT
PATCH
VERTICES
WHICH
ARE
COMBINED
WITH
THE
TESSELLATION
COORDINATES
IN
THE
TESSELLATION
EVALUATION
SHADER
IN
ORDER
TO
TRULY
PREVENT
CRACKING
ALONG
EDGES
BETWEEN
SIMILARLY
TESSELLATED
ADJACENT
PATCHES
THE
CHAPTER
TESSELLATION
SHADERS
ORDER
OF
ACCUMULATION
OF
MATHEMATICAL
OPERATIONS
IN
THE
TESSELLATION
EVALUATION
SHADER
MUST
ALSO
MATCH
DEPENDING
UPON
HOW
THE
TESSELLATION
EVALUATION
SHADER
GENERATES
THE
MESH
S
VERTICES
FINAL
POSITIONS
YOU
MAY
NEED
TO
REORDER
THE
PROCESSING
OF
VERTICES
IN
THE
TESSELLATION
EVALUATION
SHADER
A
COMMON
APPROACH
TO
THIS
PROBLEM
IS
TO
RECOGNIZE
THE
OUTPUT
PATCH
VERTICES
THAT
CONTRIBUTE
TO
A
VERTEX
INCIDENT
TO
A
PERIMETER
EDGE
AND
SORT
THOSE
VERTICES
IN
A
PREDICTABLE
MANNER
SAY
IN
TERMS
OF
INCREASING
MAGNITUDE
ALONG
THE
EDGE
ANOTHER
TECHNIQUE
TO
AVOID
CRACKING
IS
APPLYING
THE
PRECISE
QUALIFIER
TO
SHADER
COMPUTATIONS
WHERE
POINTS
MIGHT
BE
IN
REVERSED
ORDER
BETWEEN
TWO
SHADER
INVOCATIONS
THIS
IS
ILLUSTRATED
IN
FIGURE
6
END
POINTS
SAME
LOCATION
VALUE
END
POINTS
SAME
LOCATION
VALUE
FIGURE
6
TESSELLATION
CRACKING
WHEN
WALKING
THE
INTERIOR
EDGE
IN
OPPOSITE
DIRECTIONS
THE
COMPUTED
SUB
DIVISION
POINTS
NEED
TO
RESULT
IN
THE
SAME
VALUE
OR
THE
EDGE
MAY
CRACK
AS
EXPLAINED
IN
THE
PRECISE
QUALIFIER
ON
PAGE
IN
CHAPTER
2
THIS
COMPUTATION
CAN
RESULT
IN
DIFFERENT
VALUES
IF
THE
EXPRESSION
IS
THE
SAME
AND
THE
INPUT
VALUES
ARE
THE
SAME
BUT
SOME
OF
THEM
ARE
SWAPPED
DUE
TO
THE
OPPOSITE
DIRECTION
OF
EDGE
WALKING
QUALIFYING
THE
RESULTS
OF
SUCH
COMPUTATIONS
AS
PRECISE
WILL
PREVENT
THIS
